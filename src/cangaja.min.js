var CG=CG||{VERSION:1,canvas:{},ctx:{},Const_PI_180:Math.PI/180,Const_180_PI:180/Math.PI,LEFT:1,RIGHT:2,UP:3,DOWN:4,mousedown:false,mouse:{x:0,y:0},start:{x:0,y:0},end:{x:0,y:0}};(function(){var b=0;var d=["ms","moz","webkit","o"];for(var a=0;a<d.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[d[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[d[a]+"CancelAnimationFrame"]||window[d[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(k,f){var e=new Date().getTime();var g=Math.max(0,16-(e-b));var j=window.setTimeout(function(){k(e+g)},g);b=e+g;return j}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(e){clearTimeout(e)}}}());(function(){var a=false,b=/xyz/.test(function(){var d})?/\b_super\b/:/.*/;CG.Class=function(){};CG.Class.prototype.isA=function(d){return this.className===d};CG.Class.extend=function(k,e,g){if(!typeof k==="string"){g=e;e=k;k=null}var n=this.prototype,q=this;a=true;var m=new q();a=false;function j(r,s){return function(){var v=this._super;this._super=n[r];var u=s.apply(this,arguments);this._super=v;return u}}for(var f in e){m[f]=typeof e[f]==="function"&&typeof n[f]==="function"&&b.test(e[f])?j(f,e[f]):e[f]}function d(){if(!a&&this.init){this.init.apply(this,arguments)}}d.prototype=m;d.prototype.constructor=d;d.extend=CG.Class.extend;if(g){CG._extend(d,g)}if(k){CG[k]=d;d.prototype.className=k;d.className=k}return d}}());CG.Class.extend("Game",{init:function(b,a){switch(typeof b){case"object":this.canvas=b;break;case"string":this.canvas=document.getElementById(b);break;default:throw"no canvas element defined";break}this.ctx=this.canvas.getContext("2d");this.fps=60;this.width=this.canvas.width;this.height=this.canvas.height;this.width2=this.width/2;this.height2=this.height/2;this.b_canvas=document.createElement("canvas");this.b_canvas.width=this.width;this.b_canvas.height=this.height;this.b_ctx=this.b_canvas.getContext("2d");this.asset=new CG.MediaAsset(this);this.director=new CG.Director();this.renderer=new CG.CanvasRenderer();this.delta=new CG.Delta(this.fps);this.bound=new CG.Bound(0,0,this.width,this.height);this.preload()},preload:function(){},create:function(){this.loop()},loop:function(){requestAnimationFrame(this.loop.bind(this));this.beforeUpdate();this.update();this.beforeDraw();this.draw();this.afterDraw()},beforeUpdate:function(){this.director.update()},update:function(){},beforeDraw:function(){this.director.draw()},draw:function(){},afterDraw:function(){this.ctx.clearRect(0,0,this.bound.width,this.bound.height);this.ctx.drawImage(this.b_canvas,0,0);this.b_ctx.clearRect(0,0,this.bound.width,this.bound.height)}});function Transform(){this.reset()}Transform.prototype.reset=function(){this.m=[1,0,0,1,0,0]};Transform.prototype.multiply=function(d){var f=this.m[0]*d.m[0]+this.m[2]*d.m[1];var e=this.m[1]*d.m[0]+this.m[3]*d.m[1];var j=this.m[0]*d.m[2]+this.m[2]*d.m[3];var g=this.m[1]*d.m[2]+this.m[3]*d.m[3];var b=this.m[0]*d.m[4]+this.m[2]*d.m[5]+this.m[4];var a=this.m[1]*d.m[4]+this.m[3]*d.m[5]+this.m[5];this.m[0]=f;this.m[1]=e;this.m[2]=j;this.m[3]=g;this.m[4]=b;this.m[5]=a};Transform.prototype.invert=function(){var j=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]);var g=this.m[3]*j;var f=-this.m[1]*j;var e=-this.m[2]*j;var b=this.m[0]*j;var a=j*(this.m[2]*this.m[5]-this.m[3]*this.m[4]);var k=j*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=g;this.m[1]=f;this.m[2]=e;this.m[3]=b;this.m[4]=a;this.m[5]=k};Transform.prototype.rotate=function(a){var j=Math.cos(a);var b=Math.sin(a);var e=this.m[0]*j+this.m[2]*b;var d=this.m[1]*j+this.m[3]*b;var g=this.m[0]*-b+this.m[2]*j;var f=this.m[1]*-b+this.m[3]*j;this.m[0]=e;this.m[1]=d;this.m[2]=g;this.m[3]=f};Transform.prototype.translate=function(a,b){this.m[4]+=this.m[0]*a+this.m[2]*b;this.m[5]+=this.m[1]*a+this.m[3]*b};Transform.prototype.scale=function(b,a){this.m[0]*=b;this.m[1]*=b;this.m[2]*=a;this.m[3]*=a};Transform.prototype.transformPoint=function(d,b){var a=d;var e=b;d=a*this.m[0]+e*this.m[2]+this.m[4];b=a*this.m[1]+e*this.m[3]+this.m[5];return[d,b]};(function(D){var E,K={},J={16:false,18:false,17:false,91:false},A="all",f={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},g={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},a=function(k){return g[k]||k.toUpperCase().charCodeAt(0)},G=[];for(E=1;E<20;E++){g["f"+E]=111+E}function m(O,N){var k=O.length;while(k--){if(O[k]===N){return k}}return -1}function H(N,k){if(N.length!=k.length){return false}for(var O=0;O<N.length;O++){if(N[O]!==k[O]){return false}}return true}var z={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function n(k){for(E in J){J[E]=k[z[E]]}}function L(S){var P,R,N,O,T,Q;P=S.keyCode;if(m(G,P)==-1){G.push(P)}if(P==93||P==224){P=91}if(P in J){J[P]=true;for(N in f){if(f[N]==P){j[N]=true}}return}n(S);if(!j.filter.call(this,S)){return}if(!(P in K)){return}Q=u();for(O=0;O<K[P].length;O++){R=K[P][O];if(R.scope==Q||R.scope=="all"){T=R.mods.length>0;for(N in J){if((!J[N]&&m(R.mods,+N)>-1)||(J[N]&&m(R.mods,+N)==-1)){T=false}}if((R.mods.length==0&&!J[16]&&!J[18]&&!J[17]&&!J[91])||T){if(R.method(S,R)===false){if(S.preventDefault){S.preventDefault()}else{S.returnValue=false}if(S.stopPropagation){S.stopPropagation()}if(S.cancelBubble){S.cancelBubble=true}}}}}}function e(Q){var P=Q.keyCode,N,O=m(G,P);if(O>=0){G.splice(O,1)}if(P==93||P==224){P=91}if(P in J){J[P]=false;for(N in f){if(f[N]==P){j[N]=false}}}}function q(){for(E in J){J[E]=false}for(E in f){j[E]=false}}function j(N,O,R){var Q,P;Q=b(N);if(R===undefined){R=O;O="all"}for(var k=0;k<Q.length;k++){P=[];N=Q[k].split("+");if(N.length>1){P=F(N);N=[N[N.length-1]]}N=N[0];N=a(N);if(!(N in K)){K[N]=[]}K[N].push({shortcut:Q[k],scope:O,method:R,key:Q[k],mods:P})}}function I(P,Q){var k,S,R=[],O,N,T;k=b(P);for(N=0;N<k.length;N++){S=k[N].split("+");if(S.length>1){R=F(S);P=S[S.length-1]}P=a(P);if(Q===undefined){Q=u()}if(!K[P]){return}for(O in K[P]){T=K[P][O];if(T.scope===Q&&H(T.mods,R)){K[P][O]={}}}}}function d(k){if(typeof(k)=="string"){k=a(k)}return m(G,k)!=-1}function y(){return G.slice(0)}function r(N){var k=(N.target||N.srcElement).tagName;return !(k=="INPUT"||k=="SELECT"||k=="TEXTAREA")}for(E in f){j[E]=false}function s(k){A=k||"all"}function u(){return A||"all"}function B(P){var O,k,N;for(O in K){k=K[O];for(N=0;N<k.length;){if(k[N].scope===P){k.splice(N,1)}else{N++}}}}function b(k){var N;k=k.replace(/\s/g,"");N=k.split(",");if((N[N.length-1])==""){N[N.length-2]+=","}return N}function F(N){var O=N.slice(0,N.length-1);for(var k=0;k<O.length;k++){O[k]=f[O[k]]}return O}function C(k,N,O){if(k.addEventListener){k.addEventListener(N,O,false)}else{if(k.attachEvent){k.attachEvent("on"+N,function(){O(window.event)})}}}C(document,"keydown",function(k){L(k)});C(document,"keyup",e);C(window,"focus",q);var v=D.key;function M(){var N=D.key;D.key=v;return N}D.key=j;D.key.setScope=s;D.key.getScope=u;D.key.deleteScope=B;D.key.filter=r;D.key.isPressed=d;D.key.getPressedKeyCodes=y;D.key.noConflict=M;D.key.unbind=I;if(typeof module!=="undefined"){module.exports=key}})(this);!function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):"undefined"!=typeof window?window.poly2tri=a():"undefined"!=typeof global?global.poly2tri=a():"undefined"!=typeof self&&(self.poly2tri=a())}(function(){var f,b,a;return(function d(g,q,k){function j(v,r){if(!q[v]){if(!g[v]){var n=typeof require=="function"&&require;if(!r&&n){return n(v,!0)}if(e){return e(v,!0)}throw new Error("Cannot find module '"+v+"'")}var s=q[v]={exports:{}};g[v][0].call(s.exports,function(u){var y=g[v][1][u];return j(y?y:u)},s,s.exports,d,g,q,k)}return q[v].exports}var e=typeof require=="function"&&require;for(var m=0;m<k.length;m++){j(k[m])}return j})({1:[function(g,j,e){var k=function(m,n){this.x=+m||0;this.y=+n||0;this._p2t_edge_list=null};k.prototype.toString=function(){return("("+this.x+";"+this.y+")")};k.prototype.clone=function(){return new k(this.x,this.y)};k.prototype.set_zero=function(){this.x=0;this.y=0;return this};k.prototype.set=function(m,n){this.x=+m||0;this.y=+n||0;return this};k.prototype.negate=function(){this.x=-this.x;this.y=-this.y;return this};k.prototype.add=function(m){this.x+=m.x;this.y+=m.y;return this};k.prototype.sub=function(m){this.x-=m.x;this.y-=m.y;return this};k.prototype.mul=function(m){this.x*=m;this.y*=m;return this};k.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};k.prototype.normalize=function(){var m=this.length();this.x/=m;this.y/=m;return m};k.prototype.equals=function(m){return this.x===m.x&&this.y===m.y};k.negate=function(m){return new k(-m.x,-m.y)};k.add=function(n,m){return new k(n.x+m.x,n.y+m.y)};k.sub=function(n,m){return new k(n.x-m.x,n.y-m.y)};k.mul=function(m,n){return new k(m*n.x,m*n.y)};k.cross=function(n,m){if(typeof(n)==="number"){if(typeof(m)==="number"){return n*m}else{return new k(-n*m.y,n*m.x)}}else{if(typeof(m)==="number"){return new k(m*n.y,-m*n.x)}else{return n.x*m.y-n.y*m.x}}};k.toString=function(n){var m=n.toString();return(m==="[object Object]"?k.prototype.toString.call(n):m)};k.compare=function(n,m){if(n.y===m.y){return n.x-m.x}else{return n.y-m.y}};k.cmp=k.compare;k.equals=function(n,m){return n.x===m.x&&n.y===m.y};k.dot=function(n,m){return n.x*m.x+n.y*m.y};j.exports=k},{}],2:[function(n,e,I){var z=typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};"use strict";var H=z.poly2tri;I.noConflict=function(){z.poly2tri=H;return I};var G=n("./point");var B=n("./triangle");var y=function(L,K){this.name="PointError";this.points=K=K||[];this.message=L||"Invalid Points!";for(var J=0;J<K.length;J++){this.message+=" "+G.toString(K[J])}};y.prototype=new Error();y.prototype.constructor=y;var r=function(K,J){this.p=K;this.q=J;if(K.y>J.y){this.q=K;this.p=J}else{if(K.y===J.y){if(K.x>J.x){this.q=K;this.p=J}else{if(K.x===J.x){throw new y("poly2tri Invalid Edge constructor: repeated points!",[K])}}}}if(!this.q._p2t_edge_list){this.q._p2t_edge_list=[]}this.q._p2t_edge_list.push(this)};var E=3*Math.PI/4;var s=Math.PI/2;var v=1e-12;var u=0.3;var D={CW:1,CCW:-1,COLLINEAR:0};function A(L,K,J){var N=(L.x-J.x)*(K.y-J.y);var M=(L.y-J.y)*(K.x-J.x);var O=N-M;if(O>-(v)&&O<(v)){return D.COLLINEAR}else{if(O>0){return D.CCW}else{return D.CW}}}function k(L,K,J,aa){var U=aa.x;var T=aa.y;var O=L.x-U;var N=L.y-T;var Y=K.x-U;var X=K.y-T;var M=O*X;var W=Y*N;var S=M-W;if(S<=(v)){return false}var R=J.x-U;var Q=J.y-T;var Z=R*N;var V=O*Q;var P=Z-V;if(P<=(v)){return false}return true}var F=function(K,J){this.point=K;this.triangle=J||null;this.next=null;this.prev=null;this.value=K.x};var q=function(K,J){this.head_=K;this.tail_=J;this.search_node_=K};q.prototype.head=function(){return this.head_};q.prototype.setHead=function(J){this.head_=J};q.prototype.tail=function(){return this.tail_};q.prototype.setTail=function(J){this.tail_=J};q.prototype.search=function(){return this.search_node_};q.prototype.setSearch=function(J){this.search_node_=J};q.prototype.findSearchNode=function(){return this.search_node_};q.prototype.locateNode=function(J){var K=this.search_node_;if(J<K.value){while(K=K.prev){if(J>=K.value){this.search_node_=K;return K}}}else{while(K=K.next){if(J<K.value){this.search_node_=K.prev;return K.prev}}}return null};q.prototype.locatePoint=function(K){var L=K.x;var M=this.findSearchNode(L);var J=M.point.x;if(L===J){if(K!==M.point){if(K===M.prev.point){M=M.prev}else{if(K===M.next.point){M=M.next}else{throw new Error("poly2tri Invalid AdvancingFront.locatePoint() call")}}}}else{if(L<J){while(M=M.prev){if(K===M.point){break}}}else{while(M=M.next){if(K===M.point){break}}}}if(M){this.search_node_=M}return M};var j=function(){this.left_node=null;this.bottom_node=null;this.right_node=null;this.width=0;this.left_highest=false};j.prototype.clear=function(){this.left_node=null;this.bottom_node=null;this.right_node=null;this.width=0;this.left_highest=false};var m=function(){this.constrained_edge=null;this.right=false};var C={};C.triangulate=function(J){J.initTriangulation();J.createAdvancingFront();C.sweepPoints(J);C.finalizationPolygon(J)};C.sweepPoints=function(P){var N,K=P.pointCount();for(N=1;N<K;++N){var J=P.getPoint(N);var O=C.pointEvent(P,J);var L=J._p2t_edge_list;for(var M=0;L&&M<L.length;++M){C.edgeEventByEdge(P,L[M],O)}}};C.finalizationPolygon=function(L){var J=L.front().head().next.triangle;var K=L.front().head().next.point;while(!J.getConstrainedEdgeCW(K)){J=J.neighborCCW(K)}L.meshClean(J)};C.pointEvent=function(L,J){var K=L.locateNode(J);var M=C.newFrontTriangle(L,J,K);if(J.x<=K.point.x+(v)){C.fill(L,K)}C.fillAdvancingFront(L,M);return M};C.edgeEventByEdge=function(L,K,J){L.edge_event.constrained_edge=K;L.edge_event.right=(K.p.x>K.q.x);if(C.isEdgeSideOfTriangle(J.triangle,K.p,K.q)){return}C.fillEdgeEvent(L,K,J);C.edgeEventByPoints(L,K.p,K.q,J.triangle,K.q)};C.edgeEventByPoints=function(M,R,Q,L,N){if(C.isEdgeSideOfTriangle(L,R,Q)){return}var P=L.pointCCW(N);var K=A(Q,P,R);if(K===D.COLLINEAR){if(L.containsPoint(Q,P)){L.markConstrainedEdgeByPoints(Q,P);M.edge_event.constrained_edge.q=P;L=L.neighborAcross(N)}else{throw new y("poly2tri EdgeEvent: Collinear not supported!",[Q,P,R])}}var O=L.pointCW(N);var J=A(Q,O,R);if(J===D.COLLINEAR){if(L.containsPoint(Q,O)){L.markConstrainedEdgeByPoints(Q,O);M.edge_event.constrained_edge.q=O;L=L.neighborAcross(N)}else{throw new y("poly2tri EdgeEvent: Collinear not supported!",[Q,O,R])}}if(K===J){if(K===D.CW){L=L.neighborCCW(N)}else{L=L.neighborCW(N)}C.edgeEventByPoints(M,R,Q,L,N)}else{C.flipEdgeEvent(M,R,Q,L,N)}};C.isEdgeSideOfTriangle=function(N,K,J){var L=N.edgeIndex(K,J);if(L!==-1){N.markConstrainedEdgeByIndex(L);var M=N.getNeighbor(L);if(M){M.markConstrainedEdgeByPoints(K,J)}return true}return false};C.newFrontTriangle=function(M,J,K){var L=new B(J,K.point,K.next.point);L.markNeighbor(K.triangle);M.addToMap(L);var N=new F(J);N.next=K.next;N.prev=K;K.next.prev=N;K.next=N;if(!C.legalize(M,L)){M.mapTriangleToNodes(L)}return N};C.fill=function(L,J){var K=new B(J.prev.point,J.point,J.next.point);K.markNeighbor(J.prev.triangle);K.markNeighbor(J.triangle);L.addToMap(K);J.prev.next=J.next;J.next.prev=J.prev;if(!C.legalize(L,K)){L.mapTriangleToNodes(K)}};C.fillAdvancingFront=function(L,M){var J=M.next;var K;while(J.next){K=C.holeAngle(J);if(K>s||K<-(s)){break}C.fill(L,J);J=J.next}J=M.prev;while(J.prev){K=C.holeAngle(J);if(K>s||K<-(s)){break}C.fill(L,J);J=J.prev}if(M.next&&M.next.next){K=C.basinAngle(M);if(K<E){C.fillBasin(L,M)}}};C.basinAngle=function(K){var L=K.point.x-K.next.next.point.x;var J=K.point.y-K.next.next.point.y;return Math.atan2(J,L)};C.holeAngle=function(K){var L=K.next.point.x-K.point.x;var J=K.next.point.y-K.point.y;var N=K.prev.point.x-K.point.x;var M=K.prev.point.y-K.point.y;return Math.atan2(L*M-J*N,L*N+J*M)};C.legalize=function(O,Q){for(var M=0;M<3;++M){if(Q.delaunay_edge[M]){continue}var L=Q.getNeighbor(M);if(L){var J=Q.getPoint(M);var N=L.oppositePoint(Q,J);var P=L.index(N);if(L.constrained_edge[P]||L.delaunay_edge[P]){Q.constrained_edge[M]=L.constrained_edge[P];continue}var K=C.inCircle(J,Q.pointCCW(J),Q.pointCW(J),N);if(K){Q.delaunay_edge[M]=true;L.delaunay_edge[P]=true;C.rotateTrianglePair(Q,J,L,N);var R=!C.legalize(O,Q);if(R){O.mapTriangleToNodes(Q)}R=!C.legalize(O,L);if(R){O.mapTriangleToNodes(L)}Q.delaunay_edge[M]=false;L.delaunay_edge[P]=false;return true}}}return false};C.inCircle=function(L,K,J,ae){var O=L.x-ae.x;var N=L.y-ae.y;var aa=K.x-ae.x;var Z=K.y-ae.y;var M=O*Z;var Y=aa*N;var V=M-Y;if(V<=0){return false}var S=J.x-ae.x;var R=J.y-ae.y;var ac=S*N;var X=O*R;var P=ac-X;if(P<=0){return false}var ab=aa*R;var U=S*Z;var T=O*O+N*N;var ad=aa*aa+Z*Z;var W=S*S+R*R;var Q=T*(ab-U)+ad*P+W*V;return Q>0};C.rotateTrianglePair=function(Y,K,P,U){var X,W,V,T;X=Y.neighborCCW(K);W=Y.neighborCW(K);V=P.neighborCCW(U);T=P.neighborCW(U);var N,M,L,J;N=Y.getConstrainedEdgeCCW(K);M=Y.getConstrainedEdgeCW(K);L=P.getConstrainedEdgeCCW(U);J=P.getConstrainedEdgeCW(U);var S,R,Q,O;S=Y.getDelaunayEdgeCCW(K);R=Y.getDelaunayEdgeCW(K);Q=P.getDelaunayEdgeCCW(U);O=P.getDelaunayEdgeCW(U);Y.legalize(K,U);P.legalize(U,K);P.setDelaunayEdgeCCW(K,S);Y.setDelaunayEdgeCW(K,R);Y.setDelaunayEdgeCCW(U,Q);P.setDelaunayEdgeCW(U,O);P.setConstrainedEdgeCCW(K,N);Y.setConstrainedEdgeCW(K,M);Y.setConstrainedEdgeCCW(U,L);P.setConstrainedEdgeCW(U,J);Y.clearNeigbors();P.clearNeigbors();if(X){P.markNeighbor(X)}if(W){Y.markNeighbor(W)}if(V){Y.markNeighbor(V)}if(T){P.markNeighbor(T)}Y.markNeighbor(P)};C.fillBasin=function(K,J){if(A(J.point,J.next.point,J.next.next.point)===D.CCW){K.basin.left_node=J.next.next}else{K.basin.left_node=J.next}K.basin.bottom_node=K.basin.left_node;while(K.basin.bottom_node.next&&K.basin.bottom_node.point.y>=K.basin.bottom_node.next.point.y){K.basin.bottom_node=K.basin.bottom_node.next}if(K.basin.bottom_node===K.basin.left_node){return}K.basin.right_node=K.basin.bottom_node;while(K.basin.right_node.next&&K.basin.right_node.point.y<K.basin.right_node.next.point.y){K.basin.right_node=K.basin.right_node.next}if(K.basin.right_node===K.basin.bottom_node){return}K.basin.width=K.basin.right_node.point.x-K.basin.left_node.point.x;K.basin.left_highest=K.basin.left_node.point.y>K.basin.right_node.point.y;C.fillBasinReq(K,K.basin.bottom_node)};C.fillBasinReq=function(L,J){if(C.isShallow(L,J)){return}C.fill(L,J);var K;if(J.prev===L.basin.left_node&&J.next===L.basin.right_node){return}else{if(J.prev===L.basin.left_node){K=A(J.point,J.next.point,J.next.next.point);if(K===D.CW){return}J=J.next}else{if(J.next===L.basin.right_node){K=A(J.point,J.prev.point,J.prev.prev.point);if(K===D.CCW){return}J=J.prev}else{if(J.prev.point.y<J.next.point.y){J=J.prev}else{J=J.next}}}}C.fillBasinReq(L,J)};C.isShallow=function(L,K){var J;if(L.basin.left_highest){J=L.basin.left_node.point.y-K.point.y}else{J=L.basin.right_node.point.y-K.point.y}if(L.basin.width>J){return true}return false};C.fillEdgeEvent=function(L,K,J){if(L.edge_event.right){C.fillRightAboveEdgeEvent(L,K,J)}else{C.fillLeftAboveEdgeEvent(L,K,J)}};C.fillRightAboveEdgeEvent=function(L,K,J){while(J.next.point.x<K.p.x){if(A(K.q,J.next.point,K.p)===D.CCW){C.fillRightBelowEdgeEvent(L,K,J)}else{J=J.next}}};C.fillRightBelowEdgeEvent=function(L,K,J){if(J.point.x<K.p.x){if(A(J.point,J.next.point,J.next.next.point)===D.CCW){C.fillRightConcaveEdgeEvent(L,K,J)}else{C.fillRightConvexEdgeEvent(L,K,J);C.fillRightBelowEdgeEvent(L,K,J)}}};C.fillRightConcaveEdgeEvent=function(L,K,J){C.fill(L,J.next);if(J.next.point!==K.p){if(A(K.q,J.next.point,K.p)===D.CCW){if(A(J.point,J.next.point,J.next.next.point)===D.CCW){C.fillRightConcaveEdgeEvent(L,K,J)}else{}}}};C.fillRightConvexEdgeEvent=function(L,K,J){if(A(J.next.point,J.next.next.point,J.next.next.next.point)===D.CCW){C.fillRightConcaveEdgeEvent(L,K,J.next)}else{if(A(K.q,J.next.next.point,K.p)===D.CCW){C.fillRightConvexEdgeEvent(L,K,J.next)}else{}}};C.fillLeftAboveEdgeEvent=function(L,K,J){while(J.prev.point.x>K.p.x){if(A(K.q,J.prev.point,K.p)===D.CW){C.fillLeftBelowEdgeEvent(L,K,J)}else{J=J.prev}}};C.fillLeftBelowEdgeEvent=function(L,K,J){if(J.point.x>K.p.x){if(A(J.point,J.prev.point,J.prev.prev.point)===D.CW){C.fillLeftConcaveEdgeEvent(L,K,J)}else{C.fillLeftConvexEdgeEvent(L,K,J);C.fillLeftBelowEdgeEvent(L,K,J)}}};C.fillLeftConvexEdgeEvent=function(L,K,J){if(A(J.prev.point,J.prev.prev.point,J.prev.prev.prev.point)===D.CW){C.fillLeftConcaveEdgeEvent(L,K,J.prev)}else{if(A(K.q,J.prev.prev.point,K.p)===D.CW){C.fillLeftConvexEdgeEvent(L,K,J.prev)}else{}}};C.fillLeftConcaveEdgeEvent=function(L,K,J){C.fill(L,J.prev);if(J.prev.point!==K.p){if(A(K.q,J.prev.point,K.p)===D.CW){if(A(J.point,J.prev.point,J.prev.prev.point)===D.CW){C.fillLeftConcaveEdgeEvent(L,K,J)}else{}}}};C.flipEdgeEvent=function(O,S,R,Q,J){var L=Q.neighborAcross(J);if(!L){throw new Error("poly2tri [BUG:FIXME] FLIP failed due to missing triangle!")}var N=L.oppositePoint(Q,J);if(Q.getConstrainedEdgeAcross(J)){var P=Q.index(J);throw new y("poly2tri Intersecting Constraints",[J,N,Q.getPoint((P+1)%3),Q.getPoint((P+2)%3)])}if(k(J,Q.pointCCW(J),Q.pointCW(J),N)){C.rotateTrianglePair(Q,J,L,N);O.mapTriangleToNodes(Q);O.mapTriangleToNodes(L);if(J===R&&N===S){if(R===O.edge_event.constrained_edge.q&&S===O.edge_event.constrained_edge.p){Q.markConstrainedEdgeByPoints(S,R);L.markConstrainedEdgeByPoints(S,R);C.legalize(O,Q);C.legalize(O,L)}else{}}else{var K=A(R,N,S);Q=C.nextFlipTriangle(O,K,Q,L,J,N);C.flipEdgeEvent(O,S,R,Q,J)}}else{var M=C.nextFlipPoint(S,R,L,N);C.flipScanEdgeEvent(O,S,R,Q,L,M);C.edgeEventByPoints(O,S,R,Q,J)}};C.nextFlipTriangle=function(O,N,J,L,M,P){var K;if(N===D.CCW){K=L.edgeIndex(M,P);L.delaunay_edge[K]=true;C.legalize(O,L);L.clearDelunayEdges();return J}K=J.edgeIndex(M,P);J.delaunay_edge[K]=true;C.legalize(O,J);J.clearDelunayEdges();return L};C.nextFlipPoint=function(K,J,M,N){var L=A(J,N,K);if(L===D.CW){return M.pointCCW(N)}else{if(L===D.CCW){return M.pointCW(N)}else{throw new y("poly2tri [Unsupported] nextFlipPoint: opposing point on constrained edge!",[J,N,K])}}};C.flipScanEdgeEvent=function(N,R,P,Q,O,J){var K=O.neighborAcross(J);if(!K){throw new Error("poly2tri [BUG:FIXME] FLIP failed due to missing triangle")}var M=K.oppositePoint(O,J);if(k(P,Q.pointCCW(P),Q.pointCW(P),M)){C.flipEdgeEvent(N,P,M,K,M)}else{var L=C.nextFlipPoint(R,P,K,M);C.flipScanEdgeEvent(N,R,P,Q,K,L)}};var g=function(K,J){J=J||{};this.triangles_=[];this.map_=[];this.points_=(J.cloneArrays?K.slice(0):K);this.edge_list=[];this.pmin_=this.pmax_=null;this.front_=null;this.head_=null;this.tail_=null;this.af_head_=null;this.af_middle_=null;this.af_tail_=null;this.basin=new j();this.edge_event=new m();this.initEdges(this.points_)};g.prototype.addHole=function(K){this.initEdges(K);var L,J=K.length;for(L=0;L<J;L++){this.points_.push(K[L])}return this};g.prototype.AddHole=g.prototype.addHole;g.prototype.addPoint=function(J){this.points_.push(J);return this};g.prototype.AddPoint=g.prototype.addPoint;g.prototype.addPoints=function(J){this.points_=this.points_.concat(J);return this};g.prototype.triangulate=function(){C.triangulate(this);return this};g.prototype.getBoundingBox=function(){return{min:this.pmin_,max:this.pmax_}};g.prototype.getTriangles=function(){return this.triangles_};g.prototype.GetTriangles=g.prototype.getTriangles;g.prototype.front=function(){return this.front_};g.prototype.pointCount=function(){return this.points_.length};g.prototype.head=function(){return this.head_};g.prototype.setHead=function(J){this.head_=J};g.prototype.tail=function(){return this.tail_};g.prototype.setTail=function(J){this.tail_=J};g.prototype.getMap=function(){return this.map_};g.prototype.initTriangulation=function(){var N=this.points_[0].x;var J=this.points_[0].x;var L=this.points_[0].y;var P=this.points_[0].y;var M,O=this.points_.length;for(M=1;M<O;M++){var K=this.points_[M];(K.x>N)&&(N=K.x);(K.x<J)&&(J=K.x);(K.y>L)&&(L=K.y);(K.y<P)&&(P=K.y)}this.pmin_=new G(J,P);this.pmax_=new G(N,L);var R=u*(N-J);var Q=u*(L-P);this.head_=new G(N+R,P-Q);this.tail_=new G(J-R,P-Q);this.points_.sort(G.compare)};g.prototype.initEdges=function(K){var L,J=K.length;for(L=0;L<J;++L){this.edge_list.push(new r(K[L],K[(L+1)%J]))}};g.prototype.getPoint=function(J){return this.points_[J]};g.prototype.addToMap=function(J){this.map_.push(J)};g.prototype.locateNode=function(J){return this.front_.locateNode(J.x)};g.prototype.createAdvancingFront=function(){var L;var K;var J;var M=new B(this.points_[0],this.tail_,this.head_);this.map_.push(M);L=new F(M.getPoint(1),M);K=new F(M.getPoint(0),M);J=new F(M.getPoint(2));this.front_=new q(L,J);L.next=K;K.next=J;K.prev=L;J.prev=K};g.prototype.removeNode=function(J){};g.prototype.mapTriangleToNodes=function(K){for(var J=0;J<3;++J){if(!K.getNeighbor(J)){var L=this.front_.locatePoint(K.pointCW(K.getPoint(J)));if(L){L.triangle=K}}}};g.prototype.removeFromMap=function(M){var K,L=this.map_,J=L.length;for(K=0;K<J;K++){if(L[K]===M){L.splice(K,1);break}}};g.prototype.meshClean=function(M){var L=[M],K,J;while(K=L.pop()){if(!K.isInterior()){K.setInterior(true);this.triangles_.push(K);for(J=0;J<3;J++){if(!K.constrained_edge[J]){L.push(K.getNeighbor(J))}}}}};I.PointError=y;I.Point=G;I.Triangle=B;I.SweepContext=g;I.triangulate=C.triangulate;I.sweep={Triangulate:C.triangulate}},{"./point":1,"./triangle":3}],3:[function(g,j,e){var k=g("./point");var n=function(r,q,s){this.points_=[r,q,s];this.neighbors_=[null,null,null];this.interior_=false;this.constrained_edge=[false,false,false];this.delaunay_edge=[false,false,false]};var m=k.toString;n.prototype.toString=function(){return("["+m(this.points_[0])+m(this.points_[1])+m(this.points_[2])+"]")};n.prototype.getPoint=function(q){return this.points_[q]};n.prototype.GetPoint=n.prototype.getPoint;n.prototype.getNeighbor=function(q){return this.neighbors_[q]};n.prototype.containsPoint=function(q){var r=this.points_;return(q===r[0]||q===r[1]||q===r[2])};n.prototype.containsEdge=function(q){return this.containsPoint(q.p)&&this.containsPoint(q.q)};n.prototype.containsPoints=function(r,q){return this.containsPoint(r)&&this.containsPoint(q)};n.prototype.isInterior=function(){return this.interior_};n.prototype.setInterior=function(q){this.interior_=q;return this};n.prototype.markNeighborPointers=function(u,s,q){var r=this.points_;if((u===r[2]&&s===r[1])||(u===r[1]&&s===r[2])){this.neighbors_[0]=q}else{if((u===r[0]&&s===r[2])||(u===r[2]&&s===r[0])){this.neighbors_[1]=q}else{if((u===r[0]&&s===r[1])||(u===r[1]&&s===r[0])){this.neighbors_[2]=q}else{throw new Error("poly2tri Invalid Triangle.markNeighborPointers() call")}}}};n.prototype.markNeighbor=function(q){var r=this.points_;if(q.containsPoints(r[1],r[2])){this.neighbors_[0]=q;q.markNeighborPointers(r[1],r[2],this)}else{if(q.containsPoints(r[0],r[2])){this.neighbors_[1]=q;q.markNeighborPointers(r[0],r[2],this)}else{if(q.containsPoints(r[0],r[1])){this.neighbors_[2]=q;q.markNeighborPointers(r[0],r[1],this)}}}};n.prototype.clearNeigbors=function(){this.neighbors_[0]=null;this.neighbors_[1]=null;this.neighbors_[2]=null};n.prototype.clearDelunayEdges=function(){this.delaunay_edge[0]=false;this.delaunay_edge[1]=false;this.delaunay_edge[2]=false};n.prototype.pointCW=function(r){var q=this.points_;if(r===q[0]){return q[2]}else{if(r===q[1]){return q[0]}else{if(r===q[2]){return q[1]}else{return null}}}};n.prototype.pointCCW=function(r){var q=this.points_;if(r===q[0]){return q[1]}else{if(r===q[1]){return q[2]}else{if(r===q[2]){return q[0]}else{return null}}}};n.prototype.neighborCW=function(q){if(q===this.points_[0]){return this.neighbors_[1]}else{if(q===this.points_[1]){return this.neighbors_[2]}else{return this.neighbors_[0]}}};n.prototype.neighborCCW=function(q){if(q===this.points_[0]){return this.neighbors_[2]}else{if(q===this.points_[1]){return this.neighbors_[0]}else{return this.neighbors_[1]}}};n.prototype.getConstrainedEdgeCW=function(q){if(q===this.points_[0]){return this.constrained_edge[1]}else{if(q===this.points_[1]){return this.constrained_edge[2]}else{return this.constrained_edge[0]}}};n.prototype.getConstrainedEdgeCCW=function(q){if(q===this.points_[0]){return this.constrained_edge[2]}else{if(q===this.points_[1]){return this.constrained_edge[0]}else{return this.constrained_edge[1]}}};n.prototype.getConstrainedEdgeAcross=function(q){if(q===this.points_[0]){return this.constrained_edge[0]}else{if(q===this.points_[1]){return this.constrained_edge[1]}else{return this.constrained_edge[2]}}};n.prototype.setConstrainedEdgeCW=function(r,q){if(r===this.points_[0]){this.constrained_edge[1]=q}else{if(r===this.points_[1]){this.constrained_edge[2]=q}else{this.constrained_edge[0]=q}}};n.prototype.setConstrainedEdgeCCW=function(r,q){if(r===this.points_[0]){this.constrained_edge[2]=q}else{if(r===this.points_[1]){this.constrained_edge[0]=q}else{this.constrained_edge[1]=q}}};n.prototype.getDelaunayEdgeCW=function(q){if(q===this.points_[0]){return this.delaunay_edge[1]}else{if(q===this.points_[1]){return this.delaunay_edge[2]}else{return this.delaunay_edge[0]}}};n.prototype.getDelaunayEdgeCCW=function(q){if(q===this.points_[0]){return this.delaunay_edge[2]}else{if(q===this.points_[1]){return this.delaunay_edge[0]}else{return this.delaunay_edge[1]}}};n.prototype.setDelaunayEdgeCW=function(r,q){if(r===this.points_[0]){this.delaunay_edge[1]=q}else{if(r===this.points_[1]){this.delaunay_edge[2]=q}else{this.delaunay_edge[0]=q}}};n.prototype.setDelaunayEdgeCCW=function(r,q){if(r===this.points_[0]){this.delaunay_edge[2]=q}else{if(r===this.points_[1]){this.delaunay_edge[0]=q}else{this.delaunay_edge[1]=q}}};n.prototype.neighborAcross=function(q){if(q===this.points_[0]){return this.neighbors_[0]}else{if(q===this.points_[1]){return this.neighbors_[1]}else{return this.neighbors_[2]}}};n.prototype.oppositePoint=function(r,s){var q=r.pointCW(s);return this.pointCW(q)};n.prototype.legalize=function(q,r){var s=this.points_;if(q===s[0]){s[1]=s[0];s[0]=s[2];s[2]=r}else{if(q===s[1]){s[2]=s[1];s[1]=s[0];s[0]=r}else{if(q===s[2]){s[0]=s[2];s[2]=s[1];s[1]=r}else{throw new Error("poly2tri Invalid Triangle.legalize() call")}}}};n.prototype.index=function(r){var q=this.points_;if(r===q[0]){return 0}else{if(r===q[1]){return 1}else{if(r===q[2]){return 2}else{throw new Error("poly2tri Invalid Triangle.index() call")}}}};n.prototype.edgeIndex=function(s,r){var q=this.points_;if(s===q[0]){if(r===q[1]){return 2}else{if(r===q[2]){return 1}}}else{if(s===q[1]){if(r===q[2]){return 0}else{if(r===q[0]){return 2}}}else{if(s===q[2]){if(r===q[0]){return 1}else{if(r===q[1]){return 0}}}}}return -1};n.prototype.markConstrainedEdgeByIndex=function(q){this.constrained_edge[q]=true};n.prototype.markConstrainedEdgeByEdge=function(q){this.markConstrainedEdgeByPoints(q.p,q.q)};n.prototype.markConstrainedEdgeByPoints=function(u,s){var r=this.points_;if((s===r[0]&&u===r[1])||(s===r[1]&&u===r[0])){this.constrained_edge[2]=true}else{if((s===r[0]&&u===r[2])||(s===r[2]&&u===r[0])){this.constrained_edge[1]=true}else{if((s===r[1]&&u===r[2])||(s===r[2]&&u===r[1])){this.constrained_edge[0]=true}}}};j.exports=n},{"./point":1}]},{},[2])(2)});(function(){var H=navigator.userAgent.toString().toLowerCase();var ba={};if(H.indexOf("chrome")!=-1&&H.indexOf("chromium")==-1){ba.chrome=1}else{ba.chrome=0}if(H.indexOf("chromium")!=-1){ba.chromium=1}else{ba.chromium=0}if(H.indexOf("safari")!=-1&&H.indexOf("chrome")==-1&&H.indexOf("chromium")==-1){ba.safari=1}else{ba.safari=0}if(H.indexOf("firefox")!=-1){ba.firefox=1}else{ba.firefox=0}if(H.indexOf("firefox/17")!=-1){ba.firefox17=1}else{ba.firefox17=0}if(H.indexOf("firefox/15")!=-1){ba.firefox15=1}else{ba.firefox15=0}if(H.indexOf("firefox/3")!=-1){ba.firefox3=1}else{ba.firefox3=0}if(H.indexOf("opera")!=-1){ba.opera=1}else{ba.opera=0}if(H.indexOf("msie 10")!=-1){ba.msie10=1}else{ba.msie10=0}if(H.indexOf("msie 9")!=-1){ba.msie9=1}else{ba.msie9=0}if(H.indexOf("msie 8")!=-1){ba.msie8=1}else{ba.msie8=0}if(H.indexOf("msie 7")!=-1){ba.msie7=1}else{ba.msie7=0}if(H.indexOf("msie ")!=-1){ba.msie=1}else{ba.msie=0}if(H.indexOf("ejecta")!=-1){ba.safari=1}else{ba.safari=0}var aC={};aC.biginteger_used=null;var bu;var bb=244837814094590;var aW=((bb&16777215)==15715070);function aX(bz,by,bA){aC.biginteger_used=1;if(bz!=null){if("number"==typeof bz){this.fromString(Math.floor(bz).toString(),10)}else{if(by==null&&"string"!=typeof bz){this.fromString(bz,256)}else{if(bz.indexOf(".")!=-1){bz=bz.substring(0,bz.indexOf("."))}this.fromString(bz,by)}}}}function s(){return new aX(null)}function a(bC,by,bz,bB,bE,bD){while(--bD>=0){var bA=by*this[bC++]+bz[bB]+bE;bE=Math.floor(bA/67108864);bz[bB++]=bA&67108863}return bE}function bw(bC,bH,bI,bB,bF,by){var bE=bH&32767,bG=bH>>15;while(--by>=0){var bA=this[bC]&32767;var bD=this[bC++]>>15;var bz=bG*bA+bD*bE;bA=bE*bA+((bz&32767)<<15)+bI[bB]+(bF&1073741823);bF=(bA>>>30)+(bz>>>15)+bG*bD+(bF>>>30);bI[bB++]=bA&1073741823}return bF}function bv(bC,bH,bI,bB,bF,by){var bE=bH&16383,bG=bH>>14;while(--by>=0){var bA=this[bC]&16383;var bD=this[bC++]>>14;var bz=bG*bA+bD*bE;bA=bE*bA+((bz&16383)<<14)+bI[bB]+bF;bF=(bA>>28)+(bz>>14)+bG*bD;bI[bB++]=bA&268435455}return bF}if(aW&&(navigator.appName=="Microsoft Internet Explorer")){aX.prototype.am=bw;bu=30}else{if(aW&&(navigator.appName!="Netscape")){aX.prototype.am=a;bu=26}else{aX.prototype.am=bv;bu=28}}aX.prototype.DB=bu;aX.prototype.DM=((1<<bu)-1);aX.prototype.DV=(1<<bu);var aY=52;aX.prototype.FV=Math.pow(2,aY);aX.prototype.F1=aY-bu;aX.prototype.F2=2*bu-aY;var a6="0123456789abcdefghijklmnopqrstuvwxyz";var a9=[];var bi,L;bi="0".charCodeAt(0);for(L=0;L<=9;++L){a9[bi++]=L}bi="a".charCodeAt(0);for(L=10;L<36;++L){a9[bi++]=L}bi="A".charCodeAt(0);for(L=10;L<36;++L){a9[bi++]=L}function bx(by){return a6.charAt(by)}function W(bz,by){var bA=a9[bz.charCodeAt(by)];return(bA==null)?-1:bA}function aV(bz){for(var by=this.t-1;by>=0;--by){bz[by]=this[by]}bz.t=this.t;bz.s=this.s}function E(by){this.t=1;this.s=(by<0)?-1:0;if(by>0){this[0]=by}else{if(by<-1){this[0]=by+this.DV}else{this.t=0}}}function e(by){var bz=s();bz.fromInt(by);return bz}function P(bE,bz){var bB;if(bz==16){bB=4}else{if(bz==8){bB=3}else{if(bz==256){bB=8}else{if(bz==2){bB=1}else{if(bz==32){bB=5}else{if(bz==4){bB=2}else{this.fromRadix(bE,bz);return}}}}}}this.t=0;this.s=0;var bD=bE.length,bA=false,bC=0;while(--bD>=0){var by=(bB==8)?bE[bD]&255:W(bE,bD);if(by<0){if(bE.charAt(bD)=="-"){bA=true}continue}bA=false;if(bC==0){this[this.t++]=by}else{if(bC+bB>this.DB){this[this.t-1]|=(by&((1<<(this.DB-bC))-1))<<bC;this[this.t++]=(by>>(this.DB-bC))}else{this[this.t-1]|=by<<bC}}bC+=bB;if(bC>=this.DB){bC-=this.DB}}if(bB==8&&(bE[0]&128)!=0){this.s=-1;if(bC>0){this[this.t-1]|=((1<<(this.DB-bC))-1)<<bC}}this.clamp();if(bA){aX.ZERO.subTo(this,this)}}function ay(){var by=this.s&this.DM;while(this.t>0&&this[this.t-1]==by){--this.t}}function G(bz){if(this.s<0){return"-"+this.negate().toString(bz)}var bA;if(bz==16){bA=4}else{if(bz==8){bA=3}else{if(bz==2){bA=1}else{if(bz==32){bA=5}else{if(bz==4){bA=2}else{return this.toRadix(bz)}}}}}var bC=(1<<bA)-1,bF,by=false,bD="",bB=this.t;var bE=this.DB-(bB*this.DB)%bA;if(bB-->0){if(bE<this.DB&&(bF=this[bB]>>bE)>0){by=true;bD=bx(bF)}while(bB>=0){if(bE<bA){bF=(this[bB]&((1<<bE)-1))<<(bA-bE);bF|=this[--bB]>>(bE+=this.DB-bA)}else{bF=(this[bB]>>(bE-=bA))&bC;if(bE<=0){bE+=this.DB;--bB}}if(bF>0){by=true}if(by){bD+=bx(bF)}}}return by?bD:"0"}function aD(){var by=s();aX.ZERO.subTo(this,by);return by}function be(){return(this.s<0)?this.negate():this}function ag(by){var bA=this.s-by.s;if(bA!=0){return bA}var bz=this.t;bA=bz-by.t;if(bA!=0){return(this.s<0)?-bA:bA}while(--bz>=0){if((bA=this[bz]-by[bz])!=0){return bA}}return 0}function A(by){var bA=1,bz;if((bz=by>>>16)!=0){by=bz;bA+=16}if((bz=by>>8)!=0){by=bz;bA+=8}if((bz=by>>4)!=0){by=bz;bA+=4}if((bz=by>>2)!=0){by=bz;bA+=2}if((bz=by>>1)!=0){by=bz;bA+=1}return bA}function K(){if(this.t<=0){return 0}return this.DB*(this.t-1)+A(this[this.t-1]^(this.s&this.DM))}function bj(bA,bz){var by;for(by=this.t-1;by>=0;--by){bz[by+bA]=this[by]}for(by=bA-1;by>=0;--by){bz[by]=0}bz.t=this.t+bA;bz.s=this.s}function aU(bA,bz){for(var by=bA;by<this.t;++by){bz[by-bA]=this[by]}bz.t=Math.max(this.t-bA,0);bz.s=this.s}function J(bF,bB){var bz=bF%this.DB;var by=this.DB-bz;var bD=(1<<by)-1;var bC=Math.floor(bF/this.DB),bE=(this.s<<bz)&this.DM,bA;for(bA=this.t-1;bA>=0;--bA){bB[bA+bC+1]=(this[bA]>>by)|bE;bE=(this[bA]&bD)<<bz}for(bA=bC-1;bA>=0;--bA){bB[bA]=0}bB[bC]=bE;bB.t=this.t+bC+1;bB.s=this.s;bB.clamp()}function B(bE,bB){bB.s=this.s;var bC=Math.floor(bE/this.DB);if(bC>=this.t){bB.t=0;return}var bz=bE%this.DB;var by=this.DB-bz;var bD=(1<<bz)-1;bB[0]=this[bC]>>bz;for(var bA=bC+1;bA<this.t;++bA){bB[bA-bC-1]|=(this[bA]&bD)<<by;bB[bA-bC]=this[bA]>>bz}if(bz>0){bB[this.t-bC-1]|=(this.s&bD)<<by}bB.t=this.t-bC;bB.clamp()}function aZ(bz,bB){var bA=0,bC=0,by=Math.min(bz.t,this.t);while(bA<by){bC+=this[bA]-bz[bA];bB[bA++]=bC&this.DM;bC>>=this.DB}if(bz.t<this.t){bC-=bz.s;while(bA<this.t){bC+=this[bA];bB[bA++]=bC&this.DM;bC>>=this.DB}bC+=this.s}else{bC+=this.s;while(bA<bz.t){bC-=bz[bA];bB[bA++]=bC&this.DM;bC>>=this.DB}bC-=bz.s}bB.s=(bC<0)?-1:0;if(bC<-1){bB[bA++]=this.DV+bC}else{if(bC>0){bB[bA++]=bC}}bB.t=bA;bB.clamp()}function ab(bz,bB){var by=this.abs(),bC=bz.abs();var bA=by.t;bB.t=bA+bC.t;while(--bA>=0){bB[bA]=0}for(bA=0;bA<bC.t;++bA){bB[bA+by.t]=by.am(0,bC[bA],bB,bA,0,by.t)}bB.s=0;bB.clamp();if(this.s!=bz.s){aX.ZERO.subTo(bB,bB)}}function aA(bA){var by=this.abs();var bz=bA.t=2*by.t;while(--bz>=0){bA[bz]=0}for(bz=0;bz<by.t-1;++bz){var bB=by.am(bz,by[bz],bA,2*bz,0,1);if((bA[bz+by.t]+=by.am(bz+1,2*by[bz],bA,2*bz+1,bB,by.t-bz-1))>=by.DV){bA[bz+by.t]-=by.DV;bA[bz+by.t+1]=1}}if(bA.t>0){bA[bA.t-1]+=by.am(bz,by[bz],bA,2*bz,0,1)}bA.s=0;bA.clamp()}function ac(bH,bE,bD){var bN=bH.abs();if(bN.t<=0){return}var bF=this.abs();if(bF.t<bN.t){if(bE!=null){bE.fromInt(0)}if(bD!=null){this.copyTo(bD)}return}if(bD==null){bD=s()}var bB=s(),by=this.s,bG=bH.s;var bM=this.DB-A(bN[bN.t-1]);if(bM>0){bN.lShiftTo(bM,bB);bF.lShiftTo(bM,bD)}else{bN.copyTo(bB);bF.copyTo(bD)}var bJ=bB.t;var bz=bB[bJ-1];if(bz==0){return}var bI=bz*(1<<this.F1)+((bJ>1)?bB[bJ-2]>>this.F2:0);var bQ=this.FV/bI,bP=(1<<this.F1)/bI,bO=1<<this.F2;var bL=bD.t,bK=bL-bJ,bC=(bE==null)?s():bE;bB.dlShiftTo(bK,bC);if(bD.compareTo(bC)>=0){bD[bD.t++]=1;bD.subTo(bC,bD)}aX.ONE.dlShiftTo(bJ,bC);bC.subTo(bB,bB);while(bB.t<bJ){bB[bB.t++]=0}while(--bK>=0){var bA=(bD[--bL]==bz)?this.DM:Math.floor(bD[bL]*bQ+(bD[bL-1]+bO)*bP);if((bD[bL]+=bB.am(0,bA,bD,bK,0,bJ))<bA){bB.dlShiftTo(bK,bC);bD.subTo(bC,bD);while(bD[bL]<--bA){bD.subTo(bC,bD)}}}if(bE!=null){bD.drShiftTo(bJ,bE);if(by!=bG){aX.ZERO.subTo(bE,bE)}}bD.t=bJ;bD.clamp();if(bM>0){bD.rShiftTo(bM,bD)}if(by<0){aX.ZERO.subTo(bD,bD)}}function ax(by){var bz=s();this.abs().divRemTo(by,null,bz);if(this.s<0&&bz.compareTo(aX.ZERO)>0){by.subTo(bz,bz)}return bz}function al(by){this.m=by}function aQ(by){if(by.s<0||by.compareTo(this.m)>=0){return by.mod(this.m)}else{return by}}function bd(by){return by}function ai(by){by.divRemTo(this.m,null,by)}function ah(by,bA,bz){by.multiplyTo(bA,bz);this.reduce(bz)}function bo(by,bz){by.squareTo(bz);this.reduce(bz)}al.prototype.convert=aQ;al.prototype.revert=bd;al.prototype.reduce=ai;al.prototype.mulTo=ah;al.prototype.sqrTo=bo;function Y(){if(this.t<1){return 0}var by=this[0];if((by&1)==0){return 0}var bz=by&3;bz=(bz*(2-(by&15)*bz))&15;bz=(bz*(2-(by&255)*bz))&255;bz=(bz*(2-(((by&65535)*bz)&65535)))&65535;bz=(bz*(2-by*bz%this.DV))%this.DV;return(bz>0)?this.DV-bz:-bz}function k(by){this.m=by;this.mp=by.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<(by.DB-15))-1;this.mt2=2*by.t}function bc(by){var bz=s();by.abs().dlShiftTo(this.m.t,bz);bz.divRemTo(this.m,null,bz);if(by.s<0&&bz.compareTo(aX.ZERO)>0){this.m.subTo(bz,bz)}return bz}function bm(by){var bz=s();by.copyTo(bz);this.reduce(bz);return bz}function az(by){while(by.t<=this.mt2){by[by.t++]=0}for(var bA=0;bA<this.m.t;++bA){var bz=by[bA]&32767;var bB=(bz*this.mpl+(((bz*this.mph+(by[bA]>>15)*this.mpl)&this.um)<<15))&by.DM;bz=bA+this.m.t;by[bz]+=this.m.am(0,bB,by,bA,0,this.m.t);while(by[bz]>=by.DV){by[bz]-=by.DV;by[++bz]++}}by.clamp();by.drShiftTo(this.m.t,by);if(by.compareTo(this.m)>=0){by.subTo(this.m,by)}}function bf(by,bz){by.squareTo(bz);this.reduce(bz)}function V(by,bA,bz){by.multiplyTo(bA,bz);this.reduce(bz)}k.prototype.convert=bc;k.prototype.revert=bm;k.prototype.reduce=az;k.prototype.mulTo=V;k.prototype.sqrTo=bf;function u(){return((this.t>0)?(this[0]&1):this.s)==0}function Q(bD,bE){if(bD>4294967295||bD<1){return aX.ONE}var bC=s(),by=s(),bB=bE.convert(this),bA=A(bD)-1;bB.copyTo(bC);while(--bA>=0){bE.sqrTo(bC,by);if((bD&(1<<bA))>0){bE.mulTo(by,bB,bC)}else{var bz=bC;bC=by;by=bz}}return bE.revert(bC)}function bh(bz,by){var bA;if(bz<256||by.isEven()){bA=new al(by)}else{bA=new k(by)}return this.exp(bz,bA)}aX.prototype.copyTo=aV;aX.prototype.fromInt=E;aX.prototype.fromString=P;aX.prototype.clamp=ay;aX.prototype.dlShiftTo=bj;aX.prototype.drShiftTo=aU;aX.prototype.lShiftTo=J;aX.prototype.rShiftTo=B;aX.prototype.subTo=aZ;aX.prototype.multiplyTo=ab;aX.prototype.squareTo=aA;aX.prototype.divRemTo=ac;aX.prototype.invDigit=Y;aX.prototype.isEven=u;aX.prototype.exp=Q;aX.prototype.toString=G;aX.prototype.negate=aD;aX.prototype.abs=be;aX.prototype.compareTo=ag;aX.prototype.bitLength=K;aX.prototype.mod=ax;aX.prototype.modPowInt=bh;aX.ZERO=e(0);aX.ONE=e(1);function q(){var by=s();this.copyTo(by);return by}function ae(){if(this.s<0){if(this.t==1){return this[0]-this.DV}else{if(this.t==0){return -1}}}else{if(this.t==1){return this[0]}else{if(this.t==0){return 0}}}return((this[1]&((1<<(32-this.DB))-1))<<this.DB)|this[0]}function a7(){return(this.t==0)?this.s:(this[0]<<24)>>24}function aB(){return(this.t==0)?this.s:(this[0]<<16)>>16}function aT(by){return Math.floor(Math.LN2*this.DB/Math.log(by))}function bk(){if(this.s<0){return -1}else{if(this.t<=0||(this.t==1&&this[0]<=0)){return 0}else{return 1}}}function T(by){if(by==null){by=10}if(this.signum()==0||by<2||by>36){return"0"}var bA=this.chunkSize(by);var bz=Math.pow(by,bA);var bD=e(bz),bE=s(),bC=s(),bB="";this.divRemTo(bD,bE,bC);while(bE.signum()>0){bB=(bz+bC.intValue()).toString(by).substr(1)+bB;bE.divRemTo(bD,bE,bC)}return bC.intValue().toString(by)+bB}function aJ(bG,bD){this.fromInt(0);if(bD==null){bD=10}var bB=this.chunkSize(bD);var bC=Math.pow(bD,bB),bA=false,by=0,bF=0;for(var bz=0;bz<bG.length;++bz){var bE=W(bG,bz);if(bE<0){if(bG.charAt(bz)=="-"&&this.signum()==0){bA=true}continue}bF=bD*bF+bE;if(++by>=bB){this.dMultiply(bC);this.dAddOffset(bF,0);by=0;bF=0}}if(by>0){this.dMultiply(Math.pow(bD,by));this.dAddOffset(bF,0)}if(bA){aX.ZERO.subTo(this,this)}}function a4(bA,bz,bC){if("number"==typeof bz){if(bA<2){this.fromInt(1)}else{this.fromNumber(bA,bC);if(!this.testBit(bA-1)){this.bitwiseTo(aX.ONE.shiftLeft(bA-1),ao,this)}if(this.isEven()){this.dAddOffset(1,0)}while(!this.isProbablePrime(bz)){this.dAddOffset(2,0);if(this.bitLength()>bA){this.subTo(aX.ONE.shiftLeft(bA-1),this)}}}}else{var by=[],bB=bA&7;by.length=(bA>>3)+1;bz.nextBytes(by);if(bB>0){by[0]&=((1<<bB)-1)}else{by[0]=0}this.fromString(by,256)}}function br(){var bz=this.t,bA=[];bA[0]=this.s;var bB=this.DB-(bz*this.DB)%8,bC,by=0;if(bz-->0){if(bB<this.DB&&(bC=this[bz]>>bB)!=(this.s&this.DM)>>bB){bA[by++]=bC|(this.s<<(this.DB-bB))}while(bz>=0){if(bB<8){bC=(this[bz]&((1<<bB)-1))<<(8-bB);bC|=this[--bz]>>(bB+=this.DB-8)}else{bC=(this[bz]>>(bB-=8))&255;if(bB<=0){bB+=this.DB;--bz}}if((bC&128)!=0){bC|=-256}if(by==0&&(this.s&128)!=(bC&128)){++by}if(by>0||bC!=this.s){bA[by++]=bC}}}return bA}function aF(by){return(this.compareTo(by)==0)}function af(by){return(this.compareTo(by)<0)?this:by}function aO(by){return(this.compareTo(by)>0)?this:by}function a5(bz,bD,bB){var bA,bC,by=Math.min(bz.t,this.t);for(bA=0;bA<by;++bA){bB[bA]=bD(this[bA],bz[bA])}if(bz.t<this.t){bC=bz.s&this.DM;for(bA=by;bA<this.t;++bA){bB[bA]=bD(this[bA],bC)}bB.t=this.t}else{bC=this.s&this.DM;for(bA=by;bA<bz.t;++bA){bB[bA]=bD(bC,bz[bA])}bB.t=bz.t}bB.s=bD(this.s,bz.s);bB.clamp()}function U(by,bz){return by&bz}function bt(by){var bz=s();this.bitwiseTo(by,U,bz);return bz}function ao(by,bz){return by|bz}function aS(by){var bz=s();this.bitwiseTo(by,ao,bz);return bz}function Z(by,bz){return by^bz}function g(by){var bz=s();this.bitwiseTo(by,Z,bz);return bz}function N(by,bz){return by&~bz}function C(by){var bz=s();this.bitwiseTo(by,N,bz);return bz}function aa(){var bz=s();for(var by=0;by<this.t;++by){bz[by]=this.DM&~this[by]}bz.t=this.t;bz.s=~this.s;return bz}function O(bz){var by=s();if(bz<0){this.rShiftTo(-bz,by)}else{this.lShiftTo(bz,by)}return by}function bs(bz){var by=s();if(bz<0){this.lShiftTo(-bz,by)}else{this.rShiftTo(bz,by)}return by}function y(by){if(by==0){return -1}var bz=0;if((by&65535)==0){by>>=16;bz+=16}if((by&255)==0){by>>=8;bz+=8}if((by&15)==0){by>>=4;bz+=4}if((by&3)==0){by>>=2;bz+=2}if((by&1)==0){++bz}return bz}function F(){for(var by=0;by<this.t;++by){if(this[by]!=0){return by*this.DB+y(this[by])}}if(this.s<0){return this.t*this.DB}return -1}function bg(by){var bz=0;while(by!=0){by&=by-1;++bz}return bz}function a3(){var bA=0,by=this.s&this.DM;for(var bz=0;bz<this.t;++bz){bA+=bg(this[bz]^by)}return bA}function a1(bz){var by=Math.floor(bz/this.DB);if(by>=this.t){return(this.s!=0)}return((this[by]&(1<<(bz%this.DB)))!=0)}function ad(bA,bz){var by=aX.ONE.shiftLeft(bA);this.bitwiseTo(by,bz,by);return by}function X(by){return this.changeBit(by,ao)}function D(by){return this.changeBit(by,N)}function d(by){return this.changeBit(by,Z)}function aK(bz,bB){var bA=0,bC=0,by=Math.min(bz.t,this.t);while(bA<by){bC+=this[bA]+bz[bA];bB[bA++]=bC&this.DM;bC>>=this.DB}if(bz.t<this.t){bC+=bz.s;while(bA<this.t){bC+=this[bA];bB[bA++]=bC&this.DM;bC>>=this.DB}bC+=this.s}else{bC+=this.s;while(bA<bz.t){bC+=bz[bA];bB[bA++]=bC&this.DM;bC>>=this.DB}bC+=bz.s}bB.s=(bC<0)?-1:0;if(bC>0){bB[bA++]=bC}else{if(bC<-1){bB[bA++]=this.DV+bC}}bB.t=bA;bB.clamp()}function aN(by){var bz=s();this.addTo(by,bz);return bz}function bl(by){var bz=s();this.subTo(by,bz);return bz}function aE(by){var bz=s();this.multiplyTo(by,bz);return bz}function a0(){var by=s();this.squareTo(by);return by}function f(by){var bz=s();this.divRemTo(by,bz,null);return bz}function n(by){var bz=s();this.divRemTo(by,null,bz);return bz}function a2(by){var bA=s(),bz=s();this.divRemTo(by,bA,bz);return new Array(bA,bz)}function v(by){this[this.t]=this.am(0,by-1,this,0,0,this.t);++this.t;this.clamp()}function av(bz,by){if(bz==0){return}while(this.t<=by){this[this.t++]=0}this[by]+=bz;while(this[by]>=this.DV){this[by]-=this.DV;if(++by>=this.t){this[this.t++]=0}++this[by]}}function aM(){}function a8(by){return by}function z(by,bA,bz){by.multiplyTo(bA,bz)}function aR(by,bz){by.squareTo(bz)}aM.prototype.convert=a8;aM.prototype.revert=a8;aM.prototype.mulTo=z;aM.prototype.sqrTo=aR;function R(by){return this.exp(by,new aM())}function r(by,bC,bB){var bA=Math.min(this.t+by.t,bC);bB.s=0;bB.t=bA;while(bA>0){bB[--bA]=0}var bz;for(bz=bB.t-this.t;bA<bz;++bA){bB[bA+this.t]=this.am(0,by[bA],bB,bA,0,this.t)}for(bz=Math.min(by.t,bC);bA<bz;++bA){this.am(0,by[bA],bB,bA,0,bC-bA)}bB.clamp()}function j(by,bB,bA){--bB;var bz=bA.t=this.t+by.t-bB;bA.s=0;while(--bz>=0){bA[bz]=0}for(bz=Math.max(bB-this.t,0);bz<by.t;++bz){bA[this.t+bz-bB]=this.am(bB-bz,by[bz],bA,0,0,this.t+bz-bB)}bA.clamp();bA.drShiftTo(1,bA)}function S(by){this.r2=s();this.q3=s();aX.ONE.dlShiftTo(2*by.t,this.r2);this.mu=this.r2.divide(by);this.m=by}function ak(by){if(by.s<0||by.t>2*this.m.t){return by.mod(this.m)}else{if(by.compareTo(this.m)<0){return by}else{var bz=s();by.copyTo(bz);this.reduce(bz);return bz}}}function aq(by){return by}function bp(by){by.drShiftTo(this.m.t-1,this.r2);if(by.t>this.m.t+1){by.t=this.m.t+1;by.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(by.compareTo(this.r2)<0){by.dAddOffset(1,this.m.t+1)}by.subTo(this.r2,by);while(by.compareTo(this.m)>=0){by.subTo(this.m,by)}}function aG(by,bz){by.squareTo(bz);this.reduce(bz)}function bq(by,bA,bz){by.multiplyTo(bA,bz);this.reduce(bz)}S.prototype.convert=ak;S.prototype.revert=aq;S.prototype.reduce=bp;S.prototype.mulTo=bq;S.prototype.sqrTo=aG;function aP(bH,bC){var bF=bH.bitLength(),bD,bz=e(1),bK;if(bF<=0){return bz}else{if(bF<18){bD=1}else{if(bF<48){bD=3}else{if(bF<144){bD=4}else{if(bF<768){bD=5}else{bD=6}}}}}if(bF<8){bK=new al(bC)}else{if(bC.isEven()){bK=new S(bC)}else{bK=new k(bC)}}var bG=[],bB=3,bI=bD-1,by=(1<<bD)-1;bG[1]=bK.convert(this);if(bD>1){var bN=s();bK.sqrTo(bG[1],bN);while(bB<=by){bG[bB]=s();bK.mulTo(bN,bG[bB-2],bG[bB]);bB+=2}}var bE=bH.t-1,bL,bJ=true,bA=s(),bM;bF=A(bH[bE])-1;while(bE>=0){if(bF>=bI){bL=(bH[bE]>>(bF-bI))&by}else{bL=(bH[bE]&((1<<(bF+1))-1))<<(bI-bF);if(bE>0){bL|=bH[bE-1]>>(this.DB+bF-bI)}}bB=bD;while((bL&1)==0){bL>>=1;--bB}if((bF-=bB)<0){bF+=this.DB;--bE}if(bJ){bG[bL].copyTo(bz);bJ=false}else{while(bB>1){bK.sqrTo(bz,bA);bK.sqrTo(bA,bz);bB-=2}if(bB>0){bK.sqrTo(bz,bA)}else{bM=bz;bz=bA;bA=bM}bK.mulTo(bA,bG[bL],bz)}while(bE>=0&&(bH[bE]&(1<<bF))==0){bK.sqrTo(bz,bA);bM=bz;bz=bA;bA=bM;if(--bF<0){bF=this.DB-1;--bE}}}return bK.revert(bz)}function bn(bz){var by=(this.s<0)?this.negate():this.clone();var bD=(bz.s<0)?bz.negate():bz.clone();if(by.compareTo(bD)<0){var bB=by;by=bD;bD=bB}var bA=by.getLowestSetBit(),bC=bD.getLowestSetBit();if(bC<0){return by}if(bA<bC){bC=bA}if(bC>0){by.rShiftTo(bC,by);bD.rShiftTo(bC,bD)}while(by.signum()>0){if((bA=by.getLowestSetBit())>0){by.rShiftTo(bA,by)}if((bA=bD.getLowestSetBit())>0){bD.rShiftTo(bA,bD)}if(by.compareTo(bD)>=0){by.subTo(bD,by);by.rShiftTo(1,by)}else{bD.subTo(by,bD);bD.rShiftTo(1,bD)}}if(bC>0){bD.lShiftTo(bC,bD)}return bD}function I(bB){if(bB<=0){return 0}var bA=this.DV%bB,bz=(this.s<0)?bB-1:0;if(this.t>0){if(bA==0){bz=this[0]%bB}else{for(var by=this.t-1;by>=0;--by){bz=(bA*bz+this[by])%bB}}}return bz}function b(bz){var bD=bz.isEven();if((this.isEven()&&bD)||bz.signum()==0){return aX.ZERO}var bC=bz.clone(),bB=this.clone();var bA=e(1),by=e(0),bF=e(0),bE=e(1);while(bC.signum()!=0){while(bC.isEven()){bC.rShiftTo(1,bC);if(bD){if(!bA.isEven()||!by.isEven()){bA.addTo(this,bA);by.subTo(bz,by)}bA.rShiftTo(1,bA)}else{if(!by.isEven()){by.subTo(bz,by)}}by.rShiftTo(1,by)}while(bB.isEven()){bB.rShiftTo(1,bB);if(bD){if(!bF.isEven()||!bE.isEven()){bF.addTo(this,bF);bE.subTo(bz,bE)}bF.rShiftTo(1,bF)}else{if(!bE.isEven()){bE.subTo(bz,bE)}}bE.rShiftTo(1,bE)}if(bC.compareTo(bB)>=0){bC.subTo(bB,bC);if(bD){bA.subTo(bF,bA)}by.subTo(bE,by)}else{bB.subTo(bC,bB);if(bD){bF.subTo(bA,bF)}bE.subTo(by,bE)}}if(bB.compareTo(aX.ONE)!=0){return aX.ZERO}if(bE.compareTo(bz)>=0){return bE.subtract(bz)}if(bE.signum()<0){bE.addTo(bz,bE)}else{return bE}if(bE.signum()<0){return bE.add(bz)}else{return bE}}var aH=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var aI=(1<<26)/aH[aH.length-1];function an(bC){var bB,bz=this.abs();if(bz.t==1&&bz[0]<=aH[aH.length-1]){for(bB=0;bB<aH.length;++bB){if(bz[0]==aH[bB]){return true}}return false}if(bz.isEven()){return false}bB=1;while(bB<aH.length){var by=aH[bB],bA=bB+1;while(bA<aH.length&&by<aI){by*=aH[bA++]}by=bz.modInt(by);while(bB<bA){if(by%aH[bB++]==0){return false}}}return bz.millerRabin(bC)}function m(bC){var bD=this.subtract(aX.ONE);var bz=bD.getLowestSetBit();if(bz<=0){return false}var bE=bD.shiftRight(bz);bC=(bC+1)>>1;if(bC>aH.length){bC=aH.length}var by=s();for(var bB=0;bB<bC;++bB){by.fromInt(aH[Math.floor(Math.random()*aH.length)]);var bF=by.modPow(bE,this);if(bF.compareTo(aX.ONE)!=0&&bF.compareTo(bD)!=0){var bA=1;while(bA++<bz&&bF.compareTo(bD)!=0){bF=bF.modPowInt(2,this);if(bF.compareTo(aX.ONE)==0){return false}}if(bF.compareTo(bD)!=0){return false}}}return true}aX.prototype.chunkSize=aT;aX.prototype.toRadix=T;aX.prototype.fromRadix=aJ;aX.prototype.fromNumber=a4;aX.prototype.bitwiseTo=a5;aX.prototype.changeBit=ad;aX.prototype.addTo=aK;aX.prototype.dMultiply=v;aX.prototype.dAddOffset=av;aX.prototype.multiplyLowerTo=r;aX.prototype.multiplyUpperTo=j;aX.prototype.modInt=I;aX.prototype.millerRabin=m;aX.prototype.clone=q;aX.prototype.intValue=ae;aX.prototype.byteValue=a7;aX.prototype.shortValue=aB;aX.prototype.signum=bk;aX.prototype.toByteArray=br;aX.prototype.equals=aF;aX.prototype.min=af;aX.prototype.max=aO;aX.prototype.and=bt;aX.prototype.or=aS;aX.prototype.xor=g;aX.prototype.andNot=C;aX.prototype.not=aa;aX.prototype.shiftLeft=O;aX.prototype.shiftRight=bs;aX.prototype.getLowestSetBit=F;aX.prototype.bitCount=a3;aX.prototype.testBit=a1;aX.prototype.setBit=X;aX.prototype.clearBit=D;aX.prototype.flipBit=d;aX.prototype.add=aN;aX.prototype.subtract=bl;aX.prototype.multiply=aE;aX.prototype.divide=f;aX.prototype.remainder=n;aX.prototype.divideAndRemainder=a2;aX.prototype.modPow=aP;aX.prototype.modInverse=b;aX.prototype.pow=R;aX.prototype.gcd=bn;aX.prototype.isProbablePrime=an;aX.prototype.square=a0;aC.Math_Abs_Int64=aC.Math_Abs_Int32=aC.Math_Abs_Double=function(by){return Math.abs(by)};aC.Math_Max_Int32_Int32=function(bz,by){return Math.max(bz,by)};if(ba.msie||ba.opera||ba.safari){aC.Cast_Int32=function(by){return by|0}}else{aC.Cast_Int32=function(by){return ~~by}}if(ba.chrome){aC.Cast_Int64=function(by){if(by<-2147483648||by>2147483647){return by<0?Math.ceil(by):Math.floor(by)}else{return ~~by}}}else{if(ba.firefox&&typeof(Number.toInteger)=="function"){aC.Cast_Int64=function(by){return Number.toInteger(by)}}else{if(ba.msie7||ba.msie8){aC.Cast_Int64=function(by){return parseInt(by,10)}}else{if(ba.msie){aC.Cast_Int64=function(by){if(by<-2147483648||by>2147483647){return by<0?Math.ceil(by):Math.floor(by)}return by|0}}else{aC.Cast_Int64=function(by){return by<0?Math.ceil(by):Math.floor(by)}}}}}aC.Clear=function(by){by.length=0};aC.MaxSteps=64;aC.PI=3.141592653589793;aC.PI2=2*3.141592653589793;aC.IntPoint=function(){var by=arguments;if(by.length==1){this.x=by[0].x;this.y=by[0].y}if(by.length==2){this.x=by[0];this.y=by[1]}};aC.IntRect=function(){var bA=arguments;if(bA.length==4){var bz=bA[0],bB=bA[1],bC=bA[2],by=bA[3];this.left=bz;this.top=bB;this.right=bC;this.bottom=by}else{this.left=0;this.top=0;this.right=0;this.bottom=0}};aC.Polygon=function(){return[]};aC.Polygons=function(){return[]};aC.ExPolygons=function(){var by=[];by.exPolygons=true;return by};aC.ExPolygon=function(){this.outer=null;this.holes=null};aC.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3};aC.PolyType={ptSubject:0,ptClip:1};aC.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3};aC.JoinType={jtSquare:0,jtRound:1,jtMiter:2};aC.EdgeSide={esLeft:1,esRight:2};aC.Protects={ipNone:0,ipLeft:1,ipRight:2,ipBoth:3};aC.Direction={dRightToLeft:0,dLeftToRight:1};aC.TEdge=function(){this.xbot=0;this.ybot=0;this.xcurr=0;this.ycurr=0;this.xtop=0;this.ytop=0;this.dx=0;this.deltaX=0;this.deltaY=0;this.tmpX=0;this.polyType=aC.PolyType.ptSubject;this.side=null;this.windDelta=0;this.windCnt=0;this.windCnt2=0;this.outIdx=0;this.next=null;this.prev=null;this.nextInLML=null;this.nextInAEL=null;this.prevInAEL=null;this.nextInSEL=null;this.prevInSEL=null};aC.IntersectNode=function(){this.edge1=null;this.edge2=null;this.pt=null;this.next=null};aC.LocalMinima=function(){this.y=0;this.leftBound=null;this.rightBound=null;this.next=null};aC.Scanbeam=function(){this.y=0;this.next=null};aC.OutRec=function(){this.idx=0;this.isHole=false;this.FirstLeft=null;this.AppendLink=null;this.pts=null;this.bottomPt=null};aC.OutPt=function(){this.idx=0;this.pt=null;this.next=null;this.prev=null};aC.JoinRec=function(){this.pt1a=null;this.pt1b=null;this.poly1Idx=0;this.pt2a=null;this.pt2b=null;this.poly2Idx=0};aC.HorzJoinRec=function(){this.edge=null;this.savedIdx=0};aC.ClipperBase=function(){this.m_MinimaList=null;this.m_CurrentLM=null;this.m_edges=[[]];this.m_UseFullRange=false};aC.ClipperBase.horizontal=-9007199254740992;aC.ClipperBase.loRange=47453132;aC.ClipperBase.hiRange=4503599627370495;aC.ClipperBase.PointsEqual=function(bz,by){return(bz.x==by.x&&bz.y==by.y)};aC.ClipperBase.prototype.PointIsVertex=function(bA,bz){var by=bz;do{if(aC.ClipperBase.PointsEqual(by.pt,bA)){return true}by=by.next}while(by!=bz);return false};aC.ClipperBase.prototype.PointInPolygon=function(bC,bA,bB){var bz=bA;var by=false;if(bB){do{if((((bz.pt.y<=bC.y)&&(bC.y<bz.prev.pt.y))||((bz.prev.pt.y<=bC.y)&&(bC.y<bz.pt.y)))&&new aX(bC.x-bz.pt.x).compareTo(new aX(bz.prev.pt.x-bz.pt.x).multiply(new aX(bC.y-bz.pt.y)).divide(new aX(bz.prev.pt.y-bz.pt.y)))<0){by=!by}bz=bz.next}while(bz!=bA)}else{do{if((((bz.pt.y<=bC.y)&&(bC.y<bz.prev.pt.y))||((bz.prev.pt.y<=bC.y)&&(bC.y<bz.pt.y)))&&(bC.x-bz.pt.x<(bz.prev.pt.x-bz.pt.x)*(bC.y-bz.pt.y)/(bz.prev.pt.y-bz.pt.y))){by=!by}bz=bz.next}while(bz!=bA)}return by};aC.ClipperBase.prototype.SlopesEqual=aC.ClipperBase.SlopesEqual=function(){var by=arguments;var bF,bD,bE,bC,bB,bA,bz;if(by.length==3){bF=by[0],bD=by[1],bz=by[2];if(bz){return new aX(bF.deltaY).multiply(new aX(bD.deltaX)).toString()==new aX(bF.deltaX).multiply(new aX(bD.deltaY)).toString()}else{return(bF.deltaY)*(bD.deltaX)==(bF.deltaX)*(bD.deltaY)}}else{if(by.length==4){bE=by[0],bC=by[1],bB=by[2],bz=by[3];if(bz){return new aX(bE.y-bC.y).multiply(new aX(bC.x-bB.x)).toString()==new aX(bE.x-bC.x).multiply(new aX(bC.y-bB.y)).toString()}else{return(bE.y-bC.y)*(bC.x-bB.x)-(bE.x-bC.x)*(bC.y-bB.y)==0}}else{if(by.length==5){bE=by[0],bC=by[1],bB=by[2],bA=by[3],bz=by[4];if(bz){return new aX(bE.y-bC.y).multiply(new aX(bB.x-bA.x)).toString()==new aX(bE.x-bC.x).multiply(new aX(bB.y-bA.y)).toString()}else{return(bE.y-bC.y)*(bB.x-bA.x)-(bE.x-bC.x)*(bB.y-bA.y)==0}}}}};aC.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var bz=0;bz<this.m_edges.length;++bz){for(var by=0;by<this.m_edges[bz].length;++by){this.m_edges[bz][by]=null}aC.Clear(this.m_edges[bz])}aC.Clear(this.m_edges);this.m_UseFullRange=false};aC.ClipperBase.prototype.DisposeLocalMinimaList=function(){while(this.m_MinimaList!=null){var by=this.m_MinimaList.next;this.m_MinimaList=null;this.m_MinimaList=by}this.m_CurrentLM=null};aC.ClipperBase.prototype.AddPolygons=function(bz,bA){var by=false;var bC=false;if(!(bz instanceof Array)){return by}for(var bB=0;bB<bz.length;++bB){bC=this.AddPolygon(bz[bB],bA,true);if(bC&&bC!="exceed"){by=true}else{if(bC=="exceed"){break}}}if(bC=="exceed"){aC.Error("Coordinate exceeds range bounds in AddPolygons().")}return by};aC.ClipperBase.prototype.AddPolygon=function(bE,bH,bJ){if(!(bE instanceof Array)){return false}var bF=bE.length;if(bF<3){return false}var bz=new aC.Polygon();bz.push(new aC.IntPoint(bE[0].x,bE[0].y));var bC=0;var bD;var bA=false;for(bD=1;bD<bF;++bD){var bI;if(this.m_UseFullRange){bI=aC.ClipperBase.hiRange}else{bI=aC.ClipperBase.loRange}if(aC.Math_Abs_Int64(bE[bD].x)>bI||aC.Math_Abs_Int64(bE[bD].y)>bI){if(aC.Math_Abs_Int64(bE[bD].x)>aC.ClipperBase.hiRange||aC.Math_Abs_Int64(bE[bD].y)>aC.ClipperBase.hiRange){if(typeof(bJ)!="undefined"){return"exceed"}bA=true;break}bI=aC.ClipperBase.hiRange;this.m_UseFullRange=true}if(aC.ClipperBase.PointsEqual(bz[bC],bE[bD])){continue}else{if(bC>0&&this.SlopesEqual(bz[bC-1],bz[bC],bE[bD],this.m_UseFullRange)){if(aC.ClipperBase.PointsEqual(bz[bC-1],bE[bD])){bC--}}else{bC++}}if(bC<bz.length){bz[bC]=bE[bD]}else{bz.push(new aC.IntPoint(bE[bD].x,bE[bD].y))}}if(bA&&typeof(bJ)=="undefined"){aC.Error("Coordinate exceeds range bounds in AddPolygon()")}if(bC<2){return false}bF=bC+1;while(bF>2){if(aC.ClipperBase.PointsEqual(bz[bC],bz[0])){bC--}else{if(aC.ClipperBase.PointsEqual(bz[0],bz[1])||this.SlopesEqual(bz[bC],bz[0],bz[1],this.m_UseFullRange)){bz[0]=bz[bC--]}else{if(this.SlopesEqual(bz[bC-1],bz[bC],bz[0],this.m_UseFullRange)){bC--}else{if(this.SlopesEqual(bz[0],bz[1],bz[2],this.m_UseFullRange)){for(bD=2;bD<=bC;++bD){bz[bD-1]=bz[bD]}bC--}else{break}}}}bF--}if(bF<3){return false}var bB=[];for(bD=0;bD<bF;bD++){bB.push(new aC.TEdge())}this.m_edges.push(bB);bB[0].xcurr=bz[0].x;bB[0].ycurr=bz[0].y;this.InitEdge(bB[bF-1],bB[0],bB[bF-2],bz[bF-1],bH);for(bD=bF-2;bD>0;--bD){this.InitEdge(bB[bD],bB[bD+1],bB[bD-1],bz[bD],bH)}this.InitEdge(bB[0],bB[1],bB[bF-1],bz[0],bH);var bG=bB[0];var by=bG;do{bG.xcurr=bG.xbot;bG.ycurr=bG.ybot;if(bG.ytop<by.ytop){by=bG}bG=bG.next}while(bG!=bB[0]);if(by.windDelta>0){by=by.next}if(by.dx==aC.ClipperBase.horizontal){by=by.next}bG=by;do{bG=this.AddBoundsToLML(bG)}while(bG!=by);return true};aC.ClipperBase.prototype.InitEdge=function(bC,bz,bA,bB,by){bC.next=bz;bC.prev=bA;bC.xcurr=bB.x;bC.ycurr=bB.y;if(bC.ycurr>=bC.next.ycurr){bC.xbot=bC.xcurr;bC.ybot=bC.ycurr;bC.xtop=bC.next.xcurr;bC.ytop=bC.next.ycurr;bC.windDelta=1}else{bC.xtop=bC.xcurr;bC.ytop=bC.ycurr;bC.xbot=bC.next.xcurr;bC.ybot=bC.next.ycurr;bC.windDelta=-1}this.SetDx(bC);bC.polyType=by;bC.outIdx=-1};aC.ClipperBase.prototype.SetDx=function(by){by.deltaX=(by.xtop-by.xbot);by.deltaY=(by.ytop-by.ybot);if(by.deltaY==0){by.dx=aC.ClipperBase.horizontal}else{by.dx=(by.deltaX)/(by.deltaY)}};aC.ClipperBase.prototype.AddBoundsToLML=function(bz){bz.nextInLML=null;bz=bz.next;for(;;){if(bz.dx==aC.ClipperBase.horizontal){if(bz.next.ytop<bz.ytop&&bz.next.xbot>bz.prev.xbot){break}if(bz.xtop!=bz.prev.xbot){this.SwapX(bz)}bz.nextInLML=bz.prev}else{if(bz.ycurr==bz.prev.ycurr){break}else{bz.nextInLML=bz.prev}}bz=bz.next}var by=new aC.LocalMinima();by.next=null;by.y=bz.prev.ybot;if(bz.dx==aC.ClipperBase.horizontal){if(bz.xbot!=bz.prev.xbot){this.SwapX(bz)}by.leftBound=bz.prev;by.rightBound=bz}else{if(bz.dx<bz.prev.dx){by.leftBound=bz.prev;by.rightBound=bz}else{by.leftBound=bz;by.rightBound=bz.prev}}by.leftBound.side=aC.EdgeSide.esLeft;by.rightBound.side=aC.EdgeSide.esRight;this.InsertLocalMinima(by);for(;;){if(bz.next.ytop==bz.ytop&&bz.next.dx!=aC.ClipperBase.horizontal){break}bz.nextInLML=bz.next;bz=bz.next;if(bz.dx==aC.ClipperBase.horizontal&&bz.xbot!=bz.prev.xtop){this.SwapX(bz)}}return bz.next};aC.ClipperBase.prototype.InsertLocalMinima=function(by){if(this.m_MinimaList==null){this.m_MinimaList=by}else{if(by.y>=this.m_MinimaList.y){by.next=this.m_MinimaList;this.m_MinimaList=by}else{var bz=this.m_MinimaList;while(bz.next!=null&&(by.y<bz.next.y)){bz=bz.next}by.next=bz.next;bz.next=by}}};aC.ClipperBase.prototype.PopLocalMinima=function(){if(this.m_CurrentLM==null){return}this.m_CurrentLM=this.m_CurrentLM.next};aC.ClipperBase.prototype.SwapX=function(by){by.xcurr=by.xtop;by.xtop=by.xbot;by.xbot=by.xcurr};aC.ClipperBase.prototype.Reset=function(){this.m_CurrentLM=this.m_MinimaList;var by=this.m_MinimaList;while(by!=null){var bz=by.leftBound;while(bz!=null){bz.xcurr=bz.xbot;bz.ycurr=bz.ybot;bz.side=aC.EdgeSide.esLeft;bz.outIdx=-1;bz=bz.nextInLML}bz=by.rightBound;while(bz!=null){bz.xcurr=bz.xbot;bz.ycurr=bz.ybot;bz.side=aC.EdgeSide.esRight;bz.outIdx=-1;bz=bz.nextInLML}by=by.next}return};aC.ClipperBase.prototype.GetBounds=function(){var by=new aC.IntRect();var bA=this.m_MinimaList;if(bA==null){return by}by.left=bA.leftBound.xbot;by.top=bA.leftBound.ybot;by.right=bA.leftBound.xbot;by.bottom=bA.leftBound.ybot;while(bA!=null){if(bA.leftBound.ybot>by.bottom){by.bottom=bA.leftBound.ybot}var bB=bA.leftBound;for(;;){var bz=bB;while(bB.nextInLML!=null){if(bB.xbot<by.left){by.left=bB.xbot}if(bB.xbot>by.right){by.right=bB.xbot}bB=bB.nextInLML}if(bB.xbot<by.left){by.left=bB.xbot}if(bB.xbot>by.right){by.right=bB.xbot}if(bB.xtop<by.left){by.left=bB.xtop}if(bB.xtop>by.right){by.right=bB.xtop}if(bB.ytop<by.top){by.top=bB.ytop}if(bz==bA.leftBound){bB=bA.rightBound}else{break}}bA=bA.next}return by};aC.Clipper=function(){this.m_PolyOuts=null;this.m_ClipType=aC.ClipType.ctIntersection;this.m_Scanbeam=null;this.m_ActiveEdges=null;this.m_SortedEdges=null;this.m_IntersectNodes=null;this.m_ExecuteLocked=false;this.m_ClipFillType=aC.PolyFillType.pftEvenOdd;this.m_SubjFillType=aC.PolyFillType.pftEvenOdd;this.m_Joins=null;this.m_HorizJoins=null;this.m_ReverseOutput=false;this.m_UsingExPolygons=false;aC.ClipperBase.call(this);this.m_Scanbeam=null;this.m_ActiveEdges=null;this.m_SortedEdges=null;this.m_IntersectNodes=null;this.m_ExecuteLocked=false;this.m_PolyOuts=[];this.m_Joins=[];this.m_HorizJoins=[];this.m_ReverseOutput=false;this.m_UsingExPolygons=false};aC.Clipper.prototype.Clear=function(){if(this.m_edges.length==0){return}this.DisposeAllPolyPts();aC.ClipperBase.prototype.Clear.call(this)};aC.Clipper.prototype.DisposeScanbeamList=function(){while(this.m_Scanbeam!=null){var by=this.m_Scanbeam.next;this.m_Scanbeam=null;this.m_Scanbeam=by}};aC.Clipper.prototype.Reset=function(){aC.ClipperBase.prototype.Reset.call(this);this.m_Scanbeam=null;this.m_ActiveEdges=null;this.m_SortedEdges=null;this.DisposeAllPolyPts();var by=this.m_MinimaList;while(by!=null){this.InsertScanbeam(by.y);this.InsertScanbeam(by.leftBound.ytop);by=by.next}};aC.Clipper.prototype.get_ReverseSolution=function(){return this.m_ReverseOutput};aC.Clipper.prototype.set_ReverseSolution=function(by){this.m_ReverseOutput=by};aC.Clipper.prototype.InsertScanbeam=function(bA){var by;if(this.m_Scanbeam==null){this.m_Scanbeam=new aC.Scanbeam();this.m_Scanbeam.next=null;this.m_Scanbeam.y=bA}else{if(bA>this.m_Scanbeam.y){by=new aC.Scanbeam();by.y=bA;by.next=this.m_Scanbeam;this.m_Scanbeam=by}else{var bz=this.m_Scanbeam;while(bz.next!=null&&(bA<=bz.next.y)){bz=bz.next}if(bA==bz.y){return}by=new aC.Scanbeam();by.y=bA;by.next=bz.next;bz.next=by}}};aC.Clipper.prototype.Execute=function(bA,by,bz,bB){var bC;if(arguments.length==2){bz=aC.PolyFillType.pftEvenOdd;bB=aC.PolyFillType.pftEvenOdd}if(typeof(by.exPolygons)=="undefined"){if(this.m_ExecuteLocked){return false}this.m_ExecuteLocked=true;aC.Clear(by);this.m_SubjFillType=bz;this.m_ClipFillType=bB;this.m_ClipType=bA;this.m_UsingExPolygons=false;bC=this.ExecuteInternal();if(bC){this.BuildResult(by)}this.m_ExecuteLocked=false;return bC}else{if(this.m_ExecuteLocked){return false}this.m_ExecuteLocked=true;aC.Clear(by);this.m_SubjFillType=bz;this.m_ClipFillType=bB;this.m_ClipType=bA;this.m_UsingExPolygons=true;bC=this.ExecuteInternal();if(bC){this.BuildResultEx(by)}this.m_ExecuteLocked=false;return bC}};aC.Clipper.prototype.PolySort=function(bC,bB){if(bC==bB){return 0}else{if(bC.pts==null||bB.pts==null){if((bC.pts==null)!=(bB.pts==null)){return bC.pts==null?1:-1}else{return 0}}}var bA,bz;if(bC.isHole){bA=bC.FirstLeft.idx}else{bA=bC.idx}if(bB.isHole){bz=bB.FirstLeft.idx}else{bz=bB.idx}var by=bA-bz;if(by==0&&(bC.isHole!=bB.isHole)){return bC.isHole?1:-1}return by};aC.Clipper.prototype.FindAppendLinkEnd=function(by){while(by.AppendLink!=null){by=by.AppendLink}return by};aC.Clipper.prototype.FixHoleLinkage=function(bz){var by;if(bz.bottomPt!=null){by=this.m_PolyOuts[bz.bottomPt.idx].FirstLeft}else{by=bz.FirstLeft}if(bz==by){aC.Error("HoleLinkage error")}if(by!=null){if(by.AppendLink!=null){by=this.FindAppendLinkEnd(by)}if(by==bz){by=null}else{if(by.isHole){this.FixHoleLinkage(by);by=by.FirstLeft}}}bz.FirstLeft=by;if(by==null){bz.isHole=false}bz.AppendLink=null};aC.Clipper.prototype.ExecuteInternal=function(){var bC;try{this.Reset();if(this.m_CurrentLM==null){return true}var bB=this.PopScanbeam();do{this.InsertLocalMinimaIntoAEL(bB);aC.Clear(this.m_HorizJoins);this.ProcessHorizontals();var by=this.PopScanbeam();bC=this.ProcessIntersections(bB,by);if(!bC){break}this.ProcessEdgesAtTopOfScanbeam(by);bB=by}while(this.m_Scanbeam!=null)}catch(bD){bC=false}if(bC){var bA;for(var bz=0;bz<this.m_PolyOuts.length;bz++){bA=this.m_PolyOuts[bz];if(bA.pts==null){continue}this.FixupOutPolygon(bA);if(bA.pts==null){continue}if(bA.isHole&&this.m_UsingExPolygons){this.FixHoleLinkage(bA)}if((bA.isHole^this.m_ReverseOutput)==(this.Area(bA,this.m_UseFullRange)>0)){this.ReversePolyPtLinks(bA.pts)}}this.JoinCommonEdges();if(this.m_UsingExPolygons){this.m_PolyOuts.sort(this.PolySort)}}aC.Clear(this.m_Joins);aC.Clear(this.m_HorizJoins);return bC};aC.Clipper.prototype.PopScanbeam=function(){var bz=this.m_Scanbeam.y;var by=this.m_Scanbeam;this.m_Scanbeam=this.m_Scanbeam.next;by=null;return bz};aC.Clipper.prototype.DisposeAllPolyPts=function(){for(var by=0;by<this.m_PolyOuts.length;++by){this.DisposeOutRec(by)}aC.Clear(this.m_PolyOuts)};aC.Clipper.prototype.DisposeOutRec=function(by){var bz=this.m_PolyOuts[by];if(bz.pts!=null){this.DisposeOutPts(bz.pts)}bz=null;this.m_PolyOuts[by]=null};aC.Clipper.prototype.DisposeOutPts=function(bz){if(bz==null){return}var by=null;bz.prev.next=null;while(bz!=null){by=bz;bz=bz.next;by=null}};aC.Clipper.prototype.AddJoin=function(bB,bz,bC,by){var bA=new aC.JoinRec();if(bC>=0){bA.poly1Idx=bC}else{bA.poly1Idx=bB.outIdx}bA.pt1a=new aC.IntPoint(bB.xcurr,bB.ycurr);bA.pt1b=new aC.IntPoint(bB.xtop,bB.ytop);if(by>=0){bA.poly2Idx=by}else{bA.poly2Idx=bz.outIdx}bA.pt2a=new aC.IntPoint(bz.xcurr,bz.ycurr);bA.pt2b=new aC.IntPoint(bz.xtop,bz.ytop);this.m_Joins.push(bA)};aC.Clipper.prototype.AddHorzJoin=function(bA,by){var bz=new aC.HorzJoinRec();bz.edge=bA;bz.savedIdx=by;this.m_HorizJoins.push(bz)};aC.Clipper.prototype.InsertLocalMinimaIntoAEL=function(bF){var bE,bD;while(this.m_CurrentLM!=null&&(this.m_CurrentLM.y==bF)){var bA=this.m_CurrentLM.leftBound;var bC=this.m_CurrentLM.rightBound;this.InsertEdgeIntoAEL(bA);this.InsertScanbeam(bA.ytop);this.InsertEdgeIntoAEL(bC);if(this.IsEvenOddFillType(bA)){bA.windDelta=1;bC.windDelta=1}else{bC.windDelta=-bA.windDelta}this.SetWindingCount(bA);bC.windCnt=bA.windCnt;bC.windCnt2=bA.windCnt2;if(bC.dx==aC.ClipperBase.horizontal){this.AddEdgeToSEL(bC);this.InsertScanbeam(bC.nextInLML.ytop)}else{this.InsertScanbeam(bC.ytop)}if(this.IsContributing(bA)){this.AddLocalMinPoly(bA,bC,new aC.IntPoint(bA.xcurr,this.m_CurrentLM.y))}if(bC.outIdx>=0){if(bC.dx==aC.ClipperBase.horizontal){for(var bz=0;bz<this.m_HorizJoins.length;bz++){bE=new aC.IntPoint(),bD=new aC.IntPoint();var by=this.m_HorizJoins[bz];if((function(){bE={Value:bE};bD={Value:bD};var bG=this.GetOverlapSegment(new aC.IntPoint(by.edge.xbot,by.edge.ybot),new aC.IntPoint(by.edge.xtop,by.edge.ytop),new aC.IntPoint(bC.xbot,bC.ybot),new aC.IntPoint(bC.xtop,bC.ytop),bE,bD);bE=bE.Value;bD=bD.Value;return bG}).call(this)){this.AddJoin(by.edge,bC,by.savedIdx,-1)}}}}if(bA.nextInAEL!=bC){if(bC.outIdx>=0&&bC.prevInAEL.outIdx>=0&&this.SlopesEqual(bC.prevInAEL,bC,this.m_UseFullRange)){this.AddJoin(bC,bC.prevInAEL,-1,-1)}var bB=bA.nextInAEL;bE=new aC.IntPoint(bA.xcurr,bA.ycurr);while(bB!=bC){if(bB==null){aC.Error("InsertLocalMinimaIntoAEL: missing rightbound!")}this.IntersectEdges(bC,bB,bE,aC.Protects.ipNone);bB=bB.nextInAEL}}this.PopLocalMinima()}};aC.Clipper.prototype.InsertEdgeIntoAEL=function(by){by.prevInAEL=null;by.nextInAEL=null;if(this.m_ActiveEdges==null){this.m_ActiveEdges=by}else{if(this.E2InsertsBeforeE1(this.m_ActiveEdges,by)){by.nextInAEL=this.m_ActiveEdges;this.m_ActiveEdges.prevInAEL=by;this.m_ActiveEdges=by}else{var bz=this.m_ActiveEdges;while(bz.nextInAEL!=null&&!this.E2InsertsBeforeE1(bz.nextInAEL,by)){bz=bz.nextInAEL}by.nextInAEL=bz.nextInAEL;if(bz.nextInAEL!=null){bz.nextInAEL.prevInAEL=by}by.prevInAEL=bz;bz.nextInAEL=by}}};aC.Clipper.prototype.E2InsertsBeforeE1=function(bz,by){return by.xcurr==bz.xcurr?by.dx>bz.dx:by.xcurr<bz.xcurr};aC.Clipper.prototype.IsEvenOddFillType=function(by){if(by.polyType==aC.PolyType.ptSubject){return this.m_SubjFillType==aC.PolyFillType.pftEvenOdd}else{return this.m_ClipFillType==aC.PolyFillType.pftEvenOdd}};aC.Clipper.prototype.IsEvenOddAltFillType=function(by){if(by.polyType==aC.PolyType.ptSubject){return this.m_ClipFillType==aC.PolyFillType.pftEvenOdd}else{return this.m_SubjFillType==aC.PolyFillType.pftEvenOdd}};aC.Clipper.prototype.IsContributing=function(bz){var by,bA;if(bz.polyType==aC.PolyType.ptSubject){by=this.m_SubjFillType;bA=this.m_ClipFillType}else{by=this.m_ClipFillType;bA=this.m_SubjFillType}switch(by){case aC.PolyFillType.pftEvenOdd:case aC.PolyFillType.pftNonZero:if(aC.Math_Abs_Int32(bz.windCnt)!=1){return false}break;case aC.PolyFillType.pftPositive:if(bz.windCnt!=1){return false}break;default:if(bz.windCnt!=-1){return false}break}switch(this.m_ClipType){case aC.ClipType.ctIntersection:switch(bA){case aC.PolyFillType.pftEvenOdd:case aC.PolyFillType.pftNonZero:return(bz.windCnt2!=0);case aC.PolyFillType.pftPositive:return(bz.windCnt2>0);default:return(bz.windCnt2<0)}break;case aC.ClipType.ctUnion:switch(bA){case aC.PolyFillType.pftEvenOdd:case aC.PolyFillType.pftNonZero:return(bz.windCnt2==0);case aC.PolyFillType.pftPositive:return(bz.windCnt2<=0);default:return(bz.windCnt2>=0)}break;case aC.ClipType.ctDifference:if(bz.polyType==aC.PolyType.ptSubject){switch(bA){case aC.PolyFillType.pftEvenOdd:case aC.PolyFillType.pftNonZero:return(bz.windCnt2==0);case aC.PolyFillType.pftPositive:return(bz.windCnt2<=0);default:return(bz.windCnt2>=0)}}else{switch(bA){case aC.PolyFillType.pftEvenOdd:case aC.PolyFillType.pftNonZero:return(bz.windCnt2!=0);case aC.PolyFillType.pftPositive:return(bz.windCnt2>0);default:return(bz.windCnt2<0)}}}return true};aC.Clipper.prototype.SetWindingCount=function(by){var bz=by.prevInAEL;while(bz!=null&&bz.polyType!=by.polyType){bz=bz.prevInAEL}if(bz==null){by.windCnt=by.windDelta;by.windCnt2=0;bz=this.m_ActiveEdges}else{if(this.IsEvenOddFillType(by)){by.windCnt=1;by.windCnt2=bz.windCnt2;bz=bz.nextInAEL}else{if(bz.windCnt*bz.windDelta<0){if(aC.Math_Abs_Int32(bz.windCnt)>1){if(bz.windDelta*by.windDelta<0){by.windCnt=bz.windCnt}else{by.windCnt=bz.windCnt+by.windDelta}}else{by.windCnt=bz.windCnt+bz.windDelta+by.windDelta}}else{if(aC.Math_Abs_Int32(bz.windCnt)>1&&bz.windDelta*by.windDelta<0){by.windCnt=bz.windCnt}else{if(bz.windCnt+by.windDelta==0){by.windCnt=bz.windCnt}else{by.windCnt=bz.windCnt+by.windDelta}}}by.windCnt2=bz.windCnt2;bz=bz.nextInAEL}}if(this.IsEvenOddAltFillType(by)){while(bz!=by){by.windCnt2=(by.windCnt2==0)?1:0;bz=bz.nextInAEL}}else{while(bz!=by){by.windCnt2+=bz.windDelta;bz=bz.nextInAEL}}};aC.Clipper.prototype.AddEdgeToSEL=function(by){if(this.m_SortedEdges==null){this.m_SortedEdges=by;by.prevInSEL=null;by.nextInSEL=null}else{by.nextInSEL=this.m_SortedEdges;by.prevInSEL=null;this.m_SortedEdges.prevInSEL=by;this.m_SortedEdges=by}};aC.Clipper.prototype.CopyAELToSEL=function(){var by=this.m_ActiveEdges;this.m_SortedEdges=by;if(this.m_ActiveEdges==null){return}this.m_SortedEdges.prevInSEL=null;by=by.nextInAEL;while(by!=null){by.prevInSEL=by.prevInAEL;by.prevInSEL.nextInSEL=by;by.nextInSEL=null;by=by.nextInAEL}};aC.Clipper.prototype.SwapPositionsInAEL=function(bz,by){var bA,bB;if(bz.nextInAEL==null&&bz.prevInAEL==null){return}if(by.nextInAEL==null&&by.prevInAEL==null){return}if(bz.nextInAEL==by){bA=by.nextInAEL;if(bA!=null){bA.prevInAEL=bz}bB=bz.prevInAEL;if(bB!=null){bB.nextInAEL=by}by.prevInAEL=bB;by.nextInAEL=bz;bz.prevInAEL=by;bz.nextInAEL=bA}else{if(by.nextInAEL==bz){bA=bz.nextInAEL;if(bA!=null){bA.prevInAEL=by}bB=by.prevInAEL;if(bB!=null){bB.nextInAEL=bz}bz.prevInAEL=bB;bz.nextInAEL=by;by.prevInAEL=bz;by.nextInAEL=bA}else{bA=bz.nextInAEL;bB=bz.prevInAEL;bz.nextInAEL=by.nextInAEL;if(bz.nextInAEL!=null){bz.nextInAEL.prevInAEL=bz}bz.prevInAEL=by.prevInAEL;if(bz.prevInAEL!=null){bz.prevInAEL.nextInAEL=bz}by.nextInAEL=bA;if(by.nextInAEL!=null){by.nextInAEL.prevInAEL=by}by.prevInAEL=bB;if(by.prevInAEL!=null){by.prevInAEL.nextInAEL=by}}}if(bz.prevInAEL==null){this.m_ActiveEdges=bz}else{if(by.prevInAEL==null){this.m_ActiveEdges=by}}};aC.Clipper.prototype.SwapPositionsInSEL=function(bz,by){var bA,bB;if(bz.nextInSEL==null&&bz.prevInSEL==null){return}if(by.nextInSEL==null&&by.prevInSEL==null){return}if(bz.nextInSEL==by){bA=by.nextInSEL;if(bA!=null){bA.prevInSEL=bz}bB=bz.prevInSEL;if(bB!=null){bB.nextInSEL=by}by.prevInSEL=bB;by.nextInSEL=bz;bz.prevInSEL=by;bz.nextInSEL=bA}else{if(by.nextInSEL==bz){bA=bz.nextInSEL;if(bA!=null){bA.prevInSEL=by}bB=by.prevInSEL;if(bB!=null){bB.nextInSEL=bz}bz.prevInSEL=bB;bz.nextInSEL=by;by.prevInSEL=bz;by.nextInSEL=bA}else{bA=bz.nextInSEL;bB=bz.prevInSEL;bz.nextInSEL=by.nextInSEL;if(bz.nextInSEL!=null){bz.nextInSEL.prevInSEL=bz}bz.prevInSEL=by.prevInSEL;if(bz.prevInSEL!=null){bz.prevInSEL.nextInSEL=bz}by.nextInSEL=bA;if(by.nextInSEL!=null){by.nextInSEL.prevInSEL=by}by.prevInSEL=bB;if(by.prevInSEL!=null){by.prevInSEL.nextInSEL=by}}}if(bz.prevInSEL==null){this.m_SortedEdges=bz}else{if(by.prevInSEL==null){this.m_SortedEdges=by}}};aC.Clipper.prototype.AddLocalMaxPoly=function(bA,bz,by){this.AddOutPt(bA,by);if(bA.outIdx==bz.outIdx){bA.outIdx=-1;bz.outIdx=-1}else{if(bA.outIdx<bz.outIdx){this.AppendPolygon(bA,bz)}else{this.AppendPolygon(bz,bA)}}};aC.Clipper.prototype.AddLocalMinPoly=function(bC,bB,bA){var bz,by;if(bB.dx==aC.ClipperBase.horizontal||(bC.dx>bB.dx)){this.AddOutPt(bC,bA);bB.outIdx=bC.outIdx;bC.side=aC.EdgeSide.esLeft;bB.side=aC.EdgeSide.esRight;bz=bC;if(bz.prevInAEL==bB){by=bB.prevInAEL}else{by=bz.prevInAEL}}else{this.AddOutPt(bB,bA);bC.outIdx=bB.outIdx;bC.side=aC.EdgeSide.esRight;bB.side=aC.EdgeSide.esLeft;bz=bB;if(bz.prevInAEL==bC){by=bC.prevInAEL}else{by=bz.prevInAEL}}if(by!=null&&by.outIdx>=0&&(aC.Clipper.TopX(by,bA.y)==aC.Clipper.TopX(bz,bA.y))&&this.SlopesEqual(bz,by,this.m_UseFullRange)){this.AddJoin(bz,by,-1,-1)}};aC.Clipper.prototype.CreateOutRec=function(){var by=new aC.OutRec();by.idx=-1;by.isHole=false;by.FirstLeft=null;by.AppendLink=null;by.pts=null;by.bottomPt=null;return by};aC.Clipper.prototype.AddOutPt=function(bB,bA){var bz,bD;var bC=(bB.side==aC.EdgeSide.esLeft);if(bB.outIdx<0){bz=this.CreateOutRec();this.m_PolyOuts.push(bz);bz.idx=this.m_PolyOuts.length-1;bB.outIdx=bz.idx;bD=new aC.OutPt();bz.pts=bD;bz.bottomPt=bD;bD.pt=bA;bD.idx=bz.idx;bD.next=bD;bD.prev=bD;this.SetHoleState(bB,bz)}else{bz=this.m_PolyOuts[bB.outIdx];bD=bz.pts;var by;if(bC&&aC.ClipperBase.PointsEqual(bA,bD.pt)||(!bC&&aC.ClipperBase.PointsEqual(bA,bD.prev.pt))){return}by=new aC.OutPt();by.pt=bA;by.idx=bz.idx;if(by.pt.y==bz.bottomPt.pt.y&&by.pt.x<bz.bottomPt.pt.x){bz.bottomPt=by}by.next=bD;by.prev=bD.prev;by.prev.next=by;bD.prev=by;if(bC){bz.pts=by}}};aC.Clipper.prototype.SwapPoints=function(bA,bz){var by=bA.Value;bA.Value=bz.Value;bz.Value=by};aC.Clipper.prototype.GetOverlapSegment=function(bz,by,bB,bA,bD,bC){if(aC.Math_Abs_Int64(bz.x-by.x)>aC.Math_Abs_Int64(bz.y-by.y)){if(bz.x>by.x){(function(){bz={Value:bz};by={Value:by};var bE=this.SwapPoints(bz,by);bz=bz.Value;by=by.Value;return bE}).call(this)}if(bB.x>bA.x){(function(){bB={Value:bB};bA={Value:bA};var bE=this.SwapPoints(bB,bA);bB=bB.Value;bA=bA.Value;return bE}).call(this)}if(bz.x>bB.x){bD.Value=bz}else{bD.Value=bB}if(by.x<bA.x){bC.Value=by}else{bC.Value=bA}return bD.Value.x<bC.Value.x}else{if(bz.y<by.y){(function(){bz={Value:bz};by={Value:by};var bE=this.SwapPoints(bz,by);bz=bz.Value;by=by.Value;return bE}).call(this)}if(bB.y<bA.y){(function(){bB={Value:bB};bA={Value:bA};var bE=this.SwapPoints(bB,bA);bB=bB.Value;bA=bA.Value;return bE}).call(this)}if(bz.y<bB.y){bD.Value=bz}else{bD.Value=bB}if(by.y>bA.y){bC.Value=by}else{bC.Value=bA}return bD.Value.y>bC.Value.y}};aC.Clipper.prototype.FindSegment=function(bz,bB,bE,bD){if(bz.Value==null){return false}var by=bz.Value;var bA=new aC.IntPoint(bE.Value);var bC=new aC.IntPoint(bD.Value);do{if(this.SlopesEqual(bA,bC,bz.Value.pt,bz.Value.prev.pt,bB)&&this.SlopesEqual(bA,bC,bz.Value.pt,bB)&&this.GetOverlapSegment(bA,bC,bz.Value.pt,bz.Value.prev.pt,bE,bD)){return true}bz.Value=bz.Value.next}while(bz.Value!=by);return false};aC.Clipper.prototype.Pt3IsBetweenPt1AndPt2=function(bA,bz,by){if(aC.ClipperBase.PointsEqual(bA,by)||aC.ClipperBase.PointsEqual(bz,by)){return true}else{if(bA.x!=bz.x){return(bA.x<by.x)==(by.x<bz.x)}else{return(bA.y<by.y)==(by.y<bz.y)}}};aC.Clipper.prototype.InsertPolyPtBetween=function(bB,bA,bz){var by=new aC.OutPt();by.pt=bz;if(bA==bB.next){bB.next=by;bA.prev=by;by.next=bA;by.prev=bB}else{bA.next=by;bB.prev=by;by.next=bB;by.prev=bA}return by};aC.Clipper.prototype.SetHoleState=function(bB,bA){var bz=false;var by=bB.prevInAEL;while(by!=null){if(by.outIdx>=0){bz=!bz;if(bA.FirstLeft==null){bA.FirstLeft=this.m_PolyOuts[by.outIdx]}}by=by.prevInAEL}if(bz){bA.isHole=true}};aC.Clipper.prototype.GetDx=function(bz,by){if(bz.y==by.y){return aC.ClipperBase.horizontal}else{return(by.x-bz.x)/(by.y-bz.y)}};aC.Clipper.prototype.FirstIsBottomPt=function(bA,bz){var bC=bA.prev;while(aC.ClipperBase.PointsEqual(bC.pt,bA.pt)&&(bC!=bA)){bC=bC.prev}var bB=aC.Math_Abs_Double(this.GetDx(bA.pt,bC.pt));bC=bA.next;while(aC.ClipperBase.PointsEqual(bC.pt,bA.pt)&&(bC!=bA)){bC=bC.next}var bE=aC.Math_Abs_Double(this.GetDx(bA.pt,bC.pt));bC=bz.prev;while(aC.ClipperBase.PointsEqual(bC.pt,bz.pt)&&(bC!=bz)){bC=bC.prev}var bD=aC.Math_Abs_Double(this.GetDx(bz.pt,bC.pt));bC=bz.next;while(aC.ClipperBase.PointsEqual(bC.pt,bz.pt)&&(bC!=bz)){bC=bC.next}var by=aC.Math_Abs_Double(this.GetDx(bz.pt,bC.pt));return(bB>=bD&&bB>=by)||(bE>=bD&&bE>=by)};aC.Clipper.prototype.GetBottomPt=function(bz){var by=null;var bA=bz.next;while(bA!=bz){if(bA.pt.y>bz.pt.y){bz=bA;by=null}else{if(bA.pt.y==bz.pt.y&&bA.pt.x<=bz.pt.x){if(bA.pt.x<bz.pt.x){by=null;bz=bA}else{if(bA.next!=bz&&bA.prev!=bz){by=bA}}}}bA=bA.next}if(by!=null){while(by!=bA){if(!this.FirstIsBottomPt(bA,by)){bz=by}by=by.next;while(!aC.ClipperBase.PointsEqual(by.pt,bz.pt)){by=by.next}}}return bz};aC.Clipper.prototype.GetLowermostRec=function(bB,bz){var bA=bB.bottomPt;var by=bz.bottomPt;if(bA.pt.y>by.pt.y){return bB}else{if(bA.pt.y<by.pt.y){return bz}else{if(bA.pt.x<by.pt.x){return bB}else{if(bA.pt.x>by.pt.x){return bz}else{if(bA.next==bA){return bz}else{if(by.next==by){return bB}else{if(this.FirstIsBottomPt(bA,by)){return bB}else{return bz}}}}}}}};aC.Clipper.prototype.Param1RightOfParam2=function(bz,by){do{bz=bz.FirstLeft;if(bz==by){return true}}while(bz!=null);return false};aC.Clipper.prototype.AppendPolygon=function(bJ,bI){var by=this.m_PolyOuts[bJ.outIdx];var bL=this.m_PolyOuts[bI.outIdx];var bK;if(this.Param1RightOfParam2(by,bL)){bK=bL}else{if(this.Param1RightOfParam2(bL,by)){bK=by}else{bK=this.GetLowermostRec(by,bL)}}var bB=by.pts;var bE=bB.prev;var bA=bL.pts;var bz=bA.prev;var bH;var bD;if(bJ.side==aC.EdgeSide.esLeft){if(bI.side==aC.EdgeSide.esLeft){this.ReversePolyPtLinks(bA);bA.next=bB;bB.prev=bA;bE.next=bz;bz.prev=bE;by.pts=bz}else{bz.next=bB;bB.prev=bz;bA.prev=bE;bE.next=bA;by.pts=bA}bH=aC.EdgeSide.esLeft}else{if(bI.side==aC.EdgeSide.esRight){this.ReversePolyPtLinks(bA);bE.next=bz;bz.prev=bE;bA.next=bB;bB.prev=bA}else{bE.next=bA;bA.prev=bE;bB.prev=bz;bz.next=bB}bH=aC.EdgeSide.esRight}if(bK==bL){by.bottomPt=bL.bottomPt;by.bottomPt.idx=by.idx;if(bL.FirstLeft!=by){by.FirstLeft=bL.FirstLeft}by.isHole=bL.isHole}bL.pts=null;bL.bottomPt=null;bL.AppendLink=by;var bC=bJ.outIdx;var bF=bI.outIdx;bJ.outIdx=-1;bI.outIdx=-1;var bG=this.m_ActiveEdges;while(bG!=null){if(bG.outIdx==bF){bG.outIdx=bC;bG.side=bH;break}bG=bG.nextInAEL}for(bD=0;bD<this.m_Joins.length;++bD){if(this.m_Joins[bD].poly1Idx==bF){this.m_Joins[bD].poly1Idx=bC}if(this.m_Joins[bD].poly2Idx==bF){this.m_Joins[bD].poly2Idx=bC}}for(bD=0;bD<this.m_HorizJoins.length;++bD){if(this.m_HorizJoins[bD].savedIdx==bF){this.m_HorizJoins[bD].savedIdx=bC}}};aC.Clipper.prototype.ReversePolyPtLinks=function(bA){if(bA==null){return}var bz;var by;bz=bA;do{by=bz.next;bz.next=bz.prev;bz.prev=by;bz=by}while(bz!=bA)};aC.Clipper.SwapSides=function(bz,by){var bA=bz.side;bz.side=by.side;by.side=bA};aC.Clipper.SwapPolyIndexes=function(bz,by){var bA=bz.outIdx;bz.outIdx=by.outIdx;by.outIdx=bA};aC.Clipper.prototype.DoEdge1=function(bz,by,bA){this.AddOutPt(bz,bA);aC.Clipper.SwapSides(bz,by);aC.Clipper.SwapPolyIndexes(bz,by)};aC.Clipper.prototype.DoEdge2=function(bz,by,bA){this.AddOutPt(by,bA);aC.Clipper.SwapSides(bz,by);aC.Clipper.SwapPolyIndexes(bz,by)};aC.Clipper.prototype.DoBothEdges=function(bz,by,bA){this.AddOutPt(bz,bA);this.AddOutPt(by,bA);aC.Clipper.SwapSides(bz,by);aC.Clipper.SwapPolyIndexes(bz,by)};aC.Clipper.prototype.IntersectEdges=function(bK,bG,bN,bF){var bH=(aC.Protects.ipLeft&bF)==0&&bK.nextInLML==null&&bK.xtop==bN.x&&bK.ytop==bN.y;var bO=(aC.Protects.ipRight&bF)==0&&bG.nextInLML==null&&bG.xtop==bN.x&&bG.ytop==bN.y;var bC=(bK.outIdx>=0);var bA=(bG.outIdx>=0);if(bK.polyType==bG.polyType){if(this.IsEvenOddFillType(bK)){var bz=bK.windCnt;bK.windCnt=bG.windCnt;bG.windCnt=bz}else{if(bK.windCnt+bG.windDelta==0){bK.windCnt=-bK.windCnt}else{bK.windCnt+=bG.windDelta}if(bG.windCnt-bK.windDelta==0){bG.windCnt=-bG.windCnt}else{bG.windCnt-=bK.windDelta}}}else{if(!this.IsEvenOddFillType(bG)){bK.windCnt2+=bG.windDelta}else{bK.windCnt2=(bK.windCnt2==0)?1:0}if(!this.IsEvenOddFillType(bK)){bG.windCnt2-=bK.windDelta}else{bG.windCnt2=(bG.windCnt2==0)?1:0}}var bM,bB,by,bE;if(bK.polyType==aC.PolyType.ptSubject){bM=this.m_SubjFillType;by=this.m_ClipFillType}else{bM=this.m_ClipFillType;by=this.m_SubjFillType}if(bG.polyType==aC.PolyType.ptSubject){bB=this.m_SubjFillType;bE=this.m_ClipFillType}else{bB=this.m_ClipFillType;bE=this.m_SubjFillType}var bJ,bL;switch(bM){case aC.PolyFillType.pftPositive:bJ=bK.windCnt;break;case aC.PolyFillType.pftNegative:bJ=-bK.windCnt;break;default:bJ=aC.Math_Abs_Int32(bK.windCnt);break}switch(bB){case aC.PolyFillType.pftPositive:bL=bG.windCnt;break;case aC.PolyFillType.pftNegative:bL=-bG.windCnt;break;default:bL=aC.Math_Abs_Int32(bG.windCnt);break}if(bC&&bA){if(bH||bO||(bJ!=0&&bJ!=1)||(bL!=0&&bL!=1)||(bK.polyType!=bG.polyType&&this.m_ClipType!=aC.ClipType.ctXor)){this.AddLocalMaxPoly(bK,bG,bN)}else{this.DoBothEdges(bK,bG,bN)}}else{if(bC){if((bL==0||bL==1)&&(this.m_ClipType!=aC.ClipType.ctIntersection||bG.polyType==aC.PolyType.ptSubject||(bG.windCnt2!=0))){this.DoEdge1(bK,bG,bN)}}else{if(bA){if((bJ==0||bJ==1)&&(this.m_ClipType!=aC.ClipType.ctIntersection||bK.polyType==aC.PolyType.ptSubject||(bK.windCnt2!=0))){this.DoEdge2(bK,bG,bN)}}else{if((bJ==0||bJ==1)&&(bL==0||bL==1)&&!bH&&!bO){var bI,bD;switch(by){case aC.PolyFillType.pftPositive:bI=bK.windCnt2;break;case aC.PolyFillType.pftNegative:bI=-bK.windCnt2;break;default:bI=aC.Math_Abs_Int32(bK.windCnt2);break}switch(bE){case aC.PolyFillType.pftPositive:bD=bG.windCnt2;break;case aC.PolyFillType.pftNegative:bD=-bG.windCnt2;break;default:bD=aC.Math_Abs_Int32(bG.windCnt2);break}if(bK.polyType!=bG.polyType){this.AddLocalMinPoly(bK,bG,bN)}else{if(bJ==1&&bL==1){switch(this.m_ClipType){case aC.ClipType.ctIntersection:if(bI>0&&bD>0){this.AddLocalMinPoly(bK,bG,bN)}break;case aC.ClipType.ctUnion:if(bI<=0&&bD<=0){this.AddLocalMinPoly(bK,bG,bN)}break;case aC.ClipType.ctDifference:if(((bK.polyType==aC.PolyType.ptClip)&&(bI>0)&&(bD>0))||((bK.polyType==aC.PolyType.ptSubject)&&(bI<=0)&&(bD<=0))){this.AddLocalMinPoly(bK,bG,bN)}break;case aC.ClipType.ctXor:this.AddLocalMinPoly(bK,bG,bN);break}}else{aC.Clipper.SwapSides(bK,bG)}}}}}}if((bH!=bO)&&((bH&&(bK.outIdx>=0))||(bO&&(bG.outIdx>=0)))){aC.Clipper.SwapSides(bK,bG);aC.Clipper.SwapPolyIndexes(bK,bG)}if(bH){this.DeleteFromAEL(bK)}if(bO){this.DeleteFromAEL(bG)}};aC.Clipper.prototype.DeleteFromAEL=function(by){var bA=by.prevInAEL;var bz=by.nextInAEL;if(bA==null&&bz==null&&(by!=this.m_ActiveEdges)){return}if(bA!=null){bA.nextInAEL=bz}else{this.m_ActiveEdges=bz}if(bz!=null){bz.prevInAEL=bA}by.nextInAEL=null;by.prevInAEL=null};aC.Clipper.prototype.DeleteFromSEL=function(bA){var bz=bA.prevInSEL;var by=bA.nextInSEL;if(bz==null&&by==null&&(bA!=this.m_SortedEdges)){return}if(bz!=null){bz.nextInSEL=by}else{this.m_SortedEdges=by}if(by!=null){by.prevInSEL=bz}bA.nextInSEL=null;bA.prevInSEL=null};aC.Clipper.prototype.UpdateEdgeIntoAEL=function(by){if(by.Value.nextInLML==null){aC.Error("UpdateEdgeIntoAEL: invalid call")}var bA=by.Value.prevInAEL;var bz=by.Value.nextInAEL;by.Value.nextInLML.outIdx=by.Value.outIdx;if(bA!=null){bA.nextInAEL=by.Value.nextInLML}else{this.m_ActiveEdges=by.Value.nextInLML}if(bz!=null){bz.prevInAEL=by.Value.nextInLML}by.Value.nextInLML.side=by.Value.side;by.Value.nextInLML.windDelta=by.Value.windDelta;by.Value.nextInLML.windCnt=by.Value.windCnt;by.Value.nextInLML.windCnt2=by.Value.windCnt2;by.Value=by.Value.nextInLML;by.Value.prevInAEL=bA;by.Value.nextInAEL=bz;if(by.Value.dx!=aC.ClipperBase.horizontal){this.InsertScanbeam(by.Value.ytop)}};aC.Clipper.prototype.ProcessHorizontals=function(){var by=this.m_SortedEdges;while(by!=null){this.DeleteFromSEL(by);this.ProcessHorizontal(by);by=this.m_SortedEdges}};aC.Clipper.prototype.ProcessHorizontal=function(bA){var bE;var bD,by;if(bA.xcurr<bA.xtop){bD=bA.xcurr;by=bA.xtop;bE=aC.Direction.dLeftToRight}else{bD=bA.xtop;by=bA.xcurr;bE=aC.Direction.dRightToLeft}var bC;if(bA.nextInLML!=null){bC=null}else{bC=this.GetMaximaPair(bA)}var bB=this.GetNextInAEL(bA,bE);while(bB!=null){var bz=this.GetNextInAEL(bB,bE);if(bC!=null||((bE==aC.Direction.dLeftToRight)&&(bB.xcurr<=by))||((bE==aC.Direction.dRightToLeft)&&(bB.xcurr>=bD))){if(bB.xcurr==bA.xtop&&bC==null){if(this.SlopesEqual(bB,bA.nextInLML,this.m_UseFullRange)){if(bA.outIdx>=0&&bB.outIdx>=0){this.AddJoin(bA.nextInLML,bB,bA.outIdx,-1)}break}else{if(bB.dx<bA.nextInLML.dx){break}}}if(bB==bC){if(bE==aC.Direction.dLeftToRight){this.IntersectEdges(bA,bB,new aC.IntPoint(bB.xcurr,bA.ycurr),0)}else{this.IntersectEdges(bB,bA,new aC.IntPoint(bB.xcurr,bA.ycurr),0)}if(bC.outIdx>=0){aC.Error("ProcessHorizontal error")}return}else{if(bB.dx==aC.ClipperBase.horizontal&&!this.IsMinima(bB)&&!(bB.xcurr>bB.xtop)){if(bE==aC.Direction.dLeftToRight){this.IntersectEdges(bA,bB,new aC.IntPoint(bB.xcurr,bA.ycurr),(this.IsTopHorz(bA,bB.xcurr))?aC.Protects.ipLeft:aC.Protects.ipBoth)}else{this.IntersectEdges(bB,bA,new aC.IntPoint(bB.xcurr,bA.ycurr),(this.IsTopHorz(bA,bB.xcurr))?aC.Protects.ipRight:aC.Protects.ipBoth)}}else{if(bE==aC.Direction.dLeftToRight){this.IntersectEdges(bA,bB,new aC.IntPoint(bB.xcurr,bA.ycurr),(this.IsTopHorz(bA,bB.xcurr))?aC.Protects.ipLeft:aC.Protects.ipBoth)}else{this.IntersectEdges(bB,bA,new aC.IntPoint(bB.xcurr,bA.ycurr),(this.IsTopHorz(bA,bB.xcurr))?aC.Protects.ipRight:aC.Protects.ipBoth)}}}this.SwapPositionsInAEL(bA,bB)}else{if((bE==aC.Direction.dLeftToRight&&bB.xcurr>by&&bA.nextInSEL==null)||(bE==aC.Direction.dRightToLeft&&bB.xcurr<bD&&bA.nextInSEL==null)){break}}bB=bz}if(bA.nextInLML!=null){if(bA.outIdx>=0){this.AddOutPt(bA,new aC.IntPoint(bA.xtop,bA.ytop))}(function(){bA={Value:bA};var bF=this.UpdateEdgeIntoAEL(bA);bA=bA.Value;return bF}).call(this)}else{if(bA.outIdx>=0){this.IntersectEdges(bA,bC,new aC.IntPoint(bA.xtop,bA.ycurr),aC.Protects.ipBoth)}this.DeleteFromAEL(bC);this.DeleteFromAEL(bA)}};aC.Clipper.prototype.IsTopHorz=function(bz,by){var bA=this.m_SortedEdges;while(bA!=null){if((by>=Math.min(bA.xcurr,bA.xtop))&&(by<=Math.max(bA.xcurr,bA.xtop))){return false}bA=bA.nextInSEL}return true};aC.Clipper.prototype.GetNextInAEL=function(bz,by){return by==aC.Direction.dLeftToRight?bz.nextInAEL:bz.prevInAEL};aC.Clipper.prototype.IsMinima=function(by){return by!=null&&(by.prev.nextInLML!=by)&&(by.next.nextInLML!=by)};aC.Clipper.prototype.IsMaxima=function(by,bz){return(by!=null&&by.ytop==bz&&by.nextInLML==null)};aC.Clipper.prototype.IsIntermediate=function(by,bz){return(by.ytop==bz&&by.nextInLML!=null)};aC.Clipper.prototype.GetMaximaPair=function(by){if(!this.IsMaxima(by.next,by.ytop)||(by.next.xtop!=by.xtop)){return by.prev}else{return by.next}};aC.Clipper.prototype.ProcessIntersections=function(bA,by){if(this.m_ActiveEdges==null){return true}try{this.BuildIntersectList(bA,by);if(this.m_IntersectNodes==null){return true}if(this.FixupIntersections()){this.ProcessIntersectList()}else{return false}}catch(bz){this.m_SortedEdges=null;this.DisposeIntersectNodes();aC.Error("ProcessIntersections error")}return true};aC.Clipper.prototype.BuildIntersectList=function(bD,bz){if(this.m_ActiveEdges==null){return}var bC=this.m_ActiveEdges;bC.tmpX=aC.Clipper.TopX(bC,bz);this.m_SortedEdges=bC;this.m_SortedEdges.prevInSEL=null;bC=bC.nextInAEL;while(bC!=null){bC.prevInSEL=bC.prevInAEL;bC.prevInSEL.nextInSEL=bC;bC.nextInSEL=null;bC.tmpX=aC.Clipper.TopX(bC,bz);bC=bC.nextInAEL}var by=true;while(by&&this.m_SortedEdges!=null){by=false;bC=this.m_SortedEdges;while(bC.nextInSEL!=null){var bA=bC.nextInSEL;var bB=new aC.IntPoint();if(bC.tmpX>bA.tmpX&&(function(){bB={Value:bB};var bE=this.IntersectPoint(bC,bA,bB);bB=bB.Value;return bE}).call(this)){if(bB.y>bD){bB.y=bD;bB.x=aC.Clipper.TopX(bC,bB.y)}this.AddIntersectNode(bC,bA,bB);this.SwapPositionsInSEL(bC,bA);by=true}else{bC=bA}}if(bC.prevInSEL!=null){bC.prevInSEL.nextInSEL=null}else{break}}this.m_SortedEdges=null};aC.Clipper.prototype.FixupIntersections=function(){if(this.m_IntersectNodes.next==null){return true}this.CopyAELToSEL();var bB=this.m_IntersectNodes;var bA=this.m_IntersectNodes.next;while(bA!=null){var bz=bB.edge1;var by;if(bz.prevInSEL==bB.edge2){by=bz.prevInSEL}else{if(bz.nextInSEL==bB.edge2){by=bz.nextInSEL}else{while(bA!=null){if(bA.edge1.nextInSEL==bA.edge2||bA.edge1.prevInSEL==bA.edge2){break}else{bA=bA.next}}if(bA==null){return false}this.SwapIntersectNodes(bB,bA);bz=bB.edge1;by=bB.edge2}}this.SwapPositionsInSEL(bz,by);bB=bB.next;bA=bB.next}this.m_SortedEdges=null;return(bB.edge1.prevInSEL==bB.edge2||bB.edge1.nextInSEL==bB.edge2)};aC.Clipper.prototype.ProcessIntersectList=function(){while(this.m_IntersectNodes!=null){var by=this.m_IntersectNodes.next;this.IntersectEdges(this.m_IntersectNodes.edge1,this.m_IntersectNodes.edge2,this.m_IntersectNodes.pt,aC.Protects.ipBoth);this.SwapPositionsInAEL(this.m_IntersectNodes.edge1,this.m_IntersectNodes.edge2);this.m_IntersectNodes=null;this.m_IntersectNodes=by}};var au=function(by){return by<0?Math.ceil(by-0.5):Math.round(by)};var at=function(by){return by<0?Math.ceil(by-0.5):Math.floor(by+0.5)};var ar=function(by){return by<0?-Math.round(Math.abs(by)):Math.round(by)};var ap=function(by){if(by<0){by-=0.5;return by<-2147483648?Math.ceil(by):by|0}else{by+=0.5;return by>2147483647?Math.floor(by):by|0}};if(ba.msie){aC.Clipper.Round=au}else{if(ba.chromium){aC.Clipper.Round=ar}else{if(ba.safari){aC.Clipper.Round=ap}else{aC.Clipper.Round=at}}}aC.Clipper.TopX=function(bz,by){if(by==bz.ytop){return bz.xtop}return bz.xbot+aC.Clipper.Round(bz.dx*(by-bz.ybot))};aC.Clipper.prototype.AddIntersectNode=function(bC,bB,bA){var by=new aC.IntersectNode();by.edge1=bC;by.edge2=bB;by.pt=bA;by.next=null;if(this.m_IntersectNodes==null){this.m_IntersectNodes=by}else{if(this.ProcessParam1BeforeParam2(by,this.m_IntersectNodes)){by.next=this.m_IntersectNodes;this.m_IntersectNodes=by}else{var bz=this.m_IntersectNodes;while(bz.next!=null&&this.ProcessParam1BeforeParam2(bz.next,by)){bz=bz.next}by.next=bz.next;bz.next=by}}};aC.Clipper.prototype.ProcessParam1BeforeParam2=function(bA,bz){var by;if(bA.pt.y==bz.pt.y){if(bA.edge1==bz.edge1||bA.edge2==bz.edge1){by=bz.pt.x>bA.pt.x;return bz.edge1.dx>0?!by:by}else{if(bA.edge1==bz.edge2||bA.edge2==bz.edge2){by=bz.pt.x>bA.pt.x;return bz.edge2.dx>0?!by:by}else{return bz.pt.x>bA.pt.x}}}else{return bA.pt.y>bz.pt.y}};aC.Clipper.prototype.SwapIntersectNodes=function(bC,bB){var bA=bC.edge1;var bz=bC.edge2;var by=bC.pt;bC.edge1=bB.edge1;bC.edge2=bB.edge2;bC.pt=bB.pt;bB.edge1=bA;bB.edge2=bz;bB.pt=by};aC.Clipper.prototype.IntersectPoint=function(bA,by,bD){var bB,bz;if(this.SlopesEqual(bA,by,this.m_UseFullRange)){return false}else{if(bA.dx==0){bD.Value.x=bA.xbot;if(by.dx==aC.ClipperBase.horizontal){bD.Value.y=by.ybot}else{bz=by.ybot-(by.xbot/by.dx);bD.Value.y=aC.Clipper.Round(bD.Value.x/by.dx+bz)}}else{if(by.dx==0){bD.Value.x=by.xbot;if(bA.dx==aC.ClipperBase.horizontal){bD.Value.y=bA.ybot}else{bB=bA.ybot-(bA.xbot/bA.dx);bD.Value.y=aC.Clipper.Round(bD.Value.x/bA.dx+bB)}}else{bB=bA.xbot-bA.ybot*bA.dx;bz=by.xbot-by.ybot*by.dx;var bC=(bz-bB)/(bA.dx-by.dx);bD.Value.y=aC.Clipper.Round(bC);if(aC.Math_Abs_Double(bA.dx)<aC.Math_Abs_Double(by.dx)){bD.Value.x=aC.Clipper.Round(bA.dx*bC+bB)}else{bD.Value.x=aC.Clipper.Round(by.dx*bC+bz)}}}}if(bD.Value.y<bA.ytop||bD.Value.y<by.ytop){if(bA.ytop>by.ytop){bD.Value.x=bA.xtop;bD.Value.y=bA.ytop;return aC.Clipper.TopX(by,bA.ytop)<bA.xtop}else{bD.Value.x=by.xtop;bD.Value.y=by.ytop;return aC.Clipper.TopX(bA,by.ytop)>by.xtop}}else{return true}};aC.Clipper.prototype.DisposeIntersectNodes=function(){while(this.m_IntersectNodes!=null){var by=this.m_IntersectNodes.next;this.m_IntersectNodes=null;this.m_IntersectNodes=by}};aC.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(bz){var bF=this.m_ActiveEdges;var bC;while(bF!=null){if(this.IsMaxima(bF,bz)&&this.GetMaximaPair(bF).dx!=aC.ClipperBase.horizontal){bC=bF.prevInAEL;this.DoMaxima(bF,bz);if(bC==null){bF=this.m_ActiveEdges}else{bF=bC.nextInAEL}}else{if(this.IsIntermediate(bF,bz)&&bF.nextInLML.dx==aC.ClipperBase.horizontal){if(bF.outIdx>=0){this.AddOutPt(bF,new aC.IntPoint(bF.xtop,bF.ytop));for(var bB=0;bB<this.m_HorizJoins.length;++bB){var bE=new aC.IntPoint(),bD=new aC.IntPoint();var by=this.m_HorizJoins[bB];if((function(){bE={Value:bE};bD={Value:bD};var bG=this.GetOverlapSegment(new aC.IntPoint(by.edge.xbot,by.edge.ybot),new aC.IntPoint(by.edge.xtop,by.edge.ytop),new aC.IntPoint(bF.nextInLML.xbot,bF.nextInLML.ybot),new aC.IntPoint(bF.nextInLML.xtop,bF.nextInLML.ytop),bE,bD);bE=bE.Value;bD=bD.Value;return bG}).call(this)){this.AddJoin(by.edge,bF.nextInLML,by.savedIdx,bF.outIdx)}}this.AddHorzJoin(bF.nextInLML,bF.outIdx)}(function(){bF={Value:bF};var bG=this.UpdateEdgeIntoAEL(bF);bF=bF.Value;return bG}).call(this);this.AddEdgeToSEL(bF)}else{bF.xcurr=aC.Clipper.TopX(bF,bz);bF.ycurr=bz}bF=bF.nextInAEL}}this.ProcessHorizontals();bF=this.m_ActiveEdges;while(bF!=null){if(this.IsIntermediate(bF,bz)){if(bF.outIdx>=0){this.AddOutPt(bF,new aC.IntPoint(bF.xtop,bF.ytop))}(function(){bF={Value:bF};var bG=this.UpdateEdgeIntoAEL(bF);bF=bF.Value;return bG}).call(this);bC=bF.prevInAEL;var bA=bF.nextInAEL;if(bC!=null&&bC.xcurr==bF.xbot&&bC.ycurr==bF.ybot&&bF.outIdx>=0&&bC.outIdx>=0&&bC.ycurr>bC.ytop&&this.SlopesEqual(bF,bC,this.m_UseFullRange)){this.AddOutPt(bC,new aC.IntPoint(bF.xbot,bF.ybot));this.AddJoin(bF,bC,-1,-1)}else{if(bA!=null&&bA.xcurr==bF.xbot&&bA.ycurr==bF.ybot&&bF.outIdx>=0&&bA.outIdx>=0&&bA.ycurr>bA.ytop&&this.SlopesEqual(bF,bA,this.m_UseFullRange)){this.AddOutPt(bA,new aC.IntPoint(bF.xbot,bF.ybot));this.AddJoin(bF,bA,-1,-1)}}}bF=bF.nextInAEL}};aC.Clipper.prototype.DoMaxima=function(bB,by){var bA=this.GetMaximaPair(bB);var bC=bB.xtop;var bz=bB.nextInAEL;while(bz!=bA){if(bz==null){aC.Error("DoMaxima error")}this.IntersectEdges(bB,bz,new aC.IntPoint(bC,by),aC.Protects.ipBoth);bz=bz.nextInAEL}if(bB.outIdx<0&&bA.outIdx<0){this.DeleteFromAEL(bB);this.DeleteFromAEL(bA)}else{if(bB.outIdx>=0&&bA.outIdx>=0){this.IntersectEdges(bB,bA,new aC.IntPoint(bC,by),aC.Protects.ipNone)}else{aC.Error("DoMaxima error")}}};aC.Clipper.ReversePolygons=function(bz){var by=bz.length,bB;for(var bA=0;bA<by;bA++){if(bz[bA] instanceof Array){bz[bA].reverse()}}};aC.Clipper.Orientation=function(by){return this.Area(by)>=0};aC.Clipper.prototype.PointCount=function(bA){if(bA==null){return 0}var by=0;var bz=bA;do{by++;bz=bz.next}while(bz!=bA);return by};aC.Clipper.prototype.BuildResult=function(bz){aC.Clear(bz);var bE,by=this.m_PolyOuts.length;for(var bC=0;bC<by;bC++){bE=this.m_PolyOuts[bC];if(bE.pts==null){continue}var bD=bE.pts;var bB=this.PointCount(bD);if(bB<3){continue}var bF=new aC.Polygon(bB);for(var bA=0;bA<bB;bA++){bF.push(new aC.IntPoint(bD.pt.x,bD.pt.y));bD=bD.prev}bz.push(bF)}};aC.Clipper.prototype.BuildResultEx=function(by){aC.Clear(by);var bC=0;while(bC<this.m_PolyOuts.length){var bE=this.m_PolyOuts[bC++];if(bE.pts==null){break}var bD=bE.pts;var bB=this.PointCount(bD);if(bB<3){continue}var bz=new aC.ExPolygon();bz.outer=new aC.Polygon();bz.holes=new aC.Polygons();for(var bA=0;bA<bB;bA++){bz.outer.push(new aC.IntPoint(bD.pt.x,bD.pt.y));bD=bD.prev}while(bC<this.m_PolyOuts.length){bE=this.m_PolyOuts[bC];if(bE.pts==null||!bE.isHole){break}var bF=new aC.Polygon();bD=bE.pts;do{bF.push(new aC.IntPoint(bD.pt.x,bD.pt.y));bD=bD.prev}while(bD!=bE.pts);bz.holes.push(bF);bC++}by.push(bz)}};aC.Clipper.prototype.FixupOutPolygon=function(bB){var bz=null;bB.pts=bB.bottomPt;var by=bB.bottomPt;for(;;){if(by.prev==by||by.prev==by.next){this.DisposeOutPts(by);bB.pts=null;bB.bottomPt=null;return}if(aC.ClipperBase.PointsEqual(by.pt,by.next.pt)||this.SlopesEqual(by.prev.pt,by.pt,by.next.pt,this.m_UseFullRange)){bz=null;var bA=by;if(by==bB.bottomPt){bB.bottomPt=null}by.prev.next=by.next;by.next.prev=by.prev;by=by.prev;bA=null}else{if(by==bz){break}else{if(bz==null){bz=by}by=by.next}}}if(bB.bottomPt==null){bB.bottomPt=this.GetBottomPt(by);bB.bottomPt.idx=bB.idx;bB.pts=bB.bottomPt}};aC.Clipper.prototype.JoinPoints=function(bA,bK,bI){bK.Value=null;bI.Value=null;var by=this.m_PolyOuts[bA.poly1Idx];var bL=this.m_PolyOuts[bA.poly2Idx];if(by==null||bL==null){return false}var bJ=by.pts;var bB=bL.pts;var bH=bA.pt2a,bG=bA.pt2b;var bE=bA.pt1a,bC=bA.pt1b;if(!(function(){bJ={Value:bJ};bH={Value:bH};bG={Value:bG};var bM=this.FindSegment(bJ,this.m_UseFullRange,bH,bG);bJ=bJ.Value;bH=bH.Value;bG=bG.Value;return bM}).call(this)){return false}if(by==bL){bB=bJ.next;if(!(function(){bB={Value:bB};bE={Value:bE};bC={Value:bC};var bM=this.FindSegment(bB,this.m_UseFullRange,bE,bC);bB=bB.Value;bE=bE.Value;bC=bC.Value;return bM}).call(this)||(bB==bJ)){return false}}else{if(!(function(){bB={Value:bB};bE={Value:bE};bC={Value:bC};var bM=this.FindSegment(bB,this.m_UseFullRange,bE,bC);bB=bB.Value;bE=bE.Value;bC=bC.Value;return bM}).call(this)){return false}}if(!(function(){bH={Value:bH};bG={Value:bG};var bM=this.GetOverlapSegment(bH.Value,bG.Value,bE,bC,bH,bG);bH=bH.Value;bG=bG.Value;return bM}).call(this)){return false}var bF,bD,bz=bJ.prev;if(aC.ClipperBase.PointsEqual(bJ.pt,bH)){bK.Value=bJ}else{if(aC.ClipperBase.PointsEqual(bz.pt,bH)){bK.Value=bz}else{bK.Value=this.InsertPolyPtBetween(bJ,bz,bH)}}if(aC.ClipperBase.PointsEqual(bJ.pt,bG)){bI.Value=bJ}else{if(aC.ClipperBase.PointsEqual(bz.pt,bG)){bI.Value=bz}else{if((bK.Value==bJ)||(bK.Value==bz)){bI.Value=this.InsertPolyPtBetween(bJ,bz,bG)}else{if(this.Pt3IsBetweenPt1AndPt2(bJ.pt,bK.Value.pt,bG)){bI.Value=this.InsertPolyPtBetween(bJ,bK.Value,bG)}else{bI.Value=this.InsertPolyPtBetween(bK.Value,bz,bG)}}}}bz=bB.prev;if(aC.ClipperBase.PointsEqual(bB.pt,bH)){bF=bB}else{if(aC.ClipperBase.PointsEqual(bz.pt,bH)){bF=bz}else{bF=this.InsertPolyPtBetween(bB,bz,bH)}}if(aC.ClipperBase.PointsEqual(bB.pt,bG)){bD=bB}else{if(aC.ClipperBase.PointsEqual(bz.pt,bG)){bD=bz}else{if((bF==bB)||(bF==bz)){bD=this.InsertPolyPtBetween(bB,bz,bG)}else{if(this.Pt3IsBetweenPt1AndPt2(bB.pt,bF.pt,bG)){bD=this.InsertPolyPtBetween(bB,bF,bG)}else{bD=this.InsertPolyPtBetween(bF,bz,bG)}}}}if(bK.Value.next==bI.Value&&bF.prev==bD){bK.Value.next=bF;bF.prev=bK.Value;bI.Value.prev=bD;bD.next=bI.Value;return true}else{if(bK.Value.prev==bI.Value&&bF.next==bD){bK.Value.prev=bF;bF.next=bK.Value;bI.Value.next=bD;bD.prev=bI.Value;return true}else{return false}}};aC.Clipper.prototype.FixupJoinRecs=function(bz,bC,bA){for(var by=bA;by<this.m_Joins.length;by++){var bB=this.m_Joins[by];if(bB.poly1Idx==bz.poly1Idx&&this.PointIsVertex(bB.pt1a,bC)){bB.poly1Idx=bz.poly2Idx}if(bB.poly2Idx==bz.poly1Idx&&this.PointIsVertex(bB.pt2a,bC)){bB.poly2Idx=bz.poly2Idx}}};aC.Clipper.prototype.JoinCommonEdges=function(){var bz,bA;for(var bD=0;bD<this.m_Joins.length;bD++){var bB=this.m_Joins[bD];var bG,bF;if(!(function(){bG={Value:bG};bF={Value:bF};var bJ=this.JoinPoints(bB,bG,bF);bG=bG.Value;bF=bF.Value;return bJ}).call(this)){continue}var by=this.m_PolyOuts[bB.poly1Idx];var bI=this.m_PolyOuts[bB.poly2Idx];if(by==bI){by.pts=this.GetBottomPt(bG);by.bottomPt=by.pts;by.bottomPt.idx=by.idx;bI=this.CreateOutRec();this.m_PolyOuts.push(bI);bI.idx=this.m_PolyOuts.length-1;bB.poly2Idx=bI.idx;bI.pts=this.GetBottomPt(bF);bI.bottomPt=bI.pts;bI.bottomPt.idx=bI.idx;if(this.PointInPolygon(bI.pts.pt,by.pts,this.m_UseFullRange)){bI.isHole=!by.isHole;bI.FirstLeft=by;this.FixupJoinRecs(bB,bF,bD+1);this.FixupOutPolygon(by);this.FixupOutPolygon(bI);if((bI.isHole^this.m_ReverseOutput)==(this.Area(bI,this.m_UseFullRange)>0)){this.ReversePolyPtLinks(bI.pts)}}else{if(this.PointInPolygon(by.pts.pt,bI.pts,this.m_UseFullRange)){bI.isHole=by.isHole;by.isHole=!bI.isHole;bI.FirstLeft=by.FirstLeft;by.FirstLeft=bI;this.FixupJoinRecs(bB,bF,bD+1);this.FixupOutPolygon(by);this.FixupOutPolygon(bI);if((by.isHole^this.m_ReverseOutput)==(this.Area(by,this.m_UseFullRange)>0)){this.ReversePolyPtLinks(by.pts)}if(this.m_UsingExPolygons&&by.isHole){for(bz=0;bz<this.m_PolyOuts.length;++bz){bA=this.m_PolyOuts[bz];if(bA.isHole&&bA.bottomPt!=null&&bA.FirstLeft==by){bA.FirstLeft=bI}}}}else{bI.isHole=by.isHole;bI.FirstLeft=by.FirstLeft;this.FixupJoinRecs(bB,bF,bD+1);this.FixupOutPolygon(by);this.FixupOutPolygon(bI);if(this.m_UsingExPolygons&&bI.pts!=null){for(bz=0;bz<this.m_PolyOuts.length;++bz){bA=this.m_PolyOuts[bz];if(bA.isHole&&bA.bottomPt!=null&&bA.FirstLeft==by&&this.PointInPolygon(bA.bottomPt.pt,bI.pts,this.m_UseFullRange)){bA.FirstLeft=bI}}}}}}else{if(this.m_UsingExPolygons){for(bz=0;bz<this.m_PolyOuts.length;++bz){if(this.m_PolyOuts[bz].isHole&&this.m_PolyOuts[bz].bottomPt!=null&&this.m_PolyOuts[bz].FirstLeft==bI){this.m_PolyOuts[bz].FirstLeft=by}}}this.FixupOutPolygon(by);if(by.pts!=null){by.isHole=this.Area(by,this.m_UseFullRange)<0;if(by.isHole&&by.FirstLeft==null){by.FirstLeft=bI.FirstLeft}}var bC=by.idx;var bE=bI.idx;bI.pts=null;bI.bottomPt=null;bI.AppendLink=by;for(bz=bD+1;bz<this.m_Joins.length;bz++){var bH=this.m_Joins[bz];if(bH.poly1Idx==bE){bH.poly1Idx=bC}if(bH.poly2Idx==bE){bH.poly2Idx=bC}}}}};aC.Clipper.FullRangeNeeded=function(bA){var by=false;for(var bz=0;bz<bA.length;bz++){if(aC.Math_Abs_Int64(bA[bz].x)>aC.ClipperBase.hiRange||aC.Math_Abs_Int64(bA[bz].y)>aC.ClipperBase.hiRange){aC.Error("Coordinate exceeds range bounds in FullRangeNeeded().")}else{if(aC.Math_Abs_Int64(bA[bz].x)>aC.ClipperBase.loRange||aC.Math_Abs_Int64(bA[bz].y)>aC.ClipperBase.loRange){by=true}}}return by};aC.Clipper.prototype.Area=aC.Clipper.Area=function(){var bF=arguments;var bB,bE;if(bF.length==1){var by=bF[0];var bD=by.length-1;if(bD<2){return 0}if(aC.Clipper.FullRangeNeeded(by)){bE=new aX(by[bD].x+by[0].x).multiply(new aX(by[0].y-by[bD].y));for(bB=1;bB<=bD;++bB){bE=bE.add(new aX(by[bB-1].x+by[bB].x).multiply(new aX(by[bB].y-by[bB-1].y)))}return parseFloat(bE.toString())/2}else{var bz=(by[bD].x+by[0].x)*(by[0].y-by[bD].y);for(bB=1;bB<=bD;++bB){bz+=(by[bB-1].x+by[bB].x)*(by[bB].y-by[bB-1].y)}return bz/2}}else{if(bF.length==2){var bG=bF[0];var bA=bF[1];var bC=bG.pts;if(bC==null){return 0}if(bA){bE=new aX(aX.ZERO);do{bE=bE.add(new aX(bC.pt.x+bC.prev.pt.x).multiply(new aX(bC.prev.pt.y-bC.pt.y)));bC=bC.next}while(bC!=bG.pts);return parseFloat(bE.toString())/2}else{bE=0;do{bE=bE+(bC.pt.x+bC.prev.pt.x)*(bC.prev.pt.y-bC.pt.y);bC=bC.next}while(bC!=bG.pts);return bE/2}}}};aC.Clipper.BuildArc=function(bF,bA,bz,by){var bD=Math.sqrt(aC.Math_Abs_Double(by))*aC.Math_Abs_Double(bz-bA);bD=bD/4;if(bD<6){bD=6}if(bD>64){bD=aC.MaxSteps}var bB=aC.Cast_Int32(bD);var bH=new aC.Polygon();var bG=(bz-bA)/(bB-1);var bE=bA;for(var bC=0;bC<bB;++bC){bH.push(new aC.IntPoint(bF.x+aC.Clipper.Round(Math.cos(bE)*by),bF.y+aC.Clipper.Round(Math.sin(bE)*by)));bE+=bG}return bH};aC.Clipper.GetUnitNormal=function(bC,bB){var bz=(bB.x-bC.x);var by=(bB.y-bC.y);if((bz==0)&&(by==0)){return new aC.Clipper.DoublePoint(0,0)}var bA=1/Math.sqrt(bz*bz+by*by);bz*=bA;by*=bA;return new aC.Clipper.DoublePoint(by,-bz)};aC.Clipper.prototype.OffsetPolygons=function(bB,bE,bz,bC,bD){var bA=arguments;if(bA.length==4){bD=true}else{if(bA.length==3){bC=2;bD=true}else{if(bA.length==2){bz=aC.JoinType.jtSquare;bC=2;bD=true}}}if(isNaN(bE)){aC.Error("Delta is not a number")}else{if(isNaN(bC)){aC.Error("MiterLimit is not a number")}}var by={};new aC.Clipper.PolyOffsetBuilder(bB,by,bE,bz,bC,bD);if(by.Value){by=by.Value}else{by=[[]]}return by};aC.Clipper.prototype.SimplifyPolygon=function(bz,bB){var by=new aC.Polygons();var bA=new aC.Clipper();if(bA.AddPolygon(bz,aC.PolyType.ptSubject)){bA.Execute(aC.ClipType.ctUnion,by,bB,bB)}return by};aC.Clipper.prototype.SimplifyPolygons=function(bz,bB){var by=new aC.Polygons();var bA=new aC.Clipper();if(bA.AddPolygons(bz,aC.PolyType.ptSubject)){bA.Execute(aC.ClipType.ctUnion,by,bB,bB)}return by};var aj=aC.Clipper;var M=aC.ClipperBase;var am;if(typeof(Object.getOwnPropertyNames)=="undefined"){for(am in M.prototype){if(typeof(aj.prototype[am])=="undefined"||aj.prototype[am]==Object.prototype[am]){aj.prototype[am]=M.prototype[am]}}for(am in M){if(typeof(aj[am])=="undefined"){aj[am]=M[am]}}aj.$baseCtor=M}else{var aL=Object.getOwnPropertyNames(M.prototype);for(var aw=0;aw<aL.length;aw++){if(typeof(Object.getOwnPropertyDescriptor(aj.prototype,aL[aw]))=="undefined"){Object.defineProperty(aj.prototype,aL[aw],Object.getOwnPropertyDescriptor(M.prototype,aL[aw]))}}for(am in M){if(typeof(aj[am])=="undefined"){aj[am]=M[am]}}aj.$baseCtor=M}aC.Clipper.DoublePoint=function(by,bz){this.x=by;this.y=bz};aC.Clipper.PolyOffsetBuilder=function(bO,bJ,bM,bG,bC,bI){this.pts=null;this.currentPoly=null;this.normals=null;this.delta=0;this.m_R=0;this.m_i=0;this.m_j=0;this.m_k=0;this.botPt=null;if(bM==0){bJ.Value=bO;return}this.pts=bO;this.delta=bM;var bE,bD;if(bI){var bH=this.pts.length,bA=0;while(bA<bH&&this.pts[bA].length==0){bA++}if(bA==bH){return}this.botPt=this.pts[bA][0];for(bE=bA;bE<bH;++bE){if(this.UpdateBotPt(this.pts[bE][0])){bA=bE}for(bD=this.pts[bE].length-1;bD>0;bD--){if(aC.ClipperBase.PointsEqual(this.pts[bE][bD],this.pts[bE][bD-1])){this.pts[bE].splice(bD,1)}else{if(this.UpdateBotPt(this.pts[bE][bD])){bA=bE}}}}if(!aC.Clipper.Orientation(this.pts[bA])){aC.Clipper.ReversePolygons(this.pts)}}if(bC<=1){bC=1}var bz=2/(bC*bC);this.normals=[];var bL=bM*bM;bJ.Value=new aC.Polygons();var bF;for(this.m_i=0;this.m_i<this.pts.length;this.m_i++){bF=this.pts[this.m_i].length;if(bF>1&&this.pts[this.m_i][0].x==this.pts[this.m_i][bF-1].x&&this.pts[this.m_i][0].y==this.pts[this.m_i][bF-1].y){bF--}if(bF==0||(bF<3&&bM<=0)){continue}else{if(bF==1){var bB;bB=aC.Clipper.BuildArc(this.pts[this.m_i][bF-1],0,aC.PI2,bM);bJ.Value.push(bB);continue}}aC.Clear(this.normals);for(bD=0;bD<bF-1;++bD){this.normals.push(aC.Clipper.GetUnitNormal(this.pts[this.m_i][bD],this.pts[this.m_i][bD+1]))}this.normals.push(aC.Clipper.GetUnitNormal(this.pts[this.m_i][bF-1],this.pts[this.m_i][0]));this.currentPoly=new aC.Polygon();this.m_k=bF-1;for(this.m_j=0;this.m_j<bF;++this.m_j){switch(bG){case aC.JoinType.jtMiter:this.m_R=1+(this.normals[this.m_j].x*this.normals[this.m_k].x+this.normals[this.m_j].y*this.normals[this.m_k].y);if(this.m_R>=bz){this.DoMiter()}else{this.DoSquare(bC)}break;case aC.JoinType.jtRound:this.DoRound();break;case aC.JoinType.jtSquare:this.DoSquare(1);break}this.m_k=this.m_j}bJ.Value.push(this.currentPoly)}var bK=new aC.Clipper();bK.AddPolygons(bJ.Value,aC.PolyType.ptSubject);if(bM>0){bK.Execute(aC.ClipType.ctUnion,bJ.Value,aC.PolyFillType.pftPositive,aC.PolyFillType.pftPositive)}else{var by=bK.GetBounds();var bN=new aC.Polygon();bN.push(new aC.IntPoint(by.left-10,by.bottom+10));bN.push(new aC.IntPoint(by.right+10,by.bottom+10));bN.push(new aC.IntPoint(by.right+10,by.top-10));bN.push(new aC.IntPoint(by.left-10,by.top-10));bK.AddPolygon(bN,aC.PolyType.ptSubject);bK.Execute(aC.ClipType.ctUnion,bJ.Value,aC.PolyFillType.pftNegative,aC.PolyFillType.pftNegative);if(bJ.Value.length>0){bJ.Value.splice(0,1);for(bE=0;bE<bJ.Value.length;bE++){bJ.Value[bE].reverse()}}}};aC.Clipper.PolyOffsetBuilder.prototype.UpdateBotPt=function(by){if(by.y>this.botPt.y||(by.y==this.botPt.y&&by.x<this.botPt.x)){this.botPt=by;return true}else{return false}};aC.Clipper.PolyOffsetBuilder.prototype.AddPoint=function(by){this.currentPoly.push(by)};aC.Clipper.PolyOffsetBuilder.prototype.DoSquare=function(bC){var bD=new aC.IntPoint(aC.Cast_Int64(aC.Clipper.Round(this.pts[this.m_i][this.m_j].x+this.normals[this.m_k].x*this.delta)),aC.Cast_Int64(aC.Clipper.Round(this.pts[this.m_i][this.m_j].y+this.normals[this.m_k].y*this.delta)));var bB=new aC.IntPoint(aC.Cast_Int64(aC.Clipper.Round(this.pts[this.m_i][this.m_j].x+this.normals[this.m_j].x*this.delta)),aC.Cast_Int64(aC.Clipper.Round(this.pts[this.m_i][this.m_j].y+this.normals[this.m_j].y*this.delta)));if((this.normals[this.m_k].x*this.normals[this.m_j].y-this.normals[this.m_j].x*this.normals[this.m_k].y)*this.delta>=0){var bz=Math.atan2(this.normals[this.m_k].y,this.normals[this.m_k].x);var by=Math.atan2(-this.normals[this.m_j].y,-this.normals[this.m_j].x);bz=Math.abs(by-bz);if(bz>aC.PI){bz=aC.PI2-bz}var bA=Math.tan((aC.PI-bz)/4)*Math.abs(this.delta*bC);bD=new aC.IntPoint(aC.Cast_Int64((bD.x-this.normals[this.m_k].y*bA)),aC.Cast_Int64((bD.y+this.normals[this.m_k].x*bA)));this.AddPoint(bD);bB=new aC.IntPoint(aC.Cast_Int64((bB.x+this.normals[this.m_j].y*bA)),aC.Cast_Int64((bB.y-this.normals[this.m_j].x*bA)));this.AddPoint(bB)}else{this.AddPoint(bD);this.AddPoint(this.pts[this.m_i][this.m_j]);this.AddPoint(bB)}};aC.Clipper.PolyOffsetBuilder.prototype.DoMiter=function(){if((this.normals[this.m_k].x*this.normals[this.m_j].y-this.normals[this.m_j].x*this.normals[this.m_k].y)*this.delta>=0){var by=this.delta/this.m_R;this.AddPoint(new aC.IntPoint(aC.Cast_Int64(aC.Clipper.Round(this.pts[this.m_i][this.m_j].x+(this.normals[this.m_k].x+this.normals[this.m_j].x)*by)),aC.Cast_Int64(aC.Clipper.Round(this.pts[this.m_i][this.m_j].y+(this.normals[this.m_k].y+this.normals[this.m_j].y)*by))))}else{var bA=new aC.IntPoint(aC.Cast_Int64(aC.Clipper.Round(this.pts[this.m_i][this.m_j].x+this.normals[this.m_k].x*this.delta)),aC.Cast_Int64(aC.Clipper.Round(this.pts[this.m_i][this.m_j].y+this.normals[this.m_k].y*this.delta)));var bz=new aC.IntPoint(aC.Cast_Int64(aC.Clipper.Round(this.pts[this.m_i][this.m_j].x+this.normals[this.m_j].x*this.delta)),aC.Cast_Int64(aC.Clipper.Round(this.pts[this.m_i][this.m_j].y+this.normals[this.m_j].y*this.delta)));this.AddPoint(bA);this.AddPoint(this.pts[this.m_i][this.m_j]);this.AddPoint(bz)}};aC.Clipper.PolyOffsetBuilder.prototype.DoRound=function(){var bD=new aC.IntPoint(aC.Clipper.Round(this.pts[this.m_i][this.m_j].x+this.normals[this.m_k].x*this.delta),aC.Clipper.Round(this.pts[this.m_i][this.m_j].y+this.normals[this.m_k].y*this.delta));var bC=new aC.IntPoint(aC.Clipper.Round(this.pts[this.m_i][this.m_j].x+this.normals[this.m_j].x*this.delta),aC.Clipper.Round(this.pts[this.m_i][this.m_j].y+this.normals[this.m_j].y*this.delta));this.AddPoint(bD);if((this.normals[this.m_k].x*this.normals[this.m_j].y-this.normals[this.m_j].x*this.normals[this.m_k].y)*this.delta>=0){if((this.normals[this.m_j].x*this.normals[this.m_k].x+this.normals[this.m_j].y*this.normals[this.m_k].y)<0.985){var bA=Math.atan2(this.normals[this.m_k].y,this.normals[this.m_k].x);var bz=Math.atan2(this.normals[this.m_j].y,this.normals[this.m_j].x);if(this.delta>0&&bz<bA){bz+=aC.PI2}else{if(this.delta<0&&bz>bA){bz-=aC.PI2}}var bB=aC.Clipper.BuildArc(this.pts[this.m_i][this.m_j],bA,bz,this.delta);for(var by=0;by<bB.length;by++){this.AddPoint(bB[by])}}}else{this.AddPoint(this.pts[this.m_i][this.m_j])}this.AddPoint(bC)};aC.Error=function(bz){try{throw new Error(bz)}catch(by){alert(by.message)}};aC.Clone=function(bD){if(!(bD instanceof Array)){return[]}if(bD.length==0){return[]}else{if(bD.length==1&&bD[0].length==0){return[[]]}}var bF=bD[0] instanceof Array;if(!bF){bD=[bD]}var bz=bD.length,bE,bC,bA,by;var bB=[];for(bC=0;bC<bz;bC++){bE=bD[bC].length;by=[];for(bA=0;bA<bE;bA++){by.push({x:bD[bC][bA].x,y:bD[bC][bA].y})}bB.push(by)}if(!bF){bB=bB[0]}return bB};aC.Clean=function(bI,bJ){if(!(bI instanceof Array)){return[]}var bA=bI[0] instanceof Array;var bI=aC.Clone(bI);if(typeof bJ!="number"||bJ===null){aC.Error("Delta is not a number in Clean().");return bI}if(bI.length==0||(bI.length==1&&bI[0].length==0)||bJ<0){return bI}if(!bA){bI=[bI]}var bF=bI.length;var bG,by,bK,bH,bz,bC,bE;var bD=[];for(var bB=0;bB<bF;bB++){by=bI[bB];bG=by.length;if(bG==0){continue}else{if(bG<3){bK=by;bD.push(bK);continue}}bK=by;bH=bJ*bJ;bz=by[0];bC=1;for(bE=1;bE<bG;bE++){if((by[bE].x-bz.x)*(by[bE].x-bz.x)+(by[bE].y-bz.y)*(by[bE].y-bz.y)<=bH){continue}bK[bC]=by[bE];bz=by[bE];bC++}bz=by[bC-1];if((by[0].x-bz.x)*(by[0].x-bz.x)+(by[0].y-bz.y)*(by[0].y-bz.y)<=bH){bC--}if(bC<bG){bK.splice(bC,bG-bC)}if(bK.length){bD.push(bK)}}if(!bA&&bD.length){bD=bD[0]}else{if(!bA&&bD.length==0){bD=[]}else{if(bA&&bD.length==0){bD=[[]]}}}return bD};aC.Lighten=function(bE,bN){if(!(bE instanceof Array)){return[]}if(typeof bN!="number"||bN===null){aC.Error("Tolerance is not a number in Lighten().");return aC.Clone(bE)}if(bE.length===0||(bE.length==1&&bE[0].length===0)||bN<0){return aC.Clone(bE)}if(!(bE[0] instanceof Array)){bE=[bE]}var bL,bK,bA,bJ,bF,bD,bH,bG,bB,bP,bz,by;var bC,bQ,bO;var bM=bE.length;var bI=[];for(bL=0;bL<bM;bL++){bA=bE[bL];for(bJ=0;bJ<1000000;bJ++){bF=[];bD=bA.length;if(bA[bD-1].x!=bA[0].x||bA[bD-1].y!=bA[0].y){by=1;bA.push({x:bA[0].x,y:bA[0].y});bD=bA.length}else{by=0}bz=[];for(bK=0;bK<bD-2;bK++){bH=bA[bK];bB=bA[bK+1];bG=bA[bK+2];bC=bG.x-bH.x;bQ=bG.y-bH.y;bP=0;if(bC!==0||bQ!==0){bO=Math.sqrt(bC*bC+bQ*bQ);bP=Math.abs((bB.x-bH.x)*bQ-(bB.y-bH.y)*bC)/bO}if(bP<=bN){bz[bK+1]=1;bK++}}bF.push({x:bA[0].x,y:bA[0].y});for(bK=1;bK<bD-1;bK++){if(!bz[bK]){bF.push({x:bA[bK].x,y:bA[bK].y})}}bF.push({x:bA[bD-1].x,y:bA[bD-1].y});if(by){bA.pop()}if(!bz.length){break}else{bA=bF}}bD=bF.length;if(bF[bD-1].x==bF[0].x&&bF[bD-1].y==bF[0].y){bF.pop()}if(bF.length>2){bI.push(bF)}}if(!bE[0] instanceof Array){bI=bI[0]}if(typeof(bI)=="undefined"){bI=[[]]}return bI};if(typeof(document)!=="undefined"){window.ClipperLib=aC}else{self.ClipperLib=aC}})();var spine={};spine.BoneData=function(a,b){this.name=a;this.parent=b};spine.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:true,inheritRotation:true};spine.SlotData=function(a,b){this.name=a;this.boneData=b};spine.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:false};spine.Bone=function(b,a){this.data=b;this.parent=a;this.setToSetupPose()};spine.Bone.yDown=false;spine.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(d,b){var e=this.parent;if(e!=null){this.worldX=this.x*e.m00+this.y*e.m01+e.worldX;this.worldY=this.x*e.m10+this.y*e.m11+e.worldY;if(this.data.inheritScale){this.worldScaleX=e.worldScaleX*this.scaleX;this.worldScaleY=e.worldScaleY*this.scaleY}else{this.worldScaleX=this.scaleX;this.worldScaleY=this.scaleY}this.worldRotation=this.data.inheritRotation?e.worldRotation+this.rotation:this.rotation}else{this.worldX=this.x;this.worldY=this.y;this.worldScaleX=this.scaleX;this.worldScaleY=this.scaleY;this.worldRotation=this.rotation}var g=this.worldRotation*Math.PI/180;var f=Math.cos(g);var a=Math.sin(g);this.m00=f*this.worldScaleX;this.m10=a*this.worldScaleX;this.m01=-a*this.worldScaleY;this.m11=f*this.worldScaleY;if(d){this.m00=-this.m00;this.m01=-this.m01}if(b!=spine.Bone.yDown){this.m10=-this.m10;this.m11=-this.m11}},setToSetupPose:function(){var a=this.data;this.x=a.x;this.y=a.y;this.rotation=a.rotation;this.scaleX=a.scaleX;this.scaleY=a.scaleY}};spine.Slot=function(a,d,b){this.data=a;this.skeleton=d;this.bone=b;this.setToSetupPose()};spine.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(a){this.attachment=a;this._attachmentTime=this.skeleton.time},setAttachmentTime:function(a){this._attachmentTime=this.skeleton.time-a},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var b=this.data;this.r=b.r;this.g=b.g;this.b=b.b;this.a=b.a;var e=this.skeleton.data.slots;for(var a=0,d=e.length;a<d;a++){if(e[a]==b){this.setAttachment(!b.attachmentName?null:this.skeleton.getAttachmentBySlotIndex(a,b.attachmentName));break}}}};spine.Skin=function(a){this.name=a;this.attachments={}};spine.Skin.prototype={addAttachment:function(a,b,d){this.attachments[a+":"+b]=d},getAttachment:function(a,b){return this.attachments[a+":"+b]},_attachAll:function(f,k){for(var d in k.attachments){var e=d.indexOf(":");var a=parseInt(d.substring(0,e));var b=d.substring(e+1);var j=f.slots[a];if(j.attachment&&j.attachment.name==b){var g=this.getAttachment(a,b);if(g){j.setAttachment(g)}}}}};spine.Animation=function(a,b,d){this.name=a;this.timelines=b;this.duration=d};spine.Animation.prototype={apply:function(j,g,f,a,e){if(a&&this.duration!=0){f%=this.duration;g%=this.duration}var d=this.timelines;for(var b=0,k=d.length;b<k;b++){d[b].apply(j,g,f,e,1)}},mix:function(e,a,d,j,m,f){if(j&&this.duration!=0){d%=this.duration;a%=this.duration}var k=this.timelines;for(var g=0,b=k.length;g<b;g++){k[g].apply(e,a,d,m,f)}}};spine.binarySearch=function(b,g,d){var a=0;var e=Math.floor(b.length/d)-2;if(e==0){return d}var f=e>>>1;while(true){if(b[(f+1)*d]<=g){a=f+1}else{e=f}if(a==e){return(a+1)*d}f=(a+e)>>>1}};spine.linearSearch=function(a,f,e){for(var b=0,d=a.length-e;b<=d;b+=e){if(a[b]>f){return b}}return -1};spine.Curves=function(a){this.curves=[];this.curves.length=(a-1)*6};spine.Curves.prototype={setLinear:function(a){this.curves[a*6]=0},setStepped:function(a){this.curves[a*6]=-1},setCurve:function(k,q,z,n,y){var r=1/10;var j=r*r;var g=j*r;var d=3*r;var b=3*j;var a=6*j;var A=6*g;var v=-q*2+n;var u=-z*2+y;var f=(q-n)*3+1;var e=(z-y)*3+1;var s=k*6;var m=this.curves;m[s]=q*d+v*b+f*g;m[s+1]=z*d+u*b+e*g;m[s+2]=v*a+f*A;m[s+3]=u*a+e*A;m[s+4]=f*A;m[s+5]=e*A},getCurvePercent:function(e,m){m=m<0?0:(m>1?1:m);var j=e*6;var u=this.curves;var a=u[j];if(!a){return m}if(a==-1){return 0}var v=u[j+1];var s=u[j+2];var r=u[j+3];var g=u[j+4];var f=u[j+5];var q=a,n=v;var k=10-2;while(true){if(q>=m){var d=q-a;var b=n-v;return b+(n-b)*(m-d)/(q-d)}if(k==0){break}k--;a+=s;v+=r;s+=g;r+=f;q+=a;n+=v}return n+(1-n)*(m-q)/(1-q)}};spine.RotateTimeline=function(a){this.curves=new spine.Curves(a);this.frames=[];this.frames.length=a*2};spine.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(d,a,b){d*=2;this.frames[d]=a;this.frames[d+1]=b},apply:function(e,a,d,r,f){var n=this.frames;if(d<n[0]){return}var q=e.bones[this.boneIndex];if(d>=n[n.length-2]){var g=q.data.rotation+n[n.length-1]-q.rotation;while(g>180){g-=360}while(g<-180){g+=360}q.rotation+=g*f;return}var b=spine.binarySearch(n,d,2);var j=n[b-1];var m=n[b];var k=1-(d-m)/(n[b-2]-m);k=this.curves.getCurvePercent(b/2-1,k);var g=n[b+1]-j;while(g>180){g-=360}while(g<-180){g+=360}g=q.data.rotation+(j+g*k)-q.rotation;while(g>180){g-=360}while(g<-180){g+=360}q.rotation+=g*f}};spine.TranslateTimeline=function(a){this.curves=new spine.Curves(a);this.frames=[];this.frames.length=a*3};spine.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,b,a,d){e*=3;this.frames[e]=b;this.frames[e+1]=a;this.frames[e+2]=d},apply:function(e,a,d,r,f){var n=this.frames;if(d<n[0]){return}var q=e.bones[this.boneIndex];if(d>=n[n.length-3]){q.x+=(q.data.x+n[n.length-2]-q.x)*f;q.y+=(q.data.y+n[n.length-1]-q.y)*f;return}var b=spine.binarySearch(n,d,3);var j=n[b-2];var g=n[b-1];var m=n[b];var k=1-(d-m)/(n[b+-3]-m);k=this.curves.getCurvePercent(b/3-1,k);q.x+=(q.data.x+j+(n[b+1]-j)*k-q.x)*f;q.y+=(q.data.y+g+(n[b+2]-g)*k-q.y)*f}};spine.ScaleTimeline=function(a){this.curves=new spine.Curves(a);this.frames=[];this.frames.length=a*3};spine.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,b,a,d){e*=3;this.frames[e]=b;this.frames[e+1]=a;this.frames[e+2]=d},apply:function(e,a,d,r,f){var n=this.frames;if(d<n[0]){return}var q=e.bones[this.boneIndex];if(d>=n[n.length-3]){q.scaleX+=(q.data.scaleX-1+n[n.length-2]-q.scaleX)*f;q.scaleY+=(q.data.scaleY-1+n[n.length-1]-q.scaleY)*f;return}var b=spine.binarySearch(n,d,3);var j=n[b-2];var g=n[b-1];var m=n[b];var k=1-(d-m)/(n[b+-3]-m);k=this.curves.getCurvePercent(b/3-1,k);q.scaleX+=(q.data.scaleX-1+j+(n[b+1]-j)*k-q.scaleX)*f;q.scaleY+=(q.data.scaleY-1+g+(n[b+2]-g)*k-q.scaleY)*f}};spine.ColorTimeline=function(a){this.curves=new spine.Curves(a);this.frames=[];this.frames.length=a*5};spine.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(m,k,j,f,d,e){m*=5;this.frames[m]=k;this.frames[m+1]=j;this.frames[m+2]=f;this.frames[m+3]=d;this.frames[m+4]=e},apply:function(f,D,k,F,j){var s=this.frames;if(k<s[0]){return}var e=f.slots[this.slotIndex];if(k>=s[s.length-5]){var z=s.length-1;e.r=s[z-3];e.g=s[z-2];e.b=s[z-1];e.a=s[z];return}var m=spine.binarySearch(s,k,5);var n=s[m-4];var v=s[m-3];var y=s[m-2];var A=s[m-1];var q=s[m];var d=1-(k-q)/(s[m-5]-q);d=this.curves.getCurvePercent(m/5-1,d);var u=n+(s[m+1]-n)*d;var B=v+(s[m+2]-v)*d;var C=y+(s[m+3]-y)*d;var E=A+(s[m+4]-A)*d;if(j<1){e.r+=(u-e.r)*j;e.g+=(B-e.g)*j;e.b+=(C-e.b)*j;e.a+=(E-e.a)*j}else{e.r=u;e.g=B;e.b=C;e.a=E}}};spine.AttachmentTimeline=function(a){this.curves=new spine.Curves(a);this.frames=[];this.frames.length=a;this.attachmentNames=[];this.attachmentNames.length=a};spine.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(d,b,a){this.frames[d]=b;this.attachmentNames[d]=a},apply:function(g,f,e,a,d){var j=this.frames;if(e<j[0]){return}var k;if(e>=j[j.length-1]){k=j.length-1}else{k=spine.binarySearch(j,e,1)-1}var b=this.attachmentNames[k];g.slots[this.slotIndex].setAttachment(!b?null:g.getAttachmentBySlotIndex(this.slotIndex,b))}};spine.EventTimeline=function(a){this.frames=[];this.frames.length=a;this.events=[];this.events.length=a};spine.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(d,b,a){this.frames[d]=b;this.events[d]=a},apply:function(g,a,f,n,j){if(!n){return}var k=this.frames;var e=k.length;if(a>f){this.apply(g,a,Number.MAX_VALUE,n,j);a=-1}else{if(a>=k[e-1]){return}}if(f<k[0]){return}var d;if(a<k[0]){d=0}else{d=spine.binarySearch(k,a,1);var b=k[d];while(d>0){if(k[d-1]!=b){break}d--}}var m=this.events;for(;d<e&&f>=k[d];d++){n.push(m[d])}}};spine.DrawOrderTimeline=function(a){this.frames=[];this.frames.length=a;this.drawOrders=[];this.drawOrders.length=a};spine.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(d,a,b){this.frames[d]=a;this.drawOrders[d]=b},apply:function(g,b,f,s,j){var q=this.frames;if(f<q[0]){return}var d;if(f>=q[q.length-1]){d=q.length-1}else{d=spine.binarySearch(q,f,1)-1}var a=g.drawOrder;var m=g.slots;var r=this.drawOrders[d];if(!r){for(var k=0,e=m.length;k<e;k++){a[k]=m[k]}}else{for(var k=0,e=r.length;k<e;k++){a[k]=g.slots[r[k]]}}}};spine.SkeletonData=function(){this.bones=[];this.slots=[];this.skins=[];this.events=[];this.animations=[]};spine.SkeletonData.prototype={defaultSkin:null,findBone:function(d){var a=this.bones;for(var b=0,e=a.length;b<e;b++){if(a[b].name==d){return a[b]}}return null},findBoneIndex:function(d){var a=this.bones;for(var b=0,e=a.length;b<e;b++){if(a[b].name==d){return b}}return -1},findSlot:function(a){var d=this.slots;for(var b=0,e=d.length;b<e;b++){if(d[b].name==a){return d[b]}}return null},findSlotIndex:function(a){var d=this.slots;for(var b=0,e=d.length;b<e;b++){if(d[b].name==a){return b}}return -1},findSkin:function(a){var d=this.skins;for(var b=0,e=d.length;b<e;b++){if(d[b].name==a){return d[b]}}return null},findEvent:function(a){var d=this.events;for(var b=0,e=d.length;b<e;b++){if(d[b].name==a){return d[b]}}return null},findAnimation:function(b){var e=this.animations;for(var a=0,d=e.length;a<d;a++){if(e[a].name==b){return e[a]}}return null}};spine.Skeleton=function(a){this.data=a;this.bones=[];for(var b=0,k=a.bones.length;b<k;b++){var g=a.bones[b];var d=!g.parent?null:this.bones[a.bones.indexOf(g.parent)];this.bones.push(new spine.Bone(g,d))}this.slots=[];this.drawOrder=[];for(var b=0,k=a.slots.length;b<k;b++){var e=a.slots[b];var f=this.bones[a.bones.indexOf(e.boneData)];var j=new spine.Slot(e,this,f);this.slots.push(j);this.drawOrder.push(j)}};spine.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:false,flipY:false,updateWorldTransform:function(){var d=this.flipX;var b=this.flipY;var a=this.bones;for(var e=0,f=a.length;e<f;e++){a[e].updateWorldTransform(d,b)}},setToSetupPose:function(){this.setBonesToSetupPose();this.setSlotsToSetupPose()},setBonesToSetupPose:function(){var a=this.bones;for(var b=0,d=a.length;b<d;b++){a[b].setToSetupPose()}},setSlotsToSetupPose:function(){var b=this.slots;for(var a=0,d=b.length;a<d;a++){b[a].setToSetupPose()}},getRootBone:function(){return this.bones.length==0?null:this.bones[0]},findBone:function(d){var a=this.bones;for(var b=0,e=a.length;b<e;b++){if(a[b].data.name==d){return a[b]}}return null},findBoneIndex:function(d){var a=this.bones;for(var b=0,e=a.length;b<e;b++){if(a[b].data.name==d){return b}}return -1},findSlot:function(a){var d=this.slots;for(var b=0,e=d.length;b<e;b++){if(d[b].data.name==a){return d[b]}}return null},findSlotIndex:function(a){var d=this.slots;for(var b=0,e=d.length;b<e;b++){if(d[b].data.name==a){return b}}return -1},setSkinByName:function(a){var b=this.data.findSkin(a);if(!b){throw"Skin not found: "+a}this.setSkin(b)},setSkin:function(a){if(this.skin&&a){a._attachAll(this,this.skin)}this.skin=a},getAttachmentBySlotName:function(b,a){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(b),a)},getAttachmentBySlotIndex:function(b,a){if(this.skin){var d=this.skin.getAttachment(b,a);if(d){return d}}if(this.data.defaultSkin){return this.data.defaultSkin.getAttachment(b,a)}return null},setAttachment:function(b,a){var e=this.slots;for(var d=0,j=e.length;d<j;d++){var g=e[d];if(g.data.name==b){var f=null;if(a){f=this.getAttachmentBySlotIndex(d,a);if(!f){throw"Attachment not found: "+a+", for slot: "+b}}g.setAttachment(f);return}}throw"Slot not found: "+b},update:function(a){this.time+=a}};spine.EventData=function(a){this.name=a};spine.EventData.prototype={intValue:0,floatValue:0,stringValue:null};spine.Event=function(a){this.data=a};spine.Event.prototype={intValue:0,floatValue:0,stringValue:null};spine.AttachmentType={region:0,boundingbox:1};spine.RegionAttachment=function(a){this.name=a;this.offset=[];this.offset.length=8;this.uvs=[];this.uvs.length=8};spine.RegionAttachment.prototype={type:spine.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(d,a,f,g,b){var e=this.uvs;if(b){e[2]=d;e[3]=g;e[4]=d;e[5]=a;e[6]=f;e[7]=a;e[0]=f;e[1]=g}else{e[0]=d;e[1]=g;e[2]=d;e[3]=a;e[4]=f;e[5]=a;e[6]=f;e[7]=g}},updateOffset:function(){var y=this.width/this.regionOriginalWidth*this.scaleX;var v=this.height/this.regionOriginalHeight*this.scaleY;var b=-this.width/2*this.scaleX+this.regionOffsetX*y;var A=-this.height/2*this.scaleY+this.regionOffsetY*v;var j=b+this.regionWidth*y;var u=A+this.regionHeight*v;var z=this.rotation*Math.PI/180;var d=Math.cos(z);var a=Math.sin(z);var m=b*d+this.x;var k=b*a;var r=A*d+this.y;var n=A*a;var s=j*d+this.x;var q=j*a;var f=u*d+this.y;var e=u*a;var g=this.offset;g[0]=m-n;g[1]=r+k;g[2]=m-e;g[3]=f+k;g[4]=s-e;g[5]=f+q;g[6]=s-n;g[7]=r+q},computeVertices:function(g,f,k,e){g+=k.worldX;f+=k.worldY;var m=k.m00;var j=k.m01;var d=k.m10;var b=k.m11;var a=this.offset;e[0]=a[0]*m+a[1]*j+g;e[1]=a[0]*d+a[1]*b+f;e[2]=a[2]*m+a[3]*j+g;e[3]=a[2]*d+a[3]*b+f;e[4]=a[4]*m+a[5]*j+g;e[5]=a[4]*d+a[5]*b+f;e[6]=a[6]*m+a[7]*j+g;e[7]=a[6]*d+a[7]*b+f}};spine.BoundingBoxAttachment=function(a){this.name=a;this.vertices=[]};spine.BoundingBoxAttachment.prototype={type:spine.AttachmentType.boundingBox,computeWorldVertices:function(m,j,s,a){m+=s.worldX;j+=s.worldY;var u=s.m00;var r=s.m01;var f=s.m10;var e=s.m11;var g=this.vertices;for(var d=0,b=g.length;d<b;d+=2){var q=g[d];var k=g[d+1];a[d]=q*u+k*r+m;a[d+1]=q*f+k*e+j}}};spine.AnimationStateData=function(a){this.skeletonData=a;this.animationToMixTime={}};spine.AnimationStateData.prototype={defaultMix:0,setMixByName:function(b,a,d){var f=this.skeletonData.findAnimation(b);if(!f){throw"Animation not found: "+b}var e=this.skeletonData.findAnimation(a);if(!e){throw"Animation not found: "+a}this.setMix(f,e,d)},setMix:function(d,b,a){this.animationToMixTime[d.name+":"+b.name]=a},getMix:function(d,b){var a=this.animationToMixTime[d.name+":"+b.name];return a?a:this.defaultMix}};spine.TrackEntry=function(){};spine.TrackEntry.prototype={next:null,previous:null,animation:null,loop:false,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,onStart:null,onEnd:null,onComplete:null,onEvent:null};spine.AnimationState=function(a){this.data=a;this.tracks=[];this.events=[]};spine.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(f){f*=this.timeScale;for(var a=0;a<this.tracks.length;a++){var e=this.tracks[a];if(!e){continue}var d=f*e.timeScale;e.time+=d;if(e.previous){e.previous.time+=d;e.mixTime+=d}var b=e.next;if(b){if(e.lastTime>=b.delay){this.setCurrent(a,b)}}else{if(!e.loop&&e.lastTime>=e.endTime){this.clearTrack(a)}}}},apply:function(f){for(var g=0;g<this.tracks.length;g++){var q=this.tracks[g];if(!q){continue}this.events.length=0;var d=q.time;var b=q.lastTime;var m=q.endTime;var j=q.loop;if(!j&&d>m){d=m}var k=q.previous;if(!k){q.animation.apply(f,q.lastTime,d,j,this.events)}else{var r=k.time;if(!k.loop&&r>k.endTime){r=k.endTime}k.animation.apply(f,r,r,k.loop,null);var e=q.mixTime/q.mixDuration;if(e>=1){e=1;q.previous=null}q.animation.mix(f,q.lastTime,d,j,this.events,e)}for(var s=0,u=this.events.length;s<u;s++){var a=this.events[s];if(q.onEvent!=null){q.onEvent(g,a)}if(this.onEvent!=null){this.onEvent(g,a)}}if(j?(b%m>d%m):(b<m&&d>=m)){var n=Math.floor(d/m);if(q.onComplete){q.onComplete(g,n)}if(this.onComplete){this.onComplete(g,n)}}q.lastTime=q.time}},clearTracks:function(){for(var a=0,b=this.tracks.length;a<b;a++){this.clearTrack(a)}this.tracks.length=0},clearTrack:function(b){if(b>=this.tracks.length){return}var a=this.tracks[b];if(!a){return}if(a.onEnd!=null){a.onEnd(b)}if(this.onEnd!=null){this.onEnd(b)}this.tracks[b]=null},_expandToIndex:function(a){if(a<this.tracks.length){return this.tracks[a]}while(a>=this.tracks.length){this.tracks.push(null)}return null},setCurrent:function(a,b){var d=this._expandToIndex(a);if(d){d.previous=null;if(d.onEnd!=null){d.onEnd(a)}if(this.onEnd!=null){this.onEnd(a)}b.mixDuration=this.data.getMix(d.animation,b.animation);if(b.mixDuration>0){b.mixTime=0;b.previous=d}}this.tracks[a]=b;if(b.onStart!=null){b.onStart(a)}if(this.onStart!=null){this.onStart(a)}},setAnimationByName:function(e,b,a){var d=this.data.skeletonData.findAnimation(b);if(!d){throw"Animation not found: "+b}return this.setAnimation(e,d,a)},setAnimation:function(e,d,a){var b=new spine.TrackEntry();b.animation=d;b.loop=a;b.endTime=d.duration;this.setCurrent(e,b);return b},addAnimationByName:function(f,d,a,b){var e=this.data.skeletonData.findAnimation(d);if(!e){throw"Animation not found: "+d}return this.addAnimation(f,e,a,b)},addAnimation:function(g,f,a,b){var e=new spine.TrackEntry();e.animation=f;e.loop=a;e.endTime=f.duration;var d=this._expandToIndex(g);if(d){while(d.next){d=d.next}d.next=e}else{this.tracks[g]=e}if(b<=0){if(d){b+=d.endTime-this.data.getMix(d.animation,f)}else{b=0}}e.delay=b;return e},getCurrent:function(a){if(a>=this.tracks.length){return null}return this.tracks[a]}};spine.SkeletonJson=function(a){this.attachmentLoader=a};spine.SkeletonJson.prototype={scale:1,readSkeletonData:function(C){var b=new spine.SkeletonData();var H=C.bones;for(var F=0,A=H.length;F<A;F++){var J=H[F];var q=null;if(J.parent){q=b.findBone(J.parent);if(!q){throw"Parent bone not found: "+J.parent}}var f=new spine.BoneData(J.name,q);f.length=(J.length||0)*this.scale;f.x=(J.x||0)*this.scale;f.y=(J.y||0)*this.scale;f.rotation=(J.rotation||0);f.scaleX=J.scaleX||1;f.scaleY=J.scaleY||1;f.inheritScale=J.inheritScale||true;f.inheritRotation=J.inheritRotation||true;b.bones.push(f)}var s=C.slots;for(var F=0,A=s.length;F<A;F++){var G=s[F];var f=b.findBone(G.bone);if(!f){throw"Slot bone not found: "+G.bone}var g=new spine.SlotData(G.name,f);var E=G.color;if(E){g.r=spine.SkeletonJson.toColor(E,0);g.g=spine.SkeletonJson.toColor(E,1);g.b=spine.SkeletonJson.toColor(E,2);g.a=spine.SkeletonJson.toColor(E,3)}g.attachmentName=G.attachment;g.additiveBlending=G.additive;b.slots.push(g)}var K=C.skins;for(var u in K){if(!K.hasOwnProperty(u)){continue}var z=K[u];var D=new spine.Skin(u);for(var j in z){if(!z.hasOwnProperty(j)){continue}var I=b.findSlotIndex(j);var B=z[j];for(var y in B){if(!B.hasOwnProperty(y)){continue}var r=this.readAttachment(D,y,B[y]);if(r!=null){D.addAttachment(I,y,r)}}}b.skins.push(D);if(D.name=="default"){b.defaultSkin=D}}var a=C.events;for(var e in a){if(!a.hasOwnProperty(e)){continue}var v=a[e];var d=new spine.EventData(e);d.intValue=v["int"]||0;d.floatValue=v["float"]||0;d.stringValue=v.string||null;b.events.push(d)}var m=C.animations;for(var k in m){if(!m.hasOwnProperty(k)){continue}this.readAnimation(k,m[k],b)}return b},readAttachment:function(g,b,f){b=f.name||b;var e=spine.AttachmentType[f.type||"region"];var j=this.attachmentLoader.newAttachment(g,e,b);if(e==spine.AttachmentType.region){j.x=(f.x||0)*this.scale;j.y=(f.y||0)*this.scale;j.scaleX=f.scaleX||1;j.scaleY=f.scaleY||1;j.rotation=f.rotation||0;j.width=(f.width||32)*this.scale;j.height=(f.height||32)*this.scale;j.updateOffset()}else{if(e==spine.AttachmentType.boundingBox){var a=f.vertices;for(var d=0,k=a.length;d<k;d++){j.vertices.push(a[d]*scale)}}}return j},readAnimation:function(A,I,T){var M=[];var G=0;var R=I.bones;for(var z in R){if(!R.hasOwnProperty(z)){continue}var v=T.findBoneIndex(z);if(v==-1){throw"Bone not found: "+z}var q=R[z];for(var d in q){if(!q.hasOwnProperty(d)){continue}var ab=q[d];if(d=="rotate"){var u=new spine.RotateTimeline(ab.length);u.boneIndex=v;var j=0;for(var U=0,S=ab.length;U<S;U++){var W=ab[U];u.setFrame(j,W.time,W.angle);spine.SkeletonJson.readCurve(u,j,W);j++}M.push(u);G=Math.max(G,u.frames[u.getFrameCount()*2-2])}else{if(d=="translate"||d=="scale"){var u;var D=1;if(d=="scale"){u=new spine.ScaleTimeline(ab.length)}else{u=new spine.TranslateTimeline(ab.length);D=this.scale}u.boneIndex=v;var j=0;for(var U=0,S=ab.length;U<S;U++){var W=ab[U];var O=(W.x||0)*D;var N=(W.y||0)*D;u.setFrame(j,W.time,O,N);spine.SkeletonJson.readCurve(u,j,W);j++}M.push(u);G=Math.max(G,u.frames[u.getFrameCount()*3-3])}else{throw"Invalid timeline type for a bone: "+d+" ("+z+")"}}}}var Y=I.slots;for(var aa in Y){if(!Y.hasOwnProperty(aa)){continue}var H=Y[aa];var ad=T.findSlotIndex(aa);for(var d in H){if(!H.hasOwnProperty(d)){continue}var ab=H[d];if(d=="color"){var u=new spine.ColorTimeline(ab.length);u.slotIndex=ad;var j=0;for(var U=0,S=ab.length;U<S;U++){var W=ab[U];var J=W.color;var P=spine.SkeletonJson.toColor(J,0);var V=spine.SkeletonJson.toColor(J,1);var Z=spine.SkeletonJson.toColor(J,2);var ac=spine.SkeletonJson.toColor(J,3);u.setFrame(j,W.time,P,V,Z,ac);spine.SkeletonJson.readCurve(u,j,W);j++}M.push(u);G=Math.max(G,u.frames[u.getFrameCount()*5-5])}else{if(d=="attachment"){var u=new spine.AttachmentTimeline(ab.length);u.slotIndex=ad;var j=0;for(var U=0,S=ab.length;U<S;U++){var W=ab[U];u.setFrame(j++,W.time,W.name)}M.push(u);G=Math.max(G,u.frames[u.getFrameCount()-1])}else{throw"Invalid timeline type for a slot: "+d+" ("+aa+")"}}}}var E=I.events;if(E){var u=new spine.EventTimeline(E.length);var j=0;for(var U=0,S=E.length;U<S;U++){var f=E[U];var B=T.findEvent(f.name);if(!B){throw"Event not found: "+f.name}var ae=new spine.Event(B);ae.intValue=f.hasOwnProperty("int")?f["int"]:B.intValue;ae.floatValue=f.hasOwnProperty("float")?f["float"]:B.floatValue;ae.stringValue=f.hasOwnProperty("string")?f.string:B.stringValue;u.setFrame(j++,f.time,ae)}M.push(u);G=Math.max(G,u.frames[u.getFrameCount()-1])}var Q=I.draworder;if(Q){var u=new spine.DrawOrderTimeline(Q.length);var s=T.slots.length;var j=0;for(var U=0,S=Q.length;U<S;U++){var af=Q[U];var L=null;if(af.offsets){L=[];L.length=s;for(var K=s-1;K>=0;K--){L[K]=-1}var C=af.offsets;var e=[];e.length=s-C.length;var m=0,F=0;for(var K=0,X=C.length;K<X;K++){var k=C[K];var ad=T.findSlotIndex(k.slot);if(ad==-1){throw"Slot not found: "+k.slot}while(m!=ad){e[F++]=m++}L[m+k.offset]=m++}while(m<s){e[F++]=m++}for(var K=s-1;K>=0;K--){if(L[K]==-1){L[K]=e[--F]}}}u.setFrame(j++,af.time,L)}M.push(u);G=Math.max(G,u.frames[u.getFrameCount()-1])}T.animations.push(new spine.Animation(A,M,G))}};spine.SkeletonJson.readCurve=function(a,e,d){var b=d.curve;if(!b){return}if(b=="stepped"){a.curves.setStepped(e)}else{if(b instanceof Array){a.curves.setCurve(e,b[0],b[1],b[2],b[3])}}};spine.SkeletonJson.toColor=function(a,b){if(a.length!=8){throw"Color hexidecimal length must be 8, recieved: "+a}return parseInt(a.substring(b*2,(b*2)+2),16)/255};spine.Atlas=function(j,a){this.textureLoader=a;this.pages=[];this.regions=[];var d=new spine.AtlasReader(j);var n=[];n.length=4;var e=null;while(true){var r=d.readLine();if(r==null){break}r=d.trim(r);if(r.length==0){e=null}else{if(!e){e=new spine.AtlasPage();e.name=r;e.format=spine.Atlas.Format[d.readValue()];d.readTuple(n);e.minFilter=spine.Atlas.TextureFilter[n[0]];e.magFilter=spine.Atlas.TextureFilter[n[1]];var m=d.readValue();e.uWrap=spine.Atlas.TextureWrap.clampToEdge;e.vWrap=spine.Atlas.TextureWrap.clampToEdge;if(m=="x"){e.uWrap=spine.Atlas.TextureWrap.repeat}else{if(m=="y"){e.vWrap=spine.Atlas.TextureWrap.repeat}else{if(m=="xy"){e.uWrap=e.vWrap=spine.Atlas.TextureWrap.repeat}}}a.load(e,r,this);this.pages.push(e)}else{var g=new spine.AtlasRegion();g.name=r;g.page=e;g.rotate=d.readValue()=="true";d.readTuple(n);var k=parseInt(n[0]);var f=parseInt(n[1]);d.readTuple(n);var b=parseInt(n[0]);var q=parseInt(n[1]);g.u=k/e.width;g.v=f/e.height;if(g.rotate){g.u2=(k+q)/e.width;g.v2=(f+b)/e.height}else{g.u2=(k+b)/e.width;g.v2=(f+q)/e.height}g.x=k;g.y=f;g.width=Math.abs(b);g.height=Math.abs(q);if(d.readTuple(n)==4){g.splits=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];if(d.readTuple(n)==4){g.pads=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];d.readTuple(n)}}g.originalWidth=parseInt(n[0]);g.originalHeight=parseInt(n[1]);d.readTuple(n);g.offsetX=parseInt(n[0]);g.offsetY=parseInt(n[1]);g.index=parseInt(d.readValue());this.regions.push(g)}}}};spine.Atlas.prototype={findRegion:function(a){var e=this.regions;for(var b=0,d=e.length;b<d;b++){if(e[b].name==a){return e[b]}}return null},dispose:function(){var a=this.pages;for(var b=0,d=a.length;b<d;b++){this.textureLoader.unload(a[b].rendererObject)}},updateUVs:function(b){var f=this.regions;for(var a=0,e=f.length;a<e;a++){var d=f[a];if(d.page!=b){continue}d.u=d.x/b.width;d.v=d.y/b.height;if(d.rotate){d.u2=(d.x+d.height)/b.width;d.v2=(d.y+d.width)/b.height}else{d.u2=(d.x+d.width)/b.width;d.v2=(d.y+d.height)/b.height}}}};spine.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6};spine.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6};spine.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2};spine.AtlasPage=function(){};spine.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0};spine.AtlasRegion=function(){};spine.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:false,splits:null,pads:null};spine.AtlasReader=function(a){this.lines=a.split(/\r\n|\r|\n/)};spine.AtlasReader.prototype={index:0,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},readLine:function(){if(this.index>=this.lines.length){return null}return this.lines[this.index++]},readValue:function(){var a=this.readLine();var b=a.indexOf(":");if(b==-1){throw"Invalid line: "+a}return this.trim(a.substring(b+1))},readTuple:function(b){var d=this.readLine();var f=d.indexOf(":");if(f==-1){throw"Invalid line: "+d}var e=0,g=f+1;for(;e<3;e++){var a=d.indexOf(",",g);if(a==-1){if(e==0){throw"Invalid line: "+d}break}b[e]=this.trim(d.substr(g,a-g));g=a+1}b[e]=this.trim(d.substring(g));return e+1}};spine.AtlasAttachmentLoader=function(a){this.atlas=a};spine.AtlasAttachmentLoader.prototype={newAttachment:function(e,b,a){switch(b){case spine.AttachmentType.boundingbox:return new spine.BoundingBoxAttachment(a);case spine.AttachmentType.region:var d=this.atlas.findRegion(a);if(!d){throw"Region not found in atlas: "+a+" ("+b+")"}var f=new spine.RegionAttachment();f.rendererObject=d;f.setUVs(d.u,d.v,d.u2,d.v2,d.rotate);f.regionOffsetX=d.offsetX;f.regionOffsetY=d.offsetY;f.regionWidth=d.width;f.regionHeight=d.height;f.regionOriginalWidth=d.originalWidth;f.regionOriginalHeight=d.originalHeight;return f}throw"Unknown attachment type: "+b}};spine.SkeletonBounds=function(){this.polygonPool=[];this.polygons=[];this.boundingBoxes=[]};spine.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(e,q){var m=e.slots;var j=m.length;var u=e.x,r=e.y;var b=this.boundingBoxes;var k=this.polygonPool;var s=this.polygons;b.length=0;for(var g=0,a=s.length;g<a;g++){k.push(s[g])}s.length=0;for(var g=0;g<j;g++){var v=m[g];var f=v.attachment;if(f.type!=spine.AttachmentType.boundingBox){continue}b.push(f);var d=k.length;if(d>0){polygon=k[d-1];k.splice(d-1,1)}else{polygon=[]}s.push(polygon);polygon.length=f.vertices.length;f.computeWorldVertices(u,r,v.bone,polygon)}if(q){this.aabbCompute()}},aabbCompute:function(){var q=this.polygons;var f=Number.MAX_VALUE,e=Number.MAX_VALUE,b=Number.MIN_VALUE,a=Number.MIN_VALUE;for(var g=0,d=q.length;g<d;g++){var j=q[g];for(var r=0,s=j.length;r<s;r+=2){var m=j[r];var k=j[r+1];f=Math.min(f,m);e=Math.min(e,k);b=Math.max(b,m);a=Math.max(a,k)}}this.minX=f;this.minY=e;this.maxX=b;this.maxY=a},aabbContainsPoint:function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},aabbIntersectsSegment:function(e,r,d,n){var j=this.minX,g=this.minY,b=this.maxX,a=this.maxY;if((e<=j&&d<=j)||(r<=g&&n<=g)||(e>=b&&d>=b)||(r>=a&&n>=a)){return false}var f=(n-r)/(d-e);var k=f*(j-e)+r;if(k>g&&k<a){return true}k=f*(b-e)+r;if(k>g&&k<a){return true}var q=(g-r)/f+e;if(q>j&&q<b){return true}q=(a-r)/f+e;if(q>j&&q<b){return true}return false},aabbIntersectsSkeleton:function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},containsPoint:function(a,f){var b=this.polygons;for(var d=0,e=b.length;d<e;d++){if(this.polygonContainsPoint(b[d],a,f)){return this.boundingBoxes[d]}}return null},intersectsSegment:function(d,g,b,f){var a=this.polygons;for(var e=0,j=a.length;e<j;e++){if(a[e].intersectsSegment(d,g,b,f)){return boundingBoxes[e]}}return null},polygonContainsPoint:function(j,k,g){var n=j.length;var d=n-2;var e=false;for(var m=0;m<n;m+=2){var a=j[m+1];var f=j[d+1];if((a<g&&f>=g)||(f<g&&a>=g)){var b=j[m];if(b+(g-a)/(f-a)*(j[d]-b)<k){e=!e}}d=m}return e},intersectsSegment:function(s,D,g,B,f){var b=s.length;var C=D-B,e=g-f;var m=D*f-g*B;var A=s[b-2],d=s[b-1];for(var u=0;u<b;u+=2){var v=s[u],a=s[u+1];var k=A*a-d*v;var r=A-v,z=d-a;var j=C*z-e*r;var q=(m*r-C*k)/j;if(((q>=A&&q<=v)||(q>=v&&q<=A))&&((q>=D&&q<=B)||(q>=B&&q<=D))){var n=(m*z-e*k)/j;if(((n>=d&&n<=a)||(n>=a&&n<=d))&&((n>=g&&n<=f)||(n>=f&&n<=g))){return true}}A=v;d=a}return false},getPolygon:function(b){var a=this.boundingBoxes.indexOf(b);return a==-1?null:this.polygons[a]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}};var Clock=function(d){this.targetfps=d||60;this.startTime=Date.now();this.ms=this.startTime;this.last=this.startTime;this.time=0;this.dt=0;this.delta=0;this.fps=0;this.frameCount=0;this.frameCounter=true;var b=0;var a=0;this.tick=function(){if(this.frameCounter){this.frameCount++}this.ms=Date.now();this.dt=this.ms-this.last;this.last=this.ms;this.delta=this.dt/(1000/this.targetfps);this.time+=0.001*this.dt;if(this.frameCounter){b+=this.dt;a++;if(b>1000){this.fps=Math.round((a*1000)/b);a=0;b=0}}}};function loadString(a){var b=new XMLHttpRequest();b.open("GET",a,false);b.send(null);if((b.status==200)||(b.status==0)){return b.responseText}return""}String.prototype.ltrim=function(a){if(a){return this.replace(new RegExp("^["+a+"]+"),"")}return this.replace(/^\s+/,"")};String.prototype.rtrim=function(a){if(a){return this.replace(new RegExp("["+a+"]+$"),"")}return this.replace(/\s+$/,"")};String.prototype.trim=function(a){if(a){return this.ltrim(a).rtrim(a)}return this.ltrim().rtrim()};String.prototype.startsWith=function(a){return !this.indexOf(a)};CG.Class.extend("CanvasRenderer",{init:function(a){return this},draw:function(d){Game.b_ctx.save();switch(d.instanceOf){case"Sprite":case"Button":case"Particle":Game.b_ctx.globalAlpha=d.alpha;Game.b_ctx.transform(1,0,0,1,d.position.x,d.position.y);if(d.atlasimage){Game.b_ctx.rotate((d.rotation-d.imagerotation)*CG.Const_PI_180);Game.b_ctx.drawImage(d.image,d.xoffset,d.yoffset,d.cutwidth,d.cutheight,0-d.xhandle,0-d.yhandle,d.cutwidth*d.xscale,d.cutheight*d.yscale)}else{Game.b_ctx.rotate(d.rotation*CG.Const_PI_180);Game.b_ctx.drawImage(d.image,0-d.xhandle,0-d.yhandle,d.image.width*d.xscale,d.image.height*d.yscale)}break;case"SpineAnimation":Game.b_ctx.globalAlpha=d.alpha;Game.b_ctx.transform(d.transform.m[0],d.transform.m[1],d.transform.m[2],d.transform.m[3],d.transform.m[4],d.transform.m[5]);Game.b_ctx.drawImage(d.image,d.xoffset,d.yoffset,d.cutwidth,d.cutheight,d.xpos,d.ypos,d.cutwidth*d.xscale,d.cutheight*d.yscale);break;case"Animation":Game.b_ctx.globalAlpha=d.alpha;Game.b_ctx.transform(1,0,0,1,d.position.x,d.position.y);if(d.frames==1){Game.b_ctx.drawImage(d.image,d.position.x,d.position.y,d.image.width*d.xscale,d.image.height*d.yscale)}else{d.fx=d.currentframe*d.width;if((d.fx/d.image.width)>0){d.fx=d.fx%d.image.width}d.fy=Math.floor(d.width*d.currentframe/d.image.width)*d.height;Game.b_ctx.rotate(d.rotation*CG.Const_PI_180);try{Game.b_ctx.drawImage(d.image,d.fx,d.fy,d.width,d.height,0-d.xhandle,0-d.yhandle,d.width*d.xscale,d.height*d.yscale)}catch(g){}}break;case"Font":for(var f=0,b=d.text.length;f<b;f++){var a=d.text.charCodeAt(f);try{Game.b_ctx.drawImage(d.atlas,d.x[a],d.y[a],d.width[a],d.height[a],d.currentX,d.currentY+d.yoff[a],d.width[a],d.height[a])}catch(g){}d.currentX+=d.xadv[a]}break;case"Bitmap":Game.b_ctx.drawImage(d.bitmap_canvas,d.x,d.y);break;case"Map":Game.b_ctx.globalAlpha=d.layers[d.layer].opacity;Game.b_ctx.transform(1,0,0,1,d.rx,d.ry);if(d.orientation=="orthogonal"){try{Game.b_ctx.drawImage(d.atlas,d.cx,d.cy,d.tilewidth,d.tileheight,d.sx,d.sy,d.tilewidth*d.xscale,d.tileheight*d.yscale)}catch(g){}}else{if(d.orientation=="isometric"){try{Game.b_ctx.drawImage(d.atlas,d.cx,d.cy,d.tilewidth,d.tileset.tileheight,d.sx,d.sy,d.tilewidth*d.xscale,d.tileset.tileheight*d.yscale)}catch(g){}}}break;case"B2DEntity":case"B2DCircle":case"B2DRectangle":case"B2DPolygon":case"B2DBridge":case"B2DRope":Game.b_ctx.globalAlpha=d.alpha;Game.b_ctx.transform(1,0,0,1,d.body.GetPosition().x*d.scale,d.body.GetPosition().y*d.scale);if(d.atlasimage){Game.b_ctx.rotate((d.body.GetAngleRadians()-d.imagerotation));Game.b_ctx.drawImage(d.image,d.xoffset,d.yoffset,d.cutwidth,d.cutheight,0-d.xhandle,0-d.yhandle,d.cutwidth,d.cutheight)}else{Game.b_ctx.rotate(d.body.GetAngleRadians());Game.b_ctx.drawImage(d.image,0-d.xhandle,0-d.yhandle,d.image.width,d.image.height)}break}Game.b_ctx.restore()}});CG.Class.extend("Delta",{init:function(a){this.targetfps=a;this.currenttime=0;this.lasttime=Date.now();this.elapsedtime=0;this.frametime=0;this.delta=0;this.fps=0},update:function(){var a=(Date.now()-this.lasttime)/1000;this.fps=1/a;this.lasttime=Date.now()},getDelta:function(){return this.delta},getFPS:function(){return this.fps}});CG.Class.extend("Entity",{init:function(b,a){this.name=(b)?b:"";this.visible=true;this.transform=new Transform();this.position=(a)?a:new CG.Point(0,0);this.width=0;this.height=0;this.dragable=true;this.rotation=0;this.xscale=1;this.yscale=1;this.hover=false;this.boundingradius=0;this.mapcollision=false;return this},update:function(){},updateMatrix:function(){this.transform.reset();this.transform.translate(this.position.x,this.position.y);this.transform.rotate(this.rotation*CG.Const_PI_180);this.transform.scale(this.xscale,this.yscale)},draw:function(){throw {name:"Entity Error",message:"Subclass has no draw method."}},setImage:function(a){this.atlasimage=false;if(a){if(a instanceof CG.AtlasImage){this.image=Game.asset.getImageByName(a.atlasname);this.imagerotation=a.rotation;this.xoffset=a.xoffset;this.yoffset=a.yoffset;this.width=a.width;this.height=a.height;this.atlasimage=true;if(this.imagerotation!==0){this.cutwidth=a.height;this.cutheight=a.width}else{this.cutwidth=a.width;this.cutheight=a.height}}else{if(typeof a=="string"&&a!=""){this.image=new Image();this.image.src=a;this.width=this.image.width;this.height=this.image.height}else{this.image=a;this.width=this.image.width;this.height=this.image.height}}}},AABB:function(){var b=this.rotation*CG.Const_PI_180,d=Math.sin(b),e=Math.cos(b);if(d<0){d=-d}if(e<0){e=-e}return{bw:this.height*this.xscale*d+this.width*this.yscale*e,bh:this.height*this.xscale*e+this.width*this.yscale*d}},ifClicked:function(){if(CG.mousedown&&this.clickable){var d=CG.mouse.x-this.position.x,a=CG.mouse.y-this.position.y,g=Math.sqrt(d*d+a*a),f=Math.atan2(a,d),j=f-(this.rotation*CG.Const_PI_180),b=Math.cos(j)*g,e=Math.sin(j)*g;if(b>-0.5*(this.width*this.xscale)&&b<0.5*(this.width*this.xscale)&&e>-0.5*(this.height*this.yscale)&&e<0.5*(this.height*this.yscale)){this.clicked=true;CG.mousedown=false}else{this.clicked=false}}},ifMouseOver:function(){var d=CG.mouse.x-this.position.x,a=CG.mouse.y-this.position.y,g=Math.sqrt(d*d+a*a),f=Math.atan2(a,d),j=f-(this.rotation*CG.Const_PI_180),b=Math.cos(j)*g,e=Math.sin(j)*g;if(b>-0.5*(this.width*this.xscale)&&b<0.5*(this.width*this.xscale)&&e>-0.5*(this.height*this.yscale)&&e<0.5*(this.height*this.yscale)){this.hover=true}else{this.hover=false}},checkCollision:function(a,b){a.forEach(function(e,d){if(e.className=="MapArea"){if((this.position.y+this.AABB().bh/2)>=e.bound.y&&this.position.y-this.AABB().bh/2<=(e.bound.y+e.bound.height)&&(this.position.x+this.AABB().bw/2)>=e.bound.x&&this.position.x-this.AABB().bw/2<=(e.bound.x+e.bound.width)){if(e.type==="outer"){w=0.5*(this.width+e.bound.width);h=0.5*(this.height+e.bound.height);dx=this.position.x-(e.bound.width/2+e.bound.x);dy=this.position.y-(e.bound.height/2+e.bound.y);if(Math.abs(dx)<=w&&Math.abs(dy)<=h){wy=w*dy;hx=h*dx;if(wy>hx){if(wy>-hx){direction="bottom";overlap=((this.position.y-this.AABB().bh/2)-(e.bound.y+e.bound.height))>>0}else{direction="left";overlap=((this.position.x+this.AABB().bw/2)-e.bound.x)>>0}}else{if(wy>-hx){direction="right";overlap=((this.position.x-this.AABB().bw/2)-(e.bound.x+e.bound.width))>>0}else{direction="top";overlap=((this.position.y+this.AABB().bh/2)-e.bound.y)>>0}}}collision={overlap:overlap,direction:direction};b(this,e,collision)}}}else{if(this.boundingradius>0&&e.boundingradius>0){distx=this.position.x-e.position.x;disty=this.position.y-e.position.y;dist=Math.sqrt((distx*distx)+(disty*disty));if(dist<=(this.boundingradius/2*this.xscale+e.boundingradius/2*e.yscale)){collision=false;b(this,e,collision)}}else{if((this.position.y+this.AABB().bh/2)>=e.position.y-e.AABB().bh/2&&this.position.y-this.AABB().bh/2<=(e.position.y+e.AABB().bh/2)&&(this.position.x+this.AABB().bw/2)>=e.position.x-e.AABB().bw/2&&this.position.x-this.AABB().bw/2<=(e.position.x+e.AABB().bw/2)){w=0.5*(this.width+e.width);h=0.5*(this.height+e.height);dx=this.position.x-e.position.x;dy=this.position.y-e.position.y;if(Math.abs(dx)<=w&&Math.abs(dy)<=h){wy=w*dy;hx=h*dx;if(wy>hx){if(wy>-hx){direction="bottom";overlap=((this.position.y-this.AABB().bh/2)-(e.position.y-e.AABB().bh/2))>>0}else{direction="left";overlap=((this.position.x+this.AABB().bw/2)-(e.position.x+e.AABB().bw/2))>>0}}else{if(wy>-hx){direction="right";overlap=((this.position.x-this.AABB().bw/2)-(e.position.x-e.AABB().bw/2))>>0}else{direction="top";overlap=((this.position.y+this.AABB().bh/2)-(e.position.y+e.AABB().bh/2))>>0}}}collision={overlap:overlap,direction:direction};b(this,e,collision)}}}},this);return this}});CG.Class.extend("Point",{init:function(a,b){this.x=a||0;this.y=b||0}});CG.Point.extend("Vector",{init:function(a,d,b){this._super(this,a,d);this.z=b||0}});CG.Class.extend("Bound",{init:function(b,e,d,a){this.x=b;this.y=e;this.width=d;this.height=a;return this},setName:function(a){this.name=a;return this}});CG.Class.extend("Buffer",{init:function(b,a){this.b_canvas=document.createElement("canvas");this.b_canvas.width=b;this.b_canvas.height=a;this.b_ctx=this.b_canvas.getContext("2d");return this}});CG.Entity.extend("Sprite",{init:function(b,a){this._super("",a);this.instanceOf="Sprite";this.atlasimage=false;this.setImage(b);this.bound=Game.bound;this.diffpoint=new CG.Point(this.bound.x,this.bound.y);this.xspeed=0;this.xhandle=0;this.yspeed=0;this.yhandle=0;this.boundsMode=false;this.rotationspeed=0;this.alpha=1;this.followobject=false;this.followspeed=false;this.followsteps=false;this.attachedobject=false;this.offsetx=0;this.offsety=0;return this},update:function(){this.ifClicked();this.ifMouseOver();this.ifAttached();if(this.followobject){this.follow()}this.position.x+=this.xspeed;this.position.y+=this.yspeed;this.rotation+=this.rotationspeed;this.xhandle=(this.width*this.xscale/2);this.yhandle=(this.height*this.yscale/2);if(this.boundsMode){this.checkBound()}this.updateDiff();this.updateMatrix()},draw:function(){Game.renderer.draw(this)},checkBound:function(){switch(this.boundsMode){case"bounce":if(this.position.x>(this.bound.width-this.xhandle+this.bound.x)){this.position.x=this.bound.width-this.xhandle+this.bound.x;this.xspeed=this.xspeed*-1}else{if(this.position.x<this.bound.x+this.xhandle){this.position.x=this.bound.x+this.xhandle;this.xspeed=this.xspeed*-1}}if(this.position.y>(this.bound.height-this.yhandle+this.bound.y)){this.position.y=this.bound.height-this.yhandle+this.bound.y;this.yspeed=this.yspeed*-1}else{if(this.position.y<this.bound.y+this.yhandle){this.position.y=this.bound.y+this.yhandle;this.yspeed=this.yspeed*-1}}break;case"slide":if(this.position.x>(this.bound.width+this.xhandle+this.bound.x)){this.position.x=(this.bound.x-this.xhandle)}else{if(this.position.x<this.bound.x-this.xhandle){this.position.x=this.bound.x+this.bound.width+this.xhandle}}if(this.position.y>(this.bound.height+this.yhandle+this.bound.y)){this.position.y=(this.bound.y-this.yhandle)}else{if(this.position.y<this.bound.y-this.yhandle){this.position.y=this.bound.height+this.yhandle+this.bound.y}}break;default:break}},updateDiff:function(){if(this.diffpoint.x!==this.bound.x){this.position.x+=this.bound.x-this.diffpoint.x}if(this.diffpoint.y!==this.bound.y){this.position.y+=this.bound.y-this.diffpoint.y}this.diffpoint.x=this.bound.x;this.diffpoint.y=this.bound.y},follow:function(){if(this.followspeed){angl=Math.atan2(this.followobject.position.x-this.position.x,this.followobject.position.y-this.position.y)*CG.Const_180_PI;xs=this.followspeed*Math.sin(angl*CG.Const_PI_180);ys=this.followspeed*Math.cos(angl*CG.Const_PI_180);this.xspeed=xs;this.yspeed=ys;this.rotation=angl*-1}else{if(this.followsteps){angl=Math.atan2(this.followobject.position.x-this.position.x,this.followobject.position.y-this.position.y)*CG.Const_180_PI;this.rotation=angl*-1;if(this.followobject.position.x!=this.position.x){distx=this.followobject.position.x-this.position.x;this.xspeed=distx/this.followsteps}else{this.xspeed=0}if(this.followobject.position.y!=this.position.y){disty=this.followobject.position.y-this.position.y;this.yspeed=disty/this.followsteps}else{this.yspeed=0}}}},setBound:function(a){this.bound=a;return this},ifAttached:function(){if(this.attachedobject!=false){this.attachedobject.position._x=this.attachedobject.position.x=(this.position.x+this.offsetx);this.attachedobject.position._y=this.attachedobject.position.y=(this.position.y+this.offsety)}},attachObject:function(a){this.attachedobject=a;return this},removeAttachedObject:function(){this.attachedobject=null;return this},setAttachedOffsetX:function(a){this.offsetx=a;return this},setAttachedOffsetY:function(a){this.offsety=a;return this}});CG.Entity.extend("SpineAnimation",{init:function(d,b,a,e,f){this._super("");self=this;this.instanceOf="SpineAnimation";this.lastTime=Date.now();this.skeletonposition=a||new CG.Point(0,0);this.xscale=1;this.yscale=1;this.scale=e||1;this.vertices=[];this.textureCount=0;if(b.type=="text"){this.spineAtlasData=b.data;console.log("spine atlas: text (libGDX) used")}else{if(b.type=="json"){this.spineAtlasData=b.src;console.log("spine atlas: json");throw"json format is not supported by spine-js runtime?"}else{throw"check your atlas file format?"}}this.spineJsonData=d.data;this.initCustom=f;this.spineAtlas=new spine.Atlas(this.spineAtlasData,{load:function(g,k){this.textureCount++;var j=new Image();j.onload=function(){g.rendererObject=j;g.width=j.width;g.height=j.height;self.spineAtlas.updateUVs(g);this.textureCount--};j.onerror=function(){throw"error: atlas image not loaded! "+k};j.src="media/spine/"+k},unload:function(g){}});this.waitForTextures()},waitForTextures:function(){if(!this.textureCount){this.initSkeleton()}else{setTimeout(this.waitForTextures,100)}},initSkeleton:function(){this.skeletonJson=new spine.SkeletonJson(new spine.AtlasAttachmentLoader(self.spineAtlas));this.skeletonJson.scale=this.scale;if(typeof this.spineJsonData==="object"){this.skeletonData=this.skeletonJson.readSkeletonData(this.spineJsonData)}else{this.skeletonData=this.skeletonJson.readSkeletonData(JSON.parse(this.spineJsonData))}spine.Bone.yDown=true;this.skeleton=new spine.Skeleton(this.skeletonData);this.skeleton.getRootBone().x=this.skeletonposition.x||0;this.skeleton.getRootBone().y=this.skeletonposition.y||0;this.skeleton.updateWorldTransform();this.stateData=new spine.AnimationStateData(this.skeletonData);this.state=new spine.AnimationState(this.stateData);this.initCustom(this);this.state.onEvent=function(b,a){}},update:function(){var a=(Date.now()-this.lastTime)/1000;this.lastTime=Date.now();this.state.update(a);this.state.apply(this.skeleton);this.skeleton.updateWorldTransform()},draw:function(){var g=this.skeleton.drawOrder;for(var a=0,k=g.length;a<k;a++){var j=g[a];var f=j.attachment;var b=j.bone;if(!(f instanceof spine.RegionAttachment)){continue}f.computeVertices(this.skeleton.x,this.skeleton.y,j.bone,this.vertices);try{this.alpha=j.a;this.position=new CG.Point(this.vertices[2],this.vertices[3]);this.xscale=b.worldScaleX;this.yscale=b.worldScaleY;this.rotation=-(b.worldRotation+f.rotation);this.updateDiff();this.updateMatrix.call(this);this.xoffset=f.rendererObject.x;this.yoffset=f.rendererObject.y;this.cutwidth=f.width;this.cutheight=f.height;this.xhandle=this.cutwidth/2*this.xscale;this.yhandle=this.cutheight/2*this.yscale;this.xpos=0;this.ypos=0;if(this.skeleton.flipX){this.xscale*=-1;this.xpos=this.cutwidth;this.rotation*=-1}if(this.skeleton.flipY){this.yscale*=-1;this.ypos=this.cutheight;this.rotation*=-1}this.imagerotation=0;this.image=f.rendererObject.page.rendererObject;this.width=f.rendererObject.page.rendererObject.width;this.height=f.rendererObject.page.rendererObject.height;Game.renderer.draw(this)}catch(d){}}},updateDiff:function(){}});CG.Class.extend("AtlasImage",{init:function(e,d,f,b,a){this.source="";this.atlasimage="";this.atlasname="";this.image=e||"";this.name=e.split(/(\\|\/)/g).pop().split(".")[0];this.xoffset=d||0;this.yoffset=f||0;this.width=b||0;this.height=a||0;this.rotation=0}});CG.Class.extend("AtlasTexturePacker",{init:function(){if(typeof ejecta==="undefined"&&!navigator.isCocoonJS){this.xml="";this.xmlDoc="";this.parser=new DOMParser()||{}}this.imagename="";this.width=0;this.height=0;this.atlasimages=[];return this},loadXml:function(d){if(typeof d=="string"){this.xml=loadString(d)}else{this.xml=d.data}this.xmlDoc=this.parser.parseFromString(this.xml,"text/xml");this.imagename=this.xmlDoc.getElementsByTagName("TextureAtlas")[0].getAttribute("imagePath");this.width=parseInt(this.xmlDoc.getElementsByTagName("TextureAtlas")[0].getAttribute("width"));this.height=parseInt(this.xmlDoc.getElementsByTagName("TextureAtlas")[0].getAttribute("height"));var e=this.xmlDoc.getElementsByTagName("sprite");for(var b=0,a=e.length;b<a;b++){atlasimage=new CG.atlasimage(e[b].getAttribute("n"),parseInt(e[b].getAttribute("x")),parseInt(e[b].getAttribute("y")),parseInt(e[b].getAttribute("w")),parseInt(e[b].getAttribute("h")));if(e[b].getAttribute("r")=="y"){atlasimage.rotation=90;console.log("!!! support for rotated images in atlas files would be dropped in future versions !!!")}atlasimage.atlasimage=this.imagename;atlasimage.source="xml";atlasimage.atlasname=this.imagename.split(/(\\|\/)/g).pop().split(".")[0];this.atlasimages.push(atlasimage)}return this},loadJson:function(d){if(typeof d=="string"){this.json=JSON.parse(loadString(d))}else{this.json=d.data}this.imagename=this.json.meta.image;this.width=this.json.meta.size.w;this.height=this.json.meta.size.h;for(var b=0,a=this.json.frames.length;b<a;b++){var f=this.json.frames[b];var e=new CG.AtlasImage(f.filename,f.frame.x,f.frame.y,f.frame.w,f.frame.h);if(f.rotated===true){e.rotation=90;console.log("!!! support for rotated images in atlas files would be dropped in future versions !!!")}e.atlasimage=this.imagename;e.source="json";e.atlasname=this.imagename.split(/(\\|\/)/g).pop().split(".")[0];this.atlasimages.push(e)}return this},getAtlasImages:function(){return this.atlasimages}});CG.Sprite.extend("Animation",{init:function(f,a,g,e,d,b){this._super(f,a);this.instanceOf="Animation";this.loop=true;this.status=0;this.currentframe=0;this.frames=0;this.startframe=g-1;this.endframe=e-1;this.width=d;this.height=b;if(this.startframe===undefined&&this.endframe===undefined){this.frames=1;this.startframe=0;this.endframe=0}else{this.currentframe=this.startframe-1;this.frames=this.endframe-this.startframe+1}this.fx=0;this.fy=0;this.delay=0;this.tempdelay=0;return this},update:function(){if(this.status==0){this.tempdelay+=1;if(this.tempdelay>=this.delay){this.tempdelay=0;if(this.frames>1){this.currentframe+=1;if((this.currentframe-this.startframe)>=this.frames){if(this.loop===false){this.status=1}else{this.currentframe=this.startframe}}}}}this._super()},draw:function(){Game.renderer.draw(this)}});CG.Entity.extend("Bitmap",{init:function(b,a){this.instanceOf="Bitmap";this.x=0;this.y=0;this.bitmap_canvas=document.createElement("canvas");this.bitmap_canvas.width=b;this.bitmap_canvas.height=a;this.bitmap_ctx=this.bitmap_canvas.getContext("2d");this.bitmap_ctx.fillStyle="#000000";return this},loadImage:function(a){this.setImage(a);this.drawImageToBuffer();return this},update:function(){},draw:function(){Game.renderer.draw(this)},clearBuffer:function(){this.bitmap_ctx.clearRect(0,0,this.bitmap_canvas.width,this.bitmap_canvas.height);return this},drawImageToBuffer:function(){this.bitmap_ctx.drawImage(this.image,0,0);return this},clearRect:function(b,e,d,a){this.bitmap_ctx.save();this.bitmap_ctx.globalCompositeOperation="destination-out";this.bitmap_ctx.clearRect(b,e,d,a);this.bitmap_ctx.restore()},clearCircle:function(b,d,a){this.bitmap_ctx.save();this.bitmap_ctx.globalCompositeOperation="destination-out";this.bitmap_ctx.beginPath();this.bitmap_ctx.arc(b,d,a,0,2*Math.PI,false);this.bitmap_ctx.closePath();this.bitmap_ctx.fill();this.bitmap_ctx.restore()},getPixel:function(a,b){return this.bitmap_ctx.getImageData(a,b,1,1)},getPixels:function(b,e,d,a){return this.bitmap_ctx.getImageData(b,e,d,a)}});CG.Sprite.extend("Button",{init:function(e,b,f,d,a){this._super(e,b);this.instanceOf="Button";this.font=d;this.text=f;this.clickedCallback=a;this.clickable=true;this.clicked=false;return this},update:function(){this.ifClicked();this.ifMouseOver();this.xhandle=(this.width*this.xscale/2);this.yhandle=(this.height*this.yscale/2);if(this.clicked){if(this.clickedCallback){this.clicked=false;this.clickedCallback(this)}}this.updateDiff();this.updateMatrix()},draw:function(){if(this.visible==true){Game.renderer.draw(this);this.font.drawText(this.text,this.position.x-(this.font.getTextWidth(this.text)/2>>0),this.position.y-((this.font.getFontSize()/2)>>0))}}});CG.Class.extend("Menu",{init:function(a,d,b){this.x=a;this.y=d;this.margin=b;this.step=this.y;this.buttons=[];return this},addButton:function(a){this.buttons.push(a)},update:function(){this.buttons.forEach(function(a){a.update()})},draw:function(){this.buttons.forEach(function(a){a.position.x=this.x;a.position.y=this.step;a.draw();this.step+=a.height;this.step+=this.margin},this);this.step=this.y}});CG.Class.extend("MediaAsset",{init:function(a){this.obj=a;this.ready=false;this.progress=0;this.images=[];this.currimage=0;this.xmls=[];this.currxml=0;this.jsons=[];this.currjson=0;this.texts=[];this.currtext=0;this.fonts=[];this.currfont=0;this.assetcount=0;this.assetcurrent=0;this.width=300;this.height=20;this.radius=10;this.linewidth=8;this.bordercolor="white";this.progresscolor="red";this.shadowcolor="#222";this.shadowblur=6;this.shadowoffsetx=2;this.shadowoffsety=2},addImage:function(b,a){this.assetcount+=1;this.images.push({name:a||"",path:b,img:new Image(),type:"image"});return this},addFont:function(b,a){this.assetcount+=1;this.fonts.push({name:a||"",path:b,data:"",type:"font"});return this},addXml:function(b,a){this.assetcount+=1;this.xmls.push({name:a||"",path:b,data:"",type:"xml"});return this},addJson:function(b,a){this.assetcount+=1;this.jsons.push({name:a||"",path:b,data:"",src:"",type:"json"});return this},addText:function(b,a){this.assetcount+=1;this.texts.push({name:a||"",path:b,data:"",type:"text"});return this},getImageByName:function(b){for(var d=0,a=this.images.length;d<a;d++){if(this.images[d].name==b){if(this.images[d] instanceof CG.AtlasImage){return this.images[d]}else{return this.images[d].img}}}throw new MediaAssetException("No image with this name in asset.")},getImagesByName:function(b){var e=[];for(var d=0,a=this.images.length;d<a;d++){if(this.images[d].name==b){if(this.images[d] instanceof CG.AtlasImage){e.push(this.images[d])}else{e.push(this.images[d].img)}}}if(e.length===0){throw new MediaAssetException("No image with this name in asset: "+b)}return e},getFontByName:function(b){for(var d=0,a=this.fonts.length;d<a;d++){if(this.fonts[d].name==b){return this.fonts[d]}}throw new MediaAssetException("No font with this name in asset: "+b)},getXmlByName:function(b){for(var d=0,a=this.xmls.length;d<a;d++){if(this.xmls[d].name==b){return this.xmls[d]}}throw new MediaAssetException("No XML with this name in asset: "+b)},getJsonByName:function(b){for(var d=0,a=this.jsons.length;d<a;d++){if(this.jsons[d].name==b){return this.jsons[d]}}throw new MediaAssetException("No JSON with this name in asset: "+b)},getTextByName:function(b){for(var d=0,a=this.jsons.length;d<a;d++){if(this.texts[d].name==b){return this.texts[d]}}throw new MediaAssetException("No Text with this name in asset: "+b)},startPreLoad:function(){this.progress=100/this.assetcount*this.assetcurrent;this.progressScreen();if(this.currimage<this.images.length){this.images[this.currimage].img.onload=function(){console.log("image loaded: "+this.images[this.currimage].path);this.currimage+=1;this.assetcurrent+=1;this.startPreLoad()}.bind(this);this.images[this.currimage].img.onerror=function(){throw new MediaAssetException("error, cant load image: "+this.images[this.currimage].path)}.bind(this);this.images[this.currimage].img.src=this.images[this.currimage].path}else{if(this.currfont<this.fonts.length){this.fonts[this.currfont].data=loadString(this.fonts[this.currfont].path);console.log("font loaded: "+this.fonts[this.currfont].path);this.currfont+=1;this.assetcurrent+=1;this.startPreLoad()}else{if(this.currxml<this.xmls.length){this.xmls[this.currxml].data=loadString(this.xmls[this.currxml].path);console.log("xml loaded: "+this.xmls[this.currxml].path);this.currxml+=1;this.assetcurrent+=1;this.startPreLoad()}else{if(this.currjson<this.jsons.length){var a=loadString(this.jsons[this.currjson].path);this.jsons[this.currjson].data=JSON.parse(a);this.jsons[this.currjson].src=a;console.log("json loaded: "+this.jsons[this.currjson].path);this.currjson+=1;this.assetcurrent+=1;this.startPreLoad()}else{if(this.currtext<this.texts.length){this.texts[this.currtext].data=loadString(this.texts[this.currtext].path);console.log("text loaded: "+this.texts[this.currtext].path);this.currtext+=1;this.assetcurrent+=1;this.startPreLoad()}else{if(this.currimage==this.images.length&&this.assetcount==this.assetcurrent){this.ready=true;this.obj.create()}}}}}}},progressScreen:function(){var a=(this.obj.bound.width-this.width)/2;var b=(this.obj.bound.height-this.height)/2;this.obj.ctx.save();this.obj.ctx.fillStyle=this.progresscolor;this.obj.ctx.fillRect((this.obj.bound.width-this.width)/2,(this.obj.bound.height-this.height)/2,this.width/100*this.progress,this.height);this.obj.ctx.strokeStyle=this.bordercolor;this.obj.ctx.shadowColor=this.shadowcolor;this.obj.ctx.shadowBlur=this.shadowblur;this.obj.ctx.shadowOffsetX=this.shadowoffsetx;this.obj.ctx.shadowOffsetY=this.shadowoffsety;this.obj.ctx.beginPath();this.obj.ctx.moveTo(a+this.radius,b);this.obj.ctx.lineTo(a+this.width-(1*this.radius),b);this.obj.ctx.arcTo(a+this.width,b,a+this.width,b+this.radius,this.radius);this.obj.ctx.arcTo(a+this.width,this.radius*2+b,a+this.width-(1*this.radius),this.radius*2+b,this.radius);this.obj.ctx.lineTo(a+this.radius,2*this.radius+b);this.obj.ctx.arcTo(a,2*this.radius+b,a,b,this.radius);this.obj.ctx.arcTo(a,b,2*this.radius+a,b,this.radius);this.obj.ctx.lineWidth=this.linewidth;this.obj.ctx.stroke();this.obj.ctx.restore()}});function MediaAssetException(a){this.msg=a;console.log(this.msg)}CG.Entity.extend("Font",{init:function(){this.instanceOf="Font";this.atlas=new Image();this.fontFile="";this.chars=new Array(256);this.x=new Array(256);this.y=new Array(256);this.width=new Array(256);this.height=new Array(256);this.xoff=new Array(256);this.yoff=new Array(256);this.xadv=new Array(256);this.lineHeight=0;this.face="";this.size=0;this.bold=0;this.italic=0;this.base=0;this.scaleW=0;this.scaleH=0;this.text="";this.currentX=0;this.currentY=0;return this},update:function(){throw {name:"Font Error",message:"TODO, not defined yet."}},draw:function(){throw {name:"Font Error",message:"TODO, not defined yet."}},drawText:function(b,a,d){this.text=b;this.currentX=a;this.currentY=d;Game.renderer.draw(this)},getLineHeight:function(){return this.lineHeight},getFontSize:function(){return this.size},getTextWidth:function(e){var b=0;var f=0;for(var d=0,a=e.length;d<a;d++){b+=this.xadv[e.charCodeAt(d)]}return b},loadFont:function(g){idnum=0;if(typeof g=="string"){this.fontFile=loadString(g)}else{this.fontFile=g.data}var d=this.fontFile.split("\n");for(l in d){line=d[l].trim();if(line.startsWith("info")||line==""){var j=line.split(" ");for(i in j){var F=j[i];if(F.startsWith("face=")){var v=F.split("=");this.face=v[1].split('"').join("")}if(F.startsWith("size=")){var A=F.split("=");this.size=parseInt(A[1])}if(F.startsWith("bold=")){var C=F.split("=");this.bold=parseInt(C[1])}if(F.startsWith("italic=")){var m=F.split("=");this.italic=parseInt(m[1])}}}if(line.startsWith("padding")){continue}if(line.startsWith("common")){var n=line.split(" ");for(c in n){var z=n[c];if(z.startsWith("lineHeight=")){var H=z.split("=");this.lineHeight=parseInt(H[1])}if(z.startsWith("base=")){var q=z.split("=");this.base=parseInt(q[1])}if(z.startsWith("scaleW=")){var G=z.split("=");this.scaleW=parseInt(G[1])}if(z.startsWith("scaleH=")){var k=z.split("=");this.scaleH=parseInt(k[1])}}}if(line.startsWith("page")){var e=line.split(" ");for(p in e){data=e[p];if(data.startsWith("file=")){var s=data.split("=");this.atlas.src="media/font/"+s[1].split('"').join("")}}}if(line.startsWith("chars")){continue}if(line.startsWith("char")){var y=line.split(" ");for(l in y){ld=y[l];if(ld.startsWith("id=")){var a=ld.split("=");idnum=parseInt(a[1])}if(ld.startsWith("x=")){var D=ld.split("=");this.x[idnum]=parseInt(D[1])}if(ld.startsWith("y=")){var f=ld.split("=");this.y[idnum]=parseInt(f[1])}if(ld.startsWith("width=")){var u=ld.split("=");this.width[idnum]=parseInt(u[1])}if(ld.startsWith("height=")){var r=ld.split("=");this.height[idnum]=parseInt(r[1])}if(ld.startsWith("xoffset=")){var b=ld.split("=");this.xoff[idnum]=parseInt(b[1])}if(ld.startsWith("yoffset=")){var B=ld.split("=");this.yoff[idnum]=parseInt(B[1])}if(ld.startsWith("xadvance=")){var E=ld.split("=");this.xadv[idnum]=parseInt(E[1])}}}}return this}});CG.Entity.extend("Text",{init:function(a){this.font=a;this.text="";this.textcurrent="";this.x=0;this.y=0;this.width=0;this.height=0;this.textAlign="left";return this},initAsTextblock:function(a){return this},initAsScroller:function(){},initAsTicker:function(){},setText:function(a){this.text=a;return this},update:function(){},draw:function(){}});CG.Class.extend("Director",{init:function(){this.screens=[];this.activescreen=0;this.nextscreen=0;this.duration=20;this.stepx=40;this.stepy=30;this.alpha=0;this.mode="fade";this.direction=CG.RIGHT;this.color="rgb(0,0,0)";return this},update:function(){switch(this.mode){case"scale":if(this.nextscreen!=this.activescreen){this.screens[this.activescreen].xscale-=0.4/this.duration;this.screens[this.activescreen].yscale-=0.4/this.duration}else{if(this.nextscreen==this.activescreen){this.screens[this.activescreen].xscale+=0.4/this.duration;this.screens[this.activescreen].yscale+=0.4/this.duration}}if(this.screens[this.activescreen].xscale>=1){this.screens[this.activescreen].xscale=this.screens[this.activescreen].yscale=1;this.screens[this.nextscreen].xscale=this.screens[this.nextscreen].yscale=1}if(this.screens[this.activescreen].xscale<=0){this.screens[this.activescreen].xscale=this.screens[this.activescreen].yscale=1;this.screens[this.nextscreen].xscale=this.screens[this.nextscreen].yscale=0;this.activescreen=this.nextscreen}break;case"fade":if(this.nextscreen!=this.activescreen&&this.alpha<1){this.alpha+=1/this.duration}else{if(this.nextscreen==this.activescreen&&this.alpha!=0){this.alpha-=1/this.duration}}if(this.alpha>=1){this.activescreen=this.nextscreen;this.alpha=1}if(this.alpha<0){this.alpha=0}break;case"slide":if(this.nextscreen!=this.activescreen){switch(this.direction){case CG.UP:this.screens[this.activescreen].position.y-=this.stepy;this.screens[this.nextscreen].position.y-=this.stepy;if(this.screens[this.nextscreen].position.y<0){this.resetScreens();this.activescreen=this.nextscreen}break;case CG.DOWN:this.screens[this.activescreen].position.y+=this.stepy;this.screens[this.nextscreen].position.y+=this.stepy;if(this.screens[this.nextscreen].position.y>0){this.resetScreens();this.activescreen=this.nextscreen}break;case CG.LEFT:this.screens[this.activescreen].position.x-=this.stepx;this.screens[this.nextscreen].position.x-=this.stepx;if(this.screens[this.nextscreen].position.x<0){this.resetScreens();this.activescreen=this.nextscreen}break;case CG.RIGHT:this.screens[this.activescreen].position.x+=this.stepx;this.screens[this.nextscreen].position.x+=this.stepx;if(this.screens[this.nextscreen].position.x>0){this.resetScreens();this.activescreen=this.nextscreen}break}}break}this.screens[this.activescreen].update()},draw:function(){this.screens[this.activescreen].draw();if(this.screens[this.nextscreen].position.x!=0||this.screens[this.nextscreen].position.y!=0){this.screens[this.nextscreen].draw()}if(this.alpha>0){Game.b_ctx.save();Game.b_ctx.globalAlpha=this.alpha;Game.b_ctx.fillStyle=this.color;Game.b_ctx.fillRect(0,0,Game.bound.width,Game.bound.height);Game.b_ctx.restore()}},nextScreen:function(a,e,d){var b=this.getIndexOfScreen(a);if(b!=this.activescreen){this.resetScreens();this.mode=e;this.duration=d;this.stepx=Game.canvas.width/this.duration>>0;this.stepy=Game.canvas.height/this.duration>>0;this.nextscreen=b;if(this.mode==="scale"){this.alpha=0}else{if(this.mode==="fade"){}else{if(this.mode==="slide"){switch(this.direction){case CG.UP:this.screens[this.nextscreen].position.y+=CG.canvas.height;break;case CG.DOWN:this.screens[this.nextscreen].position.y-=CG.canvas.height;break;case CG.LEFT:this.screens[this.nextscreen].position.x+=CG.canvas.width;break;case CG.RIGHT:default:this.screens[this.nextscreen].position.x-=CG.canvas.width;break}}}}}return this},resetScreens:function(){this.screens[this.activescreen].position=new CG.Point(0,0);this.screens[this.nextscreen].position=new CG.Point(0,0);return this},addScreen:function(a){this.screens.push(a);return this},getScreenByName:function(d){for(var b=0,a=this.screens.length;b<a;b++){if(this.screens[b].name==d){return this.screens[b]}}return false},getIndexOfScreen:function(d){for(var b=0,a=this.screens.length;b<a;b++){if(this.screens[b].name==d){return b}}return false},getActiveScreenName:function(){return this.screens[this.activescreen].name},setDirection:function(a){this.direction=a;return this}});CG.Class.extend("Screen",{init:function(a){this.name=(a)?a:"";this.position=new CG.Point(0,0);this.xscale=1;this.yscale=1;this.layers=[];return this},create:function(){},update:function(){for(var b=0,a=this.layers.length;b<a;b++){this.layers[b].update()}},draw:function(){Game.b_ctx.save();if(this.xscale!==1||this.yscale!==1){Game.b_ctx.translate((Game.width-(Game.width*this.xscale))/2,(Game.height-(Game.height*this.yscale))/2);Game.b_ctx.scale(this.xscale,this.yscale)}else{Game.b_ctx.translate(this.position.x,this.position.y)}for(var b=0,a=this.layers.length;b<a;b++){this.layers[b].draw()}Game.b_ctx.restore()},addLayer:function(a){this.layers.push(a);return this},getLayerByName:function(d){for(var b=0,a=this.layers.length;b<a;b++){if(this.layers[b].name==d){return this.layers[b]}}return false}});CG.Class.extend("Layer",{init:function(a){this.name=(a)?a:"";this.visible=true;this.elements=[];this.elementsToDelete=[];return this},update:function(){if(this.visible==true){for(var b=0,a=this.elements.length;b<a;b++){this.elements[b].update();if(this.elements[b].status==1){this.elementsToDelete.push(this.elements[b])}}if(this.elementsToDelete.length>0){this._deleteElements()}}},draw:function(){if(this.visible==true){for(var b=0,a=this.elements.length;b<a;b++){this.elements[b].draw()}}},_deleteElements:function(){this.elementsToDelete.reverse();this.elementsToDelete.forEach(this._deleteElement,this);this.elementsToDelete=[]},_deleteElement:function(a){this.elements.splice(a,1)},addElement:function(a){this.elements.push(a);return this},getElementByName:function(b){for(var d=0,a=this.elements.length;d<a;d++){if(this.elements[d].name==b){return this.elements[d]}}return false},getElementsByName:function(b){elements=[];for(var d=0,a=this.elements.length;d<a;d++){if(this.elements[d].name==b){elements.push(this.elements[d])}}return elements}});CG.Class.extend("MapTileLayer",{init:function(){this.width=0;this.height=0;this.visible=true;this.opacity=1;this.tiles=[];return this}});CG.Class.extend("MapTileProperties",{init:function(){this.animated=false;this.animDelay=0;this.animDirection=0;this.animNext=0;this.delayTimer=0;return this}});CG.Class.extend("MapPoint",{init:function(a,e,b,d){this.initposition=a||new CG.Point(0,0);this.mapoffset=e||new CG.Point(0,0);this.gid=d;this.name=b;this.position=new CG.Point(a.x,a.y);return this},update:function(){this.position.x=this.initposition.x-this.mapoffset.x;this.position.y=this.initposition.y-this.mapoffset.y}});CG.Class.extend("MapArea",{init:function(e,d,a,b){this.initbound=e||new CG.Bound(0,0,0,0);this.mapoffset=d||new CG.Point(0,0);this.name=a;this.type=b||false;this.bound=new CG.Bound(e.x,e.y,e.width,e.height);return this},update:function(){this.bound.x=this.initbound.x-this.mapoffset.x;this.bound.y=this.initbound.y-this.mapoffset.y}});CG.Entity.extend("Map",{init:function(b,a,d){this._super(d);this.instanceOf="Map";this.elements=[];this.points=[];this.areas=[];this.position=new CG.Point(0,0);this.changemap="";this.animated=false;this.animDelayFactor=20;this.atlas=new Image();this.atlaswidth=0;this.atlasheight=0;this.atlastranscol="";if(typeof ejecta==="undefined"&&!navigator.isCocoonJS){this.xml="";this.parser=new DOMParser();this.xmlDoc=""}this.json={};this.layers=[];this.renderlayer="all";this.tileproperties=[];this.orientation="";this.width=0;this.height=0;this.tilewidth=0;this.tileheight=0;this.tileset={tilewidth:0,tileheight:0,offsetx:0,offsety:0,spacing:0,margin:0};this.xspeed=0;this.yspeed=0;this.xscale=1;this.yscale=1;this.alpha=1;this.wrapX=false;this.wrapY=false;this.layertocheck=0;return this},loadMapXml:function(e){this.changemap="";this.animated=false;this.layers=[];if(typeof e=="string"){this.xml=loadString(e)}else{this.xml=e.data}this.removeJsonData();this.xmlDoc=this.parser.parseFromString(this.xml,"text/xml");var B=map.xmlDoc.getElementsByTagName("map")[0];this.orientation=B.getAttribute("orientation");this.width=parseInt(B.getAttribute("width"));this.height=parseInt(B.getAttribute("height"));this.tilewidth=parseInt(B.getAttribute("tilewidth"));this.tileheight=parseInt(B.getAttribute("tileheight"));var m=B.childElementCount;var d=B.firstElementChild;for(i=0;i<m;i++){console.log(">"+d.nodeName);switch(d.nodeName){case"tileset":this.tileset.tilewidth=parseInt(d.getAttribute("tilewidth"));this.tileset.tileheight=parseInt(d.getAttribute("tileheight"));if(d.getAttribute("spacing")){this.tileset.spacing=parseInt(d.getAttribute("spacing"))}if(d.getAttribute("margin")){this.tileset.margin=parseInt(d.getAttribute("margin"))}if(d.getElementsByTagName("tileoffset")[0]){this.tileset.offsetx=parseInt(d.getElementsByTagName("tileoffset")[0].getAttribute("x"));this.tileset.offsety=parseInt(d.getElementsByTagName("tileoffset")[0].getAttribute("y"))}var n=d.getElementsByTagName("image")[0];this.atlas.src="media/map/"+n.getAttribute("source");this.atlaswidth=parseInt(n.getAttribute("width"));this.atlasheight=parseInt(n.getAttribute("height"));this.atlastranscol=n.getAttribute("trans");break;case"layer":var f=new CG.MapTileLayer();data=d.getElementsByTagName("data")[0];if(data.getAttribute("encoding")=="csv"){f.tiles=data.textContent.replace(/(\r\n|\n|\r)/gm,"").split(",");console.log("map encoding csv [layer "+i+"]")}else{if(data.getAttribute("encoding")=="base64"&&data.getAttribute("compression")=="gzip"){throw"base64 gzip compressed map format not supported at the moment"}else{if(data.getAttribute("encoding")=="base64"&&data.getAttribute("compression")=="zlib"){throw"base64 zlib compressed map format not supported at the moment"}else{if(data.getAttribute("encoding")=="base64"){throw"base64 map format not supported at the moment"}else{console.log("map encoding xml [layer "+i+"]");var z=d.getElementsByTagName("tile");for(x in z){if(x<z.length){f.tiles[x]=parseInt(z[x].getAttribute("gid"))}}}}}}f.name=d.getAttribute("name");f.width=parseInt(d.getAttribute("width"));f.height=parseInt(d.getAttribute("height"));if(d.getAttribute("opacity")){f.opacity=parseFloat(d.getAttribute("opacity"))}if(d.getAttribute("visible")==="0"){f.visible=false}this.layers.push(f);break;case"objectgroup":console.log("grouplayer found");var a=d.getElementsByTagName("object");for(o in a){if(o<a.length){var k=a[o];var C=k.getAttribute("name");if(k.getAttribute("gid")){this.points.push(new CG.MapPoint(new CG.Point(parseInt(k.getAttribute("x")),parseInt(k.getAttribute("y"))),this.position,k.getAttribute("name"),parseInt(k.getAttribute("gid"))));console.log("tile as oject found: "+C);console.log(k)}else{if(k.getAttribute("width")){type=false;j=k.getElementsByTagName("property");console.log(j.length);for(var q=0,u=j.length;q<u;q++){if(j[q].getAttribute("name")=="type"){type=j[q].getAttribute("value")}}this.areas.push(new CG.MapArea(new CG.Bound(parseInt(k.getAttribute("x")),parseInt(k.getAttribute("y")),parseInt(k.getAttribute("width")),parseInt(k.getAttribute("height"))),this.position,k.getAttribute("name"),type));console.log("group object found: "+C);console.log(k)}else{if(k.getElementsByTagName("polygon").length>0){console.log("polygon found: "+C)}else{if(k.getElementsByTagName("polyline").length>0){console.log("polyline found: "+C)}}}}}}break}d=d.nextElementSibling}this.tileproperties=Array(parseInt((this.atlaswidth/this.tilewidth))*parseInt((this.atlasheight/this.tileheight)));var z=map.xmlDoc.getElementsByTagName("tileset")[0].getElementsByTagName("tile");var g=new Date().getTime();for(i in z){var v=new CG.MapTileProperties();var A=z[i];if(i<this.tileproperties.length){var r=A.getAttribute("id");var j=A.getElementsByTagName("properties")[0].getElementsByTagName("property");for(q in j){if(q<j.length){var b=j[q];var y=b.getAttribute("name");var s=b.getAttribute("value");if(y=="name"){v.name=s}else{if(y=="anim_delay"){v.animDelay=parseInt(s);v.delayTimer=g;this.animated=true}else{if(y=="anim_direction"){v.animDirection=parseInt(s)}else{if(y=="anim_next"){v.animNext=parseInt(s);v.animated=true}}}}}}this.tileproperties[r]=v}}return this},loadMapJson:function(b){this.changemap="";this.animated=false;this.layers=[];if(typeof b=="string"){this.json=JSON.parse(loadString(b))}else{this.json=b.data}this.removeXmlData();this.orientation=this.json.orientation;this.width=this.json.width;this.height=this.json.height;this.tilewidth=this.json.tilewidth;this.tileheight=this.json.tileheight;for(i=0,l=this.json.layers.length;i<l;i++){switch(this.json.layers[i].type){case"tilelayer":var k=new CG.MapTileLayer();k.tiles=this.json.layers[i].data;k.name=this.json.layers[i].name;k.width=this.json.layers[i].width;k.height=this.json.layers[i].height;k.opacity=this.json.layers[i].opacity;k.visible=this.json.layers[i].visible;this.layers.push(k);break;case"objectgroup":console.log("grouplayer found");var j=this.json.layers[i].objects;for(o in j){if(o<j.length){var e=j[o];var a=e.name;if(e.gid){this.points.push(new CG.MapPoint(new CG.Point(parseInt(e.x),parseInt(e.y)),this.position,e.name,parseInt(e.gid)));console.log("tile as oject found: "+a);console.log(e)}else{if(e.width){this.areas.push(new CG.MapArea(new CG.Bound(parseInt(e.x),parseInt(e.y),parseInt(e.width),parseInt(e.height)),this.position,e.name,e.properties.type));console.log("group object found: "+a);console.log(e)}else{if(e.polygon){console.log("polygon found: "+a)}else{if(e.polyline){console.log("polyline found: "+a)}}}}}}break}}this.atlas.src="media/map/"+this.json.tilesets[0].image;this.atlaswidth=this.json.tilesets[0].imagewidth;this.atlasheight=this.json.tilesets[0].imageheight;this.atlastranscol=this.json.tilesets[0].transparentcolor;this.tileproperties=Array(parseInt((this.atlaswidth/this.tilewidth))*parseInt((this.atlasheight/this.tileheight)));var g=this.json.tilesets[0].tileproperties;var d=new Date().getTime();for(id in g){var m=new CG.MapTileProperties();var f=g[id];m.name=f.name;m.animDelay=parseInt(f.anim_delay);m.delayTimer=(m.animDelay>0)?d:0;m.animated=(m.animDelay>0)?true:false;m.animNext=parseInt(f.anim_next);if(m.animDelay>0){this.animated=true}m.animDirection=parseInt(f.anim_direction);this.tileproperties[id]=m}return this},drawMap:function(u,s,n,m,r,j,v){this.position.x=n;this.position.y=m;this.bx=n||this.bx||0;this.by=m||this.by||0;this.bw=r||Game.bound.width;this.bh=j||Game.bound.height;this.sx=u||this.sx||0;this.sy=s||this.sy||0;this.callback=v||false;this.rx=0;this.ry=0;this.cx=0;this.cy=0;this.xpos=0;this.ypos=0;this.layer=0;this.updatePointsAndAreas();if(this.changemap!=""){this.loadMap(this.changemap)}if(this.visible){this.updateAnimation();if(this.layers.length>0){for(this.layer=0,g=this.layers.length;this.layer<g;this.layer++){var A=this.layers[this.layer];if(this.renderlayer==A.name||this.renderlayer==this.layer||this.renderlayer=="all"){if(this.orientation=="orthogonal"&&A.visible==true){modx=(this.bx*this.xscale)%this.tilewidth;mody=(this.by*this.yscale)%this.tileheight;q=this.by;my=parseFloat(this.by)/parseFloat(this.tileheight)>>0;var e=(this.by+this.bh+this.tileheight);while(q<e){x=this.bx;mx=parseFloat(this.bx)/parseFloat(this.tilewidth)>>0;var f=(this.bx+this.bw+this.tilewidth);while(x<f){if((this.wrapX||(mx>=0&&mx<this.width))&&(this.wrapY||(my>=0&&my<this.height))){mx2=mx;my2=my;while(mx2<0){mx2+=this.width}while(mx2>=this.width){mx2-=this.width}while(my2<0){my2+=this.height}while(my2>=this.height){my2-=this.height}k=A.tiles[mx2+my2*A.width]-1;if(k>=0){if(modx<0){modx+=this.tilewidth}if(mody<0){mody+=this.tileheight}this.rx=x-modx-this.bx;this.ry=q-mody-this.by;if(this.elements.length>0&&this.layertocheck==g){for(var d=0,g=this.elements.length;d<g;d++){if(this.checkMapCollision(this.elements[0],this.rx,this.ry)){this.callback(this.elements[d],this.tileproperties[k])}}}this.cx=(k%(this.atlaswidth/this.tilewidth))*this.tilewidth;this.cy=Math.floor(this.tilewidth*k/this.atlaswidth)*this.tileheight;Game.renderer.draw(this)}}x=x+this.tilewidth;mx+=1}q=q+this.tileheight;my+=1}}else{if(this.orientation=="isometric"){var z=A.width+A.height;for(var q=0;q<z;q++){var a=q;var b=0;while(a>=A.height){a-=1;b+=1}while(a>=0&&b<A.width){var k=A.tiles[b+a*A.width];this.rx=(b-a-1)*this.tilewidth/2-n;this.ry=(b+a+1)*this.tileheight/2-m;if(this.rx>-this.tileset.tilewidth&&this.rx<r&&this.ry>-this.tileset.tileheight&&this.ry<j){if(k>0){this.cx=((k-1)%(this.atlaswidth/this.tilewidth))*this.tilewidth;this.cy=Math.floor(this.tilewidth*(k-1)/this.atlaswidth)*this.tileset.tileheight;Game.renderer.draw(this)}}a-=1;b+=1}}}}}}}}},updatePointsAndAreas:function(){this.points.forEach(function(a,b){a.update()},this);this.areas.forEach(function(b,a){b.update()},this)},getPointsByName:function(b){points=[];for(var d=0,a=this.points.length;d<a;d++){if(this.points[d].name===b){points.push(this.points[d])}}if(points.length>0){return points}return false},getAreasByName:function(b){areas=[];for(var d=0,a=this.areas.length;d<a;d++){if(this.areas[d].name===b){areas.push(this.areas[d])}}if(areas.length>0){return areas}return false},setLayerToRender:function(a){this.renderlayer=a;return this},update:function(){this.bx+=this.xspeed;this.by+=this.yspeed;if(this.getBounds().width-Game.bound.width<this.bx){this.xspeed=this.xspeed*-1}if(this.bx<0){this.xspeed=this.xspeed*-1}if(this.getBounds().height-Game.bound.height<this.by){this.yspeed=this.yspeed*-1}if(this.by<0){this.yspeed=this.yspeed*-1}return this},draw:function(){this.drawMap(this.bx,this.by,this.bw,this.bh,this.sx,this.sy,this.callback);return this},getBounds:function(){return{width:this.width*this.tilewidth,height:this.height*this.tileheight}},updateAnimation:function(){if(this.visible&&this.animated){if(this.layers.length>0){for(var d=0,a=this.layers.length;d<a;d++){var j=new Date().getTime();for(t=0;t<this.layers[d].tiles.length;t++){var f=this.layers[d].tiles[t];if(f>0){try{var b=this.tileproperties[f-1];if(b.animated&&b.animDirection!=0){if(j>(b.delayTimer+(b.animDelay/this.animDelayFactor))){switch(b.animDirection){case 1:this.layers[d].tiles[t]+=b.animNext;this.tileproperties[f-1+b.animNext].delayTimer=j;break;case -1:this.layers[d].tiles[t]-=b.animNext;this.tileproperties[f-1-b.animNext].delayTimer=j;break;default:break}}}}catch(g){}}}}}}},addElement:function(a){this.elements.push(a);return this},checkMapCollision:function(b,g,f){if(b.boundingradius>0){var a=b.boundingradius/2*b.xscale;var e=b.boundingradius/2*b.yscale;if(b.position.x+a>=g&&b.position.x-a<=g+this.tilewidth&&b.position.y+e>=f&&b.position.y-e<=f+this.tileheight){return true}}else{var j=b.width/2*b.xscale;var d=b.height/2*b.yscale;if(b.position.x+j>=g&&b.position.x-j<=g+this.tilewidth&&b.position.y+d>=f&&b.position.y-d<=f+this.tileheight){return true}}return false},checkElementsToAreasCollision:function(e,d){for(var b=0,a=e.length;b<a;b++){obj=e[b].checkCollision(this.areas,d)}return this},removeJsonData:function(){this.json={};return this},removeXmlData:function(){this.xml="";this.xmlDoc="";return this}});CG.Class.extend("Sequence",{init:function(){this.current=0;this.loop=false;this.translations=[];return this},addTranslation:function(a){this.translations.push(a);return this},update:function(a){if(this.current<this.translations.length){if(this.translations[this.current].finished===false){this.translations[this.current].update()}else{this.current+=1}}else{if(this.loop){this.reset()}else{}}},draw:function(){},reset:function(){for(var b=0,a=this.translations.length;b<a;b++){this.translations[b].reset()}this.current=0;return this}});CG.Class.extend("Translate",{init:function(){this.type="";this.tx=0;this.ty=0;this.x1=0;this.y1=0;this.x2=0;this.y2=0;this.bx=0;this.by=0;this.theobj={};this.r1=0;this.r2=0;this.startangle=0;this.angle=0;this.speed=0;this.steps=0;this.step=0;this.positions=[];this.finished=false;return this},initTween:function(e,j,a,m){this.type="tween";this.theobj=e;this.steps=j;this.x1=a.x;this.y1=a.y;this.x2=m.x;this.y2=m.y;var k=(this.x2-this.x1)/this.steps;var g=(this.y2-this.y1)/this.steps;var f=this.x1>>0;var b=this.y1>>0;for(var d=0;d<=this.steps;d++){this.positions.push(new CG.Point(f,b));f+=k;b+=g}return this},initOval:function(f,e,d,a,g,b){this.type="oval";this.theobj=f;this.x1=e.x;this.y1=e.y;this.r1=d;this.r2=a;this.startangle=g;this.speed=b;return this},initBezier:function(g,e,a,j,d,b){this.type="bezier";this.theobj=g;this.steps=e;this.start=j;this.end=a;if(this.control2=="undefined"&&this.control1=="undefined"){this.control2=new CG.Point(this.start.x+3*(this.end.x-this.start.x)/4,this.start.y+3*(this.end.y-this.start.y)/4)}else{this.control2=b||d}this.control1=d||new CG.Point(this.start.x+(this.end.x-this.start.x)/4,this.start.y+(this.end.y-this.start.y)/4);b1=function(m){return(m*m*m)};b2=function(m){return(3*m*m*(1-m))};b3=function(m){return(3*m*(1-m)*(1-m))};b4=function(m){return((1-m)*(1-m)*(1-m))};for(var f=0;f<=this.steps;f++){percent=(1/this.steps)*f;var k=new CG.Point();k.x=this.start.x*b1(percent)+this.control1.x*b2(percent)+this.control2.x*b3(percent)+this.end.x*b4(percent);k.y=this.start.y*b1(percent)+this.control1.y*b2(percent)+this.control2.y*b3(percent)+this.end.y*b4(percent);this.positions.push(k)}return this},update:function(){var b=this.theobj;switch(this.type){case"bezier":case"tween":if(this.step<this.steps){b.position.x=b.position._x=this.positions[this.step].x;b.position.y=b.position._y=this.positions[this.step].y;this.step+=1}else{this.finished=true}break;case"oval":var a=this.startangle*CG.Const_PI_180;this.tx=this.x1-(this.r1*Math.cos(a));this.ty=this.y1-(this.r2*Math.sin(a));this.startangle+=this.speed;if(this.startangle>360){this.startangle=0+(this.startangle-360)}b.position.x=b.position._x=this.tx>>0;b.position.y=b.position._y=this.ty>>0;break;default:break}},draw:function(){},reset:function(){this.step=0;this.finished=false}});CG.Class.extend("Morph",{init:function(e,b,a,d){this.mode=e;this.min=b;this.max=a;this.speed=d;this.angle=0;this.rad=this.max-this.min;this._val=0},update:function(){switch(this.mode){case"sinus":var a=this.angle*CG.Const_PI_180;this._val=this.rad*Math.sin(a);if(this._val<0){this._val=this._val*-1}this.angle+=this.speed;if(this.angle>360){this.angle=0+(this.angle-360)}break}return this},draw:function(){},getVal:function(){return this._val}});CG.Sprite.extend("Particle",{init:function(a){this._super(a,new CG.Point(0,0));this.instanceOf="Particle";this.lifetime=100;this.currtime=this.lifetime;this.aging=1;this.fadeout=false;this.gravity=0},update:function(){if(this.visible){if(this.fadeout){this.alpha=this.currtime/this.lifetime;if(this.alpha<=0){this.visible=false}}this.currtime-=this.aging;if(this.currtime<0){this.visible=false}this.position.x+=this.xspeed;this.position.y+=this.yspeed;this.yspeed+=this.gravity;this.rotation+=this.rotationspeed;this.xhandle=(this.width*this.xscale/2);this.yhandle=(this.height*this.yscale/2);this.updateDiff();this.updateMatrix()}},draw:function(){if(this.visible){Game.renderer.draw(this)}}});CG.Entity.extend("Emitter",{init:function(a){this._super();this.particles=[];this.maxparticles=50;this.creationtime=100;this.currenttime=0;this.creationspeed=50;this.gravity=0.05;this.image=null;this.type="";this.position=a||new CG.Point(0,0);this.position._x=this.position.x;this.position._y=this.position.y;this.rotation=0;this.width=200;this.height=200;this.radius=0;this.pspeed=10;this.protation=0;this.pdirection=0;this.plifetime=100;this.paging=1;this.pfadeout=false;return this},initAsPoint:function(a){this.image=a;this.type="point";return this},initAsExplosion:function(d,b,a){this.image=d;this.type="explosion";this.min=b;this.max=a;return this},initAsCorona:function(b,a){this.image=b;this.type="corona";this.radius=a||0;return this},initAsLine:function(d,a,b){this.image=d;this.width=a||200;this.pdirection=b||CG.UP;this.type="line";return this},initAsRectangle:function(d,b,a){this.image=d;this.width=b||200;this.height=a||200;this.type="rectangle";return this},createParticle:function(){particle=new CG.Particle(this.image);return particle},initParticle:function(b){if(this.pfadeout){b.fadeout=true}b.gravity=this.gravity;b.alpha=1;b.visible=true;b.lifetime=this.plifetime;b.currtime=this.plifetime;b.rotationspeed=this.protation;switch(this.type){case"corona":var a=this.getRandom(0,359)*CG.Const_PI_180;b.position.x=this.getX()-(this.radius*Math.cos(a));b.position.y=this.getY()-(this.radius*Math.sin(a));angl=Math.atan2(b.position.x-this.getX(),b.position.y-this.getY())*CG.Const_180_PI;b.xspeed=this.pspeed*Math.sin(angl*CG.Const_PI_180);b.yspeed=this.pspeed*Math.cos(angl*CG.Const_PI_180);break;case"rectangle":rndx=this.getRandom(this.width/2*-1,this.width/2);rndy=this.getRandom(this.height/2*-1,this.height/2);b.position.x=this.position._x-rndx;b.position.y=this.position._y-rndy;b.xspeed=0;b.yspeed=0;break;case"line":rnd=this.getRandom(this.width/2*-1,this.width/2);switch(this.pdirection){default:case CG.UP:b.xspeed=0;b.yspeed=this.pspeed*-1;b.position.x=rnd+this.getX();b.position.y=this.position._y;break;case CG.DOWN:b.xspeed=0;b.yspeed=this.pspeed;b.position.x=rnd+this.getX();b.position.y=this.position._y;break;case CG.LEFT:b.xspeed=this.pspeed*-1;b.yspeed=0;b.position.x=this.position._x;b.position.y=rnd+this.getY();break;case CG.RIGHT:b.xspeed=this.pspeed;b.yspeed=0;b.position.x=this.position._x;b.position.y=rnd+this.getY();break}break;case"explosion":b.position.x=this.position._x;b.position.y=this.position._y;b.xspeed=this.getRandom(this.min,this.max);b.yspeed=this.getRandom(this.min,this.max);break;case"point":default:b.xspeed=0;b.yspeed=0;b.position.x=this.position._x;b.position.y=this.position._y;break}return b},update:function(){if(this.visible){this.currenttime+=this.creationspeed;if(this.currenttime>=this.creationtime){this.currenttime=0;if(this.particles.length<this.maxparticles){this.particles.push(this.initParticle(this.createParticle()))}else{particle=this.searchInvisibleParticle();this.initParticle(particle);this.particles.sort(function(e,d){return e.currtime-d.currtime})}}for(var b=0,a=this.particles.length;b<a;b++){this.particles[b].update()}return this}},draw:function(){if(this.visible){for(var b=0,a=this.particles.length;b<a;b++){this.particles[b].draw()}return this}},searchInvisibleParticle:function(){for(var b=0,a=this.particles.length;b<a;b++){if(this.particles[b].visible==false){return this.particles[b]}}return this},setEmitterPosition:function(a){this.position=a;return this},setName:function(a){this.name=a;return this},setCreationTime:function(a){this.creationtime=a;return this},setMaxParticles:function(a){this.maxparticles=a;return this},setGravity:function(a){this.gravity=a;return this},setParticleSpeed:function(a){this.pspeed=a;return this},setProtation:function(a){this.protation=a;return this},setPLifetime:function(a){this.plifetime=a;return this},activateFadeout:function(){this.pfadeout=true;return this},deactivateFadeout:function(){this.pfadeout=false;return this},getRandom:function(b,a){return Math.random()*(a-b+1)+b>>0},getX:function(){return this.position._x},getY:function(){return this.position._y}});var COMPILED=!0,goog=goog||{};goog.global=this;goog.DEBUG=!1;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.provide=function(e){if(!COMPILED){if(goog.isProvided_(e)){throw Error('Namespace "'+e+'" already declared.')}delete goog.implicitNamespaces_[e];for(var d=e;(d=d.substring(0,d.lastIndexOf(".")))&&!goog.getObjectByName(d);){goog.implicitNamespaces_[d]=!0}}goog.exportPath_(e)};goog.setTestOnly=function(b){if(COMPILED&&!goog.DEBUG){throw b=b||"",Error("Importing test-only code into non-debug environment"+b?": "+b:".")}};COMPILED||(goog.isProvided_=function(b){return !goog.implicitNamespaces_[b]&&!!goog.getObjectByName(b)},goog.implicitNamespaces_={});goog.exportPath_=function(f,d,j){f=f.split(".");j=j||goog.global;f[0] in j||!j.execScript||j.execScript("var "+f[0]);for(var g;f.length&&(g=f.shift());){!f.length&&goog.isDef(d)?j[g]=d:j=j[g]?j[g]:j[g]={}}};goog.getObjectByName=function(g,f){for(var m=g.split("."),j=f||goog.global,k;k=m.shift();){if(goog.isDefAndNotNull(j[k])){j=j[k]}else{return null}}return j};goog.globalize=function(f,d){var j=d||goog.global,g;for(g in f){j[g]=f[g]}};goog.addDependency=function(j,g,q){if(!COMPILED){var m;j=j.replace(/\\/g,"/");for(var n=goog.dependencies_,k=0;m=g[k];k++){n.nameToPath[m]=j,j in n.pathToNames||(n.pathToNames[j]={}),n.pathToNames[j][m]=!0}for(m=0;g=q[m];m++){j in n.requires||(n.requires[j]={}),n.requires[j][g]=!0}}};goog.ENABLE_DEBUG_LOADER=!0;goog.require=function(e){if(!COMPILED&&!goog.isProvided_(e)){if(goog.ENABLE_DEBUG_LOADER){var d=goog.getPathFromDeps_(e);if(d){goog.included_[d]=!0;goog.writeScripts_();return}}e="goog.require could not find: "+e;goog.global.console&&goog.global.console.error(e);throw Error(e)}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(e,d){return e};goog.abstractMethod=function(){throw Error("unimplemented abstract method")};goog.addSingletonGetter=function(b){b.getInstance=function(){if(b.instance_){return b.instance_}goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=b);return b.instance_=new b}};goog.instantiatedSingletons_=[];!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var b=goog.global.document;return"undefined"!=typeof b&&"write" in b},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH){goog.basePath=goog.global.CLOSURE_BASE_PATH}else{if(goog.inHtmlDocument_()){for(var f=goog.global.document.getElementsByTagName("script"),d=f.length-1;0<=d;--d){var j=f[d].src,g=j.lastIndexOf("?"),g=-1==g?j.length:g;if("base.js"==j.substr(g-7,7)){goog.basePath=j.substr(0,g-7);break}}}}},goog.importScript_=function(e){var d=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[e]&&d(e)&&(goog.dependencies_.written[e]=!0)},goog.writeScriptTag_=function(e){if(goog.inHtmlDocument_()){var d=goog.global.document;if("complete"==d.readyState){if(/\bdeps.js$/.test(e)){return !1}throw Error('Cannot write "'+e+'" after document load')}d.write('<script type="text/javascript" src="'+e+'">\x3c/script>');return !0}return !1},goog.writeScripts_=function(){function g(b){if(!(b in j.written)){if(!(b in j.visited)&&(j.visited[b]=!0,b in j.requires)){for(var a in j.requires[b]){if(!goog.isProvided_(a)){if(a in j.nameToPath){g(j.nameToPath[a])}else{throw Error("Undefined nameToPath for "+a)}}}}b in m||(m[b]=!0,f.push(b))}}var f=[],m={},j=goog.dependencies_,k;for(k in goog.included_){j.written[k]||g(k)}for(k=0;k<f.length;k++){if(f[k]){goog.importScript_(goog.basePath+f[k])}else{throw Error("Undefined script input")}}},goog.getPathFromDeps_=function(b){return b in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[b]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));goog.typeOf=function(e){var d=typeof e;if("object"==d){if(e){if(e instanceof Array){return"array"}if(e instanceof Object){return d}var f=Object.prototype.toString.call(e);if("[object Window]"==f){return"object"}if("[object Array]"==f||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice")){return"array"}if("[object Function]"==f||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call")){return"function"}}else{return"null"}}else{if("function"==d&&"undefined"==typeof e.call){return"object"}}return d};goog.isDef=function(b){return void 0!==b};goog.isNull=function(b){return null===b};goog.isDefAndNotNull=function(b){return null!=b};goog.isArray=function(b){return"array"==goog.typeOf(b)};goog.isArrayLike=function(e){var d=goog.typeOf(e);return"array"==d||"object"==d&&"number"==typeof e.length};goog.isDateLike=function(b){return goog.isObject(b)&&"function"==typeof b.getFullYear};goog.isString=function(b){return"string"==typeof b};goog.isBoolean=function(b){return"boolean"==typeof b};goog.isNumber=function(b){return"number"==typeof b};goog.isFunction=function(b){return"function"==goog.typeOf(b)};goog.isObject=function(e){var d=typeof e;return"object"==d&&null!=e||"function"==d};goog.getUid=function(b){return b[goog.UID_PROPERTY_]||(b[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(e){"removeAttribute" in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(d){}};goog.UID_PROPERTY_="closure_uid_"+(1000000000*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(e){var d=goog.typeOf(e);if("object"==d||"array"==d){if(e.clone){return e.clone()}var d="array"==d?[]:{},f;for(f in e){d[f]=goog.cloneObject(e[f])}return d}return e};goog.bindNative_=function(e,d,f){return e.call.apply(e.bind,arguments)};goog.bindJs_=function(f,d,j){if(!f){throw Error()}if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(a,g);return f.apply(d,a)}}return function(){return f.apply(d,arguments)}};goog.bind=function(e,d,f){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};goog.partial=function(e,d){var f=Array.prototype.slice.call(arguments,1);return function(){var a=Array.prototype.slice.call(arguments);a.unshift.apply(a,f);return e.apply(this,a)}};goog.mixin=function(e,d){for(var f in d){e[f]=d[f]}};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return +new Date};goog.globalEval=function(a){if(goog.global.execScript){goog.global.execScript(a,"JavaScript")}else{if(goog.global.eval){if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_){goog.global.eval(a)}else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);b.body.removeChild(c)}}else{throw Error("goog.globalEval not available")}}};goog.evalWorksForGlobals_=null;goog.getCssName=function(f,d){var j=function(b){return goog.cssNameMapping_[b]||b},g=function(m){m=m.split("-");for(var k=[],n=0;n<m.length;n++){k.push(j(m[n]))}return k.join("-")},g=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?j:g:function(b){return b};return d?f+"-"+g(d):g(f)};goog.setCssNameMapping=function(e,d){goog.cssNameMapping_=e;goog.cssNameMappingStyle_=d};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(g,f){var m=f||{},j;for(j in m){var k=(""+m[j]).replace(/\$/g,"$$$$");g=g.replace(RegExp("\\{\\$"+j+"\\}","gi"),k)}return g};goog.getMsgWithFallback=function(e,d){return e};goog.exportSymbol=function(e,d,f){goog.exportPath_(e,d,f)};goog.exportProperty=function(e,d,f){e[d]=f};goog.inherits=function(e,d){function f(){}f.prototype=d.prototype;e.superClass_=d.prototype;e.prototype=new f;e.prototype.constructor=e};goog.base=function(k,j,s){var q=arguments.callee.caller;if(q.superClass_){return q.superClass_.constructor.apply(k,Array.prototype.slice.call(arguments,1))}for(var r=Array.prototype.slice.call(arguments,2),n=!1,m=k.constructor;m;m=m.superClass_&&m.superClass_.constructor){if(m.prototype[j]===q){n=!0}else{if(n){return m.prototype[j].apply(k,r)}}}if(k[j]===q){return k.constructor.prototype[j].apply(k,r)}throw Error("goog.base called from a method of one name to a method of a different name")};goog.scope=function(b){b.call(goog.global)};goog.debug={};goog.debug.Error=function(b){Error.captureStackTrace?Error.captureStackTrace(this,goog.debug.Error):this.stack=Error().stack||"";b&&(this.message=String(b))};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.string={};goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=function(e,d){return 0==e.lastIndexOf(d,0)};goog.string.endsWith=function(e,d){var f=e.length-d.length;return 0<=f&&e.indexOf(d,f)==f};goog.string.caseInsensitiveStartsWith=function(e,d){return 0==goog.string.caseInsensitiveCompare(d,e.substr(0,d.length))};goog.string.caseInsensitiveEndsWith=function(e,d){return 0==goog.string.caseInsensitiveCompare(d,e.substr(e.length-d.length,d.length))};goog.string.subs=function(f,d){for(var j=1;j<arguments.length;j++){var g=String(arguments[j]).replace(/\$/g,"$$$$");f=f.replace(/\%s/,g)}return f};goog.string.collapseWhitespace=function(b){return b.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmpty=function(b){return/^[\s\xa0]*$/.test(b)};goog.string.isEmptySafe=function(b){return goog.string.isEmpty(goog.string.makeSafe(b))};goog.string.isBreakingWhitespace=function(b){return !/[^\t\n\r ]/.test(b)};goog.string.isAlpha=function(b){return !/[^a-zA-Z]/.test(b)};goog.string.isNumeric=function(b){return !/[^0-9]/.test(b)};goog.string.isAlphaNumeric=function(b){return !/[^a-zA-Z0-9]/.test(b)};goog.string.isSpace=function(b){return" "==b};goog.string.isUnicodeChar=function(b){return 1==b.length&&" "<=b&&"~">=b||"\u0080"<=b&&"\ufffd">=b};goog.string.stripNewlines=function(b){return b.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(b){return b.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(b){return b.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(b){return b.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(b){return b.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(b){return b.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(b){return b.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(f,d){var j=String(f).toLowerCase(),g=String(d).toLowerCase();return j<g?-1:j==g?0:1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;goog.string.numerateCompare=function(k,j){if(k==j){return 0}if(!k){return -1}if(!j){return 1}for(var u=k.toLowerCase().match(goog.string.numerateCompareRegExp_),r=j.toLowerCase().match(goog.string.numerateCompareRegExp_),s=Math.min(u.length,r.length),q=0;q<s;q++){var n=u[q],m=r[q];if(n!=m){return u=parseInt(n,10),!isNaN(u)&&(r=parseInt(m,10),!isNaN(r)&&u-r)?u-r:n<m?-1:1}}return u.length!=r.length?u.length-r.length:k<j?-1:1};goog.string.urlEncode=function(b){return encodeURIComponent(String(b))};goog.string.urlDecode=function(b){return decodeURIComponent(b.replace(/\+/g," "))};goog.string.newLineToBr=function(e,d){return e.replace(/(\r\n|\r|\n)/g,d?"<br />":"<br>")};goog.string.htmlEscape=function(e,d){if(d){return e.replace(goog.string.amperRe_,"&amp;").replace(goog.string.ltRe_,"&lt;").replace(goog.string.gtRe_,"&gt;").replace(goog.string.quotRe_,"&quot;")}if(!goog.string.allRe_.test(e)){return e}-1!=e.indexOf("&")&&(e=e.replace(goog.string.amperRe_,"&amp;"));-1!=e.indexOf("<")&&(e=e.replace(goog.string.ltRe_,"&lt;"));-1!=e.indexOf(">")&&(e=e.replace(goog.string.gtRe_,"&gt;"));-1!=e.indexOf('"')&&(e=e.replace(goog.string.quotRe_,"&quot;"));return e};goog.string.amperRe_=/&/g;goog.string.ltRe_=/</g;goog.string.gtRe_=/>/g;goog.string.quotRe_=/\"/g;goog.string.allRe_=/[&<>\"]/;goog.string.unescapeEntities=function(b){return goog.string.contains(b,"&")?"document" in goog.global?goog.string.unescapeEntitiesUsingDom_(b):goog.string.unescapePureXmlEntities_(b):b};goog.string.unescapeEntitiesUsingDom_=function(e){var d={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},f=document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,function(b,m){var k=d[b];if(k){return k}if("#"==m.charAt(0)){var j=Number("0"+m.substr(1));isNaN(j)||(k=String.fromCharCode(j))}k||(f.innerHTML=b+" ",k=f.firstChild.nodeValue.slice(0,-1));return d[b]=k})};goog.string.unescapePureXmlEntities_=function(b){return b.replace(/&([^;]+);/g,function(d,g){switch(g){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==g.charAt(0)){var f=Number("0"+g.substr(1));if(!isNaN(f)){return String.fromCharCode(f)}}return d}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(e,d){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),d)};goog.string.stripQuotes=function(g,f){for(var m=f.length,j=0;j<m;j++){var k=1==m?f:f.charAt(j);if(g.charAt(0)==k&&g.charAt(g.length-1)==k){return g.substring(1,g.length-1)}}return g};goog.string.truncate=function(e,d,f){f&&(e=goog.string.unescapeEntities(e));e.length>d&&(e=e.substring(0,d-3)+"...");f&&(e=goog.string.htmlEscape(e));return e};goog.string.truncateMiddle=function(g,f,m,j){m&&(g=goog.string.unescapeEntities(g));if(j&&g.length>f){j>f&&(j=f);var k=g.length-j;g=g.substring(0,f-j)+"..."+g.substring(k)}else{g.length>f&&(j=Math.floor(f/2),k=g.length-j,g=g.substring(0,j+f%2)+"..."+g.substring(k))}m&&(g=goog.string.htmlEscape(g));return g};goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};goog.string.quote=function(g){g=String(g);if(g.quote){return g.quote()}for(var f=['"'],m=0;m<g.length;m++){var j=g.charAt(m),k=j.charCodeAt(0);f[m+1]=goog.string.specialEscapeChars_[j]||(31<k&&127>k?j:goog.string.escapeChar(j))}f.push('"');return f.join("")};goog.string.escapeString=function(e){for(var d=[],f=0;f<e.length;f++){d[f]=goog.string.escapeChar(e.charAt(f))}return d.join("")};goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_){return goog.string.jsEscapeCache_[e]}if(e in goog.string.specialEscapeChars_){return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e]}var d=e,f=e.charCodeAt(0);if(31<f&&127>f){d=e}else{if(256>f){if(d="\\x",16>f||256<f){d+="0"}}else{d="\\u",4096>f&&(d+="0")}d+=f.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[e]=d};goog.string.toMap=function(e){for(var d={},f=0;f<e.length;f++){d[e.charAt(f)]=!0}return d};goog.string.contains=function(e,d){return -1!=e.indexOf(d)};goog.string.countOf=function(e,d){return e&&d?e.split(d).length-1:0};goog.string.removeAt=function(f,d,j){var g=f;0<=d&&(d<f.length&&0<j)&&(g=f.substr(0,d)+f.substr(d+j,f.length-d-j));return g};goog.string.remove=function(e,d){var f=RegExp(goog.string.regExpEscape(d),"");return e.replace(f,"")};goog.string.removeAll=function(e,d){var f=RegExp(goog.string.regExpEscape(d),"g");return e.replace(f,"")};goog.string.regExpEscape=function(b){return String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(e,d){return Array(d+1).join(e)};goog.string.padNumber=function(e,d,f){e=goog.isDef(f)?e.toFixed(f):String(e);f=e.indexOf(".");-1==f&&(f=e.length);return goog.string.repeat("0",Math.max(0,d-f))+e};goog.string.makeSafe=function(b){return null==b?"":String(b)};goog.string.buildString=function(b){return Array.prototype.join.call(arguments,"")};goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};goog.string.compareVersions=function(G,F){for(var E=0,C=goog.string.trim(String(G)).split("."),D=goog.string.trim(String(F)).split("."),B=Math.max(C.length,D.length),A=0;0==E&&A<B;A++){var z=C[A]||"",v=D[A]||"",y=RegExp("(\\d*)(\\D*)","g"),u=RegExp("(\\d*)(\\D*)","g");do{var s=y.exec(z)||["","",""],r=u.exec(v)||["","",""];if(0==s[0].length&&0==r[0].length){break}var E=0==s[1].length?0:parseInt(s[1],10),j=0==r[1].length?0:parseInt(r[1],10),E=goog.string.compareElements_(E,j)||goog.string.compareElements_(0==s[2].length,0==r[2].length)||goog.string.compareElements_(s[2],r[2])}while(0==E)}return E};goog.string.compareElements_=function(e,d){return e<d?-1:e>d?1:0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(e){for(var d=0,f=0;f<e.length;++f){d=31*d+e.charCodeAt(f),d%=goog.string.HASHCODE_MAX_}return d};goog.string.uniqueStringCounter_=2147483648*Math.random()|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};goog.string.toNumber=function(e){var d=Number(e);return 0==d&&goog.string.isEmpty(e)?NaN:d};goog.string.toCamelCase=function(b){return String(b).replace(/\-([a-z])/g,function(d,e){return e.toUpperCase()})};goog.string.toSelectorCase=function(b){return String(b).replace(/([A-Z])/g,"-$1").toLowerCase()};goog.string.toTitleCase=function(e,d){var f=goog.isString(d)?goog.string.regExpEscape(d):"\\s";return e.replace(RegExp("(^"+(f?"|["+f+"]+":"")+")([a-z])","g"),function(j,g,k){return g+k.toUpperCase()})};goog.string.parseInt=function(b){isFinite(b)&&(b=String(b));return goog.isString(b)?/^\s*-?0x/i.test(b)?parseInt(b,16):parseInt(b,10):NaN};goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(e,d){d.unshift(e);goog.debug.Error.call(this,goog.string.subs.apply(null,d));d.shift();this.messagePattern=e};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.doAssertFailure_=function(j,g,q,m){var n="Assertion failed";if(q){var n=n+(": "+q),k=m}else{j&&(n+=": "+j,k=g)}throw new goog.asserts.AssertionError(""+n,k||[])};goog.asserts.assert=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.fail=function(e,d){if(goog.asserts.ENABLE_ASSERTS){throw new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}};goog.asserts.assertNumber=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertString=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertFunction=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertObject=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertArray=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertBoolean=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertInstanceof=function(f,d,j,g){!goog.asserts.ENABLE_ASSERTS||f instanceof d||goog.asserts.doAssertFailure_("instanceof check failed.",null,j,Array.prototype.slice.call(arguments,3));return f};goog.string.format=function(f,d){var j=Array.prototype.slice.call(arguments),g=j.shift();if("undefined"==typeof g){throw Error("[goog.string.format] Template required")}return g.replace(/%([0\-\ \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(B,A,z,y,u,v,s,r){if("%"==v){return"%"}var q=j.shift();if("undefined"==typeof q){throw Error("[goog.string.format] Not enough arguments")}arguments[0]=q;return goog.string.format.demuxes_[v].apply(null,arguments)})};goog.string.format.demuxes_={};goog.string.format.demuxes_.s=function(k,j,u,r,s,q,n,m){return isNaN(u)||""==u||k.length>=u?k:k=-1<j.indexOf("-",0)?k+goog.string.repeat(" ",u-k.length):goog.string.repeat(" ",u-k.length)+k};goog.string.format.demuxes_.f=function(k,j,u,r,s,q,n,m){r=k.toString();isNaN(s)||""==s||(r=k.toFixed(s));q=0>k?"-":0<=j.indexOf("+")?"+":0<=j.indexOf(" ")?" ":"";0<=k&&(r=q+r);if(isNaN(u)||r.length>=u){return r}r=isNaN(s)?Math.abs(k).toString():Math.abs(k).toFixed(s);k=u-r.length-q.length;0<=j.indexOf("-",0)?r=q+r+goog.string.repeat(" ",k):(j=0<=j.indexOf("0",0)?"0":" ",r=q+goog.string.repeat(j,k)+r);return r};goog.string.format.demuxes_.d=function(k,j,u,r,s,q,n,m){return goog.string.format.demuxes_.f(parseInt(k,10),j,u,r,0,q,n,m)};goog.string.format.demuxes_.i=goog.string.format.demuxes_.d;goog.string.format.demuxes_.u=goog.string.format.demuxes_.d;var box2d={b2Settings:{}};Object.defineProperty||(Object.defineProperty=function(e,d,f){Object.__defineGetter__&&("get" in f?e.__defineGetter__(d,f.get):"value" in f&&e.__defineGetter__(d,f.value));Object.__defineSetter__&&("set" in f?e.__defineSetter__(d,f.set):"value" in f&&e.__defineSetter__(d,f.value))});box2d.DEBUG=!1;goog.exportSymbol("box2d.DEBUG",box2d.DEBUG);box2d.ENABLE_ASSERTS=box2d.DEBUG;goog.exportSymbol("box2d.ENABLE_ASSERTS",box2d.ENABLE_ASSERTS);box2d.b2Assert=function(e,d,f){if(box2d.DEBUG&&!e){}};goog.exportSymbol("box2d.b2Assert",box2d.b2Assert);box2d.b2_maxFloat=1e+37;goog.exportSymbol("box2d.b2_maxFloat",box2d.b2_maxFloat);box2d.b2_epsilon=0.00001;goog.exportSymbol("box2d.b2_epsilon",box2d.b2_epsilon);box2d.b2_epsilon_sq=box2d.b2_epsilon*box2d.b2_epsilon;goog.exportSymbol("box2d.b2_epsilon_sq",box2d.b2_epsilon_sq);box2d.b2_pi=Math.PI;goog.exportSymbol("box2d.b2_pi",box2d.b2_pi);box2d.b2_maxManifoldPoints=2;goog.exportSymbol("box2d.b2_maxManifoldPoints",box2d.b2_maxManifoldPoints);box2d.b2_maxPolygonVertices=8;goog.exportSymbol("box2d.b2_maxPolygonVertices",box2d.b2_maxPolygonVertices);box2d.b2_aabbExtension=0.1;goog.exportSymbol("box2d.b2_aabbExtension",box2d.b2_aabbExtension);box2d.b2_aabbMultiplier=2;goog.exportSymbol("box2d.b2_aabbMultiplier",box2d.b2_aabbMultiplier);box2d.b2_linearSlop=0.008;goog.exportSymbol("box2d.b2_linearSlop",box2d.b2_linearSlop);box2d.b2_angularSlop=2/180*box2d.b2_pi;goog.exportSymbol("box2d.b2_angularSlop",box2d.b2_angularSlop);box2d.b2_polygonRadius=2*box2d.b2_linearSlop;goog.exportSymbol("box2d.b2_polygonRadius",box2d.b2_polygonRadius);box2d.b2_maxSubSteps=8;goog.exportSymbol("box2d.b2_maxSubSteps",box2d.b2_maxSubSteps);box2d.b2_maxTOIContacts=32;goog.exportSymbol("box2d.b2_maxTOIContacts",box2d.b2_maxTOIContacts);box2d.b2_velocityThreshold=1;goog.exportSymbol("box2d.b2_velocityThreshold",box2d.b2_velocityThreshold);box2d.b2_maxLinearCorrection=0.2;goog.exportSymbol("box2d.b2_maxLinearCorrection",box2d.b2_maxLinearCorrection);box2d.b2_maxAngularCorrection=8/180*box2d.b2_pi;goog.exportSymbol("box2d.b2_maxAngularCorrection",box2d.b2_maxAngularCorrection);box2d.b2_maxTranslation=2;goog.exportSymbol("box2d.b2_maxTranslation",box2d.b2_maxTranslation);box2d.b2_maxTranslationSquared=box2d.b2_maxTranslation*box2d.b2_maxTranslation;goog.exportSymbol("box2d.b2_maxTranslationSquared",box2d.b2_maxTranslationSquared);box2d.b2_maxRotation=0.5*box2d.b2_pi;goog.exportSymbol("box2d.b2_maxRotation",box2d.b2_maxRotation);box2d.b2_maxRotationSquared=box2d.b2_maxRotation*box2d.b2_maxRotation;goog.exportSymbol("box2d.b2_maxRotationSquared",box2d.b2_maxRotationSquared);box2d.b2_baumgarte=0.2;goog.exportSymbol("box2d.b2_baumgarte",box2d.b2_baumgarte);box2d.b2_toiBaumgarte=0.75;goog.exportSymbol("box2d.b2_toiBaumgarte",box2d.b2_toiBaumgarte);box2d.b2_timeToSleep=0.5;goog.exportSymbol("box2d.b2_timeToSleep",box2d.b2_timeToSleep);box2d.b2_linearSleepTolerance=0.01;goog.exportSymbol("box2d.b2_linearSleepTolerance",box2d.b2_linearSleepTolerance);box2d.b2_angularSleepTolerance=2/180*box2d.b2_pi;goog.exportSymbol("box2d.b2_angularSleepTolerance",box2d.b2_angularSleepTolerance);box2d.b2Alloc=function(b){return null};goog.exportSymbol("box2d.b2Alloc",box2d.b2Alloc);box2d.b2Free=function(b){};goog.exportSymbol("box2d.b2Free",box2d.b2Free);box2d.b2Log=function(e,d){var f=Array.prototype.slice.call(arguments),f=goog.string.format.apply(null,f.slice(0));goog.global.console.log(f)};goog.exportSymbol("box2d.b2Log",box2d.b2Log);box2d.b2Version=function(e,d,f){this.major=e||0;this.minor=d||0;this.revision=f||0};goog.exportSymbol("box2d.b2Version",box2d.b2Version);box2d.b2Version.prototype.major=0;goog.exportProperty(box2d.b2Version.prototype,"major",box2d.b2Version.prototype.major);box2d.b2Version.prototype.minor=0;goog.exportProperty(box2d.b2Version.prototype,"minor",box2d.b2Version.prototype.minor);box2d.b2Version.prototype.revision=0;goog.exportProperty(box2d.b2Version.prototype,"revision",box2d.b2Version.prototype.revision);box2d.b2Version.prototype.toString=function(){return this.major+"."+this.minor+"."+this.revision};goog.exportProperty(box2d.b2Version.prototype,"toString",box2d.b2Version.prototype.toString);box2d.b2_version=new box2d.b2Version(2,3,0);goog.exportSymbol("box2d.b2_version",box2d.b2_version);box2d.b2_changelist=254;goog.exportSymbol("box2d.b2_changelist",box2d.b2_changelist);box2d.b2ParseInt=function(b){return parseInt(b,10)};goog.exportSymbol("box2d.b2ParseInt",box2d.b2ParseInt);box2d.b2ParseUInt=function(b){return box2d.b2Abs(parseInt(b,10))};goog.exportSymbol("box2d.b2ParseUInt",box2d.b2ParseUInt);box2d.b2MakeArray=function(f,d){void 0===f&&(f=0);var j=Array(f);if(void 0!==d){for(var g=0;g<f;++g){j[g]=d(g)}}return j};goog.exportSymbol("box2d.b2MakeArray",box2d.b2MakeArray);box2d.b2MakeNumberArray=function(b){return box2d.b2MakeArray(b,function(d){return 0})};goog.exportSymbol("box2d.b2MakeNumberArray",box2d.b2MakeNumberArray);box2d.b2Math={};box2d.b2_pi_over_180=box2d.b2_pi/180;goog.exportSymbol("box2d.b2_pi_over_180",box2d.b2_pi_over_180);box2d.b2_180_over_pi=180/box2d.b2_pi;goog.exportSymbol("box2d.b2_180_over_pi",box2d.b2_180_over_pi);box2d.b2_two_pi=2*box2d.b2_pi;goog.exportSymbol("box2d.b2_two_pi",box2d.b2_two_pi);box2d.b2Abs=function(b){return 0>b?-b:b};goog.exportSymbol("box2d.b2Abs",box2d.b2Abs);box2d.b2Min=function(e,d){return e<d?e:d};goog.exportSymbol("box2d.b2Min",box2d.b2Min);box2d.b2Max=function(e,d){return e>d?e:d};goog.exportSymbol("box2d.b2Max",box2d.b2Max);box2d.b2Clamp=function(e,d,f){return e<d?d:e>f?f:e};goog.exportSymbol("box2d.b2Clamp",box2d.b2Clamp);box2d.b2Swap=function(e,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);var f=e[0];e[0]=d[0];d[0]=f};goog.exportSymbol("box2d.b2Swap",box2d.b2Swap);box2d.b2IsValid=function(b){return isFinite(b)};goog.exportSymbol("box2d.b2IsValid",box2d.b2IsValid);box2d.b2Sq=function(b){return b*b};goog.exportSymbol("box2d.b2Sq",box2d.b2Sq);box2d.b2InvSqrt=function(b){return 1/Math.sqrt(b)};goog.exportSymbol("box2d.b2InvSqrt",box2d.b2InvSqrt);box2d.b2Sqrt=function(b){return Math.sqrt(b)};goog.exportSymbol("box2d.b2Sqrt",box2d.b2Sqrt);box2d.b2Pow=function(e,d){return Math.pow(e,d)};goog.exportSymbol("box2d.b2Pow",box2d.b2Pow);box2d.b2DegToRad=function(b){return b*box2d.b2_pi_over_180};goog.exportSymbol("box2d.b2DegToRad",box2d.b2DegToRad);box2d.b2RadToDeg=function(b){return b*box2d.b2_180_over_pi};goog.exportSymbol("box2d.b2RadToDeg",box2d.b2RadToDeg);box2d.b2Cos=function(b){return Math.cos(b)};goog.exportSymbol("box2d.b2Cos",box2d.b2Cos);box2d.b2Sin=function(b){return Math.sin(b)};goog.exportSymbol("box2d.b2Sin",box2d.b2Sin);box2d.b2Acos=function(b){return Math.acos(b)};goog.exportSymbol("box2d.b2Acos",box2d.b2Acos);box2d.b2Asin=function(b){return Math.asin(b)};goog.exportSymbol("box2d.b2Asin",box2d.b2Asin);box2d.b2Atan2=function(e,d){return Math.atan2(e,d)};goog.exportSymbol("box2d.b2Atan2",box2d.b2Atan2);box2d.b2NextPowerOfTwo=function(b){b|=b>>1&2147483647;b|=b>>2&1073741823;b|=b>>4&268435455;b|=b>>8&16777215;return(b|b>>16&65535)+1};goog.exportSymbol("box2d.b2NextPowerOfTwo",box2d.b2NextPowerOfTwo);box2d.b2IsPowerOfTwo=function(b){return 0<b&&0==(b&b-1)};goog.exportSymbol("box2d.b2IsPowerOfTwo",box2d.b2IsPowerOfTwo);box2d.b2Random=function(){return 2*Math.random()-1};goog.exportSymbol("box2d.b2Random",box2d.b2Random);box2d.b2RandomRange=function(e,d){return(d-e)*Math.random()+e};goog.exportSymbol("box2d.b2RandomRange",box2d.b2RandomRange);box2d.b2Vec2=function(e,d){this.x=e||0;this.y=d||0};goog.exportSymbol("box2d.b2Vec2",box2d.b2Vec2);box2d.b2Vec2.prototype.x=0;goog.exportProperty(box2d.b2Vec2.prototype,"x",box2d.b2Vec2.prototype.x);box2d.b2Vec2.prototype.y=0;goog.exportProperty(box2d.b2Vec2.prototype,"y",box2d.b2Vec2.prototype.y);box2d.b2Vec2_zero=new box2d.b2Vec2;goog.exportSymbol("box2d.b2Vec2_zero",box2d.b2Vec2_zero);box2d.b2Vec2.ZERO=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"ZERO",box2d.b2Vec2.ZERO);box2d.b2Vec2.UNITX=new box2d.b2Vec2(1,0);goog.exportProperty(box2d.b2Vec2,"UNITX",box2d.b2Vec2.UNITX);box2d.b2Vec2.UNITY=new box2d.b2Vec2(0,1);goog.exportProperty(box2d.b2Vec2,"UNITY",box2d.b2Vec2.UNITY);box2d.b2Vec2.s_t0=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"s_t0",box2d.b2Vec2.s_t0);box2d.b2Vec2.s_t1=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"s_t1",box2d.b2Vec2.s_t1);box2d.b2Vec2.s_t2=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"s_t2",box2d.b2Vec2.s_t2);box2d.b2Vec2.s_t3=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"s_t3",box2d.b2Vec2.s_t3);box2d.b2Vec2.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2Vec2})};goog.exportProperty(box2d.b2Vec2,"MakeArray",box2d.b2Vec2.MakeArray);box2d.b2Vec2.prototype.Clone=function(){return new box2d.b2Vec2(this.x,this.y)};goog.exportProperty(box2d.b2Vec2.prototype,"Clone",box2d.b2Vec2.prototype.Clone);box2d.b2Vec2.prototype.SetZero=function(){this.y=this.x=0;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SetZero",box2d.b2Vec2.prototype.SetZero);box2d.b2Vec2.prototype.SetXY=function(e,d){this.x=e;this.y=d;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SetXY",box2d.b2Vec2.prototype.SetXY);box2d.b2Vec2.prototype.Copy=function(b){this.x=b.x;this.y=b.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"Copy",box2d.b2Vec2.prototype.Copy);box2d.b2Vec2.prototype.SelfAdd=function(b){this.x+=b.x;this.y+=b.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfAdd",box2d.b2Vec2.prototype.SelfAdd);box2d.b2Vec2.prototype.SelfAddXY=function(e,d){this.x+=e;this.y+=d;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfAddXY",box2d.b2Vec2.prototype.SelfAddXY);box2d.b2Vec2.prototype.SelfSub=function(b){this.x-=b.x;this.y-=b.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfSub",box2d.b2Vec2.prototype.SelfSub);box2d.b2Vec2.prototype.SelfSubXY=function(e,d){this.x-=e;this.y-=d;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfSubXY",box2d.b2Vec2.prototype.SelfSubXY);box2d.b2Vec2.prototype.SelfMul=function(b){this.x*=b;this.y*=b;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMul",box2d.b2Vec2.prototype.SelfMul);box2d.b2Vec2.prototype.SelfMulAdd=function(e,d){this.x+=e*d.x;this.y+=e*d.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMulAdd",box2d.b2Vec2.prototype.SelfMulAdd);box2d.b2Vec2.prototype.SelfMulSub=function(e,d){this.x-=e*d.x;this.y-=e*d.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMulSub",box2d.b2Vec2.prototype.SelfMulSub);box2d.b2Vec2.prototype.Dot=function(b){return this.x*b.x+this.y*b.y};goog.exportProperty(box2d.b2Vec2.prototype,"Dot",box2d.b2Vec2.prototype.Dot);box2d.b2Vec2.prototype.Cross=function(b){return this.x*b.y-this.y*b.x};goog.exportProperty(box2d.b2Vec2.prototype,"Cross",box2d.b2Vec2.prototype.Cross);box2d.b2Vec2.prototype.GetLength=function(){var e=this.x,d=this.y;return Math.sqrt(e*e+d*d)};goog.exportProperty(box2d.b2Vec2.prototype,"GetLength",box2d.b2Vec2.prototype.GetLength);box2d.b2Vec2.prototype.GetLengthSquared=function(){var e=this.x,d=this.y;return e*e+d*d};goog.exportProperty(box2d.b2Vec2.prototype,"GetLengthSquared",box2d.b2Vec2.prototype.GetLengthSquared);box2d.b2Vec2.prototype.Normalize=function(){var e=this.GetLength();if(e>=box2d.b2_epsilon){var d=1/e;this.x*=d;this.y*=d}return e};goog.exportProperty(box2d.b2Vec2.prototype,"Normalize",box2d.b2Vec2.prototype.Normalize);box2d.b2Vec2.prototype.SelfNormalize=function(){var b=this.GetLength();b>=box2d.b2_epsilon&&(b=1/b,this.x*=b,this.y*=b);return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfNormalize",box2d.b2Vec2.prototype.SelfNormalize);box2d.b2Vec2.prototype.SelfRotate=function(f,d){var j=this.x,g=this.y;this.x=f*j-d*g;this.y=d*j+f*g;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfRotate",box2d.b2Vec2.prototype.SelfRotate);box2d.b2Vec2.prototype.SelfRotateRadians=function(b){return this.SelfRotate(Math.cos(b),Math.sin(b))};goog.exportProperty(box2d.b2Vec2.prototype,"SelfRotateRadians",box2d.b2Vec2.prototype.SelfRotateRadians);box2d.b2Vec2.prototype.SelfRotateDegrees=function(b){return this.SelfRotateRadians(box2d.b2DegToRad(b))};goog.exportProperty(box2d.b2Vec2.prototype,"SelfRotateDegrees",box2d.b2Vec2.prototype.SelfRotateDegrees);box2d.b2Vec2.prototype.IsValid=function(){return isFinite(this.x)&&isFinite(this.y)};goog.exportProperty(box2d.b2Vec2.prototype,"IsValid",box2d.b2Vec2.prototype.IsValid);box2d.b2Vec2.prototype.SelfCrossVS=function(e){var d=this.x;this.x=e*this.y;this.y=-e*d;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfCrossVS",box2d.b2Vec2.prototype.SelfCrossVS);box2d.b2Vec2.prototype.SelfCrossSV=function(e){var d=this.x;this.x=-e*this.y;this.y=e*d;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfCrossSV",box2d.b2Vec2.prototype.SelfCrossSV);box2d.b2Vec2.prototype.SelfMinV=function(b){this.x=box2d.b2Min(this.x,b.x);this.y=box2d.b2Min(this.y,b.y);return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMinV",box2d.b2Vec2.prototype.SelfMinV);box2d.b2Vec2.prototype.SelfMaxV=function(b){this.x=box2d.b2Max(this.x,b.x);this.y=box2d.b2Max(this.y,b.y);return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMaxV",box2d.b2Vec2.prototype.SelfMaxV);box2d.b2Vec2.prototype.SelfAbs=function(){this.x=box2d.b2Abs(this.x);this.y=box2d.b2Abs(this.y);return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfAbs",box2d.b2Vec2.prototype.SelfAbs);box2d.b2Vec2.prototype.SelfNeg=function(){this.x=-this.x;this.y=-this.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfNeg",box2d.b2Vec2.prototype.SelfNeg);box2d.b2Vec2.prototype.SelfSkew=function(){var b=this.x;this.x=-this.y;this.y=b;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfSkew",box2d.b2Vec2.prototype.SelfSkew);box2d.b2AbsV=function(e,d){d.x=box2d.b2Abs(e.x);d.y=box2d.b2Abs(e.y);return d};goog.exportSymbol("box2d.b2AbsV",box2d.b2AbsV);box2d.b2MinV=function(e,d,f){f.x=box2d.b2Min(e.x,d.x);f.y=box2d.b2Min(e.y,d.y);return f};goog.exportSymbol("box2d.b2MinV",box2d.b2MinV);box2d.b2MaxV=function(e,d,f){f.x=box2d.b2Max(e.x,d.x);f.y=box2d.b2Max(e.y,d.y);return f};goog.exportSymbol("box2d.b2MaxV",box2d.b2MaxV);box2d.b2ClampV=function(f,d,j,g){g.x=box2d.b2Clamp(f.x,d.x,j.x);g.y=box2d.b2Clamp(f.y,d.y,j.y);return g};goog.exportSymbol("box2d.b2ClampV",box2d.b2ClampV);box2d.b2RotateV=function(g,f,m,j){var k=g.x;g=g.y;j.x=f*k-m*g;j.y=m*k+f*g;return j};goog.exportSymbol("box2d.b2RotateV",box2d.b2RotateV);box2d.b2RotateRadiansV=function(e,d,f){return box2d.b2RotateV(e,Math.cos(d),Math.sin(d),f)};goog.exportSymbol("box2d.b2RotateRadiansV",box2d.b2RotateRadiansV);box2d.b2RotateDegreesV=function(e,d,f){return box2d.b2RotateRadiansV(e,box2d.b2DegToRad(d),f)};goog.exportSymbol("box2d.b2RotateDegreesV",box2d.b2RotateDegreesV);box2d.b2DotVV=function(e,d){return e.x*d.x+e.y*d.y};goog.exportSymbol("box2d.b2DotVV",box2d.b2DotVV);box2d.b2CrossVV=function(e,d){return e.x*d.y-e.y*d.x};goog.exportSymbol("box2d.b2CrossVV",box2d.b2CrossVV);box2d.b2CrossVS=function(f,d,j){var g=f.x;j.x=d*f.y;j.y=-d*g;return j};goog.exportSymbol("box2d.b2CrossVS",box2d.b2CrossVS);box2d.b2CrossVOne=function(e,d){var f=e.x;d.x=e.y;d.y=-f;return d};goog.exportSymbol("box2d.b2CrossVOne",box2d.b2CrossVOne);box2d.b2CrossSV=function(f,d,j){var g=d.x;j.x=-f*d.y;j.y=f*g;return j};goog.exportSymbol("box2d.b2CrossSV",box2d.b2CrossSV);box2d.b2CrossOneV=function(e,d){var f=e.x;d.x=-e.y;d.y=f;return d};goog.exportSymbol("box2d.b2CrossOneV",box2d.b2CrossOneV);box2d.b2AddVV=function(e,d,f){f.x=e.x+d.x;f.y=e.y+d.y;return f};goog.exportSymbol("box2d.b2AddVV",box2d.b2AddVV);box2d.b2SubVV=function(e,d,f){f.x=e.x-d.x;f.y=e.y-d.y;return f};goog.exportSymbol("box2d.b2SubVV",box2d.b2SubVV);box2d.b2MulSV=function(e,d,f){f.x=d.x*e;f.y=d.y*e;return f};goog.exportSymbol("box2d.b2MulSV",box2d.b2MulSV);box2d.b2AddVMulSV=function(f,d,j,g){g.x=f.x+d*j.x;g.y=f.y+d*j.y;return g};goog.exportSymbol("box2d.b2AddVMulSV",box2d.b2AddVMulSV);box2d.b2SubVMulSV=function(f,d,j,g){g.x=f.x-d*j.x;g.y=f.y-d*j.y;return g};goog.exportSymbol("box2d.b2SubVMulSV",box2d.b2SubVMulSV);box2d.b2AddVCrossSV=function(g,f,m,j){var k=m.x;j.x=g.x-f*m.y;j.y=g.y+f*k;return j};goog.exportSymbol("box2d.b2AddVCrossSV",box2d.b2AddVCrossSV);box2d.b2MidVV=function(e,d,f){f.x=0.5*(e.x+d.x);f.y=0.5*(e.y+d.y);return f};goog.exportSymbol("box2d.b2MidVV",box2d.b2MidVV);box2d.b2ExtVV=function(e,d,f){f.x=0.5*(d.x-e.x);f.y=0.5*(d.y-e.y);return f};goog.exportSymbol("box2d.b2ExtVV",box2d.b2ExtVV);box2d.b2IsEqualToV=function(e,d){return e.x==d.x&&e.y==d.y};goog.exportSymbol("box2d.b2IsEqualToV",box2d.b2IsEqualToV);box2d.b2DistanceVV=function(f,d){var j=f.x-d.x,g=f.y-d.y;return Math.sqrt(j*j+g*g)};goog.exportSymbol("box2d.b2DistanceVV",box2d.b2DistanceVV);box2d.b2DistanceSquaredVV=function(f,d){var j=f.x-d.x,g=f.y-d.y;return j*j+g*g};goog.exportSymbol("box2d.b2DistanceSquaredVV",box2d.b2DistanceSquaredVV);box2d.b2NegV=function(e,d){d.x=-e.x;d.y=-e.y;return d};goog.exportSymbol("box2d.b2NegV",box2d.b2NegV);box2d.b2Vec3=function(e,d,f){this.x=e||0;this.y=d||0;this.z=f||0};goog.exportSymbol("box2d.b2Vec3",box2d.b2Vec3);box2d.b2Vec3.prototype.x=0;goog.exportProperty(box2d.b2Vec3.prototype,"x",box2d.b2Vec3.prototype.x);box2d.b2Vec3.prototype.y=0;goog.exportProperty(box2d.b2Vec3.prototype,"y",box2d.b2Vec3.prototype.y);box2d.b2Vec3.prototype.z=0;goog.exportProperty(box2d.b2Vec3.prototype,"z",box2d.b2Vec3.prototype.z);box2d.b2Vec3.ZERO=new box2d.b2Vec3;goog.exportProperty(box2d.b2Vec3,"ZERO",box2d.b2Vec3.ZERO);box2d.b2Vec3.s_t0=new box2d.b2Vec3;goog.exportProperty(box2d.b2Vec3,"s_t0",box2d.b2Vec3.s_t0);box2d.b2Vec3.prototype.Clone=function(){return new box2d.b2Vec3(this.x,this.y,this.z)};goog.exportProperty(box2d.b2Vec3.prototype,"Clone",box2d.b2Vec3.prototype.Clone);box2d.b2Vec3.prototype.SetZero=function(){this.z=this.y=this.x=0;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SetZero",box2d.b2Vec3.prototype.SetZero);box2d.b2Vec3.prototype.SetXYZ=function(e,d,f){this.x=e;this.y=d;this.z=f;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SetXYZ",box2d.b2Vec3.prototype.SetXYZ);box2d.b2Vec3.prototype.Copy=function(b){this.x=b.x;this.y=b.y;this.z=b.z;return this};goog.exportProperty(box2d.b2Vec3.prototype,"Copy",box2d.b2Vec3.prototype.Copy);box2d.b2Vec3.prototype.SelfNeg=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfNeg",box2d.b2Vec3.prototype.SelfNeg);box2d.b2Vec3.prototype.SelfAdd=function(b){this.x+=b.x;this.y+=b.y;this.z+=b.z;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfAdd",box2d.b2Vec3.prototype.SelfAdd);box2d.b2Vec3.prototype.SelfAddXYZ=function(e,d,f){this.x+=e;this.y+=d;this.z+=f;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfAddXYZ",box2d.b2Vec3.prototype.SelfAddXYZ);box2d.b2Vec3.prototype.SelfSub=function(b){this.x-=b.x;this.y-=b.y;this.z-=b.z;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfSub",box2d.b2Vec3.prototype.SelfSub);box2d.b2Vec3.prototype.SelfSubXYZ=function(e,d,f){this.x-=e;this.y-=d;this.z-=f;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfSubXYZ",box2d.b2Vec3.prototype.SelfSubXYZ);box2d.b2Vec3.prototype.SelfMul=function(b){this.x*=b;this.y*=b;this.z*=b;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfMul",box2d.b2Vec3.prototype.SelfMul);box2d.b2DotV3V3=function(e,d){return e.x*d.x+e.y*d.y+e.z*d.z};goog.exportSymbol("box2d.b2DotV3V3",box2d.b2DotV3V3);box2d.b2CrossV3V3=function(k,j,s){var q=k.x,r=k.y;k=k.z;var n=j.x,m=j.y;j=j.z;s.x=r*j-k*m;s.y=k*n-q*j;s.z=q*m-r*n;return s};goog.exportSymbol("box2d.b2CrossV3V3",box2d.b2CrossV3V3);box2d.b2Mat22=function(){this.ex=new box2d.b2Vec2(1,0);this.ey=new box2d.b2Vec2(0,1)};goog.exportSymbol("box2d.b2Mat22",box2d.b2Mat22);box2d.b2Mat22.prototype.ex=null;goog.exportProperty(box2d.b2Mat22.prototype,"ex",box2d.b2Mat22.prototype.ex);box2d.b2Mat22.prototype.ey=null;goog.exportProperty(box2d.b2Mat22.prototype,"ey",box2d.b2Mat22.prototype.ey);box2d.b2Mat22.IDENTITY=new box2d.b2Mat22;goog.exportProperty(box2d.b2Mat22,"IDENTITY",box2d.b2Mat22.IDENTITY);box2d.b2Mat22.prototype.Clone=function(){return(new box2d.b2Mat22).Copy(this)};goog.exportProperty(box2d.b2Mat22.prototype,"Clone",box2d.b2Mat22.prototype.Clone);box2d.b2Mat22.FromVV=function(e,d){return(new box2d.b2Mat22).SetVV(e,d)};goog.exportProperty(box2d.b2Mat22,"FromVV",box2d.b2Mat22.FromVV);box2d.b2Mat22.FromSSSS=function(f,d,j,g){return(new box2d.b2Mat22).SetSSSS(f,d,j,g)};goog.exportProperty(box2d.b2Mat22,"FromSSSS",box2d.b2Mat22.FromSSSS);box2d.b2Mat22.FromAngleRadians=function(b){return(new box2d.b2Mat22).SetAngleRadians(b)};goog.exportProperty(box2d.b2Mat22,"FromAngleRadians",box2d.b2Mat22.FromAngleRadians);box2d.b2Mat22.prototype.SetSSSS=function(f,d,j,g){this.ex.SetXY(f,j);this.ey.SetXY(d,g);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SetSSSS",box2d.b2Mat22.prototype.SetSSSS);box2d.b2Mat22.prototype.SetVV=function(e,d){this.ex.Copy(e);this.ey.Copy(d);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SetVV",box2d.b2Mat22.prototype.SetVV);box2d.b2Mat22.prototype.SetAngle=function(e){var d=Math.cos(e);e=Math.sin(e);this.ex.SetXY(d,e);this.ey.SetXY(-e,d);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SetAngle",box2d.b2Mat22.prototype.SetAngle);box2d.b2Mat22.prototype.SetAngleRadians=box2d.b2Mat22.prototype.SetAngle;box2d.b2Mat22.prototype.SetAngleDegrees=function(b){return this.SetAngle(box2d.b2DegToRad(b))};box2d.b2Mat22.prototype.Copy=function(b){this.ex.Copy(b.ex);this.ey.Copy(b.ey);return this};goog.exportProperty(box2d.b2Mat22.prototype,"Copy",box2d.b2Mat22.prototype.Copy);box2d.b2Mat22.prototype.SetIdentity=function(){this.ex.SetXY(1,0);this.ey.SetXY(0,1);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SetIdentity",box2d.b2Mat22.prototype.SetIdentity);box2d.b2Mat22.prototype.SetZero=function(){this.ex.SetZero();this.ey.SetZero();return this};goog.exportProperty(box2d.b2Mat22.prototype,"SetZero",box2d.b2Mat22.prototype.SetZero);box2d.b2Mat22.prototype.GetAngle=function(){return Math.atan2(this.ex.y,this.ex.x)};goog.exportProperty(box2d.b2Mat22.prototype,"GetAngle",box2d.b2Mat22.prototype.GetAngle);box2d.b2Mat22.prototype.GetAngleRadians=box2d.b2Mat22.prototype.GetAngle;box2d.b2Mat22.prototype.GetInverse=function(j){var g=this.ex.x,q=this.ey.x,m=this.ex.y,n=this.ey.y,k=g*n-q*m;0!=k&&(k=1/k);j.ex.x=k*n;j.ey.x=-k*q;j.ex.y=-k*m;j.ey.y=k*g;return j};goog.exportProperty(box2d.b2Mat22.prototype,"GetInverse",box2d.b2Mat22.prototype.GetInverse);box2d.b2Mat22.prototype.Solve=function(k,j,u){var r=this.ex.x,s=this.ey.x,q=this.ex.y,n=this.ey.y,m=r*n-s*q;0!=m&&(m=1/m);u.x=m*(n*k-s*j);u.y=m*(r*j-q*k);return u};goog.exportProperty(box2d.b2Mat22.prototype,"Solve",box2d.b2Mat22.prototype.Solve);box2d.b2Mat22.prototype.SelfAbs=function(){this.ex.SelfAbs();this.ey.SelfAbs();return this};goog.exportProperty(box2d.b2Mat22.prototype,"SelfAbs",box2d.b2Mat22.prototype.SelfAbs);box2d.b2Mat22.prototype.SelfInv=function(){return this.GetInverse(this)};goog.exportProperty(box2d.b2Mat22.prototype,"SelfInv",box2d.b2Mat22.prototype.SelfInv);box2d.b2Mat22.prototype.SelfAddM=function(b){this.ex.SelfAdd(b.ex);this.ey.SelfAdd(b.ey);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SelfAddM",box2d.b2Mat22.prototype.SelfAddM);box2d.b2Mat22.prototype.SelfSubM=function(b){this.ex.SelfSub(b.ex);this.ey.SelfSub(b.ey);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SelfSubM",box2d.b2Mat22.prototype.SelfSubM);box2d.b2AbsM=function(f,d){var j=f.ex,g=f.ey;d.ex.x=box2d.b2Abs(j.x);d.ex.y=box2d.b2Abs(j.y);d.ey.x=box2d.b2Abs(g.x);d.ey.y=box2d.b2Abs(g.y);return d};goog.exportSymbol("box2d.b2AbsM",box2d.b2AbsM);box2d.b2MulMV=function(g,f,m){var j=g.ex;g=g.ey;var k=f.x;f=f.y;m.x=j.x*k+g.x*f;m.y=j.y*k+g.y*f;return m};goog.exportSymbol("box2d.b2MulMV",box2d.b2MulMV);box2d.b2MulTMV=function(g,f,m){var j=g.ex;g=g.ey;var k=f.x;f=f.y;m.x=j.x*k+j.y*f;m.y=g.x*k+g.y*f;return m};goog.exportSymbol("box2d.b2MulTMV",box2d.b2MulTMV);box2d.b2AddMM=function(g,f,m){var j=g.ex;g=g.ey;var k=f.ex;f=f.ey;m.ex.x=j.x+k.x;m.ex.y=j.y+k.y;m.ey.x=g.x+f.x;m.ey.y=g.y+f.y;return m};goog.exportSymbol("box2d.b2AddMM",box2d.b2AddMM);box2d.b2MulMM=function(v,u,s){var q=v.ex.x,r=v.ex.y,n=v.ey.x;v=v.ey.y;var m=u.ex.x,k=u.ex.y,j=u.ey.x;u=u.ey.y;s.ex.x=q*m+n*k;s.ex.y=r*m+v*k;s.ey.x=q*j+n*u;s.ey.y=r*j+v*u;return s};goog.exportSymbol("box2d.b2MulMM",box2d.b2MulMM);box2d.b2MulTMM=function(v,u,s){var q=v.ex.x,r=v.ex.y,n=v.ey.x;v=v.ey.y;var m=u.ex.x,k=u.ex.y,j=u.ey.x;u=u.ey.y;s.ex.x=q*m+r*k;s.ex.y=n*m+v*k;s.ey.x=q*j+r*u;s.ey.y=n*j+v*u;return s};goog.exportSymbol("box2d.b2MulTMM",box2d.b2MulTMM);box2d.b2Mat33=function(){this.ex=new box2d.b2Vec3(1,0,0);this.ey=new box2d.b2Vec3(0,1,0);this.ez=new box2d.b2Vec3(0,0,1)};goog.exportSymbol("box2d.b2Mat33",box2d.b2Mat33);box2d.b2Mat33.prototype.ex=null;goog.exportProperty(box2d.b2Mat33.prototype,"ex",box2d.b2Mat33.prototype.ex);box2d.b2Mat33.prototype.ey=null;goog.exportProperty(box2d.b2Mat33.prototype,"ey",box2d.b2Mat33.prototype.ey);box2d.b2Mat33.prototype.ez=null;goog.exportProperty(box2d.b2Mat33.prototype,"ez",box2d.b2Mat33.prototype.ez);box2d.b2Mat33.IDENTITY=new box2d.b2Mat33;goog.exportProperty(box2d.b2Mat33,"IDENTITY",box2d.b2Mat33.IDENTITY);box2d.b2Mat33.prototype.Clone=function(){return(new box2d.b2Mat33).Copy(this)};goog.exportProperty(box2d.b2Mat33.prototype,"Clone",box2d.b2Mat33.prototype.Clone);box2d.b2Mat33.prototype.SetVVV=function(e,d,f){this.ex.Copy(e);this.ey.Copy(d);this.ez.Copy(f);return this};goog.exportProperty(box2d.b2Mat33.prototype,"SetVVV",box2d.b2Mat33.prototype.SetVVV);box2d.b2Mat33.prototype.Copy=function(b){this.ex.Copy(b.ex);this.ey.Copy(b.ey);this.ez.Copy(b.ez);return this};goog.exportProperty(box2d.b2Mat33.prototype,"Copy",box2d.b2Mat33.prototype.Copy);box2d.b2Mat33.prototype.SetIdentity=function(){this.ex.SetXYZ(1,0,0);this.ey.SetXYZ(0,1,0);this.ez.SetXYZ(0,0,1);return this};goog.exportProperty(box2d.b2Mat33.prototype,"SetIdentity",box2d.b2Mat33.prototype.SetIdentity);box2d.b2Mat33.prototype.SetZero=function(){this.ex.SetZero();this.ey.SetZero();this.ez.SetZero();return this};goog.exportProperty(box2d.b2Mat33.prototype,"SetZero",box2d.b2Mat33.prototype.SetZero);box2d.b2Mat33.prototype.SelfAddM=function(b){this.ex.SelfAdd(b.ex);this.ey.SelfAdd(b.ey);this.ez.SelfAdd(b.ez);return this};goog.exportProperty(box2d.b2Mat33.prototype,"SelfAddM",box2d.b2Mat33.prototype.SelfAddM);box2d.b2Mat33.prototype.Solve33=function(G,F,E,C){var D=this.ex.x,B=this.ex.y,A=this.ex.z,z=this.ey.x,v=this.ey.y,y=this.ey.z,u=this.ez.x,s=this.ez.y,r=this.ez.z,j=D*(v*r-y*s)+B*(y*u-z*r)+A*(z*s-v*u);0!=j&&(j=1/j);C.x=j*(G*(v*r-y*s)+F*(y*u-z*r)+E*(z*s-v*u));C.y=j*(D*(F*r-E*s)+B*(E*u-G*r)+A*(G*s-F*u));C.z=j*(D*(v*E-y*F)+B*(y*G-z*E)+A*(z*F-v*G));return C};goog.exportProperty(box2d.b2Mat33.prototype,"Solve33",box2d.b2Mat33.prototype.Solve33);box2d.b2Mat33.prototype.Solve22=function(k,j,u){var r=this.ex.x,s=this.ey.x,q=this.ex.y,n=this.ey.y,m=r*n-s*q;0!=m&&(m=1/m);u.x=m*(n*k-s*j);u.y=m*(r*j-q*k);return u};goog.exportProperty(box2d.b2Mat33.prototype,"Solve22",box2d.b2Mat33.prototype.Solve22);box2d.b2Mat33.prototype.GetInverse22=function(j){var g=this.ex.x,q=this.ey.x,m=this.ex.y,n=this.ey.y,k=g*n-q*m;0!=k&&(k=1/k);j.ex.x=k*n;j.ey.x=-k*q;j.ex.z=0;j.ex.y=-k*m;j.ey.y=k*g;j.ey.z=0;j.ez.x=0;j.ez.y=0;j.ez.z=0};goog.exportProperty(box2d.b2Mat33.prototype,"GetInverse22",box2d.b2Mat33.prototype.GetInverse22);box2d.b2Mat33.prototype.GetSymInverse33=function(k){var j=box2d.b2DotV3V3(this.ex,box2d.b2CrossV3V3(this.ey,this.ez,box2d.b2Vec3.s_t0));0!=j&&(j=1/j);var u=this.ex.x,r=this.ey.x,s=this.ez.x,q=this.ey.y,n=this.ez.y,m=this.ez.z;k.ex.x=j*(q*m-n*n);k.ex.y=j*(s*n-r*m);k.ex.z=j*(r*n-s*q);k.ey.x=k.ex.y;k.ey.y=j*(u*m-s*s);k.ey.z=j*(s*r-u*n);k.ez.x=k.ex.z;k.ez.y=k.ey.z;k.ez.z=j*(u*q-r*r)};goog.exportProperty(box2d.b2Mat33.prototype,"GetSymInverse33",box2d.b2Mat33.prototype.GetSymInverse33);box2d.b2MulM33V3=function(g,f,m){var j=f.x,k=f.y;f=f.z;m.x=g.ex.x*j+g.ey.x*k+g.ez.x*f;m.y=g.ex.y*j+g.ey.y*k+g.ez.y*f;m.z=g.ex.z*j+g.ey.z*k+g.ez.z*f;return m};goog.exportSymbol("box2d.b2MulM33V3",box2d.b2MulM33V3);box2d.b2MulM33XYZ=function(g,f,m,j,k){k.x=g.ex.x*f+g.ey.x*m+g.ez.x*j;k.y=g.ex.y*f+g.ey.y*m+g.ez.y*j;k.z=g.ex.z*f+g.ey.z*m+g.ez.z*j;return k};goog.exportSymbol("box2d.b2MulM33XYZ",box2d.b2MulM33XYZ);box2d.b2MulM33V2=function(f,d,j){var g=d.x;d=d.y;j.x=f.ex.x*g+f.ey.x*d;j.y=f.ex.y*g+f.ey.y*d;return j};goog.exportSymbol("box2d.b2MulM33V2",box2d.b2MulM33V2);box2d.b2MulM33XY=function(f,d,j,g){g.x=f.ex.x*d+f.ey.x*j;g.y=f.ex.y*d+f.ey.y*j;return g};goog.exportSymbol("box2d.b2MulM33XY",box2d.b2MulM33XY);box2d.b2Rot=function(b){b&&(this.angle=b,this.s=Math.sin(b),this.c=Math.cos(b))};goog.exportSymbol("box2d.b2Rot",box2d.b2Rot);box2d.b2Rot.prototype.angle=0;goog.exportProperty(box2d.b2Rot.prototype,"angle",box2d.b2Rot.prototype.angle);box2d.b2Rot.prototype.s=0;goog.exportProperty(box2d.b2Rot.prototype,"s",box2d.b2Rot.prototype.s);box2d.b2Rot.prototype.c=1;goog.exportProperty(box2d.b2Rot.prototype,"c",box2d.b2Rot.prototype.c);box2d.b2Rot.IDENTITY=new box2d.b2Rot;goog.exportProperty(box2d.b2Rot,"IDENTITY",box2d.b2Rot.IDENTITY);box2d.b2Rot.prototype.Clone=function(){return(new box2d.b2Rot).Copy(this)};goog.exportProperty(box2d.b2Rot.prototype,"Clone",box2d.b2Rot.prototype.Clone);box2d.b2Rot.prototype.Copy=function(b){this.angle=b.angle;this.s=b.s;this.c=b.c;return this};goog.exportProperty(box2d.b2Rot.prototype,"Copy",box2d.b2Rot.prototype.Copy);box2d.b2Rot.prototype.SetAngle=function(b){this.angle!=b&&(this.angle=b,this.s=Math.sin(b),this.c=Math.cos(b));return this};goog.exportProperty(box2d.b2Rot.prototype,"SetAngle",box2d.b2Rot.prototype.SetAngle);box2d.b2Rot.prototype.SetAngleRadians=box2d.b2Rot.prototype.SetAngle;box2d.b2Rot.prototype.SetAngleDegrees=function(b){return this.SetAngle(box2d.b2DegToRad(b))};box2d.b2Rot.prototype.SetIdentity=function(){this.s=this.angle=0;this.c=1;return this};goog.exportProperty(box2d.b2Rot.prototype,"SetIdentity",box2d.b2Rot.prototype.SetIdentity);box2d.b2Rot.prototype.GetAngle=function(){return this.angle};goog.exportProperty(box2d.b2Rot.prototype,"GetAngle",box2d.b2Rot.prototype.GetAngle);box2d.b2Rot.prototype.GetAngleRadians=box2d.b2Rot.prototype.GetAngle;box2d.b2Rot.prototype.GetAngleDegrees=function(){return box2d.b2RadToDeg(this.GetAngle())};box2d.b2Rot.prototype.GetXAxis=function(b){b.x=this.c;b.y=this.s;return b};goog.exportProperty(box2d.b2Rot.prototype,"GetXAxis",box2d.b2Rot.prototype.GetXAxis);box2d.b2Rot.prototype.GetYAxis=function(b){b.x=-this.s;b.y=this.c;return b};goog.exportProperty(box2d.b2Rot.prototype,"GetYAxis",box2d.b2Rot.prototype.GetYAxis);box2d.b2MulRR=function(g,f,m){var j=g.c;g=g.s;var k=f.c;f=f.s;m.s=g*k+j*f;m.c=j*k-g*f;return m};goog.exportSymbol("box2d.b2MulRR",box2d.b2MulRR);box2d.b2MulTRR=function(g,f,m){var j=g.c;g=g.s;var k=f.c;f=f.s;m.s=j*f-g*k;m.c=j*k+g*f;return m};goog.exportSymbol("box2d.b2MulTRR",box2d.b2MulTRR);box2d.b2MulRV=function(g,f,m){var j=g.c;g=g.s;var k=f.x;f=f.y;m.x=j*k-g*f;m.y=g*k+j*f;return m};goog.exportSymbol("box2d.b2MulRV",box2d.b2MulRV);box2d.b2MulTRV=function(g,f,m){var j=g.c;g=g.s;var k=f.x;f=f.y;m.x=j*k+g*f;m.y=-g*k+j*f;return m};goog.exportSymbol("box2d.b2MulTRV",box2d.b2MulTRV);box2d.b2Transform=function(){this.p=new box2d.b2Vec2;this.q=new box2d.b2Rot};goog.exportSymbol("box2d.b2Transform",box2d.b2Transform);box2d.b2Transform.prototype.p=null;goog.exportProperty(box2d.b2Transform.prototype,"p",box2d.b2Transform.prototype.p);box2d.b2Transform.prototype.q=null;goog.exportProperty(box2d.b2Transform.prototype,"q",box2d.b2Transform.prototype.q);box2d.b2Transform.IDENTITY=new box2d.b2Transform;goog.exportProperty(box2d.b2Transform,"IDENTITY",box2d.b2Transform.IDENTITY);box2d.b2Transform.prototype.Clone=function(){return(new box2d.b2Transform).Copy(this)};goog.exportProperty(box2d.b2Transform.prototype,"Clone",box2d.b2Transform.prototype.Clone);box2d.b2Transform.prototype.Copy=function(b){this.p.Copy(b.p);this.q.Copy(b.q);return this};goog.exportProperty(box2d.b2Transform.prototype,"Copy",box2d.b2Transform.prototype.Copy);box2d.b2Transform.prototype.SetIdentity=function(){this.p.SetZero();this.q.SetIdentity();return this};goog.exportProperty(box2d.b2Transform.prototype,"SetIdentity",box2d.b2Transform.prototype.SetIdentity);box2d.b2Transform.prototype.SetPositionRotation=function(e,d){this.p.Copy(e);this.q.Copy(d);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetPositionRotation",box2d.b2Transform.prototype.SetPositionRotation);box2d.b2Transform.prototype.SetPositionAngleRadians=function(e,d){this.p.Copy(e);this.q.SetAngleRadians(d);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetPositionAngleRadians",box2d.b2Transform.prototype.SetPositionAngleRadians);box2d.b2Transform.prototype.SetPosition=function(b){this.p.Copy(b);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetPosition",box2d.b2Transform.prototype.SetPosition);box2d.b2Transform.prototype.SetPositionXY=function(e,d){this.p.SetXY(e,d);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetPositionXY",box2d.b2Transform.prototype.SetPositionXY);box2d.b2Transform.prototype.SetRotation=function(b){this.q.Copy(b);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetRotation",box2d.b2Transform.prototype.SetRotation);box2d.b2Transform.prototype.SetRotationAngleRadians=function(b){this.q.SetAngleRadians(b);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetRotationAngleRadians",box2d.b2Transform.prototype.SetRotationAngleRadians);box2d.b2Transform.prototype.GetPosition=function(){return this.p};goog.exportProperty(box2d.b2Transform.prototype,"GetPosition",box2d.b2Transform.prototype.GetPosition);box2d.b2Transform.prototype.GetRotation=function(){return this.q};goog.exportProperty(box2d.b2Transform.prototype,"GetRotation",box2d.b2Transform.prototype.GetRotation);box2d.b2Transform.prototype.GetRotationAngle=function(){return this.q.GetAngle()};goog.exportProperty(box2d.b2Transform.prototype,"GetRotationAngle",box2d.b2Transform.prototype.GetRotationAngle);box2d.b2Transform.prototype.GetRotationAngleRadians=box2d.b2Transform.prototype.GetRotationAngle;box2d.b2Transform.prototype.GetAngle=function(){return this.q.GetAngle()};goog.exportProperty(box2d.b2Transform.prototype,"GetAngle",box2d.b2Transform.prototype.GetAngle);box2d.b2Transform.prototype.GetAngleRadians=box2d.b2Transform.prototype.GetAngle;box2d.b2MulXV=function(j,g,q){var m=j.q.c,n=j.q.s,k=g.x;g=g.y;q.x=m*k-n*g+j.p.x;q.y=n*k+m*g+j.p.y;return q};goog.exportSymbol("box2d.b2MulXV",box2d.b2MulXV);box2d.b2MulTXV=function(j,g,q){var m=j.q.c,n=j.q.s,k=g.x-j.p.x;j=g.y-j.p.y;q.x=m*k+n*j;q.y=-n*k+m*j;return q};goog.exportSymbol("box2d.b2MulTXV",box2d.b2MulTXV);box2d.b2MulXX=function(e,d,f){box2d.b2MulRR(e.q,d.q,f.q);box2d.b2AddVV(box2d.b2MulRV(e.q,d.p,f.p),e.p,f.p);return f};goog.exportSymbol("box2d.b2MulXX",box2d.b2MulXX);box2d.b2MulTXX=function(e,d,f){box2d.b2MulTRR(e.q,d.q,f.q);box2d.b2MulTRV(e.q,box2d.b2SubVV(d.p,e.p,f.p),f.p);return f};goog.exportSymbol("box2d.b2MulTXX",box2d.b2MulTXX);box2d.b2Sweep=function(){this.localCenter=new box2d.b2Vec2;this.c0=new box2d.b2Vec2;this.c=new box2d.b2Vec2};goog.exportSymbol("box2d.b2Sweep",box2d.b2Sweep);box2d.b2Sweep.prototype.localCenter=null;goog.exportProperty(box2d.b2Sweep.prototype,"localCenter",box2d.b2Sweep.prototype.localCenter);box2d.b2Sweep.prototype.c0=null;goog.exportProperty(box2d.b2Sweep.prototype,"c0",box2d.b2Sweep.prototype.c0);box2d.b2Sweep.prototype.c=null;goog.exportProperty(box2d.b2Sweep.prototype,"c",box2d.b2Sweep.prototype.c);box2d.b2Sweep.prototype.a0=0;goog.exportProperty(box2d.b2Sweep.prototype,"a0",box2d.b2Sweep.prototype.a0);box2d.b2Sweep.prototype.a=0;goog.exportProperty(box2d.b2Sweep.prototype,"a",box2d.b2Sweep.prototype.a);box2d.b2Sweep.prototype.alpha0=0;goog.exportProperty(box2d.b2Sweep.prototype,"alpha0",box2d.b2Sweep.prototype.alpha0);box2d.b2Sweep.prototype.Clone=function(){return(new box2d.b2Sweep).Copy(this)};goog.exportProperty(box2d.b2Sweep.prototype,"Clone",box2d.b2Sweep.prototype.Clone);box2d.b2Sweep.prototype.Copy=function(b){this.localCenter.Copy(b.localCenter);this.c0.Copy(b.c0);this.c.Copy(b.c);this.a0=b.a0;this.a=b.a;this.alpha0=b.alpha0;return this};goog.exportProperty(box2d.b2Sweep.prototype,"Copy",box2d.b2Sweep.prototype.Copy);box2d.b2Sweep.prototype.GetTransform=function(e,d){var f=1-d;e.p.x=f*this.c0.x+d*this.c.x;e.p.y=f*this.c0.y+d*this.c.y;e.q.SetAngleRadians(f*this.a0+d*this.a);e.p.SelfSub(box2d.b2MulRV(e.q,this.localCenter,box2d.b2Vec2.s_t0));return e};goog.exportProperty(box2d.b2Sweep.prototype,"GetTransform",box2d.b2Sweep.prototype.GetTransform);box2d.b2Sweep.prototype.Advance=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(1>this.alpha0);var d=(e-this.alpha0)/(1-this.alpha0),f=1-d;this.c0.x=f*this.c0.x+d*this.c.x;this.c0.y=f*this.c0.y+d*this.c.y;this.a0=f*this.a0+d*this.a;this.alpha0=e};goog.exportProperty(box2d.b2Sweep.prototype,"Advance",box2d.b2Sweep.prototype.Advance);box2d.b2Sweep.prototype.Normalize=function(){var b=box2d.b2_two_pi*Math.floor(this.a0/box2d.b2_two_pi);this.a0-=b;this.a-=b};goog.exportProperty(box2d.b2Sweep.prototype,"Normalize",box2d.b2Sweep.prototype.Normalize);box2d.b2ControllerEdge=function(){};goog.exportSymbol("box2d.b2ControllerEdge",box2d.b2ControllerEdge);box2d.b2ControllerEdge.prototype.controller=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"controller",box2d.b2ControllerEdge.prototype.controller);box2d.b2ControllerEdge.prototype.body=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"body",box2d.b2ControllerEdge.prototype.body);box2d.b2ControllerEdge.prototype.prevBody=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"prevBody",box2d.b2ControllerEdge.prototype.prevBody);box2d.b2ControllerEdge.prototype.nextBody=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"nextBody",box2d.b2ControllerEdge.prototype.nextBody);box2d.b2ControllerEdge.prototype.prevController=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"prevController",box2d.b2ControllerEdge.prototype.prevController);box2d.b2ControllerEdge.prototype.nextController=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"nextController",box2d.b2ControllerEdge.prototype.nextController);box2d.b2Controller=function(){};goog.exportSymbol("box2d.b2Controller",box2d.b2Controller);box2d.b2Controller.prototype.m_world=null;goog.exportProperty(box2d.b2Controller.prototype,"m_world",box2d.b2Controller.prototype.m_world);box2d.b2Controller.prototype.m_bodyList=null;goog.exportProperty(box2d.b2Controller.prototype,"m_bodyList",box2d.b2Controller.prototype.m_bodyList);box2d.b2Controller.prototype.m_bodyCount=0;goog.exportProperty(box2d.b2Controller.prototype,"m_bodyCount",box2d.b2Controller.prototype.m_bodyCount);box2d.b2Controller.prototype.m_prev=null;goog.exportProperty(box2d.b2Controller.prototype,"m_prev",box2d.b2Controller.prototype.m_prev);box2d.b2Controller.prototype.m_next=null;goog.exportProperty(box2d.b2Controller.prototype,"m_next",box2d.b2Controller.prototype.m_next);box2d.b2Controller.prototype.Step=function(b){};goog.exportProperty(box2d.b2Controller.prototype,"Step",box2d.b2Controller.prototype.Step);box2d.b2Controller.prototype.Draw=function(b){};goog.exportProperty(box2d.b2Controller.prototype,"Draw",box2d.b2Controller.prototype.Draw);box2d.b2Controller.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2Controller.prototype,"GetNext",box2d.b2Controller.prototype.GetNext);box2d.b2Controller.prototype.GetPrev=function(){return this.m_prev};goog.exportProperty(box2d.b2Controller.prototype,"GetPrev",box2d.b2Controller.prototype.GetPrev);box2d.b2Controller.prototype.GetWorld=function(){return this.m_world};goog.exportProperty(box2d.b2Controller.prototype,"GetWorld",box2d.b2Controller.prototype.GetWorld);box2d.b2Controller.prototype.GetBodyList=function(){return this.m_bodyList};goog.exportProperty(box2d.b2Controller.prototype,"GetBodyList",box2d.b2Controller.prototype.GetBodyList);box2d.b2Controller.prototype.AddBody=function(e){var d=new box2d.b2ControllerEdge;d.body=e;d.controller=this;d.nextBody=this.m_bodyList;d.prevBody=null;this.m_bodyList&&(this.m_bodyList.prevBody=d);this.m_bodyList=d;++this.m_bodyCount;d.nextController=e.m_controllerList;d.prevController=null;e.m_controllerList&&(e.m_controllerList.prevController=d);e.m_controllerList=d;++e.m_controllerCount};goog.exportProperty(box2d.b2Controller.prototype,"AddBody",box2d.b2Controller.prototype.AddBody);box2d.b2Controller.prototype.RemoveBody=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_bodyCount);for(var d=this.m_bodyList;d&&d.body!=e;){d=d.nextBody}box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!=d);d.prevBody&&(d.prevBody.nextBody=d.nextBody);d.nextBody&&(d.nextBody.prevBody=d.prevBody);this.m_bodyList==d&&(this.m_bodyList=d.nextBody);--this.m_bodyCount;d.nextController&&(d.nextController.prevController=d.prevController);d.prevController&&(d.prevController.nextController=d.nextController);e.m_controllerList==d&&(e.m_controllerList=d.nextController);--e.m_controllerCount};goog.exportProperty(box2d.b2Controller.prototype,"RemoveBody",box2d.b2Controller.prototype.RemoveBody);box2d.b2Controller.prototype.Clear=function(){for(;this.m_bodyList;){this.RemoveBody(this.m_bodyList.body)}this.m_bodyCount=0};goog.exportProperty(box2d.b2Controller.prototype,"Clear",box2d.b2Controller.prototype.Clear);box2d.b2ConstantAccelController=function(){box2d.b2Controller.call(this);this.A=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2ConstantAccelController,box2d.b2Controller);goog.exportSymbol("box2d.b2ConstantAccelController",box2d.b2ConstantAccelController);box2d.b2ConstantAccelController.prototype.A=null;goog.exportProperty(box2d.b2ConstantAccelController.prototype,"A",box2d.b2ConstantAccelController.prototype.A);box2d.b2ConstantAccelController.prototype.Step=function(e){e=box2d.b2MulSV(e.dt,this.A,box2d.b2ConstantAccelController.prototype.Step.s_dtA);for(var d=this.m_bodyList;d;d=d.nextBody){var f=d.body;f.IsAwake()&&f.SetLinearVelocity(box2d.b2AddVV(f.GetLinearVelocity(),e,box2d.b2Vec2.s_t0))}};goog.exportProperty(box2d.b2ConstantAccelController.prototype,"Step",box2d.b2ConstantAccelController.prototype.Step);box2d.b2ConstantAccelController.prototype.Step.s_dtA=new box2d.b2Vec2;box2d.b2JointType={e_unknownJoint:0,e_revoluteJoint:1,e_prismaticJoint:2,e_distanceJoint:3,e_pulleyJoint:4,e_mouseJoint:5,e_gearJoint:6,e_wheelJoint:7,e_weldJoint:8,e_frictionJoint:9,e_ropeJoint:10,e_motorJoint:11,e_areaJoint:12};goog.exportSymbol("box2d.b2JointType",box2d.b2JointType);goog.exportProperty(box2d.b2JointType,"e_unknownJoint",box2d.b2JointType.e_unknownJoint);goog.exportProperty(box2d.b2JointType,"e_revoluteJoint",box2d.b2JointType.e_revoluteJoint);goog.exportProperty(box2d.b2JointType,"e_prismaticJoint",box2d.b2JointType.e_prismaticJoint);goog.exportProperty(box2d.b2JointType,"e_distanceJoint",box2d.b2JointType.e_distanceJoint);goog.exportProperty(box2d.b2JointType,"e_pulleyJoint",box2d.b2JointType.e_pulleyJoint);goog.exportProperty(box2d.b2JointType,"e_mouseJoint",box2d.b2JointType.e_mouseJoint);goog.exportProperty(box2d.b2JointType,"e_gearJoint",box2d.b2JointType.e_gearJoint);goog.exportProperty(box2d.b2JointType,"e_wheelJoint",box2d.b2JointType.e_wheelJoint);goog.exportProperty(box2d.b2JointType,"e_weldJoint",box2d.b2JointType.e_weldJoint);goog.exportProperty(box2d.b2JointType,"e_frictionJoint",box2d.b2JointType.e_frictionJoint);goog.exportProperty(box2d.b2JointType,"e_ropeJoint",box2d.b2JointType.e_ropeJoint);goog.exportProperty(box2d.b2JointType,"e_motorJoint",box2d.b2JointType.e_motorJoint);goog.exportProperty(box2d.b2JointType,"e_areaJoint",box2d.b2JointType.e_areaJoint);box2d.b2LimitState={e_inactiveLimit:0,e_atLowerLimit:1,e_atUpperLimit:2,e_equalLimits:3};goog.exportSymbol("box2d.b2LimitState",box2d.b2LimitState);goog.exportProperty(box2d.b2LimitState,"e_inactiveLimit",box2d.b2LimitState.e_inactiveLimit);goog.exportProperty(box2d.b2LimitState,"e_atLowerLimit",box2d.b2LimitState.e_atLowerLimit);goog.exportProperty(box2d.b2LimitState,"e_atUpperLimit",box2d.b2LimitState.e_atUpperLimit);goog.exportProperty(box2d.b2LimitState,"e_equalLimits",box2d.b2LimitState.e_equalLimits);box2d.b2Jacobian=function(){this.linear=new box2d.b2Vec2};goog.exportSymbol("box2d.b2Jacobian",box2d.b2Jacobian);box2d.b2Jacobian.prototype.linear=null;goog.exportProperty(box2d.b2Jacobian.prototype,"linear",box2d.b2Jacobian.prototype.linear);box2d.b2Jacobian.prototype.angularA=0;goog.exportProperty(box2d.b2Jacobian.prototype,"angularA",box2d.b2Jacobian.prototype.angularA);box2d.b2Jacobian.prototype.angularB=0;goog.exportProperty(box2d.b2Jacobian.prototype,"angularB",box2d.b2Jacobian.prototype.angularB);box2d.b2Jacobian.prototype.SetZero=function(){this.linear.SetZero();this.angularB=this.angularA=0;return this};goog.exportProperty(box2d.b2Jacobian.prototype,"SetZero",box2d.b2Jacobian.prototype.SetZero);box2d.b2Jacobian.prototype.Set=function(e,d,f){this.linear.Copy(e);this.angularA=d;this.angularB=f;return this};goog.exportProperty(box2d.b2Jacobian.prototype,"Set",box2d.b2Jacobian.prototype.Set);box2d.b2JointEdge=function(){};goog.exportSymbol("box2d.b2JointEdge",box2d.b2JointEdge);box2d.b2JointEdge.prototype.other=null;goog.exportProperty(box2d.b2JointEdge.prototype,"other",box2d.b2JointEdge.prototype.other);box2d.b2JointEdge.prototype.joint=null;goog.exportProperty(box2d.b2JointEdge.prototype,"joint",box2d.b2JointEdge.prototype.joint);box2d.b2JointEdge.prototype.prev=null;goog.exportProperty(box2d.b2JointEdge.prototype,"prev",box2d.b2JointEdge.prototype.prev);box2d.b2JointEdge.prototype.next=null;goog.exportProperty(box2d.b2JointEdge.prototype,"next",box2d.b2JointEdge.prototype.next);box2d.b2JointDef=function(b){this.type=b};goog.exportSymbol("box2d.b2JointDef",box2d.b2JointDef);box2d.b2JointDef.prototype.type=box2d.b2JointType.e_unknownJoint;goog.exportProperty(box2d.b2JointDef.prototype,"type",box2d.b2JointDef.prototype.type);box2d.b2JointDef.prototype.userData=null;goog.exportProperty(box2d.b2JointDef.prototype,"userData",box2d.b2JointDef.prototype.userData);box2d.b2JointDef.prototype.bodyA=null;goog.exportProperty(box2d.b2JointDef.prototype,"bodyA",box2d.b2JointDef.prototype.bodyA);box2d.b2JointDef.prototype.bodyB=null;goog.exportProperty(box2d.b2JointDef.prototype,"bodyB",box2d.b2JointDef.prototype.bodyB);box2d.b2JointDef.prototype.collideConnected=!1;goog.exportProperty(box2d.b2JointDef.prototype,"collideConnected",box2d.b2JointDef.prototype.collideConnected);box2d.b2Joint=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(b.bodyA!=b.bodyB);this.m_type=b.type;this.m_edgeA=new box2d.b2JointEdge;this.m_edgeB=new box2d.b2JointEdge;this.m_bodyA=b.bodyA;this.m_bodyB=b.bodyB;this.m_collideConnected=b.collideConnected;this.m_userData=b.userData};goog.exportSymbol("box2d.b2Joint",box2d.b2Joint);box2d.b2Joint.prototype.m_type=box2d.b2JointType.e_unknownJoint;goog.exportProperty(box2d.b2Joint.prototype,"m_type",box2d.b2Joint.prototype.m_type);box2d.b2Joint.prototype.m_prev=null;goog.exportProperty(box2d.b2Joint.prototype,"m_prev",box2d.b2Joint.prototype.m_prev);box2d.b2Joint.prototype.m_next=null;goog.exportProperty(box2d.b2Joint.prototype,"m_next",box2d.b2Joint.prototype.m_next);box2d.b2Joint.prototype.m_edgeA=null;goog.exportProperty(box2d.b2Joint.prototype,"m_edgeA",box2d.b2Joint.prototype.m_edgeA);box2d.b2Joint.prototype.m_edgeB=null;goog.exportProperty(box2d.b2Joint.prototype,"m_edgeB",box2d.b2Joint.prototype.m_edgeB);box2d.b2Joint.prototype.m_bodyA=null;goog.exportProperty(box2d.b2Joint.prototype,"m_bodyA",box2d.b2Joint.prototype.m_bodyA);box2d.b2Joint.prototype.m_bodyB=null;goog.exportProperty(box2d.b2Joint.prototype,"m_bodyB",box2d.b2Joint.prototype.m_bodyB);box2d.b2Joint.prototype.m_index=0;goog.exportProperty(box2d.b2Joint.prototype,"m_index",box2d.b2Joint.prototype.m_index);box2d.b2Joint.prototype.m_islandFlag=!1;goog.exportProperty(box2d.b2Joint.prototype,"m_islandFlag",box2d.b2Joint.prototype.m_islandFlag);box2d.b2Joint.prototype.m_collideConnected=!1;goog.exportProperty(box2d.b2Joint.prototype,"m_collideConnected",box2d.b2Joint.prototype.m_collideConnected);box2d.b2Joint.prototype.m_userData=null;goog.exportProperty(box2d.b2Joint.prototype,"m_userData",box2d.b2Joint.prototype.m_userData);box2d.b2Joint.prototype.GetAnchorA=function(b){return b.SetZero()};goog.exportProperty(box2d.b2Joint.prototype,"GetAnchorA",box2d.b2Joint.prototype.GetAnchorA);box2d.b2Joint.prototype.GetAnchorB=function(b){return b.SetZero()};goog.exportProperty(box2d.b2Joint.prototype,"GetAnchorB",box2d.b2Joint.prototype.GetAnchorB);box2d.b2Joint.prototype.GetReactionForce=function(e,d){return d.SetZero()};goog.exportProperty(box2d.b2Joint.prototype,"GetReactionForce",box2d.b2Joint.prototype.GetReactionForce);box2d.b2Joint.prototype.GetReactionTorque=function(b){return 0};goog.exportProperty(box2d.b2Joint.prototype,"GetReactionTorque",box2d.b2Joint.prototype.GetReactionTorque);box2d.b2Joint.prototype.InitVelocityConstraints=function(b){};goog.exportProperty(box2d.b2Joint.prototype,"InitVelocityConstraints",box2d.b2Joint.prototype.InitVelocityConstraints);box2d.b2Joint.prototype.SolveVelocityConstraints=function(b){};goog.exportProperty(box2d.b2Joint.prototype,"SolveVelocityConstraints",box2d.b2Joint.prototype.SolveVelocityConstraints);box2d.b2Joint.prototype.SolvePositionConstraints=function(b){return !1};goog.exportProperty(box2d.b2Joint.prototype,"SolvePositionConstraints",box2d.b2Joint.prototype.SolvePositionConstraints);box2d.b2Joint.prototype.GetType=function(){return this.m_type};goog.exportProperty(box2d.b2Joint.prototype,"GetType",box2d.b2Joint.prototype.GetType);box2d.b2Joint.prototype.GetBodyA=function(){return this.m_bodyA};goog.exportProperty(box2d.b2Joint.prototype,"GetBodyA",box2d.b2Joint.prototype.GetBodyA);box2d.b2Joint.prototype.GetBodyB=function(){return this.m_bodyB};goog.exportProperty(box2d.b2Joint.prototype,"GetBodyB",box2d.b2Joint.prototype.GetBodyB);box2d.b2Joint.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2Joint.prototype,"GetNext",box2d.b2Joint.prototype.GetNext);box2d.b2Joint.prototype.GetUserData=function(){return this.m_userData};goog.exportProperty(box2d.b2Joint.prototype,"GetUserData",box2d.b2Joint.prototype.GetUserData);box2d.b2Joint.prototype.SetUserData=function(b){this.m_userData=b};goog.exportProperty(box2d.b2Joint.prototype,"SetUserData",box2d.b2Joint.prototype.SetUserData);box2d.b2Joint.prototype.GetCollideConnected=function(){return this.m_collideConnected};goog.exportProperty(box2d.b2Joint.prototype,"GetCollideConnected",box2d.b2Joint.prototype.GetCollideConnected);box2d.b2Joint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("// Dump is not supported for this joint type.\n")};goog.exportProperty(box2d.b2Joint.prototype,"Dump",box2d.b2Joint.prototype.Dump);box2d.b2Joint.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()};goog.exportProperty(box2d.b2Joint.prototype,"IsActive",box2d.b2Joint.prototype.IsActive);box2d.b2Joint.prototype.ShiftOrigin=function(b){};goog.exportProperty(box2d.b2Joint.prototype,"ShiftOrigin",box2d.b2Joint.prototype.ShiftOrigin);box2d.b2RevoluteJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_revoluteJoint);this.localAnchorA=new box2d.b2Vec2(0,0);this.localAnchorB=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2RevoluteJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2RevoluteJointDef",box2d.b2RevoluteJointDef);box2d.b2RevoluteJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"localAnchorA",box2d.b2RevoluteJointDef.prototype.localAnchorA);box2d.b2RevoluteJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"localAnchorB",box2d.b2RevoluteJointDef.prototype.localAnchorB);box2d.b2RevoluteJointDef.prototype.referenceAngle=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"referenceAngle",box2d.b2RevoluteJointDef.prototype.referenceAngle);box2d.b2RevoluteJointDef.prototype.enableLimit=!1;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"enableLimit",box2d.b2RevoluteJointDef.prototype.enableLimit);box2d.b2RevoluteJointDef.prototype.lowerAngle=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"lowerAngle",box2d.b2RevoluteJointDef.prototype.lowerAngle);box2d.b2RevoluteJointDef.prototype.upperAngle=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"upperAngle",box2d.b2RevoluteJointDef.prototype.upperAngle);box2d.b2RevoluteJointDef.prototype.enableMotor=!1;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"enableMotor",box2d.b2RevoluteJointDef.prototype.enableMotor);box2d.b2RevoluteJointDef.prototype.motorSpeed=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"motorSpeed",box2d.b2RevoluteJointDef.prototype.motorSpeed);box2d.b2RevoluteJointDef.prototype.maxMotorTorque=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"maxMotorTorque",box2d.b2RevoluteJointDef.prototype.maxMotorTorque);box2d.b2RevoluteJointDef.prototype.Initialize=function(e,d,f){this.bodyA=e;this.bodyB=d;this.bodyA.GetLocalPoint(f,this.localAnchorA);this.bodyB.GetLocalPoint(f,this.localAnchorB);this.referenceAngle=this.bodyB.GetAngleRadians()-this.bodyA.GetAngleRadians()};goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"Initialize",box2d.b2RevoluteJointDef.prototype.Initialize);box2d.b2RevoluteJoint=function(b){box2d.b2Joint.call(this,b);this.m_localAnchorA=new box2d.b2Vec2;this.m_localAnchorB=new box2d.b2Vec2;this.m_impulse=new box2d.b2Vec3;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_mass=new box2d.b2Mat33;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_K=new box2d.b2Mat22;this.m_localAnchorA.Copy(b.localAnchorA);this.m_localAnchorB.Copy(b.localAnchorB);this.m_referenceAngle=b.referenceAngle;this.m_impulse.SetZero();this.m_motorImpulse=0;this.m_lowerAngle=b.lowerAngle;this.m_upperAngle=b.upperAngle;this.m_maxMotorTorque=b.maxMotorTorque;this.m_motorSpeed=b.motorSpeed;this.m_enableLimit=b.enableLimit;this.m_enableMotor=b.enableMotor;this.m_limitState=box2d.b2LimitState.e_inactiveLimit};goog.inherits(box2d.b2RevoluteJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2RevoluteJoint",box2d.b2RevoluteJoint);box2d.b2RevoluteJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localAnchorA",box2d.b2RevoluteJoint.prototype.m_localAnchorA);box2d.b2RevoluteJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localAnchorB",box2d.b2RevoluteJoint.prototype.m_localAnchorB);box2d.b2RevoluteJoint.prototype.m_impulse=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_impulse",box2d.b2RevoluteJoint.prototype.m_impulse);box2d.b2RevoluteJoint.prototype.m_motorImpulse=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_motorImpulse",box2d.b2RevoluteJoint.prototype.m_motorImpulse);box2d.b2RevoluteJoint.prototype.m_enableMotor=!1;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_enableMotor",box2d.b2RevoluteJoint.prototype.m_enableMotor);box2d.b2RevoluteJoint.prototype.m_maxMotorTorque=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_maxMotorTorque",box2d.b2RevoluteJoint.prototype.m_maxMotorTorque);box2d.b2RevoluteJoint.prototype.m_motorSpeed=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_motorSpeed",box2d.b2RevoluteJoint.prototype.m_motorSpeed);box2d.b2RevoluteJoint.prototype.m_enableLimit=!1;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_enableLimit",box2d.b2RevoluteJoint.prototype.m_enableLimit);box2d.b2RevoluteJoint.prototype.m_referenceAngle=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_referenceAngle",box2d.b2RevoluteJoint.prototype.m_referenceAngle);box2d.b2RevoluteJoint.prototype.m_lowerAngle=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_lowerAngle",box2d.b2RevoluteJoint.prototype.m_lowerAngle);box2d.b2RevoluteJoint.prototype.m_upperAngle=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_upperAngle",box2d.b2RevoluteJoint.prototype.m_upperAngle);box2d.b2RevoluteJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_indexA",box2d.b2RevoluteJoint.prototype.m_indexA);box2d.b2RevoluteJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_indexB",box2d.b2RevoluteJoint.prototype.m_indexB);box2d.b2RevoluteJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_rA",box2d.b2RevoluteJoint.prototype.m_rA);box2d.b2RevoluteJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_rB",box2d.b2RevoluteJoint.prototype.m_rB);box2d.b2RevoluteJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localCenterA",box2d.b2RevoluteJoint.prototype.m_localCenterA);box2d.b2RevoluteJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localCenterB",box2d.b2RevoluteJoint.prototype.m_localCenterB);box2d.b2RevoluteJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invMassA",box2d.b2RevoluteJoint.prototype.m_invMassA);box2d.b2RevoluteJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invMassB",box2d.b2RevoluteJoint.prototype.m_invMassB);box2d.b2RevoluteJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invIA",box2d.b2RevoluteJoint.prototype.m_invIA);box2d.b2RevoluteJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invIB",box2d.b2RevoluteJoint.prototype.m_invIB);box2d.b2RevoluteJoint.prototype.m_mass=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_mass",box2d.b2RevoluteJoint.prototype.m_mass);box2d.b2RevoluteJoint.prototype.m_motorMass=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_motorMass",box2d.b2RevoluteJoint.prototype.m_motorMass);box2d.b2RevoluteJoint.prototype.m_limitState=box2d.b2LimitState.e_inactiveLimit;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_limitState",box2d.b2RevoluteJoint.prototype.m_limitState);box2d.b2RevoluteJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_qA",box2d.b2RevoluteJoint.prototype.m_qA);box2d.b2RevoluteJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_qB",box2d.b2RevoluteJoint.prototype.m_qB);box2d.b2RevoluteJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_lalcA",box2d.b2RevoluteJoint.prototype.m_lalcA);box2d.b2RevoluteJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_lalcB",box2d.b2RevoluteJoint.prototype.m_lalcB);box2d.b2RevoluteJoint.prototype.m_K=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_K",box2d.b2RevoluteJoint.prototype.m_K);box2d.b2RevoluteJoint.prototype.InitVelocityConstraints=function(D){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var C=D.positions[this.m_indexA].a,B=D.velocities[this.m_indexA].v,z=D.velocities[this.m_indexA].w,A=D.positions[this.m_indexB].a,y=D.velocities[this.m_indexB].v,v=D.velocities[this.m_indexB].w,u=this.m_qA.SetAngleRadians(C),r=this.m_qB.SetAngleRadians(A);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2MulRV(u,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2MulRV(r,this.m_lalcB,this.m_rB);var u=this.m_invMassA,r=this.m_invMassB,s=this.m_invIA,q=this.m_invIB,j=0==s+q;this.m_mass.ex.x=u+r+this.m_rA.y*this.m_rA.y*s+this.m_rB.y*this.m_rB.y*q;this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*s-this.m_rB.y*this.m_rB.x*q;this.m_mass.ez.x=-this.m_rA.y*s-this.m_rB.y*q;this.m_mass.ex.y=this.m_mass.ey.x;this.m_mass.ey.y=u+r+this.m_rA.x*this.m_rA.x*s+this.m_rB.x*this.m_rB.x*q;this.m_mass.ez.y=this.m_rA.x*s+this.m_rB.x*q;this.m_mass.ex.z=this.m_mass.ez.x;this.m_mass.ey.z=this.m_mass.ez.y;this.m_mass.ez.z=s+q;this.m_motorMass=s+q;0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass);if(!1==this.m_enableMotor||j){this.m_motorImpulse=0}this.m_enableLimit&&!1==j?(C=A-C-this.m_referenceAngle,box2d.b2Abs(this.m_upperAngle-this.m_lowerAngle)<2*box2d.b2_angularSlop?this.m_limitState=box2d.b2LimitState.e_equalLimits:C<=this.m_lowerAngle?(this.m_limitState!=box2d.b2LimitState.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=box2d.b2LimitState.e_atLowerLimit):C>=this.m_upperAngle?(this.m_limitState!=box2d.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=box2d.b2LimitState.e_atUpperLimit):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):this.m_limitState=box2d.b2LimitState.e_inactiveLimit;D.step.warmStarting?(this.m_impulse.SelfMul(D.step.dtRatio),this.m_motorImpulse*=D.step.dtRatio,C=box2d.b2RevoluteJoint.prototype.InitVelocityConstraints.s_P.SetXY(this.m_impulse.x,this.m_impulse.y),B.SelfMulSub(u,C),z-=s*(box2d.b2CrossVV(this.m_rA,C)+this.m_motorImpulse+this.m_impulse.z),y.SelfMulAdd(r,C),v+=q*(box2d.b2CrossVV(this.m_rB,C)+this.m_motorImpulse+this.m_impulse.z)):(this.m_impulse.SetZero(),this.m_motorImpulse=0);D.velocities[this.m_indexA].w=z;D.velocities[this.m_indexB].w=v};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"InitVelocityConstraints",box2d.b2RevoluteJoint.prototype.InitVelocityConstraints);box2d.b2RevoluteJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints=function(E){var D=E.velocities[this.m_indexA].v,C=E.velocities[this.m_indexA].w,A=E.velocities[this.m_indexB].v,B=E.velocities[this.m_indexB].w,z=this.m_invMassA,y=this.m_invMassB,v=this.m_invIA,s=this.m_invIB,u=0==v+s;if(this.m_enableMotor&&this.m_limitState!=box2d.b2LimitState.e_equalLimits&&!1==u){var r=B-C-this.m_motorSpeed,r=-this.m_motorMass*r,q=this.m_motorImpulse,j=E.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+r,-j,j);r=this.m_motorImpulse-q;C-=v*r;B+=s*r}this.m_enableLimit&&this.m_limitState!=box2d.b2LimitState.e_inactiveLimit&&!1==u?(u=box2d.b2SubVV(box2d.b2AddVCrossSV(A,B,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(D,C,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot1),r=this.m_mass.Solve33(u.x,u.y,B-C,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse3).SelfNeg(),this.m_limitState==box2d.b2LimitState.e_equalLimits?this.m_impulse.SelfAdd(r):this.m_limitState==box2d.b2LimitState.e_atLowerLimit?(q=this.m_impulse.z+r.z,0>q?(q=-u.x+this.m_impulse.z*this.m_mass.ez.x,u=-u.y+this.m_impulse.z*this.m_mass.ez.y,u=this.m_mass.Solve22(q,u,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced),r.x=u.x,r.y=u.y,r.z=-this.m_impulse.z,this.m_impulse.x+=u.x,this.m_impulse.y+=u.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(r)):this.m_limitState==box2d.b2LimitState.e_atUpperLimit&&(q=this.m_impulse.z+r.z,0<q?(q=-u.x+this.m_impulse.z*this.m_mass.ez.x,u=-u.y+this.m_impulse.z*this.m_mass.ez.y,u=this.m_mass.Solve22(q,u,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced),r.x=u.x,r.y=u.y,r.z=-this.m_impulse.z,this.m_impulse.x+=u.x,this.m_impulse.y+=u.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(r)),u=box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_P.SetXY(r.x,r.y),D.SelfMulSub(z,u),C-=v*(box2d.b2CrossVV(this.m_rA,u)+r.z),A.SelfMulAdd(y,u),B+=s*(box2d.b2CrossVV(this.m_rB,u)+r.z)):(r=box2d.b2SubVV(box2d.b2AddVCrossSV(A,B,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(D,C,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot),r=this.m_mass.Solve22(-r.x,-r.y,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse2),this.m_impulse.x+=r.x,this.m_impulse.y+=r.y,D.SelfMulSub(z,r),C-=v*box2d.b2CrossVV(this.m_rA,r),A.SelfMulAdd(y,r),B+=s*box2d.b2CrossVV(this.m_rB,r));E.velocities[this.m_indexA].w=C;E.velocities[this.m_indexB].w=B};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SolveVelocityConstraints",box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints);box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot1=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse3=new box2d.b2Vec3;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse2=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolvePositionConstraints=function(I){var H=I.positions[this.m_indexA].c,G=I.positions[this.m_indexA].a,E=I.positions[this.m_indexB].c,F=I.positions[this.m_indexB].a,D=this.m_qA.SetAngleRadians(G),C=this.m_qB.SetAngleRadians(F),B=0,z=0,z=0==this.m_invIA+this.m_invIB;if(this.m_enableLimit&&this.m_limitState!=box2d.b2LimitState.e_inactiveLimit&&!1==z){var A=F-G-this.m_referenceAngle,z=0;this.m_limitState==box2d.b2LimitState.e_equalLimits?(A=box2d.b2Clamp(A-this.m_lowerAngle,-box2d.b2_maxAngularCorrection,box2d.b2_maxAngularCorrection),z=-this.m_motorMass*A,B=box2d.b2Abs(A)):this.m_limitState==box2d.b2LimitState.e_atLowerLimit?(A-=this.m_lowerAngle,B=-A,A=box2d.b2Clamp(A+box2d.b2_angularSlop,-box2d.b2_maxAngularCorrection,0),z=-this.m_motorMass*A):this.m_limitState==box2d.b2LimitState.e_atUpperLimit&&(B=A-=this.m_upperAngle,A=box2d.b2Clamp(A-box2d.b2_angularSlop,0,box2d.b2_maxAngularCorrection),z=-this.m_motorMass*A);G-=this.m_invIA*z;F+=this.m_invIB*z}D.SetAngleRadians(G);C.SetAngleRadians(F);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);D=box2d.b2MulRV(D,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var C=box2d.b2MulRV(C,this.m_lalcB,this.m_rB),A=box2d.b2SubVV(box2d.b2AddVV(E,C,box2d.b2Vec2.s_t0),box2d.b2AddVV(H,D,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_C),z=A.GetLength(),y=this.m_invMassA,v=this.m_invMassB,u=this.m_invIA,s=this.m_invIB,j=this.m_K;j.ex.x=y+v+u*D.y*D.y+s*C.y*C.y;j.ex.y=-u*D.x*D.y-s*C.x*C.y;j.ey.x=j.ex.y;j.ey.y=y+v+u*D.x*D.x+s*C.x*C.x;A=j.Solve(A.x,A.y,box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_impulse).SelfNeg();H.SelfMulSub(y,A);G-=u*box2d.b2CrossVV(D,A);E.SelfMulAdd(v,A);F+=s*box2d.b2CrossVV(C,A);I.positions[this.m_indexA].a=G;I.positions[this.m_indexB].a=F;return z<=box2d.b2_linearSlop&&B<=box2d.b2_angularSlop};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SolvePositionConstraints",box2d.b2RevoluteJoint.prototype.SolvePositionConstraints);box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_C=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetAnchorA",box2d.b2RevoluteJoint.prototype.GetAnchorA);box2d.b2RevoluteJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetAnchorB",box2d.b2RevoluteJoint.prototype.GetAnchorB);box2d.b2RevoluteJoint.prototype.GetReactionForce=function(e,d){return d.SetXY(e*this.m_impulse.x,e*this.m_impulse.y)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetReactionForce",box2d.b2RevoluteJoint.prototype.GetReactionForce);box2d.b2RevoluteJoint.prototype.GetReactionTorque=function(b){return b*this.m_impulse.z};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetReactionTorque",box2d.b2RevoluteJoint.prototype.GetReactionTorque);box2d.b2RevoluteJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetLocalAnchorA",box2d.b2RevoluteJoint.prototype.GetLocalAnchorA);box2d.b2RevoluteJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetLocalAnchorB",box2d.b2RevoluteJoint.prototype.GetLocalAnchorB);box2d.b2RevoluteJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetReferenceAngle",box2d.b2RevoluteJoint.prototype.GetReferenceAngle);box2d.b2RevoluteJoint.prototype.GetJointAngleRadians=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetJointAngleRadians",box2d.b2RevoluteJoint.prototype.GetJointAngleRadians);box2d.b2RevoluteJoint.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetJointSpeed",box2d.b2RevoluteJoint.prototype.GetJointSpeed);box2d.b2RevoluteJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"IsMotorEnabled",box2d.b2RevoluteJoint.prototype.IsMotorEnabled);box2d.b2RevoluteJoint.prototype.EnableMotor=function(b){this.m_enableMotor!=b&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=b)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"EnableMotor",box2d.b2RevoluteJoint.prototype.EnableMotor);box2d.b2RevoluteJoint.prototype.GetMotorTorque=function(b){return b*this.m_motorImpulse};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetMotorTorque",box2d.b2RevoluteJoint.prototype.GetMotorTorque);box2d.b2RevoluteJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetMotorSpeed",box2d.b2RevoluteJoint.prototype.GetMotorSpeed);box2d.b2RevoluteJoint.prototype.SetMaxMotorTorque=function(b){this.m_maxMotorTorque=b};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SetMaxMotorTorque",box2d.b2RevoluteJoint.prototype.SetMaxMotorTorque);box2d.b2RevoluteJoint.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetMaxMotorTorque",box2d.b2RevoluteJoint.prototype.GetMaxMotorTorque);box2d.b2RevoluteJoint.prototype.IsLimitEnabled=function(){return this.m_enableLimit};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"IsLimitEnabled",box2d.b2RevoluteJoint.prototype.IsLimitEnabled);box2d.b2RevoluteJoint.prototype.EnableLimit=function(b){b!=this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=b,this.m_impulse.z=0)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"EnableLimit",box2d.b2RevoluteJoint.prototype.EnableLimit);box2d.b2RevoluteJoint.prototype.GetLowerLimit=function(){return this.m_lowerAngle};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetLowerLimit",box2d.b2RevoluteJoint.prototype.GetLowerLimit);box2d.b2RevoluteJoint.prototype.GetUpperLimit=function(){return this.m_upperAngle};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetUpperLimit",box2d.b2RevoluteJoint.prototype.GetUpperLimit);box2d.b2RevoluteJoint.prototype.SetLimits=function(e,d){if(e!=this.m_lowerAngle||d!=this.m_upperAngle){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=e,this.m_upperAngle=d}};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SetLimits",box2d.b2RevoluteJoint.prototype.SetLimits);box2d.b2RevoluteJoint.prototype.SetMotorSpeed=function(b){this.m_motorSpeed!=b&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=b)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SetMotorSpeed",box2d.b2RevoluteJoint.prototype.SetMotorSpeed);box2d.b2RevoluteJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2RevoluteJointDef*/ var jd = new box2d.b2RevoluteJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle);box2d.b2Log("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false");box2d.b2Log("  jd.lowerAngle = %.15f;\n",this.m_lowerAngle);box2d.b2Log("  jd.upperAngle = %.15f;\n",this.m_upperAngle);box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false");box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed);box2d.b2Log("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"Dump",box2d.b2RevoluteJoint.prototype.Dump);box2d.b2PrismaticJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_prismaticJoint);this.localAnchorA=new box2d.b2Vec2;this.localAnchorB=new box2d.b2Vec2;this.localAxisA=new box2d.b2Vec2(1,0)};goog.inherits(box2d.b2PrismaticJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2PrismaticJointDef",box2d.b2PrismaticJointDef);box2d.b2PrismaticJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"localAnchorA",box2d.b2PrismaticJointDef.prototype.localAnchorA);box2d.b2PrismaticJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"localAnchorB",box2d.b2PrismaticJointDef.prototype.localAnchorB);box2d.b2PrismaticJointDef.prototype.localAxisA=null;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"localAxisA",box2d.b2PrismaticJointDef.prototype.localAxisA);box2d.b2PrismaticJointDef.prototype.referenceAngle=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"referenceAngle",box2d.b2PrismaticJointDef.prototype.referenceAngle);box2d.b2PrismaticJointDef.prototype.enableLimit=!1;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"enableLimit",box2d.b2PrismaticJointDef.prototype.enableLimit);box2d.b2PrismaticJointDef.prototype.lowerTranslation=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"lowerTranslation",box2d.b2PrismaticJointDef.prototype.lowerTranslation);box2d.b2PrismaticJointDef.prototype.upperTranslation=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"upperTranslation",box2d.b2PrismaticJointDef.prototype.upperTranslation);box2d.b2PrismaticJointDef.prototype.enableMotor=!1;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"enableMotor",box2d.b2PrismaticJointDef.prototype.enableMotor);box2d.b2PrismaticJointDef.prototype.maxMotorForce=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"maxMotorForce",box2d.b2PrismaticJointDef.prototype.maxMotorForce);box2d.b2PrismaticJointDef.prototype.motorSpeed=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"motorSpeed",box2d.b2PrismaticJointDef.prototype.motorSpeed);box2d.b2PrismaticJointDef.prototype.Initialize=function(f,d,j,g){this.bodyA=f;this.bodyB=d;this.bodyA.GetLocalPoint(j,this.localAnchorA);this.bodyB.GetLocalPoint(j,this.localAnchorB);this.bodyA.GetLocalVector(g,this.localAxisA);this.referenceAngle=this.bodyB.GetAngleRadians()-this.bodyA.GetAngleRadians()};goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"Initialize",box2d.b2PrismaticJointDef.prototype.Initialize);box2d.b2PrismaticJoint=function(b){box2d.b2Joint.call(this,b);this.m_localAnchorA=b.localAnchorA.Clone();this.m_localAnchorB=b.localAnchorB.Clone();this.m_localXAxisA=b.localAxisA.Clone().SelfNormalize();this.m_localYAxisA=box2d.b2CrossOneV(this.m_localXAxisA,new box2d.b2Vec2);this.m_referenceAngle=b.referenceAngle;this.m_impulse=new box2d.b2Vec3(0,0,0);this.m_lowerTranslation=b.lowerTranslation;this.m_upperTranslation=b.upperTranslation;this.m_maxMotorForce=b.maxMotorForce;this.m_motorSpeed=b.motorSpeed;this.m_enableLimit=b.enableLimit;this.m_enableMotor=b.enableMotor;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_axis=new box2d.b2Vec2(0,0);this.m_perp=new box2d.b2Vec2(0,0);this.m_K=new box2d.b2Mat33;this.m_K3=new box2d.b2Mat33;this.m_K2=new box2d.b2Mat22;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2};goog.inherits(box2d.b2PrismaticJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2PrismaticJoint",box2d.b2PrismaticJoint);box2d.b2PrismaticJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localAnchorA",box2d.b2PrismaticJoint.prototype.m_localAnchorA);box2d.b2PrismaticJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localAnchorB",box2d.b2PrismaticJoint.prototype.m_localAnchorB);box2d.b2PrismaticJoint.prototype.m_localXAxisA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localXAxisA",box2d.b2PrismaticJoint.prototype.m_localXAxisA);box2d.b2PrismaticJoint.prototype.m_localYAxisA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localYAxisA",box2d.b2PrismaticJoint.prototype.m_localYAxisA);box2d.b2PrismaticJoint.prototype.m_referenceAngle=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_referenceAngle",box2d.b2PrismaticJoint.prototype.m_referenceAngle);box2d.b2PrismaticJoint.prototype.m_impulse=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_impulse",box2d.b2PrismaticJoint.prototype.m_impulse);box2d.b2PrismaticJoint.prototype.m_motorImpulse=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_motorImpulse",box2d.b2PrismaticJoint.prototype.m_motorImpulse);box2d.b2PrismaticJoint.prototype.m_lowerTranslation=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_lowerTranslation",box2d.b2PrismaticJoint.prototype.m_lowerTranslation);box2d.b2PrismaticJoint.prototype.m_upperTranslation=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_upperTranslation",box2d.b2PrismaticJoint.prototype.m_upperTranslation);box2d.b2PrismaticJoint.prototype.m_maxMotorForce=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_maxMotorForce",box2d.b2PrismaticJoint.prototype.m_maxMotorForce);box2d.b2PrismaticJoint.prototype.m_motorSpeed=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_motorSpeed",box2d.b2PrismaticJoint.prototype.m_motorSpeed);box2d.b2PrismaticJoint.prototype.m_enableLimit=!1;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_enableLimit",box2d.b2PrismaticJoint.prototype.m_enableLimit);box2d.b2PrismaticJoint.prototype.m_enableMotor=!1;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_enableMotor",box2d.b2PrismaticJoint.prototype.m_enableMotor);box2d.b2PrismaticJoint.prototype.m_limitState=box2d.b2LimitState.e_inactiveLimit;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_limitState",box2d.b2PrismaticJoint.prototype.m_limitState);box2d.b2PrismaticJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_indexA",box2d.b2PrismaticJoint.prototype.m_indexA);box2d.b2PrismaticJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_indexB",box2d.b2PrismaticJoint.prototype.m_indexB);box2d.b2PrismaticJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localCenterA",box2d.b2PrismaticJoint.prototype.m_localCenterA);box2d.b2PrismaticJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localCenterB",box2d.b2PrismaticJoint.prototype.m_localCenterB);box2d.b2PrismaticJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invMassA",box2d.b2PrismaticJoint.prototype.m_invMassA);box2d.b2PrismaticJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invMassB",box2d.b2PrismaticJoint.prototype.m_invMassB);box2d.b2PrismaticJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invIA",box2d.b2PrismaticJoint.prototype.m_invIA);box2d.b2PrismaticJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invIB",box2d.b2PrismaticJoint.prototype.m_invIB);box2d.b2PrismaticJoint.prototype.m_axis=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_axis",box2d.b2PrismaticJoint.prototype.m_axis);box2d.b2PrismaticJoint.prototype.m_perp=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_perp",box2d.b2PrismaticJoint.prototype.m_perp);box2d.b2PrismaticJoint.prototype.m_s1=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_s1",box2d.b2PrismaticJoint.prototype.m_s1);box2d.b2PrismaticJoint.prototype.m_s2=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_s2",box2d.b2PrismaticJoint.prototype.m_s2);box2d.b2PrismaticJoint.prototype.m_a1=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_a1",box2d.b2PrismaticJoint.prototype.m_a1);box2d.b2PrismaticJoint.prototype.m_a2=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_a2",box2d.b2PrismaticJoint.prototype.m_a2);box2d.b2PrismaticJoint.prototype.m_K=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_K",box2d.b2PrismaticJoint.prototype.m_K);box2d.b2PrismaticJoint.prototype.m_K3=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_K3",box2d.b2PrismaticJoint.prototype.m_K3);box2d.b2PrismaticJoint.prototype.m_K2=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_K2",box2d.b2PrismaticJoint.prototype.m_K2);box2d.b2PrismaticJoint.prototype.m_motorMass=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_motorMass",box2d.b2PrismaticJoint.prototype.m_motorMass);box2d.b2PrismaticJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_qA",box2d.b2PrismaticJoint.prototype.m_qA);box2d.b2PrismaticJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_qB",box2d.b2PrismaticJoint.prototype.m_qB);box2d.b2PrismaticJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_lalcA",box2d.b2PrismaticJoint.prototype.m_lalcA);box2d.b2PrismaticJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_lalcB",box2d.b2PrismaticJoint.prototype.m_lalcB);box2d.b2PrismaticJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_rA",box2d.b2PrismaticJoint.prototype.m_rA);box2d.b2PrismaticJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_rB",box2d.b2PrismaticJoint.prototype.m_rB);box2d.b2PrismaticJoint.prototype.InitVelocityConstraints=function(E){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var D=E.positions[this.m_indexA].c,C=E.velocities[this.m_indexA].v,A=E.velocities[this.m_indexA].w,B=E.positions[this.m_indexB].c,z=E.positions[this.m_indexB].a,y=E.velocities[this.m_indexB].v,v=E.velocities[this.m_indexB].w,s=this.m_qA.SetAngleRadians(E.positions[this.m_indexA].a),z=this.m_qB.SetAngleRadians(z);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var u=box2d.b2MulRV(s,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var r=box2d.b2MulRV(z,this.m_lalcB,this.m_rB),q=box2d.b2AddVV(box2d.b2SubVV(B,D,box2d.b2Vec2.s_t0),box2d.b2SubVV(r,u,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_d),D=this.m_invMassA,B=this.m_invMassB,z=this.m_invIA,j=this.m_invIB;box2d.b2MulRV(s,this.m_localXAxisA,this.m_axis);this.m_a1=box2d.b2CrossVV(box2d.b2AddVV(q,u,box2d.b2Vec2.s_t0),this.m_axis);this.m_a2=box2d.b2CrossVV(r,this.m_axis);this.m_motorMass=D+B+z*this.m_a1*this.m_a1+j*this.m_a2*this.m_a2;0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass);box2d.b2MulRV(s,this.m_localYAxisA,this.m_perp);this.m_s1=box2d.b2CrossVV(box2d.b2AddVV(q,u,box2d.b2Vec2.s_t0),this.m_perp);this.m_s2=box2d.b2CrossVV(r,this.m_perp);this.m_K.ex.x=D+B+z*this.m_s1*this.m_s1+j*this.m_s2*this.m_s2;this.m_K.ex.y=z*this.m_s1+j*this.m_s2;this.m_K.ex.z=z*this.m_s1*this.m_a1+j*this.m_s2*this.m_a2;this.m_K.ey.x=this.m_K.ex.y;this.m_K.ey.y=z+j;0==this.m_K.ey.y&&(this.m_K.ey.y=1);this.m_K.ey.z=z*this.m_a1+j*this.m_a2;this.m_K.ez.x=this.m_K.ex.z;this.m_K.ez.y=this.m_K.ey.z;this.m_K.ez.z=D+B+z*this.m_a1*this.m_a1+j*this.m_a2*this.m_a2;this.m_enableLimit?(s=box2d.b2DotVV(this.m_axis,q),box2d.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*box2d.b2_linearSlop?this.m_limitState=box2d.b2LimitState.e_equalLimits:s<=this.m_lowerTranslation?this.m_limitState!=box2d.b2LimitState.e_atLowerLimit&&(this.m_limitState=box2d.b2LimitState.e_atLowerLimit,this.m_impulse.z=0):s>=this.m_upperTranslation?this.m_limitState!=box2d.b2LimitState.e_atUpperLimit&&(this.m_limitState=box2d.b2LimitState.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0);!1==this.m_enableMotor&&(this.m_motorImpulse=0);E.step.warmStarting?(this.m_impulse.SelfMul(E.step.dtRatio),this.m_motorImpulse*=E.step.dtRatio,s=box2d.b2AddVV(box2d.b2MulSV(this.m_impulse.x,this.m_perp,box2d.b2Vec2.s_t0),box2d.b2MulSV(this.m_motorImpulse+this.m_impulse.z,this.m_axis,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_P),u=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,r=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2,C.SelfMulSub(D,s),A-=z*u,y.SelfMulAdd(B,s),v+=j*r):(this.m_impulse.SetZero(),this.m_motorImpulse=0);E.velocities[this.m_indexA].w=A;E.velocities[this.m_indexB].w=v};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"InitVelocityConstraints",box2d.b2PrismaticJoint.prototype.InitVelocityConstraints);box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_d=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints=function(E){var D=E.velocities[this.m_indexA].v,C=E.velocities[this.m_indexA].w,A=E.velocities[this.m_indexB].v,B=E.velocities[this.m_indexB].w,z=this.m_invMassA,y=this.m_invMassB,v=this.m_invIA,s=this.m_invIB;if(this.m_enableMotor&&this.m_limitState!=box2d.b2LimitState.e_equalLimits){var u=box2d.b2DotVV(this.m_axis,box2d.b2SubVV(A,D,box2d.b2Vec2.s_t0))+this.m_a2*B-this.m_a1*C,u=this.m_motorMass*(this.m_motorSpeed-u),r=this.m_motorImpulse,q=E.step.dt*this.m_maxMotorForce;this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+u,-q,q);u=this.m_motorImpulse-r;r=box2d.b2MulSV(u,this.m_axis,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P);q=u*this.m_a1;u*=this.m_a2;D.SelfMulSub(z,r);C-=v*q;A.SelfMulAdd(y,r);B+=s*u}var q=box2d.b2DotVV(this.m_perp,box2d.b2SubVV(A,D,box2d.b2Vec2.s_t0))+this.m_s2*B-this.m_s1*C,j=B-C;this.m_enableLimit&&this.m_limitState!=box2d.b2LimitState.e_inactiveLimit?(u=box2d.b2DotVV(this.m_axis,box2d.b2SubVV(A,D,box2d.b2Vec2.s_t0))+this.m_a2*B-this.m_a1*C,r=box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f1.Copy(this.m_impulse),u=this.m_K.Solve33(-q,-j,-u,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df3),this.m_impulse.SelfAdd(u),this.m_limitState==box2d.b2LimitState.e_atLowerLimit?this.m_impulse.z=box2d.b2Max(this.m_impulse.z,0):this.m_limitState==box2d.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=box2d.b2Min(this.m_impulse.z,0)),q=this.m_K.Solve22(-q-(this.m_impulse.z-r.z)*this.m_K.ez.x,-j-(this.m_impulse.z-r.z)*this.m_K.ez.y,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f2r),q.x+=r.x,q.y+=r.y,this.m_impulse.x=q.x,this.m_impulse.y=q.y,u.x=this.m_impulse.x-r.x,u.y=this.m_impulse.y-r.y,u.z=this.m_impulse.z-r.z,r=box2d.b2AddVV(box2d.b2MulSV(u.x,this.m_perp,box2d.b2Vec2.s_t0),box2d.b2MulSV(u.z,this.m_axis,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P),q=u.x*this.m_s1+u.y+u.z*this.m_a1,u=u.x*this.m_s2+u.y+u.z*this.m_a2):(u=this.m_K.Solve22(-q,-j,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df2),this.m_impulse.x+=u.x,this.m_impulse.y+=u.y,r=box2d.b2MulSV(u.x,this.m_perp,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P),q=u.x*this.m_s1+u.y,u=u.x*this.m_s2+u.y);D.SelfMulSub(z,r);C-=v*q;A.SelfMulAdd(y,r);E.velocities[this.m_indexA].w=C;E.velocities[this.m_indexB].w=B+s*u};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SolveVelocityConstraints",box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints);box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f2r=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f1=new box2d.b2Vec3;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df3=new box2d.b2Vec3;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df2=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolvePositionConstraints=function(ad){var ac=ad.positions[this.m_indexA].c,ab=ad.positions[this.m_indexA].a,Z=ad.positions[this.m_indexB].c,aa=ad.positions[this.m_indexB].a,Y=this.m_qA.SetAngleRadians(ab),X=this.m_qB.SetAngleRadians(aa),W=this.m_invMassA,U=this.m_invMassB,V=this.m_invIA,T=this.m_invIB,S=box2d.b2MulRV(Y,this.m_lalcA,this.m_rA),R=box2d.b2MulRV(X,this.m_lalcB,this.m_rB),P=box2d.b2SubVV(box2d.b2AddVV(Z,R,box2d.b2Vec2.s_t0),box2d.b2AddVV(ac,S,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_d),N=box2d.b2MulRV(Y,this.m_localXAxisA,this.m_axis),J=box2d.b2CrossVV(box2d.b2AddVV(P,S,box2d.b2Vec2.s_t0),N),X=box2d.b2CrossVV(R,N),Y=box2d.b2MulRV(Y,this.m_localYAxisA,this.m_perp),L=box2d.b2CrossVV(box2d.b2AddVV(P,S,box2d.b2Vec2.s_t0),Y),H=box2d.b2CrossVV(R,Y),G=box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse,j=box2d.b2DotVV(Y,P),K=aa-ab-this.m_referenceAngle,S=box2d.b2Abs(j),R=box2d.b2Abs(K),z=!1,F=0;this.m_enableLimit&&(P=box2d.b2DotVV(N,P),box2d.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*box2d.b2_linearSlop?(F=box2d.b2Clamp(P,-box2d.b2_maxLinearCorrection,box2d.b2_maxLinearCorrection),S=box2d.b2Max(S,box2d.b2Abs(P)),z=!0):P<=this.m_lowerTranslation?(F=box2d.b2Clamp(P-this.m_lowerTranslation+box2d.b2_linearSlop,-box2d.b2_maxLinearCorrection,0),S=box2d.b2Max(S,this.m_lowerTranslation-P),z=!0):P>=this.m_upperTranslation&&(F=box2d.b2Clamp(P-this.m_upperTranslation-box2d.b2_linearSlop,0,box2d.b2_maxLinearCorrection),S=box2d.b2Max(S,P-this.m_upperTranslation),z=!0));if(z){var P=V*L+T*H,M=V*L*J+T*H*X,z=V+T;0==z&&(z=1);var Q=V*J+T*X,I=W+U+V*J*J+T*X*X,O=this.m_K3;O.ex.SetXYZ(W+U+V*L*L+T*H*H,P,M);O.ey.SetXYZ(P,z,Q);O.ez.SetXYZ(M,Q,I);G=O.Solve33(-j,-K,-F,G)}else{P=V*L+T*H,z=V+T,0==z&&(z=1),F=this.m_K2,F.ex.SetXY(W+U+V*L*L+T*H*H,P),F.ey.SetXY(P,z),j=F.Solve(-j,-K,box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse1),G.x=j.x,G.y=j.y,G.z=0}N=box2d.b2AddVV(box2d.b2MulSV(G.x,Y,box2d.b2Vec2.s_t0),box2d.b2MulSV(G.z,N,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_P);J=G.x*L+G.y+G.z*J;X=G.x*H+G.y+G.z*X;ac.SelfMulSub(W,N);ab-=V*J;Z.SelfMulAdd(U,N);ad.positions[this.m_indexA].a=ab;ad.positions[this.m_indexB].a=aa+T*X;return S<=box2d.b2_linearSlop&&R<=box2d.b2_angularSlop};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SolvePositionConstraints",box2d.b2PrismaticJoint.prototype.SolvePositionConstraints);box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_d=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec3;box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse1=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetAnchorA",box2d.b2PrismaticJoint.prototype.GetAnchorA);box2d.b2PrismaticJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetAnchorB",box2d.b2PrismaticJoint.prototype.GetAnchorB);box2d.b2PrismaticJoint.prototype.GetReactionForce=function(e,d){return d.SetXY(e*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),e*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetReactionForce",box2d.b2PrismaticJoint.prototype.GetReactionForce);box2d.b2PrismaticJoint.prototype.GetReactionTorque=function(b){return b*this.m_impulse.y};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetReactionTorque",box2d.b2PrismaticJoint.prototype.GetReactionTorque);box2d.b2PrismaticJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLocalAnchorA",box2d.b2PrismaticJoint.prototype.GetLocalAnchorA);box2d.b2PrismaticJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLocalAnchorB",box2d.b2PrismaticJoint.prototype.GetLocalAnchorB);box2d.b2PrismaticJoint.prototype.GetLocalAxisA=function(b){return b.Copy(this.m_localXAxisA)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLocalAxisA",box2d.b2PrismaticJoint.prototype.GetLocalAxisA);box2d.b2PrismaticJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetReferenceAngle",box2d.b2PrismaticJoint.prototype.GetReferenceAngle);box2d.b2PrismaticJoint.prototype.GetJointTranslation=function(){var e=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pA),d=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pB),e=box2d.b2SubVV(d,e,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_d),d=this.m_bodyA.GetWorldVector(this.m_localXAxisA,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_axis);return box2d.b2DotVV(e,d)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetJointTranslation",box2d.b2PrismaticJoint.prototype.GetJointTranslation);box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pA=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pB=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_d=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_axis=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetJointSpeed=function(){var k=this.m_bodyA,j=this.m_bodyB;box2d.b2SubVV(this.m_localAnchorA,k.m_sweep.localCenter,this.m_lalcA);var u=box2d.b2MulRV(k.m_xf.q,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,j.m_sweep.localCenter,this.m_lalcB);var r=box2d.b2MulRV(j.m_xf.q,this.m_lalcB,this.m_rB),s=box2d.b2AddVV(k.m_sweep.c,u,box2d.b2Vec2.s_t0),q=box2d.b2AddVV(j.m_sweep.c,r,box2d.b2Vec2.s_t1),s=box2d.b2SubVV(q,s,box2d.b2Vec2.s_t2),q=k.GetWorldVector(this.m_localXAxisA,this.m_axis),n=k.m_linearVelocity,m=j.m_linearVelocity,k=k.m_angularVelocity,j=j.m_angularVelocity;return box2d.b2DotVV(s,box2d.b2CrossSV(k,q,box2d.b2Vec2.s_t0))+box2d.b2DotVV(q,box2d.b2SubVV(box2d.b2AddVCrossSV(m,j,r,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(n,k,u,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0))};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetJointSpeed",box2d.b2PrismaticJoint.prototype.GetJointSpeed);box2d.b2PrismaticJoint.prototype.IsLimitEnabled=function(){return this.m_enableLimit};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"IsLimitEnabled",box2d.b2PrismaticJoint.prototype.IsLimitEnabled);box2d.b2PrismaticJoint.prototype.EnableLimit=function(b){b!=this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=b,this.m_impulse.z=0)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"EnableLimit",box2d.b2PrismaticJoint.prototype.EnableLimit);box2d.b2PrismaticJoint.prototype.GetLowerLimit=function(){return this.m_lowerTranslation};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLowerLimit",box2d.b2PrismaticJoint.prototype.GetLowerLimit);box2d.b2PrismaticJoint.prototype.GetUpperLimit=function(){return this.m_upperTranslation};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetUpperLimit",box2d.b2PrismaticJoint.prototype.GetUpperLimit);box2d.b2PrismaticJoint.prototype.SetLimits=function(e,d){if(e!=this.m_lowerTranslation||d!=this.m_upperTranslation){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=e,this.m_upperTranslation=d,this.m_impulse.z=0}};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SetLimits",box2d.b2PrismaticJoint.prototype.SetLimits);box2d.b2PrismaticJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"IsMotorEnabled",box2d.b2PrismaticJoint.prototype.IsMotorEnabled);box2d.b2PrismaticJoint.prototype.EnableMotor=function(b){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_enableMotor=b};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"EnableMotor",box2d.b2PrismaticJoint.prototype.EnableMotor);box2d.b2PrismaticJoint.prototype.SetMotorSpeed=function(b){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_motorSpeed=b};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SetMotorSpeed",box2d.b2PrismaticJoint.prototype.SetMotorSpeed);box2d.b2PrismaticJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetMotorSpeed",box2d.b2PrismaticJoint.prototype.GetMotorSpeed);box2d.b2PrismaticJoint.prototype.SetMaxMotorForce=function(b){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_maxMotorForce=b};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SetMaxMotorForce",box2d.b2PrismaticJoint.prototype.SetMaxMotorForce);box2d.b2PrismaticJoint.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetMaxMotorForce",box2d.b2PrismaticJoint.prototype.GetMaxMotorForce);box2d.b2PrismaticJoint.prototype.GetMotorForce=function(b){return b*this.m_motorImpulse};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetMotorForce",box2d.b2PrismaticJoint.prototype.GetMotorForce);box2d.b2PrismaticJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2PrismaticJointDef*/ var jd = new box2d.b2PrismaticJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.localAxisA.SetXY(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y);box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle);box2d.b2Log("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false");box2d.b2Log("  jd.lowerTranslation = %.15f;\n",this.m_lowerTranslation);box2d.b2Log("  jd.upperTranslation = %.15f;\n",this.m_upperTranslation);box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false");box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed);box2d.b2Log("  jd.maxMotorForce = %.15f;\n",this.m_maxMotorForce);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"Dump",box2d.b2PrismaticJoint.prototype.Dump);box2d.b2GearJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_gearJoint)};goog.inherits(box2d.b2GearJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2GearJointDef",box2d.b2GearJointDef);box2d.b2GearJointDef.prototype.joint1=null;goog.exportProperty(box2d.b2GearJointDef.prototype,"joint1",box2d.b2GearJointDef.prototype.joint1);box2d.b2GearJointDef.prototype.joint2=null;goog.exportProperty(box2d.b2GearJointDef.prototype,"joint2",box2d.b2GearJointDef.prototype.joint2);box2d.b2GearJointDef.prototype.ratio=1;goog.exportProperty(box2d.b2GearJointDef.prototype,"ratio",box2d.b2GearJointDef.prototype.ratio);box2d.b2GearJoint=function(j){box2d.b2Joint.call(this,j);this.m_joint1=j.joint1;this.m_joint2=j.joint2;this.m_localAnchorA=new box2d.b2Vec2;this.m_localAnchorB=new box2d.b2Vec2;this.m_localAnchorC=new box2d.b2Vec2;this.m_localAnchorD=new box2d.b2Vec2;this.m_localAxisC=new box2d.b2Vec2;this.m_localAxisD=new box2d.b2Vec2;this.m_lcA=new box2d.b2Vec2;this.m_lcB=new box2d.b2Vec2;this.m_lcC=new box2d.b2Vec2;this.m_lcD=new box2d.b2Vec2;this.m_JvAC=new box2d.b2Vec2;this.m_JvBD=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_qC=new box2d.b2Rot;this.m_qD=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_lalcC=new box2d.b2Vec2;this.m_lalcD=new box2d.b2Vec2;this.m_typeA=this.m_joint1.GetType();this.m_typeB=this.m_joint2.GetType();box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_typeA==box2d.b2JointType.e_revoluteJoint||this.m_typeA==box2d.b2JointType.e_prismaticJoint);box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_typeB==box2d.b2JointType.e_revoluteJoint||this.m_typeB==box2d.b2JointType.e_prismaticJoint);var g,q;this.m_bodyC=this.m_joint1.GetBodyA();this.m_bodyA=this.m_joint1.GetBodyB();g=this.m_bodyA.m_xf;var m=this.m_bodyA.m_sweep.a;q=this.m_bodyC.m_xf;var n=this.m_bodyC.m_sweep.a;this.m_typeA==box2d.b2JointType.e_revoluteJoint?(q=j.joint1,this.m_localAnchorC.Copy(q.m_localAnchorA),this.m_localAnchorA.Copy(q.m_localAnchorB),this.m_referenceAngleA=q.m_referenceAngle,this.m_localAxisC.SetZero(),g=m-n-this.m_referenceAngleA):(n=j.joint1,this.m_localAnchorC.Copy(n.m_localAnchorA),this.m_localAnchorA.Copy(n.m_localAnchorB),this.m_referenceAngleA=n.m_referenceAngle,this.m_localAxisC.Copy(n.m_localXAxisA),m=this.m_localAnchorC,g=box2d.b2MulTRV(q.q,box2d.b2AddVV(box2d.b2MulRV(g.q,this.m_localAnchorA,box2d.b2Vec2.s_t0),box2d.b2SubVV(g.p,q.p,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),g=box2d.b2DotVV(box2d.b2SubVV(g,m,box2d.b2Vec2.s_t0),this.m_localAxisC));this.m_bodyD=this.m_joint2.GetBodyA();this.m_bodyB=this.m_joint2.GetBodyB();q=this.m_bodyB.m_xf;var n=this.m_bodyB.m_sweep.a,m=this.m_bodyD.m_xf,k=this.m_bodyD.m_sweep.a;this.m_typeB==box2d.b2JointType.e_revoluteJoint?(q=j.joint2,this.m_localAnchorD.Copy(q.m_localAnchorA),this.m_localAnchorB.Copy(q.m_localAnchorB),this.m_referenceAngleB=q.m_referenceAngle,this.m_localAxisD.SetZero(),q=n-k-this.m_referenceAngleB):(n=j.joint2,this.m_localAnchorD.Copy(n.m_localAnchorA),this.m_localAnchorB.Copy(n.m_localAnchorB),this.m_referenceAngleB=n.m_referenceAngle,this.m_localAxisD.Copy(n.m_localXAxisA),n=this.m_localAnchorD,q=box2d.b2MulTRV(m.q,box2d.b2AddVV(box2d.b2MulRV(q.q,this.m_localAnchorB,box2d.b2Vec2.s_t0),box2d.b2SubVV(q.p,m.p,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),q=box2d.b2DotVV(box2d.b2SubVV(q,n,box2d.b2Vec2.s_t0),this.m_localAxisD));this.m_ratio=j.ratio;this.m_constant=g+this.m_ratio*q;this.m_impulse=0};goog.inherits(box2d.b2GearJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2GearJoint",box2d.b2GearJoint);box2d.b2GearJoint.prototype.m_joint1=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_joint1",box2d.b2GearJoint.prototype.m_joint1);box2d.b2GearJoint.prototype.m_joint2=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_joint2",box2d.b2GearJoint.prototype.m_joint2);box2d.b2GearJoint.prototype.m_typeA=box2d.b2JointType.e_unknownJoint;goog.exportProperty(box2d.b2GearJoint.prototype,"m_typeA",box2d.b2GearJoint.prototype.m_typeA);box2d.b2GearJoint.prototype.m_typeB=box2d.b2JointType.e_unknownJoint;goog.exportProperty(box2d.b2GearJoint.prototype,"m_typeB",box2d.b2GearJoint.prototype.m_typeB);box2d.b2GearJoint.prototype.m_bodyC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_bodyC",box2d.b2GearJoint.prototype.m_bodyC);box2d.b2GearJoint.prototype.m_bodyD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_bodyD",box2d.b2GearJoint.prototype.m_bodyD);box2d.b2GearJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorA",box2d.b2GearJoint.prototype.m_localAnchorA);box2d.b2GearJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorB",box2d.b2GearJoint.prototype.m_localAnchorB);box2d.b2GearJoint.prototype.m_localAnchorC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorC",box2d.b2GearJoint.prototype.m_localAnchorC);box2d.b2GearJoint.prototype.m_localAnchorD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorD",box2d.b2GearJoint.prototype.m_localAnchorD);box2d.b2GearJoint.prototype.m_localAxisC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAxisC",box2d.b2GearJoint.prototype.m_localAxisC);box2d.b2GearJoint.prototype.m_localAxisD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAxisD",box2d.b2GearJoint.prototype.m_localAxisD);box2d.b2GearJoint.prototype.m_referenceAngleA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_referenceAngleA",box2d.b2GearJoint.prototype.m_referenceAngleA);box2d.b2GearJoint.prototype.m_referenceAngleB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_referenceAngleB",box2d.b2GearJoint.prototype.m_referenceAngleB);box2d.b2GearJoint.prototype.m_constant=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_constant",box2d.b2GearJoint.prototype.m_constant);box2d.b2GearJoint.prototype.m_ratio=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_ratio",box2d.b2GearJoint.prototype.m_ratio);box2d.b2GearJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_impulse",box2d.b2GearJoint.prototype.m_impulse);box2d.b2GearJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexA",box2d.b2GearJoint.prototype.m_indexA);box2d.b2GearJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexB",box2d.b2GearJoint.prototype.m_indexB);box2d.b2GearJoint.prototype.m_indexC=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexC",box2d.b2GearJoint.prototype.m_indexC);box2d.b2GearJoint.prototype.m_indexD=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexD",box2d.b2GearJoint.prototype.m_indexD);box2d.b2GearJoint.prototype.m_lcA=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcA",box2d.b2GearJoint.prototype.m_lcA);box2d.b2GearJoint.prototype.m_lcB=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcB",box2d.b2GearJoint.prototype.m_lcB);box2d.b2GearJoint.prototype.m_lcC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcC",box2d.b2GearJoint.prototype.m_lcC);box2d.b2GearJoint.prototype.m_lcD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcD",box2d.b2GearJoint.prototype.m_lcD);box2d.b2GearJoint.prototype.m_mA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mA",box2d.b2GearJoint.prototype.m_mA);box2d.b2GearJoint.prototype.m_mB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mB",box2d.b2GearJoint.prototype.m_mB);box2d.b2GearJoint.prototype.m_mC=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mC",box2d.b2GearJoint.prototype.m_mC);box2d.b2GearJoint.prototype.m_mD=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mD",box2d.b2GearJoint.prototype.m_mD);box2d.b2GearJoint.prototype.m_iA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_iA",box2d.b2GearJoint.prototype.m_iA);box2d.b2GearJoint.prototype.m_iB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_iB",box2d.b2GearJoint.prototype.m_iB);box2d.b2GearJoint.prototype.m_iC=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_iC",box2d.b2GearJoint.prototype.m_iC);box2d.b2GearJoint.prototype.m_iD=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_iD",box2d.b2GearJoint.prototype.m_iD);box2d.b2GearJoint.prototype.m_JvAC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JvAC",box2d.b2GearJoint.prototype.m_JvAC);box2d.b2GearJoint.prototype.m_JvBD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JvBD",box2d.b2GearJoint.prototype.m_JvBD);box2d.b2GearJoint.prototype.m_JwA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwA",box2d.b2GearJoint.prototype.m_JwA);box2d.b2GearJoint.prototype.m_JwB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwB",box2d.b2GearJoint.prototype.m_JwB);box2d.b2GearJoint.prototype.m_JwC=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwC",box2d.b2GearJoint.prototype.m_JwC);box2d.b2GearJoint.prototype.m_JwD=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwD",box2d.b2GearJoint.prototype.m_JwD);box2d.b2GearJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mass",box2d.b2GearJoint.prototype.m_mass);box2d.b2GearJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_qA",box2d.b2GearJoint.prototype.m_qA);box2d.b2GearJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_qB",box2d.b2GearJoint.prototype.m_qB);box2d.b2GearJoint.prototype.m_qC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_qC",box2d.b2GearJoint.prototype.m_qC);box2d.b2GearJoint.prototype.m_qD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_qD",box2d.b2GearJoint.prototype.m_qD);box2d.b2GearJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcA",box2d.b2GearJoint.prototype.m_lalcA);box2d.b2GearJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcB",box2d.b2GearJoint.prototype.m_lalcB);box2d.b2GearJoint.prototype.m_lalcC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcC",box2d.b2GearJoint.prototype.m_lalcC);box2d.b2GearJoint.prototype.m_lalcD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcD",box2d.b2GearJoint.prototype.m_lalcD);box2d.b2GearJoint.prototype.InitVelocityConstraints=function(G){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_indexC=this.m_bodyC.m_islandIndex;this.m_indexD=this.m_bodyD.m_islandIndex;this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter);this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter);this.m_mA=this.m_bodyA.m_invMass;this.m_mB=this.m_bodyB.m_invMass;this.m_mC=this.m_bodyC.m_invMass;this.m_mD=this.m_bodyD.m_invMass;this.m_iA=this.m_bodyA.m_invI;this.m_iB=this.m_bodyB.m_invI;this.m_iC=this.m_bodyC.m_invI;this.m_iD=this.m_bodyD.m_invI;var F=G.velocities[this.m_indexA].v,E=G.velocities[this.m_indexA].w,C=G.positions[this.m_indexB].a,D=G.velocities[this.m_indexB].v,B=G.velocities[this.m_indexB].w,A=G.positions[this.m_indexC].a,z=G.velocities[this.m_indexC].v,v=G.velocities[this.m_indexC].w,y=G.positions[this.m_indexD].a,u=G.velocities[this.m_indexD].v,s=G.velocities[this.m_indexD].w,r=this.m_qA.SetAngleRadians(G.positions[this.m_indexA].a),C=this.m_qB.SetAngleRadians(C),j=this.m_qC.SetAngleRadians(A),A=this.m_qD.SetAngleRadians(y);this.m_mass=0;this.m_typeA==box2d.b2JointType.e_revoluteJoint?(this.m_JvAC.SetZero(),this.m_JwC=this.m_JwA=1,this.m_mass+=this.m_iA+this.m_iC):(y=box2d.b2MulRV(j,this.m_localAxisC,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u),box2d.b2SubVV(this.m_localAnchorC,this.m_lcC,this.m_lalcC),j=box2d.b2MulRV(j,this.m_lalcC,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rC),box2d.b2SubVV(this.m_localAnchorA,this.m_lcA,this.m_lalcA),r=box2d.b2MulRV(r,this.m_lalcA,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rA),this.m_JvAC.Copy(y),this.m_JwC=box2d.b2CrossVV(j,y),this.m_JwA=box2d.b2CrossVV(r,y),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA);this.m_typeB==box2d.b2JointType.e_revoluteJoint?(this.m_JvBD.SetZero(),this.m_JwD=this.m_JwB=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD)):(y=box2d.b2MulRV(A,this.m_localAxisD,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u),box2d.b2SubVV(this.m_localAnchorD,this.m_lcD,this.m_lalcD),r=box2d.b2MulRV(A,this.m_lalcD,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rD),box2d.b2SubVV(this.m_localAnchorB,this.m_lcB,this.m_lalcB),C=box2d.b2MulRV(C,this.m_lalcB,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rB),box2d.b2MulSV(this.m_ratio,y,this.m_JvBD),this.m_JwD=this.m_ratio*box2d.b2CrossVV(r,y),this.m_JwB=this.m_ratio*box2d.b2CrossVV(C,y),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB);this.m_mass=0<this.m_mass?1/this.m_mass:0;G.step.warmStarting?(F.SelfMulAdd(this.m_mA*this.m_impulse,this.m_JvAC),E+=this.m_iA*this.m_impulse*this.m_JwA,D.SelfMulAdd(this.m_mB*this.m_impulse,this.m_JvBD),B+=this.m_iB*this.m_impulse*this.m_JwB,z.SelfMulSub(this.m_mC*this.m_impulse,this.m_JvAC),v-=this.m_iC*this.m_impulse*this.m_JwC,u.SelfMulSub(this.m_mD*this.m_impulse,this.m_JvBD),s-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0;G.velocities[this.m_indexA].w=E;G.velocities[this.m_indexB].w=B;G.velocities[this.m_indexC].w=v;G.velocities[this.m_indexD].w=s};box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u=new box2d.b2Vec2;box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rA=new box2d.b2Vec2;box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rB=new box2d.b2Vec2;box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rC=new box2d.b2Vec2;box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rD=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolveVelocityConstraints=function(z){var y=z.velocities[this.m_indexA].v,v=z.velocities[this.m_indexA].w,s=z.velocities[this.m_indexB].v,u=z.velocities[this.m_indexB].w,r=z.velocities[this.m_indexC].v,q=z.velocities[this.m_indexC].w,n=z.velocities[this.m_indexD].v,j=z.velocities[this.m_indexD].w,m=box2d.b2DotVV(this.m_JvAC,box2d.b2SubVV(y,r,box2d.b2Vec2.s_t0))+box2d.b2DotVV(this.m_JvBD,box2d.b2SubVV(s,n,box2d.b2Vec2.s_t0)),m=m+(this.m_JwA*v-this.m_JwC*q+(this.m_JwB*u-this.m_JwD*j)),m=-this.m_mass*m;this.m_impulse+=m;y.SelfMulAdd(this.m_mA*m,this.m_JvAC);v+=this.m_iA*m*this.m_JwA;s.SelfMulAdd(this.m_mB*m,this.m_JvBD);u+=this.m_iB*m*this.m_JwB;r.SelfMulSub(this.m_mC*m,this.m_JvAC);q-=this.m_iC*m*this.m_JwC;n.SelfMulSub(this.m_mD*m,this.m_JvBD);j-=this.m_iD*m*this.m_JwD;z.velocities[this.m_indexA].w=v;z.velocities[this.m_indexB].w=u;z.velocities[this.m_indexC].w=q;z.velocities[this.m_indexD].w=j};box2d.b2GearJoint.prototype.SolvePositionConstraints=function(R){var Q=R.positions[this.m_indexA].c,P=R.positions[this.m_indexA].a,N=R.positions[this.m_indexB].c,O=R.positions[this.m_indexB].a,M=R.positions[this.m_indexC].c,L=R.positions[this.m_indexC].a,K=R.positions[this.m_indexD].c,I=R.positions[this.m_indexD].a,J=this.m_qA.SetAngleRadians(P),H=this.m_qB.SetAngleRadians(O),G=this.m_qC.SetAngleRadians(L),F=this.m_qD.SetAngleRadians(I),E=this.m_JvAC,D=this.m_JvBD,B,C,A=0;if(this.m_typeA==box2d.b2JointType.e_revoluteJoint){E.SetZero(),J=B=1,A+=this.m_iA+this.m_iC,G=P-L-this.m_referenceAngleA}else{C=box2d.b2MulRV(G,this.m_localAxisC,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u);B=box2d.b2MulRV(G,this.m_lalcC,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rC);var z=box2d.b2MulRV(J,this.m_lalcA,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rA);E.Copy(C);J=box2d.b2CrossVV(B,C);B=box2d.b2CrossVV(z,C);A+=this.m_mC+this.m_mA+this.m_iC*J*J+this.m_iA*B*B;C=this.m_lalcC;G=box2d.b2MulTRV(G,box2d.b2AddVV(z,box2d.b2SubVV(Q,M,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0);G=box2d.b2DotVV(box2d.b2SubVV(G,C,box2d.b2Vec2.s_t0),this.m_localAxisC)}if(this.m_typeB==box2d.b2JointType.e_revoluteJoint){D.SetZero(),H=C=this.m_ratio,A+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),F=O-I-this.m_referenceAngleB}else{C=box2d.b2MulRV(F,this.m_localAxisD,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u);var j=box2d.b2MulRV(F,this.m_lalcD,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rD),z=box2d.b2MulRV(H,this.m_lalcB,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rB);box2d.b2MulSV(this.m_ratio,C,D);H=this.m_ratio*box2d.b2CrossVV(j,C);C=this.m_ratio*box2d.b2CrossVV(z,C);A+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*H*H+this.m_iB*C*C;j=this.m_lalcD;F=box2d.b2MulTRV(F,box2d.b2AddVV(z,box2d.b2SubVV(N,K,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0);F=box2d.b2DotVV(box2d.b2SubVV(F,j,box2d.b2Vec2.s_t0),this.m_localAxisD)}F=G+this.m_ratio*F-this.m_constant;G=0;0<A&&(G=-F/A);Q.SelfMulAdd(this.m_mA*G,E);P+=this.m_iA*G*B;N.SelfMulAdd(this.m_mB*G,D);O+=this.m_iB*G*C;M.SelfMulSub(this.m_mC*G,E);L-=this.m_iC*G*J;K.SelfMulSub(this.m_mD*G,D);I-=this.m_iD*G*H;R.positions[this.m_indexA].a=P;R.positions[this.m_indexB].a=O;R.positions[this.m_indexC].a=L;R.positions[this.m_indexD].a=I;return 0<box2d.b2_linearSlop};goog.exportProperty(box2d.b2GearJoint.prototype,"SolvePositionConstraints",box2d.b2GearJoint.prototype.SolvePositionConstraints);box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rA=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rB=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rC=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rD=new box2d.b2Vec2;box2d.b2GearJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2GearJoint.prototype,"GetAnchorA",box2d.b2GearJoint.prototype.GetAnchorA);box2d.b2GearJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2GearJoint.prototype,"GetAnchorB",box2d.b2GearJoint.prototype.GetAnchorB);box2d.b2GearJoint.prototype.GetReactionForce=function(e,d){return box2d.b2MulSV(e*this.m_impulse,this.m_JvAC,d)};goog.exportProperty(box2d.b2GearJoint.prototype,"GetReactionForce",box2d.b2GearJoint.prototype.GetReactionForce);box2d.b2GearJoint.prototype.GetReactionTorque=function(b){return b*this.m_impulse*this.m_JwA};goog.exportProperty(box2d.b2GearJoint.prototype,"GetReactionTorque",box2d.b2GearJoint.prototype.GetReactionTorque);box2d.b2GearJoint.prototype.GetJoint1=function(){return this.m_joint1};goog.exportProperty(box2d.b2GearJoint.prototype,"GetJoint1",box2d.b2GearJoint.prototype.GetJoint1);box2d.b2GearJoint.prototype.GetJoint2=function(){return this.m_joint2};goog.exportProperty(box2d.b2GearJoint.prototype,"GetJoint2",box2d.b2GearJoint.prototype.GetJoint2);box2d.b2GearJoint.prototype.GetRatio=function(){return this.m_ratio};goog.exportProperty(box2d.b2GearJoint.prototype,"GetRatio",box2d.b2GearJoint.prototype.GetRatio);box2d.b2GearJoint.prototype.SetRatio=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(b));this.m_ratio=b};goog.exportProperty(box2d.b2GearJoint.prototype,"SetRatio",box2d.b2GearJoint.prototype.SetRatio);box2d.b2GearJoint.prototype.Dump=function(){if(box2d.DEBUG){var f=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex,j=this.m_joint1.m_index,g=this.m_joint2.m_index;box2d.b2Log("  /*box2d.b2GearJointDef*/ var jd = new box2d.b2GearJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",f);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.joint1 = joints[%d];\n",j);box2d.b2Log("  jd.joint2 = joints[%d];\n",g);box2d.b2Log("  jd.ratio = %.15f;\n",this.m_ratio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2GearJoint.prototype,"Dump",box2d.b2GearJoint.prototype.Dump);box2d.b2DistanceProxy=function(){this.m_buffer=box2d.b2Vec2.MakeArray(2)};goog.exportSymbol("box2d.b2DistanceProxy",box2d.b2DistanceProxy);box2d.b2DistanceProxy.prototype.m_buffer=null;goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_buffer",box2d.b2DistanceProxy.prototype.m_buffer);box2d.b2DistanceProxy.prototype.m_vertices=null;goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_vertices",box2d.b2DistanceProxy.prototype.m_vertices);box2d.b2DistanceProxy.prototype.m_count=0;goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_count",box2d.b2DistanceProxy.prototype.m_count);box2d.b2DistanceProxy.prototype.m_radius=0;goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_radius",box2d.b2DistanceProxy.prototype.m_radius);box2d.b2DistanceProxy.prototype.Reset=function(){this.m_vertices=null;this.m_radius=this.m_count=0;return this};goog.exportProperty(box2d.b2DistanceProxy.prototype,"Reset",box2d.b2DistanceProxy.prototype.Reset);box2d.b2DistanceProxy.prototype.SetShape=function(e,d){e.SetupDistanceProxy(this,d)};goog.exportProperty(box2d.b2DistanceProxy.prototype,"SetShape",box2d.b2DistanceProxy.prototype.SetShape);box2d.b2DistanceProxy.prototype.GetSupport=function(g){for(var f=0,m=box2d.b2DotVV(this.m_vertices[0],g),j=1;j<this.m_count;++j){var k=box2d.b2DotVV(this.m_vertices[j],g);k>m&&(f=j,m=k)}return f};goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetSupport",box2d.b2DistanceProxy.prototype.GetSupport);box2d.b2DistanceProxy.prototype.GetSupportVertex=function(j,g){for(var q=0,m=box2d.b2DotVV(this.m_vertices[0],j),n=1;n<this.m_count;++n){var k=box2d.b2DotVV(this.m_vertices[n],j);k>m&&(q=n,m=k)}return g.Copy(this.m_vertices[q])};goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetSupportVertex",box2d.b2DistanceProxy.prototype.GetSupportVertex);box2d.b2DistanceProxy.prototype.GetVertexCount=function(){return this.m_count};goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetVertexCount",box2d.b2DistanceProxy.prototype.GetVertexCount);box2d.b2DistanceProxy.prototype.GetVertex=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=b&&b<this.m_count);return this.m_vertices[b]};goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetVertex",box2d.b2DistanceProxy.prototype.GetVertex);box2d.b2SimplexCache=function(){this.indexA=box2d.b2MakeNumberArray(3);this.indexB=box2d.b2MakeNumberArray(3)};goog.exportSymbol("box2d.b2SimplexCache",box2d.b2SimplexCache);box2d.b2SimplexCache.prototype.metric=0;goog.exportProperty(box2d.b2SimplexCache.prototype,"metric",box2d.b2SimplexCache.prototype.metric);box2d.b2SimplexCache.prototype.count=0;goog.exportProperty(box2d.b2SimplexCache.prototype,"count",box2d.b2SimplexCache.prototype.count);box2d.b2SimplexCache.prototype.indexA=null;goog.exportProperty(box2d.b2SimplexCache.prototype,"indexA",box2d.b2SimplexCache.prototype.indexA);box2d.b2SimplexCache.prototype.indexB=null;goog.exportProperty(box2d.b2SimplexCache.prototype,"indexB",box2d.b2SimplexCache.prototype.indexB);box2d.b2SimplexCache.prototype.Reset=function(){this.count=this.metric=0;return this};goog.exportProperty(box2d.b2SimplexCache.prototype,"Reset",box2d.b2SimplexCache.prototype.Reset);box2d.b2DistanceInput=function(){this.proxyA=new box2d.b2DistanceProxy;this.proxyB=new box2d.b2DistanceProxy;this.transformA=new box2d.b2Transform;this.transformB=new box2d.b2Transform};goog.exportSymbol("box2d.b2DistanceInput",box2d.b2DistanceInput);box2d.b2DistanceInput.prototype.proxyA=null;goog.exportProperty(box2d.b2DistanceInput.prototype,"proxyA",box2d.b2DistanceInput.prototype.proxyA);box2d.b2DistanceInput.prototype.proxyB=null;goog.exportProperty(box2d.b2DistanceInput.prototype,"proxyB",box2d.b2DistanceInput.prototype.proxyB);box2d.b2DistanceInput.prototype.transformA=null;goog.exportProperty(box2d.b2DistanceInput.prototype,"transformA",box2d.b2DistanceInput.prototype.transformA);box2d.b2DistanceInput.prototype.transformB=null;goog.exportProperty(box2d.b2DistanceInput.prototype,"transformB",box2d.b2DistanceInput.prototype.transformB);box2d.b2DistanceInput.prototype.useRadii=!1;goog.exportProperty(box2d.b2DistanceInput.prototype,"useRadii",box2d.b2DistanceInput.prototype.useRadii);box2d.b2DistanceInput.prototype.Reset=function(){this.proxyA.Reset();this.proxyB.Reset();this.transformA.SetIdentity();this.transformB.SetIdentity();this.useRadii=!1;return this};goog.exportProperty(box2d.b2DistanceInput.prototype,"Reset",box2d.b2DistanceInput.prototype.Reset);box2d.b2DistanceOutput=function(){this.pointA=new box2d.b2Vec2;this.pointB=new box2d.b2Vec2};goog.exportSymbol("box2d.b2DistanceOutput",box2d.b2DistanceOutput);box2d.b2DistanceOutput.prototype.pointA=null;goog.exportProperty(box2d.b2DistanceOutput.prototype,"pointA",box2d.b2DistanceOutput.prototype.pointA);box2d.b2DistanceOutput.prototype.pointB=null;goog.exportProperty(box2d.b2DistanceOutput.prototype,"pointB",box2d.b2DistanceOutput.prototype.pointB);box2d.b2DistanceOutput.prototype.distance=0;goog.exportProperty(box2d.b2DistanceOutput.prototype,"distance",box2d.b2DistanceOutput.prototype.distance);box2d.b2DistanceOutput.prototype.iterations=0;goog.exportProperty(box2d.b2DistanceOutput.prototype,"iterations",box2d.b2DistanceOutput.prototype.iterations);box2d.b2DistanceOutput.prototype.Reset=function(){this.pointA.SetZero();this.pointB.SetZero();this.iterations=this.distance=0;return this};goog.exportProperty(box2d.b2DistanceOutput.prototype,"Reset",box2d.b2DistanceOutput.prototype.Reset);box2d.b2_gjkCalls=0;goog.exportSymbol("box2d.b2_gjkCalls",box2d.b2_gjkCalls);box2d.b2_gjkIters=0;goog.exportSymbol("box2d.b2_gjkIters",box2d.b2_gjkIters);box2d.b2_gjkMaxIters=0;goog.exportSymbol("box2d.b2_gjkMaxIters",box2d.b2_gjkMaxIters);box2d.b2SimplexVertex=function(){this.wA=new box2d.b2Vec2;this.wB=new box2d.b2Vec2;this.w=new box2d.b2Vec2};goog.exportSymbol("box2d.b2SimplexVertex",box2d.b2SimplexVertex);box2d.b2SimplexVertex.prototype.wA=null;goog.exportProperty(box2d.b2SimplexVertex.prototype,"wA",box2d.b2SimplexVertex.prototype.wA);box2d.b2SimplexVertex.prototype.wB=null;goog.exportProperty(box2d.b2SimplexVertex.prototype,"wB",box2d.b2SimplexVertex.prototype.wB);box2d.b2SimplexVertex.prototype.w=null;goog.exportProperty(box2d.b2SimplexVertex.prototype,"w",box2d.b2SimplexVertex.prototype.w);box2d.b2SimplexVertex.prototype.a=0;goog.exportProperty(box2d.b2SimplexVertex.prototype,"a",box2d.b2SimplexVertex.prototype.a);box2d.b2SimplexVertex.prototype.indexA=0;goog.exportProperty(box2d.b2SimplexVertex.prototype,"indexA",box2d.b2SimplexVertex.prototype.indexA);box2d.b2SimplexVertex.prototype.indexB=0;goog.exportProperty(box2d.b2SimplexVertex.prototype,"indexB",box2d.b2SimplexVertex.prototype.indexB);box2d.b2SimplexVertex.prototype.Copy=function(b){this.wA.Copy(b.wA);this.wB.Copy(b.wB);this.w.Copy(b.w);this.a=b.a;this.indexA=b.indexA;this.indexB=b.indexB;return this};goog.exportProperty(box2d.b2SimplexVertex.prototype,"Copy",box2d.b2SimplexVertex.prototype.Copy);box2d.b2Simplex=function(){this.m_v1=new box2d.b2SimplexVertex;this.m_v2=new box2d.b2SimplexVertex;this.m_v3=new box2d.b2SimplexVertex;this.m_vertices=Array(3);this.m_vertices[0]=this.m_v1;this.m_vertices[1]=this.m_v2;this.m_vertices[2]=this.m_v3};goog.exportSymbol("box2d.b2Simplex",box2d.b2Simplex);box2d.b2Simplex.prototype.m_v1=null;goog.exportProperty(box2d.b2Simplex.prototype,"m_v1",box2d.b2Simplex.prototype.m_v1);box2d.b2Simplex.prototype.m_v2=null;goog.exportProperty(box2d.b2Simplex.prototype,"m_v2",box2d.b2Simplex.prototype.m_v2);box2d.b2Simplex.prototype.m_v3=null;goog.exportProperty(box2d.b2Simplex.prototype,"m_v3",box2d.b2Simplex.prototype.m_v3);box2d.b2Simplex.prototype.m_vertices=null;goog.exportProperty(box2d.b2Simplex.prototype,"m_vertices",box2d.b2Simplex.prototype.m_vertices);box2d.b2Simplex.prototype.m_count=0;goog.exportProperty(box2d.b2Simplex.prototype,"m_count",box2d.b2Simplex.prototype.m_count);box2d.b2Simplex.prototype.ReadCache=function(z,y,v,s,u){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=z.count&&3>=z.count);this.m_count=z.count;for(var r=this.m_vertices,q=0;q<this.m_count;++q){var n=r[q];n.indexA=z.indexA[q];n.indexB=z.indexB[q];var j=y.GetVertex(n.indexA),m=s.GetVertex(n.indexB);box2d.b2MulXV(v,j,n.wA);box2d.b2MulXV(u,m,n.wB);box2d.b2SubVV(n.wB,n.wA,n.w);n.a=0}1<this.m_count&&(z=z.metric,q=this.GetMetric(),q<0.5*z||2*z<q||q<box2d.b2_epsilon)&&(this.m_count=0);0==this.m_count&&(n=r[0],n.indexA=0,n.indexB=0,j=y.GetVertex(0),m=s.GetVertex(0),box2d.b2MulXV(v,j,n.wA),box2d.b2MulXV(u,m,n.wB),box2d.b2SubVV(n.wB,n.wA,n.w),this.m_count=n.a=1)};goog.exportProperty(box2d.b2Simplex.prototype,"ReadCache",box2d.b2Simplex.prototype.ReadCache);box2d.b2Simplex.prototype.WriteCache=function(e){e.metric=this.GetMetric();e.count=this.m_count;for(var d=this.m_vertices,f=0;f<this.m_count;++f){e.indexA[f]=d[f].indexA,e.indexB[f]=d[f].indexB}};goog.exportProperty(box2d.b2Simplex.prototype,"WriteCache",box2d.b2Simplex.prototype.WriteCache);box2d.b2Simplex.prototype.GetSearchDirection=function(e){switch(this.m_count){case 1:return box2d.b2NegV(this.m_v1.w,e);case 2:var d=box2d.b2SubVV(this.m_v2.w,this.m_v1.w,e);return 0<box2d.b2CrossVV(d,box2d.b2NegV(this.m_v1.w,box2d.b2Vec2.s_t0))?box2d.b2CrossOneV(d,e):box2d.b2CrossVOne(d,e);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),e.SetZero()}};goog.exportProperty(box2d.b2Simplex.prototype,"GetSearchDirection",box2d.b2Simplex.prototype.GetSearchDirection);box2d.b2Simplex.prototype.GetClosestPoint=function(b){switch(this.m_count){case 0:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),b.SetZero();case 1:return b.Copy(this.m_v1.w);case 2:return b.SetXY(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);case 3:return b.SetZero();default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),b.SetZero()}};goog.exportProperty(box2d.b2Simplex.prototype,"GetClosestPoint",box2d.b2Simplex.prototype.GetClosestPoint);box2d.b2Simplex.prototype.GetWitnessPoints=function(e,d){switch(this.m_count){case 0:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);break;case 1:e.Copy(this.m_v1.wA);d.Copy(this.m_v1.wB);break;case 2:e.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x;e.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y;d.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x;d.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:d.x=e.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x;d.y=e.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}};goog.exportProperty(box2d.b2Simplex.prototype,"GetWitnessPoints",box2d.b2Simplex.prototype.GetWitnessPoints);box2d.b2Simplex.prototype.GetMetric=function(){switch(this.m_count){case 0:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0;case 1:return 0;case 2:return box2d.b2DistanceVV(this.m_v1.w,this.m_v2.w);case 3:return box2d.b2CrossVV(box2d.b2SubVV(this.m_v2.w,this.m_v1.w,box2d.b2Vec2.s_t0),box2d.b2SubVV(this.m_v3.w,this.m_v1.w,box2d.b2Vec2.s_t1));default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0}};goog.exportProperty(box2d.b2Simplex.prototype,"GetMetric",box2d.b2Simplex.prototype.GetMetric);box2d.b2Simplex.prototype.Solve2=function(){var e=this.m_v1.w,d=this.m_v2.w,f=box2d.b2SubVV(d,e,box2d.b2Simplex.s_e12),e=-box2d.b2DotVV(e,f);0>=e?this.m_count=this.m_v1.a=1:(d=box2d.b2DotVV(d,f),0>=d?(this.m_count=this.m_v2.a=1,this.m_v1.Copy(this.m_v2)):(f=1/(d+e),this.m_v1.a=d*f,this.m_v2.a=e*f,this.m_count=2))};goog.exportProperty(box2d.b2Simplex.prototype,"Solve2",box2d.b2Simplex.prototype.Solve2);box2d.b2Simplex.prototype.Solve3=function(){var B=this.m_v1.w,A=this.m_v2.w,z=this.m_v3.w,v=box2d.b2SubVV(A,B,box2d.b2Simplex.s_e12),y=box2d.b2DotVV(B,v),u=box2d.b2DotVV(A,v),y=-y,s=box2d.b2SubVV(z,B,box2d.b2Simplex.s_e13),r=box2d.b2DotVV(B,s),n=box2d.b2DotVV(z,s),r=-r,q=box2d.b2SubVV(z,A,box2d.b2Simplex.s_e23),j=box2d.b2DotVV(A,q),q=box2d.b2DotVV(z,q),j=-j,s=box2d.b2CrossVV(v,s),v=s*box2d.b2CrossVV(A,z),z=s*box2d.b2CrossVV(z,B),B=s*box2d.b2CrossVV(B,A);0>=y&&0>=r?this.m_count=this.m_v1.a=1:0<u&&0<y&&0>=B?(n=1/(u+y),this.m_v1.a=u*n,this.m_v2.a=y*n,this.m_count=2):0<n&&0<r&&0>=z?(u=1/(n+r),this.m_v1.a=n*u,this.m_v3.a=r*u,this.m_count=2,this.m_v2.Copy(this.m_v3)):0>=u&&0>=j?(this.m_count=this.m_v2.a=1,this.m_v1.Copy(this.m_v2)):0>=n&&0>=q?(this.m_count=this.m_v3.a=1,this.m_v1.Copy(this.m_v3)):0<q&&0<j&&0>=v?(u=1/(q+j),this.m_v2.a=q*u,this.m_v3.a=j*u,this.m_count=2,this.m_v1.Copy(this.m_v3)):(u=1/(v+z+B),this.m_v1.a=v*u,this.m_v2.a=z*u,this.m_v3.a=B*u,this.m_count=3)};goog.exportProperty(box2d.b2Simplex.prototype,"Solve3",box2d.b2Simplex.prototype.Solve3);box2d.b2Simplex.s_e12=new box2d.b2Vec2;box2d.b2Simplex.s_e13=new box2d.b2Vec2;box2d.b2Simplex.s_e23=new box2d.b2Vec2;box2d.b2Distance=function(I,H,G){++box2d.b2_gjkCalls;var E=G.proxyA,F=G.proxyB,D=G.transformA,C=G.transformB,B=box2d.b2Distance.s_simplex;B.ReadCache(H,E,D,F,C);for(var z=B.m_vertices,A=box2d.b2Distance.s_saveA,y=box2d.b2Distance.s_saveB,v=0,u=0;20>u;){for(var v=B.m_count,s=0;s<v;++s){A[s]=z[s].indexA,y[s]=z[s].indexB}switch(B.m_count){case 1:break;case 2:B.Solve2();break;case 3:B.Solve3();break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}if(3==B.m_count){break}var j=B.GetClosestPoint(box2d.b2Distance.s_p);j.GetLengthSquared();s=B.GetSearchDirection(box2d.b2Distance.s_d);if(s.GetLengthSquared()<box2d.b2_epsilon_sq){break}j=z[B.m_count];j.indexA=E.GetSupport(box2d.b2MulTRV(D.q,box2d.b2NegV(s,box2d.b2Vec2.s_t0),box2d.b2Distance.s_supportA));box2d.b2MulXV(D,E.GetVertex(j.indexA),j.wA);j.indexB=F.GetSupport(box2d.b2MulTRV(C.q,s,box2d.b2Distance.s_supportB));box2d.b2MulXV(C,F.GetVertex(j.indexB),j.wB);box2d.b2SubVV(j.wB,j.wA,j.w);++u;++box2d.b2_gjkIters;for(var J=!1,s=0;s<v;++s){if(j.indexA==A[s]&&j.indexB==y[s]){J=!0;break}}if(J){break}++B.m_count}box2d.b2_gjkMaxIters=box2d.b2Max(box2d.b2_gjkMaxIters,u);B.GetWitnessPoints(I.pointA,I.pointB);I.distance=box2d.b2DistanceVV(I.pointA,I.pointB);I.iterations=u;B.WriteCache(H);G.useRadii&&(H=E.m_radius,F=F.m_radius,I.distance>H+F&&I.distance>box2d.b2_epsilon?(I.distance-=H+F,G=box2d.b2SubVV(I.pointB,I.pointA,box2d.b2Distance.s_normal),G.Normalize(),I.pointA.SelfMulAdd(H,G),I.pointB.SelfMulSub(F,G)):(j=box2d.b2MidVV(I.pointA,I.pointB,box2d.b2Distance.s_p),I.pointA.Copy(j),I.pointB.Copy(j),I.distance=0))};goog.exportSymbol("box2d.b2Distance",box2d.b2Distance);box2d.b2Distance.s_simplex=new box2d.b2Simplex;box2d.b2Distance.s_saveA=box2d.b2MakeNumberArray(3);box2d.b2Distance.s_saveB=box2d.b2MakeNumberArray(3);box2d.b2Distance.s_p=new box2d.b2Vec2;box2d.b2Distance.s_d=new box2d.b2Vec2;box2d.b2Distance.s_normal=new box2d.b2Vec2;box2d.b2Distance.s_supportA=new box2d.b2Vec2;box2d.b2Distance.s_supportB=new box2d.b2Vec2;box2d.b2WeldJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_weldJoint);this.localAnchorA=new box2d.b2Vec2;this.localAnchorB=new box2d.b2Vec2};goog.inherits(box2d.b2WeldJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2WeldJointDef",box2d.b2WeldJointDef);box2d.b2WeldJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2WeldJointDef.prototype,"localAnchorA",box2d.b2WeldJointDef.prototype.localAnchorA);box2d.b2WeldJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2WeldJointDef.prototype,"localAnchorB",box2d.b2WeldJointDef.prototype.localAnchorB);box2d.b2WeldJointDef.prototype.referenceAngle=0;goog.exportProperty(box2d.b2WeldJointDef.prototype,"referenceAngle",box2d.b2WeldJointDef.prototype.referenceAngle);box2d.b2WeldJointDef.prototype.frequencyHz=0;goog.exportProperty(box2d.b2WeldJointDef.prototype,"frequencyHz",box2d.b2WeldJointDef.prototype.frequencyHz);box2d.b2WeldJointDef.prototype.dampingRatio=0;goog.exportProperty(box2d.b2WeldJointDef.prototype,"dampingRatio",box2d.b2WeldJointDef.prototype.dampingRatio);box2d.b2WeldJointDef.prototype.Initialize=function(e,d,f){this.bodyA=e;this.bodyB=d;this.bodyA.GetLocalPoint(f,this.localAnchorA);this.bodyB.GetLocalPoint(f,this.localAnchorB);this.referenceAngle=this.bodyB.GetAngleRadians()-this.bodyA.GetAngleRadians()};goog.exportProperty(box2d.b2WeldJointDef.prototype,"Initialize",box2d.b2WeldJointDef.prototype.Initialize);box2d.b2WeldJoint=function(b){box2d.b2Joint.call(this,b);this.m_frequencyHz=b.frequencyHz;this.m_dampingRatio=b.dampingRatio;this.m_localAnchorA=b.localAnchorA.Clone();this.m_localAnchorB=b.localAnchorB.Clone();this.m_referenceAngle=b.referenceAngle;this.m_impulse=new box2d.b2Vec3(0,0,0);this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_mass=new box2d.b2Mat33;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_K=new box2d.b2Mat33};goog.inherits(box2d.b2WeldJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2WeldJoint",box2d.b2WeldJoint);box2d.b2WeldJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_frequencyHz",box2d.b2WeldJoint.prototype.m_frequencyHz);box2d.b2WeldJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_dampingRatio",box2d.b2WeldJoint.prototype.m_dampingRatio);box2d.b2WeldJoint.prototype.m_bias=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_bias",box2d.b2WeldJoint.prototype.m_bias);box2d.b2WeldJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localAnchorA",box2d.b2WeldJoint.prototype.m_localAnchorA);box2d.b2WeldJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localAnchorB",box2d.b2WeldJoint.prototype.m_localAnchorB);box2d.b2WeldJoint.prototype.m_referenceAngle=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_referenceAngle",box2d.b2WeldJoint.prototype.m_referenceAngle);box2d.b2WeldJoint.prototype.m_gamma=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_gamma",box2d.b2WeldJoint.prototype.m_gamma);box2d.b2WeldJoint.prototype.m_impulse=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_impulse",box2d.b2WeldJoint.prototype.m_impulse);box2d.b2WeldJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_indexA",box2d.b2WeldJoint.prototype.m_indexA);box2d.b2WeldJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_indexB",box2d.b2WeldJoint.prototype.m_indexB);box2d.b2WeldJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_rA",box2d.b2WeldJoint.prototype.m_rA);box2d.b2WeldJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_rB",box2d.b2WeldJoint.prototype.m_rB);box2d.b2WeldJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localCenterA",box2d.b2WeldJoint.prototype.m_localCenterA);box2d.b2WeldJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localCenterB",box2d.b2WeldJoint.prototype.m_localCenterB);box2d.b2WeldJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invMassA",box2d.b2WeldJoint.prototype.m_invMassA);box2d.b2WeldJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invMassB",box2d.b2WeldJoint.prototype.m_invMassB);box2d.b2WeldJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invIA",box2d.b2WeldJoint.prototype.m_invIA);box2d.b2WeldJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invIB",box2d.b2WeldJoint.prototype.m_invIB);box2d.b2WeldJoint.prototype.m_mass=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_mass",box2d.b2WeldJoint.prototype.m_mass);box2d.b2WeldJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_qA",box2d.b2WeldJoint.prototype.m_qA);box2d.b2WeldJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_qB",box2d.b2WeldJoint.prototype.m_qB);box2d.b2WeldJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_lalcA",box2d.b2WeldJoint.prototype.m_lalcA);box2d.b2WeldJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_lalcB",box2d.b2WeldJoint.prototype.m_lalcB);box2d.b2WeldJoint.prototype.m_K=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_K",box2d.b2WeldJoint.prototype.m_K);box2d.b2WeldJoint.prototype.InitVelocityConstraints=function(I){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var H=I.positions[this.m_indexA].a,G=I.velocities[this.m_indexA].v,E=I.velocities[this.m_indexA].w,F=I.positions[this.m_indexB].a,D=I.velocities[this.m_indexB].v,C=I.velocities[this.m_indexB].w,B=this.m_qA.SetAngleRadians(H),z=this.m_qB.SetAngleRadians(F);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2MulRV(B,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2MulRV(z,this.m_lalcB,this.m_rB);var B=this.m_invMassA,z=this.m_invMassB,A=this.m_invIA,y=this.m_invIB,v=this.m_K;v.ex.x=B+z+this.m_rA.y*this.m_rA.y*A+this.m_rB.y*this.m_rB.y*y;v.ey.x=-this.m_rA.y*this.m_rA.x*A-this.m_rB.y*this.m_rB.x*y;v.ez.x=-this.m_rA.y*A-this.m_rB.y*y;v.ex.y=v.ey.x;v.ey.y=B+z+this.m_rA.x*this.m_rA.x*A+this.m_rB.x*this.m_rB.x*y;v.ez.y=this.m_rA.x*A+this.m_rB.x*y;v.ex.z=v.ez.x;v.ey.z=v.ez.y;v.ez.z=A+y;if(0<this.m_frequencyHz){v.GetInverse22(this.m_mass);var v=A+y,u=0<v?1/v:0,H=F-H-this.m_referenceAngle,F=2*box2d.b2_pi*this.m_frequencyHz,s=u*F*F,j=I.step.dt;this.m_gamma=j*(2*u*this.m_dampingRatio*F+j*s);this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0;this.m_bias=H*j*s*this.m_gamma;v+=this.m_gamma;this.m_mass.ez.z=0!=v?1/v:0}else{v.GetSymInverse33(this.m_mass),this.m_bias=this.m_gamma=0}I.step.warmStarting?(this.m_impulse.SelfMul(I.step.dtRatio),v=box2d.b2WeldJoint.prototype.InitVelocityConstraints.s_P.SetXY(this.m_impulse.x,this.m_impulse.y),G.SelfMulSub(B,v),E-=A*(box2d.b2CrossVV(this.m_rA,v)+this.m_impulse.z),D.SelfMulAdd(z,v),C+=y*(box2d.b2CrossVV(this.m_rB,v)+this.m_impulse.z)):this.m_impulse.SetZero();I.velocities[this.m_indexA].w=E;I.velocities[this.m_indexB].w=C};box2d.b2WeldJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolveVelocityConstraints=function(B){var A=B.velocities[this.m_indexA].v,z=B.velocities[this.m_indexA].w,v=B.velocities[this.m_indexB].v,y=B.velocities[this.m_indexB].w,u=this.m_invMassA,s=this.m_invMassB,r=this.m_invIA,n=this.m_invIB;if(0<this.m_frequencyHz){var q=-this.m_mass.ez.z*(y-z+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=q;z-=r*q;y+=n*q;q=box2d.b2SubVV(box2d.b2AddVCrossSV(v,y,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(A,z,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1);q=box2d.b2MulM33XY(this.m_mass,q.x,q.y,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse1).SelfNeg();this.m_impulse.x+=q.x;this.m_impulse.y+=q.y;A.SelfMulSub(u,q);z-=r*box2d.b2CrossVV(this.m_rA,q);v.SelfMulAdd(s,q);y+=n*box2d.b2CrossVV(this.m_rB,q)}else{var q=box2d.b2SubVV(box2d.b2AddVCrossSV(v,y,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(A,z,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1),j=box2d.b2MulM33XYZ(this.m_mass,q.x,q.y,y-z,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse).SelfNeg();this.m_impulse.SelfAdd(j);q=box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_P.SetXY(j.x,j.y);A.SelfMulSub(u,q);z-=r*(box2d.b2CrossVV(this.m_rA,q)+j.z);v.SelfMulAdd(s,q);y+=n*(box2d.b2CrossVV(this.m_rB,q)+j.z)}B.velocities[this.m_indexA].w=z;B.velocities[this.m_indexB].w=y};goog.exportProperty(box2d.b2WeldJoint.prototype,"SolveVelocityConstraints",box2d.b2WeldJoint.prototype.SolveVelocityConstraints);box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse1=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec3;box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolvePositionConstraints=function(I){var H=I.positions[this.m_indexA].c,G=I.positions[this.m_indexA].a,E=I.positions[this.m_indexB].c,F=I.positions[this.m_indexB].a,D=this.m_qA.SetAngleRadians(G),C=this.m_qB.SetAngleRadians(F),B=this.m_invMassA,z=this.m_invMassB,A=this.m_invIA,y=this.m_invIB;box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var v=box2d.b2MulRV(D,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var u=box2d.b2MulRV(C,this.m_lalcB,this.m_rB),s=this.m_K;s.ex.x=B+z+v.y*v.y*A+u.y*u.y*y;s.ey.x=-v.y*v.x*A-u.y*u.x*y;s.ez.x=-v.y*A-u.y*y;s.ex.y=s.ey.x;s.ey.y=B+z+v.x*v.x*A+u.x*u.x*y;s.ez.y=v.x*A+u.x*y;s.ex.z=s.ez.x;s.ey.z=s.ez.y;s.ez.z=A+y;if(0<this.m_frequencyHz){var j=box2d.b2SubVV(box2d.b2AddVV(E,u,box2d.b2Vec2.s_t0),box2d.b2AddVV(H,v,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1),C=j.GetLength(),D=0,s=s.Solve22(j.x,j.y,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P).SelfNeg();H.SelfMulSub(B,s);G-=A*box2d.b2CrossVV(v,s);E.SelfMulAdd(z,s);F+=y*box2d.b2CrossVV(u,s)}else{j=box2d.b2SubVV(box2d.b2AddVV(E,u,box2d.b2Vec2.s_t0),box2d.b2AddVV(H,v,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1),v=F-G-this.m_referenceAngle,C=j.GetLength(),D=box2d.b2Abs(v),v=s.Solve33(j.x,j.y,v,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse).SelfNeg(),s=box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P.SetXY(v.x,v.y),H.SelfMulSub(B,s),G-=A*(box2d.b2CrossVV(this.m_rA,s)+v.z),E.SelfMulAdd(z,s),F+=y*(box2d.b2CrossVV(this.m_rB,s)+v.z)}I.positions[this.m_indexA].a=G;I.positions[this.m_indexB].a=F;return C<=box2d.b2_linearSlop&&D<=box2d.b2_angularSlop};goog.exportProperty(box2d.b2WeldJoint.prototype,"SolvePositionConstraints",box2d.b2WeldJoint.prototype.SolvePositionConstraints);box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec3;box2d.b2WeldJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetAnchorA",box2d.b2WeldJoint.prototype.GetAnchorA);box2d.b2WeldJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetAnchorB",box2d.b2WeldJoint.prototype.GetAnchorB);box2d.b2WeldJoint.prototype.GetReactionForce=function(e,d){return d.SetXY(e*this.m_impulse.x,e*this.m_impulse.y)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetReactionForce",box2d.b2WeldJoint.prototype.GetReactionForce);box2d.b2WeldJoint.prototype.GetReactionTorque=function(b){return b*this.m_impulse.z};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetReactionTorque",box2d.b2WeldJoint.prototype.GetReactionTorque);box2d.b2WeldJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetLocalAnchorA",box2d.b2WeldJoint.prototype.GetLocalAnchorA);box2d.b2WeldJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetLocalAnchorB",box2d.b2WeldJoint.prototype.GetLocalAnchorB);box2d.b2WeldJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetReferenceAngle",box2d.b2WeldJoint.prototype.GetReferenceAngle);box2d.b2WeldJoint.prototype.SetFrequency=function(b){this.m_frequencyHz=b};box2d.b2WeldJoint.prototype.GetFrequency=function(){return this.m_frequencyHz};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetFrequency",box2d.b2WeldJoint.prototype.GetFrequency);box2d.b2WeldJoint.prototype.SetDampingRatio=function(b){this.m_dampingRatio=b};box2d.b2WeldJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetDampingRatio",box2d.b2WeldJoint.prototype.GetDampingRatio);box2d.b2WeldJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2WeldJointDef*/ var jd = new box2d.b2WeldJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle);box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz);box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2WeldJoint.prototype,"Dump",box2d.b2WeldJoint.prototype.Dump);box2d.b2RopeJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_ropeJoint);this.localAnchorA=new box2d.b2Vec2(-1,0);this.localAnchorB=new box2d.b2Vec2(1,0)};goog.inherits(box2d.b2RopeJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2RopeJointDef",box2d.b2RopeJointDef);box2d.b2RopeJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2RopeJointDef.prototype,"localAnchorA",box2d.b2RopeJointDef.prototype.localAnchorA);box2d.b2RopeJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2RopeJointDef.prototype,"localAnchorB",box2d.b2RopeJointDef.prototype.localAnchorB);box2d.b2RopeJointDef.prototype.maxLength=0;goog.exportProperty(box2d.b2RopeJointDef.prototype,"maxLength",box2d.b2RopeJointDef.prototype.maxLength);box2d.b2RopeJoint=function(b){box2d.b2Joint.call(this,b);this.m_localAnchorA=b.localAnchorA.Clone();this.m_localAnchorB=b.localAnchorB.Clone();this.m_maxLength=b.maxLength;this.m_u=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2};goog.inherits(box2d.b2RopeJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2RopeJoint",box2d.b2RopeJoint);box2d.b2RopeJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localAnchorA",box2d.b2RopeJoint.prototype.m_localAnchorA);box2d.b2RopeJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localAnchorB",box2d.b2RopeJoint.prototype.m_localAnchorB);box2d.b2RopeJoint.prototype.m_maxLength=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_maxLength",box2d.b2RopeJoint.prototype.m_maxLength);box2d.b2RopeJoint.prototype.m_length=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_length",box2d.b2RopeJoint.prototype.m_length);box2d.b2RopeJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_impulse",box2d.b2RopeJoint.prototype.m_impulse);box2d.b2RopeJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_indexA",box2d.b2RopeJoint.prototype.m_indexA);box2d.b2RopeJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_indexB",box2d.b2RopeJoint.prototype.m_indexB);box2d.b2RopeJoint.prototype.m_u=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_u",box2d.b2RopeJoint.prototype.m_u);box2d.b2RopeJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_rA",box2d.b2RopeJoint.prototype.m_rA);box2d.b2RopeJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_rB",box2d.b2RopeJoint.prototype.m_rB);box2d.b2RopeJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localCenterA",box2d.b2RopeJoint.prototype.m_localCenterA);box2d.b2RopeJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localCenterB",box2d.b2RopeJoint.prototype.m_localCenterB);box2d.b2RopeJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invMassA",box2d.b2RopeJoint.prototype.m_invMassA);box2d.b2RopeJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invMassB",box2d.b2RopeJoint.prototype.m_invMassB);box2d.b2RopeJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invIA",box2d.b2RopeJoint.prototype.m_invIA);box2d.b2RopeJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invIB",box2d.b2RopeJoint.prototype.m_invIB);box2d.b2RopeJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_mass",box2d.b2RopeJoint.prototype.m_mass);box2d.b2RopeJoint.prototype.m_state=box2d.b2LimitState.e_inactiveLimit;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_state",box2d.b2RopeJoint.prototype.m_state);box2d.b2RopeJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_qA",box2d.b2RopeJoint.prototype.m_qA);box2d.b2RopeJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_qB",box2d.b2RopeJoint.prototype.m_qB);box2d.b2RopeJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_lalcA",box2d.b2RopeJoint.prototype.m_lalcA);box2d.b2RopeJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_lalcB",box2d.b2RopeJoint.prototype.m_lalcB);box2d.b2RopeJoint.prototype.InitVelocityConstraints=function(v){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var u=v.positions[this.m_indexA].c,s=v.velocities[this.m_indexA].v,q=v.velocities[this.m_indexA].w,r=v.positions[this.m_indexB].c,n=v.positions[this.m_indexB].a,m=v.velocities[this.m_indexB].v,k=v.velocities[this.m_indexB].w,j=this.m_qA.SetAngleRadians(v.positions[this.m_indexA].a),n=this.m_qB.SetAngleRadians(n);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2MulRV(j,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2MulRV(n,this.m_lalcB,this.m_rB);this.m_u.Copy(r).SelfAdd(this.m_rB).SelfSub(u).SelfSub(this.m_rA);this.m_length=this.m_u.GetLength();this.m_state=0<this.m_length-this.m_maxLength?box2d.b2LimitState.e_atUpperLimit:box2d.b2LimitState.e_inactiveLimit;this.m_length>box2d.b2_linearSlop?(this.m_u.SelfMul(1/this.m_length),u=box2d.b2CrossVV(this.m_rA,this.m_u),r=box2d.b2CrossVV(this.m_rB,this.m_u),u=this.m_invMassA+this.m_invIA*u*u+this.m_invMassB+this.m_invIB*r*r,this.m_mass=0!=u?1/u:0,v.step.warmStarting?(this.m_impulse*=v.step.dtRatio,u=box2d.b2MulSV(this.m_impulse,this.m_u,box2d.b2RopeJoint.prototype.InitVelocityConstraints.s_P),s.SelfMulSub(this.m_invMassA,u),q-=this.m_invIA*box2d.b2CrossVV(this.m_rA,u),m.SelfMulAdd(this.m_invMassB,u),k+=this.m_invIB*box2d.b2CrossVV(this.m_rB,u)):this.m_impulse=0,v.velocities[this.m_indexA].w=q,v.velocities[this.m_indexB].w=k):(this.m_u.SetZero(),this.m_impulse=this.m_mass=0)};goog.exportProperty(box2d.b2RopeJoint.prototype,"InitVelocityConstraints",box2d.b2RopeJoint.prototype.InitVelocityConstraints);box2d.b2RopeJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2RopeJoint.prototype.SolveVelocityConstraints=function(k){var j=k.velocities[this.m_indexA].v,u=k.velocities[this.m_indexA].w,r=k.velocities[this.m_indexB].v,s=k.velocities[this.m_indexB].w,q=box2d.b2AddVCrossSV(j,u,this.m_rA,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpA),n=box2d.b2AddVCrossSV(r,s,this.m_rB,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpB),m=this.m_length-this.m_maxLength,q=box2d.b2DotVV(this.m_u,box2d.b2SubVV(n,q,box2d.b2Vec2.s_t0));0>m&&(q+=k.step.inv_dt*m);m=-this.m_mass*q;q=this.m_impulse;this.m_impulse=box2d.b2Min(0,this.m_impulse+m);m=this.m_impulse-q;m=box2d.b2MulSV(m,this.m_u,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_P);j.SelfMulSub(this.m_invMassA,m);u-=this.m_invIA*box2d.b2CrossVV(this.m_rA,m);r.SelfMulAdd(this.m_invMassB,m);s+=this.m_invIB*box2d.b2CrossVV(this.m_rB,m);k.velocities[this.m_indexA].w=u;k.velocities[this.m_indexB].w=s};goog.exportProperty(box2d.b2RopeJoint.prototype,"SolveVelocityConstraints",box2d.b2RopeJoint.prototype.SolveVelocityConstraints);box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2;box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2;box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2RopeJoint.prototype.SolvePositionConstraints=function(z){var y=z.positions[this.m_indexA].c,v=z.positions[this.m_indexA].a,s=z.positions[this.m_indexB].c,u=z.positions[this.m_indexB].a,r=this.m_qA.SetAngleRadians(v),q=this.m_qB.SetAngleRadians(u);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);r=box2d.b2MulRV(r,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var q=box2d.b2MulRV(q,this.m_lalcB,this.m_rB),n=this.m_u.Copy(s).SelfAdd(q).SelfSub(y).SelfSub(r),j=n.Normalize(),m=j-this.m_maxLength,m=box2d.b2Clamp(m,0,box2d.b2_maxLinearCorrection),n=box2d.b2MulSV(-this.m_mass*m,n,box2d.b2RopeJoint.prototype.SolvePositionConstraints.s_P);y.SelfMulSub(this.m_invMassA,n);v-=this.m_invIA*box2d.b2CrossVV(r,n);s.SelfMulAdd(this.m_invMassB,n);u+=this.m_invIB*box2d.b2CrossVV(q,n);z.positions[this.m_indexA].a=v;z.positions[this.m_indexB].a=u;return j-this.m_maxLength<box2d.b2_linearSlop};goog.exportProperty(box2d.b2RopeJoint.prototype,"SolvePositionConstraints",box2d.b2RopeJoint.prototype.SolvePositionConstraints);box2d.b2RopeJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2RopeJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetAnchorA",box2d.b2RopeJoint.prototype.GetAnchorA);box2d.b2RopeJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetAnchorB",box2d.b2RopeJoint.prototype.GetAnchorB);box2d.b2RopeJoint.prototype.GetReactionForce=function(e,d){return box2d.b2MulSV(e*this.m_impulse,this.m_u,d)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetReactionForce",box2d.b2RopeJoint.prototype.GetReactionForce);box2d.b2RopeJoint.prototype.GetReactionTorque=function(b){return 0};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetReactionTorque",box2d.b2RopeJoint.prototype.GetReactionTorque);box2d.b2RopeJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetLocalAnchorA",box2d.b2RopeJoint.prototype.GetLocalAnchorA);box2d.b2RopeJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetLocalAnchorB",box2d.b2RopeJoint.prototype.GetLocalAnchorB);box2d.b2RopeJoint.prototype.SetMaxLength=function(b){this.m_maxLength=b};goog.exportProperty(box2d.b2RopeJoint.prototype,"SetMaxLength",box2d.b2RopeJoint.prototype.SetMaxLength);box2d.b2RopeJoint.prototype.GetMaxLength=function(){return this.m_maxLength};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetMaxLength",box2d.b2RopeJoint.prototype.GetMaxLength);box2d.b2RopeJoint.prototype.GetLimitState=function(){return this.m_state};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetLimitState",box2d.b2RopeJoint.prototype.GetLimitState);box2d.b2RopeJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2RopeJointDef*/ var jd = new box2d.b2RopeJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.maxLength = %.15f;\n",this.m_maxLength);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2RopeJoint.prototype,"Dump",box2d.b2RopeJoint.prototype.Dump);box2d.b2GravityController=function(){box2d.b2Controller.call(this)};goog.inherits(box2d.b2GravityController,box2d.b2Controller);goog.exportSymbol("box2d.b2GravityController",box2d.b2GravityController);box2d.b2GravityController.prototype.G=1;goog.exportProperty(box2d.b2GravityController.prototype,"G",box2d.b2GravityController.prototype.G);box2d.b2GravityController.prototype.invSqr=!0;goog.exportProperty(box2d.b2GravityController.prototype,"invSqr",box2d.b2GravityController.prototype.invSqr);box2d.b2GravityController.prototype.Step=function(B){if(this.invSqr){for(B=this.m_bodyList;B;B=B.nextBody){for(var A=B.body,z=A.GetWorldCenter(),v=A.GetMass(),y=this.m_bodyList;y!=B;y=y.nextBody){var u=y.body,s=u.GetWorldCenter(),r=u.GetMass(),n=s.x-z.x,q=s.y-z.y,j=n*n+q*q;j<box2d.b2_epsilon||(n=box2d.b2GravityController.prototype.Step.s_f.SetXY(n,q),n.SelfMul(this.G/j/box2d.b2Sqrt(j)*v*r),A.IsAwake()&&A.ApplyForce(n,z),u.IsAwake()&&u.ApplyForce(n.SelfMul(-1),s))}}}else{for(B=this.m_bodyList;B;B=B.nextBody){for(A=B.body,z=A.GetWorldCenter(),v=A.GetMass(),y=this.m_bodyList;y!=B;y=y.nextBody){u=y.body,s=u.GetWorldCenter(),r=u.GetMass(),n=s.x-z.x,q=s.y-z.y,j=n*n+q*q,j<box2d.b2_epsilon||(n=box2d.b2GravityController.prototype.Step.s_f.SetXY(n,q),n.SelfMul(this.G/j*v*r),A.IsAwake()&&A.ApplyForce(n,z),u.IsAwake()&&u.ApplyForce(n.SelfMul(-1),s))}}}};goog.exportProperty(box2d.b2GravityController.prototype,"Step",box2d.b2GravityController.prototype.Step);box2d.b2GravityController.prototype.Step.s_f=new box2d.b2Vec2;box2d.b2Profile=function(){};goog.exportSymbol("box2d.b2Profile",box2d.b2Profile);box2d.b2Profile.prototype.step=0;goog.exportProperty(box2d.b2Profile.prototype,"step",box2d.b2Profile.prototype.step);box2d.b2Profile.prototype.collide=0;goog.exportProperty(box2d.b2Profile.prototype,"collide",box2d.b2Profile.prototype.collide);box2d.b2Profile.prototype.solve=0;goog.exportProperty(box2d.b2Profile.prototype,"solve",box2d.b2Profile.prototype.solve);box2d.b2Profile.prototype.solveInit=0;goog.exportProperty(box2d.b2Profile.prototype,"solveInit",box2d.b2Profile.prototype.solveInit);box2d.b2Profile.prototype.solveVelocity=0;goog.exportProperty(box2d.b2Profile.prototype,"solveVelocity",box2d.b2Profile.prototype.solveVelocity);box2d.b2Profile.prototype.solvePosition=0;goog.exportProperty(box2d.b2Profile.prototype,"solvePosition",box2d.b2Profile.prototype.solvePosition);box2d.b2Profile.prototype.broadphase=0;goog.exportProperty(box2d.b2Profile.prototype,"broadphase",box2d.b2Profile.prototype.broadphase);box2d.b2Profile.prototype.solveTOI=0;goog.exportProperty(box2d.b2Profile.prototype,"solveTOI",box2d.b2Profile.prototype.solveTOI);box2d.b2Profile.prototype.Reset=function(){this.solveTOI=this.broadphase=this.solvePosition=this.solveVelocity=this.solveInit=this.solve=this.collide=this.step=0;return this};goog.exportProperty(box2d.b2Profile.prototype,"Reset",box2d.b2Profile.prototype.Reset);box2d.b2TimeStep=function(){};goog.exportSymbol("box2d.b2TimeStep",box2d.b2TimeStep);box2d.b2TimeStep.prototype.dt=0;goog.exportProperty(box2d.b2TimeStep.prototype,"dt",box2d.b2TimeStep.prototype.dt);box2d.b2TimeStep.prototype.inv_dt=0;goog.exportProperty(box2d.b2TimeStep.prototype,"inv_dt",box2d.b2TimeStep.prototype.inv_dt);box2d.b2TimeStep.prototype.dtRatio=0;goog.exportProperty(box2d.b2TimeStep.prototype,"dtRatio",box2d.b2TimeStep.prototype.dtRatio);box2d.b2TimeStep.prototype.velocityIterations=0;goog.exportProperty(box2d.b2TimeStep.prototype,"velocityIterations",box2d.b2TimeStep.prototype.velocityIterations);box2d.b2TimeStep.prototype.positionIterations=0;goog.exportProperty(box2d.b2TimeStep.prototype,"positionIterations",box2d.b2TimeStep.prototype.positionIterations);box2d.b2TimeStep.prototype.warmStarting=!1;goog.exportProperty(box2d.b2TimeStep.prototype,"warmStarting",box2d.b2TimeStep.prototype.warmStarting);box2d.b2TimeStep.prototype.Copy=function(b){this.dt=b.dt;this.inv_dt=b.inv_dt;this.dtRatio=b.dtRatio;this.positionIterations=b.positionIterations;this.velocityIterations=b.velocityIterations;this.warmStarting=b.warmStarting;return this};goog.exportProperty(box2d.b2TimeStep.prototype,"Copy",box2d.b2TimeStep.prototype.Copy);box2d.b2Position=function(){this.c=new box2d.b2Vec2};goog.exportSymbol("box2d.b2Position",box2d.b2Position);box2d.b2Position.prototype.c=null;goog.exportProperty(box2d.b2Position.prototype,"c",box2d.b2Position.prototype.c);box2d.b2Position.prototype.a=0;goog.exportProperty(box2d.b2Position.prototype,"a",box2d.b2Position.prototype.a);box2d.b2Position.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2Position})};goog.exportProperty(box2d.b2Position,"MakeArray",box2d.b2Position.MakeArray);box2d.b2Velocity=function(){this.v=new box2d.b2Vec2};goog.exportSymbol("box2d.b2Velocity",box2d.b2Velocity);box2d.b2Velocity.prototype.v=null;goog.exportProperty(box2d.b2Velocity.prototype,"v",box2d.b2Velocity.prototype.v);box2d.b2Velocity.prototype.w=0;goog.exportProperty(box2d.b2Velocity.prototype,"w",box2d.b2Velocity.prototype.w);box2d.b2Velocity.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2Velocity})};goog.exportProperty(box2d.b2Velocity,"MakeArray",box2d.b2Velocity.MakeArray);box2d.b2SolverData=function(){this.step=new box2d.b2TimeStep};goog.exportSymbol("box2d.b2SolverData",box2d.b2SolverData);box2d.b2SolverData.prototype.step=null;goog.exportProperty(box2d.b2SolverData.prototype,"step",box2d.b2SolverData.prototype.step);box2d.b2SolverData.prototype.positions=null;goog.exportProperty(box2d.b2SolverData.prototype,"positions",box2d.b2SolverData.prototype.positions);box2d.b2SolverData.prototype.velocities=null;goog.exportProperty(box2d.b2SolverData.prototype,"velocities",box2d.b2SolverData.prototype.velocities);box2d.b2Collision={};box2d.b2ContactFeatureType={e_vertex:0,e_face:1};goog.exportSymbol("box2d.b2ContactFeatureType",box2d.b2ContactFeatureType);goog.exportProperty(box2d.b2ContactFeatureType,"e_vertex",box2d.b2ContactFeatureType.e_vertex);goog.exportProperty(box2d.b2ContactFeatureType,"e_face",box2d.b2ContactFeatureType.e_face);box2d.b2ContactFeature=function(b){this._id=b};goog.exportSymbol("box2d.b2ContactFeature",box2d.b2ContactFeature);box2d.b2ContactFeature.prototype._id=null;goog.exportProperty(box2d.b2ContactFeature.prototype,"_id",box2d.b2ContactFeature.prototype._id);box2d.b2ContactFeature.prototype._indexA=0;goog.exportProperty(box2d.b2ContactFeature.prototype,"_indexA",box2d.b2ContactFeature.prototype._indexA);box2d.b2ContactFeature.prototype._indexB=0;goog.exportProperty(box2d.b2ContactFeature.prototype,"_indexB",box2d.b2ContactFeature.prototype._indexB);box2d.b2ContactFeature.prototype._typeA=0;goog.exportProperty(box2d.b2ContactFeature.prototype,"_typeA",box2d.b2ContactFeature.prototype._typeA);box2d.b2ContactFeature.prototype._typeB=0;goog.exportProperty(box2d.b2ContactFeature.prototype,"_typeB",box2d.b2ContactFeature.prototype._typeB);Object.defineProperty(box2d.b2ContactFeature.prototype,"indexA",{enumerable:!1,configurable:!0,get:function(){return this._indexA},set:function(b){this._indexA=b;this._id._key=this._id._key&4294967040|this._indexA&255}});Object.defineProperty(box2d.b2ContactFeature.prototype,"indexB",{enumerable:!1,configurable:!0,get:function(){return this._indexB},set:function(b){this._indexB=b;this._id._key=this._id._key&4294902015|this._indexB<<8&65280}});Object.defineProperty(box2d.b2ContactFeature.prototype,"typeA",{enumerable:!1,configurable:!0,get:function(){return this._typeA},set:function(b){this._typeA=b;this._id._key=this._id._key&4278255615|this._typeA<<16&16711680}});Object.defineProperty(box2d.b2ContactFeature.prototype,"typeB",{enumerable:!1,configurable:!0,get:function(){return this._typeB},set:function(b){this._typeB=b;this._id._key=this._id._key&16777215|this._typeB<<24&4278190080}});box2d.b2ContactID=function(){this.cf=new box2d.b2ContactFeature(this)};goog.exportSymbol("box2d.b2ContactID",box2d.b2ContactID);box2d.b2ContactID.prototype.cf=null;goog.exportProperty(box2d.b2ContactID.prototype,"cf",box2d.b2ContactID.prototype.cf);box2d.b2ContactID.prototype.key=0;goog.exportProperty(box2d.b2ContactID.prototype,"key",box2d.b2ContactID.prototype.key);box2d.b2ContactID.prototype.Copy=function(b){this.key=b.key;return this};goog.exportProperty(box2d.b2ContactID.prototype,"Copy",box2d.b2ContactID.prototype.Copy);box2d.b2ContactID.prototype.Clone=function(){return(new box2d.b2ContactID).Copy(this)};goog.exportProperty(box2d.b2ContactID.prototype,"Clone",box2d.b2ContactID.prototype.Clone);Object.defineProperty(box2d.b2ContactID.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key},set:function(b){this._key=b;this.cf._indexA=this._key&255;this.cf._indexB=this._key>>8&255;this.cf._typeA=this._key>>16&255;this.cf._typeB=this._key>>24&255}});box2d.b2ManifoldPoint=function(){this.localPoint=new box2d.b2Vec2;this.id=new box2d.b2ContactID};goog.exportSymbol("box2d.b2ManifoldPoint",box2d.b2ManifoldPoint);box2d.b2ManifoldPoint.prototype.localPoint=null;goog.exportProperty(box2d.b2ManifoldPoint.prototype,"localPoint",box2d.b2ManifoldPoint.prototype.localPoint);box2d.b2ManifoldPoint.prototype.normalImpulse=0;goog.exportProperty(box2d.b2ManifoldPoint.prototype,"normalImpulse",box2d.b2ManifoldPoint.prototype.normalImpulse);box2d.b2ManifoldPoint.prototype.tangentImpulse=0;goog.exportProperty(box2d.b2ManifoldPoint.prototype,"tangentImpulse",box2d.b2ManifoldPoint.prototype.tangentImpulse);box2d.b2ManifoldPoint.prototype.id=null;goog.exportProperty(box2d.b2ManifoldPoint.prototype,"id",box2d.b2ManifoldPoint.prototype.id);box2d.b2ManifoldPoint.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2ManifoldPoint})};goog.exportProperty(box2d.b2ManifoldPoint,"MakeArray",box2d.b2ManifoldPoint.MakeArray);box2d.b2ManifoldPoint.prototype.Reset=function(){this.localPoint.SetZero();this.tangentImpulse=this.normalImpulse=0;this.id.key=0};goog.exportProperty(box2d.b2ManifoldPoint.prototype,"Reset",box2d.b2ManifoldPoint.prototype.Reset);box2d.b2ManifoldPoint.prototype.Copy=function(b){this.localPoint.Copy(b.localPoint);this.normalImpulse=b.normalImpulse;this.tangentImpulse=b.tangentImpulse;this.id.Copy(b.id);return this};goog.exportProperty(box2d.b2ManifoldPoint.prototype,"Copy",box2d.b2ManifoldPoint.prototype.Copy);box2d.b2ManifoldType={e_unknown:-1,e_circles:0,e_faceA:1,e_faceB:2};goog.exportSymbol("box2d.b2ManifoldType",box2d.b2ManifoldType);goog.exportProperty(box2d.b2ManifoldType,"e_unknown",box2d.b2ManifoldType.e_unknown);goog.exportProperty(box2d.b2ManifoldType,"e_circles",box2d.b2ManifoldType.e_circles);goog.exportProperty(box2d.b2ManifoldType,"e_faceA",box2d.b2ManifoldType.e_faceA);goog.exportProperty(box2d.b2ManifoldType,"e_faceB",box2d.b2ManifoldType.e_faceB);box2d.b2Manifold=function(){this.points=box2d.b2ManifoldPoint.MakeArray(box2d.b2_maxManifoldPoints);this.localNormal=new box2d.b2Vec2;this.localPoint=new box2d.b2Vec2;this.type=box2d.b2ManifoldType.e_unknown;this.pointCount=0};goog.exportSymbol("box2d.b2Manifold",box2d.b2Manifold);box2d.b2Manifold.prototype.points=null;goog.exportProperty(box2d.b2Manifold.prototype,"points",box2d.b2Manifold.prototype.points);box2d.b2Manifold.prototype.localNormal=null;goog.exportProperty(box2d.b2Manifold.prototype,"localNormal",box2d.b2Manifold.prototype.localNormal);box2d.b2Manifold.prototype.localPoint=null;goog.exportProperty(box2d.b2Manifold.prototype,"localPoint",box2d.b2Manifold.prototype.localPoint);box2d.b2Manifold.prototype.type=box2d.b2ManifoldType.e_unknown;goog.exportProperty(box2d.b2Manifold.prototype,"type",box2d.b2Manifold.prototype.type);box2d.b2Manifold.prototype.pointCount=0;goog.exportProperty(box2d.b2Manifold.prototype,"pointCount",box2d.b2Manifold.prototype.pointCount);box2d.b2Manifold.prototype.Reset=function(){for(var e=0,d=box2d.b2_maxManifoldPoints;e<d;++e){this.points[e].Reset()}this.localNormal.SetZero();this.localPoint.SetZero();this.type=box2d.b2ManifoldType.e_unknown;this.pointCount=0};goog.exportProperty(box2d.b2Manifold.prototype,"Reset",box2d.b2Manifold.prototype.Reset);box2d.b2Manifold.prototype.Copy=function(e){this.pointCount=e.pointCount;for(var d=0,f=box2d.b2_maxManifoldPoints;d<f;++d){this.points[d].Copy(e.points[d])}this.localNormal.Copy(e.localNormal);this.localPoint.Copy(e.localPoint);this.type=e.type;return this};goog.exportProperty(box2d.b2Manifold.prototype,"Copy",box2d.b2Manifold.prototype.Copy);box2d.b2Manifold.prototype.Clone=function(){return(new box2d.b2Manifold).Copy(this)};goog.exportProperty(box2d.b2Manifold.prototype,"Clone",box2d.b2Manifold.prototype.Clone);box2d.b2WorldManifold=function(){this.normal=new box2d.b2Vec2;this.points=box2d.b2Vec2.MakeArray(box2d.b2_maxManifoldPoints)};goog.exportSymbol("box2d.b2WorldManifold",box2d.b2WorldManifold);box2d.b2WorldManifold.prototype.normal=null;goog.exportProperty(box2d.b2WorldManifold.prototype,"normal",box2d.b2WorldManifold.prototype.normal);box2d.b2WorldManifold.prototype.points=null;goog.exportProperty(box2d.b2WorldManifold.prototype,"points",box2d.b2WorldManifold.prototype.points);box2d.b2WorldManifold.prototype.Initialize=function(B,A,z,v,y){if(0!=B.pointCount){switch(B.type){case box2d.b2ManifoldType.e_circles:this.normal.SetXY(1,0);A=box2d.b2MulXV(A,B.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_pointA);B=box2d.b2MulXV(v,B.points[0].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_pointB);box2d.b2DistanceSquaredVV(A,B)>box2d.b2_epsilon_sq&&box2d.b2SubVV(B,A,this.normal).SelfNormalize();var u=box2d.b2AddVMulSV(A,z,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA),s=box2d.b2SubVMulSV(B,y,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB);box2d.b2MidVV(u,s,this.points[0]);break;case box2d.b2ManifoldType.e_faceA:box2d.b2MulRV(A.q,B.localNormal,this.normal);for(var r=box2d.b2MulXV(A,B.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_planePoint),n=0,q=B.pointCount;n<q;++n){var j=box2d.b2MulXV(v,B.points[n].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_clipPoint),u=z-box2d.b2DotVV(box2d.b2SubVV(j,r,box2d.b2Vec2.s_t0),this.normal),u=box2d.b2AddVMulSV(j,u,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA),s=box2d.b2SubVMulSV(j,y,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB);box2d.b2MidVV(u,s,this.points[n])}break;case box2d.b2ManifoldType.e_faceB:box2d.b2MulRV(v.q,B.localNormal,this.normal);r=box2d.b2MulXV(v,B.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_planePoint);n=0;for(q=B.pointCount;n<q;++n){j=box2d.b2MulXV(A,B.points[n].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_clipPoint),u=y-box2d.b2DotVV(box2d.b2SubVV(j,r,box2d.b2Vec2.s_t0),this.normal),s=box2d.b2AddVMulSV(j,u,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB),u=box2d.b2SubVMulSV(j,z,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA),box2d.b2MidVV(u,s,this.points[n])}this.normal.SelfNeg()}}};goog.exportProperty(box2d.b2WorldManifold.prototype,"Initialize",box2d.b2WorldManifold.prototype.Initialize);box2d.b2WorldManifold.prototype.Initialize.s_pointA=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_pointB=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_cA=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_cB=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_planePoint=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_clipPoint=new box2d.b2Vec2;box2d.b2PointState={b2_nullState:0,b2_addState:1,b2_persistState:2,b2_removeState:3};goog.exportSymbol("box2d.b2PointState",box2d.b2PointState);goog.exportProperty(box2d.b2PointState,"b2_nullState   ",box2d.b2PointState.b2_nullState);goog.exportProperty(box2d.b2PointState,"b2_addState    ",box2d.b2PointState.b2_addState);goog.exportProperty(box2d.b2PointState,"b2_persistState",box2d.b2PointState.b2_persistState);goog.exportProperty(box2d.b2PointState,"b2_removeState ",box2d.b2PointState.b2_removeState);box2d.b2GetPointStates=function(v,u,s,q){for(var r=0,n=s.pointCount;r<n;++r){var m=s.points[r].id,m=m.key;v[r]=box2d.b2PointState.b2_removeState;for(var k=0,j=q.pointCount;k<j;++k){if(q.points[k].id.key==m){v[r]=box2d.b2PointState.b2_persistState;break}}}for(n=box2d.b2_maxManifoldPoints;r<n;++r){v[r]=box2d.b2PointState.b2_nullState}r=0;for(n=q.pointCount;r<n;++r){for(m=q.points[r].id,m=m.key,u[r]=box2d.b2PointState.b2_addState,k=0,j=s.pointCount;k<j;++k){if(s.points[k].id.key==m){u[r]=box2d.b2PointState.b2_persistState;break}}}for(n=box2d.b2_maxManifoldPoints;r<n;++r){u[r]=box2d.b2PointState.b2_nullState}};goog.exportSymbol("box2d.b2GetPointStates",box2d.b2GetPointStates);box2d.b2ClipVertex=function(){this.v=new box2d.b2Vec2;this.id=new box2d.b2ContactID};goog.exportSymbol("box2d.b2ClipVertex",box2d.b2ClipVertex);box2d.b2ClipVertex.prototype.v=null;goog.exportProperty(box2d.b2ClipVertex.prototype,"v",box2d.b2ClipVertex.prototype.v);box2d.b2ClipVertex.prototype.id=null;goog.exportProperty(box2d.b2ClipVertex.prototype,"id",box2d.b2ClipVertex.prototype.id);box2d.b2ClipVertex.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2ClipVertex})};goog.exportProperty(box2d.b2ClipVertex,"MakeArray",box2d.b2ClipVertex.MakeArray);box2d.b2ClipVertex.prototype.Copy=function(b){this.v.Copy(b.v);this.id.Copy(b.id);return this};goog.exportProperty(box2d.b2ClipVertex.prototype,"Copy",box2d.b2ClipVertex.prototype.Copy);box2d.b2RayCastInput=function(){this.p1=new box2d.b2Vec2;this.p2=new box2d.b2Vec2;this.maxFraction=1};goog.exportSymbol("box2d.b2RayCastInput",box2d.b2RayCastInput);box2d.b2RayCastInput.prototype.p1=null;goog.exportProperty(box2d.b2RayCastInput.prototype,"p1",box2d.b2RayCastInput.prototype.p1);box2d.b2RayCastInput.prototype.p2=null;goog.exportProperty(box2d.b2RayCastInput.prototype,"p2",box2d.b2RayCastInput.prototype.p2);box2d.b2RayCastInput.prototype.maxFraction=1;goog.exportProperty(box2d.b2RayCastInput.prototype,"maxFraction",box2d.b2RayCastInput.prototype.maxFraction);box2d.b2RayCastInput.prototype.Copy=function(b){this.p1.Copy(b.p1);this.p2.Copy(b.p2);this.maxFraction=b.maxFraction;return this};goog.exportProperty(box2d.b2RayCastInput.prototype,"Copy",box2d.b2RayCastInput.prototype.Copy);box2d.b2RayCastOutput=function(){this.normal=new box2d.b2Vec2;this.fraction=0};goog.exportSymbol("box2d.b2RayCastOutput",box2d.b2RayCastOutput);box2d.b2RayCastOutput.prototype.normal=null;goog.exportProperty(box2d.b2RayCastOutput.prototype,"normal",box2d.b2RayCastOutput.prototype.normal);box2d.b2RayCastOutput.prototype.fraction=0;goog.exportProperty(box2d.b2RayCastOutput.prototype,"fraction",box2d.b2RayCastOutput.prototype.fraction);box2d.b2RayCastOutput.prototype.Copy=function(b){this.normal.Copy(b.normal);this.fraction=b.fraction;return this};goog.exportProperty(box2d.b2RayCastOutput.prototype,"Copy",box2d.b2RayCastOutput.prototype.Copy);box2d.b2AABB=function(){this.lowerBound=new box2d.b2Vec2;this.upperBound=new box2d.b2Vec2;this.m_out_center=new box2d.b2Vec2;this.m_out_extent=new box2d.b2Vec2};goog.exportSymbol("box2d.b2AABB",box2d.b2AABB);box2d.b2AABB.prototype.lowerBound=null;goog.exportProperty(box2d.b2AABB.prototype,"lowerBound",box2d.b2AABB.prototype.lowerBound);box2d.b2AABB.prototype.upperBound=null;goog.exportProperty(box2d.b2AABB.prototype,"upperBound",box2d.b2AABB.prototype.upperBound);box2d.b2AABB.prototype.m_out_center=null;goog.exportProperty(box2d.b2AABB.prototype,"m_out_center",box2d.b2AABB.prototype.m_out_center);box2d.b2AABB.prototype.m_out_extent=null;goog.exportProperty(box2d.b2AABB.prototype,"m_out_extent",box2d.b2AABB.prototype.m_out_extent);box2d.b2AABB.prototype.Copy=function(b){this.lowerBound.Copy(b.lowerBound);this.upperBound.Copy(b.upperBound);return this};goog.exportProperty(box2d.b2AABB.prototype,"Copy",box2d.b2AABB.prototype.Copy);box2d.b2AABB.prototype.IsValid=function(){var b=this.upperBound.y-this.lowerBound.y;return b=(b=0<=this.upperBound.x-this.lowerBound.x&&0<=b)&&this.lowerBound.IsValid()&&this.upperBound.IsValid()};goog.exportProperty(box2d.b2AABB.prototype,"IsValid",box2d.b2AABB.prototype.IsValid);box2d.b2AABB.prototype.GetCenter=function(){return box2d.b2MidVV(this.lowerBound,this.upperBound,this.m_out_center)};goog.exportProperty(box2d.b2AABB.prototype,"GetCenter",box2d.b2AABB.prototype.GetCenter);box2d.b2AABB.prototype.GetExtents=function(){return box2d.b2ExtVV(this.lowerBound,this.upperBound,this.m_out_extent)};goog.exportProperty(box2d.b2AABB.prototype,"GetExtents",box2d.b2AABB.prototype.GetExtents);box2d.b2AABB.prototype.GetPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))};goog.exportProperty(box2d.b2AABB.prototype,"GetPerimeter",box2d.b2AABB.prototype.GetPerimeter);box2d.b2AABB.prototype.Combine1=function(b){this.lowerBound.x=box2d.b2Min(this.lowerBound.x,b.lowerBound.x);this.lowerBound.y=box2d.b2Min(this.lowerBound.y,b.lowerBound.y);this.upperBound.x=box2d.b2Max(this.upperBound.x,b.upperBound.x);this.upperBound.y=box2d.b2Max(this.upperBound.y,b.upperBound.y);return this};goog.exportProperty(box2d.b2AABB.prototype,"Combine1",box2d.b2AABB.prototype.Combine1);box2d.b2AABB.prototype.Combine2=function(e,d){this.lowerBound.x=box2d.b2Min(e.lowerBound.x,d.lowerBound.x);this.lowerBound.y=box2d.b2Min(e.lowerBound.y,d.lowerBound.y);this.upperBound.x=box2d.b2Max(e.upperBound.x,d.upperBound.x);this.upperBound.y=box2d.b2Max(e.upperBound.y,d.upperBound.y);return this};goog.exportProperty(box2d.b2AABB.prototype,"Combine2",box2d.b2AABB.prototype.Combine2);box2d.b2AABB.Combine=function(e,d,f){f.Combine2(e,d);return f};goog.exportProperty(box2d.b2AABB,"Combine",box2d.b2AABB.Combine);box2d.b2AABB.prototype.Contains=function(e){var d;return d=(d=(d=(d=this.lowerBound.x<=e.lowerBound.x)&&this.lowerBound.y<=e.lowerBound.y)&&e.upperBound.x<=this.upperBound.x)&&e.upperBound.y<=this.upperBound.y};goog.exportProperty(box2d.b2AABB.prototype,"Contains",box2d.b2AABB.prototype.Contains);box2d.b2AABB.prototype.RayCast=function(B,A){var z=-box2d.b2_maxFloat,v=box2d.b2_maxFloat,y=A.p1.x,u=A.p1.y,s=A.p2.x-A.p1.x,r=A.p2.y-A.p1.y,n=box2d.b2Abs(s),q=box2d.b2Abs(r),j=B.normal;if(n<box2d.b2_epsilon){if(y<this.lowerBound.x||this.upperBound.x<y){return !1}}else{if(n=1/s,s=(this.lowerBound.x-y)*n,y=(this.upperBound.x-y)*n,n=-1,s>y&&(n=s,s=y,y=n,n=1),s>z&&(j.x=n,j.y=0,z=s),v=box2d.b2Min(v,y),z>v){return !1}}if(q<box2d.b2_epsilon){if(u<this.lowerBound.y||this.upperBound.y<u){return !1}}else{if(n=1/r,s=(this.lowerBound.y-u)*n,y=(this.upperBound.y-u)*n,n=-1,s>y&&(n=s,s=y,y=n,n=1),s>z&&(j.x=0,j.y=n,z=s),v=box2d.b2Min(v,y),z>v){return !1}}if(0>z||A.maxFraction<z){return !1}B.fraction=z;return !0};goog.exportProperty(box2d.b2AABB.prototype,"RayCast",box2d.b2AABB.prototype.RayCast);box2d.b2AABB.prototype.TestOverlap=function(e){var d=e.lowerBound.y-this.upperBound.y,f=this.lowerBound.y-e.upperBound.y;return 0<e.lowerBound.x-this.upperBound.x||0<d||0<this.lowerBound.x-e.upperBound.x||0<f?!1:!0};goog.exportProperty(box2d.b2AABB.prototype,"TestOverlap",box2d.b2AABB.prototype.TestOverlap);box2d.b2TestOverlapAABB=function(f,d){var j=d.lowerBound.y-f.upperBound.y,g=f.lowerBound.y-d.upperBound.y;return 0<d.lowerBound.x-f.upperBound.x||0<j||0<f.lowerBound.x-d.upperBound.x||0<g?!1:!0};goog.exportSymbol("box2d.b2TestOverlapAABB",box2d.b2TestOverlapAABB);box2d.b2ClipSegmentToLine=function(k,j,u,r,s){var q=0,n=j[0];j=j[1];var m=box2d.b2DotVV(u,n.v)-r;u=box2d.b2DotVV(u,j.v)-r;0>=m&&k[q++].Copy(n);0>=u&&k[q++].Copy(j);0>m*u&&(u=m/(m-u),r=k[q].v,r.x=n.v.x+u*(j.v.x-n.v.x),r.y=n.v.y+u*(j.v.y-n.v.y),k=k[q].id,k.cf.indexA=s,k.cf.indexB=n.id.cf.indexB,k.cf.typeA=box2d.b2ContactFeatureType.e_vertex,k.cf.typeB=box2d.b2ContactFeatureType.e_face,++q);return q};goog.exportSymbol("box2d.b2ClipSegmentToLine",box2d.b2ClipSegmentToLine);box2d.b2TestOverlapShape=function(k,j,s,q,r,n){var m=box2d.b2TestOverlapShape.s_input.Reset();m.proxyA.SetShape(k,j);m.proxyB.SetShape(s,q);m.transformA.Copy(r);m.transformB.Copy(n);m.useRadii=!0;k=box2d.b2TestOverlapShape.s_simplexCache.Reset();k.count=0;j=box2d.b2TestOverlapShape.s_output.Reset();box2d.b2Distance(j,k,m);return j.distance<10*box2d.b2_epsilon};goog.exportSymbol("box2d.b2TestOverlapShape",box2d.b2TestOverlapShape);box2d.b2TestOverlapShape.s_input=new box2d.b2DistanceInput;box2d.b2TestOverlapShape.s_simplexCache=new box2d.b2SimplexCache;box2d.b2TestOverlapShape.s_output=new box2d.b2DistanceOutput;box2d.b2Timer=function(){this.m_start=(new Date).getTime()};goog.exportSymbol("box2d.b2Timer",box2d.b2Timer);box2d.b2Timer.prototype.m_start=0;goog.exportProperty(box2d.b2Timer.prototype,"m_start",box2d.b2Timer.prototype.m_start);box2d.b2Timer.prototype.Reset=function(){this.m_start=(new Date).getTime();return this};goog.exportProperty(box2d.b2Timer.prototype,"Reset",box2d.b2Timer.prototype.Reset);box2d.b2Timer.prototype.GetMilliseconds=function(){return(new Date).getTime()-this.m_start};goog.exportProperty(box2d.b2Timer.prototype,"GetMilliseconds",box2d.b2Timer.prototype.GetMilliseconds);box2d.b2Counter=function(){};goog.exportSymbol("box2d.b2Counter",box2d.b2Counter);box2d.b2Counter.prototype.m_count=0;goog.exportProperty(box2d.b2Counter.prototype,"m_count",box2d.b2Counter.prototype.m_count);box2d.b2Counter.prototype.m_min_count=0;goog.exportProperty(box2d.b2Counter.prototype,"m_min_count",box2d.b2Counter.prototype.m_min_count);box2d.b2Counter.prototype.m_max_count=0;goog.exportProperty(box2d.b2Counter.prototype,"m_max_count",box2d.b2Counter.prototype.m_max_count);box2d.b2Counter.prototype.GetCount=function(){return this.m_count};goog.exportProperty(box2d.b2Counter.prototype,"GetCount",box2d.b2Counter.prototype.GetCount);box2d.b2Counter.prototype.GetMinCount=function(){return this.m_min_count};goog.exportProperty(box2d.b2Counter.prototype,"GetMinCount",box2d.b2Counter.prototype.GetMinCount);box2d.b2Counter.prototype.GetMaxCount=function(){return this.m_max_count};goog.exportProperty(box2d.b2Counter.prototype,"GetMaxCount",box2d.b2Counter.prototype.GetMaxCount);box2d.b2Counter.prototype.ResetCount=function(){var b=this.m_count;this.m_count=0;return b};goog.exportProperty(box2d.b2Counter.prototype,"ResetCount",box2d.b2Counter.prototype.ResetCount);box2d.b2Counter.prototype.ResetMinCount=function(){this.m_min_count=0};goog.exportProperty(box2d.b2Counter.prototype,"ResetMinCount",box2d.b2Counter.prototype.ResetMinCount);box2d.b2Counter.prototype.ResetMaxCount=function(){this.m_max_count=0};goog.exportProperty(box2d.b2Counter.prototype,"ResetMaxCount",box2d.b2Counter.prototype.ResetMaxCount);box2d.b2Counter.prototype.Increment=function(){this.m_count++;this.m_max_count<this.m_count&&(this.m_max_count=this.m_count)};goog.exportProperty(box2d.b2Counter.prototype,"Increment",box2d.b2Counter.prototype.Increment);box2d.b2Counter.prototype.Decrement=function(){this.m_count--;this.m_min_count>this.m_count&&(this.m_min_count=this.m_count)};goog.exportProperty(box2d.b2Counter.prototype,"Decrement",box2d.b2Counter.prototype.Decrement);box2d.b2_toiTime=0;goog.exportSymbol("box2d.b2_toiTime",box2d.b2_toiTime);box2d.b2_toiMaxTime=0;goog.exportSymbol("box2d.b2_toiMaxTime",box2d.b2_toiMaxTime);box2d.b2_toiCalls=0;goog.exportSymbol("box2d.b2_toiCalls",box2d.b2_toiCalls);box2d.b2_toiIters=0;goog.exportSymbol("box2d.b2_toiIters",box2d.b2_toiIters);box2d.b2_toiMaxIters=0;goog.exportSymbol("box2d.b2_toiMaxIters",box2d.b2_toiMaxIters);box2d.b2_toiRootIters=0;goog.exportSymbol("box2d.b2_toiRootIters",box2d.b2_toiRootIters);box2d.b2_toiMaxRootIters=0;goog.exportSymbol("box2d.b2_toiMaxRootIters",box2d.b2_toiMaxRootIters);box2d.b2TOIInput=function(){this.proxyA=new box2d.b2DistanceProxy;this.proxyB=new box2d.b2DistanceProxy;this.sweepA=new box2d.b2Sweep;this.sweepB=new box2d.b2Sweep};goog.exportSymbol("box2d.b2TOIInput",box2d.b2TOIInput);box2d.b2TOIInput.prototype.proxyA=null;goog.exportProperty(box2d.b2TOIInput.prototype,"proxyA",box2d.b2TOIInput.prototype.proxyA);box2d.b2TOIInput.prototype.proxyB=null;goog.exportProperty(box2d.b2TOIInput.prototype,"proxyB",box2d.b2TOIInput.prototype.proxyB);box2d.b2TOIInput.prototype.sweepA=null;goog.exportProperty(box2d.b2TOIInput.prototype,"sweepA",box2d.b2TOIInput.prototype.sweepA);box2d.b2TOIInput.prototype.sweepB=null;goog.exportProperty(box2d.b2TOIInput.prototype,"sweepB",box2d.b2TOIInput.prototype.sweepB);box2d.b2TOIInput.prototype.tMax=0;goog.exportProperty(box2d.b2TOIInput.prototype,"tMax",box2d.b2TOIInput.prototype.tMax);box2d.b2TOIOutputState={e_unknown:0,e_failed:1,e_overlapped:2,e_touching:3,e_separated:4};goog.exportSymbol("box2d.b2TOIOutputState",box2d.b2TOIOutputState);goog.exportProperty(box2d.b2TOIOutputState,"e_unknown",box2d.b2TOIOutputState.e_unknown);goog.exportProperty(box2d.b2TOIOutputState,"e_failed",box2d.b2TOIOutputState.e_failed);goog.exportProperty(box2d.b2TOIOutputState,"e_overlapped",box2d.b2TOIOutputState.e_overlapped);goog.exportProperty(box2d.b2TOIOutputState,"e_touching",box2d.b2TOIOutputState.e_touching);goog.exportProperty(box2d.b2TOIOutputState,"e_separated",box2d.b2TOIOutputState.e_separated);box2d.b2TOIOutput=function(){};goog.exportSymbol("box2d.b2TOIOutput",box2d.b2TOIOutput);box2d.b2TOIOutput.prototype.state=box2d.b2TOIOutputState.e_unknown;goog.exportProperty(box2d.b2TOIOutput.prototype,"state",box2d.b2TOIOutput.prototype.state);box2d.b2TOIOutput.prototype.t=0;goog.exportProperty(box2d.b2TOIOutput.prototype,"t",box2d.b2TOIOutput.prototype.t);box2d.b2SeparationFunctionType={e_unknown:-1,e_points:0,e_faceA:1,e_faceB:2};goog.exportSymbol("box2d.b2SeparationFunctionType",box2d.b2SeparationFunctionType);goog.exportProperty(box2d.b2SeparationFunctionType,"e_unknown",box2d.b2SeparationFunctionType.e_unknown);goog.exportProperty(box2d.b2SeparationFunctionType,"e_points",box2d.b2SeparationFunctionType.e_points);goog.exportProperty(box2d.b2SeparationFunctionType,"e_faceA",box2d.b2SeparationFunctionType.e_faceA);goog.exportProperty(box2d.b2SeparationFunctionType,"e_faceB",box2d.b2SeparationFunctionType.e_faceB);box2d.b2SeparationFunction=function(){this.m_sweepA=new box2d.b2Sweep;this.m_sweepB=new box2d.b2Sweep;this.m_localPoint=new box2d.b2Vec2;this.m_axis=new box2d.b2Vec2};goog.exportSymbol("box2d.b2SeparationFunction",box2d.b2SeparationFunction);box2d.b2SeparationFunction.prototype.m_proxyA=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_proxyA",box2d.b2SeparationFunction.prototype.m_proxyA);box2d.b2SeparationFunction.prototype.m_proxyB=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_proxyB",box2d.b2SeparationFunction.prototype.m_proxyB);box2d.b2SeparationFunction.prototype.m_sweepA=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_sweepA",box2d.b2SeparationFunction.prototype.m_sweepA);box2d.b2SeparationFunction.prototype.m_sweepB=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_sweepB",box2d.b2SeparationFunction.prototype.m_sweepB);box2d.b2SeparationFunction.prototype.m_type=box2d.b2SeparationFunctionType.e_unknown;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_type",box2d.b2SeparationFunction.prototype.m_type);box2d.b2SeparationFunction.prototype.m_localPoint=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_localPoint",box2d.b2SeparationFunction.prototype.m_localPoint);box2d.b2SeparationFunction.prototype.m_axis=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_axis",box2d.b2SeparationFunction.prototype.m_axis);box2d.b2SeparationFunction.prototype.Initialize=function(j,g,q,m,n,k){this.m_proxyA=g;this.m_proxyB=m;g=j.count;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<g&&3>g);this.m_sweepA.Copy(q);this.m_sweepB.Copy(n);q=box2d.b2TimeOfImpact.s_xfA;n=box2d.b2TimeOfImpact.s_xfB;this.m_sweepA.GetTransform(q,k);this.m_sweepB.GetTransform(n,k);1==g?(this.m_type=box2d.b2SeparationFunctionType.e_points,g=this.m_proxyA.GetVertex(j.indexA[0]),j=this.m_proxyB.GetVertex(j.indexB[0]),q=box2d.b2MulXV(q,g,box2d.b2TimeOfImpact.s_pointA),n=box2d.b2MulXV(n,j,box2d.b2TimeOfImpact.s_pointB),box2d.b2SubVV(n,q,this.m_axis),j=this.m_axis.Normalize()):(j.indexA[0]==j.indexA[1]?(this.m_type=box2d.b2SeparationFunctionType.e_faceB,g=this.m_proxyB.GetVertex(j.indexB[0]),m=this.m_proxyB.GetVertex(j.indexB[1]),box2d.b2CrossVOne(box2d.b2SubVV(m,g,box2d.b2Vec2.s_t0),this.m_axis).SelfNormalize(),k=box2d.b2MulRV(n.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),box2d.b2MidVV(g,m,this.m_localPoint),n=box2d.b2MulXV(n,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),g=this.m_proxyA.GetVertex(j.indexA[0]),q=box2d.b2MulXV(q,g,box2d.b2TimeOfImpact.s_pointA),j=box2d.b2DotVV(box2d.b2SubVV(q,n,box2d.b2Vec2.s_t0),k)):(this.m_type=box2d.b2SeparationFunctionType.e_faceA,g=this.m_proxyA.GetVertex(j.indexA[0]),m=this.m_proxyA.GetVertex(j.indexA[1]),box2d.b2CrossVOne(box2d.b2SubVV(m,g,box2d.b2Vec2.s_t0),this.m_axis).SelfNormalize(),k=box2d.b2MulRV(q.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),box2d.b2MidVV(g,m,this.m_localPoint),q=box2d.b2MulXV(q,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),j=this.m_proxyB.GetVertex(j.indexB[0]),n=box2d.b2MulXV(n,j,box2d.b2TimeOfImpact.s_pointB),j=box2d.b2DotVV(box2d.b2SubVV(n,q,box2d.b2Vec2.s_t0),k)),0>j&&(this.m_axis.SelfNeg(),j=-j));return j};goog.exportProperty(box2d.b2SeparationFunction.prototype,"Initialize",box2d.b2SeparationFunction.prototype.Initialize);box2d.b2SeparationFunction.prototype.FindMinSeparation=function(k,j,s){var q=box2d.b2TimeOfImpact.s_xfA,r=box2d.b2TimeOfImpact.s_xfB;this.m_sweepA.GetTransform(q,s);this.m_sweepB.GetTransform(r,s);switch(this.m_type){case box2d.b2SeparationFunctionType.e_points:var n=box2d.b2MulTRV(q.q,this.m_axis,box2d.b2TimeOfImpact.s_axisA),m=box2d.b2MulTRV(r.q,box2d.b2NegV(this.m_axis,box2d.b2Vec2.s_t0),box2d.b2TimeOfImpact.s_axisB);k[0]=this.m_proxyA.GetSupport(n);j[0]=this.m_proxyB.GetSupport(m);k=this.m_proxyA.GetVertex(k[0]);j=this.m_proxyB.GetVertex(j[0]);q=box2d.b2MulXV(q,k,box2d.b2TimeOfImpact.s_pointA);r=box2d.b2MulXV(r,j,box2d.b2TimeOfImpact.s_pointB);return j=box2d.b2DotVV(box2d.b2SubVV(r,q,box2d.b2Vec2.s_t0),this.m_axis);case box2d.b2SeparationFunctionType.e_faceA:return s=box2d.b2MulRV(q.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),q=box2d.b2MulXV(q,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),m=box2d.b2MulTRV(r.q,box2d.b2NegV(s,box2d.b2Vec2.s_t0),box2d.b2TimeOfImpact.s_axisB),k[0]=-1,j[0]=this.m_proxyB.GetSupport(m),j=this.m_proxyB.GetVertex(j[0]),r=box2d.b2MulXV(r,j,box2d.b2TimeOfImpact.s_pointB),j=box2d.b2DotVV(box2d.b2SubVV(r,q,box2d.b2Vec2.s_t0),s);case box2d.b2SeparationFunctionType.e_faceB:return s=box2d.b2MulRV(r.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),r=box2d.b2MulXV(r,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),n=box2d.b2MulTRV(q.q,box2d.b2NegV(s,box2d.b2Vec2.s_t0),box2d.b2TimeOfImpact.s_axisA),j[0]=-1,k[0]=this.m_proxyA.GetSupport(n),k=this.m_proxyA.GetVertex(k[0]),q=box2d.b2MulXV(q,k,box2d.b2TimeOfImpact.s_pointA),j=box2d.b2DotVV(box2d.b2SubVV(q,r,box2d.b2Vec2.s_t0),s);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),k[0]=-1,j[0]=-1,0}};goog.exportProperty(box2d.b2SeparationFunction.prototype,"FindMinSeparation",box2d.b2SeparationFunction.prototype.FindMinSeparation);box2d.b2SeparationFunction.prototype.Evaluate=function(g,f,m){var j=box2d.b2TimeOfImpact.s_xfA,k=box2d.b2TimeOfImpact.s_xfB;this.m_sweepA.GetTransform(j,m);this.m_sweepB.GetTransform(k,m);switch(this.m_type){case box2d.b2SeparationFunctionType.e_points:return g=this.m_proxyA.GetVertex(g),f=this.m_proxyB.GetVertex(f),j=box2d.b2MulXV(j,g,box2d.b2TimeOfImpact.s_pointA),k=box2d.b2MulXV(k,f,box2d.b2TimeOfImpact.s_pointB),j=box2d.b2DotVV(box2d.b2SubVV(k,j,box2d.b2Vec2.s_t0),this.m_axis);case box2d.b2SeparationFunctionType.e_faceA:return m=box2d.b2MulRV(j.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),j=box2d.b2MulXV(j,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),f=this.m_proxyB.GetVertex(f),k=box2d.b2MulXV(k,f,box2d.b2TimeOfImpact.s_pointB),j=box2d.b2DotVV(box2d.b2SubVV(k,j,box2d.b2Vec2.s_t0),m);case box2d.b2SeparationFunctionType.e_faceB:return m=box2d.b2MulRV(k.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),k=box2d.b2MulXV(k,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),g=this.m_proxyA.GetVertex(g),j=box2d.b2MulXV(j,g,box2d.b2TimeOfImpact.s_pointA),j=box2d.b2DotVV(box2d.b2SubVV(j,k,box2d.b2Vec2.s_t0),m);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0}};goog.exportProperty(box2d.b2SeparationFunction.prototype,"Evaluate",box2d.b2SeparationFunction.prototype.Evaluate);box2d.b2TimeOfImpact=function(ad,ac){var ab=box2d.b2TimeOfImpact.s_timer.Reset();++box2d.b2_toiCalls;ad.state=box2d.b2TOIOutputState.e_unknown;ad.t=ac.tMax;var Z=ac.proxyA,aa=ac.proxyB,Y=box2d.b2TimeOfImpact.s_sweepA.Copy(ac.sweepA),X=box2d.b2TimeOfImpact.s_sweepB.Copy(ac.sweepB);Y.Normalize();X.Normalize();var W=ac.tMax,U=box2d.b2Max(box2d.b2_linearSlop,Z.m_radius+aa.m_radius-3*box2d.b2_linearSlop),V=0.25*box2d.b2_linearSlop;box2d.ENABLE_ASSERTS&&box2d.b2Assert(U>V);var T=0,S=0,R=box2d.b2TimeOfImpact.s_cache;R.count=0;var P=box2d.b2TimeOfImpact.s_distanceInput;P.proxyA=ac.proxyA;P.proxyB=ac.proxyB;for(P.useRadii=!1;;){var N=box2d.b2TimeOfImpact.s_xfA,J=box2d.b2TimeOfImpact.s_xfB;Y.GetTransform(N,T);X.GetTransform(J,T);P.transformA.Copy(N);P.transformB.Copy(J);N=box2d.b2TimeOfImpact.s_distanceOutput;box2d.b2Distance(N,R,P);if(0>=N.distance){ad.state=box2d.b2TOIOutputState.e_overlapped;ad.t=0;break}if(N.distance<U+V){ad.state=box2d.b2TOIOutputState.e_touching;ad.t=T;break}N=box2d.b2TimeOfImpact.s_fcn;N.Initialize(R,Z,Y,aa,X,T);for(var J=!1,L=W,H=0;;){var G=box2d.b2TimeOfImpact.s_indexA,j=box2d.b2TimeOfImpact.s_indexB,K=N.FindMinSeparation(G,j,L);if(K>U+V){ad.state=box2d.b2TOIOutputState.e_separated;ad.t=W;J=!0;break}if(K>U-V){T=L;break}var z=N.Evaluate(G[0],j[0],T);if(z<U-V){ad.state=box2d.b2TOIOutputState.e_failed;ad.t=T;J=!0;break}if(z<=U+V){ad.state=box2d.b2TOIOutputState.e_touching;ad.t=T;J=!0;break}for(var F=0,M=T,Q=L;;){var I=0,I=F&1?M+(U-z)*(Q-M)/(K-z):0.5*(M+Q);++F;++box2d.b2_toiRootIters;var O=N.Evaluate(G[0],j[0],I);if(box2d.b2Abs(O-U)<V){L=I;break}O>U?(M=I,z=O):(Q=I,K=O);if(50==F){break}}box2d.b2_toiMaxRootIters=box2d.b2Max(box2d.b2_toiMaxRootIters,F);++H;if(H==box2d.b2_maxPolygonVertices){break}}++S;++box2d.b2_toiIters;if(J){break}if(20==S){ad.state=box2d.b2TOIOutputState.e_failed;ad.t=T;break}}box2d.b2_toiMaxIters=box2d.b2Max(box2d.b2_toiMaxIters,S);ab=ab.GetMilliseconds();box2d.b2_toiMaxTime=box2d.b2Max(box2d.b2_toiMaxTime,ab);box2d.b2_toiTime+=ab};goog.exportSymbol("box2d.b2TimeOfImpact",box2d.b2TimeOfImpact);box2d.b2TimeOfImpact.s_timer=new box2d.b2Timer;box2d.b2TimeOfImpact.s_cache=new box2d.b2SimplexCache;box2d.b2TimeOfImpact.s_distanceInput=new box2d.b2DistanceInput;box2d.b2TimeOfImpact.s_distanceOutput=new box2d.b2DistanceOutput;box2d.b2TimeOfImpact.s_xfA=new box2d.b2Transform;box2d.b2TimeOfImpact.s_xfB=new box2d.b2Transform;box2d.b2TimeOfImpact.s_indexA=box2d.b2MakeNumberArray(1);box2d.b2TimeOfImpact.s_indexB=box2d.b2MakeNumberArray(1);box2d.b2TimeOfImpact.s_fcn=new box2d.b2SeparationFunction;box2d.b2TimeOfImpact.s_sweepA=new box2d.b2Sweep;box2d.b2TimeOfImpact.s_sweepB=new box2d.b2Sweep;box2d.b2TimeOfImpact.s_pointA=new box2d.b2Vec2;box2d.b2TimeOfImpact.s_pointB=new box2d.b2Vec2;box2d.b2TimeOfImpact.s_normal=new box2d.b2Vec2;box2d.b2TimeOfImpact.s_axisA=new box2d.b2Vec2;box2d.b2TimeOfImpact.s_axisB=new box2d.b2Vec2;box2d.b2MixFriction=function(e,d){return box2d.b2Sqrt(e*d)};goog.exportSymbol("box2d.b2MixFriction",box2d.b2MixFriction);box2d.b2MixRestitution=function(e,d){return e>d?e:d};goog.exportSymbol("box2d.b2MixRestitution",box2d.b2MixRestitution);box2d.b2ContactEdge=function(){};goog.exportSymbol("box2d.b2ContactEdge",box2d.b2ContactEdge);box2d.b2ContactEdge.prototype.other=null;goog.exportProperty(box2d.b2ContactEdge.prototype,"other",box2d.b2ContactEdge.prototype.other);box2d.b2ContactEdge.prototype.contact=null;goog.exportProperty(box2d.b2ContactEdge.prototype,"contact",box2d.b2ContactEdge.prototype.contact);box2d.b2ContactEdge.prototype.prev=null;goog.exportProperty(box2d.b2ContactEdge.prototype,"prev",box2d.b2ContactEdge.prototype.prev);box2d.b2ContactEdge.prototype.next=null;goog.exportProperty(box2d.b2ContactEdge.prototype,"next",box2d.b2ContactEdge.prototype.next);box2d.b2ContactFlag={e_none:0,e_islandFlag:1,e_touchingFlag:2,e_enabledFlag:4,e_filterFlag:8,e_bulletHitFlag:16,e_toiFlag:32};goog.exportProperty(box2d.b2ContactFlag,"e_none",box2d.b2ContactFlag.e_none);goog.exportProperty(box2d.b2ContactFlag,"e_islandFlag",box2d.b2ContactFlag.e_islandFlag);goog.exportProperty(box2d.b2ContactFlag,"e_touchingFlag",box2d.b2ContactFlag.e_touchingFlag);goog.exportProperty(box2d.b2ContactFlag,"e_enabledFlag",box2d.b2ContactFlag.e_enabledFlag);goog.exportProperty(box2d.b2ContactFlag,"e_filterFlag",box2d.b2ContactFlag.e_filterFlag);goog.exportProperty(box2d.b2ContactFlag,"e_bulletHitFlag",box2d.b2ContactFlag.e_bulletHitFlag);goog.exportProperty(box2d.b2ContactFlag,"e_toiFlag",box2d.b2ContactFlag.e_toiFlag);box2d.b2Contact=function(){this.m_nodeA=new box2d.b2ContactEdge;this.m_nodeB=new box2d.b2ContactEdge;this.m_manifold=new box2d.b2Manifold;this.m_oldManifold=new box2d.b2Manifold};goog.exportSymbol("box2d.b2Contact",box2d.b2Contact);box2d.b2Contact.prototype.m_flags=box2d.b2ContactFlag.e_none;goog.exportProperty(box2d.b2Contact.prototype,"m_flags",box2d.b2Contact.prototype.m_flags);box2d.b2Contact.prototype.m_prev=null;goog.exportProperty(box2d.b2Contact.prototype,"m_prev",box2d.b2Contact.prototype.m_prev);box2d.b2Contact.prototype.m_next=null;goog.exportProperty(box2d.b2Contact.prototype,"m_next",box2d.b2Contact.prototype.m_next);box2d.b2Contact.prototype.m_nodeA=null;goog.exportProperty(box2d.b2Contact.prototype,"m_nodeA",box2d.b2Contact.prototype.m_nodeA);box2d.b2Contact.prototype.m_nodeB=null;goog.exportProperty(box2d.b2Contact.prototype,"m_nodeB",box2d.b2Contact.prototype.m_nodeB);box2d.b2Contact.prototype.m_fixtureA=null;goog.exportProperty(box2d.b2Contact.prototype,"m_fixtureA",box2d.b2Contact.prototype.m_fixtureA);box2d.b2Contact.prototype.m_fixtureB=null;goog.exportProperty(box2d.b2Contact.prototype,"m_fixtureB",box2d.b2Contact.prototype.m_fixtureB);box2d.b2Contact.prototype.m_indexA=0;goog.exportProperty(box2d.b2Contact.prototype,"m_indexA",box2d.b2Contact.prototype.m_indexA);box2d.b2Contact.prototype.m_indexB=0;goog.exportProperty(box2d.b2Contact.prototype,"m_indexB",box2d.b2Contact.prototype.m_indexB);box2d.b2Contact.prototype.m_manifold=null;goog.exportProperty(box2d.b2Contact.prototype,"m_manifold",box2d.b2Contact.prototype.m_manifold);box2d.b2Contact.prototype.m_toiCount=0;goog.exportProperty(box2d.b2Contact.prototype,"m_toiCount",box2d.b2Contact.prototype.m_toiCount);box2d.b2Contact.prototype.m_toi=0;goog.exportProperty(box2d.b2Contact.prototype,"m_toi",box2d.b2Contact.prototype.m_toi);box2d.b2Contact.prototype.m_friction=0;goog.exportProperty(box2d.b2Contact.prototype,"m_friction",box2d.b2Contact.prototype.m_friction);box2d.b2Contact.prototype.m_restitution=0;goog.exportProperty(box2d.b2Contact.prototype,"m_restitution",box2d.b2Contact.prototype.m_restitution);box2d.b2Contact.prototype.m_tangentSpeed=0;goog.exportProperty(box2d.b2Contact.prototype,"m_tangentSpeed",box2d.b2Contact.prototype.m_tangentSpeed);box2d.b2Contact.prototype.m_oldManifold=null;goog.exportProperty(box2d.b2Contact.prototype,"m_oldManifold",box2d.b2Contact.prototype.m_oldManifold);box2d.b2Contact.prototype.GetManifold=function(){return this.m_manifold};goog.exportProperty(box2d.b2Contact.prototype,"GetManifold",box2d.b2Contact.prototype.GetManifold);box2d.b2Contact.prototype.GetWorldManifold=function(g){var f=this.m_fixtureA.GetBody(),m=this.m_fixtureB.GetBody(),j=this.m_fixtureA.GetShape(),k=this.m_fixtureB.GetShape();g.Initialize(this.m_manifold,f.GetTransform(),j.m_radius,m.GetTransform(),k.m_radius)};goog.exportProperty(box2d.b2Contact.prototype,"GetWorldManifold",box2d.b2Contact.prototype.GetWorldManifold);box2d.b2Contact.prototype.IsTouching=function(){return(this.m_flags&box2d.b2ContactFlag.e_touchingFlag)==box2d.b2ContactFlag.e_touchingFlag};goog.exportProperty(box2d.b2Contact.prototype,"IsTouching",box2d.b2Contact.prototype.IsTouching);box2d.b2Contact.prototype.SetEnabled=function(b){this.m_flags=b?this.m_flags|box2d.b2ContactFlag.e_enabledFlag:this.m_flags&~box2d.b2ContactFlag.e_enabledFlag};goog.exportProperty(box2d.b2Contact.prototype,"SetEnabled",box2d.b2Contact.prototype.SetEnabled);box2d.b2Contact.prototype.IsEnabled=function(){return(this.m_flags&box2d.b2ContactFlag.e_enabledFlag)==box2d.b2ContactFlag.e_enabledFlag};goog.exportProperty(box2d.b2Contact.prototype,"IsEnabled",box2d.b2Contact.prototype.IsEnabled);box2d.b2Contact.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2Contact.prototype,"GetNext",box2d.b2Contact.prototype.GetNext);box2d.b2Contact.prototype.GetFixtureA=function(){return this.m_fixtureA};goog.exportProperty(box2d.b2Contact.prototype,"GetFixtureA",box2d.b2Contact.prototype.GetFixtureA);box2d.b2Contact.prototype.GetChildIndexA=function(){return this.m_indexA};goog.exportProperty(box2d.b2Contact.prototype,"GetChildIndexA",box2d.b2Contact.prototype.GetChildIndexA);box2d.b2Contact.prototype.GetFixtureB=function(){return this.m_fixtureB};goog.exportProperty(box2d.b2Contact.prototype,"GetFixtureB",box2d.b2Contact.prototype.GetFixtureB);box2d.b2Contact.prototype.GetChildIndexB=function(){return this.m_indexB};goog.exportProperty(box2d.b2Contact.prototype,"GetChildIndexB",box2d.b2Contact.prototype.GetChildIndexB);box2d.b2Contact.prototype.Evaluate=function(e,d,f){};goog.exportProperty(box2d.b2Contact.prototype,"Evaluate",box2d.b2Contact.prototype.Evaluate);box2d.b2Contact.prototype.FlagForFiltering=function(){this.m_flags|=box2d.b2ContactFlag.e_filterFlag};goog.exportProperty(box2d.b2Contact.prototype,"FlagForFiltering",box2d.b2Contact.prototype.FlagForFiltering);box2d.b2Contact.prototype.SetFriction=function(b){this.m_friction=b};goog.exportProperty(box2d.b2Contact.prototype,"SetFriction",box2d.b2Contact.prototype.SetFriction);box2d.b2Contact.prototype.GetFriction=function(){return this.m_friction};goog.exportProperty(box2d.b2Contact.prototype,"GetFriction",box2d.b2Contact.prototype.GetFriction);box2d.b2Contact.prototype.ResetFriction=function(){this.m_friction=box2d.b2MixFriction(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)};goog.exportProperty(box2d.b2Contact.prototype,"ResetFriction",box2d.b2Contact.prototype.ResetFriction);box2d.b2Contact.prototype.SetRestitution=function(b){this.m_restitution=b};goog.exportProperty(box2d.b2Contact.prototype,"SetRestitution",box2d.b2Contact.prototype.SetRestitution);box2d.b2Contact.prototype.GetRestitution=function(){return this.m_restitution};goog.exportProperty(box2d.b2Contact.prototype,"GetRestitution",box2d.b2Contact.prototype.GetRestitution);box2d.b2Contact.prototype.ResetRestitution=function(){this.m_restitution=box2d.b2MixRestitution(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)};goog.exportProperty(box2d.b2Contact.prototype,"ResetRestitution",box2d.b2Contact.prototype.ResetRestitution);box2d.b2Contact.prototype.SetTangentSpeed=function(b){this.m_tangentSpeed=b};goog.exportProperty(box2d.b2Contact.prototype,"SetTangentSpeed",box2d.b2Contact.prototype.SetTangentSpeed);box2d.b2Contact.prototype.GetTangentSpeed=function(){return this.m_tangentSpeed};goog.exportProperty(box2d.b2Contact.prototype,"GetTangentSpeed",box2d.b2Contact.prototype.GetTangentSpeed);box2d.b2Contact.prototype.Reset=function(f,d,j,g){this.m_flags=box2d.b2ContactFlag.e_enabledFlag;this.m_fixtureA=f;this.m_fixtureB=j;this.m_indexA=d;this.m_indexB=g;this.m_manifold.pointCount=0;this.m_next=this.m_prev=null;this.m_nodeA.contact=null;this.m_nodeA.prev=null;this.m_nodeA.next=null;this.m_nodeA.other=null;this.m_nodeB.contact=null;this.m_nodeB.prev=null;this.m_nodeB.next=null;this.m_nodeB.other=null;this.m_toiCount=0;this.m_friction=box2d.b2MixFriction(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction);this.m_restitution=box2d.b2MixRestitution(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)};goog.exportProperty(box2d.b2Contact.prototype,"Reset",box2d.b2Contact.prototype.Reset);box2d.b2Contact.prototype.Update=function(B){var A=this.m_oldManifold;this.m_oldManifold=this.m_manifold;this.m_manifold=A;this.m_flags|=box2d.b2ContactFlag.e_enabledFlag;var z=!1,A=(this.m_flags&box2d.b2ContactFlag.e_touchingFlag)==box2d.b2ContactFlag.e_touchingFlag,v=this.m_fixtureA.IsSensor(),y=this.m_fixtureB.IsSensor(),v=v||y,y=this.m_fixtureA.GetBody(),u=this.m_fixtureB.GetBody(),z=y.GetTransform(),s=u.GetTransform();if(v){y=this.m_fixtureA.GetShape(),u=this.m_fixtureB.GetShape(),z=box2d.b2TestOverlapShape(y,this.m_indexA,u,this.m_indexB,z,s),this.m_manifold.pointCount=0}else{this.Evaluate(this.m_manifold,z,s);z=0<this.m_manifold.pointCount;for(s=0;s<this.m_manifold.pointCount;++s){var r=this.m_manifold.points[s];r.normalImpulse=0;r.tangentImpulse=0;for(var n=r.id,q=0;q<this.m_oldManifold.pointCount;++q){var j=this.m_oldManifold.points[q];if(j.id.key==n.key){r.normalImpulse=j.normalImpulse;r.tangentImpulse=j.tangentImpulse;break}}}z!=A&&(y.SetAwake(!0),u.SetAwake(!0))}this.m_flags=z?this.m_flags|box2d.b2ContactFlag.e_touchingFlag:this.m_flags&~box2d.b2ContactFlag.e_touchingFlag;!1==A&&(!0==z&&B)&&B.BeginContact(this);!0==A&&(!1==z&&B)&&B.EndContact(this);!1==v&&(z&&B)&&B.PreSolve(this,this.m_oldManifold)};goog.exportProperty(box2d.b2Contact.prototype,"Update",box2d.b2Contact.prototype.Update);box2d.b2Contact.prototype.ComputeTOI=function(f,d){var j=box2d.b2Contact.prototype.ComputeTOI.s_input;j.proxyA.SetShape(this.m_fixtureA.GetShape(),this.m_indexA);j.proxyB.SetShape(this.m_fixtureB.GetShape(),this.m_indexB);j.sweepA.Copy(f);j.sweepB.Copy(d);j.tMax=box2d.b2_linearSlop;var g=box2d.b2Contact.prototype.ComputeTOI.s_output;box2d.b2TimeOfImpact(g,j);return g.t};goog.exportProperty(box2d.b2Contact.prototype,"ComputeTOI",box2d.b2Contact.prototype.ComputeTOI);box2d.b2Contact.prototype.ComputeTOI.s_input=new box2d.b2TOIInput;box2d.b2Contact.prototype.ComputeTOI.s_output=new box2d.b2TOIOutput;box2d.b2PolygonAndCircleContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2PolygonAndCircleContact,box2d.b2Contact);goog.exportSymbol("box2d.b2PolygonAndCircleContact",box2d.b2PolygonAndCircleContact);box2d.b2PolygonAndCircleContact.Create=function(b){return new box2d.b2PolygonAndCircleContact};goog.exportProperty(box2d.b2PolygonAndCircleContact,"Create",box2d.b2PolygonAndCircleContact.Create);box2d.b2PolygonAndCircleContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2PolygonAndCircleContact,"Destroy",box2d.b2PolygonAndCircleContact.Destroy);box2d.b2PolygonAndCircleContact.prototype.Reset=function(f,d,j,g){box2d.b2PolygonAndCircleContact.superClass_.Reset.call(this,f,d,j,g);box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.GetType()==box2d.b2ShapeType.e_polygonShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(j.GetType()==box2d.b2ShapeType.e_circleShape)};goog.exportProperty(box2d.b2PolygonAndCircleContact.prototype,"Reset",box2d.b2PolygonAndCircleContact.prototype.Reset);box2d.b2PolygonAndCircleContact.prototype.Evaluate=function(g,f,m){var j=this.m_fixtureA.GetShape(),k=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(j instanceof box2d.b2PolygonShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(k instanceof box2d.b2CircleShape);box2d.b2CollidePolygonAndCircle(g,j instanceof box2d.b2PolygonShape?j:null,f,k instanceof box2d.b2CircleShape?k:null,m)};goog.exportProperty(box2d.b2PolygonAndCircleContact.prototype,"Evaluate",box2d.b2PolygonAndCircleContact.prototype.Evaluate);box2d.b2EdgeAndPolygonContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2EdgeAndPolygonContact,box2d.b2Contact);goog.exportSymbol("box2d.b2EdgeAndPolygonContact",box2d.b2EdgeAndPolygonContact);box2d.b2EdgeAndPolygonContact.Create=function(b){return new box2d.b2EdgeAndPolygonContact};goog.exportProperty(box2d.b2EdgeAndPolygonContact,"Create",box2d.b2EdgeAndPolygonContact.Create);box2d.b2EdgeAndPolygonContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2EdgeAndPolygonContact,"Destroy",box2d.b2EdgeAndPolygonContact.Destroy);box2d.b2EdgeAndPolygonContact.prototype.Reset=function(f,d,j,g){box2d.b2EdgeAndPolygonContact.superClass_.Reset.call(this,f,d,j,g);box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.GetType()==box2d.b2ShapeType.e_edgeShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(j.GetType()==box2d.b2ShapeType.e_polygonShape)};goog.exportProperty(box2d.b2EdgeAndPolygonContact.prototype,"Reset",box2d.b2EdgeAndPolygonContact.prototype.Reset);box2d.b2EdgeAndPolygonContact.prototype.Evaluate=function(g,f,m){var j=this.m_fixtureA.GetShape(),k=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(j instanceof box2d.b2EdgeShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(k instanceof box2d.b2PolygonShape);box2d.b2CollideEdgeAndPolygon(g,j instanceof box2d.b2EdgeShape?j:null,f,k instanceof box2d.b2PolygonShape?k:null,m)};goog.exportProperty(box2d.b2EdgeAndPolygonContact.prototype,"Evaluate",box2d.b2EdgeAndPolygonContact.prototype.Evaluate);box2d.b2MassData=function(){this.center=new box2d.b2Vec2(0,0)};goog.exportSymbol("box2d.b2MassData",box2d.b2MassData);box2d.b2MassData.prototype.mass=0;goog.exportProperty(box2d.b2MassData.prototype,"mass",box2d.b2MassData.prototype.mass);box2d.b2MassData.prototype.center=null;goog.exportProperty(box2d.b2MassData.prototype,"center",box2d.b2MassData.prototype.center);box2d.b2MassData.prototype.I=0;goog.exportProperty(box2d.b2MassData.prototype,"I",box2d.b2MassData.prototype.I);box2d.b2ShapeType={e_unknown:-1,e_circleShape:0,e_edgeShape:1,e_polygonShape:2,e_chainShape:3,e_shapeTypeCount:4};goog.exportSymbol("box2d.b2ShapeType",box2d.b2ShapeType);goog.exportProperty(box2d.b2ShapeType,"e_unknown",box2d.b2ShapeType.e_unknown);goog.exportProperty(box2d.b2ShapeType,"e_circleShape",box2d.b2ShapeType.e_circleShape);goog.exportProperty(box2d.b2ShapeType,"e_edgeShape",box2d.b2ShapeType.e_edgeShape);goog.exportProperty(box2d.b2ShapeType,"e_polygonShape",box2d.b2ShapeType.e_polygonShape);goog.exportProperty(box2d.b2ShapeType,"e_chainShape",box2d.b2ShapeType.e_chainShape);goog.exportProperty(box2d.b2ShapeType,"e_shapeTypeCount",box2d.b2ShapeType.e_shapeTypeCount);box2d.b2Shape=function(e,d){this.m_type=e;this.m_radius=d};goog.exportSymbol("box2d.b2Shape",box2d.b2Shape);box2d.b2Shape.prototype.m_type=box2d.b2ShapeType.e_unknown;goog.exportProperty(box2d.b2Shape.prototype,"m_type",box2d.b2Shape.prototype.m_type);box2d.b2Shape.prototype.m_radius=0;goog.exportProperty(box2d.b2Shape.prototype,"m_radius",box2d.b2Shape.prototype.m_radius);box2d.b2Shape.prototype.Clone=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);return null};goog.exportProperty(box2d.b2Shape.prototype,"Clone",box2d.b2Shape.prototype.Clone);box2d.b2Shape.prototype.Copy=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_type==b.m_type);this.m_radius=b.m_radius;return this};goog.exportProperty(box2d.b2Shape.prototype,"Copy",box2d.b2Shape.prototype.Copy);box2d.b2Shape.prototype.GetType=function(){return this.m_type};goog.exportProperty(box2d.b2Shape.prototype,"GetType",box2d.b2Shape.prototype.GetType);box2d.b2Shape.prototype.GetChildCount=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual");return 0};goog.exportProperty(box2d.b2Shape.prototype,"GetChildCount",box2d.b2Shape.prototype.GetChildCount);box2d.b2Shape.prototype.TestPoint=function(e,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual");return !1};goog.exportProperty(box2d.b2Shape.prototype,"TestPoint",box2d.b2Shape.prototype.TestPoint);box2d.b2Shape.prototype.RayCast=function(f,d,j,g){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual");return !1};goog.exportProperty(box2d.b2Shape.prototype,"RayCast",box2d.b2Shape.prototype.RayCast);box2d.b2Shape.prototype.ComputeAABB=function(e,d,f){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")};goog.exportProperty(box2d.b2Shape.prototype,"ComputeAABB",box2d.b2Shape.prototype.ComputeAABB);box2d.b2Shape.prototype.ComputeMass=function(e,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")};goog.exportProperty(box2d.b2Shape.prototype,"ComputeMass",box2d.b2Shape.prototype.ComputeMass);box2d.b2Shape.prototype.SetupDistanceProxy=function(e,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")};box2d.b2Shape.prototype.ComputeSubmergedArea=function(f,d,j,g){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual");return 0};goog.exportProperty(box2d.b2Shape.prototype,"ComputeSubmergedArea",box2d.b2Shape.prototype.ComputeSubmergedArea);box2d.b2Shape.prototype.Dump=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")};goog.exportProperty(box2d.b2Shape.prototype,"Dump",box2d.b2Shape.prototype.Dump);box2d.b2PolygonShape=function(){box2d.b2Shape.call(this,box2d.b2ShapeType.e_polygonShape,box2d.b2_polygonRadius);this.m_centroid=new box2d.b2Vec2(0,0);this.m_vertices=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices);this.m_normals=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices)};goog.inherits(box2d.b2PolygonShape,box2d.b2Shape);goog.exportSymbol("box2d.b2PolygonShape",box2d.b2PolygonShape);box2d.b2PolygonShape.prototype.m_centroid=null;goog.exportProperty(box2d.b2PolygonShape.prototype,"m_centroid",box2d.b2PolygonShape.prototype.m_centroid);box2d.b2PolygonShape.prototype.m_vertices=null;goog.exportProperty(box2d.b2PolygonShape.prototype,"m_vertices",box2d.b2PolygonShape.prototype.m_vertices);box2d.b2PolygonShape.prototype.m_normals=null;goog.exportProperty(box2d.b2PolygonShape.prototype,"m_normals",box2d.b2PolygonShape.prototype.m_normals);box2d.b2PolygonShape.prototype.m_count=0;goog.exportProperty(box2d.b2PolygonShape.prototype,"m_count",box2d.b2PolygonShape.prototype.m_count);box2d.b2PolygonShape.prototype.Clone=function(){return(new box2d.b2PolygonShape).Copy(this)};goog.exportProperty(box2d.b2PolygonShape.prototype,"Clone",box2d.b2PolygonShape.prototype.Clone);box2d.b2PolygonShape.prototype.Copy=function(e){box2d.b2PolygonShape.superClass_.Copy.call(this,e);box2d.ENABLE_ASSERTS&&box2d.b2Assert(e instanceof box2d.b2PolygonShape);this.m_centroid.Copy(e.m_centroid);this.m_count=e.m_count;for(var d=0,f=this.m_count;d<f;++d){this.m_vertices[d].Copy(e.m_vertices[d]),this.m_normals[d].Copy(e.m_normals[d])}return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"Copy",box2d.b2PolygonShape.prototype.Copy);box2d.b2PolygonShape.prototype.SetAsBox=function(e,d){this.m_count=4;this.m_vertices[0].SetXY(-e,-d);this.m_vertices[1].SetXY(e,-d);this.m_vertices[2].SetXY(e,d);this.m_vertices[3].SetXY(-e,d);this.m_normals[0].SetXY(0,-1);this.m_normals[1].SetXY(1,0);this.m_normals[2].SetXY(0,1);this.m_normals[3].SetXY(-1,0);this.m_centroid.SetZero();return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"SetAsBox",box2d.b2PolygonShape.prototype.SetAsBox);box2d.b2PolygonShape.prototype.SetAsOrientedBox=function(f,d,j,g){this.m_count=4;this.m_vertices[0].SetXY(-f,-d);this.m_vertices[1].SetXY(f,-d);this.m_vertices[2].SetXY(f,d);this.m_vertices[3].SetXY(-f,d);this.m_normals[0].SetXY(0,-1);this.m_normals[1].SetXY(1,0);this.m_normals[2].SetXY(0,1);this.m_normals[3].SetXY(-1,0);this.m_centroid.Copy(j);f=new box2d.b2Transform;f.SetPosition(j);f.SetRotationAngleRadians(g);j=0;for(g=this.m_count;j<g;++j){box2d.b2MulXV(f,this.m_vertices[j],this.m_vertices[j]),box2d.b2MulRV(f.q,this.m_normals[j],this.m_normals[j])}return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"SetAsOrientedBox",box2d.b2PolygonShape.prototype.SetAsOrientedBox);box2d.b2PolygonShape.prototype.Set=function(E,D){void 0===D&&(D=E.length);box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=D&&D<=box2d.b2_maxPolygonVertices);if(3>D){return this.SetAsBox(1,1)}for(var C=box2d.b2Min(D,box2d.b2_maxPolygonVertices),A=box2d.b2PolygonShape.prototype.Set.s_ps,B=0;B<C;++B){A[B].Copy(E[B])}for(var z=0,y=A[0].x,B=1;B<D;++B){var v=A[B].x;if(v>y||v==y&&A[B].y<A[z].y){z=B,y=v}}v=box2d.b2PolygonShape.prototype.Set.s_hull;y=0;for(B=z;;){v[y]=B;for(var s=0,u=1;u<C;++u){if(s==B){s=u}else{var r=box2d.b2SubVV(A[s],A[v[y]],box2d.b2PolygonShape.prototype.Set.s_r),q=box2d.b2SubVV(A[u],A[v[y]],box2d.b2PolygonShape.prototype.Set.s_v),j=box2d.b2CrossVV(r,q);0>j&&(s=u);0==j&&q.GetLengthSquared()>r.GetLengthSquared()&&(s=u)}}++y;B=s;if(s==z){break}}this.m_count=y;for(B=0;B<y;++B){this.m_vertices[B].Copy(A[v[B]])}B=0;for(C=y;B<C;++B){A=box2d.b2SubVV(this.m_vertices[(B+1)%C],this.m_vertices[B],box2d.b2Vec2.s_t0),box2d.ENABLE_ASSERTS&&box2d.b2Assert(A.GetLengthSquared()>box2d.b2_epsilon_sq),box2d.b2CrossVOne(A,this.m_normals[B]).SelfNormalize()}box2d.b2PolygonShape.ComputeCentroid(this.m_vertices,y,this.m_centroid);return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"Set",box2d.b2PolygonShape.prototype.Set);box2d.b2PolygonShape.prototype.Set.s_ps=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices);box2d.b2PolygonShape.prototype.Set.s_hull=box2d.b2MakeNumberArray(box2d.b2_maxPolygonVertices);box2d.b2PolygonShape.prototype.Set.s_r=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.Set.s_v=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.SetAsVector=function(e,d){this.Set(e,d);return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"SetAsVector",box2d.b2PolygonShape.prototype.SetAsVector);box2d.b2PolygonShape.prototype.SetAsArray=function(e,d){this.Set(e,d);return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"SetAsArray",box2d.b2PolygonShape.prototype.SetAsArray);box2d.b2PolygonShape.prototype.GetChildCount=function(){return 1};goog.exportProperty(box2d.b2PolygonShape.prototype,"GetChildCount",box2d.b2PolygonShape.prototype.GetChildCount);box2d.b2PolygonShape.prototype.TestPoint=function(g,f){for(var m=box2d.b2MulTXV(g,f,box2d.b2PolygonShape.prototype.TestPoint.s_pLocal),j=0,k=this.m_count;j<k;++j){if(0<box2d.b2DotVV(this.m_normals[j],box2d.b2SubVV(m,this.m_vertices[j],box2d.b2Vec2.s_t0))){return !1}}return !0};goog.exportProperty(box2d.b2PolygonShape.prototype,"TestPoint",box2d.b2PolygonShape.prototype.TestPoint);box2d.b2PolygonShape.prototype.TestPoint.s_pLocal=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.RayCast=function(D,C,B,z){z=box2d.b2MulTXV(B,C.p1,box2d.b2PolygonShape.prototype.RayCast.s_p1);for(var A=box2d.b2MulTXV(B,C.p2,box2d.b2PolygonShape.prototype.RayCast.s_p2),A=box2d.b2SubVV(A,z,box2d.b2PolygonShape.prototype.RayCast.s_d),y=0,v=C.maxFraction,u=-1,r=0,s=this.m_count;r<s;++r){var q=box2d.b2DotVV(this.m_normals[r],box2d.b2SubVV(this.m_vertices[r],z,box2d.b2Vec2.s_t0)),j=box2d.b2DotVV(this.m_normals[r],A);if(0==j){if(0>q){return !1}}else{0>j&&q<y*j?(y=q/j,u=r):0<j&&q<v*j&&(v=q/j)}if(v<y){return !1}}box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=y&&y<=C.maxFraction);return 0<=u?(D.fraction=y,box2d.b2MulRV(B.q,this.m_normals[u],D.normal),!0):!1};goog.exportProperty(box2d.b2PolygonShape.prototype,"RayCast",box2d.b2PolygonShape.prototype.RayCast);box2d.b2PolygonShape.prototype.RayCast.s_p1=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.RayCast.s_p2=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.RayCast.s_d=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeAABB=function(j,g,q){q=box2d.b2MulXV(g,this.m_vertices[0],j.lowerBound);j=j.upperBound.Copy(q);for(var m=0,n=this.m_count;m<n;++m){var k=box2d.b2MulXV(g,this.m_vertices[m],box2d.b2PolygonShape.prototype.ComputeAABB.s_v);box2d.b2MinV(k,q,q);box2d.b2MaxV(k,j,j)}g=this.m_radius;q.SelfSubXY(g,g);j.SelfAddXY(g,g)};goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeAABB",box2d.b2PolygonShape.prototype.ComputeAABB);box2d.b2PolygonShape.prototype.ComputeAABB.s_v=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeMass=function(G,F){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=this.m_count);for(var E=box2d.b2PolygonShape.prototype.ComputeMass.s_center.SetZero(),C=0,D=0,B=box2d.b2PolygonShape.prototype.ComputeMass.s_s.SetZero(),A=0,z=this.m_count;A<z;++A){B.SelfAdd(this.m_vertices[A])}B.SelfMul(1/this.m_count);for(var v=1/3,A=0,z=this.m_count;A<z;++A){var y=box2d.b2SubVV(this.m_vertices[A],B,box2d.b2PolygonShape.prototype.ComputeMass.s_e1),u=box2d.b2SubVV(this.m_vertices[(A+1)%z],B,box2d.b2PolygonShape.prototype.ComputeMass.s_e2),s=box2d.b2CrossVV(y,u),r=0.5*s,C=C+r;E.SelfAdd(box2d.b2MulSV(r*v,box2d.b2AddVV(y,u,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1));var r=y.x,y=y.y,j=u.x,u=u.y,D=D+0.25*v*s*(r*r+j*r+j*j+(y*y+u*y+u*u))}G.mass=F*C;box2d.ENABLE_ASSERTS&&box2d.b2Assert(C>box2d.b2_epsilon);E.SelfMul(1/C);box2d.b2AddVV(E,B,G.center);G.I=F*D;G.I+=G.mass*(box2d.b2DotVV(G.center,G.center)-box2d.b2DotVV(E,E))};goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeMass",box2d.b2PolygonShape.prototype.ComputeMass);box2d.b2PolygonShape.prototype.ComputeMass.s_center=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeMass.s_s=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeMass.s_e1=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeMass.s_e2=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.Validate=function(){for(var k=0;k<this.m_count;++k){for(var j=k,s=(k+1)%this.m_count,q=this.m_vertices[j],r=box2d.b2SubVV(this.m_vertices[s],q,box2d.b2PolygonShape.prototype.Validate.s_e),n=0;n<this.m_count;++n){if(n!=j&&n!=s){var m=box2d.b2SubVV(this.m_vertices[n],q,box2d.b2PolygonShape.prototype.Validate.s_v);if(0>box2d.b2CrossVV(r,m)){return !1}}}}return !0};goog.exportProperty(box2d.b2PolygonShape.prototype,"Validate",box2d.b2PolygonShape.prototype.Validate);box2d.b2PolygonShape.prototype.Validate.s_e=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.Validate.s_v=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.SetupDistanceProxy=function(e,d){e.m_vertices=this.m_vertices;e.m_count=this.m_count;e.m_radius=this.m_radius};box2d.b2PolygonShape.prototype.ComputeSubmergedArea=function(D,C,B,z){var A=box2d.b2MulTRV(B.q,D,box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_normalL),y=C-box2d.b2DotVV(D,B.p),v=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_depths,u=0,r=-1;C=-1;var s=!1;D=0;for(var q=this.m_count;D<q;++D){v[D]=box2d.b2DotVV(A,this.m_vertices[D])-y;var j=v[D]<-box2d.b2_epsilon;0<D&&(j?s||(r=D-1,u++):s&&(C=D-1,u++));s=j}switch(u){case 0:return s?(D=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_md,this.ComputeMass(D,1),box2d.b2MulXV(B,D.center,z),D.mass):0;case 1:-1==r?r=this.m_count-1:C=this.m_count-1}D=(r+1)%this.m_count;A=(C+1)%this.m_count;y=(0-v[r])/(v[D]-v[r]);v=(0-v[C])/(v[A]-v[C]);r=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_intoVec.SetXY(this.m_vertices[r].x*(1-y)+this.m_vertices[D].x*y,this.m_vertices[r].y*(1-y)+this.m_vertices[D].y*y);C=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_outoVec.SetXY(this.m_vertices[C].x*(1-v)+this.m_vertices[A].x*v,this.m_vertices[C].y*(1-v)+this.m_vertices[A].y*v);v=0;y=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_center.SetZero();u=this.m_vertices[D];for(s=null;D!=A;){D=(D+1)%this.m_count,s=D==A?C:this.m_vertices[D],q=0.5*((u.x-r.x)*(s.y-r.y)-(u.y-r.y)*(s.x-r.x)),v+=q,y.x+=q*(r.x+u.x+s.x)/3,y.y+=q*(r.y+u.y+s.y)/3,u=s}y.SelfMul(1/v);box2d.b2MulXV(B,y,z);return v};goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeSubmergedArea",box2d.b2PolygonShape.prototype.ComputeSubmergedArea);box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_normalL=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_depths=box2d.b2MakeNumberArray(box2d.b2_maxPolygonVertices);box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_md=new box2d.b2MassData;box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_intoVec=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_outoVec=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_center=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2PolygonShape*/ var shape = new box2d.b2PolygonShape();\n");box2d.b2Log("    /*box2d.b2Vec2[]*/ var vs = box2d.b2Vec2.MakeArray(%d);\n",box2d.b2_maxPolygonVertices);for(var b=0;b<this.m_count;++b){box2d.b2Log("    vs[%d].SetXY(%.15f, %.15f);\n",b,this.m_vertices[b].x,this.m_vertices[b].y)}box2d.b2Log("    shape.Set(vs, %d);\n",this.m_count)};goog.exportProperty(box2d.b2PolygonShape.prototype,"Dump",box2d.b2PolygonShape.prototype.Dump);box2d.b2PolygonShape.ComputeCentroid=function(D,C,B){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=C);B.SetZero();for(var z=0,A=box2d.b2PolygonShape.ComputeCentroid.s_pRef.SetZero(),y=1/3,v=0;v<C;++v){var u=A,r=D[v],s=D[(v+1)%C],q=box2d.b2SubVV(r,u,box2d.b2PolygonShape.ComputeCentroid.s_e1),j=box2d.b2SubVV(s,u,box2d.b2PolygonShape.ComputeCentroid.s_e2),q=0.5*box2d.b2CrossVV(q,j),z=z+q;B.x+=q*y*(u.x+r.x+s.x);B.y+=q*y*(u.y+r.y+s.y)}box2d.ENABLE_ASSERTS&&box2d.b2Assert(z>box2d.b2_epsilon);B.SelfMul(1/z);return B};goog.exportProperty(box2d.b2PolygonShape,"ComputeCentroid",box2d.b2PolygonShape.ComputeCentroid);box2d.b2PolygonShape.ComputeCentroid.s_pRef=new box2d.b2Vec2;box2d.b2PolygonShape.ComputeCentroid.s_e1=new box2d.b2Vec2;box2d.b2PolygonShape.ComputeCentroid.s_e2=new box2d.b2Vec2;box2d.b2CollideEdge={};box2d.b2CollideEdgeAndCircle=function(D,C,B,z,A){D.pointCount=0;B=box2d.b2MulTXV(B,box2d.b2MulXV(A,z.m_p,box2d.b2Vec2.s_t0),box2d.b2CollideEdgeAndCircle.s_Q);var y=C.m_vertex1,v=C.m_vertex2,u=box2d.b2SubVV(v,y,box2d.b2CollideEdgeAndCircle.s_e),r=box2d.b2DotVV(u,box2d.b2SubVV(v,B,box2d.b2Vec2.s_t0)),s=box2d.b2DotVV(u,box2d.b2SubVV(B,y,box2d.b2Vec2.s_t0)),q=C.m_radius+z.m_radius;A=box2d.b2CollideEdgeAndCircle.s_id;A.cf.indexB=0;A.cf.typeB=box2d.b2ContactFeatureType.e_vertex;if(0>=s){var j=y,r=box2d.b2SubVV(B,j,box2d.b2CollideEdgeAndCircle.s_d),r=box2d.b2DotVV(r,r);if(!(r>q*q)){if(C.m_hasVertex0&&(C=box2d.b2SubVV(y,C.m_vertex0,box2d.b2CollideEdgeAndCircle.s_e1),0<box2d.b2DotVV(C,box2d.b2SubVV(y,B,box2d.b2Vec2.s_t0)))){return}A.cf.indexA=0;A.cf.typeA=box2d.b2ContactFeatureType.e_vertex;D.pointCount=1;D.type=box2d.b2ManifoldType.e_circles;D.localNormal.SetZero();D.localPoint.Copy(j);D.points[0].id.Copy(A);D.points[0].localPoint.Copy(z.m_p)}}else{if(0>=r){if(j=v,r=box2d.b2SubVV(B,j,box2d.b2CollideEdgeAndCircle.s_d),r=box2d.b2DotVV(r,r),!(r>q*q)){if(C.m_hasVertex3&&(y=box2d.b2SubVV(C.m_vertex3,v,box2d.b2CollideEdgeAndCircle.s_e2),0<box2d.b2DotVV(y,box2d.b2SubVV(B,v,box2d.b2Vec2.s_t0)))){return}A.cf.indexA=1;A.cf.typeA=box2d.b2ContactFeatureType.e_vertex;D.pointCount=1;D.type=box2d.b2ManifoldType.e_circles;D.localNormal.SetZero();D.localPoint.Copy(j);D.points[0].id.Copy(A);D.points[0].localPoint.Copy(z.m_p)}}else{C=box2d.b2DotVV(u,u),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<C),j=box2d.b2CollideEdgeAndCircle.s_P,j.x=1/C*(r*y.x+s*v.x),j.y=1/C*(r*y.y+s*v.y),r=box2d.b2SubVV(B,j,box2d.b2CollideEdgeAndCircle.s_d),r=box2d.b2DotVV(r,r),r>q*q||(j=box2d.b2CollideEdgeAndCircle.s_n.SetXY(-u.y,u.x),0>box2d.b2DotVV(j,box2d.b2SubVV(B,y,box2d.b2Vec2.s_t0))&&j.SetXY(-j.x,-j.y),j.Normalize(),A.cf.indexA=0,A.cf.typeA=box2d.b2ContactFeatureType.e_face,D.pointCount=1,D.type=box2d.b2ManifoldType.e_faceA,D.localNormal.Copy(j),D.localPoint.Copy(y),D.points[0].id.Copy(A),D.points[0].localPoint.Copy(z.m_p))}}};goog.exportSymbol("box2d.b2CollideEdgeAndCircle",box2d.b2CollideEdgeAndCircle);box2d.b2CollideEdgeAndCircle.s_Q=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_e=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_d=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_e1=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_e2=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_P=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_n=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_id=new box2d.b2ContactID;box2d.b2EPAxisType={e_unknown:0,e_edgeA:1,e_edgeB:2};goog.exportSymbol("box2d.b2EPAxisType",box2d.b2EPAxisType);goog.exportProperty(box2d.b2EPAxisType,"e_unknown",box2d.b2EPAxisType.e_unknown);goog.exportProperty(box2d.b2EPAxisType,"e_edgeA",box2d.b2EPAxisType.e_edgeA);goog.exportProperty(box2d.b2EPAxisType,"e_edgeB",box2d.b2EPAxisType.e_edgeB);box2d.b2EPAxis=function(){};goog.exportSymbol("box2d.b2EPAxis",box2d.b2EPAxis);box2d.b2EPAxis.prototype.type=box2d.b2EPAxisType.e_unknown;goog.exportProperty(box2d.b2EPAxis.prototype,"type",box2d.b2EPAxis.prototype.type);box2d.b2EPAxis.prototype.index=0;goog.exportProperty(box2d.b2EPAxis.prototype,"index",box2d.b2EPAxis.prototype.index);box2d.b2EPAxis.prototype.separation=0;goog.exportProperty(box2d.b2EPAxis.prototype,"separation",box2d.b2EPAxis.prototype.separation);box2d.b2TempPolygon=function(){this.vertices=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices);this.normals=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices);this.count=0};goog.exportSymbol("box2d.b2TempPolygon",box2d.b2TempPolygon);box2d.b2TempPolygon.prototype.vertices=null;goog.exportProperty(box2d.b2TempPolygon.prototype,"vertices",box2d.b2TempPolygon.prototype.vertices);box2d.b2TempPolygon.prototype.normals=null;goog.exportProperty(box2d.b2TempPolygon.prototype,"normals",box2d.b2TempPolygon.prototype.normals);box2d.b2TempPolygon.prototype.count=0;goog.exportProperty(box2d.b2TempPolygon.prototype,"count",box2d.b2TempPolygon.prototype.count);box2d.b2ReferenceFace=function(){this.i2=this.i1=0;this.v1=new box2d.b2Vec2;this.v2=new box2d.b2Vec2;this.normal=new box2d.b2Vec2;this.sideNormal1=new box2d.b2Vec2;this.sideOffset1=0;this.sideNormal2=new box2d.b2Vec2;this.sideOffset2=0};goog.exportSymbol("box2d.b2ReferenceFace",box2d.b2ReferenceFace);box2d.b2ReferenceFace.prototype.i1=0;goog.exportProperty(box2d.b2ReferenceFace.prototype,"i1",box2d.b2ReferenceFace.prototype.i1);box2d.b2ReferenceFace.prototype.i2=0;goog.exportProperty(box2d.b2ReferenceFace.prototype,"i2",box2d.b2ReferenceFace.prototype.i2);box2d.b2ReferenceFace.prototype.v1=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"v1",box2d.b2ReferenceFace.prototype.v1);box2d.b2ReferenceFace.prototype.v2=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"v2",box2d.b2ReferenceFace.prototype.v2);box2d.b2ReferenceFace.prototype.normal=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"normal",box2d.b2ReferenceFace.prototype.normal);box2d.b2ReferenceFace.prototype.sideNormal1=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideNormal1",box2d.b2ReferenceFace.prototype.sideNormal1);box2d.b2ReferenceFace.prototype.sideOffset1=0;goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideOffset1",box2d.b2ReferenceFace.prototype.sideOffset1);box2d.b2ReferenceFace.prototype.sideNormal2=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideNormal2",box2d.b2ReferenceFace.prototype.sideNormal2);box2d.b2ReferenceFace.prototype.sideOffset2=0;goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideOffset2",box2d.b2ReferenceFace.prototype.sideOffset2);box2d.b2EPColliderVertexType={e_isolated:0,e_concave:1,e_convex:2};goog.exportSymbol("box2d.b2EPColliderVertexType",box2d.b2EPColliderVertexType);goog.exportProperty(box2d.b2EPColliderVertexType,"e_isolated",box2d.b2EPColliderVertexType.e_isolated);goog.exportProperty(box2d.b2EPColliderVertexType,"e_concave",box2d.b2EPColliderVertexType.e_concave);goog.exportProperty(box2d.b2EPColliderVertexType,"e_convex",box2d.b2EPColliderVertexType.e_convex);box2d.b2EPCollider=function(){this.m_polygonB=new box2d.b2TempPolygon;this.m_xf=new box2d.b2Transform;this.m_centroidB=new box2d.b2Vec2;this.m_v0=new box2d.b2Vec2;this.m_v1=new box2d.b2Vec2;this.m_v2=new box2d.b2Vec2;this.m_v3=new box2d.b2Vec2;this.m_normal0=new box2d.b2Vec2;this.m_normal1=new box2d.b2Vec2;this.m_normal2=new box2d.b2Vec2;this.m_normal=new box2d.b2Vec2;this.m_type2=this.m_type1=box2d.b2EPColliderVertexType.e_isolated;this.m_lowerLimit=new box2d.b2Vec2;this.m_upperLimit=new box2d.b2Vec2;this.m_radius=0;this.m_front=!1};goog.exportSymbol("box2d.b2EPCollider",box2d.b2EPCollider);box2d.b2EPCollider.prototype.m_polygonB=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_polygonB",box2d.b2EPCollider.prototype.m_polygonB);box2d.b2EPCollider.prototype.m_xf=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_xf",box2d.b2EPCollider.prototype.m_xf);box2d.b2EPCollider.prototype.m_centroidB=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_centroidB",box2d.b2EPCollider.prototype.m_centroidB);box2d.b2EPCollider.prototype.m_v0=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_v0",box2d.b2EPCollider.prototype.m_v0);box2d.b2EPCollider.prototype.m_v1=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_v1",box2d.b2EPCollider.prototype.m_v1);box2d.b2EPCollider.prototype.m_v2=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_v2",box2d.b2EPCollider.prototype.m_v2);box2d.b2EPCollider.prototype.m_v3=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_v3",box2d.b2EPCollider.prototype.m_v3);box2d.b2EPCollider.prototype.m_normal0=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal0",box2d.b2EPCollider.prototype.m_normal0);box2d.b2EPCollider.prototype.m_normal1=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal1",box2d.b2EPCollider.prototype.m_normal1);box2d.b2EPCollider.prototype.m_normal2=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal2",box2d.b2EPCollider.prototype.m_normal2);box2d.b2EPCollider.prototype.m_normal=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal",box2d.b2EPCollider.prototype.m_normal);box2d.b2EPCollider.prototype.m_type1=box2d.b2EPColliderVertexType.e_isolated;goog.exportProperty(box2d.b2EPCollider.prototype,"m_type1",box2d.b2EPCollider.prototype.m_type1);box2d.b2EPCollider.prototype.m_type2=box2d.b2EPColliderVertexType.e_isolated;goog.exportProperty(box2d.b2EPCollider.prototype,"m_type2",box2d.b2EPCollider.prototype.m_type2);box2d.b2EPCollider.prototype.m_lowerLimit=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_lowerLimit",box2d.b2EPCollider.prototype.m_lowerLimit);box2d.b2EPCollider.prototype.m_upperLimit=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_upperLimit",box2d.b2EPCollider.prototype.m_upperLimit);box2d.b2EPCollider.prototype.m_radius=0;goog.exportProperty(box2d.b2EPCollider.prototype,"m_radius",box2d.b2EPCollider.prototype.m_radius);box2d.b2EPCollider.prototype.m_front=!1;goog.exportProperty(box2d.b2EPCollider.prototype,"m_front",box2d.b2EPCollider.prototype.m_front);box2d.b2EPCollider.prototype.Collide=function(z,y,v,s,u){box2d.b2MulTXX(v,u,this.m_xf);box2d.b2MulXV(this.m_xf,s.m_centroid,this.m_centroidB);this.m_v0.Copy(y.m_vertex0);this.m_v1.Copy(y.m_vertex1);this.m_v2.Copy(y.m_vertex2);this.m_v3.Copy(y.m_vertex3);v=y.m_hasVertex0;y=y.m_hasVertex3;u=box2d.b2SubVV(this.m_v2,this.m_v1,box2d.b2EPCollider.s_edge1);u.Normalize();this.m_normal1.SetXY(u.y,-u.x);var r=box2d.b2DotVV(this.m_normal1,box2d.b2SubVV(this.m_centroidB,this.m_v1,box2d.b2Vec2.s_t0)),q=0,n=0,j=!1,m=!1;v&&(q=box2d.b2SubVV(this.m_v1,this.m_v0,box2d.b2EPCollider.s_edge0),q.Normalize(),this.m_normal0.SetXY(q.y,-q.x),j=0<=box2d.b2CrossVV(q,u),q=box2d.b2DotVV(this.m_normal0,box2d.b2SubVV(this.m_centroidB,this.m_v0,box2d.b2Vec2.s_t0)));y&&(n=box2d.b2SubVV(this.m_v3,this.m_v2,box2d.b2EPCollider.s_edge2),n.Normalize(),this.m_normal2.SetXY(n.y,-n.x),m=0<box2d.b2CrossVV(u,n),n=box2d.b2DotVV(this.m_normal2,box2d.b2SubVV(this.m_centroidB,this.m_v2,box2d.b2Vec2.s_t0)));v&&y?j&&m?(this.m_front=0<=q||0<=r||0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):j?(this.m_front=0<=q||0<=r&&0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):m?(this.m_front=0<=n||0<=q&&0<=r)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg()):(this.m_front=0<=q&&0<=r&&0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg()):v?j?((this.m_front=0<=q||0<=r)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1)),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_front=0<=q&&0<=r)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal0).SelfNeg()):y?m?(this.m_front=0<=r||0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1)):((this.m_front=0<=r&&0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg()),this.m_upperLimit.Copy(this.m_normal1)):(this.m_front=0<=r)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1));this.m_polygonB.count=s.m_count;r=0;for(q=s.m_count;r<q;++r){box2d.b2MulXV(this.m_xf,s.m_vertices[r],this.m_polygonB.vertices[r]),box2d.b2MulRV(this.m_xf.q,s.m_normals[r],this.m_polygonB.normals[r])}this.m_radius=2*box2d.b2_polygonRadius;z.pointCount=0;v=this.ComputeEdgeSeparation(box2d.b2EPCollider.s_edgeAxis);if(!(v.type==box2d.b2EPAxisType.e_unknown||v.separation>this.m_radius||(y=this.ComputePolygonSeparation(box2d.b2EPCollider.s_polygonAxis),y.type!=box2d.b2EPAxisType.e_unknown&&y.separation>this.m_radius))){v=y.type==box2d.b2EPAxisType.e_unknown?v:y.separation>0.98*v.separation+0.001?y:v;u=box2d.b2EPCollider.s_ie;y=box2d.b2EPCollider.s_rf;if(v.type==box2d.b2EPAxisType.e_edgeA){z.type=box2d.b2ManifoldType.e_faceA;n=0;j=box2d.b2DotVV(this.m_normal,this.m_polygonB.normals[0]);r=1;for(q=this.m_polygonB.count;r<q;++r){m=box2d.b2DotVV(this.m_normal,this.m_polygonB.normals[r]),m<j&&(j=m,n=r)}q=n;r=(q+1)%this.m_polygonB.count;n=u[0];n.v.Copy(this.m_polygonB.vertices[q]);n.id.cf.indexA=0;n.id.cf.indexB=q;n.id.cf.typeA=box2d.b2ContactFeatureType.e_face;n.id.cf.typeB=box2d.b2ContactFeatureType.e_vertex;q=u[1];q.v.Copy(this.m_polygonB.vertices[r]);q.id.cf.indexA=0;q.id.cf.indexB=r;q.id.cf.typeA=box2d.b2ContactFeatureType.e_face;q.id.cf.typeB=box2d.b2ContactFeatureType.e_vertex;this.m_front?(y.i1=0,y.i2=1,y.v1.Copy(this.m_v1),y.v2.Copy(this.m_v2),y.normal.Copy(this.m_normal1)):(y.i1=1,y.i2=0,y.v1.Copy(this.m_v2),y.v2.Copy(this.m_v1),y.normal.Copy(this.m_normal1).SelfNeg())}else{z.type=box2d.b2ManifoldType.e_faceB,n=u[0],n.v.Copy(this.m_v1),n.id.cf.indexA=0,n.id.cf.indexB=v.index,n.id.cf.typeA=box2d.b2ContactFeatureType.e_vertex,n.id.cf.typeB=box2d.b2ContactFeatureType.e_face,q=u[1],q.v.Copy(this.m_v2),q.id.cf.indexA=0,q.id.cf.indexB=v.index,q.id.cf.typeA=box2d.b2ContactFeatureType.e_vertex,q.id.cf.typeB=box2d.b2ContactFeatureType.e_face,y.i1=v.index,y.i2=(y.i1+1)%this.m_polygonB.count,y.v1.Copy(this.m_polygonB.vertices[y.i1]),y.v2.Copy(this.m_polygonB.vertices[y.i2]),y.normal.Copy(this.m_polygonB.normals[y.i1])}y.sideNormal1.SetXY(y.normal.y,-y.normal.x);y.sideNormal2.Copy(y.sideNormal1).SelfNeg();y.sideOffset1=box2d.b2DotVV(y.sideNormal1,y.v1);y.sideOffset2=box2d.b2DotVV(y.sideNormal2,y.v2);r=box2d.b2EPCollider.s_clipPoints1;n=box2d.b2EPCollider.s_clipPoints2;q=0;q=box2d.b2ClipSegmentToLine(r,u,y.sideNormal1,y.sideOffset1,y.i1);if(!(q<box2d.b2_maxManifoldPoints||(q=box2d.b2ClipSegmentToLine(n,r,y.sideNormal2,y.sideOffset2,y.i2),q<box2d.b2_maxManifoldPoints))){v.type==box2d.b2EPAxisType.e_edgeA?(z.localNormal.Copy(y.normal),z.localPoint.Copy(y.v1)):(z.localNormal.Copy(s.m_normals[y.i1]),z.localPoint.Copy(s.m_vertices[y.i1]));r=s=0;for(q=box2d.b2_maxManifoldPoints;r<q;++r){box2d.b2DotVV(y.normal,box2d.b2SubVV(n[r].v,y.v1,box2d.b2Vec2.s_t0))<=this.m_radius&&(u=z.points[s],v.type==box2d.b2EPAxisType.e_edgeA?(box2d.b2MulTXV(this.m_xf,n[r].v,u.localPoint),u.id=n[r].id):(u.localPoint.Copy(n[r].v),u.id.cf.typeA=n[r].id.cf.typeB,u.id.cf.typeB=n[r].id.cf.typeA,u.id.cf.indexA=n[r].id.cf.indexB,u.id.cf.indexB=n[r].id.cf.indexA),++s)}z.pointCount=s}}};goog.exportProperty(box2d.b2EPCollider.prototype,"Collide",box2d.b2EPCollider.prototype.Collide);box2d.b2EPCollider.s_edge1=new box2d.b2Vec2;box2d.b2EPCollider.s_edge0=new box2d.b2Vec2;box2d.b2EPCollider.s_edge2=new box2d.b2Vec2;box2d.b2EPCollider.s_ie=box2d.b2ClipVertex.MakeArray(2);box2d.b2EPCollider.s_rf=new box2d.b2ReferenceFace;box2d.b2EPCollider.s_clipPoints1=box2d.b2ClipVertex.MakeArray(2);box2d.b2EPCollider.s_clipPoints2=box2d.b2ClipVertex.MakeArray(2);box2d.b2EPCollider.s_edgeAxis=new box2d.b2EPAxis;box2d.b2EPCollider.s_polygonAxis=new box2d.b2EPAxis;box2d.b2EPCollider.prototype.ComputeEdgeSeparation=function(f){f.type=box2d.b2EPAxisType.e_edgeA;f.index=this.m_front?0:1;f.separation=box2d.b2_maxFloat;for(var d=0,j=this.m_polygonB.count;d<j;++d){var g=box2d.b2DotVV(this.m_normal,box2d.b2SubVV(this.m_polygonB.vertices[d],this.m_v1,box2d.b2Vec2.s_t0));g<f.separation&&(f.separation=g)}return f};goog.exportProperty(box2d.b2EPCollider.prototype,"ComputeEdgeSeparation",box2d.b2EPCollider.prototype.ComputeEdgeSeparation);box2d.b2EPCollider.prototype.ComputePolygonSeparation=function(k){k.type=box2d.b2EPAxisType.e_unknown;k.index=-1;k.separation=-box2d.b2_maxFloat;for(var j=box2d.b2EPCollider.s_perp.SetXY(-this.m_normal.y,this.m_normal.x),s=0,q=this.m_polygonB.count;s<q;++s){var r=box2d.b2NegV(this.m_polygonB.normals[s],box2d.b2EPCollider.s_n),n=box2d.b2DotVV(r,box2d.b2SubVV(this.m_polygonB.vertices[s],this.m_v1,box2d.b2Vec2.s_t0)),m=box2d.b2DotVV(r,box2d.b2SubVV(this.m_polygonB.vertices[s],this.m_v2,box2d.b2Vec2.s_t0)),n=box2d.b2Min(n,m);if(n>this.m_radius){k.type=box2d.b2EPAxisType.e_edgeB;k.index=s;k.separation=n;break}if(0<=box2d.b2DotVV(r,j)){if(box2d.b2DotVV(box2d.b2SubVV(r,this.m_upperLimit,box2d.b2Vec2.s_t0),this.m_normal)<-box2d.b2_angularSlop){continue}}else{if(box2d.b2DotVV(box2d.b2SubVV(r,this.m_lowerLimit,box2d.b2Vec2.s_t0),this.m_normal)<-box2d.b2_angularSlop){continue}}n>k.separation&&(k.type=box2d.b2EPAxisType.e_edgeB,k.index=s,k.separation=n)}return k};goog.exportProperty(box2d.b2EPCollider.prototype,"ComputePolygonSeparation",box2d.b2EPCollider.prototype.ComputePolygonSeparation);box2d.b2EPCollider.s_n=new box2d.b2Vec2;box2d.b2EPCollider.s_perp=new box2d.b2Vec2;box2d.b2CollideEdgeAndPolygon=function(g,f,m,j,k){box2d.b2CollideEdgeAndPolygon.s_collider.Collide(g,f,m,j,k)};goog.exportSymbol("box2d.b2CollideEdgeAndPolygon",box2d.b2CollideEdgeAndPolygon);box2d.b2CollideEdgeAndPolygon.s_collider=new box2d.b2EPCollider;box2d.b2EdgeShape=function(){box2d.b2Shape.call(this,box2d.b2ShapeType.e_edgeShape,box2d.b2_polygonRadius);this.m_vertex1=new box2d.b2Vec2;this.m_vertex2=new box2d.b2Vec2;this.m_vertex0=new box2d.b2Vec2;this.m_vertex3=new box2d.b2Vec2};goog.inherits(box2d.b2EdgeShape,box2d.b2Shape);goog.exportSymbol("box2d.b2EdgeShape",box2d.b2EdgeShape);box2d.b2EdgeShape.prototype.m_vertex1=null;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex1",box2d.b2EdgeShape.prototype.m_vertex1);box2d.b2EdgeShape.prototype.m_vertex2=null;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex2",box2d.b2EdgeShape.prototype.m_vertex2);box2d.b2EdgeShape.prototype.m_vertex0=null;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex0",box2d.b2EdgeShape.prototype.m_vertex0);box2d.b2EdgeShape.prototype.m_vertex3=null;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex3",box2d.b2EdgeShape.prototype.m_vertex3);box2d.b2EdgeShape.prototype.m_hasVertex0=!1;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_hasVertex0",box2d.b2EdgeShape.prototype.m_hasVertex0);box2d.b2EdgeShape.prototype.m_hasVertex3=!1;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_hasVertex3",box2d.b2EdgeShape.prototype.m_hasVertex3);box2d.b2EdgeShape.prototype.Set=function(e,d){this.m_vertex1.Copy(e);this.m_vertex2.Copy(d);this.m_hasVertex3=this.m_hasVertex0=!1;return this};goog.exportProperty(box2d.b2EdgeShape.prototype,"Set",box2d.b2EdgeShape.prototype.Set);box2d.b2EdgeShape.prototype.SetAsEdge=box2d.b2EdgeShape.prototype.Set;box2d.b2EdgeShape.prototype.Clone=function(){return(new box2d.b2EdgeShape).Copy(this)};goog.exportProperty(box2d.b2EdgeShape.prototype,"Clone",box2d.b2EdgeShape.prototype.Clone);box2d.b2EdgeShape.prototype.Copy=function(b){box2d.b2EdgeShape.superClass_.Copy.call(this,b);box2d.ENABLE_ASSERTS&&box2d.b2Assert(b instanceof box2d.b2EdgeShape);this.m_vertex1.Copy(b.m_vertex1);this.m_vertex2.Copy(b.m_vertex2);this.m_vertex0.Copy(b.m_vertex0);this.m_vertex3.Copy(b.m_vertex3);this.m_hasVertex0=b.m_hasVertex0;this.m_hasVertex3=b.m_hasVertex3;return this};goog.exportProperty(box2d.b2EdgeShape.prototype,"Copy",box2d.b2EdgeShape.prototype.Copy);box2d.b2EdgeShape.prototype.GetChildCount=function(){return 1};goog.exportProperty(box2d.b2EdgeShape.prototype,"GetChildCount",box2d.b2EdgeShape.prototype.GetChildCount);box2d.b2EdgeShape.prototype.TestPoint=function(e,d){return !1};goog.exportProperty(box2d.b2EdgeShape.prototype,"TestPoint",box2d.b2EdgeShape.prototype.TestPoint);box2d.b2EdgeShape.prototype.RayCast=function(v,u,s,q){var r=box2d.b2MulTXV(s,u.p1,box2d.b2EdgeShape.prototype.RayCast.s_p1);q=box2d.b2MulTXV(s,u.p2,box2d.b2EdgeShape.prototype.RayCast.s_p2);var n=box2d.b2SubVV(q,r,box2d.b2EdgeShape.prototype.RayCast.s_d);q=this.m_vertex1;var m=this.m_vertex2,k=box2d.b2SubVV(m,q,box2d.b2EdgeShape.prototype.RayCast.s_e),j=v.normal.SetXY(k.y,-k.x).SelfNormalize(),k=box2d.b2DotVV(j,box2d.b2SubVV(q,r,box2d.b2Vec2.s_t0)),j=box2d.b2DotVV(j,n);if(0==j){return !1}j=k/j;if(0>j||u.maxFraction<j){return !1}u=box2d.b2AddVMulSV(r,j,n,box2d.b2EdgeShape.prototype.RayCast.s_q);r=box2d.b2SubVV(m,q,box2d.b2EdgeShape.prototype.RayCast.s_r);m=box2d.b2DotVV(r,r);if(0==m){return !1}q=box2d.b2DotVV(box2d.b2SubVV(u,q,box2d.b2Vec2.s_t0),r)/m;if(0>q||1<q){return !1}v.fraction=j;box2d.b2MulRV(s.q,v.normal,v.normal);0<k&&v.normal.SelfNeg();return !0};goog.exportProperty(box2d.b2EdgeShape.prototype,"RayCast",box2d.b2EdgeShape.prototype.RayCast);box2d.b2EdgeShape.prototype.RayCast.s_p1=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_p2=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_d=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_e=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_q=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_r=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.ComputeAABB=function(e,d,f){f=box2d.b2MulXV(d,this.m_vertex1,box2d.b2EdgeShape.prototype.ComputeAABB.s_v1);d=box2d.b2MulXV(d,this.m_vertex2,box2d.b2EdgeShape.prototype.ComputeAABB.s_v2);box2d.b2MinV(f,d,e.lowerBound);box2d.b2MaxV(f,d,e.upperBound);d=this.m_radius;e.lowerBound.SelfSubXY(d,d);e.upperBound.SelfAddXY(d,d)};goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeAABB",box2d.b2EdgeShape.prototype.ComputeAABB);box2d.b2EdgeShape.prototype.ComputeAABB.s_v1=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.ComputeAABB.s_v2=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.ComputeMass=function(e,d){e.mass=0;box2d.b2MidVV(this.m_vertex1,this.m_vertex2,e.center);e.I=0};goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeMass",box2d.b2EdgeShape.prototype.ComputeMass);box2d.b2EdgeShape.prototype.SetupDistanceProxy=function(e,d){e.m_vertices=Array(2);e.m_vertices[0]=this.m_vertex1;e.m_vertices[1]=this.m_vertex2;e.m_count=2;e.m_radius=this.m_radius};box2d.b2EdgeShape.prototype.ComputeSubmergedArea=function(f,d,j,g){g.SetZero();return 0};goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeSubmergedArea",box2d.b2EdgeShape.prototype.ComputeSubmergedArea);box2d.b2EdgeShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2EdgeShape*/ var shape = new box2d.b2EdgeShape();\n");box2d.b2Log("    shape.m_radius = %.15f;\n",this.m_radius);box2d.b2Log("    shape.m_vertex0.SetXY(%.15f, %.15f);\n",this.m_vertex0.x,this.m_vertex0.y);box2d.b2Log("    shape.m_vertex1.SetXY(%.15f, %.15f);\n",this.m_vertex1.x,this.m_vertex1.y);box2d.b2Log("    shape.m_vertex2.SetXY(%.15f, %.15f);\n",this.m_vertex2.x,this.m_vertex2.y);box2d.b2Log("    shape.m_vertex3.SetXY(%.15f, %.15f);\n",this.m_vertex3.x,this.m_vertex3.y);box2d.b2Log("    shape.m_hasVertex0 = %s;\n",this.m_hasVertex0);box2d.b2Log("    shape.m_hasVertex3 = %s;\n",this.m_hasVertex3)};goog.exportProperty(box2d.b2EdgeShape.prototype,"Dump",box2d.b2EdgeShape.prototype.Dump);box2d.b2ChainShape=function(){box2d.b2Shape.call(this,box2d.b2ShapeType.e_chainShape,box2d.b2_polygonRadius);this.m_prevVertex=new box2d.b2Vec2;this.m_nextVertex=new box2d.b2Vec2};goog.inherits(box2d.b2ChainShape,box2d.b2Shape);goog.exportSymbol("box2d.b2ChainShape",box2d.b2ChainShape);box2d.b2ChainShape.prototype.m_vertices=null;goog.exportProperty(box2d.b2ChainShape.prototype,"m_vertices",box2d.b2ChainShape.prototype.m_vertices);box2d.b2ChainShape.prototype.m_count=0;goog.exportProperty(box2d.b2ChainShape.prototype,"m_count",box2d.b2ChainShape.prototype.m_count);box2d.b2ChainShape.prototype.m_prevVertex=null;goog.exportProperty(box2d.b2ChainShape.prototype,"m_prevVertex",box2d.b2ChainShape.prototype.m_prevVertex);box2d.b2ChainShape.prototype.m_nextVertex=null;goog.exportProperty(box2d.b2ChainShape.prototype,"m_nextVertex",box2d.b2ChainShape.prototype.m_nextVertex);box2d.b2ChainShape.prototype.m_hasPrevVertex=!1;goog.exportProperty(box2d.b2ChainShape.prototype,"m_hasPrevVertex",box2d.b2ChainShape.prototype.m_hasPrevVertex);box2d.b2ChainShape.prototype.m_hasNextVertex=!1;goog.exportProperty(box2d.b2ChainShape.prototype,"m_hasNextVertex",box2d.b2ChainShape.prototype.m_hasNextVertex);box2d.b2ChainShape.prototype.CreateLoop=function(e,d){d=d||e.length;box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==this.m_vertices&&0==this.m_count);box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=d);if(box2d.ENABLE_ASSERTS){for(var f=1;f<d;++f){box2d.b2Assert(box2d.b2DistanceSquaredVV(e[f-1],e[f])>box2d.b2_linearSlop*box2d.b2_linearSlop)}}this.m_count=d+1;this.m_vertices=box2d.b2Vec2.MakeArray(this.m_count);for(f=0;f<d;++f){this.m_vertices[f].Copy(e[f])}this.m_vertices[d].Copy(this.m_vertices[0]);this.m_prevVertex.Copy(this.m_vertices[this.m_count-2]);this.m_nextVertex.Copy(this.m_vertices[1]);this.m_hasNextVertex=this.m_hasPrevVertex=!0;return this};goog.exportProperty(box2d.b2ChainShape.prototype,"CreateLoop",box2d.b2ChainShape.prototype.CreateLoop);box2d.b2ChainShape.prototype.CreateChain=function(e,d){d=d||e.length;box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==this.m_vertices&&0==this.m_count);box2d.ENABLE_ASSERTS&&box2d.b2Assert(2<=d);if(box2d.ENABLE_ASSERTS){for(var f=1;f<d;++f){box2d.b2Assert(box2d.b2DistanceSquaredVV(e[f-1],e[f])>box2d.b2_linearSlop*box2d.b2_linearSlop)}}this.m_count=d;this.m_vertices=box2d.b2Vec2.MakeArray(d);for(f=0;f<d;++f){this.m_vertices[f].Copy(e[f])}this.m_hasNextVertex=this.m_hasPrevVertex=!1;return this};goog.exportProperty(box2d.b2ChainShape.prototype,"CreateChain",box2d.b2ChainShape.prototype.CreateChain);box2d.b2ChainShape.prototype.SetPrevVertex=function(b){this.m_prevVertex.Copy(b);this.m_hasPrevVertex=!0;return this};goog.exportProperty(box2d.b2ChainShape.prototype,"SetPrevVertex",box2d.b2ChainShape.prototype.SetPrevVertex);box2d.b2ChainShape.prototype.SetNextVertex=function(b){this.m_nextVertex.Copy(b);this.m_hasNextVertex=!0;return this};goog.exportProperty(box2d.b2ChainShape.prototype,"SetNextVertex",box2d.b2ChainShape.prototype.SetNextVertex);box2d.b2ChainShape.prototype.Clone=function(){return(new box2d.b2ChainShape).Copy(this)};goog.exportProperty(box2d.b2ChainShape.prototype,"Clone",box2d.b2ChainShape.prototype.Clone);box2d.b2ChainShape.prototype.Copy=function(b){box2d.b2ChainShape.superClass_.Copy.call(this,b);box2d.ENABLE_ASSERTS&&box2d.b2Assert(b instanceof box2d.b2ChainShape);this.CreateChain(b.m_vertices,b.m_count);this.m_prevVertex.Copy(b.m_prevVertex);this.m_nextVertex.Copy(b.m_nextVertex);this.m_hasPrevVertex=b.m_hasPrevVertex;this.m_hasNextVertex=b.m_hasNextVertex;return this};goog.exportProperty(box2d.b2ChainShape.prototype,"Copy",box2d.b2ChainShape.prototype.Copy);box2d.b2ChainShape.prototype.GetChildCount=function(){return this.m_count-1};goog.exportProperty(box2d.b2ChainShape.prototype,"GetChildCount",box2d.b2ChainShape.prototype.GetChildCount);box2d.b2ChainShape.prototype.GetChildEdge=function(e,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=d&&d<this.m_count-1);e.m_type=box2d.b2ShapeType.e_edgeShape;e.m_radius=this.m_radius;e.m_vertex1.Copy(this.m_vertices[d]);e.m_vertex2.Copy(this.m_vertices[d+1]);0<d?(e.m_vertex0.Copy(this.m_vertices[d-1]),e.m_hasVertex0=!0):(e.m_vertex0.Copy(this.m_prevVertex),e.m_hasVertex0=this.m_hasPrevVertex);d<this.m_count-2?(e.m_vertex3.Copy(this.m_vertices[d+2]),e.m_hasVertex3=!0):(e.m_vertex3.Copy(this.m_nextVertex),e.m_hasVertex3=this.m_hasNextVertex)};goog.exportProperty(box2d.b2ChainShape.prototype,"GetChildEdge",box2d.b2ChainShape.prototype.GetChildEdge);box2d.b2ChainShape.prototype.TestPoint=function(e,d){return !1};goog.exportProperty(box2d.b2ChainShape.prototype,"TestPoint",box2d.b2ChainShape.prototype.TestPoint);box2d.b2ChainShape.prototype.RayCast=function(g,f,m,j){box2d.ENABLE_ASSERTS&&box2d.b2Assert(j<this.m_count);var k=box2d.b2ChainShape.s_edgeShape;k.m_vertex1.Copy(this.m_vertices[j]);k.m_vertex2.Copy(this.m_vertices[(j+1)%this.m_count]);return k.RayCast(g,f,m,0)};goog.exportProperty(box2d.b2ChainShape.prototype,"RayCast",box2d.b2ChainShape.prototype.RayCast);box2d.b2ChainShape.s_edgeShape=new box2d.b2EdgeShape;goog.exportProperty(box2d.b2ChainShape,"s_edgeShape",box2d.b2ChainShape.s_edgeShape);box2d.b2ChainShape.prototype.ComputeAABB=function(f,d,j){box2d.ENABLE_ASSERTS&&box2d.b2Assert(j<this.m_count);var g=this.m_vertices[(j+1)%this.m_count];j=box2d.b2MulXV(d,this.m_vertices[j],box2d.b2ChainShape.prototype.ComputeAABB.s_v1);d=box2d.b2MulXV(d,g,box2d.b2ChainShape.prototype.ComputeAABB.s_v2);box2d.b2MinV(j,d,f.lowerBound);box2d.b2MaxV(j,d,f.upperBound)};goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeAABB",box2d.b2ChainShape.prototype.ComputeAABB);box2d.b2ChainShape.prototype.ComputeAABB.s_v1=new box2d.b2Vec2;goog.exportProperty(box2d.b2ChainShape.prototype.ComputeAABB,"s_v1",box2d.b2ChainShape.prototype.ComputeAABB.s_v1);box2d.b2ChainShape.prototype.ComputeAABB.s_v2=new box2d.b2Vec2;goog.exportProperty(box2d.b2ChainShape.prototype.ComputeAABB,"s_v2",box2d.b2ChainShape.prototype.ComputeAABB.s_v2);box2d.b2ChainShape.prototype.ComputeMass=function(e,d){e.mass=0;e.center.SetZero();e.I=0};goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeMass",box2d.b2ChainShape.prototype.ComputeMass);box2d.b2ChainShape.prototype.SetupDistanceProxy=function(e,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=d&&d<this.m_count);e.m_buffer[0].Copy(this.m_vertices[d]);d+1<this.m_count?e.m_buffer[1].Copy(this.m_vertices[d+1]):e.m_buffer[1].Copy(this.m_vertices[0]);e.m_vertices=e.m_buffer;e.m_count=2;e.m_radius=this.m_radius};box2d.b2ChainShape.prototype.ComputeSubmergedArea=function(f,d,j,g){g.SetZero();return 0};goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeSubmergedArea",box2d.b2ChainShape.prototype.ComputeSubmergedArea);box2d.b2ChainShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2ChainShape*/ var shape = new box2d.b2ChainShape();\n");box2d.b2Log("    /*box2d.b2Vec2[]*/ var vs = box2d.b2Vec2.MakeArray(%d);\n",box2d.b2_maxPolygonVertices);for(var b=0;b<this.m_count;++b){box2d.b2Log("    vs[%d].SetXY(%.15f, %.15f);\n",b,this.m_vertices[b].x,this.m_vertices[b].y)}box2d.b2Log("    shape.CreateChain(vs, %d);\n",this.m_count);box2d.b2Log("    shape.m_prevVertex.SetXY(%.15f, %.15f);\n",this.m_prevVertex.x,this.m_prevVertex.y);box2d.b2Log("    shape.m_nextVertex.SetXY(%.15f, %.15f);\n",this.m_nextVertex.x,this.m_nextVertex.y);box2d.b2Log("    shape.m_hasPrevVertex = %s;\n",this.m_hasPrevVertex?"true":"false");box2d.b2Log("    shape.m_hasNextVertex = %s;\n",this.m_hasNextVertex?"true":"false")};goog.exportProperty(box2d.b2ChainShape.prototype,"Dump",box2d.b2ChainShape.prototype.Dump);box2d.b2ChainAndPolygonContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2ChainAndPolygonContact,box2d.b2Contact);goog.exportSymbol("box2d.b2ChainAndPolygonContact",box2d.b2ChainAndPolygonContact);box2d.b2ChainAndPolygonContact.Create=function(b){return new box2d.b2ChainAndPolygonContact};goog.exportProperty(box2d.b2ChainAndPolygonContact,"Create",box2d.b2ChainAndPolygonContact.Create);box2d.b2ChainAndPolygonContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2ChainAndPolygonContact,"Destroy",box2d.b2ChainAndPolygonContact.Destroy);box2d.b2ChainAndPolygonContact.prototype.Reset=function(f,d,j,g){box2d.b2ChainAndPolygonContact.superClass_.Reset.call(this,f,d,j,g);box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.GetType()==box2d.b2ShapeType.e_chainShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(j.GetType()==box2d.b2ShapeType.e_polygonShape)};goog.exportProperty(box2d.b2ChainAndPolygonContact.prototype,"Reset",box2d.b2ChainAndPolygonContact.prototype.Reset);box2d.b2ChainAndPolygonContact.prototype.Evaluate=function(j,g,q){var m=this.m_fixtureA.GetShape(),n=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(m instanceof box2d.b2ChainShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(n instanceof box2d.b2PolygonShape);var k=box2d.b2ChainAndPolygonContact.prototype.Evaluate.s_edge;(m instanceof box2d.b2ChainShape?m:null).GetChildEdge(k,this.m_indexA);box2d.b2CollideEdgeAndPolygon(j,k,g,n instanceof box2d.b2PolygonShape?n:null,q)};goog.exportProperty(box2d.b2ChainAndPolygonContact.prototype,"Evaluate",box2d.b2ChainAndPolygonContact.prototype.Evaluate);box2d.b2ChainAndPolygonContact.prototype.Evaluate.s_edge=new box2d.b2EdgeShape;box2d.b2CollidePolygon={};box2d.b2EdgeSeparation=function(D,C,B,z,A){var y=D.m_count,v=D.m_vertices,u=D.m_normals;D=z.m_count;z=z.m_vertices;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=B&&B<y);for(var y=box2d.b2MulRV(C.q,u[B],box2d.b2EdgeSeparation.s_normal1World),r=box2d.b2MulTRV(A.q,y,box2d.b2EdgeSeparation.s_normal1),u=0,s=box2d.b2_maxFloat,q=0;q<D;++q){var j=box2d.b2DotVV(z[q],r);j<s&&(s=j,u=q)}C=box2d.b2MulXV(C,v[B],box2d.b2EdgeSeparation.s_v1);A=box2d.b2MulXV(A,z[u],box2d.b2EdgeSeparation.s_v2);return box2d.b2DotVV(box2d.b2SubVV(A,C,box2d.b2Vec2.s_t0),y)};goog.exportSymbol("box2d.b2EdgeSeparation",box2d.b2EdgeSeparation);box2d.b2EdgeSeparation.s_normal1World=new box2d.b2Vec2;box2d.b2EdgeSeparation.s_normal1=new box2d.b2Vec2;box2d.b2EdgeSeparation.s_v1=new box2d.b2Vec2;box2d.b2EdgeSeparation.s_v2=new box2d.b2Vec2;box2d.b2FindMaxSeparation=function(I,H,G,E,F){for(var D=H.m_count,C=H.m_normals,B=box2d.b2SubVV(box2d.b2MulXV(F,E.m_centroid,box2d.b2Vec2.s_t0),box2d.b2MulXV(G,H.m_centroid,box2d.b2Vec2.s_t1),box2d.b2FindMaxSeparation.s_d),z=box2d.b2MulTRV(G.q,B,box2d.b2FindMaxSeparation.s_dLocal1),B=0,A=-box2d.b2_maxFloat,y=0;y<D;++y){var v=box2d.b2DotVV(C[y],z);v>A&&(A=v,B=y)}var C=box2d.b2EdgeSeparation(H,G,B,E,F),z=(B+D-1)%D,A=box2d.b2EdgeSeparation(H,G,z,E,F),y=(B+1)%D,v=box2d.b2EdgeSeparation(H,G,y,E,F),u=0,s=0,j=0;if(A>C&&A>v){j=-1,u=z,s=A}else{if(v>C){j=1,u=y,s=v}else{return I[0]=B,C}}for(;;){if(B=-1==j?(u+D-1)%D:(u+1)%D,C=box2d.b2EdgeSeparation(H,G,B,E,F),C>s){u=B,s=C}else{break}}I[0]=u;return s};goog.exportSymbol("box2d.b2FindMaxSeparation",box2d.b2FindMaxSeparation);box2d.b2FindMaxSeparation.s_d=new box2d.b2Vec2;box2d.b2FindMaxSeparation.s_dLocal1=new box2d.b2Vec2;box2d.b2FindIncidentEdge=function(B,A,z,v,y,u){var s=A.m_count,r=A.m_normals,n=y.m_count;A=y.m_vertices;y=y.m_normals;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=v&&v<s);z=box2d.b2MulTRV(u.q,box2d.b2MulRV(z.q,r[v],box2d.b2Vec2.s_t0),box2d.b2FindIncidentEdge.s_normal1);for(var s=0,r=box2d.b2_maxFloat,q=0;q<n;++q){var j=box2d.b2DotVV(z,y[q]);j<r&&(r=j,s=q)}y=s;n=(y+1)%n;z=B[0];box2d.b2MulXV(u,A[y],z.v);z=z.id.cf;z.indexA=v;z.indexB=y;z.typeA=box2d.b2ContactFeatureType.e_face;z.typeB=box2d.b2ContactFeatureType.e_vertex;B=B[1];box2d.b2MulXV(u,A[n],B.v);u=B.id.cf;u.indexA=v;u.indexB=n;u.typeA=box2d.b2ContactFeatureType.e_face;u.typeB=box2d.b2ContactFeatureType.e_vertex};goog.exportSymbol("box2d.b2FindIncidentEdge",box2d.b2FindIncidentEdge);box2d.b2FindIncidentEdge.s_normal1=new box2d.b2Vec2;box2d.b2CollidePolygons=function(J,I,H,F,G){J.pointCount=0;var E=I.m_radius+F.m_radius,D=box2d.b2CollidePolygons.s_edgeA;D[0]=0;var C=box2d.b2FindMaxSeparation(D,I,H,F,G);if(!(C>E)){var A=box2d.b2CollidePolygons.s_edgeB;A[0]=0;var B=box2d.b2FindMaxSeparation(A,F,G,I,H);if(!(B>E)){var z=0,y=0;B>0.98*C+0.001?(C=F,F=I,I=G,z=A[0],J.type=box2d.b2ManifoldType.e_faceB,y=1):(C=I,I=H,H=G,z=D[0],J.type=box2d.b2ManifoldType.e_faceA,y=0);D=box2d.b2CollidePolygons.s_incidentEdge;box2d.b2FindIncidentEdge(D,C,I,z,F,H);G=C.m_vertices;var A=z,C=(z+1)%C.m_count,v=G[A],u=G[C],z=box2d.b2SubVV(u,v,box2d.b2CollidePolygons.s_localTangent);z.Normalize();G=box2d.b2CrossVOne(z,box2d.b2CollidePolygons.s_localNormal);F=box2d.b2MidVV(v,u,box2d.b2CollidePolygons.s_planePoint);var B=box2d.b2MulRV(I.q,z,box2d.b2CollidePolygons.s_tangent),z=box2d.b2CrossVOne(B,box2d.b2CollidePolygons.s_normal),v=box2d.b2MulXV(I,v,box2d.b2CollidePolygons.s_v11),j=box2d.b2MulXV(I,u,box2d.b2CollidePolygons.s_v12);I=box2d.b2DotVV(z,v);var u=-box2d.b2DotVV(B,v)+E,j=box2d.b2DotVV(B,j)+E,K=box2d.b2CollidePolygons.s_clipPoints1,v=box2d.b2CollidePolygons.s_clipPoints2,L=box2d.b2NegV(B,box2d.b2CollidePolygons.s_ntangent),D=box2d.b2ClipSegmentToLine(K,D,L,u,A);if(!(2>D||(D=box2d.b2ClipSegmentToLine(v,K,B,j,C),2>D))){J.localNormal.Copy(G);J.localPoint.Copy(F);for(A=D=0;A<box2d.b2_maxManifoldPoints;++A){G=v[A],box2d.b2DotVV(z,G.v)-I<=E&&(C=J.points[D],box2d.b2MulTXV(H,G.v,C.localPoint),C.id.Copy(G.id),y&&(G=C.id.cf,C.id.cf.indexA=G.indexB,C.id.cf.indexB=G.indexA,C.id.cf.typeA=G.typeB,C.id.cf.typeB=G.typeA),++D)}J.pointCount=D}}}};goog.exportSymbol("box2d.b2CollidePolygons",box2d.b2CollidePolygons);box2d.b2CollidePolygons.s_incidentEdge=box2d.b2ClipVertex.MakeArray(2);box2d.b2CollidePolygons.s_clipPoints1=box2d.b2ClipVertex.MakeArray(2);box2d.b2CollidePolygons.s_clipPoints2=box2d.b2ClipVertex.MakeArray(2);box2d.b2CollidePolygons.s_edgeA=box2d.b2MakeNumberArray(1);box2d.b2CollidePolygons.s_edgeB=box2d.b2MakeNumberArray(1);box2d.b2CollidePolygons.s_localTangent=new box2d.b2Vec2;box2d.b2CollidePolygons.s_localNormal=new box2d.b2Vec2;box2d.b2CollidePolygons.s_planePoint=new box2d.b2Vec2;box2d.b2CollidePolygons.s_normal=new box2d.b2Vec2;box2d.b2CollidePolygons.s_tangent=new box2d.b2Vec2;box2d.b2CollidePolygons.s_ntangent=new box2d.b2Vec2;box2d.b2CollidePolygons.s_v11=new box2d.b2Vec2;box2d.b2CollidePolygons.s_v12=new box2d.b2Vec2;box2d.b2PolygonContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2PolygonContact,box2d.b2Contact);goog.exportSymbol("box2d.b2PolygonContact",box2d.b2PolygonContact);box2d.b2PolygonContact.Create=function(b){return new box2d.b2PolygonContact};goog.exportProperty(box2d.b2PolygonContact,"Create",box2d.b2PolygonContact.Create);box2d.b2PolygonContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2PolygonContact,"Destroy",box2d.b2PolygonContact.Destroy);box2d.b2PolygonContact.prototype.Reset=function(f,d,j,g){box2d.b2PolygonContact.superClass_.Reset.call(this,f,d,j,g)};goog.exportProperty(box2d.b2PolygonContact.prototype,"Reset",box2d.b2PolygonContact.prototype.Reset);box2d.b2PolygonContact.prototype.Evaluate=function(g,f,m){var j=this.m_fixtureA.GetShape(),k=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(j instanceof box2d.b2PolygonShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(k instanceof box2d.b2PolygonShape);box2d.b2CollidePolygons(g,j instanceof box2d.b2PolygonShape?j:null,f,k instanceof box2d.b2PolygonShape?k:null,m)};goog.exportProperty(box2d.b2PolygonContact.prototype,"Evaluate",box2d.b2PolygonContact.prototype.Evaluate);box2d.b2CollideCircle={};box2d.b2CollideCircles=function(g,f,m,j,k){g.pointCount=0;m=box2d.b2MulXV(m,f.m_p,box2d.b2CollideCircles.s_pA);k=box2d.b2MulXV(k,j.m_p,box2d.b2CollideCircles.s_pB);k=box2d.b2DistanceSquaredVV(m,k);m=f.m_radius+j.m_radius;k>m*m||(g.type=box2d.b2ManifoldType.e_circles,g.localPoint.Copy(f.m_p),g.localNormal.SetZero(),g.pointCount=1,g.points[0].localPoint.Copy(j.m_p),g.points[0].id.key=0)};goog.exportSymbol("box2d.b2CollideCircles",box2d.b2CollideCircles);box2d.b2CollideCircles.s_pA=new box2d.b2Vec2;box2d.b2CollideCircles.s_pB=new box2d.b2Vec2;box2d.b2CollidePolygonAndCircle=function(B,A,z,v,y){B.pointCount=0;y=box2d.b2MulXV(y,v.m_p,box2d.b2CollidePolygonAndCircle.s_c);z=box2d.b2MulTXV(z,y,box2d.b2CollidePolygonAndCircle.s_cLocal);var u=0,s=-box2d.b2_maxFloat;y=A.m_radius+v.m_radius;var r=A.m_count,n=A.m_vertices;A=A.m_normals;for(var q=0;q<r;++q){var j=box2d.b2DotVV(A[q],box2d.b2SubVV(z,n[q],box2d.b2Vec2.s_t0));if(j>y){return}j>s&&(s=j,u=q)}q=u;j=n[q];r=n[(q+1)%r];s<box2d.b2_epsilon?(B.pointCount=1,B.type=box2d.b2ManifoldType.e_faceA,B.localNormal.Copy(A[u]),box2d.b2MidVV(j,r,B.localPoint),B.points[0].localPoint.Copy(v.m_p),B.points[0].id.key=0):(s=box2d.b2DotVV(box2d.b2SubVV(z,j,box2d.b2Vec2.s_t0),box2d.b2SubVV(r,j,box2d.b2Vec2.s_t1)),u=box2d.b2DotVV(box2d.b2SubVV(z,r,box2d.b2Vec2.s_t0),box2d.b2SubVV(j,r,box2d.b2Vec2.s_t1)),0>=s?box2d.b2DistanceSquaredVV(z,j)>y*y||(B.pointCount=1,B.type=box2d.b2ManifoldType.e_faceA,box2d.b2SubVV(z,j,B.localNormal).SelfNormalize(),B.localPoint.Copy(j),B.points[0].localPoint.Copy(v.m_p),B.points[0].id.key=0):0>=u?box2d.b2DistanceSquaredVV(z,r)>y*y||(B.pointCount=1,B.type=box2d.b2ManifoldType.e_faceA,box2d.b2SubVV(z,r,B.localNormal).SelfNormalize(),B.localPoint.Copy(r),B.points[0].localPoint.Copy(v.m_p),B.points[0].id.key=0):(u=box2d.b2MidVV(j,r,box2d.b2CollidePolygonAndCircle.s_faceCenter),s=box2d.b2DotVV(box2d.b2SubVV(z,u,box2d.b2Vec2.s_t1),A[q]),s>y||(B.pointCount=1,B.type=box2d.b2ManifoldType.e_faceA,B.localNormal.Copy(A[q]).SelfNormalize(),B.localPoint.Copy(u),B.points[0].localPoint.Copy(v.m_p),B.points[0].id.key=0)))};goog.exportSymbol("box2d.b2CollidePolygonAndCircle",box2d.b2CollidePolygonAndCircle);box2d.b2CollidePolygonAndCircle.s_c=new box2d.b2Vec2;box2d.b2CollidePolygonAndCircle.s_cLocal=new box2d.b2Vec2;box2d.b2CollidePolygonAndCircle.s_faceCenter=new box2d.b2Vec2;box2d.b2CircleContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2CircleContact,box2d.b2Contact);goog.exportSymbol("box2d.b2CircleContact",box2d.b2CircleContact);box2d.b2CircleContact.Create=function(b){return new box2d.b2CircleContact};goog.exportProperty(box2d.b2CircleContact,"Create",box2d.b2CircleContact.Create);box2d.b2CircleContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2CircleContact,"Destroy",box2d.b2CircleContact.Destroy);box2d.b2CircleContact.prototype.Reset=function(f,d,j,g){box2d.b2CircleContact.superClass_.Reset.call(this,f,d,j,g)};goog.exportProperty(box2d.b2CircleContact.prototype,"Reset",box2d.b2CircleContact.prototype.Reset);box2d.b2CircleContact.prototype.Evaluate=function(g,f,m){var j=this.m_fixtureA.GetShape(),k=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(j instanceof box2d.b2CircleShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(k instanceof box2d.b2CircleShape);box2d.b2CollideCircles(g,j instanceof box2d.b2CircleShape?j:null,f,k instanceof box2d.b2CircleShape?k:null,m)};goog.exportProperty(box2d.b2CircleContact.prototype,"Evaluate",box2d.b2CircleContact.prototype.Evaluate);box2d.b2ChainAndCircleContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2ChainAndCircleContact,box2d.b2Contact);goog.exportSymbol("box2d.b2ChainAndCircleContact",box2d.b2ChainAndCircleContact);box2d.b2ChainAndCircleContact.Create=function(b){return new box2d.b2ChainAndCircleContact};goog.exportProperty(box2d.b2ChainAndCircleContact,"Create",box2d.b2ChainAndCircleContact.Create);box2d.b2ChainAndCircleContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2ChainAndCircleContact,"Destroy",box2d.b2ChainAndCircleContact.Destroy);box2d.b2ChainAndCircleContact.prototype.Reset=function(f,d,j,g){box2d.b2ChainAndCircleContact.superClass_.Reset.call(this,f,d,j,g);box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.GetType()==box2d.b2ShapeType.e_chainShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(j.GetType()==box2d.b2ShapeType.e_circleShape)};goog.exportProperty(box2d.b2ChainAndCircleContact.prototype,"Reset",box2d.b2ChainAndCircleContact.prototype.Reset);box2d.b2ChainAndCircleContact.prototype.Evaluate=function(j,g,q){var m=this.m_fixtureA.GetShape(),n=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(m instanceof box2d.b2ChainShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(n instanceof box2d.b2CircleShape);var k=box2d.b2ChainAndCircleContact.prototype.Evaluate.s_edge;(m instanceof box2d.b2ChainShape?m:null).GetChildEdge(k,this.m_indexA);box2d.b2CollideEdgeAndCircle(j,k,g,n instanceof box2d.b2CircleShape?n:null,q)};goog.exportProperty(box2d.b2ChainAndCircleContact.prototype,"Evaluate",box2d.b2ChainAndCircleContact.prototype.Evaluate);box2d.b2ChainAndCircleContact.prototype.Evaluate.s_edge=new box2d.b2EdgeShape;box2d.b2EdgeAndCircleContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2EdgeAndCircleContact,box2d.b2Contact);goog.exportSymbol("box2d.b2EdgeAndCircleContact",box2d.b2EdgeAndCircleContact);box2d.b2EdgeAndCircleContact.Create=function(b){return new box2d.b2EdgeAndCircleContact};goog.exportProperty(box2d.b2EdgeAndCircleContact,"Create",box2d.b2EdgeAndCircleContact.Create);box2d.b2EdgeAndCircleContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2EdgeAndCircleContact,"Destroy",box2d.b2EdgeAndCircleContact.Destroy);box2d.b2EdgeAndCircleContact.prototype.Reset=function(f,d,j,g){box2d.b2EdgeAndCircleContact.superClass_.Reset.call(this,f,d,j,g);box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.GetType()==box2d.b2ShapeType.e_edgeShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(j.GetType()==box2d.b2ShapeType.e_circleShape)};goog.exportProperty(box2d.b2EdgeAndCircleContact.prototype,"Reset",box2d.b2EdgeAndCircleContact.prototype.Reset);box2d.b2EdgeAndCircleContact.prototype.Evaluate=function(g,f,m){var j=this.m_fixtureA.GetShape(),k=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(j instanceof box2d.b2EdgeShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(k instanceof box2d.b2CircleShape);box2d.b2CollideEdgeAndCircle(g,j instanceof box2d.b2EdgeShape?j:null,f,k instanceof box2d.b2CircleShape?k:null,m)};goog.exportProperty(box2d.b2EdgeAndCircleContact.prototype,"Evaluate",box2d.b2EdgeAndCircleContact.prototype.Evaluate);box2d.b2VelocityConstraintPoint=function(){this.rA=new box2d.b2Vec2;this.rB=new box2d.b2Vec2};goog.exportSymbol("box2d.b2VelocityConstraintPoint",box2d.b2VelocityConstraintPoint);box2d.b2VelocityConstraintPoint.prototype.rA=null;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"rA",box2d.b2VelocityConstraintPoint.prototype.rA);box2d.b2VelocityConstraintPoint.prototype.rB=null;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"rB",box2d.b2VelocityConstraintPoint.prototype.rB);box2d.b2VelocityConstraintPoint.prototype.normalImpulse=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"normalImpulse",box2d.b2VelocityConstraintPoint.prototype.normalImpulse);box2d.b2VelocityConstraintPoint.prototype.tangentImpulse=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"tangentImpulse",box2d.b2VelocityConstraintPoint.prototype.tangentImpulse);box2d.b2VelocityConstraintPoint.prototype.normalMass=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"normalMass",box2d.b2VelocityConstraintPoint.prototype.normalMass);box2d.b2VelocityConstraintPoint.prototype.tangentMass=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"tangentMass",box2d.b2VelocityConstraintPoint.prototype.tangentMass);box2d.b2VelocityConstraintPoint.prototype.velocityBias=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"velocityBias",box2d.b2VelocityConstraintPoint.prototype.velocityBias);box2d.b2VelocityConstraintPoint.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2VelocityConstraintPoint})};goog.exportProperty(box2d.b2VelocityConstraintPoint,"MakeArray",box2d.b2VelocityConstraintPoint.MakeArray);box2d.b2ContactVelocityConstraint=function(){this.points=box2d.b2VelocityConstraintPoint.MakeArray(box2d.b2_maxManifoldPoints);this.normal=new box2d.b2Vec2;this.tangent=new box2d.b2Vec2;this.normalMass=new box2d.b2Mat22;this.K=new box2d.b2Mat22};goog.exportSymbol("box2d.b2ContactVelocityConstraint",box2d.b2ContactVelocityConstraint);box2d.b2ContactVelocityConstraint.prototype.points=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"points",box2d.b2ContactVelocityConstraint.prototype.points);box2d.b2ContactVelocityConstraint.prototype.normal=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"normal",box2d.b2ContactVelocityConstraint.prototype.normal);box2d.b2ContactVelocityConstraint.prototype.tangent=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"tangent",box2d.b2ContactVelocityConstraint.prototype.tangent);box2d.b2ContactVelocityConstraint.prototype.normalMass=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"normalMass",box2d.b2ContactVelocityConstraint.prototype.normalMass);box2d.b2ContactVelocityConstraint.prototype.K=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"K",box2d.b2ContactVelocityConstraint.prototype.K);box2d.b2ContactVelocityConstraint.prototype.indexA=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"indexA",box2d.b2ContactVelocityConstraint.prototype.indexA);box2d.b2ContactVelocityConstraint.prototype.indexB=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"indexB",box2d.b2ContactVelocityConstraint.prototype.indexB);box2d.b2ContactVelocityConstraint.prototype.invMassA=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invMassA",box2d.b2ContactVelocityConstraint.prototype.invMassA);box2d.b2ContactVelocityConstraint.prototype.invMassB=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invMassB",box2d.b2ContactVelocityConstraint.prototype.invMassB);box2d.b2ContactVelocityConstraint.prototype.invIA=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invIA",box2d.b2ContactVelocityConstraint.prototype.invIA);box2d.b2ContactVelocityConstraint.prototype.invIB=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invIB",box2d.b2ContactVelocityConstraint.prototype.invIB);box2d.b2ContactVelocityConstraint.prototype.friction=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"friction",box2d.b2ContactVelocityConstraint.prototype.friction);box2d.b2ContactVelocityConstraint.prototype.restitution=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"restitution",box2d.b2ContactVelocityConstraint.prototype.restitution);box2d.b2ContactVelocityConstraint.prototype.tangentSpeed=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"tangentSpeed",box2d.b2ContactVelocityConstraint.prototype.tangentSpeed);box2d.b2ContactVelocityConstraint.prototype.pointCount=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"pointCount",box2d.b2ContactVelocityConstraint.prototype.pointCount);box2d.b2ContactVelocityConstraint.prototype.contactIndex=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"contactIndex",box2d.b2ContactVelocityConstraint.prototype.contactIndex);box2d.b2ContactVelocityConstraint.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2ContactVelocityConstraint})};goog.exportProperty(box2d.b2ContactVelocityConstraint,"MakeArray",box2d.b2ContactVelocityConstraint.MakeArray);box2d.b2ContactPositionConstraint=function(){this.localPoints=box2d.b2Vec2.MakeArray(box2d.b2_maxManifoldPoints);this.localNormal=new box2d.b2Vec2;this.localPoint=new box2d.b2Vec2;this.localCenterA=new box2d.b2Vec2;this.localCenterB=new box2d.b2Vec2};goog.exportSymbol("box2d.b2ContactPositionConstraint",box2d.b2ContactPositionConstraint);box2d.b2ContactPositionConstraint.prototype.localPoints=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localPoints",box2d.b2ContactPositionConstraint.prototype.localPoints);box2d.b2ContactPositionConstraint.prototype.localNormal=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localNormal",box2d.b2ContactPositionConstraint.prototype.localNormal);box2d.b2ContactPositionConstraint.prototype.localPoint=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localPoint",box2d.b2ContactPositionConstraint.prototype.localPoint);box2d.b2ContactPositionConstraint.prototype.indexA=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"indexA",box2d.b2ContactPositionConstraint.prototype.indexA);box2d.b2ContactPositionConstraint.prototype.indexB=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"indexB",box2d.b2ContactPositionConstraint.prototype.indexB);box2d.b2ContactPositionConstraint.prototype.invMassA=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invMassA",box2d.b2ContactPositionConstraint.prototype.invMassA);box2d.b2ContactPositionConstraint.prototype.invMassB=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invMassB",box2d.b2ContactPositionConstraint.prototype.invMassB);box2d.b2ContactPositionConstraint.prototype.localCenterA=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localCenterA",box2d.b2ContactPositionConstraint.prototype.localCenterA);box2d.b2ContactPositionConstraint.prototype.localCenterB=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localCenterB",box2d.b2ContactPositionConstraint.prototype.localCenterB);box2d.b2ContactPositionConstraint.prototype.invIA=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invIA",box2d.b2ContactPositionConstraint.prototype.invIA);box2d.b2ContactPositionConstraint.prototype.invIB=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invIB",box2d.b2ContactPositionConstraint.prototype.invIB);box2d.b2ContactPositionConstraint.prototype.type=box2d.b2ManifoldType.e_unknown;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"type",box2d.b2ContactPositionConstraint.prototype.type);box2d.b2ContactPositionConstraint.prototype.radiusA=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"radiusA",box2d.b2ContactPositionConstraint.prototype.radiusA);box2d.b2ContactPositionConstraint.prototype.radiusB=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"radiusB",box2d.b2ContactPositionConstraint.prototype.radiusB);box2d.b2ContactPositionConstraint.prototype.pointCount=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"pointCount",box2d.b2ContactPositionConstraint.prototype.pointCount);box2d.b2ContactPositionConstraint.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2ContactPositionConstraint})};goog.exportProperty(box2d.b2ContactPositionConstraint,"MakeArray",box2d.b2ContactPositionConstraint.MakeArray);box2d.b2ContactSolverDef=function(){this.step=new box2d.b2TimeStep};goog.exportSymbol("box2d.b2ContactSolverDef",box2d.b2ContactSolverDef);box2d.b2ContactSolverDef.prototype.step=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"step",box2d.b2ContactSolverDef.prototype.step);box2d.b2ContactSolverDef.prototype.contacts=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"contacts",box2d.b2ContactSolverDef.prototype.contacts);box2d.b2ContactSolverDef.prototype.count=0;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"count",box2d.b2ContactSolverDef.prototype.count);box2d.b2ContactSolverDef.prototype.positions=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"positions",box2d.b2ContactSolverDef.prototype.positions);box2d.b2ContactSolverDef.prototype.velocities=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"velocities",box2d.b2ContactSolverDef.prototype.velocities);box2d.b2ContactSolverDef.prototype.allocator=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"allocator",box2d.b2ContactSolverDef.prototype.allocator);box2d.b2ContactSolver=function(){this.m_step=new box2d.b2TimeStep;this.m_positionConstraints=box2d.b2ContactPositionConstraint.MakeArray(1024);this.m_velocityConstraints=box2d.b2ContactVelocityConstraint.MakeArray(1024)};goog.exportSymbol("box2d.b2ContactSolver",box2d.b2ContactSolver);box2d.b2ContactSolver.prototype.m_step=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_step",box2d.b2ContactSolver.prototype.m_step);box2d.b2ContactSolver.prototype.m_positions=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_positions",box2d.b2ContactSolver.prototype.m_positions);box2d.b2ContactSolver.prototype.m_velocities=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_velocities",box2d.b2ContactSolver.prototype.m_velocities);box2d.b2ContactSolver.prototype.m_allocator=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_allocator",box2d.b2ContactSolver.prototype.m_allocator);box2d.b2ContactSolver.prototype.m_positionConstraints=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_positionConstraints",box2d.b2ContactSolver.prototype.m_positionConstraints);box2d.b2ContactSolver.prototype.m_velocityConstraints=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_velocityConstraints",box2d.b2ContactSolver.prototype.m_velocityConstraints);box2d.b2ContactSolver.prototype.m_contacts=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_contacts",box2d.b2ContactSolver.prototype.m_contacts);box2d.b2ContactSolver.prototype.m_count=0;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_count",box2d.b2ContactSolver.prototype.m_count);box2d.b2ContactSolver.prototype.Initialize=function(z){this.m_step.Copy(z.step);this.m_allocator=z.allocator;this.m_count=z.count;if(this.m_positionConstraints.length<this.m_count){var y=box2d.b2Max(2*this.m_positionConstraints.length,this.m_count);for(box2d.DEBUG&&window.console.log("box2d.b2ContactSolver.m_positionConstraints: "+y);this.m_positionConstraints.length<y;){this.m_positionConstraints[this.m_positionConstraints.length]=new box2d.b2ContactPositionConstraint}}if(this.m_velocityConstraints.length<this.m_count){for(y=box2d.b2Max(2*this.m_velocityConstraints.length,this.m_count),box2d.DEBUG&&window.console.log("box2d.b2ContactSolver.m_velocityConstraints: "+y);this.m_velocityConstraints.length<y;){this.m_velocityConstraints[this.m_velocityConstraints.length]=new box2d.b2ContactVelocityConstraint}}this.m_positions=z.positions;this.m_velocities=z.velocities;this.m_contacts=z.contacts;var v,s,u,r,q,n,j,m;z=0;for(y=this.m_count;z<y;++z){for(u=this.m_contacts[z],r=u.m_fixtureA,q=u.m_fixtureB,v=r.GetShape(),s=q.GetShape(),v=v.m_radius,s=s.m_radius,n=r.GetBody(),j=q.GetBody(),q=u.GetManifold(),m=q.pointCount,box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<m),r=this.m_velocityConstraints[z],r.friction=u.m_friction,r.restitution=u.m_restitution,r.tangentSpeed=u.m_tangentSpeed,r.indexA=n.m_islandIndex,r.indexB=j.m_islandIndex,r.invMassA=n.m_invMass,r.invMassB=j.m_invMass,r.invIA=n.m_invI,r.invIB=j.m_invI,r.contactIndex=z,r.pointCount=m,r.K.SetZero(),r.normalMass.SetZero(),u=this.m_positionConstraints[z],u.indexA=n.m_islandIndex,u.indexB=j.m_islandIndex,u.invMassA=n.m_invMass,u.invMassB=j.m_invMass,u.localCenterA.Copy(n.m_sweep.localCenter),u.localCenterB.Copy(j.m_sweep.localCenter),u.invIA=n.m_invI,u.invIB=j.m_invI,u.localNormal.Copy(q.localNormal),u.localPoint.Copy(q.localPoint),u.pointCount=m,u.radiusA=v,u.radiusB=s,u.type=q.type,v=0,s=m;v<s;++v){n=q.points[v],m=r.points[v],this.m_step.warmStarting?(m.normalImpulse=this.m_step.dtRatio*n.normalImpulse,m.tangentImpulse=this.m_step.dtRatio*n.tangentImpulse):(m.normalImpulse=0,m.tangentImpulse=0),m.rA.SetZero(),m.rB.SetZero(),m.normalMass=0,m.tangentMass=0,m.velocityBias=0,u.localPoints[v].Copy(n.localPoint)}}return this};goog.exportProperty(box2d.b2ContactSolver.prototype,"Initialize",box2d.b2ContactSolver.prototype.Initialize);box2d.b2ContactSolver.prototype.InitializeVelocityConstraints=function(){var V,U,T,R,S,Q,P,O,M,N,L,K,J,I,H,E,G,C,B,j,F=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfA,z=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfB,A=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_worldManifold;V=0;for(U=this.m_count;V<U;++V){S=this.m_velocityConstraints[V];Q=this.m_positionConstraints[V];T=Q.radiusA;R=Q.radiusB;P=this.m_contacts[S.contactIndex].GetManifold();O=S.indexA;M=S.indexB;N=S.invMassA;L=S.invMassB;K=S.invIA;J=S.invIB;I=Q.localCenterA;H=Q.localCenterB;Q=this.m_positions[O].c;E=this.m_positions[O].a;G=this.m_velocities[O].v;O=this.m_velocities[O].w;C=this.m_positions[M].c;B=this.m_positions[M].a;j=this.m_velocities[M].v;M=this.m_velocities[M].w;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<P.pointCount);F.q.SetAngleRadians(E);z.q.SetAngleRadians(B);box2d.b2SubVV(Q,box2d.b2MulRV(F.q,I,box2d.b2Vec2.s_t0),F.p);box2d.b2SubVV(C,box2d.b2MulRV(z.q,H,box2d.b2Vec2.s_t0),z.p);A.Initialize(P,F,T,z,R);S.normal.Copy(A.normal);box2d.b2CrossVOne(S.normal,S.tangent);R=S.pointCount;for(T=0;T<R;++T){P=S.points[T],box2d.b2SubVV(A.points[T],Q,P.rA),box2d.b2SubVV(A.points[T],C,P.rB),I=box2d.b2CrossVV(P.rA,S.normal),H=box2d.b2CrossVV(P.rB,S.normal),I=N+L+K*I*I+J*H*H,P.normalMass=0<I?1/I:0,H=S.tangent,I=box2d.b2CrossVV(P.rA,H),H=box2d.b2CrossVV(P.rB,H),I=N+L+K*I*I+J*H*H,P.tangentMass=0<I?1/I:0,P.velocityBias=0,I=box2d.b2DotVV(S.normal,box2d.b2SubVV(box2d.b2AddVCrossSV(j,M,P.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(G,O,P.rA,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0)),I<-box2d.b2_velocityThreshold&&(P.velocityBias+=-S.restitution*I)}2==S.pointCount&&(G=S.points[0],C=S.points[1],Q=box2d.b2CrossVV(G.rA,S.normal),G=box2d.b2CrossVV(G.rB,S.normal),O=box2d.b2CrossVV(C.rA,S.normal),M=box2d.b2CrossVV(C.rB,S.normal),C=N+L+K*Q*Q+J*G*G,j=N+L+K*O*O+J*M*M,N=N+L+K*Q*O+J*G*M,C*C<1000*(C*j-N*N)?(S.K.ex.SetXY(C,N),S.K.ey.SetXY(N,j),S.K.GetInverse(S.normalMass)):S.pointCount=1)}};goog.exportProperty(box2d.b2ContactSolver.prototype,"InitializeVelocityConstraints",box2d.b2ContactSolver.prototype.InitializeVelocityConstraints);box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfA=new box2d.b2Transform;box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfB=new box2d.b2Transform;box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_worldManifold=new box2d.b2WorldManifold;box2d.b2ContactSolver.prototype.WarmStart=function(){var P,O,N,L,M,K,J,I,G,H,F,E,D,C,B,z,A,y,j=box2d.b2ContactSolver.prototype.WarmStart.s_P;P=0;for(O=this.m_count;P<O;++P){M=this.m_velocityConstraints[P];K=M.indexA;J=M.indexB;I=M.invMassA;G=M.invIA;H=M.invMassB;F=M.invIB;L=M.pointCount;E=this.m_velocities[K].v;D=this.m_velocities[K].w;C=this.m_velocities[J].v;B=this.m_velocities[J].w;z=M.normal;A=M.tangent;for(N=0;N<L;++N){y=M.points[N],box2d.b2AddVV(box2d.b2MulSV(y.normalImpulse,z,box2d.b2Vec2.s_t0),box2d.b2MulSV(y.tangentImpulse,A,box2d.b2Vec2.s_t1),j),D-=G*box2d.b2CrossVV(y.rA,j),E.SelfMulSub(I,j),B+=F*box2d.b2CrossVV(y.rB,j),C.SelfMulAdd(H,j)}this.m_velocities[K].w=D;this.m_velocities[J].w=B}};goog.exportProperty(box2d.b2ContactSolver.prototype,"WarmStart",box2d.b2ContactSolver.prototype.WarmStart);box2d.b2ContactSolver.prototype.WarmStart.s_P=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints=function(){var an,am,al,aj,ak,ai,ah,ag,ae,af,ad,ac,ab,Z,X,T,V,R,P,J=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv,U=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv1,L=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv2,N,W,aa=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P,S=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_a,Y=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_b,j=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_x,O=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_d,Q=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1,M=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P2,K=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1P2;an=0;for(am=this.m_count;an<am;++an){ak=this.m_velocityConstraints[an];ai=ak.indexA;ah=ak.indexB;ag=ak.invMassA;ae=ak.invIA;af=ak.invMassB;ad=ak.invIB;ac=ak.pointCount;ab=this.m_velocities[ai].v;Z=this.m_velocities[ai].w;X=this.m_velocities[ah].v;T=this.m_velocities[ah].w;V=ak.normal;R=ak.tangent;P=ak.friction;box2d.ENABLE_ASSERTS&&box2d.b2Assert(1==ac||2==ac);al=0;for(aj=ac;al<aj;++al){ac=ak.points[al],box2d.b2SubVV(box2d.b2AddVCrossSV(X,T,ac.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(ab,Z,ac.rA,box2d.b2Vec2.s_t1),J),N=box2d.b2DotVV(J,R)-ak.tangentSpeed,N=ac.tangentMass*-N,W=P*ac.normalImpulse,W=box2d.b2Clamp(ac.tangentImpulse+N,-W,W),N=W-ac.tangentImpulse,ac.tangentImpulse=W,box2d.b2MulSV(N,R,aa),ab.SelfMulSub(ag,aa),Z-=ae*box2d.b2CrossVV(ac.rA,aa),X.SelfMulAdd(af,aa),T+=ad*box2d.b2CrossVV(ac.rB,aa)}if(1==ak.pointCount){ac=ak.points[0],box2d.b2SubVV(box2d.b2AddVCrossSV(X,T,ac.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(ab,Z,ac.rA,box2d.b2Vec2.s_t1),J),ak=box2d.b2DotVV(J,V),N=-ac.normalMass*(ak-ac.velocityBias),W=box2d.b2Max(ac.normalImpulse+N,0),N=W-ac.normalImpulse,ac.normalImpulse=W,box2d.b2MulSV(N,V,aa),ab.SelfMulSub(ag,aa),Z-=ae*box2d.b2CrossVV(ac.rA,aa),X.SelfMulAdd(af,aa),T+=ad*box2d.b2CrossVV(ac.rB,aa)}else{for(al=ak.points[0],R=ak.points[1],S.SetXY(al.normalImpulse,R.normalImpulse),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=S.x&&0<=S.y),box2d.b2SubVV(box2d.b2AddVCrossSV(X,T,al.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(ab,Z,al.rA,box2d.b2Vec2.s_t1),U),box2d.b2SubVV(box2d.b2AddVCrossSV(X,T,R.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(ab,Z,R.rA,box2d.b2Vec2.s_t1),L),P=box2d.b2DotVV(U,V),ac=box2d.b2DotVV(L,V),Y.x=P-al.velocityBias,Y.y=ac-R.velocityBias,Y.SelfSub(box2d.b2MulMV(ak.K,S,box2d.b2Vec2.s_t0));;){box2d.b2MulMV(ak.normalMass,Y,j).SelfNeg();if(0<=j.x&&0<=j.y){box2d.b2SubVV(j,S,O);box2d.b2MulSV(O.x,V,Q);box2d.b2MulSV(O.y,V,M);box2d.b2AddVV(Q,M,K);ab.SelfMulSub(ag,K);Z-=ae*(box2d.b2CrossVV(al.rA,Q)+box2d.b2CrossVV(R.rA,M));X.SelfMulAdd(af,K);T+=ad*(box2d.b2CrossVV(al.rB,Q)+box2d.b2CrossVV(R.rB,M));al.normalImpulse=j.x;R.normalImpulse=j.y;break}j.x=-al.normalMass*Y.x;j.y=0;ac=ak.K.ex.y*j.x+Y.y;if(0<=j.x&&0<=ac){box2d.b2SubVV(j,S,O);box2d.b2MulSV(O.x,V,Q);box2d.b2MulSV(O.y,V,M);box2d.b2AddVV(Q,M,K);ab.SelfMulSub(ag,K);Z-=ae*(box2d.b2CrossVV(al.rA,Q)+box2d.b2CrossVV(R.rA,M));X.SelfMulAdd(af,K);T+=ad*(box2d.b2CrossVV(al.rB,Q)+box2d.b2CrossVV(R.rB,M));al.normalImpulse=j.x;R.normalImpulse=j.y;break}j.x=0;j.y=-R.normalMass*Y.y;P=ak.K.ey.x*j.y+Y.x;if(0<=j.y&&0<=P){box2d.b2SubVV(j,S,O);box2d.b2MulSV(O.x,V,Q);box2d.b2MulSV(O.y,V,M);box2d.b2AddVV(Q,M,K);ab.SelfMulSub(ag,K);Z-=ae*(box2d.b2CrossVV(al.rA,Q)+box2d.b2CrossVV(R.rA,M));X.SelfMulAdd(af,K);T+=ad*(box2d.b2CrossVV(al.rB,Q)+box2d.b2CrossVV(R.rB,M));al.normalImpulse=j.x;R.normalImpulse=j.y;break}j.x=0;j.y=0;P=Y.x;ac=Y.y;if(0<=P&&0<=ac){box2d.b2SubVV(j,S,O);box2d.b2MulSV(O.x,V,Q);box2d.b2MulSV(O.y,V,M);box2d.b2AddVV(Q,M,K);ab.SelfMulSub(ag,K);Z-=ae*(box2d.b2CrossVV(al.rA,Q)+box2d.b2CrossVV(R.rA,M));X.SelfMulAdd(af,K);T+=ad*(box2d.b2CrossVV(al.rB,Q)+box2d.b2CrossVV(R.rB,M));al.normalImpulse=j.x;R.normalImpulse=j.y;break}break}}this.m_velocities[ai].w=Z;this.m_velocities[ah].w=T}};goog.exportProperty(box2d.b2ContactSolver.prototype,"SolveVelocityConstraints",box2d.b2ContactSolver.prototype.SolveVelocityConstraints);box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv1=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv2=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_a=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_b=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_x=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_d=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P2=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1P2=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.StoreImpulses=function(){var j,g,q,m,n,k;j=0;for(g=this.m_count;j<g;++j){for(n=this.m_velocityConstraints[j],k=this.m_contacts[n.contactIndex].GetManifold(),q=0,m=n.pointCount;q<m;++q){k.points[q].normalImpulse=n.points[q].normalImpulse,k.points[q].tangentImpulse=n.points[q].tangentImpulse}}};goog.exportProperty(box2d.b2ContactSolver.prototype,"StoreImpulses",box2d.b2ContactSolver.prototype.StoreImpulses);box2d.b2PositionSolverManifold=function(){this.normal=new box2d.b2Vec2;this.point=new box2d.b2Vec2};goog.exportSymbol("box2d.b2PositionSolverManifold",box2d.b2PositionSolverManifold);box2d.b2PositionSolverManifold.prototype.normal=null;goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"normal",box2d.b2PositionSolverManifold.prototype.normal);box2d.b2PositionSolverManifold.prototype.point=null;goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"point",box2d.b2PositionSolverManifold.prototype.point);box2d.b2PositionSolverManifold.prototype.separation=0;goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"separation",box2d.b2PositionSolverManifold.prototype.separation);box2d.b2PositionSolverManifold.prototype.Initialize=function(k,j,u,r){var s=box2d.b2PositionSolverManifold.prototype.Initialize.s_pointA,q=box2d.b2PositionSolverManifold.prototype.Initialize.s_pointB,n=box2d.b2PositionSolverManifold.prototype.Initialize.s_planePoint,m=box2d.b2PositionSolverManifold.prototype.Initialize.s_clipPoint;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<k.pointCount);switch(k.type){case box2d.b2ManifoldType.e_circles:box2d.b2MulXV(j,k.localPoint,s);box2d.b2MulXV(u,k.localPoints[0],q);box2d.b2SubVV(q,s,this.normal).SelfNormalize();box2d.b2MidVV(s,q,this.point);this.separation=box2d.b2DotVV(box2d.b2SubVV(q,s,box2d.b2Vec2.s_t0),this.normal)-k.radiusA-k.radiusB;break;case box2d.b2ManifoldType.e_faceA:box2d.b2MulRV(j.q,k.localNormal,this.normal);box2d.b2MulXV(j,k.localPoint,n);box2d.b2MulXV(u,k.localPoints[r],m);this.separation=box2d.b2DotVV(box2d.b2SubVV(m,n,box2d.b2Vec2.s_t0),this.normal)-k.radiusA-k.radiusB;this.point.Copy(m);break;case box2d.b2ManifoldType.e_faceB:box2d.b2MulRV(u.q,k.localNormal,this.normal),box2d.b2MulXV(u,k.localPoint,n),box2d.b2MulXV(j,k.localPoints[r],m),this.separation=box2d.b2DotVV(box2d.b2SubVV(m,n,box2d.b2Vec2.s_t0),this.normal)-k.radiusA-k.radiusB,this.point.Copy(m),this.normal.SelfNeg()}};goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"Initialize",box2d.b2PositionSolverManifold.prototype.Initialize);box2d.b2PositionSolverManifold.prototype.Initialize.s_pointA=new box2d.b2Vec2;box2d.b2PositionSolverManifold.prototype.Initialize.s_pointB=new box2d.b2Vec2;box2d.b2PositionSolverManifold.prototype.Initialize.s_planePoint=new box2d.b2Vec2;box2d.b2PositionSolverManifold.prototype.Initialize.s_clipPoint=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolvePositionConstraints=function(){var af,ae,ad,ab,ac,aa,Z,Y,W,X,V,U,T,R,P,L,N,J=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfA,I=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfB,F=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_psm,M,G,H,O=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rA,S=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rB,K,Q=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_P,j=0;af=0;for(ae=this.m_count;af<ae;++af){ac=this.m_positionConstraints[af];aa=ac.indexA;Z=ac.indexB;Y=ac.localCenterA;W=ac.invMassA;X=ac.invIA;V=ac.localCenterB;U=ac.invMassB;T=ac.invIB;ab=ac.pointCount;R=this.m_positions[aa].c;P=this.m_positions[aa].a;L=this.m_positions[Z].c;N=this.m_positions[Z].a;for(ad=0;ad<ab;++ad){J.q.SetAngleRadians(P),I.q.SetAngleRadians(N),box2d.b2SubVV(R,box2d.b2MulRV(J.q,Y,box2d.b2Vec2.s_t0),J.p),box2d.b2SubVV(L,box2d.b2MulRV(I.q,V,box2d.b2Vec2.s_t0),I.p),F.Initialize(ac,J,I,ad),M=F.normal,G=F.point,H=F.separation,box2d.b2SubVV(G,R,O),box2d.b2SubVV(G,L,S),j=box2d.b2Min(j,H),G=box2d.b2Clamp(box2d.b2_baumgarte*(H+box2d.b2_linearSlop),-box2d.b2_maxLinearCorrection,0),H=box2d.b2CrossVV(O,M),K=box2d.b2CrossVV(S,M),H=W+U+X*H*H+T*K*K,G=0<H?-G/H:0,box2d.b2MulSV(G,M,Q),R.SelfMulSub(W,Q),P-=X*box2d.b2CrossVV(O,Q),L.SelfMulAdd(U,Q),N+=T*box2d.b2CrossVV(S,Q)}this.m_positions[aa].a=P;this.m_positions[Z].a=N}return j>-3*box2d.b2_linearSlop};goog.exportProperty(box2d.b2ContactSolver.prototype,"SolvePositionConstraints",box2d.b2ContactSolver.prototype.SolvePositionConstraints);box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfA=new box2d.b2Transform;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfB=new box2d.b2Transform;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_psm=new box2d.b2PositionSolverManifold;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rA=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rB=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints=function(aj,ai){var ah,af,ag,ae,ad,ac,aa,ab,Z,Y,X,V,T,P,R,N,L,H=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfA,Q=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfB,I=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_psm,J,S,W,O=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rA,U=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rB,j,K=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_P,M=0;ah=0;for(af=this.m_count;ah<af;++ah){ad=this.m_positionConstraints[ah];ac=ad.indexA;aa=ad.indexB;ab=ad.localCenterA;Z=ad.localCenterB;ae=ad.pointCount;X=Y=0;if(ac==aj||ac==ai){Y=ad.invMassA,X=ad.invIA}T=V=0;if(aa==aj||aa==ai){V=ad.invMassB,T=ad.invIB}P=this.m_positions[ac].c;R=this.m_positions[ac].a;N=this.m_positions[aa].c;L=this.m_positions[aa].a;for(ag=0;ag<ae;++ag){H.q.SetAngleRadians(R),Q.q.SetAngleRadians(L),box2d.b2SubVV(P,box2d.b2MulRV(H.q,ab,box2d.b2Vec2.s_t0),H.p),box2d.b2SubVV(N,box2d.b2MulRV(Q.q,Z,box2d.b2Vec2.s_t0),Q.p),I.Initialize(ad,H,Q,ag),J=I.normal,S=I.point,W=I.separation,box2d.b2SubVV(S,P,O),box2d.b2SubVV(S,N,U),M=box2d.b2Min(M,W),S=box2d.b2Clamp(box2d.b2_toiBaumgarte*(W+box2d.b2_linearSlop),-box2d.b2_maxLinearCorrection,0),W=box2d.b2CrossVV(O,J),j=box2d.b2CrossVV(U,J),W=Y+V+X*W*W+T*j*j,S=0<W?-S/W:0,box2d.b2MulSV(S,J,K),P.SelfMulSub(Y,K),R-=X*box2d.b2CrossVV(O,K),N.SelfMulAdd(V,K),L+=T*box2d.b2CrossVV(U,K)}this.m_positions[ac].a=R;this.m_positions[aa].a=L}return M>=-1.5*box2d.b2_linearSlop};goog.exportProperty(box2d.b2ContactSolver.prototype,"SolveTOIPositionConstraints",box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints);box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfA=new box2d.b2Transform;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfB=new box2d.b2Transform;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_psm=new box2d.b2PositionSolverManifold;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rA=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rB=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_P=new box2d.b2Vec2;box2d.b2WorldCallbacks={};box2d.b2DestructionListener=function(){};goog.exportSymbol("box2d.b2DestructionListener",box2d.b2DestructionListener);box2d.b2DestructionListener.prototype.SayGoodbyeJoint=function(b){};goog.exportProperty(box2d.b2DestructionListener.prototype,"SayGoodbyeJoint",box2d.b2DestructionListener.prototype.SayGoodbyeJoint);box2d.b2DestructionListener.prototype.SayGoodbyeFixture=function(b){};goog.exportProperty(box2d.b2DestructionListener.prototype,"SayGoodbyeFixture",box2d.b2DestructionListener.prototype.SayGoodbyeFixture);box2d.b2ContactFilter=function(){};goog.exportSymbol("box2d.b2ContactFilter",box2d.b2ContactFilter);box2d.b2ContactFilter.prototype.ShouldCollide=function(f,d){var j=f.GetFilterData(),g=d.GetFilterData();return j.groupIndex==g.groupIndex&&0!=j.groupIndex?0<j.groupIndex:0!=(j.maskBits&g.categoryBits)&&0!=(j.categoryBits&g.maskBits)};goog.exportProperty(box2d.b2ContactFilter.prototype,"ShouldCollide",box2d.b2ContactFilter.prototype.ShouldCollide);box2d.b2ContactFilter.b2_defaultFilter=new box2d.b2ContactFilter;box2d.b2ContactImpulse=function(){this.normalImpulses=box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints);this.tangentImpulses=box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints)};goog.exportSymbol("box2d.b2ContactImpulse",box2d.b2ContactImpulse);box2d.b2ContactImpulse.prototype.normalImpulses=null;box2d.b2ContactImpulse.prototype.tangentImpulses=null;box2d.b2ContactImpulse.prototype.count=0;box2d.b2ContactListener=function(){};goog.exportSymbol("box2d.b2ContactListener",box2d.b2ContactListener);box2d.b2ContactListener.prototype.BeginContact=function(b){};goog.exportProperty(box2d.b2ContactListener.prototype,"BeginContact",box2d.b2ContactListener.prototype.BeginContact);box2d.b2ContactListener.prototype.EndContact=function(b){};goog.exportProperty(box2d.b2ContactListener.prototype,"EndContact",box2d.b2ContactListener.prototype.EndContact);box2d.b2ContactListener.prototype.PreSolve=function(e,d){};goog.exportProperty(box2d.b2ContactListener.prototype,"PreSolve",box2d.b2ContactListener.prototype.PreSolve);box2d.b2ContactListener.prototype.PostSolve=function(e,d){};goog.exportProperty(box2d.b2ContactListener.prototype,"PostSolve",box2d.b2ContactListener.prototype.PostSolve);box2d.b2ContactListener.b2_defaultListener=new box2d.b2ContactListener;goog.exportProperty(box2d.b2ContactListener,"b2_defaultListener",box2d.b2ContactListener.b2_defaultListener);box2d.b2QueryCallback=function(){};goog.exportSymbol("box2d.b2QueryCallback",box2d.b2QueryCallback);box2d.b2QueryCallback.prototype.ReportFixture=function(b){return !0};goog.exportProperty(box2d.b2QueryCallback.prototype,"ReportFixture",box2d.b2QueryCallback.prototype.ReportFixture);box2d.b2RayCastCallback=function(){};goog.exportSymbol("box2d.b2RayCastCallback",box2d.b2RayCastCallback);box2d.b2RayCastCallback.prototype.ReportFixture=function(f,d,j,g){return g};goog.exportProperty(box2d.b2RayCastCallback.prototype,"ReportFixture",box2d.b2RayCastCallback.prototype.ReportFixture);box2d.b2Island=function(){this.m_bodies=Array(1024);this.m_contacts=Array(1024);this.m_joints=Array(1024);this.m_positions=box2d.b2Position.MakeArray(1024);this.m_velocities=box2d.b2Velocity.MakeArray(1024)};goog.exportSymbol("box2d.b2Island",box2d.b2Island);box2d.b2Island.prototype.m_allocator=null;goog.exportProperty(box2d.b2Island.prototype,"m_allocator",box2d.b2Island.prototype.m_allocator);box2d.b2Island.prototype.m_listener=null;goog.exportProperty(box2d.b2Island.prototype,"m_listener",box2d.b2Island.prototype.m_listener);box2d.b2Island.prototype.m_bodies=null;goog.exportProperty(box2d.b2Island.prototype,"m_bodies",box2d.b2Island.prototype.m_bodies);box2d.b2Island.prototype.m_contacts=null;goog.exportProperty(box2d.b2Island.prototype,"m_contacts",box2d.b2Island.prototype.m_contacts);box2d.b2Island.prototype.m_joints=null;goog.exportProperty(box2d.b2Island.prototype,"m_joints",box2d.b2Island.prototype.m_joints);box2d.b2Island.prototype.m_positions=null;goog.exportProperty(box2d.b2Island.prototype,"m_positions",box2d.b2Island.prototype.m_positions);box2d.b2Island.prototype.m_velocities=null;goog.exportProperty(box2d.b2Island.prototype,"m_velocities",box2d.b2Island.prototype.m_velocities);box2d.b2Island.prototype.m_bodyCount=0;goog.exportProperty(box2d.b2Island.prototype,"m_bodyCount",box2d.b2Island.prototype.m_bodyCount);box2d.b2Island.prototype.m_jointCount=0;goog.exportProperty(box2d.b2Island.prototype,"m_jointCount",box2d.b2Island.prototype.m_jointCount);box2d.b2Island.prototype.m_contactCount=0;goog.exportProperty(box2d.b2Island.prototype,"m_contactCount",box2d.b2Island.prototype.m_contactCount);box2d.b2Island.prototype.m_bodyCapacity=0;goog.exportProperty(box2d.b2Island.prototype,"m_bodyCapacity",box2d.b2Island.prototype.m_bodyCapacity);box2d.b2Island.prototype.m_contactCapacity=0;goog.exportProperty(box2d.b2Island.prototype,"m_contactCapacity",box2d.b2Island.prototype.m_contactCapacity);box2d.b2Island.prototype.m_jointCapacity=0;goog.exportProperty(box2d.b2Island.prototype,"m_jointCapacity",box2d.b2Island.prototype.m_jointCapacity);box2d.b2Island.prototype.Initialize=function(g,f,m,j,k){this.m_bodyCapacity=g;this.m_contactCapacity=f;this.m_jointCapacity=m;this.m_jointCount=this.m_contactCount=this.m_bodyCount=0;this.m_allocator=j;for(this.m_listener=k;this.m_bodies.length<g;){this.m_bodies[this.m_bodies.length]=null}for(;this.m_contacts.length<f;){this.m_contacts[this.m_contacts.length]=null}for(;this.m_joints.length<m;){this.m_joints[this.m_joints.length]=null}if(this.m_positions.length<g){for(f=box2d.b2Max(2*this.m_positions.length,g),box2d.DEBUG&&window.console.log("box2d.b2Island.m_positions: "+f);this.m_positions.length<f;){this.m_positions[this.m_positions.length]=new box2d.b2Position}}if(this.m_velocities.length<g){for(f=box2d.b2Max(2*this.m_velocities.length,g),box2d.DEBUG&&window.console.log("box2d.b2Island.m_velocities: "+f);this.m_velocities.length<f;){this.m_velocities[this.m_velocities.length]=new box2d.b2Velocity}}};goog.exportProperty(box2d.b2Island.prototype,"Initialize",box2d.b2Island.prototype.Initialize);box2d.b2Island.prototype.Clear=function(){this.m_jointCount=this.m_contactCount=this.m_bodyCount=0};goog.exportProperty(box2d.b2Island.prototype,"Clear",box2d.b2Island.prototype.Clear);box2d.b2Island.prototype.AddBody=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_bodyCount<this.m_bodyCapacity);b.m_islandIndex=this.m_bodyCount;this.m_bodies[this.m_bodyCount++]=b};goog.exportProperty(box2d.b2Island.prototype,"AddBody",box2d.b2Island.prototype.AddBody);box2d.b2Island.prototype.AddContact=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_contactCount<this.m_contactCapacity);this.m_contacts[this.m_contactCount++]=b};goog.exportProperty(box2d.b2Island.prototype,"AddContact",box2d.b2Island.prototype.AddContact);box2d.b2Island.prototype.AddJoint=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_jointCount<this.m_jointCapacity);this.m_joints[this.m_jointCount++]=b};goog.exportProperty(box2d.b2Island.prototype,"AddJoint",box2d.b2Island.prototype.AddJoint);box2d.b2Island.prototype.Solve=function(E,D,C,A){for(var B=box2d.b2Island.s_timer.Reset(),z=D.dt,y=0;y<this.m_bodyCount;++y){var v=this.m_bodies[y],s=this.m_positions[y].c.Copy(v.m_sweep.c),u=v.m_sweep.a,r=this.m_velocities[y].v.Copy(v.m_linearVelocity),q=v.m_angularVelocity;v.m_sweep.c0.Copy(v.m_sweep.c);v.m_sweep.a0=v.m_sweep.a;v.m_type==box2d.b2BodyType.b2_dynamicBody&&(r.x+=z*(v.m_gravityScale*C.x+v.m_invMass*v.m_force.x),r.y+=z*(v.m_gravityScale*C.y+v.m_invMass*v.m_force.y),q+=z*v.m_invI*v.m_torque,r.SelfMul(box2d.b2Clamp(1-z*v.m_linearDamping,0,1)),q*=box2d.b2Clamp(1-z*v.m_angularDamping,0,1));this.m_positions[y].a=u;this.m_velocities[y].w=q}B.Reset();v=box2d.b2Island.s_solverData;v.step.Copy(D);v.positions=this.m_positions;v.velocities=this.m_velocities;y=box2d.b2Island.s_contactSolverDef;y.step.Copy(D);y.contacts=this.m_contacts;y.count=this.m_contactCount;y.positions=this.m_positions;y.velocities=this.m_velocities;y.allocator=this.m_allocator;C=box2d.b2Island.s_contactSolver.Initialize(y);C.InitializeVelocityConstraints();D.warmStarting&&C.WarmStart();for(y=0;y<this.m_jointCount;++y){this.m_joints[y].InitVelocityConstraints(v)}E.solveInit=B.GetMilliseconds();B.Reset();for(y=0;y<D.velocityIterations;++y){for(u=0;u<this.m_jointCount;++u){this.m_joints[u].SolveVelocityConstraints(v)}C.SolveVelocityConstraints()}C.StoreImpulses();E.solveVelocity=B.GetMilliseconds();for(y=0;y<this.m_bodyCount;++y){var s=this.m_positions[y].c,u=this.m_positions[y].a,r=this.m_velocities[y].v,q=this.m_velocities[y].w,j=box2d.b2MulSV(z,r,box2d.b2Island.s_translation);box2d.b2DotVV(j,j)>box2d.b2_maxTranslationSquared&&(j=box2d.b2_maxTranslation/j.GetLength(),r.SelfMul(j));j=z*q;j*j>box2d.b2_maxRotationSquared&&(j=box2d.b2_maxRotation/box2d.b2Abs(j),q*=j);s.x+=z*r.x;s.y+=z*r.y;u+=z*q;this.m_positions[y].a=u;this.m_velocities[y].w=q}B.Reset();s=!1;for(y=0;y<D.positionIterations;++y){r=C.SolvePositionConstraints();q=!0;for(u=0;u<this.m_jointCount;++u){j=this.m_joints[u].SolvePositionConstraints(v),q=q&&j}if(r&&q){s=!0;break}}for(y=0;y<this.m_bodyCount;++y){D=this.m_bodies[y],D.m_sweep.c.Copy(this.m_positions[y].c),D.m_sweep.a=this.m_positions[y].a,D.m_linearVelocity.Copy(this.m_velocities[y].v),D.m_angularVelocity=this.m_velocities[y].w,D.SynchronizeTransform()}E.solvePosition=B.GetMilliseconds();this.Report(C.m_velocityConstraints);if(A){E=box2d.b2_maxFloat;A=box2d.b2_linearSleepTolerance*box2d.b2_linearSleepTolerance;B=box2d.b2_angularSleepTolerance*box2d.b2_angularSleepTolerance;for(y=0;y<this.m_bodyCount;++y){v=this.m_bodies[y],v.GetType()!=box2d.b2BodyType.b2_staticBody&&(0==(v.m_flags&box2d.b2BodyFlag.e_autoSleepFlag)||v.m_angularVelocity*v.m_angularVelocity>B||box2d.b2DotVV(v.m_linearVelocity,v.m_linearVelocity)>A?E=v.m_sleepTime=0:(v.m_sleepTime+=z,E=box2d.b2Min(E,v.m_sleepTime)))}if(E>=box2d.b2_timeToSleep&&s){for(y=0;y<this.m_bodyCount;++y){v=this.m_bodies[y],v.SetAwake(!1)}}}};goog.exportProperty(box2d.b2Island.prototype,"Solve",box2d.b2Island.prototype.Solve);box2d.b2Island.prototype.SolveTOI=function(k,j,u){box2d.ENABLE_ASSERTS&&box2d.b2Assert(j<this.m_bodyCount);box2d.ENABLE_ASSERTS&&box2d.b2Assert(u<this.m_bodyCount);for(var r=0;r<this.m_bodyCount;++r){var s=this.m_bodies[r];this.m_positions[r].c.Copy(s.m_sweep.c);this.m_positions[r].a=s.m_sweep.a;this.m_velocities[r].v.Copy(s.m_linearVelocity);this.m_velocities[r].w=s.m_angularVelocity}r=box2d.b2Island.s_contactSolverDef;r.contacts=this.m_contacts;r.count=this.m_contactCount;r.allocator=this.m_allocator;r.step.Copy(k);r.positions=this.m_positions;r.velocities=this.m_velocities;s=box2d.b2Island.s_contactSolver.Initialize(r);for(r=0;r<k.positionIterations&&!s.SolveTOIPositionConstraints(j,u);++r){}this.m_bodies[j].m_sweep.c0.Copy(this.m_positions[j].c);this.m_bodies[j].m_sweep.a0=this.m_positions[j].a;this.m_bodies[u].m_sweep.c0.Copy(this.m_positions[u].c);this.m_bodies[u].m_sweep.a0=this.m_positions[u].a;s.InitializeVelocityConstraints();for(r=0;r<k.velocityIterations;++r){s.SolveVelocityConstraints()}k=k.dt;for(r=0;r<this.m_bodyCount;++r){j=this.m_positions[r].c;u=this.m_positions[r].a;var q=this.m_velocities[r].v,n=this.m_velocities[r].w,m=box2d.b2MulSV(k,q,box2d.b2Island.s_translation);box2d.b2DotVV(m,m)>box2d.b2_maxTranslationSquared&&(m=box2d.b2_maxTranslation/m.GetLength(),q.SelfMul(m));m=k*n;m*m>box2d.b2_maxRotationSquared&&(m=box2d.b2_maxRotation/box2d.b2Abs(m),n*=m);j.SelfMulAdd(k,q);u+=k*n;this.m_positions[r].a=u;this.m_velocities[r].w=n;m=this.m_bodies[r];m.m_sweep.c.Copy(j);m.m_sweep.a=u;m.m_linearVelocity.Copy(q);m.m_angularVelocity=n;m.SynchronizeTransform()}this.Report(s.m_velocityConstraints)};goog.exportProperty(box2d.b2Island.prototype,"SolveTOI",box2d.b2Island.prototype.SolveTOI);box2d.b2Island.prototype.Report=function(j){if(null!=this.m_listener){for(var g=0;g<this.m_contactCount;++g){var q=this.m_contacts[g];if(q){var m=j[g],n=box2d.b2Island.s_impulse;n.count=m.pointCount;for(var k=0;k<m.pointCount;++k){n.normalImpulses[k]=m.points[k].normalImpulse,n.tangentImpulses[k]=m.points[k].tangentImpulse}this.m_listener.PostSolve(q,n)}}}};goog.exportProperty(box2d.b2Island.prototype,"Report",box2d.b2Island.prototype.Report);box2d.b2Island.s_timer=new box2d.b2Timer;box2d.b2Island.s_solverData=new box2d.b2SolverData;box2d.b2Island.s_contactSolverDef=new box2d.b2ContactSolverDef;box2d.b2Island.s_contactSolver=new box2d.b2ContactSolver;box2d.b2Island.s_translation=new box2d.b2Vec2;box2d.b2Island.s_impulse=new box2d.b2ContactImpulse;box2d.b2ContactRegister=function(){};goog.exportSymbol("box2d.b2ContactRegister",box2d.b2ContactRegister);box2d.b2ContactRegister.prototype.createFcn=null;box2d.b2ContactRegister.prototype.destroyFcn=null;box2d.b2ContactRegister.prototype.primary=!1;box2d.b2ContactFactory=function(b){this.m_allocator=b;this.InitializeRegisters()};goog.exportSymbol("box2d.b2ContactFactory",box2d.b2ContactFactory);box2d.b2ContactFactory.prototype.m_allocator=null;box2d.b2ContactFactory.prototype.AddType=function(j,g,q,m){var n=box2d.b2MakeArray(256,function(a){return j()});g=function(a){return 0<n.length?n.pop():j(a)};var k=function(e,d){n.push(e)};this.m_registers[q][m].pool=n;this.m_registers[q][m].createFcn=g;this.m_registers[q][m].destroyFcn=k;this.m_registers[q][m].primary=!0;q!=m&&(this.m_registers[m][q].pool=n,this.m_registers[m][q].createFcn=g,this.m_registers[m][q].destroyFcn=k,this.m_registers[m][q].primary=!1)};goog.exportProperty(box2d.b2ContactFactory.prototype,"AddType",box2d.b2ContactFactory.prototype.AddType);box2d.b2ContactFactory.prototype.InitializeRegisters=function(){this.m_registers=Array(box2d.b2ShapeType.e_shapeTypeCount);for(var e=0;e<box2d.b2ShapeType.e_shapeTypeCount;e++){this.m_registers[e]=Array(box2d.b2ShapeType.e_shapeTypeCount);for(var d=0;d<box2d.b2ShapeType.e_shapeTypeCount;d++){this.m_registers[e][d]=new box2d.b2ContactRegister}}this.AddType(box2d.b2CircleContact.Create,box2d.b2CircleContact.Destroy,box2d.b2ShapeType.e_circleShape,box2d.b2ShapeType.e_circleShape);this.AddType(box2d.b2PolygonAndCircleContact.Create,box2d.b2PolygonAndCircleContact.Destroy,box2d.b2ShapeType.e_polygonShape,box2d.b2ShapeType.e_circleShape);this.AddType(box2d.b2PolygonContact.Create,box2d.b2PolygonContact.Destroy,box2d.b2ShapeType.e_polygonShape,box2d.b2ShapeType.e_polygonShape);this.AddType(box2d.b2EdgeAndCircleContact.Create,box2d.b2EdgeAndCircleContact.Destroy,box2d.b2ShapeType.e_edgeShape,box2d.b2ShapeType.e_circleShape);this.AddType(box2d.b2EdgeAndPolygonContact.Create,box2d.b2EdgeAndPolygonContact.Destroy,box2d.b2ShapeType.e_edgeShape,box2d.b2ShapeType.e_polygonShape);this.AddType(box2d.b2ChainAndCircleContact.Create,box2d.b2ChainAndCircleContact.Destroy,box2d.b2ShapeType.e_chainShape,box2d.b2ShapeType.e_circleShape);this.AddType(box2d.b2ChainAndPolygonContact.Create,box2d.b2ChainAndPolygonContact.Destroy,box2d.b2ShapeType.e_chainShape,box2d.b2ShapeType.e_polygonShape)};goog.exportProperty(box2d.b2ContactFactory.prototype,"InitializeRegisters",box2d.b2ContactFactory.prototype.InitializeRegisters);box2d.b2ContactFactory.prototype.Create=function(j,g,q,m){var n=j.GetType(),k=q.GetType();box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=n&&n<box2d.b2ShapeType.e_shapeTypeCount);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=k&&k<box2d.b2ShapeType.e_shapeTypeCount);n=this.m_registers[n][k];k=n.createFcn;return null!=k?(n.primary?(n=k(this.m_allocator),n.Reset(j,g,q,m)):(n=k(this.m_allocator),n.Reset(q,m,j,g)),n):null};goog.exportProperty(box2d.b2ContactFactory.prototype,"Create",box2d.b2ContactFactory.prototype.Create);box2d.b2ContactFactory.prototype.Destroy=function(e){var d=e.m_fixtureA,f=e.m_fixtureB;0<e.m_manifold.pointCount&&(!1==d.IsSensor()&&!1==f.IsSensor())&&(d.GetBody().SetAwake(!0),f.GetBody().SetAwake(!0));d=d.GetType();f=f.GetType();box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=d&&f<box2d.b2ShapeType.e_shapeTypeCount);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=d&&f<box2d.b2ShapeType.e_shapeTypeCount);f=this.m_registers[d][f].destroyFcn;f(e,this.m_allocator)};goog.exportProperty(box2d.b2ContactFactory.prototype,"Destroy",box2d.b2ContactFactory.prototype.Destroy);box2d.b2GrowableStack=function(b){this.m_stack=Array(b)};goog.exportSymbol("box2d.b2GrowableStack",box2d.b2GrowableStack);box2d.b2GrowableStack.prototype.m_stack=null;goog.exportProperty(box2d.b2GrowableStack.prototype,"m_stack",box2d.b2GrowableStack.prototype.m_stack);box2d.b2GrowableStack.prototype.m_count=0;goog.exportProperty(box2d.b2GrowableStack.prototype,"m_count",box2d.b2GrowableStack.prototype.m_count);box2d.b2GrowableStack.prototype.Reset=function(){this.m_count=0;return this};goog.exportProperty(box2d.b2GrowableStack.prototype,"Reset",box2d.b2GrowableStack.prototype.Reset);box2d.b2GrowableStack.prototype.Push=function(b){this.m_stack[this.m_count]=b;++this.m_count};goog.exportProperty(box2d.b2GrowableStack.prototype,"Push",box2d.b2GrowableStack.prototype.Push);box2d.b2GrowableStack.prototype.Pop=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_count);--this.m_count;var b=this.m_stack[this.m_count];this.m_stack[this.m_count]=null;return b};goog.exportProperty(box2d.b2GrowableStack.prototype,"Pop",box2d.b2GrowableStack.prototype.Pop);box2d.b2GrowableStack.prototype.GetCount=function(){return this.m_count};goog.exportProperty(box2d.b2GrowableStack.prototype,"GetCount",box2d.b2GrowableStack.prototype.GetCount);box2d.b2TreeNode=function(b){this.m_id=b||0;this.aabb=new box2d.b2AABB};goog.exportSymbol("box2d.b2TreeNode",box2d.b2TreeNode);box2d.b2TreeNode.prototype.m_id=0;goog.exportProperty(box2d.b2TreeNode.prototype,"m_id",box2d.b2TreeNode.prototype.m_id);box2d.b2TreeNode.prototype.aabb=null;goog.exportProperty(box2d.b2TreeNode.prototype,"aabb",box2d.b2TreeNode.prototype.aabb);box2d.b2TreeNode.prototype.userData=null;goog.exportProperty(box2d.b2TreeNode.prototype,"userData",box2d.b2TreeNode.prototype.userData);box2d.b2TreeNode.prototype.parent=null;goog.exportProperty(box2d.b2TreeNode.prototype,"parent",box2d.b2TreeNode.prototype.parent);box2d.b2TreeNode.prototype.child1=null;goog.exportProperty(box2d.b2TreeNode.prototype,"child1",box2d.b2TreeNode.prototype.child1);box2d.b2TreeNode.prototype.child2=null;goog.exportProperty(box2d.b2TreeNode.prototype,"child2",box2d.b2TreeNode.prototype.child2);box2d.b2TreeNode.prototype.height=0;goog.exportProperty(box2d.b2TreeNode.prototype,"height",box2d.b2TreeNode.prototype.height);box2d.b2TreeNode.prototype.IsLeaf=function(){return null==this.child1};goog.exportProperty(box2d.b2TreeNode.prototype,"IsLeaf",box2d.b2TreeNode.prototype.IsLeaf);box2d.b2DynamicTree=function(){};goog.exportSymbol("box2d.b2DynamicTree",box2d.b2DynamicTree);box2d.b2DynamicTree.prototype.m_root=null;goog.exportProperty(box2d.b2DynamicTree.prototype,"m_root",box2d.b2DynamicTree.prototype.m_root);box2d.b2DynamicTree.prototype.m_freeList=null;goog.exportProperty(box2d.b2DynamicTree.prototype,"m_freeList",box2d.b2DynamicTree.prototype.m_freeList);box2d.b2DynamicTree.prototype.m_path=0;goog.exportProperty(box2d.b2DynamicTree.prototype,"m_path",box2d.b2DynamicTree.prototype.m_path);box2d.b2DynamicTree.prototype.m_insertionCount=0;goog.exportProperty(box2d.b2DynamicTree.prototype,"m_insertionCount",box2d.b2DynamicTree.prototype.m_insertionCount);box2d.b2DynamicTree.s_stack=new box2d.b2GrowableStack(256);box2d.b2DynamicTree.s_r=new box2d.b2Vec2;box2d.b2DynamicTree.s_v=new box2d.b2Vec2;box2d.b2DynamicTree.s_abs_v=new box2d.b2Vec2;box2d.b2DynamicTree.s_segmentAABB=new box2d.b2AABB;box2d.b2DynamicTree.s_subInput=new box2d.b2RayCastInput;box2d.b2DynamicTree.s_combinedAABB=new box2d.b2AABB;box2d.b2DynamicTree.s_aabb=new box2d.b2AABB;box2d.b2DynamicTree.prototype.GetUserData=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!=b);return b.userData};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetUserData",box2d.b2DynamicTree.prototype.GetUserData);box2d.b2DynamicTree.prototype.GetFatAABB=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!=b);return b.aabb};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetFatAABB",box2d.b2DynamicTree.prototype.GetFatAABB);box2d.b2DynamicTree.prototype.Query=function(f,d){if(null!=this.m_root){var j=box2d.b2DynamicTree.s_stack.Reset();for(j.Push(this.m_root);0<j.GetCount();){var g=j.Pop();if(null!=g&&g.aabb.TestOverlap(d)){if(g.IsLeaf()){if(!1==f(g)){break}}else{j.Push(g.child1),j.Push(g.child2)}}}}};goog.exportProperty(box2d.b2DynamicTree.prototype,"Query",box2d.b2DynamicTree.prototype.Query);box2d.b2DynamicTree.prototype.RayCast=function(D,C){if(null!=this.m_root){var B=C.p1,z=C.p2,A=box2d.b2SubVV(z,B,box2d.b2DynamicTree.s_r);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<A.GetLengthSquared());A.Normalize();var A=box2d.b2CrossOneV(A,box2d.b2DynamicTree.s_v),y=box2d.b2AbsV(A,box2d.b2DynamicTree.s_abs_v),v=C.maxFraction,u=box2d.b2DynamicTree.s_segmentAABB,r=B.x+v*(z.x-B.x),s=B.y+v*(z.y-B.y);u.lowerBound.x=box2d.b2Min(B.x,r);u.lowerBound.y=box2d.b2Min(B.y,s);u.upperBound.x=box2d.b2Max(B.x,r);u.upperBound.y=box2d.b2Max(B.y,s);var q=box2d.b2DynamicTree.s_stack.Reset();for(q.Push(this.m_root);0<q.GetCount();){if(r=q.Pop(),null!=r&&!1!=box2d.b2TestOverlapAABB(r.aabb,u)){var s=r.aabb.GetCenter(),j=r.aabb.GetExtents();if(!(0<box2d.b2Abs(box2d.b2DotVV(A,box2d.b2SubVV(B,s,box2d.b2Vec2.s_t0)))-box2d.b2DotVV(y,j))){if(r.IsLeaf()){s=box2d.b2DynamicTree.s_subInput;s.p1.Copy(C.p1);s.p2.Copy(C.p2);s.maxFraction=v;r=D(s,r);if(0==r){break}0<r&&(v=r,r=B.x+v*(z.x-B.x),s=B.y+v*(z.y-B.y),u.lowerBound.x=box2d.b2Min(B.x,r),u.lowerBound.y=box2d.b2Min(B.y,s),u.upperBound.x=box2d.b2Max(B.x,r),u.upperBound.y=box2d.b2Max(B.y,s))}else{q.Push(r.child1),q.Push(r.child2)}}}}}};goog.exportProperty(box2d.b2DynamicTree.prototype,"RayCast",box2d.b2DynamicTree.prototype.RayCast);box2d.b2DynamicTree.prototype.AllocateNode=function(){if(this.m_freeList){var b=this.m_freeList;this.m_freeList=b.parent;b.parent=null;b.child1=null;b.child2=null;b.height=0;b.userData=null;return b}return new box2d.b2TreeNode(box2d.b2DynamicTree.prototype.s_node_id++)};goog.exportProperty(box2d.b2DynamicTree.prototype,"AllocateNode",box2d.b2DynamicTree.prototype.AllocateNode);box2d.b2DynamicTree.prototype.s_node_id=0;box2d.b2DynamicTree.prototype.FreeNode=function(b){b.parent=this.m_freeList;b.height=-1;this.m_freeList=b};goog.exportProperty(box2d.b2DynamicTree.prototype,"FreeNode",box2d.b2DynamicTree.prototype.FreeNode);box2d.b2DynamicTree.prototype.CreateProxy=function(g,f){var m=this.AllocateNode(),j=box2d.b2_aabbExtension,k=box2d.b2_aabbExtension;m.aabb.lowerBound.x=g.lowerBound.x-j;m.aabb.lowerBound.y=g.lowerBound.y-k;m.aabb.upperBound.x=g.upperBound.x+j;m.aabb.upperBound.y=g.upperBound.y+k;m.userData=f;m.height=0;this.InsertLeaf(m);return m};goog.exportProperty(box2d.b2DynamicTree.prototype,"CreateProxy",box2d.b2DynamicTree.prototype.CreateProxy);box2d.b2DynamicTree.prototype.DestroyProxy=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(b.IsLeaf());this.RemoveLeaf(b);this.FreeNode(b)};goog.exportProperty(box2d.b2DynamicTree.prototype,"DestroyProxy",box2d.b2DynamicTree.prototype.DestroyProxy);box2d.b2DynamicTree.prototype.MoveProxy=function(f,d,j){box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.IsLeaf());if(f.aabb.Contains(d)){return !1}this.RemoveLeaf(f);var g=box2d.b2_aabbExtension+box2d.b2_aabbMultiplier*(0<j.x?j.x:-j.x);j=box2d.b2_aabbExtension+box2d.b2_aabbMultiplier*(0<j.y?j.y:-j.y);f.aabb.lowerBound.x=d.lowerBound.x-g;f.aabb.lowerBound.y=d.lowerBound.y-j;f.aabb.upperBound.x=d.upperBound.x+g;f.aabb.upperBound.y=d.upperBound.y+j;this.InsertLeaf(f);return !0};goog.exportProperty(box2d.b2DynamicTree.prototype,"MoveProxy",box2d.b2DynamicTree.prototype.MoveProxy);box2d.b2DynamicTree.prototype.InsertLeaf=function(B){++this.m_insertionCount;if(null==this.m_root){this.m_root=B,this.m_root.parent=null}else{var A=B.aabb;A.GetCenter();for(var z=this.m_root,v,y;!1==z.IsLeaf();){v=z.child1;y=z.child2;var u=z.aabb.GetPerimeter(),s=box2d.b2DynamicTree.s_combinedAABB;s.Combine2(z.aabb,A);var r=s.GetPerimeter(),s=2*r,r=2*(r-u),n=box2d.b2DynamicTree.s_aabb,q,j;v.IsLeaf()?(n.Combine2(A,v.aabb),u=n.GetPerimeter()+r):(n.Combine2(A,v.aabb),q=v.aabb.GetPerimeter(),j=n.GetPerimeter(),u=j-q+r);y.IsLeaf()?(n.Combine2(A,y.aabb),r=n.GetPerimeter()+r):(n.Combine2(A,y.aabb),q=y.aabb.GetPerimeter(),j=n.GetPerimeter(),r=j-q+r);if(s<u&&s<r){break}z=u<r?v:y}v=z.parent;y=this.AllocateNode();y.parent=v;y.userData=null;y.aabb.Combine2(A,z.aabb);y.height=z.height+1;v?(v.child1==z?v.child1=y:v.child2=y,y.child1=z,y.child2=B,z.parent=y,B.parent=y):(y.child1=z,y.child2=B,z.parent=y,this.m_root=B.parent=y);for(z=B.parent;null!=z;){z=this.Balance(z),v=z.child1,y=z.child2,box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!=v),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!=y),z.height=1+box2d.b2Max(v.height,y.height),z.aabb.Combine2(v.aabb,y.aabb),z=z.parent}}};goog.exportProperty(box2d.b2DynamicTree.prototype,"InsertLeaf",box2d.b2DynamicTree.prototype.InsertLeaf);box2d.b2DynamicTree.prototype.RemoveLeaf=function(e){if(e==this.m_root){this.m_root=null}else{var d=e.parent,f=d.parent;e=d.child1==e?d.child2:d.child1;if(f){for(f.child1==d?f.child1=e:f.child2=e,e.parent=f,this.FreeNode(d),d=f;d;){d=this.Balance(d),f=d.child1,e=d.child2,d.aabb.Combine2(f.aabb,e.aabb),d.height=1+box2d.b2Max(f.height,e.height),d=d.parent}}else{this.m_root=e,e.parent=null,this.FreeNode(d)}}};goog.exportProperty(box2d.b2DynamicTree.prototype,"RemoveLeaf",box2d.b2DynamicTree.prototype.RemoveLeaf);box2d.b2DynamicTree.prototype.Balance=function(g){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!=g);if(g.IsLeaf()||2>g.height){return g}var f=g.child1,m=g.child2,j=m.height-f.height;if(1<j){var j=m.child1,k=m.child2;m.child1=g;m.parent=g.parent;g.parent=m;null!=m.parent?m.parent.child1==g?m.parent.child1=m:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(m.parent.child2==g),m.parent.child2=m):this.m_root=m;j.height>k.height?(m.child2=j,g.child2=k,k.parent=g,g.aabb.Combine2(f.aabb,k.aabb),m.aabb.Combine2(g.aabb,j.aabb),g.height=1+box2d.b2Max(f.height,k.height),m.height=1+box2d.b2Max(g.height,j.height)):(m.child2=k,g.child2=j,j.parent=g,g.aabb.Combine2(f.aabb,j.aabb),m.aabb.Combine2(g.aabb,k.aabb),g.height=1+box2d.b2Max(f.height,j.height),m.height=1+box2d.b2Max(g.height,k.height));return m}return -1>j?(j=f.child1,k=f.child2,f.child1=g,f.parent=g.parent,g.parent=f,null!=f.parent?f.parent.child1==g?f.parent.child1=f:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.parent.child2==g),f.parent.child2=f):this.m_root=f,j.height>k.height?(f.child2=j,g.child1=k,k.parent=g,g.aabb.Combine2(m.aabb,k.aabb),f.aabb.Combine2(g.aabb,j.aabb),g.height=1+box2d.b2Max(m.height,k.height),f.height=1+box2d.b2Max(g.height,j.height)):(f.child2=k,g.child1=j,j.parent=g,g.aabb.Combine2(m.aabb,j.aabb),f.aabb.Combine2(g.aabb,k.aabb),g.height=1+box2d.b2Max(m.height,j.height),f.height=1+box2d.b2Max(g.height,k.height)),f):g};goog.exportProperty(box2d.b2DynamicTree.prototype,"Balance",box2d.b2DynamicTree.prototype.Balance);box2d.b2DynamicTree.prototype.GetHeight=function(){return null==this.m_root?0:this.m_root.height};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetHeight",box2d.b2DynamicTree.prototype.GetHeight);box2d.b2DynamicTree.prototype.GetAreaRatio=function(){if(null==this.m_root){return 0}var e=this.m_root.aabb.GetPerimeter(),d=function(b){if(null==b||b.IsLeaf()){return 0}var f=b.aabb.GetPerimeter(),f=f+d(b.child1);return f+=d(b.child2)};return d(this.m_root)/e};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetAreaRatio",box2d.b2DynamicTree.prototype.GetAreaRatio);box2d.b2DynamicTree.prototype.ComputeHeightNode=function(e){if(e.IsLeaf()){return 0}var d=this.ComputeHeightNode(e.child1);e=this.ComputeHeightNode(e.child2);return 1+box2d.b2Max(d,e)};goog.exportProperty(box2d.b2DynamicTree.prototype,"ComputeHeightNode",box2d.b2DynamicTree.prototype.ComputeHeightNode);box2d.b2DynamicTree.prototype.ComputeHeight=function(){return this.ComputeHeightNode(this.m_root)};goog.exportProperty(box2d.b2DynamicTree.prototype,"ComputeHeight",box2d.b2DynamicTree.prototype.ComputeHeight);box2d.b2DynamicTree.prototype.ValidateStructure=function(e){if(null!=e){e==this.m_root&&box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==e.parent);var d=e.child1,f=e.child2;e.IsLeaf()?(box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==d),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==f),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0==e.height)):(box2d.ENABLE_ASSERTS&&box2d.b2Assert(d.parent==e),box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.parent==e),this.ValidateStructure(d),this.ValidateStructure(f))}};goog.exportProperty(box2d.b2DynamicTree.prototype,"ValidateStructure",box2d.b2DynamicTree.prototype.ValidateStructure);box2d.b2DynamicTree.prototype.ValidateMetrics=function(f){if(null!=f){var d=f.child1,j=f.child2;if(f.IsLeaf()){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==d),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==j),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0==f.height)}else{var g;g=1+box2d.b2Max(d.height,j.height);box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.height==g);g=box2d.b2DynamicTree.s_aabb;g.Combine2(d.aabb,j.aabb);box2d.ENABLE_ASSERTS&&box2d.b2Assert(g.lowerBound==f.aabb.lowerBound);box2d.ENABLE_ASSERTS&&box2d.b2Assert(g.upperBound==f.aabb.upperBound);this.ValidateMetrics(d);this.ValidateMetrics(j)}}};goog.exportProperty(box2d.b2DynamicTree.prototype,"ValidateMetrics",box2d.b2DynamicTree.prototype.ValidateMetrics);box2d.b2DynamicTree.prototype.Validate=function(){this.ValidateStructure(this.m_root);this.ValidateMetrics(this.m_root);for(var e=0,d=this.m_freeList;null!=d;){d=d.parent,++e}box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.GetHeight()==this.ComputeHeight())};goog.exportProperty(box2d.b2DynamicTree.prototype,"Validate",box2d.b2DynamicTree.prototype.Validate);box2d.b2DynamicTree.prototype.GetMaxBalance=function(){var b;b=this.m_root;null==b?b=0:1>=b.height?b=0:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==b.IsLeaf()),b=box2d.b2Abs(b.child2.height-b.child1.height),b=box2d.b2Max(0,b));return b};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetMaxBalance",box2d.b2DynamicTree.prototype.GetMaxBalance);box2d.b2DynamicTree.prototype.RebuildBottomUp=function(){this.Validate()};goog.exportProperty(box2d.b2DynamicTree.prototype,"RebuildBottomUp",box2d.b2DynamicTree.prototype.RebuildBottomUp);box2d.b2DynamicTree.prototype.ShiftOrigin=function(e){var d=function(b,f){if(null!=b&&!(1>=b.height)){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==b.IsLeaf());var g=b.child2;d(b.child1,f);d(g,f);b.aabb.lowerBound.SelfSub(f);b.aabb.upperBound.SelfSub(f)}};d(this.m_root,e)};goog.exportProperty(box2d.b2DynamicTree.prototype,"ShiftOrigin",box2d.b2DynamicTree.prototype.ShiftOrigin);box2d.b2Pair=function(){};goog.exportSymbol("box2d.b2Pair",box2d.b2Pair);box2d.b2Pair.prototype.proxyA=null;goog.exportProperty(box2d.b2Pair.prototype,"proxyA",box2d.b2Pair.prototype.proxyA);box2d.b2Pair.prototype.proxyB=null;goog.exportProperty(box2d.b2Pair.prototype,"proxyB",box2d.b2Pair.prototype.proxyB);box2d.b2BroadPhase=function(){this.m_tree=new box2d.b2DynamicTree;this.m_moveBuffer=[];this.m_pairBuffer=[]};goog.exportSymbol("box2d.b2BroadPhase",box2d.b2BroadPhase);box2d.b2BroadPhase.prototype.m_tree=null;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_tree",box2d.b2BroadPhase.prototype.m_tree);box2d.b2BroadPhase.prototype.m_proxyCount=0;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_proxyCount",box2d.b2BroadPhase.prototype.m_proxyCount);box2d.b2BroadPhase.prototype.m_moveCount=0;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_moveCount",box2d.b2BroadPhase.prototype.m_moveCount);box2d.b2BroadPhase.prototype.m_moveBuffer=null;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_moveBuffer",box2d.b2BroadPhase.prototype.m_moveBuffer);box2d.b2BroadPhase.prototype.m_pairCount=0;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_pairCount",box2d.b2BroadPhase.prototype.m_pairCount);box2d.b2BroadPhase.prototype.m_pairBuffer=null;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_pairBuffer",box2d.b2BroadPhase.prototype.m_pairBuffer);box2d.b2BroadPhase.prototype.CreateProxy=function(e,d){var f=this.m_tree.CreateProxy(e,d);++this.m_proxyCount;this.BufferMove(f);return f};goog.exportProperty(box2d.b2BroadPhase.prototype,"CreateProxy",box2d.b2BroadPhase.prototype.CreateProxy);box2d.b2BroadPhase.prototype.DestroyProxy=function(b){this.UnBufferMove(b);--this.m_proxyCount;this.m_tree.DestroyProxy(b)};goog.exportProperty(box2d.b2BroadPhase.prototype,"DestroyProxy",box2d.b2BroadPhase.prototype.DestroyProxy);box2d.b2BroadPhase.prototype.MoveProxy=function(e,d,f){this.m_tree.MoveProxy(e,d,f)&&this.BufferMove(e)};goog.exportProperty(box2d.b2BroadPhase.prototype,"MoveProxy",box2d.b2BroadPhase.prototype.MoveProxy);box2d.b2BroadPhase.prototype.TouchProxy=function(b){this.BufferMove(b)};goog.exportProperty(box2d.b2BroadPhase.prototype,"TouchProxy",box2d.b2BroadPhase.prototype.TouchProxy);box2d.b2BroadPhase.prototype.GetFatAABB=function(b){return this.m_tree.GetFatAABB(b)};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetFatAABB",box2d.b2BroadPhase.prototype.GetFatAABB);box2d.b2BroadPhase.prototype.GetUserData=function(b){return this.m_tree.GetUserData(b)};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetUserData",box2d.b2BroadPhase.prototype.GetUserData);box2d.b2BroadPhase.prototype.TestOverlap=function(f,d){var j=this.m_tree.GetFatAABB(f),g=this.m_tree.GetFatAABB(d);return box2d.b2TestOverlapAABB(j,g)};goog.exportProperty(box2d.b2BroadPhase.prototype,"TestOverlap",box2d.b2BroadPhase.prototype.TestOverlap);box2d.b2BroadPhase.prototype.GetProxyCount=function(){return this.m_proxyCount};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetProxyCount",box2d.b2BroadPhase.prototype.GetProxyCount);box2d.b2BroadPhase.prototype.GetTreeHeight=function(){return this.m_tree.GetHeight()};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetTreeHeight",box2d.b2BroadPhase.prototype.GetTreeHeight);box2d.b2BroadPhase.prototype.GetTreeBalance=function(){return this.m_tree.GetMaxBalance()};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetTreeBalance",box2d.b2BroadPhase.prototype.GetTreeBalance);box2d.b2BroadPhase.prototype.GetTreeQuality=function(){return this.m_tree.GetAreaRatio()};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetTreeQuality",box2d.b2BroadPhase.prototype.GetTreeQuality);box2d.b2BroadPhase.prototype.ShiftOrigin=function(b){this.m_tree.ShiftOrigin(b)};goog.exportProperty(box2d.b2BroadPhase.prototype,"ShiftOrigin",box2d.b2BroadPhase.prototype.ShiftOrigin);box2d.b2BroadPhase.prototype.UpdatePairs=function(k){for(var j=this.m_pairCount=0;j<this.m_moveCount;++j){var s=this.m_moveBuffer[j];if(null!=s){var q=this,r=this.m_tree.GetFatAABB(s);this.m_tree.Query(function(e){if(e.m_id==s.m_id){return !0}q.m_pairCount==q.m_pairBuffer.length&&(q.m_pairBuffer[q.m_pairCount]=new box2d.b2Pair);var d=q.m_pairBuffer[q.m_pairCount];e.m_id<s.m_id?(d.proxyA=e,d.proxyB=s):(d.proxyA=s,d.proxyB=e);++q.m_pairCount;return !0},r)}}this.m_moveCount=0;this.m_pairBuffer.length=this.m_pairCount;this.m_pairBuffer.sort(box2d.b2PairLessThan);for(j=0;j<this.m_pairCount;){var r=this.m_pairBuffer[j],n=this.m_tree.GetUserData(r.proxyA),m=this.m_tree.GetUserData(r.proxyB);k.AddPair(n,m);for(++j;j<this.m_pairCount;){n=this.m_pairBuffer[j];if(n.proxyA.m_id!=r.proxyA.m_id||n.proxyB.m_id!=r.proxyB.m_id){break}++j}}};goog.exportProperty(box2d.b2BroadPhase.prototype,"UpdatePairs",box2d.b2BroadPhase.prototype.UpdatePairs);box2d.b2BroadPhase.prototype.Query=function(e,d){this.m_tree.Query(e,d)};goog.exportProperty(box2d.b2BroadPhase.prototype,"Query",box2d.b2BroadPhase.prototype.Query);box2d.b2BroadPhase.prototype.RayCast=function(e,d){this.m_tree.RayCast(e,d)};goog.exportProperty(box2d.b2BroadPhase.prototype,"RayCast",box2d.b2BroadPhase.prototype.RayCast);box2d.b2BroadPhase.prototype.BufferMove=function(b){this.m_moveBuffer[this.m_moveCount]=b;++this.m_moveCount};goog.exportProperty(box2d.b2BroadPhase.prototype,"BufferMove",box2d.b2BroadPhase.prototype.BufferMove);box2d.b2BroadPhase.prototype.UnBufferMove=function(b){b=this.m_moveBuffer.indexOf(b);this.m_moveBuffer[b]=null};goog.exportProperty(box2d.b2BroadPhase.prototype,"UnBufferMove",box2d.b2BroadPhase.prototype.UnBufferMove);box2d.b2PairLessThan=function(e,d){return e.proxyA.m_id==d.proxyA.m_id?e.proxyB.m_id-d.proxyB.m_id:e.proxyA.m_id-d.proxyA.m_id};box2d.b2ContactManager=function(){this.m_broadPhase=new box2d.b2BroadPhase;this.m_contactFactory=new box2d.b2ContactFactory(this.m_allocator)};box2d.b2ContactManager.prototype.m_broadPhase=null;goog.exportSymbol("box2d.b2ContactManager.prototype.m_broadPhase",box2d.b2ContactManager.prototype.m_broadPhase);box2d.b2ContactManager.prototype.m_contactList=null;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactList",box2d.b2ContactManager.prototype.m_contactList);box2d.b2ContactManager.prototype.m_contactCount=0;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactCount",box2d.b2ContactManager.prototype.m_contactCount);box2d.b2ContactManager.prototype.m_contactFilter=box2d.b2ContactFilter.b2_defaultFilter;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactFilter",box2d.b2ContactManager.prototype.m_contactFilter);box2d.b2ContactManager.prototype.m_contactListener=box2d.b2ContactListener.b2_defaultListener;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactListener",box2d.b2ContactManager.prototype.m_contactListener);box2d.b2ContactManager.prototype.m_allocator=null;goog.exportSymbol("box2d.b2ContactManager.prototype.m_allocator",box2d.b2ContactManager.prototype.m_allocator);box2d.b2ContactManager.prototype.m_contactFactory=null;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactFactory",box2d.b2ContactManager.prototype.m_contactFactory);box2d.b2ContactManager.prototype.Destroy=function(e){var d=e.GetFixtureA(),f=e.GetFixtureB(),d=d.GetBody(),f=f.GetBody();this.m_contactListener&&e.IsTouching()&&this.m_contactListener.EndContact(e);e.m_prev&&(e.m_prev.m_next=e.m_next);e.m_next&&(e.m_next.m_prev=e.m_prev);e==this.m_contactList&&(this.m_contactList=e.m_next);e.m_nodeA.prev&&(e.m_nodeA.prev.next=e.m_nodeA.next);e.m_nodeA.next&&(e.m_nodeA.next.prev=e.m_nodeA.prev);e.m_nodeA==d.m_contactList&&(d.m_contactList=e.m_nodeA.next);e.m_nodeB.prev&&(e.m_nodeB.prev.next=e.m_nodeB.next);e.m_nodeB.next&&(e.m_nodeB.next.prev=e.m_nodeB.prev);e.m_nodeB==f.m_contactList&&(f.m_contactList=e.m_nodeB.next);this.m_contactFactory.Destroy(e);--this.m_contactCount};goog.exportSymbol("box2d.b2ContactManager.prototype.Destroy",box2d.b2ContactManager.prototype.Destroy);box2d.b2ContactManager.prototype.Collide=function(){for(var k=this.m_contactList;k;){var j=k.GetFixtureA(),s=k.GetFixtureB(),q=k.GetChildIndexA(),r=k.GetChildIndexB(),n=j.GetBody(),m=s.GetBody();if(k.m_flags&box2d.b2ContactFlag.e_filterFlag){if(!1==m.ShouldCollide(n)){j=k;k=j.m_next;this.Destroy(j);continue}if(this.m_contactFilter&&!1==this.m_contactFilter.ShouldCollide(j,s)){j=k;k=j.m_next;this.Destroy(j);continue}k.m_flags&=~box2d.b2ContactFlag.e_filterFlag}n=n.IsAwake()&&n.m_type!=box2d.b2BodyType.b2_staticBody;m=m.IsAwake()&&m.m_type!=box2d.b2BodyType.b2_staticBody;!1==n&&!1==m?k=k.m_next:!1==this.m_broadPhase.TestOverlap(j.m_proxies[q].proxy,s.m_proxies[r].proxy)?(j=k,k=j.m_next,this.Destroy(j)):(k.Update(this.m_contactListener),k=k.m_next)}};goog.exportSymbol("box2d.b2ContactManager.prototype.Collide",box2d.b2ContactManager.prototype.Collide);box2d.b2ContactManager.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(this)};goog.exportSymbol("box2d.b2ContactManager.prototype.FindNewContacts",box2d.b2ContactManager.prototype.FindNewContacts);box2d.b2ContactManager.prototype.AddPair=function(E,D){box2d.ENABLE_ASSERTS&&box2d.b2Assert(E instanceof box2d.b2FixtureProxy);box2d.ENABLE_ASSERTS&&box2d.b2Assert(D instanceof box2d.b2FixtureProxy);var C=E.fixture,A=D.fixture,B=E.childIndex,z=D.childIndex,y=C.GetBody(),v=A.GetBody();if(y!=v){for(var s=v.GetContactList();s;){if(s.other==y){var u=s.contact.GetFixtureA(),r=s.contact.GetFixtureB(),q=s.contact.GetChildIndexA(),j=s.contact.GetChildIndexB();if(u==C&&r==A&&q==B&&j==z||u==A&&r==C&&q==z&&j==B){return}}s=s.next}!1==v.ShouldCollide(y)||this.m_contactFilter&&!1==this.m_contactFilter.ShouldCollide(C,A)||(B=this.m_contactFactory.Create(C,B,A,z),null!=B&&(C=B.GetFixtureA(),A=B.GetFixtureB(),B.GetChildIndexA(),B.GetChildIndexB(),y=C.m_body,v=A.m_body,B.m_prev=null,B.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=B),this.m_contactList=B,B.m_nodeA.contact=B,B.m_nodeA.other=v,B.m_nodeA.prev=null,B.m_nodeA.next=y.m_contactList,null!=y.m_contactList&&(y.m_contactList.prev=B.m_nodeA),y.m_contactList=B.m_nodeA,B.m_nodeB.contact=B,B.m_nodeB.other=y,B.m_nodeB.prev=null,B.m_nodeB.next=v.m_contactList,null!=v.m_contactList&&(v.m_contactList.prev=B.m_nodeB),v.m_contactList=B.m_nodeB,!1==C.IsSensor()&&!1==A.IsSensor()&&(y.SetAwake(!0),v.SetAwake(!0)),++this.m_contactCount))}};goog.exportSymbol("box2d.b2ContactManager.prototype.AddPair",box2d.b2ContactManager.prototype.AddPair);box2d.b2JointFactory={};box2d.b2JointFactory.Create=function(e,d){var f=null;switch(e.type){case box2d.b2JointType.e_distanceJoint:f=new box2d.b2DistanceJoint(e instanceof box2d.b2DistanceJointDef?e:null);break;case box2d.b2JointType.e_mouseJoint:f=new box2d.b2MouseJoint(e instanceof box2d.b2MouseJointDef?e:null);break;case box2d.b2JointType.e_prismaticJoint:f=new box2d.b2PrismaticJoint(e instanceof box2d.b2PrismaticJointDef?e:null);break;case box2d.b2JointType.e_revoluteJoint:f=new box2d.b2RevoluteJoint(e instanceof box2d.b2RevoluteJointDef?e:null);break;case box2d.b2JointType.e_pulleyJoint:f=new box2d.b2PulleyJoint(e instanceof box2d.b2PulleyJointDef?e:null);break;case box2d.b2JointType.e_gearJoint:f=new box2d.b2GearJoint(e instanceof box2d.b2GearJointDef?e:null);break;case box2d.b2JointType.e_wheelJoint:f=new box2d.b2WheelJoint(e instanceof box2d.b2WheelJointDef?e:null);break;case box2d.b2JointType.e_weldJoint:f=new box2d.b2WeldJoint(e instanceof box2d.b2WeldJointDef?e:null);break;case box2d.b2JointType.e_frictionJoint:f=new box2d.b2FrictionJoint(e instanceof box2d.b2FrictionJointDef?e:null);break;case box2d.b2JointType.e_ropeJoint:f=new box2d.b2RopeJoint(e instanceof box2d.b2RopeJointDef?e:null);break;case box2d.b2JointType.e_motorJoint:f=new box2d.b2MotorJoint(e instanceof box2d.b2MotorJointDef?e:null);break;case box2d.b2JointType.e_areaJoint:f=new box2d.b2AreaJoint(e instanceof box2d.b2AreaJointDef?e:null);break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}return f};goog.exportSymbol("box2d.b2JointFactory.Create",box2d.b2JointFactory.Create);box2d.b2JointFactory.Destroy=function(e,d){};goog.exportSymbol("box2d.b2JointFactory.Destroy",box2d.b2JointFactory.Destroy);box2d.b2Color=function(e,d,f){this.r=e;this.g=d;this.b=f};goog.exportSymbol("box2d.b2Color",box2d.b2Color);box2d.b2Color.prototype.r=0.5;goog.exportProperty(box2d.b2Color.prototype,"r",box2d.b2Color.prototype.r);box2d.b2Color.prototype.g=0.5;goog.exportProperty(box2d.b2Color.prototype,"g",box2d.b2Color.prototype.g);box2d.b2Color.prototype.b=0.5;goog.exportProperty(box2d.b2Color.prototype,"b",box2d.b2Color.prototype.b);box2d.b2Color.prototype.SetRGB=function(e,d,f){this.r=e;this.g=d;this.b=f;return this};goog.exportProperty(box2d.b2Color.prototype,"SetRGB",box2d.b2Color.prototype.SetRGB);box2d.b2Color.prototype.MakeStyleString=function(f){var d=Math.round(Math.max(0,Math.min(255,255*this.r))),j=Math.round(Math.max(0,Math.min(255,255*this.g))),g=Math.round(Math.max(0,Math.min(255,255*this.b)));f="undefined"==typeof f?Math.max(0,Math.min(1,f)):1;return box2d.b2Color.MakeStyleString(d,j,g,f)};goog.exportProperty(box2d.b2Color.prototype,"MakeStyleString",box2d.b2Color.prototype.MakeStyleString);box2d.b2Color.MakeStyleString=function(f,d,j,g){return 1>g?"rgba("+f+","+d+","+j+","+g+")":"rgb("+f+","+d+","+j+")"};goog.exportProperty(box2d.b2Color,"MakeStyleString",box2d.b2Color.MakeStyleString);box2d.b2Color.RED=new box2d.b2Color(1,0,0);goog.exportProperty(box2d.b2Color,"RED",box2d.b2Color.RED);box2d.b2Color.GREEN=new box2d.b2Color(0,1,0);goog.exportProperty(box2d.b2Color,"GREEN",box2d.b2Color.GREEN);box2d.b2Color.BLUE=new box2d.b2Color(0,0,1);goog.exportProperty(box2d.b2Color,"BLUE",box2d.b2Color.BLUE);box2d.b2DrawFlags={e_none:0,e_shapeBit:1,e_jointBit:2,e_aabbBit:4,e_pairBit:8,e_centerOfMassBit:16,e_controllerBit:32,e_all:63};goog.exportSymbol("box2d.b2DrawFlags",box2d.b2DrawFlags);goog.exportProperty(box2d.b2DrawFlags,"e_none",box2d.b2DrawFlags.e_none);goog.exportProperty(box2d.b2DrawFlags,"e_shapeBit",box2d.b2DrawFlags.e_shapeBit);goog.exportProperty(box2d.b2DrawFlags,"e_jointBit",box2d.b2DrawFlags.e_jointBit);goog.exportProperty(box2d.b2DrawFlags,"e_aabbBit",box2d.b2DrawFlags.e_aabbBit);goog.exportProperty(box2d.b2DrawFlags,"e_pairBit",box2d.b2DrawFlags.e_pairBit);goog.exportProperty(box2d.b2DrawFlags,"e_centerOfMassBit",box2d.b2DrawFlags.e_centerOfMassBit);goog.exportProperty(box2d.b2DrawFlags,"e_controllerBit",box2d.b2DrawFlags.e_controllerBit);goog.exportProperty(box2d.b2DrawFlags,"e_all",box2d.b2DrawFlags.e_all);box2d.b2Draw=function(){};goog.exportSymbol("box2d.b2Draw",box2d.b2Draw);box2d.b2Draw.prototype.m_drawFlags=box2d.b2DrawFlags.e_none;goog.exportProperty(box2d.b2Draw.prototype,"m_drawFlags",box2d.b2Draw.prototype.m_drawFlags);box2d.b2Draw.prototype.SetFlags=function(b){this.m_drawFlags=b};goog.exportProperty(box2d.b2Draw.prototype,"SetFlags",box2d.b2Draw.prototype.SetFlags);box2d.b2Draw.prototype.GetFlags=function(){return this.m_drawFlags};goog.exportProperty(box2d.b2Draw.prototype,"GetFlags",box2d.b2Draw.prototype.GetFlags);box2d.b2Draw.prototype.AppendFlags=function(b){this.m_drawFlags|=b};goog.exportProperty(box2d.b2Draw.prototype,"AppendFlags",box2d.b2Draw.prototype.AppendFlags);box2d.b2Draw.prototype.ClearFlags=function(b){this.m_drawFlags&=~b};goog.exportProperty(box2d.b2Draw.prototype,"ClearFlags",box2d.b2Draw.prototype.ClearFlags);box2d.b2Draw.prototype.PushTransform=function(b){};goog.exportProperty(box2d.b2Draw.prototype,"PushTransform",box2d.b2Draw.prototype.PushTransform);box2d.b2Draw.prototype.PopTransform=function(b){};goog.exportProperty(box2d.b2Draw.prototype,"PopTransform",box2d.b2Draw.prototype.PopTransform);box2d.b2Draw.prototype.DrawPolygon=function(e,d,f){};goog.exportProperty(box2d.b2Draw.prototype,"DrawPolygon",box2d.b2Draw.prototype.DrawPolygon);box2d.b2Draw.prototype.DrawSolidPolygon=function(e,d,f){};goog.exportProperty(box2d.b2Draw.prototype,"DrawSolidPolygon",box2d.b2Draw.prototype.DrawSolidPolygon);box2d.b2Draw.prototype.DrawCircle=function(e,d,f){};goog.exportProperty(box2d.b2Draw.prototype,"DrawCircle",box2d.b2Draw.prototype.DrawCircle);box2d.b2Draw.prototype.DrawSolidCircle=function(f,d,j,g){};goog.exportProperty(box2d.b2Draw.prototype,"DrawSolidCircle",box2d.b2Draw.prototype.DrawSolidCircle);box2d.b2Draw.prototype.DrawSegment=function(e,d,f){};goog.exportProperty(box2d.b2Draw.prototype,"DrawSegment",box2d.b2Draw.prototype.DrawSegment);box2d.b2Draw.prototype.DrawTransform=function(b){};goog.exportProperty(box2d.b2Draw.prototype,"DrawTransform",box2d.b2Draw.prototype.DrawTransform);box2d.b2Filter=function(){};goog.exportSymbol("box2d.b2Filter",box2d.b2Filter);box2d.b2Filter.prototype.categoryBits=1;goog.exportProperty(box2d.b2Filter.prototype,"categoryBits",box2d.b2Filter.prototype.categoryBits);box2d.b2Filter.prototype.maskBits=65535;goog.exportProperty(box2d.b2Filter.prototype,"maskBits",box2d.b2Filter.prototype.maskBits);box2d.b2Filter.prototype.groupIndex=0;goog.exportProperty(box2d.b2Filter.prototype,"groupIndex",box2d.b2Filter.prototype.groupIndex);box2d.b2Filter.prototype.Clone=function(){return(new box2d.b2Filter).Copy(this)};goog.exportProperty(box2d.b2Filter.prototype,"Clone",box2d.b2Filter.prototype.Clone);box2d.b2Filter.prototype.Copy=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this!==b);this.categoryBits=b.categoryBits;this.maskBits=b.maskBits;this.groupIndex=b.groupIndex;return this};goog.exportProperty(box2d.b2Filter.prototype,"Copy",box2d.b2Filter.prototype.Copy);box2d.b2FixtureDef=function(){this.filter=new box2d.b2Filter};goog.exportSymbol("box2d.b2FixtureDef",box2d.b2FixtureDef);box2d.b2FixtureDef.prototype.shape=null;goog.exportProperty(box2d.b2FixtureDef.prototype,"shape",box2d.b2FixtureDef.prototype.shape);box2d.b2FixtureDef.prototype.userData=null;goog.exportProperty(box2d.b2FixtureDef.prototype,"userData",box2d.b2FixtureDef.prototype.userData);box2d.b2FixtureDef.prototype.friction=0.2;goog.exportProperty(box2d.b2FixtureDef.prototype,"friction",box2d.b2FixtureDef.prototype.friction);box2d.b2FixtureDef.prototype.restitution=0;goog.exportProperty(box2d.b2FixtureDef.prototype,"restitution",box2d.b2FixtureDef.prototype.restitution);box2d.b2FixtureDef.prototype.density=0;goog.exportProperty(box2d.b2FixtureDef.prototype,"density",box2d.b2FixtureDef.prototype.density);box2d.b2FixtureDef.prototype.isSensor=!1;goog.exportProperty(box2d.b2FixtureDef.prototype,"isSensor",box2d.b2FixtureDef.prototype.isSensor);box2d.b2FixtureDef.prototype.filter=null;goog.exportProperty(box2d.b2FixtureDef.prototype,"filter",box2d.b2FixtureDef.prototype.filter);box2d.b2FixtureProxy=function(){this.aabb=new box2d.b2AABB};goog.exportSymbol("box2d.b2FixtureProxy",box2d.b2FixtureProxy);box2d.b2FixtureProxy.prototype.aabb=null;goog.exportProperty(box2d.b2FixtureProxy.prototype,"aabb",box2d.b2FixtureProxy.prototype.aabb);box2d.b2FixtureProxy.prototype.fixture=null;goog.exportProperty(box2d.b2FixtureProxy.prototype,"fixture",box2d.b2FixtureProxy.prototype.fixture);box2d.b2FixtureProxy.prototype.childIndex=0;goog.exportProperty(box2d.b2FixtureProxy.prototype,"childIndex",box2d.b2FixtureProxy.prototype.childIndex);box2d.b2FixtureProxy.prototype.proxy=null;goog.exportProperty(box2d.b2FixtureProxy.prototype,"proxy",box2d.b2FixtureProxy.prototype.proxy);box2d.b2FixtureProxy.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2FixtureProxy})};goog.exportProperty(box2d.b2FixtureProxy,"MakeArray",box2d.b2FixtureProxy.MakeArray);box2d.b2Fixture=function(){this.m_proxyCount=0;this.m_filter=new box2d.b2Filter};goog.exportSymbol("box2d.b2Fixture",box2d.b2Fixture);box2d.b2Fixture.prototype.m_density=0;goog.exportProperty(box2d.b2Fixture.prototype,"m_density",box2d.b2Fixture.prototype.m_density);box2d.b2Fixture.prototype.m_next=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_next",box2d.b2Fixture.prototype.m_next);box2d.b2Fixture.prototype.m_body=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_body",box2d.b2Fixture.prototype.m_body);box2d.b2Fixture.prototype.m_shape=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_shape",box2d.b2Fixture.prototype.m_shape);box2d.b2Fixture.prototype.m_friction=0;goog.exportProperty(box2d.b2Fixture.prototype,"m_friction",box2d.b2Fixture.prototype.m_friction);box2d.b2Fixture.prototype.m_restitution=0;goog.exportProperty(box2d.b2Fixture.prototype,"m_restitution",box2d.b2Fixture.prototype.m_restitution);box2d.b2Fixture.prototype.m_proxies=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_proxies",box2d.b2Fixture.prototype.m_proxies);box2d.b2Fixture.prototype.m_proxyCount=0;goog.exportProperty(box2d.b2Fixture.prototype,"m_proxyCount",box2d.b2Fixture.prototype.m_proxyCount);box2d.b2Fixture.prototype.m_filter=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_filter",box2d.b2Fixture.prototype.m_filter);box2d.b2Fixture.prototype.m_isSensor=!1;goog.exportProperty(box2d.b2Fixture.prototype,"m_isSensor",box2d.b2Fixture.prototype.m_isSensor);box2d.b2Fixture.prototype.m_userData=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_userData",box2d.b2Fixture.prototype.m_userData);box2d.b2Fixture.prototype.GetType=function(){return this.m_shape.GetType()};goog.exportProperty(box2d.b2Fixture.prototype,"GetType",box2d.b2Fixture.prototype.GetType);box2d.b2Fixture.prototype.GetShape=function(){return this.m_shape};goog.exportProperty(box2d.b2Fixture.prototype,"GetShape",box2d.b2Fixture.prototype.GetShape);box2d.b2Fixture.prototype.IsSensor=function(){return this.m_isSensor};goog.exportProperty(box2d.b2Fixture.prototype,"IsSensor",box2d.b2Fixture.prototype.IsSensor);box2d.b2Fixture.prototype.GetFilterData=function(){return this.m_filter};goog.exportProperty(box2d.b2Fixture.prototype,"GetFilterData",box2d.b2Fixture.prototype.GetFilterData);box2d.b2Fixture.prototype.GetUserData=function(){return this.m_userData};goog.exportProperty(box2d.b2Fixture.prototype,"GetUserData",box2d.b2Fixture.prototype.GetUserData);box2d.b2Fixture.prototype.SetUserData=function(b){this.m_userData=b};goog.exportProperty(box2d.b2Fixture.prototype,"SetUserData",box2d.b2Fixture.prototype.SetUserData);box2d.b2Fixture.prototype.GetBody=function(){return this.m_body};goog.exportProperty(box2d.b2Fixture.prototype,"GetBody",box2d.b2Fixture.prototype.GetBody);box2d.b2Fixture.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2Fixture.prototype,"GetNext",box2d.b2Fixture.prototype.GetNext);box2d.b2Fixture.prototype.SetDensity=function(b){this.m_density=b};goog.exportProperty(box2d.b2Fixture.prototype,"SetDensity",box2d.b2Fixture.prototype.SetDensity);box2d.b2Fixture.prototype.GetDensity=function(){return this.m_density};goog.exportProperty(box2d.b2Fixture.prototype,"GetDensity",box2d.b2Fixture.prototype.GetDensity);box2d.b2Fixture.prototype.GetFriction=function(){return this.m_friction};goog.exportProperty(box2d.b2Fixture.prototype,"GetFriction",box2d.b2Fixture.prototype.GetFriction);box2d.b2Fixture.prototype.SetFriction=function(b){this.m_friction=b};goog.exportProperty(box2d.b2Fixture.prototype,"SetFriction",box2d.b2Fixture.prototype.SetFriction);box2d.b2Fixture.prototype.GetRestitution=function(){return this.m_restitution};goog.exportProperty(box2d.b2Fixture.prototype,"GetRestitution",box2d.b2Fixture.prototype.GetRestitution);box2d.b2Fixture.prototype.SetRestitution=function(b){this.m_restitution=b};goog.exportProperty(box2d.b2Fixture.prototype,"SetRestitution",box2d.b2Fixture.prototype.SetRestitution);box2d.b2Fixture.prototype.TestPoint=function(b){return this.m_shape.TestPoint(this.m_body.GetTransform(),b)};goog.exportProperty(box2d.b2Fixture.prototype,"TestPoint",box2d.b2Fixture.prototype.TestPoint);box2d.b2Fixture.prototype.RayCast=function(e,d,f){return this.m_shape.RayCast(e,d,this.m_body.GetTransform(),f)};goog.exportProperty(box2d.b2Fixture.prototype,"RayCast",box2d.b2Fixture.prototype.RayCast);box2d.b2Fixture.prototype.GetMassData=function(b){b=b||new box2d.b2MassData;this.m_shape.ComputeMass(b,this.m_density);return b};goog.exportProperty(box2d.b2Fixture.prototype,"GetMassData",box2d.b2Fixture.prototype.GetMassData);box2d.b2Fixture.prototype.GetAABB=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=b&&b<this.m_proxyCount);return this.m_proxies[b].aabb};goog.exportProperty(box2d.b2Fixture.prototype,"GetAABB",box2d.b2Fixture.prototype.GetAABB);box2d.b2Fixture.prototype.Create=function(e,d){this.m_userData=d.userData;this.m_friction=d.friction;this.m_restitution=d.restitution;this.m_body=e;this.m_next=null;this.m_filter.Copy(d.filter);this.m_isSensor=d.isSensor;this.m_shape=d.shape.Clone();this.m_proxies=box2d.b2FixtureProxy.MakeArray(this.m_shape.GetChildCount());this.m_proxyCount=0;this.m_density=d.density};goog.exportProperty(box2d.b2Fixture.prototype,"Create",box2d.b2Fixture.prototype.Create);box2d.b2Fixture.prototype.Destroy=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0==this.m_proxyCount);this.m_shape=null};goog.exportProperty(box2d.b2Fixture.prototype,"Destroy",box2d.b2Fixture.prototype.Destroy);box2d.b2Fixture.prototype.CreateProxies=function(f,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0==this.m_proxyCount);this.m_proxyCount=this.m_shape.GetChildCount();for(var j=0;j<this.m_proxyCount;++j){var g=this.m_proxies[j];this.m_shape.ComputeAABB(g.aabb,d,j);g.proxy=f.CreateProxy(g.aabb,g);g.fixture=this;g.childIndex=j}};goog.exportProperty(box2d.b2Fixture.prototype,"CreateProxies",box2d.b2Fixture.prototype.CreateProxies);box2d.b2Fixture.prototype.DestroyProxies=function(e){for(var d=0;d<this.m_proxyCount;++d){var f=this.m_proxies[d];e.DestroyProxy(f.proxy);f.proxy=null}this.m_proxyCount=0};goog.exportProperty(box2d.b2Fixture.prototype,"DestroyProxies",box2d.b2Fixture.prototype.DestroyProxies);box2d.b2Fixture.prototype.Synchronize=function(k,j,s){if(0!=this.m_proxyCount){for(var q=0;q<this.m_proxyCount;++q){var r=this.m_proxies[q],n=box2d.b2Fixture.prototype.Synchronize.s_aabb1,m=box2d.b2Fixture.prototype.Synchronize.s_aabb2;this.m_shape.ComputeAABB(n,j,q);this.m_shape.ComputeAABB(m,s,q);r.aabb.Combine2(n,m);n=box2d.b2SubVV(s.p,j.p,box2d.b2Fixture.prototype.Synchronize.s_displacement);k.MoveProxy(r.proxy,r.aabb,n)}}};goog.exportProperty(box2d.b2Fixture.prototype,"Synchronize",box2d.b2Fixture.prototype.Synchronize);box2d.b2Fixture.prototype.Synchronize.s_aabb1=new box2d.b2AABB;box2d.b2Fixture.prototype.Synchronize.s_aabb2=new box2d.b2AABB;box2d.b2Fixture.prototype.Synchronize.s_displacement=new box2d.b2Vec2;box2d.b2Fixture.prototype.SetFilterData=function(b){this.m_filter.Copy(b);this.Refilter()};goog.exportProperty(box2d.b2Fixture.prototype,"SetFilterData",box2d.b2Fixture.prototype.SetFilterData);box2d.b2Fixture.prototype.Refilter=function(){if(!this.m_body){for(var f=this.m_body.GetContactList();f;){var d=f.contact,j=d.GetFixtureA(),g=d.GetFixtureB();j!=this&&g!=this||d.FlagForFiltering();f=f.next}f=this.m_body.GetWorld();if(null!==f){for(f=f.m_contactManager.m_broadPhase,d=0;d<this.m_proxyCount;++d){f.TouchProxy(this.m_proxies[d].proxy)}}}};goog.exportProperty(box2d.b2Fixture.prototype,"Refilter",box2d.b2Fixture.prototype.Refilter);box2d.b2Fixture.prototype.SetSensor=function(b){b!=this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=b)};goog.exportProperty(box2d.b2Fixture.prototype,"SetSensor",box2d.b2Fixture.prototype.SetSensor);box2d.b2Fixture.prototype.Dump=function(b){box2d.DEBUG&&(box2d.b2Log("    /*box2d.b2FixtureDef*/ var fd = new box2d.b2FixtureDef();\n"),box2d.b2Log("    fd.friction = %.15f;\n",this.m_friction),box2d.b2Log("    fd.restitution = %.15f;\n",this.m_restitution),box2d.b2Log("    fd.density = %.15f;\n",this.m_density),box2d.b2Log("    fd.isSensor = %s;\n",this.m_isSensor?"true":"false"),box2d.b2Log("    fd.filter.categoryBits = %d;\n",this.m_filter.categoryBits),box2d.b2Log("    fd.filter.maskBits = %d;\n",this.m_filter.maskBits),box2d.b2Log("    fd.filter.groupIndex = %d;\n",this.m_filter.groupIndex),this.m_shape.Dump(),box2d.b2Log("\n"),box2d.b2Log("    fd.shape = shape;\n"),box2d.b2Log("\n"),box2d.b2Log("    bodies[%d].CreateFixture(fd);\n",b))};goog.exportProperty(box2d.b2Fixture.prototype,"Dump",box2d.b2Fixture.prototype.Dump);box2d.b2BodyType={b2_unknown:-1,b2_staticBody:0,b2_kinematicBody:1,b2_dynamicBody:2,b2_bulletBody:3};goog.exportSymbol("box2d.b2BodyType",box2d.b2BodyType);goog.exportProperty(box2d.b2BodyType,"b2_unknown",box2d.b2BodyType.b2_unknown);goog.exportProperty(box2d.b2BodyType,"b2_staticBody",box2d.b2BodyType.b2_staticBody);goog.exportProperty(box2d.b2BodyType,"b2_kinematicBody",box2d.b2BodyType.b2_kinematicBody);goog.exportProperty(box2d.b2BodyType,"b2_dynamicBody",box2d.b2BodyType.b2_dynamicBody);goog.exportProperty(box2d.b2BodyType,"b2_bulletBody",box2d.b2BodyType.b2_bulletBody);box2d.b2BodyDef=function(){this.position=new box2d.b2Vec2(0,0);this.linearVelocity=new box2d.b2Vec2(0,0)};goog.exportSymbol("box2d.b2BodyDef",box2d.b2BodyDef);box2d.b2BodyDef.prototype.type=box2d.b2BodyType.b2_staticBody;goog.exportProperty(box2d.b2BodyDef.prototype,"type",box2d.b2BodyDef.prototype.type);box2d.b2BodyDef.prototype.position=null;goog.exportProperty(box2d.b2BodyDef.prototype,"position",box2d.b2BodyDef.prototype.position);box2d.b2BodyDef.prototype.angle=0;goog.exportProperty(box2d.b2BodyDef.prototype,"angle",box2d.b2BodyDef.prototype.angle);box2d.b2BodyDef.prototype.linearVelocity=null;goog.exportProperty(box2d.b2BodyDef.prototype,"linearVelocity",box2d.b2BodyDef.prototype.linearVelocity);box2d.b2BodyDef.prototype.angularVelocity=0;goog.exportProperty(box2d.b2BodyDef.prototype,"angularVelocity",box2d.b2BodyDef.prototype.angularVelocity);box2d.b2BodyDef.prototype.linearDamping=0;goog.exportProperty(box2d.b2BodyDef.prototype,"linearDamping",box2d.b2BodyDef.prototype.linearDamping);box2d.b2BodyDef.prototype.angularDamping=0;goog.exportProperty(box2d.b2BodyDef.prototype,"angularDamping",box2d.b2BodyDef.prototype.angularDamping);box2d.b2BodyDef.prototype.allowSleep=!0;goog.exportProperty(box2d.b2BodyDef.prototype,"allowSleep",box2d.b2BodyDef.prototype.allowSleep);box2d.b2BodyDef.prototype.awake=!0;goog.exportProperty(box2d.b2BodyDef.prototype,"awake",box2d.b2BodyDef.prototype.awake);box2d.b2BodyDef.prototype.fixedRotation=!1;goog.exportProperty(box2d.b2BodyDef.prototype,"fixedRotation",box2d.b2BodyDef.prototype.fixedRotation);box2d.b2BodyDef.prototype.bullet=!1;goog.exportProperty(box2d.b2BodyDef.prototype,"bullet",box2d.b2BodyDef.prototype.bullet);box2d.b2BodyDef.prototype.active=!0;goog.exportProperty(box2d.b2BodyDef.prototype,"active",box2d.b2BodyDef.prototype.active);box2d.b2BodyDef.prototype.userData=null;goog.exportProperty(box2d.b2BodyDef.prototype,"userData",box2d.b2BodyDef.prototype.userData);box2d.b2BodyDef.prototype.gravityScale=1;goog.exportProperty(box2d.b2BodyDef.prototype,"gravityScale",box2d.b2BodyDef.prototype.gravityScale);box2d.b2BodyFlag={e_none:0,e_islandFlag:1,e_awakeFlag:2,e_autoSleepFlag:4,e_bulletFlag:8,e_fixedRotationFlag:16,e_activeFlag:32,e_toiFlag:64};goog.exportProperty(box2d.b2BodyFlag,"e_none",box2d.b2BodyFlag.e_none);goog.exportProperty(box2d.b2BodyFlag,"e_islandFlag",box2d.b2BodyFlag.e_islandFlag);goog.exportProperty(box2d.b2BodyFlag,"e_awakeFlag",box2d.b2BodyFlag.e_awakeFlag);goog.exportProperty(box2d.b2BodyFlag,"e_autoSleepFlag",box2d.b2BodyFlag.e_autoSleepFlag);goog.exportProperty(box2d.b2BodyFlag,"e_bulletFlag",box2d.b2BodyFlag.e_bulletFlag);goog.exportProperty(box2d.b2BodyFlag,"e_fixedRotationFlag",box2d.b2BodyFlag.e_fixedRotationFlag);goog.exportProperty(box2d.b2BodyFlag,"e_activeFlag",box2d.b2BodyFlag.e_activeFlag);goog.exportProperty(box2d.b2BodyFlag,"e_toiFlag",box2d.b2BodyFlag.e_toiFlag);box2d.b2Body=function(e,d){this.m_xf=new box2d.b2Transform;this.m_out_xf=new box2d.b2Transform;this.m_sweep=new box2d.b2Sweep;this.m_out_sweep=new box2d.b2Sweep;this.m_linearVelocity=new box2d.b2Vec2;this.m_out_linearVelocity=new box2d.b2Vec2;this.m_force=new box2d.b2Vec2;box2d.ENABLE_ASSERTS&&box2d.b2Assert(e.position.IsValid());box2d.ENABLE_ASSERTS&&box2d.b2Assert(e.linearVelocity.IsValid());box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(e.angle));box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(e.angularVelocity));box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(e.gravityScale)&&0<=e.gravityScale);box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(e.angularDamping)&&0<=e.angularDamping);box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(e.linearDamping)&&0<=e.linearDamping);this.m_flags=box2d.b2BodyFlag.e_none;e.bullet&&(this.m_flags|=box2d.b2BodyFlag.e_bulletFlag);e.fixedRotation&&(this.m_flags|=box2d.b2BodyFlag.e_fixedRotationFlag);e.allowSleep&&(this.m_flags|=box2d.b2BodyFlag.e_autoSleepFlag);e.awake&&(this.m_flags|=box2d.b2BodyFlag.e_awakeFlag);e.active&&(this.m_flags|=box2d.b2BodyFlag.e_activeFlag);this.m_world=d;this.m_xf.p.Copy(e.position);this.m_xf.q.SetAngleRadians(e.angle);this.m_sweep.localCenter.SetZero();this.m_sweep.c0.Copy(this.m_xf.p);this.m_sweep.c.Copy(this.m_xf.p);this.m_sweep.a0=e.angle;this.m_sweep.a=e.angle;this.m_sweep.alpha0=0;this.m_linearVelocity.Copy(e.linearVelocity);this.m_angularVelocity=e.angularVelocity;this.m_linearDamping=e.linearDamping;this.m_angularDamping=e.angularDamping;this.m_gravityScale=e.gravityScale;this.m_force.SetZero();this.m_sleepTime=this.m_torque=0;this.m_type=e.type;this.m_invMass=e.type==box2d.b2BodyType.b2_dynamicBody?this.m_mass=1:this.m_mass=0;this.m_invI=this.m_I=0;this.m_userData=e.userData;this.m_fixtureList=null;this.m_fixtureCount=0;this.m_controllerList=null;this.m_controllerCount=0};goog.exportSymbol("box2d.b2Body",box2d.b2Body);box2d.b2Body.prototype.m_flags=box2d.b2BodyFlag.e_none;goog.exportProperty(box2d.b2Body.prototype,"m_flags",box2d.b2Body.prototype.m_flags);box2d.b2Body.prototype.m_islandIndex=0;goog.exportProperty(box2d.b2Body.prototype,"m_islandIndex",box2d.b2Body.prototype.m_islandIndex);box2d.b2Body.prototype.m_world=null;goog.exportProperty(box2d.b2Body.prototype,"m_world",box2d.b2Body.prototype.m_world);box2d.b2Body.prototype.m_xf=null;goog.exportProperty(box2d.b2Body.prototype,"m_xf",box2d.b2Body.prototype.m_xf);box2d.b2Body.prototype.m_out_xf=null;goog.exportProperty(box2d.b2Body.prototype,"m_out_xf",box2d.b2Body.prototype.m_out_xf);box2d.b2Body.prototype.m_sweep=null;goog.exportProperty(box2d.b2Body.prototype,"m_sweep",box2d.b2Body.prototype.m_sweep);box2d.b2Body.prototype.m_out_sweep=null;goog.exportProperty(box2d.b2Body.prototype,"m_out_sweep",box2d.b2Body.prototype.m_out_sweep);box2d.b2Body.prototype.m_jointList=null;goog.exportProperty(box2d.b2Body.prototype,"m_jointList",box2d.b2Body.prototype.m_jointList);box2d.b2Body.prototype.m_contactList=null;goog.exportProperty(box2d.b2Body.prototype,"m_contactList",box2d.b2Body.prototype.m_contactList);box2d.b2Body.prototype.m_prev=null;goog.exportProperty(box2d.b2Body.prototype,"m_prev",box2d.b2Body.prototype.m_prev);box2d.b2Body.prototype.m_next=null;goog.exportProperty(box2d.b2Body.prototype,"m_next",box2d.b2Body.prototype.m_next);box2d.b2Body.prototype.m_linearVelocity=null;goog.exportProperty(box2d.b2Body.prototype,"m_linearVelocity",box2d.b2Body.prototype.m_linearVelocity);box2d.b2Body.prototype.m_out_linearVelocity=null;goog.exportProperty(box2d.b2Body.prototype,"m_out_linearVelocity",box2d.b2Body.prototype.m_out_linearVelocity);box2d.b2Body.prototype.m_angularVelocity=0;goog.exportProperty(box2d.b2Body.prototype,"m_angularVelocity",box2d.b2Body.prototype.m_angularVelocity);box2d.b2Body.prototype.m_linearDamping=0;goog.exportProperty(box2d.b2Body.prototype,"m_linearDamping",box2d.b2Body.prototype.m_linearDamping);box2d.b2Body.prototype.m_angularDamping=0;goog.exportProperty(box2d.b2Body.prototype,"m_angularDamping",box2d.b2Body.prototype.m_angularDamping);box2d.b2Body.prototype.m_gravityScale=1;goog.exportProperty(box2d.b2Body.prototype,"m_gravityScale",box2d.b2Body.prototype.m_gravityScale);box2d.b2Body.prototype.m_force=null;goog.exportProperty(box2d.b2Body.prototype,"m_force",box2d.b2Body.prototype.m_force);box2d.b2Body.prototype.m_torque=0;goog.exportProperty(box2d.b2Body.prototype,"m_torque",box2d.b2Body.prototype.m_torque);box2d.b2Body.prototype.m_sleepTime=0;goog.exportProperty(box2d.b2Body.prototype,"m_sleepTime",box2d.b2Body.prototype.m_sleepTime);box2d.b2Body.prototype.m_type=box2d.b2BodyType.b2_staticBody;goog.exportProperty(box2d.b2Body.prototype,"m_type",box2d.b2Body.prototype.m_type);box2d.b2Body.prototype.m_mass=1;goog.exportProperty(box2d.b2Body.prototype,"m_mass",box2d.b2Body.prototype.m_mass);box2d.b2Body.prototype.m_invMass=1;goog.exportProperty(box2d.b2Body.prototype,"m_invMass",box2d.b2Body.prototype.m_invMass);box2d.b2Body.prototype.m_I=0;goog.exportProperty(box2d.b2Body.prototype,"m_I",box2d.b2Body.prototype.m_I);box2d.b2Body.prototype.m_invI=0;goog.exportProperty(box2d.b2Body.prototype,"m_invI",box2d.b2Body.prototype.m_invI);box2d.b2Body.prototype.m_userData=null;goog.exportProperty(box2d.b2Body.prototype,"m_userData",box2d.b2Body.prototype.m_userData);box2d.b2Body.prototype.m_fixtureList=null;goog.exportProperty(box2d.b2Body.prototype,"m_fixtureList",box2d.b2Body.prototype.m_fixtureList);box2d.b2Body.prototype.m_fixtureCount=0;goog.exportProperty(box2d.b2Body.prototype,"m_fixtureCount",box2d.b2Body.prototype.m_fixtureCount);box2d.b2Body.prototype.m_controllerList=null;goog.exportProperty(box2d.b2Body.prototype,"m_controllerList",box2d.b2Body.prototype.m_controllerList);box2d.b2Body.prototype.m_controllerCount=0;goog.exportProperty(box2d.b2Body.prototype,"m_controllerCount",box2d.b2Body.prototype.m_controllerCount);box2d.b2Body.prototype.CreateFixture=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.m_world.IsLocked());if(!0==this.m_world.IsLocked()){return null}var d=new box2d.b2Fixture;d.Create(this,e);this.m_flags&box2d.b2BodyFlag.e_activeFlag&&d.CreateProxies(this.m_world.m_contactManager.m_broadPhase,this.m_xf);d.m_next=this.m_fixtureList;this.m_fixtureList=d;++this.m_fixtureCount;d.m_body=this;0<d.m_density&&this.ResetMassData();this.m_world.m_flags|=box2d.b2WorldFlag.e_newFixture;return d};goog.exportProperty(box2d.b2Body.prototype,"CreateFixture",box2d.b2Body.prototype.CreateFixture);box2d.b2Body.prototype.CreateFixture2=function(e,d){void 0===d&&(d=0);var f=box2d.b2Body.prototype.CreateFixture2.s_def;f.shape=e;f.density=d;return this.CreateFixture(f)};goog.exportProperty(box2d.b2Body.prototype,"CreateFixture2",box2d.b2Body.prototype.CreateFixture2);box2d.b2Body.prototype.CreateFixture2.s_def=new box2d.b2FixtureDef;box2d.b2Body.prototype.DestroyFixture=function(g){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.m_world.IsLocked());if(!0!=this.m_world.IsLocked()){box2d.ENABLE_ASSERTS&&box2d.b2Assert(g.m_body==this);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_fixtureCount);for(var f=this.m_fixtureList,m=null,j=!1;null!=f;){if(f==g){m?m.m_next=g.m_next:this.m_fixtureList=g.m_next;j=!0;break}m=f;f=f.m_next}box2d.ENABLE_ASSERTS&&box2d.b2Assert(j);for(f=this.m_contactList;f;){var m=f.contact,f=f.next,j=m.GetFixtureA(),k=m.GetFixtureB();g!=j&&g!=k||this.m_world.m_contactManager.Destroy(m)}this.m_flags&box2d.b2BodyFlag.e_activeFlag&&g.DestroyProxies(this.m_world.m_contactManager.m_broadPhase);g.Destroy();g.m_body=null;g.m_next=null;--this.m_fixtureCount;this.ResetMassData()}};goog.exportProperty(box2d.b2Body.prototype,"DestroyFixture",box2d.b2Body.prototype.DestroyFixture);box2d.b2Body.prototype.SetTransformVecRadians=function(e,d){this.SetTransformXYRadians(e.x,e.y,d)};goog.exportProperty(box2d.b2Body.prototype,"SetTransformVecRadians",box2d.b2Body.prototype.SetTransformVecRadians);box2d.b2Body.prototype.SetTransformXYRadians=function(e,d,f){if(this.m_xf.p.x!=e||this.m_xf.p.y!=d||this.m_xf.q.GetAngleRadians()!=f){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.m_world.IsLocked()),!0!=this.m_world.IsLocked()){this.m_xf.q.SetAngleRadians(f);this.m_xf.p.SetXY(e,d);box2d.b2MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c);this.m_sweep.a=f;this.m_sweep.c0.Copy(this.m_sweep.c);this.m_sweep.a0=f;e=this.m_world.m_contactManager.m_broadPhase;for(d=this.m_fixtureList;d;d=d.m_next){d.Synchronize(e,this.m_xf,this.m_xf)}this.m_world.m_contactManager.FindNewContacts()}}};goog.exportProperty(box2d.b2Body.prototype,"SetTransformXYRadians",box2d.b2Body.prototype.SetTransformXYRadians);box2d.b2Body.prototype.SetTransform=function(b){this.SetTransformVecRadians(b.p,b.GetAngleRadians())};goog.exportProperty(box2d.b2Body.prototype,"SetTransform",box2d.b2Body.prototype.SetTransform);box2d.b2Body.prototype.GetTransform=function(b){b=b||this.m_out_xf;return b.Copy(this.m_xf)};goog.exportProperty(box2d.b2Body.prototype,"GetTransform",box2d.b2Body.prototype.GetTransform);box2d.b2Body.prototype.GetPosition=function(b){b=b||this.m_out_xf.p;return b.Copy(this.m_xf.p)};goog.exportProperty(box2d.b2Body.prototype,"GetPosition",box2d.b2Body.prototype.GetPosition);box2d.b2Body.prototype.SetPosition=function(b){this.SetTransformVecRadians(b,this.GetAngleRadians())};goog.exportProperty(box2d.b2Body.prototype,"SetPosition",box2d.b2Body.prototype.SetPosition);box2d.b2Body.prototype.SetPositionXY=function(e,d){this.SetTransformXYRadians(e,d,this.GetAngleRadians())};goog.exportProperty(box2d.b2Body.prototype,"SetPositionXY",box2d.b2Body.prototype.SetPositionXY);box2d.b2Body.prototype.GetAngleRadians=function(){return this.m_sweep.a};goog.exportProperty(box2d.b2Body.prototype,"GetAngleRadians",box2d.b2Body.prototype.GetAngleRadians);box2d.b2Body.prototype.SetAngleRadians=function(b){this.SetTransformVecRadians(this.GetPosition(),b)};goog.exportProperty(box2d.b2Body.prototype,"SetAngleRadians",box2d.b2Body.prototype.SetAngleRadians);box2d.b2Body.prototype.GetWorldCenter=function(b){b=b||this.m_out_sweep.c;return b.Copy(this.m_sweep.c)};goog.exportProperty(box2d.b2Body.prototype,"GetWorldCenter",box2d.b2Body.prototype.GetWorldCenter);box2d.b2Body.prototype.GetLocalCenter=function(b){b=b||this.m_out_sweep.localCenter;return b.Copy(this.m_sweep.localCenter)};goog.exportProperty(box2d.b2Body.prototype,"GetLocalCenter",box2d.b2Body.prototype.GetLocalCenter);box2d.b2Body.prototype.SetLinearVelocity=function(b){this.m_type!=box2d.b2BodyType.b2_staticBody&&(0<box2d.b2DotVV(b,b)&&this.SetAwake(!0),this.m_linearVelocity.Copy(b))};goog.exportProperty(box2d.b2Body.prototype,"SetLinearVelocity",box2d.b2Body.prototype.SetLinearVelocity);box2d.b2Body.prototype.GetLinearVelocity=function(b){b=b||this.m_out_linearVelocity;return b.Copy(this.m_linearVelocity)};goog.exportProperty(box2d.b2Body.prototype,"GetLinearVelocity",box2d.b2Body.prototype.GetLinearVelocity);box2d.b2Body.prototype.SetAngularVelocity=function(b){this.m_type!=box2d.b2BodyType.b2_staticBody&&(0<b*b&&this.SetAwake(!0),this.m_angularVelocity=b)};goog.exportProperty(box2d.b2Body.prototype,"SetAngularVelocity",box2d.b2Body.prototype.SetAngularVelocity);box2d.b2Body.prototype.GetAngularVelocity=function(){return this.m_angularVelocity};goog.exportProperty(box2d.b2Body.prototype,"GetAngularVelocity",box2d.b2Body.prototype.GetAngularVelocity);box2d.b2Body.prototype.GetDefinition=function(b){b.type=this.GetType();b.allowSleep=(this.m_flags&box2d.b2BodyFlag.e_autoSleepFlag)==box2d.b2BodyFlag.e_autoSleepFlag;b.angle=this.GetAngleRadians();b.angularDamping=this.m_angularDamping;b.gravityScale=this.m_gravityScale;b.angularVelocity=this.m_angularVelocity;b.fixedRotation=(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)==box2d.b2BodyFlag.e_fixedRotationFlag;b.bullet=(this.m_flags&box2d.b2BodyFlag.e_bulletFlag)==box2d.b2BodyFlag.e_bulletFlag;b.awake=(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)==box2d.b2BodyFlag.e_awakeFlag;b.linearDamping=this.m_linearDamping;b.linearVelocity.Copy(this.GetLinearVelocity());b.position.Copy(this.GetPosition());b.userData=this.GetUserData();return b};goog.exportProperty(box2d.b2Body.prototype,"GetDefinition",box2d.b2Body.prototype.GetDefinition);box2d.b2Body.prototype.ApplyForce=function(e,d,f){this.m_type==box2d.b2BodyType.b2_dynamicBody&&(0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag&&(this.m_force.x+=e.x,this.m_force.y+=e.y,this.m_torque+=(d.x-this.m_sweep.c.x)*e.y-(d.y-this.m_sweep.c.y)*e.x))};goog.exportProperty(box2d.b2Body.prototype,"ApplyForce",box2d.b2Body.prototype.ApplyForce);box2d.b2Body.prototype.ApplyForceToCenter=function(e,d){this.m_type==box2d.b2BodyType.b2_dynamicBody&&(0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag&&(this.m_force.x+=e.x,this.m_force.y+=e.y))};goog.exportProperty(box2d.b2Body.prototype,"ApplyForceToCenter",box2d.b2Body.prototype.ApplyForceToCenter);box2d.b2Body.prototype.ApplyTorque=function(e,d){this.m_type==box2d.b2BodyType.b2_dynamicBody&&(0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag&&(this.m_torque+=e))};goog.exportProperty(box2d.b2Body.prototype,"ApplyTorque",box2d.b2Body.prototype.ApplyTorque);box2d.b2Body.prototype.ApplyLinearImpulse=function(e,d,f){this.m_type==box2d.b2BodyType.b2_dynamicBody&&(0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*e.x,this.m_linearVelocity.y+=this.m_invMass*e.y,this.m_angularVelocity+=this.m_invI*((d.x-this.m_sweep.c.x)*e.y-(d.y-this.m_sweep.c.y)*e.x)))};goog.exportProperty(box2d.b2Body.prototype,"ApplyLinearImpulse",box2d.b2Body.prototype.ApplyLinearImpulse);box2d.b2Body.prototype.ApplyAngularImpulse=function(e,d){this.m_type==box2d.b2BodyType.b2_dynamicBody&&(0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag&&(this.m_angularVelocity+=this.m_invI*e))};goog.exportProperty(box2d.b2Body.prototype,"ApplyAngularImpulse",box2d.b2Body.prototype.ApplyAngularImpulse);box2d.b2Body.prototype.GetMass=function(){return this.m_mass};goog.exportProperty(box2d.b2Body.prototype,"GetMass",box2d.b2Body.prototype.GetMass);box2d.b2Body.prototype.GetInertia=function(){return this.m_I+this.m_mass*box2d.b2DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter)};goog.exportProperty(box2d.b2Body.prototype,"GetInertia",box2d.b2Body.prototype.GetInertia);box2d.b2Body.prototype.GetMassData=function(b){b.mass=this.m_mass;b.I=this.m_I+this.m_mass*box2d.b2DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter);b.center.Copy(this.m_sweep.localCenter);return b};goog.exportProperty(box2d.b2Body.prototype,"GetMassData",box2d.b2Body.prototype.GetMassData);box2d.b2Body.prototype.SetMassData=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.m_world.IsLocked());if(!0!=this.m_world.IsLocked()&&this.m_type==box2d.b2BodyType.b2_dynamicBody){this.m_invI=this.m_I=this.m_invMass=0;this.m_mass=e.mass;0>=this.m_mass&&(this.m_mass=1);this.m_invMass=1/this.m_mass;0<e.I&&0==(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)&&(this.m_I=e.I-this.m_mass*box2d.b2DotVV(e.center,e.center),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_I),this.m_invI=1/this.m_I);var d=box2d.b2Body.prototype.SetMassData.s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(e.center);box2d.b2MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c);this.m_sweep.c0.Copy(this.m_sweep.c);box2d.b2AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,box2d.b2SubVV(this.m_sweep.c,d,box2d.b2Vec2.s_t0),this.m_linearVelocity)}};goog.exportProperty(box2d.b2Body.prototype,"SetMassData",box2d.b2Body.prototype.SetMassData);box2d.b2Body.prototype.SetMassData.s_oldCenter=new box2d.b2Vec2;box2d.b2Body.prototype.ResetMassData=function(){this.m_invI=this.m_I=this.m_invMass=this.m_mass=0;this.m_sweep.localCenter.SetZero();if(this.m_type==box2d.b2BodyType.b2_staticBody||this.m_type==box2d.b2BodyType.b2_kinematicBody){this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a}else{box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_type==box2d.b2BodyType.b2_dynamicBody);for(var e=box2d.b2Body.prototype.ResetMassData.s_localCenter.SetZero(),d=this.m_fixtureList;d;d=d.m_next){if(0!=d.m_density){var f=d.GetMassData(box2d.b2Body.prototype.ResetMassData.s_massData);this.m_mass+=f.mass;e.x+=f.center.x*f.mass;e.y+=f.center.y*f.mass;this.m_I+=f.I}}0<this.m_mass?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):this.m_invMass=this.m_mass=1;0<this.m_I&&0==(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)?(this.m_I-=this.m_mass*box2d.b2DotVV(e,e),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_I),this.m_invI=1/this.m_I):this.m_invI=this.m_I=0;d=box2d.b2Body.prototype.ResetMassData.s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(e);box2d.b2MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c);this.m_sweep.c0.Copy(this.m_sweep.c);box2d.b2AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,box2d.b2SubVV(this.m_sweep.c,d,box2d.b2Vec2.s_t0),this.m_linearVelocity)}};goog.exportProperty(box2d.b2Body.prototype,"ResetMassData",box2d.b2Body.prototype.ResetMassData);box2d.b2Body.prototype.ResetMassData.s_localCenter=new box2d.b2Vec2;box2d.b2Body.prototype.ResetMassData.s_oldCenter=new box2d.b2Vec2;box2d.b2Body.prototype.ResetMassData.s_massData=new box2d.b2MassData;box2d.b2Body.prototype.GetWorldPoint=function(e,d){return box2d.b2MulXV(this.m_xf,e,d)};goog.exportProperty(box2d.b2Body.prototype,"GetWorldPoint",box2d.b2Body.prototype.GetWorldPoint);box2d.b2Body.prototype.GetWorldVector=function(e,d){return box2d.b2MulRV(this.m_xf.q,e,d)};goog.exportProperty(box2d.b2Body.prototype,"GetWorldVector",box2d.b2Body.prototype.GetWorldVector);box2d.b2Body.prototype.GetLocalPoint=function(e,d){return box2d.b2MulTXV(this.m_xf,e,d)};goog.exportProperty(box2d.b2Body.prototype,"GetLocalPoint",box2d.b2Body.prototype.GetLocalPoint);box2d.b2Body.prototype.GetLocalVector=function(e,d){return box2d.b2MulTRV(this.m_xf.q,e,d)};goog.exportProperty(box2d.b2Body.prototype,"GetLocalVector",box2d.b2Body.prototype.GetLocalVector);box2d.b2Body.prototype.GetLinearVelocityFromWorldPoint=function(e,d){return box2d.b2AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,box2d.b2SubVV(e,this.m_sweep.c,box2d.b2Vec2.s_t0),d)};goog.exportProperty(box2d.b2Body.prototype,"GetLinearVelocityFromWorldPoint",box2d.b2Body.prototype.GetLinearVelocityFromWorldPoint);box2d.b2Body.prototype.GetLinearVelocityFromLocalPoint=function(e,d){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(e,d),d)};goog.exportProperty(box2d.b2Body.prototype,"GetLinearVelocityFromLocalPoint",box2d.b2Body.prototype.GetLinearVelocityFromLocalPoint);box2d.b2Body.prototype.GetLinearDamping=function(){return this.m_linearDamping};goog.exportProperty(box2d.b2Body.prototype,"GetLinearDamping",box2d.b2Body.prototype.GetLinearDamping);box2d.b2Body.prototype.SetLinearDamping=function(b){this.m_linearDamping=b};goog.exportProperty(box2d.b2Body.prototype,"SetLinearDamping",box2d.b2Body.prototype.SetLinearDamping);box2d.b2Body.prototype.GetAngularDamping=function(){return this.m_angularDamping};goog.exportProperty(box2d.b2Body.prototype,"GetAngularDamping",box2d.b2Body.prototype.GetAngularDamping);box2d.b2Body.prototype.SetAngularDamping=function(b){this.m_angularDamping=b};goog.exportProperty(box2d.b2Body.prototype,"SetAngularDamping",box2d.b2Body.prototype.SetAngularDamping);box2d.b2Body.prototype.GetGravityScale=function(){return this.m_gravityScale};goog.exportProperty(box2d.b2Body.prototype,"GetGravityScale",box2d.b2Body.prototype.GetGravityScale);box2d.b2Body.prototype.SetGravityScale=function(b){this.m_gravityScale=b};goog.exportProperty(box2d.b2Body.prototype,"SetGravityScale",box2d.b2Body.prototype.SetGravityScale);box2d.b2Body.prototype.SetType=function(f){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.m_world.IsLocked());if(!0!=this.m_world.IsLocked()&&this.m_type!=f){this.m_type=f;this.ResetMassData();this.m_type==box2d.b2BodyType.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures());this.SetAwake(!0);this.m_force.SetZero();this.m_torque=0;for(f=this.m_contactList;f;){var d=f;f=f.next;this.m_world.m_contactManager.Destroy(d.contact)}this.m_contactList=null;f=this.m_world.m_contactManager.m_broadPhase;for(d=this.m_fixtureList;d;d=d.m_next){for(var j=d.m_proxyCount,g=0;g<j;++g){f.TouchProxy(d.m_proxies[g].proxy)}}}};goog.exportProperty(box2d.b2Body.prototype,"SetType",box2d.b2Body.prototype.SetType);box2d.b2Body.prototype.GetType=function(){return this.m_type};goog.exportProperty(box2d.b2Body.prototype,"GetType",box2d.b2Body.prototype.GetType);box2d.b2Body.prototype.SetBullet=function(b){this.m_flags=b?this.m_flags|box2d.b2BodyFlag.e_bulletFlag:this.m_flags&~box2d.b2BodyFlag.e_bulletFlag};goog.exportProperty(box2d.b2Body.prototype,"SetBullet",box2d.b2Body.prototype.SetBullet);box2d.b2Body.prototype.IsBullet=function(){return(this.m_flags&box2d.b2BodyFlag.e_bulletFlag)==box2d.b2BodyFlag.e_bulletFlag};goog.exportProperty(box2d.b2Body.prototype,"IsBullet",box2d.b2Body.prototype.IsBullet);box2d.b2Body.prototype.SetSleepingAllowed=function(b){b?this.m_flags|=box2d.b2BodyFlag.e_autoSleepFlag:(this.m_flags&=~box2d.b2BodyFlag.e_autoSleepFlag,this.SetAwake(!0))};goog.exportProperty(box2d.b2Body.prototype,"SetSleepingAllowed",box2d.b2Body.prototype.SetSleepingAllowed);box2d.b2Body.prototype.IsSleepingAllowed=function(){return(this.m_flags&box2d.b2BodyFlag.e_autoSleepFlag)==box2d.b2BodyFlag.e_autoSleepFlag};goog.exportProperty(box2d.b2Body.prototype,"IsSleepingAllowed",box2d.b2Body.prototype.IsSleepingAllowed);box2d.b2Body.prototype.SetAwake=function(b){b?0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&(this.m_flags|=box2d.b2BodyFlag.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~box2d.b2BodyFlag.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)};goog.exportProperty(box2d.b2Body.prototype,"SetAwake",box2d.b2Body.prototype.SetAwake);box2d.b2Body.prototype.IsAwake=function(){return(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)==box2d.b2BodyFlag.e_awakeFlag};goog.exportProperty(box2d.b2Body.prototype,"IsAwake",box2d.b2Body.prototype.IsAwake);box2d.b2Body.prototype.SetActive=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.m_world.IsLocked());if(e!=this.IsActive()){if(e){this.m_flags|=box2d.b2BodyFlag.e_activeFlag;e=this.m_world.m_contactManager.m_broadPhase;for(var d=this.m_fixtureList;d;d=d.m_next){d.CreateProxies(e,this.m_xf)}}else{this.m_flags&=~box2d.b2BodyFlag.e_activeFlag;e=this.m_world.m_contactManager.m_broadPhase;for(d=this.m_fixtureList;d;d=d.m_next){d.DestroyProxies(e)}for(e=this.m_contactList;e;){d=e,e=e.next,this.m_world.m_contactManager.Destroy(d.contact)}this.m_contactList=null}}};goog.exportProperty(box2d.b2Body.prototype,"SetActive",box2d.b2Body.prototype.SetActive);box2d.b2Body.prototype.IsActive=function(){return(this.m_flags&box2d.b2BodyFlag.e_activeFlag)==box2d.b2BodyFlag.e_activeFlag};goog.exportProperty(box2d.b2Body.prototype,"IsActive",box2d.b2Body.prototype.IsActive);box2d.b2Body.prototype.SetFixedRotation=function(b){(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)==box2d.b2BodyFlag.e_fixedRotationFlag!=b&&(this.m_flags=b?this.m_flags|box2d.b2BodyFlag.e_fixedRotationFlag:this.m_flags&~box2d.b2BodyFlag.e_fixedRotationFlag,this.m_angularVelocity=0,this.ResetMassData())};goog.exportProperty(box2d.b2Body.prototype,"SetFixedRotation",box2d.b2Body.prototype.SetFixedRotation);box2d.b2Body.prototype.IsFixedRotation=function(){return(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)==box2d.b2BodyFlag.e_fixedRotationFlag};goog.exportProperty(box2d.b2Body.prototype,"IsFixedRotation",box2d.b2Body.prototype.IsFixedRotation);box2d.b2Body.prototype.GetFixtureList=function(){return this.m_fixtureList};goog.exportProperty(box2d.b2Body.prototype,"GetFixtureList",box2d.b2Body.prototype.GetFixtureList);box2d.b2Body.prototype.GetJointList=function(){return this.m_jointList};goog.exportProperty(box2d.b2Body.prototype,"GetJointList",box2d.b2Body.prototype.GetJointList);box2d.b2Body.prototype.GetContactList=function(){return this.m_contactList};goog.exportProperty(box2d.b2Body.prototype,"GetContactList",box2d.b2Body.prototype.GetContactList);box2d.b2Body.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2Body.prototype,"GetNext",box2d.b2Body.prototype.GetNext);box2d.b2Body.prototype.GetUserData=function(){return this.m_userData};goog.exportProperty(box2d.b2Body.prototype,"GetUserData",box2d.b2Body.prototype.GetUserData);box2d.b2Body.prototype.SetUserData=function(b){this.m_userData=b};goog.exportProperty(box2d.b2Body.prototype,"SetUserData",box2d.b2Body.prototype.SetUserData);box2d.b2Body.prototype.GetWorld=function(){return this.m_world};goog.exportProperty(box2d.b2Body.prototype,"GetWorld",box2d.b2Body.prototype.GetWorld);box2d.b2Body.prototype.SynchronizeFixtures=function(){var e=box2d.b2Body.prototype.SynchronizeFixtures.s_xf1;e.q.SetAngleRadians(this.m_sweep.a0);box2d.b2MulRV(e.q,this.m_sweep.localCenter,e.p);box2d.b2SubVV(this.m_sweep.c0,e.p,e.p);for(var d=this.m_world.m_contactManager.m_broadPhase,f=this.m_fixtureList;f;f=f.m_next){f.Synchronize(d,e,this.m_xf)}};goog.exportProperty(box2d.b2Body.prototype,"SynchronizeFixtures",box2d.b2Body.prototype.SynchronizeFixtures);box2d.b2Body.prototype.SynchronizeFixtures.s_xf1=new box2d.b2Transform;box2d.b2Body.prototype.SynchronizeTransform=function(){this.m_xf.q.SetAngleRadians(this.m_sweep.a);box2d.b2MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p);box2d.b2SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)};goog.exportProperty(box2d.b2Body.prototype,"SynchronizeTransform",box2d.b2Body.prototype.SynchronizeTransform);box2d.b2Body.prototype.ShouldCollide=function(e){if(this.m_type!=box2d.b2BodyType.b2_dynamicBody&&e.m_type!=box2d.b2BodyType.b2_dynamicBody){return !1}for(var d=this.m_jointList;d;d=d.next){if(d.other==e&&!1==d.joint.m_collideConnected){return !1}}return !0};goog.exportProperty(box2d.b2Body.prototype,"ShouldCollide",box2d.b2Body.prototype.ShouldCollide);box2d.b2Body.prototype.Advance=function(b){this.m_sweep.Advance(b);this.m_sweep.c.Copy(this.m_sweep.c0);this.m_sweep.a=this.m_sweep.a0;this.m_xf.q.SetAngleRadians(this.m_sweep.a);box2d.b2MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p);box2d.b2SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)};goog.exportProperty(box2d.b2Body.prototype,"Advance",box2d.b2Body.prototype.Advance);box2d.b2Body.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_islandIndex;box2d.b2Log("if (true)\n");box2d.b2Log("{\n");box2d.b2Log("  /*box2d.b2BodyDef*/ var bd = new box2d.b2BodyDef();\n");var d="";switch(this.m_type){case box2d.b2BodyType.b2_staticBody:d="box2d.b2BodyType.b2_staticBody";break;case box2d.b2BodyType.b2_kinematicBody:d="box2d.b2BodyType.b2_kinematicBody";break;case box2d.b2BodyType.b2_dynamicBody:d="box2d.b2BodyType.b2_dynamicBody";break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}box2d.b2Log("  bd.type = %s;\n",d);box2d.b2Log("  bd.position.SetXY(%.15f, %.15f);\n",this.m_xf.p.x,this.m_xf.p.y);box2d.b2Log("  bd.angle = %.15f;\n",this.m_sweep.a);box2d.b2Log("  bd.linearVelocity.SetXY(%.15f, %.15f);\n",this.m_linearVelocity.x,this.m_linearVelocity.y);box2d.b2Log("  bd.angularVelocity = %.15f;\n",this.m_angularVelocity);box2d.b2Log("  bd.linearDamping = %.15f;\n",this.m_linearDamping);box2d.b2Log("  bd.angularDamping = %.15f;\n",this.m_angularDamping);box2d.b2Log("  bd.allowSleep = %s;\n",this.m_flags&box2d.b2BodyFlag.e_autoSleepFlag?"true":"false");box2d.b2Log("  bd.awake = %s;\n",this.m_flags&box2d.b2BodyFlag.e_awakeFlag?"true":"false");box2d.b2Log("  bd.fixedRotation = %s;\n",this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag?"true":"false");box2d.b2Log("  bd.bullet = %s;\n",this.m_flags&box2d.b2BodyFlag.e_bulletFlag?"true":"false");box2d.b2Log("  bd.active = %s;\n",this.m_flags&box2d.b2BodyFlag.e_activeFlag?"true":"false");box2d.b2Log("  bd.gravityScale = %.15f;\n",this.m_gravityScale);box2d.b2Log("\n");box2d.b2Log("  bodies[%d] = this.m_world.CreateBody(bd);\n",this.m_islandIndex);box2d.b2Log("\n");for(d=this.m_fixtureList;d;d=d.m_next){box2d.b2Log("  if (true)\n"),box2d.b2Log("  {\n"),d.Dump(e),box2d.b2Log("  }\n")}box2d.b2Log("}\n")}};goog.exportProperty(box2d.b2Body.prototype,"Dump",box2d.b2Body.prototype.Dump);box2d.b2Body.prototype.GetControllerList=function(){return this.m_controllerList};goog.exportProperty(box2d.b2Body.prototype,"GetControllerList",box2d.b2Body.prototype.GetControllerList);box2d.b2Body.prototype.GetControllerCount=function(){return this.m_controllerCount};goog.exportProperty(box2d.b2Body.prototype,"GetControllerCount",box2d.b2Body.prototype.GetControllerCount);box2d.b2WorldFlag={e_none:0,e_newFixture:1,e_locked:2,e_clearForces:4};goog.exportSymbol("box2d.b2WorldFlag",box2d.b2WorldFlag);goog.exportProperty(box2d.b2WorldFlag,"e_none",box2d.b2WorldFlag.e_none);goog.exportProperty(box2d.b2WorldFlag,"e_newFixture",box2d.b2WorldFlag.e_newFixture);goog.exportProperty(box2d.b2WorldFlag,"e_locked",box2d.b2WorldFlag.e_locked);goog.exportProperty(box2d.b2WorldFlag,"e_clearForces",box2d.b2WorldFlag.e_clearForces);box2d.b2World=function(b){this.m_flags=box2d.b2WorldFlag.e_clearForces;this.m_contactManager=new box2d.b2ContactManager;this.m_gravity=b.Clone();this.m_out_gravity=new box2d.b2Vec2;this.m_allowSleep=!0;this.m_debugDraw=this.m_destructionListener=null;this.m_continuousPhysics=this.m_warmStarting=!0;this.m_subStepping=!1;this.m_stepComplete=!0;this.m_profile=new box2d.b2Profile;this.m_island=new box2d.b2Island;this.s_stack=[]};goog.exportSymbol("box2d.b2World",box2d.b2World);box2d.b2World.prototype.m_flags=box2d.b2WorldFlag.e_none;goog.exportProperty(box2d.b2World.prototype,"m_flags",box2d.b2World.prototype.m_flags);box2d.b2World.prototype.m_contactManager=null;goog.exportProperty(box2d.b2World.prototype,"m_contactManager",box2d.b2World.prototype.m_contactManager);box2d.b2World.prototype.m_bodyList=null;goog.exportProperty(box2d.b2World.prototype,"m_bodyList",box2d.b2World.prototype.m_bodyList);box2d.b2World.prototype.m_jointList=null;goog.exportProperty(box2d.b2World.prototype,"m_jointList",box2d.b2World.prototype.m_jointList);box2d.b2World.prototype.m_bodyCount=0;goog.exportProperty(box2d.b2World.prototype,"m_bodyCount",box2d.b2World.prototype.m_bodyCount);box2d.b2World.prototype.m_jointCount=0;goog.exportProperty(box2d.b2World.prototype,"m_jointCount",box2d.b2World.prototype.m_jointCount);box2d.b2World.prototype.m_gravity=null;goog.exportProperty(box2d.b2World.prototype,"m_gravity",box2d.b2World.prototype.m_gravity);box2d.b2World.prototype.m_out_gravity=null;goog.exportProperty(box2d.b2World.prototype,"m_out_gravity",box2d.b2World.prototype.m_out_gravity);box2d.b2World.prototype.m_allowSleep=!0;goog.exportProperty(box2d.b2World.prototype,"m_allowSleep",box2d.b2World.prototype.m_allowSleep);box2d.b2World.prototype.m_destructionListener=null;goog.exportProperty(box2d.b2World.prototype,"m_destructionListener",box2d.b2World.prototype.m_destructionListener);box2d.b2World.prototype.m_debugDraw=null;goog.exportProperty(box2d.b2World.prototype,"m_debugDraw",box2d.b2World.prototype.m_debugDraw);box2d.b2World.prototype.m_inv_dt0=0;goog.exportProperty(box2d.b2World.prototype,"m_inv_dt0",box2d.b2World.prototype.m_inv_dt0);box2d.b2World.prototype.m_warmStarting=!0;goog.exportProperty(box2d.b2World.prototype,"m_warmStarting",box2d.b2World.prototype.m_warmStarting);box2d.b2World.prototype.m_continuousPhysics=!0;goog.exportProperty(box2d.b2World.prototype,"m_continuousPhysics",box2d.b2World.prototype.m_continuousPhysics);box2d.b2World.prototype.m_subStepping=!1;goog.exportProperty(box2d.b2World.prototype,"m_subStepping",box2d.b2World.prototype.m_subStepping);box2d.b2World.prototype.m_stepComplete=!0;goog.exportProperty(box2d.b2World.prototype,"m_stepComplete",box2d.b2World.prototype.m_stepComplete);box2d.b2World.prototype.m_profile=null;goog.exportProperty(box2d.b2World.prototype,"m_profile",box2d.b2World.prototype.m_profile);box2d.b2World.prototype.m_island=null;goog.exportProperty(box2d.b2World.prototype,"m_island",box2d.b2World.prototype.m_island);box2d.b2World.prototype.s_stack=null;goog.exportProperty(box2d.b2World.prototype,"s_stack",box2d.b2World.prototype.s_stack);box2d.b2World.prototype.m_controllerList=null;goog.exportProperty(box2d.b2World.prototype,"m_controllerList",box2d.b2World.prototype.m_controllerList);box2d.b2World.prototype.m_controllerCount=0;goog.exportProperty(box2d.b2World.prototype,"m_controllerCount",box2d.b2World.prototype.m_controllerCount);box2d.b2World.prototype.SetAllowSleeping=function(b){if(b!=this.m_allowSleep&&(this.m_allowSleep=b,!1==this.m_allowSleep)){for(b=this.m_bodyList;b;b=b.m_next){b.SetAwake(!0)}}};goog.exportProperty(box2d.b2World.prototype,"SetAllowSleeping",box2d.b2World.prototype.SetAllowSleeping);box2d.b2World.prototype.GetAllowSleeping=function(){return this.m_allowSleep};goog.exportProperty(box2d.b2World.prototype,"GetAllowSleeping",box2d.b2World.prototype.GetAllowSleeping);box2d.b2World.prototype.SetWarmStarting=function(b){this.m_warmStarting=b};goog.exportProperty(box2d.b2World.prototype,"SetWarmStarting",box2d.b2World.prototype.SetWarmStarting);box2d.b2World.prototype.GetWarmStarting=function(){return this.m_warmStarting};goog.exportProperty(box2d.b2World.prototype,"GetWarmStarting",box2d.b2World.prototype.GetWarmStarting);box2d.b2World.prototype.SetContinuousPhysics=function(b){this.m_continuousPhysics=b};goog.exportProperty(box2d.b2World.prototype,"SetContinuousPhysics",box2d.b2World.prototype.SetContinuousPhysics);box2d.b2World.prototype.GetContinuousPhysics=function(){return this.m_continuousPhysics};goog.exportProperty(box2d.b2World.prototype,"GetContinuousPhysics",box2d.b2World.prototype.GetContinuousPhysics);box2d.b2World.prototype.SetSubStepping=function(b){this.m_subStepping=b};goog.exportProperty(box2d.b2World.prototype,"SetSubStepping",box2d.b2World.prototype.SetSubStepping);box2d.b2World.prototype.GetSubStepping=function(){return this.m_subStepping};goog.exportProperty(box2d.b2World.prototype,"GetSubStepping",box2d.b2World.prototype.GetSubStepping);box2d.b2World.prototype.GetBodyList=function(){return this.m_bodyList};goog.exportProperty(box2d.b2World.prototype,"GetBodyList",box2d.b2World.prototype.GetBodyList);box2d.b2World.prototype.GetJointList=function(){return this.m_jointList};goog.exportProperty(box2d.b2World.prototype,"GetJointList",box2d.b2World.prototype.GetJointList);box2d.b2World.prototype.GetContactList=function(){return this.m_contactManager.m_contactList};goog.exportProperty(box2d.b2World.prototype,"GetContactList",box2d.b2World.prototype.GetContactList);box2d.b2World.prototype.GetBodyCount=function(){return this.m_bodyCount};goog.exportProperty(box2d.b2World.prototype,"GetBodyCount",box2d.b2World.prototype.GetBodyCount);box2d.b2World.prototype.GetJointCount=function(){return this.m_jointCount};goog.exportProperty(box2d.b2World.prototype,"GetJointCount",box2d.b2World.prototype.GetJointCount);box2d.b2World.prototype.GetContactCount=function(){return this.m_contactManager.m_contactCount};goog.exportProperty(box2d.b2World.prototype,"GetContactCount",box2d.b2World.prototype.GetContactCount);box2d.b2World.prototype.SetGravity=function(e,d){d=d||!0;if(this.m_gravity.x!==e.x||this.m_gravity.y!==e.y){if(this.m_gravity.Copy(e),d){for(var f=this.m_bodyList;f;f=f.m_next){f.SetAwake(!0)}}}};goog.exportProperty(box2d.b2World.prototype,"SetGravity",box2d.b2World.prototype.SetGravity);box2d.b2World.prototype.GetGravity=function(b){b=b||this.m_out_gravity;return b.Copy(this.m_gravity)};goog.exportProperty(box2d.b2World.prototype,"GetGravity",box2d.b2World.prototype.GetGravity);box2d.b2World.prototype.IsLocked=function(){return 0<(this.m_flags&box2d.b2WorldFlag.e_locked)};goog.exportProperty(box2d.b2World.prototype,"IsLocked",box2d.b2World.prototype.IsLocked);box2d.b2World.prototype.SetAutoClearForces=function(b){this.m_flags=b?this.m_flags|box2d.b2WorldFlag.e_clearForces:this.m_flags&~box2d.b2WorldFlag.e_clearForces};goog.exportProperty(box2d.b2World.prototype,"SetAutoClearForces",box2d.b2World.prototype.SetAutoClearForces);box2d.b2World.prototype.GetAutoClearForces=function(){return(this.m_flags&box2d.b2WorldFlag.e_clearForces)==box2d.b2WorldFlag.e_clearForces};goog.exportProperty(box2d.b2World.prototype,"GetAutoClearForces",box2d.b2World.prototype.GetAutoClearForces);box2d.b2World.prototype.GetContactManager=function(){return this.m_contactManager};goog.exportProperty(box2d.b2World.prototype,"GetContactManager",box2d.b2World.prototype.GetContactManager);box2d.b2World.prototype.GetProfile=function(){return this.m_profile};goog.exportProperty(box2d.b2World.prototype,"GetProfile",box2d.b2World.prototype.GetProfile);box2d.b2World.prototype.SetDestructionListener=function(b){this.m_destructionListener=b};goog.exportProperty(box2d.b2World.prototype,"SetDestructionListener",box2d.b2World.prototype.SetDestructionListener);box2d.b2World.prototype.SetContactFilter=function(b){this.m_contactManager.m_contactFilter=b};goog.exportProperty(box2d.b2World.prototype,"SetContactFilter",box2d.b2World.prototype.SetContactFilter);box2d.b2World.prototype.SetContactListener=function(b){this.m_contactManager.m_contactListener=b};goog.exportProperty(box2d.b2World.prototype,"SetContactListener",box2d.b2World.prototype.SetContactListener);box2d.b2World.prototype.SetDebugDraw=function(b){this.m_debugDraw=b};goog.exportProperty(box2d.b2World.prototype,"SetDebugDraw",box2d.b2World.prototype.SetDebugDraw);box2d.b2World.prototype.CreateBody=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.IsLocked());if(this.IsLocked()){return null}b=new box2d.b2Body(b,this);b.m_prev=null;if(b.m_next=this.m_bodyList){this.m_bodyList.m_prev=b}this.m_bodyList=b;++this.m_bodyCount;return b};goog.exportProperty(box2d.b2World.prototype,"CreateBody",box2d.b2World.prototype.CreateBody);box2d.b2World.prototype.DestroyBody=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_bodyCount);box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.IsLocked());if(!this.IsLocked()){for(var d=e.m_jointList;d;){var f=d,d=d.next;this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(f.joint);this.DestroyJoint(f.joint);e.m_jointList=d}e.m_jointList=null;for(d=e.m_controllerList;d;){f=d,d=d.nextController,f.controller.RemoveBody(e)}for(d=e.m_contactList;d;){f=d,d=d.next,this.m_contactManager.Destroy(f.contact)}e.m_contactList=null;for(d=e.m_fixtureList;d;){f=d,d=d.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(f),f.DestroyProxies(this.m_contactManager.m_broadPhase),f.Destroy(),e.m_fixtureList=d,e.m_fixtureCount-=1}e.m_fixtureList=null;e.m_fixtureCount=0;e.m_prev&&(e.m_prev.m_next=e.m_next);e.m_next&&(e.m_next.m_prev=e.m_prev);e==this.m_bodyList&&(this.m_bodyList=e.m_next);--this.m_bodyCount}};goog.exportProperty(box2d.b2World.prototype,"DestroyBody",box2d.b2World.prototype.DestroyBody);box2d.b2World.prototype.CreateJoint=function(f){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.IsLocked());if(this.IsLocked()){return null}var d=box2d.b2JointFactory.Create(f,null);d.m_prev=null;if(d.m_next=this.m_jointList){this.m_jointList.m_prev=d}this.m_jointList=d;++this.m_jointCount;d.m_edgeA.joint=d;d.m_edgeA.other=d.m_bodyB;d.m_edgeA.prev=null;if(d.m_edgeA.next=d.m_bodyA.m_jointList){d.m_bodyA.m_jointList.prev=d.m_edgeA}d.m_bodyA.m_jointList=d.m_edgeA;d.m_edgeB.joint=d;d.m_edgeB.other=d.m_bodyA;d.m_edgeB.prev=null;if(d.m_edgeB.next=d.m_bodyB.m_jointList){d.m_bodyB.m_jointList.prev=d.m_edgeB}d.m_bodyB.m_jointList=d.m_edgeB;var j=f.bodyA,g=f.bodyB;if(!1==f.collideConnected){for(f=g.GetContactList();f;){f.other==j&&f.contact.FlagForFiltering(),f=f.next}}return d};goog.exportProperty(box2d.b2World.prototype,"CreateJoint",box2d.b2World.prototype.CreateJoint);box2d.b2World.prototype.DestroyJoint=function(f){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.IsLocked());if(!this.IsLocked()){var d=f.m_collideConnected;f.m_prev&&(f.m_prev.m_next=f.m_next);f.m_next&&(f.m_next.m_prev=f.m_prev);f==this.m_jointList&&(this.m_jointList=f.m_next);var j=f.m_bodyA,g=f.m_bodyB;j.SetAwake(!0);g.SetAwake(!0);f.m_edgeA.prev&&(f.m_edgeA.prev.next=f.m_edgeA.next);f.m_edgeA.next&&(f.m_edgeA.next.prev=f.m_edgeA.prev);f.m_edgeA==j.m_jointList&&(j.m_jointList=f.m_edgeA.next);f.m_edgeA.prev=null;f.m_edgeA.next=null;f.m_edgeB.prev&&(f.m_edgeB.prev.next=f.m_edgeB.next);f.m_edgeB.next&&(f.m_edgeB.next.prev=f.m_edgeB.prev);f.m_edgeB==g.m_jointList&&(g.m_jointList=f.m_edgeB.next);f.m_edgeB.prev=null;f.m_edgeB.next=null;box2d.b2JointFactory.Destroy(f,null);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_jointCount);--this.m_jointCount;if(!1==d){for(f=g.GetContactList();f;){f.other==j&&f.contact.FlagForFiltering(),f=f.next}}}};goog.exportProperty(box2d.b2World.prototype,"DestroyJoint",box2d.b2World.prototype.DestroyJoint);box2d.b2World.prototype.Solve=function(z){for(var y=this.m_controllerList;y;y=y.m_next){y.Step(z)}this.m_profile.solveInit=0;this.m_profile.solveVelocity=0;this.m_profile.solvePosition=0;y=this.m_island;y.Initialize(this.m_bodyCount,this.m_contactManager.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener);for(var v=this.m_bodyList;v;v=v.m_next){v.m_flags&=~box2d.b2BodyFlag.e_islandFlag}for(var s=this.m_contactManager.m_contactList;s;s=s.m_next){s.m_flags&=~box2d.b2ContactFlag.e_islandFlag}for(s=this.m_jointList;s;s=s.m_next){s.m_islandFlag=!1}for(var s=this.m_bodyCount,u=this.s_stack,r=this.m_bodyList;r;r=r.m_next){if(!(r.m_flags&box2d.b2BodyFlag.e_islandFlag)&&!1!=r.IsAwake()&&!1!=r.IsActive()&&r.GetType()!=box2d.b2BodyType.b2_staticBody){y.Clear();var q=0;u[q++]=r;for(r.m_flags|=box2d.b2BodyFlag.e_islandFlag;0<q;){if(v=u[--q],box2d.ENABLE_ASSERTS&&box2d.b2Assert(!0==v.IsActive()),y.AddBody(v),v.SetAwake(!0),v.GetType()!=box2d.b2BodyType.b2_staticBody){for(var n=v.m_contactList;n;n=n.next){var j=n.contact;if(!(j.m_flags&box2d.b2ContactFlag.e_islandFlag)&&!1!=j.IsEnabled()&&!1!=j.IsTouching()){var m=j.m_fixtureB.m_isSensor;j.m_fixtureA.m_isSensor||m||(y.AddContact(j),j.m_flags|=box2d.b2ContactFlag.e_islandFlag,j=n.other,j.m_flags&box2d.b2BodyFlag.e_islandFlag||(box2d.ENABLE_ASSERTS&&box2d.b2Assert(q<s),u[q++]=j,j.m_flags|=box2d.b2BodyFlag.e_islandFlag))}}for(v=v.m_jointList;v;v=v.next){!0!=v.joint.m_islandFlag&&(j=v.other,!1!=j.IsActive()&&(y.AddJoint(v.joint),v.joint.m_islandFlag=!0,j.m_flags&box2d.b2BodyFlag.e_islandFlag||(box2d.ENABLE_ASSERTS&&box2d.b2Assert(q<s),u[q++]=j,j.m_flags|=box2d.b2BodyFlag.e_islandFlag)))}}}v=new box2d.b2Profile;y.Solve(v,z,this.m_gravity,this.m_allowSleep);this.m_profile.solveInit+=v.solveInit;this.m_profile.solveVelocity+=v.solveVelocity;this.m_profile.solvePosition+=v.solvePosition;for(q=0;q<y.m_bodyCount;++q){v=y.m_bodies[q],v.GetType()==box2d.b2BodyType.b2_staticBody&&(v.m_flags&=~box2d.b2BodyFlag.e_islandFlag)}}}for(q=0;q<u.length&&u[q];++q){u[q]=null}z=new box2d.b2Timer;for(v=this.m_bodyList;v;v=v.m_next){0!=(v.m_flags&box2d.b2BodyFlag.e_islandFlag)&&v.GetType()!=box2d.b2BodyType.b2_staticBody&&v.SynchronizeFixtures()}this.m_contactManager.FindNewContacts();this.m_profile.broadphase=z.GetMilliseconds()};goog.exportProperty(box2d.b2World.prototype,"Solve",box2d.b2World.prototype.Solve);box2d.b2World.prototype.SolveTOI=function(E){var D=this.m_island;D.Initialize(2*box2d.b2_maxTOIContacts,box2d.b2_maxTOIContacts,0,null,this.m_contactManager.m_contactListener);if(this.m_stepComplete){for(var C=this.m_bodyList;C;C=C.m_next){C.m_flags&=~box2d.b2BodyFlag.e_islandFlag,C.m_sweep.alpha0=0}for(var A=this.m_contactManager.m_contactList;A;A=A.m_next){A.m_flags&=~(box2d.b2ContactFlag.e_toiFlag|box2d.b2ContactFlag.e_islandFlag),A.m_toiCount=0,A.m_toi=1}}for(;;){for(var B=null,C=1,A=this.m_contactManager.m_contactList;A;A=A.m_next){if(!1!=A.IsEnabled()&&!(A.m_toiCount>box2d.b2_maxSubSteps)){var z=1;if(A.m_flags&box2d.b2ContactFlag.e_toiFlag){z=A.m_toi}else{var y=A.GetFixtureA(),v=A.GetFixtureB();if(y.IsSensor()||v.IsSensor()){continue}var z=y.GetBody(),s=v.GetBody(),u=z.m_type,r=s.m_type;box2d.ENABLE_ASSERTS&&box2d.b2Assert(u==box2d.b2BodyType.b2_dynamicBody||r==box2d.b2BodyType.b2_dynamicBody);var q=z.IsAwake()&&u!=box2d.b2BodyType.b2_staticBody,j=s.IsAwake()&&r!=box2d.b2BodyType.b2_staticBody;if(!1==q&&!1==j){continue}u=z.IsBullet()||u!=box2d.b2BodyType.b2_dynamicBody;r=s.IsBullet()||r!=box2d.b2BodyType.b2_dynamicBody;if(!1==u&&!1==r){continue}r=z.m_sweep.alpha0;z.m_sweep.alpha0<s.m_sweep.alpha0?(r=s.m_sweep.alpha0,z.m_sweep.Advance(r)):s.m_sweep.alpha0<z.m_sweep.alpha0&&(r=z.m_sweep.alpha0,s.m_sweep.Advance(r));box2d.ENABLE_ASSERTS&&box2d.b2Assert(1>r);q=A.GetChildIndexA();j=A.GetChildIndexB();u=box2d.b2World.prototype.SolveTOI.s_toi_input;u.proxyA.SetShape(y.GetShape(),q);u.proxyB.SetShape(v.GetShape(),j);u.sweepA.Copy(z.m_sweep);u.sweepB.Copy(s.m_sweep);u.tMax=1;z=box2d.b2World.prototype.SolveTOI.s_toi_output;box2d.b2TimeOfImpact(z,u);s=z.t;z=z.state==box2d.b2TOIOutputState.e_touching?box2d.b2Min(r+(1-r)*s,1):1;A.m_toi=z;A.m_flags|=box2d.b2ContactFlag.e_toiFlag}z<C&&(B=A,C=z)}}if(null==B||1-10*box2d.b2_epsilon<C){this.m_stepComplete=!0;break}y=B.GetFixtureA();v=B.GetFixtureB();z=y.GetBody();s=v.GetBody();A=box2d.b2World.prototype.SolveTOI.s_backup1.Copy(z.m_sweep);y=box2d.b2World.prototype.SolveTOI.s_backup2.Copy(s.m_sweep);z.Advance(C);s.Advance(C);B.Update(this.m_contactManager.m_contactListener);B.m_flags&=~box2d.b2ContactFlag.e_toiFlag;++B.m_toiCount;if(!1==B.IsEnabled()||!1==B.IsTouching()){B.SetEnabled(!1),z.m_sweep.Copy(A),s.m_sweep.Copy(y),z.SynchronizeTransform(),s.SynchronizeTransform()}else{z.SetAwake(!0);s.SetAwake(!0);D.Clear();D.AddBody(z);D.AddBody(s);D.AddContact(B);z.m_flags|=box2d.b2BodyFlag.e_islandFlag;s.m_flags|=box2d.b2BodyFlag.e_islandFlag;B.m_flags|=box2d.b2ContactFlag.e_islandFlag;for(B=0;2>B;++B){if(A=0==B?z:s,A.m_type==box2d.b2BodyType.b2_dynamicBody){for(y=A.m_contactList;y&&D.m_bodyCount!=D.m_bodyCapacity&&D.m_contactCount!=D.m_contactCapacity;y=y.next){v=y.contact,v.m_flags&box2d.b2ContactFlag.e_islandFlag||(r=y.other,r.m_type==box2d.b2BodyType.b2_dynamicBody&&!1==A.IsBullet()&&!1==r.IsBullet())||(u=v.m_fixtureB.m_isSensor,v.m_fixtureA.m_isSensor||u||(u=box2d.b2World.prototype.SolveTOI.s_backup.Copy(r.m_sweep),0==(r.m_flags&box2d.b2BodyFlag.e_islandFlag)&&r.Advance(C),v.Update(this.m_contactManager.m_contactListener),!1==v.IsEnabled()?(r.m_sweep.Copy(u),r.SynchronizeTransform()):!1==v.IsTouching()?(r.m_sweep.Copy(u),r.SynchronizeTransform()):(v.m_flags|=box2d.b2ContactFlag.e_islandFlag,D.AddContact(v),r.m_flags&box2d.b2BodyFlag.e_islandFlag||(r.m_flags|=box2d.b2BodyFlag.e_islandFlag,r.m_type!=box2d.b2BodyType.b2_staticBody&&r.SetAwake(!0),D.AddBody(r)))))}}}B=box2d.b2World.prototype.SolveTOI.s_subStep;B.dt=(1-C)*E.dt;B.inv_dt=1/B.dt;B.dtRatio=1;B.positionIterations=20;B.velocityIterations=E.velocityIterations;B.warmStarting=!1;D.SolveTOI(B,z.m_islandIndex,s.m_islandIndex);for(B=0;B<D.m_bodyCount;++B){if(A=D.m_bodies[B],A.m_flags&=~box2d.b2BodyFlag.e_islandFlag,A.m_type==box2d.b2BodyType.b2_dynamicBody){for(A.SynchronizeFixtures(),y=A.m_contactList;y;y=y.next){y.contact.m_flags&=~(box2d.b2ContactFlag.e_toiFlag|box2d.b2ContactFlag.e_islandFlag)}}}this.m_contactManager.FindNewContacts();if(this.m_subStepping){this.m_stepComplete=!1;break}}}};goog.exportProperty(box2d.b2World.prototype,"SolveTOI",box2d.b2World.prototype.SolveTOI);box2d.b2World.prototype.SolveTOI.s_subStep=new box2d.b2TimeStep;box2d.b2World.prototype.SolveTOI.s_backup=new box2d.b2Sweep;box2d.b2World.prototype.SolveTOI.s_backup1=new box2d.b2Sweep;box2d.b2World.prototype.SolveTOI.s_backup2=new box2d.b2Sweep;box2d.b2World.prototype.SolveTOI.s_toi_input=new box2d.b2TOIInput;box2d.b2World.prototype.SolveTOI.s_toi_output=new box2d.b2TOIOutput;box2d.b2World.prototype.Step=function(g,f,m){var j=new box2d.b2Timer;this.m_flags&box2d.b2WorldFlag.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~box2d.b2WorldFlag.e_newFixture);this.m_flags|=box2d.b2WorldFlag.e_locked;var k=box2d.b2World.prototype.Step.s_step;k.dt=g;k.velocityIterations=f;k.positionIterations=m;k.inv_dt=0<g?1/g:0;k.dtRatio=this.m_inv_dt0*g;k.warmStarting=this.m_warmStarting;g=new box2d.b2Timer;this.m_contactManager.Collide();this.m_profile.collide=g.GetMilliseconds();this.m_stepComplete&&0<k.dt&&(g=new box2d.b2Timer,this.Solve(k),this.m_profile.solve=g.GetMilliseconds());this.m_continuousPhysics&&0<k.dt&&(g=new box2d.b2Timer,this.SolveTOI(k),this.m_profile.solveTOI=g.GetMilliseconds());0<k.dt&&(this.m_inv_dt0=k.inv_dt);this.m_flags&box2d.b2WorldFlag.e_clearForces&&this.ClearForces();this.m_flags&=~box2d.b2WorldFlag.e_locked;this.m_profile.step=j.GetMilliseconds()};goog.exportProperty(box2d.b2World.prototype,"Step",box2d.b2World.prototype.Step);box2d.b2World.prototype.Step.s_step=new box2d.b2TimeStep;box2d.b2World.prototype.ClearForces=function(){for(var b=this.m_bodyList;b;b=b.m_next){b.m_force.SetZero(),b.m_torque=0}};goog.exportProperty(box2d.b2World.prototype,"ClearForces",box2d.b2World.prototype.ClearForces);box2d.b2World.prototype.QueryAABB=function(e,d){var f=this.m_contactManager.m_broadPhase;f.Query(function(a){a=f.GetUserData(a);box2d.ENABLE_ASSERTS&&box2d.b2Assert(a instanceof box2d.b2FixtureProxy);a=a.fixture;return e instanceof box2d.b2QueryCallback?e.ReportFixture(a):e(a)},d)};goog.exportProperty(box2d.b2World.prototype,"QueryAABB",box2d.b2World.prototype.QueryAABB);box2d.b2World.prototype.QueryShape=function(g,f,m){var j=this.m_contactManager.m_broadPhase,k=box2d.b2World.prototype.QueryShape.s_aabb;f.ComputeAABB(k,m,0);j.Query(function(a){a=j.GetUserData(a);box2d.ENABLE_ASSERTS&&box2d.b2Assert(a instanceof box2d.b2FixtureProxy);a=a.fixture;return box2d.b2TestOverlapShape(f,0,a.GetShape(),0,m,a.GetBody().GetTransform())?g instanceof box2d.b2QueryCallback?g.ReportFixture(a):g(a):!0},k)};goog.exportProperty(box2d.b2World.prototype,"QueryShape",box2d.b2World.prototype.QueryShape);box2d.b2World.prototype.QueryShape.s_aabb=new box2d.b2AABB;box2d.b2World.prototype.QueryPoint=function(f,d){var j=this.m_contactManager.m_broadPhase,g=box2d.b2World.prototype.QueryPoint.s_aabb;g.lowerBound.SetXY(d.x-box2d.b2_linearSlop,d.y-box2d.b2_linearSlop);g.upperBound.SetXY(d.x+box2d.b2_linearSlop,d.y+box2d.b2_linearSlop);j.Query(function(a){a=j.GetUserData(a);box2d.ENABLE_ASSERTS&&box2d.b2Assert(a instanceof box2d.b2FixtureProxy);a=a.fixture;return a.TestPoint(d)?f instanceof box2d.b2QueryCallback?f.ReportFixture(a):f(a):!0},g)};goog.exportProperty(box2d.b2World.prototype,"QueryPoint",box2d.b2World.prototype.QueryPoint);box2d.b2World.prototype.QueryPoint.s_aabb=new box2d.b2AABB;box2d.b2World.prototype.RayCast=function(g,f,m){var j=this.m_contactManager.m_broadPhase,k=box2d.b2World.prototype.RayCast.s_input;k.maxFraction=1;k.p1.Copy(f);k.p2.Copy(m);j.RayCast(function(r,q){var n=j.GetUserData(q);box2d.ENABLE_ASSERTS&&box2d.b2Assert(n instanceof box2d.b2FixtureProxy);var b=n.fixture,e=box2d.b2World.prototype.RayCast.s_output;if(b.RayCast(e,r,n.childIndex)){var n=e.fraction,a=box2d.b2World.prototype.RayCast.s_point;a.SetXY((1-n)*f.x+n*m.x,(1-n)*f.y+n*m.y);return g instanceof box2d.b2RayCastCallback?g.ReportFixture(b,a,e.normal,n):g(b,a,e.normal,n)}return r.maxFraction},k)};goog.exportProperty(box2d.b2World.prototype,"RayCast",box2d.b2World.prototype.RayCast);box2d.b2World.prototype.RayCast.s_input=new box2d.b2RayCastInput;box2d.b2World.prototype.RayCast.s_output=new box2d.b2RayCastOutput;box2d.b2World.prototype.RayCast.s_point=new box2d.b2Vec2;box2d.b2World.prototype.RayCastOne=function(f,d){var j=null,g=1;this.RayCast(function(k,e,n,m){m<g&&(g=m,j=k);return g},f,d);return j};goog.exportProperty(box2d.b2World.prototype,"RayCastOne",box2d.b2World.prototype.RayCastOne);box2d.b2World.prototype.RayCastAll=function(e,d,f){f.length=0;this.RayCast(function(k,j,n,m){f.push(k);return 1},e,d);return f};goog.exportProperty(box2d.b2World.prototype,"RayCastAll",box2d.b2World.prototype.RayCastAll);box2d.b2World.prototype.DrawShape=function(k,j){var s=k.GetShape();switch(s.m_type){case box2d.b2ShapeType.e_circleShape:s=s instanceof box2d.b2CircleShape?s:null;this.m_debugDraw.DrawSolidCircle(s.m_p,s.m_radius,box2d.b2Vec2.UNITX,j);break;case box2d.b2ShapeType.e_edgeShape:var q=s instanceof box2d.b2EdgeShape?s:null,s=q.m_vertex1,r=q.m_vertex2;this.m_debugDraw.DrawSegment(s,r,j);break;case box2d.b2ShapeType.e_chainShape:var s=s instanceof box2d.b2ChainShape?s:null,q=s.m_count,n=s.m_vertices,s=n[0];this.m_debugDraw.DrawCircle(s,0.05,j);for(var m=1;m<q;++m){r=n[m],this.m_debugDraw.DrawSegment(s,r,j),this.m_debugDraw.DrawCircle(r,0.05,j),s=r}break;case box2d.b2ShapeType.e_polygonShape:q=s instanceof box2d.b2PolygonShape?s:null,s=q.m_count,n=q.m_vertices,this.m_debugDraw.DrawSolidPolygon(n,s,j)}};goog.exportProperty(box2d.b2World.prototype,"DrawShape",box2d.b2World.prototype.DrawShape);box2d.b2World.prototype.DrawJoint=function(j){var g=j.GetBodyA(),q=j.GetBodyB(),m=g.m_xf.p,n=q.m_xf.p,q=j.GetAnchorA(box2d.b2World.prototype.DrawJoint.s_p1),g=j.GetAnchorB(box2d.b2World.prototype.DrawJoint.s_p2),k=box2d.b2World.prototype.DrawJoint.s_color.SetRGB(0.5,0.8,0.8);switch(j.m_type){case box2d.b2JointType.e_distanceJoint:this.m_debugDraw.DrawSegment(q,g,k);break;case box2d.b2JointType.e_pulleyJoint:m=j instanceof box2d.b2PulleyJoint?j:null;j=m.GetGroundAnchorA(box2d.b2World.prototype.DrawJoint.s_s1);m=m.GetGroundAnchorB(box2d.b2World.prototype.DrawJoint.s_s2);this.m_debugDraw.DrawSegment(j,q,k);this.m_debugDraw.DrawSegment(m,g,k);this.m_debugDraw.DrawSegment(j,m,k);break;case box2d.b2JointType.e_mouseJoint:this.m_debugDraw.DrawSegment(q,g,k);break;default:this.m_debugDraw.DrawSegment(m,q,k),this.m_debugDraw.DrawSegment(q,g,k),this.m_debugDraw.DrawSegment(n,g,k)}};goog.exportProperty(box2d.b2World.prototype,"DrawJoint",box2d.b2World.prototype.DrawJoint);box2d.b2World.prototype.DrawJoint.s_p1=new box2d.b2Vec2;box2d.b2World.prototype.DrawJoint.s_p2=new box2d.b2Vec2;box2d.b2World.prototype.DrawJoint.s_color=new box2d.b2Color(0.5,0.8,0.8);box2d.b2World.prototype.DrawJoint.s_s1=new box2d.b2Vec2;box2d.b2World.prototype.DrawJoint.s_s2=new box2d.b2Vec2;box2d.b2World.prototype.DrawDebugData=function(){if(null!=this.m_debugDraw){var k=this.m_debugDraw.GetFlags(),j=box2d.b2World.prototype.DrawDebugData.s_color.SetRGB(0,0,0);if(k&box2d.b2DrawFlags.e_shapeBit){for(var u=this.m_bodyList;u;u=u.m_next){var r=u.m_xf;this.m_debugDraw.PushTransform(r);for(var s=u.GetFixtureList();s;s=s.m_next){!1==u.IsActive()?j.SetRGB(0.5,0.5,0.3):u.GetType()==box2d.b2BodyType.b2_staticBody?j.SetRGB(0.5,0.9,0.5):u.GetType()==box2d.b2BodyType.b2_kinematicBody?j.SetRGB(0.5,0.5,0.9):!1==u.IsAwake()?j.SetRGB(0.6,0.6,0.6):j.SetRGB(0.9,0.7,0.7),this.DrawShape(s,j)}this.m_debugDraw.PopTransform(r)}}if(k&box2d.b2DrawFlags.e_jointBit){for(u=this.m_jointList;u;u=u.m_next){this.DrawJoint(u)}}if(k&box2d.b2DrawFlags.e_aabbBit){j.SetRGB(0.9,0.3,0.9);for(var r=this.m_contactManager.m_broadPhase,q=box2d.b2World.prototype.DrawDebugData.s_vs,u=this.m_bodyList;u;u=u.m_next){if(!1!=u.IsActive()){for(s=u.GetFixtureList();s;s=s.m_next){for(var n=0;n<s.m_proxyCount;++n){var m=r.GetFatAABB(s.m_proxies[n].proxy);q[0].SetXY(m.lowerBound.x,m.lowerBound.y);q[1].SetXY(m.upperBound.x,m.lowerBound.y);q[2].SetXY(m.upperBound.x,m.upperBound.y);q[3].SetXY(m.lowerBound.x,m.upperBound.y);this.m_debugDraw.DrawPolygon(q,4,j)}}}}}if(k&box2d.b2DrawFlags.e_centerOfMassBit){for(u=this.m_bodyList;u;u=u.m_next){r=box2d.b2World.prototype.DrawDebugData.s_xf,r.q.Copy(u.m_xf.q),r.p.Copy(u.GetWorldCenter()),this.m_debugDraw.DrawTransform(r)}}if(k&box2d.b2DrawFlags.e_controllerBit){for(k=this.m_controllerList;k;k=k.m_next){k.Draw(this.m_debugDraw)}}}};goog.exportProperty(box2d.b2World.prototype,"DrawDebugData",box2d.b2World.prototype.DrawDebugData);box2d.b2World.prototype.DrawDebugData.s_color=new box2d.b2Color(0,0,0);box2d.b2World.prototype.DrawDebugData.s_vs=box2d.b2Vec2.MakeArray(4);box2d.b2World.prototype.DrawDebugData.s_xf=new box2d.b2Transform;box2d.b2World.prototype.SetBroadPhase=function(f){var d=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=f;for(var j=this.m_bodyList;j;j=j.m_next){for(var g=j.m_fixtureList;g;g=g.m_next){g.m_proxy=f.CreateProxy(d.GetFatAABB(g.m_proxy),g)}}};goog.exportProperty(box2d.b2World.prototype,"SetBroadPhase",box2d.b2World.prototype.SetBroadPhase);box2d.b2World.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()};goog.exportProperty(box2d.b2World.prototype,"GetProxyCount",box2d.b2World.prototype.GetProxyCount);box2d.b2World.prototype.GetTreeHeight=function(){return this.m_contactManager.m_broadPhase.GetTreeHeight()};goog.exportProperty(box2d.b2World.prototype,"GetTreeHeight",box2d.b2World.prototype.GetTreeHeight);box2d.b2World.prototype.GetTreeBalance=function(){return this.m_contactManager.m_broadPhase.GetTreeBalance()};goog.exportProperty(box2d.b2World.prototype,"GetTreeBalance",box2d.b2World.prototype.GetTreeBalance);box2d.b2World.prototype.GetTreeQuality=function(){return this.m_contactManager.m_broadPhase.GetTreeQuality()};goog.exportProperty(box2d.b2World.prototype,"GetTreeQuality",box2d.b2World.prototype.GetTreeQuality);box2d.b2World.prototype.ShiftOrigin=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.IsLocked());if(!this.IsLocked()){for(var d=this.m_bodyList;d;d=d.m_next){d.m_xf.p.SelfSub(e),d.m_sweep.c0.SelfSub(e),d.m_sweep.c.SelfSub(e)}for(d=this.m_jointList;d;d=d.m_next){d.ShiftOrigin(e)}this.m_contactManager.m_broadPhase.ShiftOrigin(e)}};goog.exportProperty(box2d.b2World.prototype,"ShiftOrigin",box2d.b2World.prototype.ShiftOrigin);box2d.b2World.prototype.Dump=function(){if(box2d.DEBUG&&(this.m_flags&box2d.b2WorldFlag.e_locked)!=box2d.b2WorldFlag.e_locked){box2d.b2Log("/** @type {box2d.b2Vec2} */ var g = new box2d.b2Vec2(%.15f, %.15f);\n",this.m_gravity.x,this.m_gravity.y);box2d.b2Log("this.m_world.SetGravity(g);\n");box2d.b2Log("/** @type {Array.<box2d.b2Body>} */ var bodies = new Array(%d);\n",this.m_bodyCount);box2d.b2Log("/** @type {Array.<box2d.b2Joint>} */ var joints = new Array(%d);\n",this.m_jointCount);for(var e=0,d=this.m_bodyList;d;d=d.m_next){d.m_islandIndex=e,d.Dump(),++e}e=0;for(d=this.m_jointList;d;d=d.m_next){d.m_index=e,++e}for(d=this.m_jointList;d;d=d.m_next){d.m_type!=box2d.b2JointType.e_gearJoint&&(box2d.b2Log("if (true)\n"),box2d.b2Log("{\n"),d.Dump(),box2d.b2Log("}\n"))}for(d=this.m_jointList;d;d=d.m_next){d.m_type==box2d.b2JointType.e_gearJoint&&(box2d.b2Log("if (true)\n"),box2d.b2Log("{\n"),d.Dump(),box2d.b2Log("}\n"))}}};goog.exportProperty(box2d.b2World.prototype,"Dump",box2d.b2World.prototype.Dump);box2d.b2World.prototype.AddController=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===b.m_world,"Controller can only be a member of one world");b.m_world=this;b.m_next=this.m_controllerList;b.m_prev=null;this.m_controllerList&&(this.m_controllerList.m_prev=b);this.m_controllerList=b;++this.m_controllerCount;return b};goog.exportProperty(box2d.b2World.prototype,"AddController",box2d.b2World.prototype.AddController);box2d.b2World.prototype.RemoveController=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(b.m_world===this,"Controller is not a member of this world");b.m_prev&&(b.m_prev.m_next=b.m_next);b.m_next&&(b.m_next.m_prev=b.m_prev);this.m_controllerList==b&&(this.m_controllerList=b.m_next);--this.m_controllerCount;b.m_prev=null;b.m_next=null;b.m_world=null};goog.exportProperty(box2d.b2World.prototype,"RemoveController",box2d.b2World.prototype.RemoveController);box2d.b2AreaJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_areaJoint);this.bodies=[]};goog.inherits(box2d.b2AreaJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2AreaJointDef",box2d.b2AreaJointDef);box2d.b2AreaJointDef.prototype.world=null;goog.exportProperty(box2d.b2AreaJointDef.prototype,"world",box2d.b2AreaJointDef.prototype.world);box2d.b2AreaJointDef.prototype.bodies=null;goog.exportProperty(box2d.b2AreaJointDef.prototype,"bodies",box2d.b2AreaJointDef.prototype.bodies);box2d.b2AreaJointDef.prototype.frequencyHz=0;goog.exportProperty(box2d.b2AreaJointDef.prototype,"frequencyHz",box2d.b2AreaJointDef.prototype.frequencyHz);box2d.b2AreaJointDef.prototype.dampingRatio=0;goog.exportProperty(box2d.b2AreaJointDef.prototype,"dampingRatio",box2d.b2AreaJointDef.prototype.dampingRatio);box2d.b2AreaJointDef.prototype.AddBody=function(b){this.bodies.push(b);1==this.bodies.length?this.bodyA=b:2==this.bodies.length&&(this.bodyB=b)};goog.exportProperty(box2d.b2AreaJointDef.prototype,"AddBody",box2d.b2AreaJointDef.prototype.AddBody);box2d.b2AreaJoint=function(k){box2d.b2Joint.call(this,k);box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=k.bodies.length,"You cannot create an area joint with less than three bodies.");this.m_bodies=k.bodies;this.m_frequencyHz=k.frequencyHz;this.m_dampingRatio=k.dampingRatio;this.m_targetLengths=box2d.b2MakeNumberArray(k.bodies.length);this.m_normals=box2d.b2Vec2.MakeArray(k.bodies.length);this.m_joints=Array(k.bodies.length);this.m_deltas=box2d.b2Vec2.MakeArray(k.bodies.length);this.m_delta=new box2d.b2Vec2;var j=new box2d.b2DistanceJointDef;j.frequencyHz=k.frequencyHz;j.dampingRatio=k.dampingRatio;for(var u=this.m_targetArea=0,r=this.m_bodies.length;u<r;++u){var s=this.m_bodies[u],q=this.m_bodies[(u+1)%r],n=s.GetWorldCenter(),m=q.GetWorldCenter();this.m_targetLengths[u]=box2d.b2DistanceVV(n,m);this.m_targetArea+=box2d.b2CrossVV(n,m);j.Initialize(s,q,n,m);this.m_joints[u]=k.world.CreateJoint(j)}this.m_targetArea*=0.5};goog.inherits(box2d.b2AreaJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2AreaJoint",box2d.b2AreaJoint);box2d.b2AreaJoint.prototype.m_bodies=null;goog.exportProperty(box2d.b2AreaJoint.prototype,"m_bodies",box2d.b2AreaJoint.prototype.m_bodies);box2d.b2AreaJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2AreaJoint.prototype,"m_frequencyHz",box2d.b2AreaJoint.prototype.m_frequencyHz);box2d.b2AreaJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2AreaJoint.prototype,"m_dampingRatio",box2d.b2AreaJoint.prototype.m_dampingRatio);box2d.b2AreaJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2AreaJoint.prototype,"m_impulse",box2d.b2AreaJoint.prototype.m_impulse);box2d.b2AreaJoint.prototype.m_targetLengths=null;box2d.b2AreaJoint.prototype.m_targetArea=0;box2d.b2AreaJoint.prototype.m_normals=null;box2d.b2AreaJoint.prototype.m_joints=null;box2d.b2AreaJoint.prototype.m_deltas=null;box2d.b2AreaJoint.prototype.m_delta=null;box2d.b2AreaJoint.prototype.GetAnchorA=function(b){return b.SetZero()};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetAnchorA",box2d.b2AreaJoint.prototype.GetAnchorA);box2d.b2AreaJoint.prototype.GetAnchorB=function(b){return b.SetZero()};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetAnchorB",box2d.b2AreaJoint.prototype.GetAnchorB);box2d.b2AreaJoint.prototype.GetReactionForce=function(e,d){return d.SetZero()};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetReactionForce",box2d.b2AreaJoint.prototype.GetReactionForce);box2d.b2AreaJoint.prototype.GetReactionTorque=function(b){return 0};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetReactionTorque",box2d.b2AreaJoint.prototype.GetReactionTorque);box2d.b2AreaJoint.prototype.SetFrequency=function(e){this.m_frequencyHz=e;for(var d=0,f=this.m_joints.length;d<f;++d){this.m_joints[d].SetFrequency(e)}};goog.exportProperty(box2d.b2AreaJoint.prototype,"SetFrequency",box2d.b2AreaJoint.prototype.SetFrequency);box2d.b2AreaJoint.prototype.GetFrequency=function(){return this.m_frequencyHz};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetFrequency",box2d.b2AreaJoint.prototype.GetFrequency);box2d.b2AreaJoint.prototype.SetDampingRatio=function(e){this.m_dampingRatio=e;for(var d=0,f=this.m_joints.length;d<f;++d){this.m_joints[d].SetDampingRatio(e)}};goog.exportProperty(box2d.b2AreaJoint.prototype,"SetDampingRatio",box2d.b2AreaJoint.prototype.SetDampingRatio);box2d.b2AreaJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetDampingRatio",box2d.b2AreaJoint.prototype.GetDampingRatio);box2d.b2AreaJoint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("Area joint dumping is not supported.\n")};goog.exportProperty(box2d.b2AreaJoint.prototype,"Dump",box2d.b2AreaJoint.prototype.Dump);box2d.b2AreaJoint.prototype.InitVelocityConstraints=function(j){for(var g=0,q=this.m_bodies.length;g<q;++g){var m=this.m_deltas[g];box2d.b2SubVV(j.positions[this.m_bodies[(g+1)%q].m_islandIndex].c,j.positions[this.m_bodies[(g+q-1)%q].m_islandIndex].c,m)}if(j.step.warmStarting){for(this.m_impulse*=j.step.dtRatio,g=0,q=this.m_bodies.length;g<q;++g){var n=this.m_bodies[g],k=j.velocities[n.m_islandIndex].v,m=this.m_deltas[g];k.x+=0.5*(n.m_invMass*m.y)*this.m_impulse;k.y+=0.5*(n.m_invMass*-m.x)*this.m_impulse}}else{this.m_impulse=0}};goog.exportProperty(box2d.b2AreaJoint.prototype,"InitVelocityConstraints",box2d.b2AreaJoint.prototype.InitVelocityConstraints);box2d.b2AreaJoint.prototype.SolveVelocityConstraints=function(k){for(var j=0,u=0,r=0,s=this.m_bodies.length;r<s;++r){var q=this.m_bodies[r],n=k.velocities[q.m_islandIndex].v,m=this.m_deltas[r],j=j+m.GetLengthSquared()/q.GetMass(),u=u+box2d.b2CrossVV(n,m)}j=-2*u/j;this.m_impulse+=j;r=0;for(s=this.m_bodies.length;r<s;++r){q=this.m_bodies[r],n=k.velocities[q.m_islandIndex].v,m=this.m_deltas[r],n.x+=0.5*(q.m_invMass*m.y)*j,n.y+=0.5*(q.m_invMass*-m.x)*j}};goog.exportProperty(box2d.b2AreaJoint.prototype,"SolveVelocityConstraints",box2d.b2AreaJoint.prototype.SolveVelocityConstraints);box2d.b2AreaJoint.prototype.SolvePositionConstraints=function(v){for(var u=0,s=0,q=0,r=this.m_bodies.length;q<r;++q){var n=this.m_bodies[q],n=v.positions[n.m_islandIndex].c,m=v.positions[this.m_bodies[(q+1)%r].m_islandIndex].c,k=box2d.b2SubVV(m,n,this.m_delta),j=k.GetLength();j<box2d.b2_epsilon&&(j=1);this.m_normals[q].x=k.y/j;this.m_normals[q].y=-k.x/j;u+=j;s+=box2d.b2CrossVV(n,m)}u=0.5*(this.m_targetArea-0.5*s)/u;s=!0;q=0;for(r=this.m_bodies.length;q<r;++q){n=this.m_bodies[q],n=v.positions[n.m_islandIndex].c,k=box2d.b2AddVV(this.m_normals[q],this.m_normals[(q+1)%r],this.m_delta),k.SelfMul(u),m=k.GetLengthSquared(),m>box2d.b2Sq(box2d.b2_maxLinearCorrection)&&k.SelfMul(box2d.b2_maxLinearCorrection/box2d.b2Sqrt(m)),m>box2d.b2Sq(box2d.b2_linearSlop)&&(s=!1),n.x+=k.x,n.y+=k.y}return s};goog.exportProperty(box2d.b2AreaJoint.prototype,"SolvePositionConstraints",box2d.b2AreaJoint.prototype.SolvePositionConstraints);box2d.b2BuoyancyController=function(){box2d.b2Controller.call(this);this.normal=new box2d.b2Vec2(0,1);this.velocity=new box2d.b2Vec2(0,0);this.gravity=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2BuoyancyController,box2d.b2Controller);goog.exportSymbol("box2d.b2BuoyancyController",box2d.b2BuoyancyController);box2d.b2BuoyancyController.prototype.normal=null;goog.exportProperty(box2d.b2BuoyancyController.prototype,"normal",box2d.b2BuoyancyController.prototype.normal);box2d.b2BuoyancyController.prototype.offset=0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"offset",box2d.b2BuoyancyController.prototype.offset);box2d.b2BuoyancyController.prototype.density=0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"density",box2d.b2BuoyancyController.prototype.density);box2d.b2BuoyancyController.prototype.velocity=null;goog.exportProperty(box2d.b2BuoyancyController.prototype,"velocity",box2d.b2BuoyancyController.prototype.velocity);box2d.b2BuoyancyController.prototype.linearDrag=0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"linearDrag",box2d.b2BuoyancyController.prototype.linearDrag);box2d.b2BuoyancyController.prototype.angularDrag=0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"angularDrag",box2d.b2BuoyancyController.prototype.angularDrag);box2d.b2BuoyancyController.prototype.useDensity=!1;goog.exportProperty(box2d.b2BuoyancyController.prototype,"useDensity",box2d.b2BuoyancyController.prototype.useDensity);box2d.b2BuoyancyController.prototype.useWorldGravity=!0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"useWorldGravity",box2d.b2BuoyancyController.prototype.useWorldGravity);box2d.b2BuoyancyController.prototype.gravity=null;goog.exportProperty(box2d.b2BuoyancyController.prototype,"gravity",box2d.b2BuoyancyController.prototype.gravity);box2d.b2BuoyancyController.prototype.Step=function(z){if(this.m_bodyList){for(this.useWorldGravity&&this.gravity.Copy(this.GetWorld().GetGravity()),z=this.m_bodyList;z;z=z.nextBody){var y=z.body;if(!1!=y.IsAwake()){for(var v=new box2d.b2Vec2,s=new box2d.b2Vec2,u=0,r=0,q=y.GetFixtureList();q;q=q.m_next){var n=new box2d.b2Vec2,j=q.GetShape().ComputeSubmergedArea(this.normal,this.offset,y.GetTransform(),n),u=u+j;v.x+=j*n.x;v.y+=j*n.y;var m=0,m=this.useDensity?q.GetDensity():1,r=r+j*m;s.x+=j*n.x*m;s.y+=j*n.y*m}v.x/=u;v.y/=u;s.x/=r;s.y/=r;u<box2d.b2_epsilon||(r=box2d.b2NegV(this.gravity,new box2d.b2Vec2),r.SelfMul(this.density*u),y.ApplyForce(r,s),s=y.GetLinearVelocityFromWorldPoint(v,new box2d.b2Vec2),s.SelfSub(this.velocity),s.SelfMul(-this.linearDrag*u),y.ApplyForce(s,v),y.ApplyTorque(-y.GetInertia()/y.GetMass()*u*y.GetAngularVelocity()*this.angularDrag))}}}};goog.exportProperty(box2d.b2BuoyancyController.prototype,"Step",box2d.b2BuoyancyController.prototype.Step);box2d.b2BuoyancyController.prototype.Draw=function(f){var d=new box2d.b2Vec2,j=new box2d.b2Vec2;d.x=this.normal.x*this.offset+100*this.normal.y;d.y=this.normal.y*this.offset-100*this.normal.x;j.x=this.normal.x*this.offset-100*this.normal.y;j.y=this.normal.y*this.offset+100*this.normal.x;var g=new box2d.b2Color(0,0,0.8);f.DrawSegment(d,j,g)};goog.exportProperty(box2d.b2BuoyancyController.prototype,"Draw",box2d.b2BuoyancyController.prototype.Draw);box2d.b2TensorDampingController=function(){box2d.b2Controller.call(this);this.T=new box2d.b2Mat22;this.maxTimestep=0};goog.inherits(box2d.b2TensorDampingController,box2d.b2Controller);goog.exportSymbol("box2d.b2TensorDampingController",box2d.b2TensorDampingController);box2d.b2TensorDampingController.prototype.T=new box2d.b2Mat22;goog.exportProperty(box2d.b2TensorDampingController.prototype,"T",box2d.b2TensorDampingController.prototype.T);box2d.b2TensorDampingController.prototype.maxTimestep=0;goog.exportProperty(box2d.b2TensorDampingController.prototype,"maxTimestep",box2d.b2TensorDampingController.prototype.maxTimestep);box2d.b2TensorDampingController.prototype.Step=function(f){f=f.dt;if(!(f<=box2d.b2_epsilon)){f>this.maxTimestep&&0<this.maxTimestep&&(f=this.maxTimestep);for(var d=this.m_bodyList;d;d=d.nextBody){var j=d.body;if(j.IsAwake()){var g=j.GetWorldVector(box2d.b2MulMV(this.T,j.GetLocalVector(j.GetLinearVelocity(),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1),box2d.b2TensorDampingController.prototype.Step.s_damping);j.SetLinearVelocity(box2d.b2AddVV(j.GetLinearVelocity(),box2d.b2MulSV(f,g,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1))}}}};box2d.b2TensorDampingController.prototype.Step.s_damping=new box2d.b2Vec2;box2d.b2TensorDampingController.prototype.SetAxisAligned=function(e,d){this.T.ex.x=-e;this.T.ex.y=0;this.T.ey.x=0;this.T.ey.y=-d;this.maxTimestep=0<e||0<d?1/box2d.b2Max(e,d):0};box2d.b2DistanceJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_distanceJoint);this.localAnchorA=new box2d.b2Vec2;this.localAnchorB=new box2d.b2Vec2};goog.inherits(box2d.b2DistanceJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2DistanceJointDef",box2d.b2DistanceJointDef);box2d.b2DistanceJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"localAnchorA",box2d.b2DistanceJointDef.prototype.localAnchorA);box2d.b2DistanceJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"localAnchorB",box2d.b2DistanceJointDef.prototype.localAnchorB);box2d.b2DistanceJointDef.prototype.length=1;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"length",box2d.b2DistanceJointDef.prototype.length);box2d.b2DistanceJointDef.prototype.frequencyHz=0;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"frequencyHz",box2d.b2DistanceJointDef.prototype.frequencyHz);box2d.b2DistanceJointDef.prototype.dampingRatio=0;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"dampingRatio",box2d.b2DistanceJointDef.prototype.dampingRatio);box2d.b2DistanceJointDef.prototype.Initialize=function(f,d,j,g){this.bodyA=f;this.bodyB=d;this.bodyA.GetLocalPoint(j,this.localAnchorA);this.bodyB.GetLocalPoint(g,this.localAnchorB);this.length=box2d.b2DistanceVV(j,g);this.dampingRatio=this.frequencyHz=0};goog.exportProperty(box2d.b2DistanceJointDef.prototype,"Initialize",box2d.b2DistanceJointDef.prototype.Initialize);box2d.b2DistanceJoint=function(b){box2d.b2Joint.call(this,b);this.m_u=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_frequencyHz=b.frequencyHz;this.m_dampingRatio=b.dampingRatio;this.m_localAnchorA=b.localAnchorA.Clone();this.m_localAnchorB=b.localAnchorB.Clone();this.m_length=b.length};goog.inherits(box2d.b2DistanceJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2DistanceJoint",box2d.b2DistanceJoint);box2d.b2DistanceJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_frequencyHz",box2d.b2DistanceJoint.prototype.m_frequencyHz);box2d.b2DistanceJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_dampingRatio",box2d.b2DistanceJoint.prototype.m_dampingRatio);box2d.b2DistanceJoint.prototype.m_bias=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_bias",box2d.b2DistanceJoint.prototype.m_bias);box2d.b2DistanceJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localAnchorA",box2d.b2DistanceJoint.prototype.m_localAnchorA);box2d.b2DistanceJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localAnchorB",box2d.b2DistanceJoint.prototype.m_localAnchorB);box2d.b2DistanceJoint.prototype.m_gamma=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_gamma",box2d.b2DistanceJoint.prototype.m_gamma);box2d.b2DistanceJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_impulse",box2d.b2DistanceJoint.prototype.m_impulse);box2d.b2DistanceJoint.prototype.m_length=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_length",box2d.b2DistanceJoint.prototype.m_length);box2d.b2DistanceJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_indexA",box2d.b2DistanceJoint.prototype.m_indexA);box2d.b2DistanceJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_indexB",box2d.b2DistanceJoint.prototype.m_indexB);box2d.b2DistanceJoint.prototype.m_u=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_u",box2d.b2DistanceJoint.prototype.m_u);box2d.b2DistanceJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_rA",box2d.b2DistanceJoint.prototype.m_rA);box2d.b2DistanceJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_rB",box2d.b2DistanceJoint.prototype.m_rB);box2d.b2DistanceJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localCenterA",box2d.b2DistanceJoint.prototype.m_localCenterA);box2d.b2DistanceJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localCenterB",box2d.b2DistanceJoint.prototype.m_localCenterB);box2d.b2DistanceJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invMassA",box2d.b2DistanceJoint.prototype.m_invMassA);box2d.b2DistanceJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invMassB",box2d.b2DistanceJoint.prototype.m_invMassB);box2d.b2DistanceJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invIA",box2d.b2DistanceJoint.prototype.m_invIA);box2d.b2DistanceJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invIB",box2d.b2DistanceJoint.prototype.m_invIB);box2d.b2DistanceJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_mass",box2d.b2DistanceJoint.prototype.m_mass);box2d.b2DistanceJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_qA",box2d.b2DistanceJoint.prototype.m_qA);box2d.b2DistanceJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_qB",box2d.b2DistanceJoint.prototype.m_qB);box2d.b2DistanceJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_lalcA",box2d.b2DistanceJoint.prototype.m_lalcA);box2d.b2DistanceJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_lalcB",box2d.b2DistanceJoint.prototype.m_lalcB);box2d.b2DistanceJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetAnchorA",box2d.b2DistanceJoint.prototype.GetAnchorA);box2d.b2DistanceJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetAnchorB",box2d.b2DistanceJoint.prototype.GetAnchorB);box2d.b2DistanceJoint.prototype.GetReactionForce=function(e,d){return d.SetXY(e*this.m_impulse*this.m_u.x,e*this.m_impulse*this.m_u.y)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetReactionForce",box2d.b2DistanceJoint.prototype.GetReactionForce);box2d.b2DistanceJoint.prototype.GetReactionTorque=function(b){return 0};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetReactionTorque",box2d.b2DistanceJoint.prototype.GetReactionTorque);box2d.b2DistanceJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetLocalAnchorA",box2d.b2DistanceJoint.prototype.GetLocalAnchorA);box2d.b2DistanceJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetLocalAnchorB",box2d.b2DistanceJoint.prototype.GetLocalAnchorB);box2d.b2DistanceJoint.prototype.SetLength=function(b){this.m_length=b};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SetLength",box2d.b2DistanceJoint.prototype.SetLength);box2d.b2DistanceJoint.prototype.GetLength=function(){return this.m_length};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetLength",box2d.b2DistanceJoint.prototype.GetLength);box2d.b2DistanceJoint.prototype.SetFrequency=function(b){this.m_frequencyHz=b};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SetFrequency",box2d.b2DistanceJoint.prototype.SetFrequency);box2d.b2DistanceJoint.prototype.GetFrequency=function(){return this.m_frequencyHz};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetFrequency",box2d.b2DistanceJoint.prototype.GetFrequency);box2d.b2DistanceJoint.prototype.SetDampingRatio=function(b){this.m_dampingRatio=b};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SetDampingRatio",box2d.b2DistanceJoint.prototype.SetDampingRatio);box2d.b2DistanceJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetDampingRatio",box2d.b2DistanceJoint.prototype.GetDampingRatio);box2d.b2DistanceJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2DistanceJointDef*/ var jd = new box2d.b2DistanceJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.length = %.15f;\n",this.m_length);box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz);box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2DistanceJoint.prototype,"Dump",box2d.b2DistanceJoint.prototype.Dump);box2d.b2DistanceJoint.prototype.InitVelocityConstraints=function(z){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var y=z.positions[this.m_indexA].c,v=z.velocities[this.m_indexA].v,s=z.velocities[this.m_indexA].w,u=z.positions[this.m_indexB].c,r=z.positions[this.m_indexB].a,q=z.velocities[this.m_indexB].v,n=z.velocities[this.m_indexB].w,j=this.m_qA.SetAngleRadians(z.positions[this.m_indexA].a),r=this.m_qB.SetAngleRadians(r);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2MulRV(j,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2MulRV(r,this.m_lalcB,this.m_rB);this.m_u.x=u.x+this.m_rB.x-y.x-this.m_rA.x;this.m_u.y=u.y+this.m_rB.y-y.y-this.m_rA.y;u=this.m_u.GetLength();u>box2d.b2_linearSlop?this.m_u.SelfMul(1/u):this.m_u.SetZero();y=box2d.b2CrossVV(this.m_rA,this.m_u);j=box2d.b2CrossVV(this.m_rB,this.m_u);y=this.m_invMassA+this.m_invIA*y*y+this.m_invMassB+this.m_invIB*j*j;this.m_mass=0!=y?1/y:0;if(0<this.m_frequencyHz){var u=u-this.m_length,j=2*box2d.b2_pi*this.m_frequencyHz,r=this.m_mass*j*j,m=z.step.dt;this.m_gamma=m*(2*this.m_mass*this.m_dampingRatio*j+m*r);this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0;this.m_bias=u*m*r*this.m_gamma;y+=this.m_gamma;this.m_mass=0!=y?1/y:0}else{this.m_bias=this.m_gamma=0}z.step.warmStarting?(this.m_impulse*=z.step.dtRatio,y=box2d.b2MulSV(this.m_impulse,this.m_u,box2d.b2DistanceJoint.prototype.InitVelocityConstraints.s_P),v.SelfMulSub(this.m_invMassA,y),s-=this.m_invIA*box2d.b2CrossVV(this.m_rA,y),q.SelfMulAdd(this.m_invMassB,y),n+=this.m_invIB*box2d.b2CrossVV(this.m_rB,y)):this.m_impulse=0;z.velocities[this.m_indexA].w=s;z.velocities[this.m_indexB].w=n};goog.exportProperty(box2d.b2DistanceJoint.prototype,"InitVelocityConstraints",box2d.b2DistanceJoint.prototype.InitVelocityConstraints);box2d.b2DistanceJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2DistanceJoint.prototype.SolveVelocityConstraints=function(k){var j=k.velocities[this.m_indexA].v,s=k.velocities[this.m_indexA].w,q=k.velocities[this.m_indexB].v,r=k.velocities[this.m_indexB].w,n=box2d.b2AddVCrossSV(j,s,this.m_rA,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpA),m=box2d.b2AddVCrossSV(q,r,this.m_rB,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpB),n=box2d.b2DotVV(this.m_u,box2d.b2SubVV(m,n,box2d.b2Vec2.s_t0)),n=-this.m_mass*(n+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=n;n=box2d.b2MulSV(n,this.m_u,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_P);j.SelfMulSub(this.m_invMassA,n);s-=this.m_invIA*box2d.b2CrossVV(this.m_rA,n);q.SelfMulAdd(this.m_invMassB,n);r+=this.m_invIB*box2d.b2CrossVV(this.m_rB,n);k.velocities[this.m_indexA].w=s;k.velocities[this.m_indexB].w=r};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SolveVelocityConstraints",box2d.b2DistanceJoint.prototype.SolveVelocityConstraints);box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2;box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2;box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2DistanceJoint.prototype.SolvePositionConstraints=function(v){if(0<this.m_frequencyHz){return !0}var u=v.positions[this.m_indexA].c,s=v.positions[this.m_indexA].a,q=v.positions[this.m_indexB].c,r=v.positions[this.m_indexB].a;this.m_qA.SetAngleRadians(s);this.m_qB.SetAngleRadians(r);var n=box2d.b2MulRV(this.m_qA,this.m_lalcA,this.m_rA),m=box2d.b2MulRV(this.m_qB,this.m_lalcB,this.m_rB),k=this.m_u;k.x=q.x+m.x-u.x-n.x;k.y=q.y+m.y-u.y-n.y;var j=this.m_u.Normalize()-this.m_length,j=box2d.b2Clamp(j,-box2d.b2_maxLinearCorrection,box2d.b2_maxLinearCorrection),k=box2d.b2MulSV(-this.m_mass*j,k,box2d.b2DistanceJoint.prototype.SolvePositionConstraints.s_P);u.SelfMulSub(this.m_invMassA,k);s-=this.m_invIA*box2d.b2CrossVV(n,k);q.SelfMulAdd(this.m_invMassB,k);r+=this.m_invIB*box2d.b2CrossVV(m,k);v.positions[this.m_indexA].a=s;v.positions[this.m_indexB].a=r;return box2d.b2Abs(j)<box2d.b2_linearSlop};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SolvePositionConstraints",box2d.b2DistanceJoint.prototype.SolvePositionConstraints);box2d.b2DistanceJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2FrictionJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_frictionJoint);this.localAnchorA=new box2d.b2Vec2;this.localAnchorB=new box2d.b2Vec2};goog.inherits(box2d.b2FrictionJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2FrictionJointDef",box2d.b2FrictionJointDef);box2d.b2FrictionJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2FrictionJointDef.prototype,"localAnchorA",box2d.b2FrictionJointDef.prototype.localAnchorA);box2d.b2FrictionJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2FrictionJointDef.prototype,"localAnchorB",box2d.b2FrictionJointDef.prototype.localAnchorB);box2d.b2FrictionJointDef.prototype.maxForce=0;goog.exportProperty(box2d.b2FrictionJointDef.prototype,"maxForce",box2d.b2FrictionJointDef.prototype.maxForce);box2d.b2FrictionJointDef.prototype.maxTorque=0;goog.exportProperty(box2d.b2FrictionJointDef.prototype,"maxTorque",box2d.b2FrictionJointDef.prototype.maxTorque);box2d.b2FrictionJointDef.prototype.Initialize=function(e,d,f){this.bodyA=e;this.bodyB=d;this.bodyA.GetLocalPoint(f,this.localAnchorA);this.bodyB.GetLocalPoint(f,this.localAnchorB)};goog.exportProperty(box2d.b2FrictionJointDef.prototype,"Initialize",box2d.b2FrictionJointDef.prototype.Initialize);box2d.b2FrictionJoint=function(b){box2d.b2Joint.call(this,b);this.m_localAnchorA=b.localAnchorA.Clone();this.m_localAnchorB=b.localAnchorB.Clone();this.m_linearImpulse=(new box2d.b2Vec2).SetZero();this.m_maxForce=b.maxForce;this.m_maxTorque=b.maxTorque;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_linearMass=(new box2d.b2Mat22).SetZero();this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_K=new box2d.b2Mat22};goog.inherits(box2d.b2FrictionJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2FrictionJoint",box2d.b2FrictionJoint);box2d.b2FrictionJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localAnchorA",box2d.b2FrictionJoint.prototype.m_localAnchorA);box2d.b2FrictionJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localAnchorB",box2d.b2FrictionJoint.prototype.m_localAnchorB);box2d.b2FrictionJoint.prototype.m_linearImpulse=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_linearImpulse",box2d.b2FrictionJoint.prototype.m_linearImpulse);box2d.b2FrictionJoint.prototype.m_angularImpulse=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_angularImpulse",box2d.b2FrictionJoint.prototype.m_angularImpulse);box2d.b2FrictionJoint.prototype.m_maxForce=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_maxForce",box2d.b2FrictionJoint.prototype.m_maxForce);box2d.b2FrictionJoint.prototype.m_maxTorque=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_maxTorque",box2d.b2FrictionJoint.prototype.m_maxTorque);box2d.b2FrictionJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_indexA",box2d.b2FrictionJoint.prototype.m_indexA);box2d.b2FrictionJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_indexB",box2d.b2FrictionJoint.prototype.m_indexB);box2d.b2FrictionJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_rA",box2d.b2FrictionJoint.prototype.m_rA);box2d.b2FrictionJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_rB",box2d.b2FrictionJoint.prototype.m_rB);box2d.b2FrictionJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localCenterA",box2d.b2FrictionJoint.prototype.m_localCenterA);box2d.b2FrictionJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localCenterB",box2d.b2FrictionJoint.prototype.m_localCenterB);box2d.b2FrictionJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invMassA",box2d.b2FrictionJoint.prototype.m_invMassA);box2d.b2FrictionJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invMassB",box2d.b2FrictionJoint.prototype.m_invMassB);box2d.b2FrictionJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invIA",box2d.b2FrictionJoint.prototype.m_invIA);box2d.b2FrictionJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invIB",box2d.b2FrictionJoint.prototype.m_invIB);box2d.b2FrictionJoint.prototype.m_linearMass=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_linearMass",box2d.b2FrictionJoint.prototype.m_linearMass);box2d.b2FrictionJoint.prototype.m_angularMass=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_angularMass",box2d.b2FrictionJoint.prototype.m_angularMass);box2d.b2FrictionJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_qA",box2d.b2FrictionJoint.prototype.m_qA);box2d.b2FrictionJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_qB",box2d.b2FrictionJoint.prototype.m_qB);box2d.b2FrictionJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_lalcA",box2d.b2FrictionJoint.prototype.m_lalcA);box2d.b2FrictionJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_lalcB",box2d.b2FrictionJoint.prototype.m_lalcB);box2d.b2FrictionJoint.prototype.m_K=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_K",box2d.b2FrictionJoint.prototype.m_K);box2d.b2FrictionJoint.prototype.InitVelocityConstraints=function(D){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var C=D.velocities[this.m_indexA].v,B=D.velocities[this.m_indexA].w,z=D.positions[this.m_indexB].a,A=D.velocities[this.m_indexB].v,y=D.velocities[this.m_indexB].w,v=this.m_qA.SetAngleRadians(D.positions[this.m_indexA].a),z=this.m_qB.SetAngleRadians(z);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);v=box2d.b2MulRV(v,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var u=box2d.b2MulRV(z,this.m_lalcB,this.m_rB),z=this.m_invMassA,r=this.m_invMassB,s=this.m_invIA,q=this.m_invIB,j=this.m_K;j.ex.x=z+r+s*v.y*v.y+q*u.y*u.y;j.ex.y=-s*v.x*v.y-q*u.x*u.y;j.ey.x=j.ex.y;j.ey.y=z+r+s*v.x*v.x+q*u.x*u.x;j.GetInverse(this.m_linearMass);this.m_angularMass=s+q;0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass);D.step.warmStarting?(this.m_linearImpulse.SelfMul(D.step.dtRatio),this.m_angularImpulse*=D.step.dtRatio,v=this.m_linearImpulse,C.SelfMulSub(z,v),B-=s*(box2d.b2CrossVV(this.m_rA,v)+this.m_angularImpulse),A.SelfMulAdd(r,v),y+=q*(box2d.b2CrossVV(this.m_rB,v)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0);D.velocities[this.m_indexA].w=B;D.velocities[this.m_indexB].w=y};goog.exportProperty(box2d.b2FrictionJoint.prototype,"InitVelocityConstraints",box2d.b2FrictionJoint.prototype.InitVelocityConstraints);box2d.b2FrictionJoint.prototype.SolveVelocityConstraints=function(E){var D=E.velocities[this.m_indexA].v,C=E.velocities[this.m_indexA].w,A=E.velocities[this.m_indexB].v,B=E.velocities[this.m_indexB].w,z=this.m_invMassA,y=this.m_invMassB,v=this.m_invIA,s=this.m_invIB,u=E.step.dt,r,q=-this.m_angularMass*(B-C),j=this.m_angularImpulse;r=u*this.m_maxTorque;this.m_angularImpulse=box2d.b2Clamp(this.m_angularImpulse+q,-r,r);q=this.m_angularImpulse-j;C-=v*q;B+=s*q;r=box2d.b2SubVV(box2d.b2AddVCrossSV(A,B,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(D,C,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_Cdot);q=box2d.b2MulMV(this.m_linearMass,r,box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_impulseV).SelfNeg();j=box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_oldImpulseV.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(q);r=u*this.m_maxForce;this.m_linearImpulse.GetLengthSquared()>r*r&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(r));box2d.b2SubVV(this.m_linearImpulse,j,q);D.SelfMulSub(z,q);C-=v*box2d.b2CrossVV(this.m_rA,q);A.SelfMulAdd(y,q);B+=s*box2d.b2CrossVV(this.m_rB,q);E.velocities[this.m_indexA].w=C;E.velocities[this.m_indexB].w=B};goog.exportProperty(box2d.b2FrictionJoint.prototype,"SolveVelocityConstraints",box2d.b2FrictionJoint.prototype.SolveVelocityConstraints);box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2;box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_impulseV=new box2d.b2Vec2;box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_oldImpulseV=new box2d.b2Vec2;box2d.b2FrictionJoint.prototype.SolvePositionConstraints=function(b){return !0};goog.exportProperty(box2d.b2FrictionJoint.prototype,"SolvePositionConstraints",box2d.b2FrictionJoint.prototype.SolvePositionConstraints);box2d.b2FrictionJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetAnchorA",box2d.b2FrictionJoint.prototype.GetAnchorA);box2d.b2FrictionJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetAnchorB",box2d.b2FrictionJoint.prototype.GetAnchorB);box2d.b2FrictionJoint.prototype.GetReactionForce=function(e,d){return d.SetXY(e*this.m_linearImpulse.x,e*this.m_linearImpulse.y)};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetReactionForce",box2d.b2FrictionJoint.prototype.GetReactionForce);box2d.b2FrictionJoint.prototype.GetReactionTorque=function(b){return b*this.m_angularImpulse};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetReactionTorque",box2d.b2FrictionJoint.prototype.GetReactionTorque);box2d.b2FrictionJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetLocalAnchorA",box2d.b2FrictionJoint.prototype.GetLocalAnchorA);box2d.b2FrictionJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetLocalAnchorB",box2d.b2FrictionJoint.prototype.GetLocalAnchorB);box2d.b2FrictionJoint.prototype.SetMaxForce=function(b){this.m_maxForce=b};goog.exportProperty(box2d.b2FrictionJoint.prototype,"SetMaxForce",box2d.b2FrictionJoint.prototype.SetMaxForce);box2d.b2FrictionJoint.prototype.GetMaxForce=function(){return this.m_maxForce};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetMaxForce",box2d.b2FrictionJoint.prototype.GetMaxForce);box2d.b2FrictionJoint.prototype.SetMaxTorque=function(b){this.m_maxTorque=b};goog.exportProperty(box2d.b2FrictionJoint.prototype,"SetMaxTorque",box2d.b2FrictionJoint.prototype.SetMaxTorque);box2d.b2FrictionJoint.prototype.GetMaxTorque=function(){return this.m_maxTorque};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetMaxTorque",box2d.b2FrictionJoint.prototype.GetMaxTorque);box2d.b2FrictionJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2FrictionJointDef*/ var jd = new box2d.b2FrictionJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.maxForce = %.15f;\n",this.m_maxForce);box2d.b2Log("  jd.maxTorque = %.15f;\n",this.m_maxTorque);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2FrictionJoint.prototype,"Dump",box2d.b2FrictionJoint.prototype.Dump);box2d.b2MouseJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_mouseJoint);this.target=new box2d.b2Vec2};goog.inherits(box2d.b2MouseJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2MouseJointDef",box2d.b2MouseJointDef);box2d.b2MouseJointDef.prototype.target=null;goog.exportProperty(box2d.b2MouseJointDef.prototype,"target",box2d.b2MouseJointDef.prototype.target);box2d.b2MouseJointDef.prototype.maxForce=0;goog.exportProperty(box2d.b2MouseJointDef.prototype,"maxForce",box2d.b2MouseJointDef.prototype.maxForce);box2d.b2MouseJointDef.prototype.frequencyHz=5;goog.exportProperty(box2d.b2MouseJointDef.prototype,"frequencyHz",box2d.b2MouseJointDef.prototype.frequencyHz);box2d.b2MouseJointDef.prototype.dampingRatio=0.7;goog.exportProperty(box2d.b2MouseJointDef.prototype,"dampingRatio",box2d.b2MouseJointDef.prototype.dampingRatio);box2d.b2MouseJoint=function(b){box2d.b2Joint.call(this,b);this.m_localAnchorB=new box2d.b2Vec2;this.m_targetA=new box2d.b2Vec2;this.m_impulse=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_mass=new box2d.b2Mat22;this.m_C=new box2d.b2Vec2;this.m_qB=new box2d.b2Rot;this.m_lalcB=new box2d.b2Vec2;this.m_K=new box2d.b2Mat22;box2d.ENABLE_ASSERTS&&box2d.b2Assert(b.target.IsValid());box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(b.maxForce)&&0<=b.maxForce);box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(b.frequencyHz)&&0<=b.frequencyHz);box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(b.dampingRatio)&&0<=b.dampingRatio);this.m_targetA.Copy(b.target);box2d.b2MulTXV(this.m_bodyB.GetTransform(),this.m_targetA,this.m_localAnchorB);this.m_maxForce=b.maxForce;this.m_impulse.SetZero();this.m_frequencyHz=b.frequencyHz;this.m_dampingRatio=b.dampingRatio;this.m_gamma=this.m_beta=0};goog.inherits(box2d.b2MouseJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2MouseJoint",box2d.b2MouseJoint);box2d.b2MouseJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_localAnchorB",box2d.b2MouseJoint.prototype.m_localAnchorB);box2d.b2MouseJoint.prototype.m_targetA=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_targetA",box2d.b2MouseJoint.prototype.m_targetA);box2d.b2MouseJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_frequencyHz",box2d.b2MouseJoint.prototype.m_frequencyHz);box2d.b2MouseJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_dampingRatio",box2d.b2MouseJoint.prototype.m_dampingRatio);box2d.b2MouseJoint.prototype.m_beta=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_beta",box2d.b2MouseJoint.prototype.m_beta);box2d.b2MouseJoint.prototype.m_impulse=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_impulse",box2d.b2MouseJoint.prototype.m_impulse);box2d.b2MouseJoint.prototype.m_maxForce=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_maxForce",box2d.b2MouseJoint.prototype.m_maxForce);box2d.b2MouseJoint.prototype.m_gamma=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_gamma",box2d.b2MouseJoint.prototype.m_gamma);box2d.b2MouseJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_indexA",box2d.b2MouseJoint.prototype.m_indexA);box2d.b2MouseJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_indexB",box2d.b2MouseJoint.prototype.m_indexB);box2d.b2MouseJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_rB",box2d.b2MouseJoint.prototype.m_rB);box2d.b2MouseJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_localCenterB",box2d.b2MouseJoint.prototype.m_localCenterB);box2d.b2MouseJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_invMassB",box2d.b2MouseJoint.prototype.m_invMassB);box2d.b2MouseJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_invIB",box2d.b2MouseJoint.prototype.m_invIB);box2d.b2MouseJoint.prototype.m_mass=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_mass",box2d.b2MouseJoint.prototype.m_mass);box2d.b2MouseJoint.prototype.m_C=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_C",box2d.b2MouseJoint.prototype.m_C);box2d.b2MouseJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_qB",box2d.b2MouseJoint.prototype.m_qB);box2d.b2MouseJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_lalcB",box2d.b2MouseJoint.prototype.m_lalcB);box2d.b2MouseJoint.prototype.m_K=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_K",box2d.b2MouseJoint.prototype.m_K);box2d.b2MouseJoint.prototype.SetTarget=function(b){!1==this.m_bodyB.IsAwake()&&this.m_bodyB.SetAwake(!0);this.m_targetA.Copy(b)};goog.exportProperty(box2d.b2MouseJoint.prototype,"SetTarget",box2d.b2MouseJoint.prototype.SetTarget);box2d.b2MouseJoint.prototype.GetTarget=function(b){return b.Copy(this.m_targetA)};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetTarget",box2d.b2MouseJoint.prototype.GetTarget);box2d.b2MouseJoint.prototype.SetMaxForce=function(b){this.m_maxForce=b};goog.exportProperty(box2d.b2MouseJoint.prototype,"SetMaxForce",box2d.b2MouseJoint.prototype.SetMaxForce);box2d.b2MouseJoint.prototype.GetMaxForce=function(){return this.m_maxForce};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetMaxForce",box2d.b2MouseJoint.prototype.GetMaxForce);box2d.b2MouseJoint.prototype.SetFrequency=function(b){this.m_frequencyHz=b};goog.exportProperty(box2d.b2MouseJoint.prototype,"SetFrequency",box2d.b2MouseJoint.prototype.SetFrequency);box2d.b2MouseJoint.prototype.GetFrequency=function(){return this.m_frequencyHz};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetFrequency",box2d.b2MouseJoint.prototype.GetFrequency);box2d.b2MouseJoint.prototype.SetDampingRatio=function(b){this.m_dampingRatio=b};goog.exportProperty(box2d.b2MouseJoint.prototype,"SetDampingRatio",box2d.b2MouseJoint.prototype.SetDampingRatio);box2d.b2MouseJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetDampingRatio",box2d.b2MouseJoint.prototype.GetDampingRatio);box2d.b2MouseJoint.prototype.InitVelocityConstraints=function(k){this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIB=this.m_bodyB.m_invI;var j=k.positions[this.m_indexB].c,u=k.velocities[this.m_indexB].v,r=k.velocities[this.m_indexB].w,s=this.m_qB.SetAngleRadians(k.positions[this.m_indexB].a),q=this.m_bodyB.GetMass(),n=2*box2d.b2_pi*this.m_frequencyHz,m=2*q*this.m_dampingRatio*n,q=q*n*n,n=k.step.dt;box2d.ENABLE_ASSERTS&&box2d.b2Assert(m+n*q>box2d.b2_epsilon);this.m_gamma=n*(m+n*q);0!=this.m_gamma&&(this.m_gamma=1/this.m_gamma);this.m_beta=n*q*this.m_gamma;box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2MulRV(s,this.m_lalcB,this.m_rB);s=this.m_K;s.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma;s.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y;s.ey.x=s.ex.y;s.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma;s.GetInverse(this.m_mass);this.m_C.x=j.x+this.m_rB.x-this.m_targetA.x;this.m_C.y=j.y+this.m_rB.y-this.m_targetA.y;this.m_C.SelfMul(this.m_beta);r*=0.98;k.step.warmStarting?(this.m_impulse.SelfMul(k.step.dtRatio),u.x+=this.m_invMassB*this.m_impulse.x,u.y+=this.m_invMassB*this.m_impulse.y,r+=this.m_invIB*box2d.b2CrossVV(this.m_rB,this.m_impulse)):this.m_impulse.SetZero();k.velocities[this.m_indexB].w=r};goog.exportProperty(box2d.b2MouseJoint.prototype,"InitVelocityConstraints",box2d.b2MouseJoint.prototype.InitVelocityConstraints);box2d.b2MouseJoint.prototype.SolveVelocityConstraints=function(j){var g=j.velocities[this.m_indexB].v,q=j.velocities[this.m_indexB].w,m=box2d.b2AddVCrossSV(g,q,this.m_rB,box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_Cdot),m=box2d.b2MulMV(this.m_mass,box2d.b2AddVV(m,box2d.b2AddVV(this.m_C,box2d.b2MulSV(this.m_gamma,this.m_impulse,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0).SelfNeg(),box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_impulse),n=box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_oldImpulse.Copy(this.m_impulse);this.m_impulse.SelfAdd(m);var k=j.step.dt*this.m_maxForce;this.m_impulse.GetLengthSquared()>k*k&&this.m_impulse.SelfMul(k/this.m_impulse.GetLength());box2d.b2SubVV(this.m_impulse,n,m);g.SelfMulAdd(this.m_invMassB,m);q+=this.m_invIB*box2d.b2CrossVV(this.m_rB,m);j.velocities[this.m_indexB].w=q};goog.exportProperty(box2d.b2MouseJoint.prototype,"SolveVelocityConstraints",box2d.b2MouseJoint.prototype.SolveVelocityConstraints);box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2;box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec2;box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_oldImpulse=new box2d.b2Vec2;box2d.b2MouseJoint.prototype.SolvePositionConstraints=function(b){return !0};goog.exportProperty(box2d.b2MouseJoint.prototype,"SolvePositionConstraints",box2d.b2MouseJoint.prototype.SolvePositionConstraints);box2d.b2MouseJoint.prototype.GetAnchorA=function(b){return b.Copy(this.m_targetA)};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetAnchorA",box2d.b2MouseJoint.prototype.GetAnchorA);box2d.b2MouseJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetAnchorB",box2d.b2MouseJoint.prototype.GetAnchorB);box2d.b2MouseJoint.prototype.GetReactionForce=function(e,d){return box2d.b2MulSV(e,this.m_impulse,d)};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetReactionForce",box2d.b2MouseJoint.prototype.GetReactionForce);box2d.b2MouseJoint.prototype.GetReactionTorque=function(b){return 0};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetReactionTorque",box2d.b2MouseJoint.prototype.GetReactionTorque);box2d.b2MouseJoint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("Mouse joint dumping is not supported.\n")};goog.exportProperty(box2d.b2MouseJoint.prototype,"Dump",box2d.b2MouseJoint.prototype.Dump);box2d.b2MouseJoint.prototype.ShiftOrigin=function(b){this.m_targetA.SelfSub(b)};goog.exportProperty(box2d.b2MouseJoint.prototype,"ShiftOrigin",box2d.b2MouseJoint.prototype.ShiftOrigin);box2d.b2ConstantForceController=function(){box2d.b2Controller.call(this);this.F=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2ConstantForceController,box2d.b2Controller);goog.exportSymbol("box2d.b2ConstantForceController",box2d.b2ConstantForceController);box2d.b2ConstantAccelController.prototype.F=null;goog.exportProperty(box2d.b2ConstantAccelController.prototype,"F",box2d.b2ConstantAccelController.prototype.F);box2d.b2ConstantForceController.prototype.Step=function(e){for(e=this.m_bodyList;e;e=e.nextBody){var d=e.body;d.IsAwake()&&d.ApplyForce(this.F,d.GetWorldCenter())}};goog.exportProperty(box2d.b2ConstantForceController.prototype,"Step",box2d.b2ConstantForceController.prototype.Step);box2d.b2_minPulleyLength=2;goog.exportSymbol("box2d.b2_minPulleyLength",box2d.b2_minPulleyLength);box2d.b2PulleyJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_pulleyJoint);this.collideConnected=!0;this.groundAnchorA=new box2d.b2Vec2(-1,1);this.groundAnchorB=new box2d.b2Vec2(1,1);this.localAnchorA=new box2d.b2Vec2(-1,0);this.localAnchorB=new box2d.b2Vec2(1,0)};goog.inherits(box2d.b2PulleyJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2PulleyJointDef",box2d.b2PulleyJointDef);box2d.b2PulleyJointDef.prototype.groundAnchorA=null;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"groundAnchorA",box2d.b2PulleyJointDef.prototype.groundAnchorA);box2d.b2PulleyJointDef.prototype.groundAnchorB=null;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"groundAnchorB",box2d.b2PulleyJointDef.prototype.groundAnchorB);box2d.b2PulleyJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"localAnchorA",box2d.b2PulleyJointDef.prototype.localAnchorA);box2d.b2PulleyJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"localAnchorB",box2d.b2PulleyJointDef.prototype.localAnchorB);box2d.b2PulleyJointDef.prototype.lengthA=0;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"lengthA",box2d.b2PulleyJointDef.prototype.lengthA);box2d.b2PulleyJointDef.prototype.lengthB=0;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"lengthB",box2d.b2PulleyJointDef.prototype.lengthB);box2d.b2PulleyJointDef.prototype.ratio=1;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"ratio",box2d.b2PulleyJointDef.prototype.ratio);box2d.b2PulleyJointDef.prototype.Initialize=function(k,j,s,q,r,n,m){this.bodyA=k;this.bodyB=j;this.groundAnchorA.Copy(s);this.groundAnchorB.Copy(q);this.bodyA.GetLocalPoint(r,this.localAnchorA);this.bodyB.GetLocalPoint(n,this.localAnchorB);this.lengthA=box2d.b2DistanceVV(r,s);this.lengthB=box2d.b2DistanceVV(n,q);this.ratio=m;box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.ratio>box2d.b2_epsilon)};goog.exportProperty(box2d.b2PulleyJointDef.prototype,"Initialize",box2d.b2PulleyJointDef.prototype.Initialize);box2d.b2PulleyJoint=function(b){box2d.b2Joint.call(this,b);this.m_groundAnchorA=new box2d.b2Vec2;this.m_groundAnchorB=new box2d.b2Vec2;this.m_localAnchorA=new box2d.b2Vec2;this.m_localAnchorB=new box2d.b2Vec2;this.m_uA=new box2d.b2Vec2;this.m_uB=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_groundAnchorA.Copy(b.groundAnchorA);this.m_groundAnchorB.Copy(b.groundAnchorB);this.m_localAnchorA.Copy(b.localAnchorA);this.m_localAnchorB.Copy(b.localAnchorB);this.m_lengthA=b.lengthA;this.m_lengthB=b.lengthB;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0!=b.ratio);this.m_ratio=b.ratio;this.m_constant=b.lengthA+this.m_ratio*b.lengthB;this.m_impulse=0};goog.inherits(box2d.b2PulleyJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2PulleyJoint",box2d.b2PulleyJoint);box2d.b2PulleyJoint.prototype.m_groundAnchorA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_groundAnchorA",box2d.b2PulleyJoint.prototype.m_groundAnchorA);box2d.b2PulleyJoint.prototype.m_groundAnchorB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_groundAnchorB",box2d.b2PulleyJoint.prototype.m_groundAnchorB);box2d.b2PulleyJoint.prototype.m_lengthA=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lengthA",box2d.b2PulleyJoint.prototype.m_lengthA);box2d.b2PulleyJoint.prototype.m_lengthB=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lengthB",box2d.b2PulleyJoint.prototype.m_lengthB);box2d.b2PulleyJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localAnchorA",box2d.b2PulleyJoint.prototype.m_localAnchorA);box2d.b2PulleyJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localAnchorB",box2d.b2PulleyJoint.prototype.m_localAnchorB);box2d.b2PulleyJoint.prototype.m_constant=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_constant",box2d.b2PulleyJoint.prototype.m_constant);box2d.b2PulleyJoint.prototype.m_ratio=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_ratio",box2d.b2PulleyJoint.prototype.m_ratio);box2d.b2PulleyJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_impulse",box2d.b2PulleyJoint.prototype.m_impulse);box2d.b2PulleyJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_indexA",box2d.b2PulleyJoint.prototype.m_indexA);box2d.b2PulleyJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_indexB",box2d.b2PulleyJoint.prototype.m_indexB);box2d.b2PulleyJoint.prototype.m_uA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_uA",box2d.b2PulleyJoint.prototype.m_uA);box2d.b2PulleyJoint.prototype.m_uB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_uB",box2d.b2PulleyJoint.prototype.m_uB);box2d.b2PulleyJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_rA",box2d.b2PulleyJoint.prototype.m_rA);box2d.b2PulleyJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_rB",box2d.b2PulleyJoint.prototype.m_rB);box2d.b2PulleyJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localCenterA",box2d.b2PulleyJoint.prototype.m_localCenterA);box2d.b2PulleyJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localCenterB",box2d.b2PulleyJoint.prototype.m_localCenterB);box2d.b2PulleyJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invMassA",box2d.b2PulleyJoint.prototype.m_invMassA);box2d.b2PulleyJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invMassB",box2d.b2PulleyJoint.prototype.m_invMassB);box2d.b2PulleyJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invIA",box2d.b2PulleyJoint.prototype.m_invIA);box2d.b2PulleyJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invIB",box2d.b2PulleyJoint.prototype.m_invIB);box2d.b2PulleyJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_mass",box2d.b2PulleyJoint.prototype.m_mass);box2d.b2PulleyJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_qA",box2d.b2PulleyJoint.prototype.m_qA);box2d.b2PulleyJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_qB",box2d.b2PulleyJoint.prototype.m_qB);box2d.b2PulleyJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lalcA",box2d.b2PulleyJoint.prototype.m_lalcA);box2d.b2PulleyJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lalcB",box2d.b2PulleyJoint.prototype.m_lalcB);box2d.b2PulleyJoint.prototype.InitVelocityConstraints=function(v){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var u=v.positions[this.m_indexA].c,s=v.velocities[this.m_indexA].v,q=v.velocities[this.m_indexA].w,r=v.positions[this.m_indexB].c,n=v.positions[this.m_indexB].a,m=v.velocities[this.m_indexB].v,k=v.velocities[this.m_indexB].w,j=this.m_qA.SetAngleRadians(v.positions[this.m_indexA].a),n=this.m_qB.SetAngleRadians(n);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2MulRV(j,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2MulRV(n,this.m_lalcB,this.m_rB);this.m_uA.Copy(u).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA);this.m_uB.Copy(r).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB);u=this.m_uA.GetLength();r=this.m_uB.GetLength();u>10*box2d.b2_linearSlop?this.m_uA.SelfMul(1/u):this.m_uA.SetZero();r>10*box2d.b2_linearSlop?this.m_uB.SelfMul(1/r):this.m_uB.SetZero();u=box2d.b2CrossVV(this.m_rA,this.m_uA);r=box2d.b2CrossVV(this.m_rB,this.m_uB);this.m_mass=this.m_invMassA+this.m_invIA*u*u+this.m_ratio*this.m_ratio*(this.m_invMassB+this.m_invIB*r*r);0<this.m_mass&&(this.m_mass=1/this.m_mass);v.step.warmStarting?(this.m_impulse*=v.step.dtRatio,u=box2d.b2MulSV(-this.m_impulse,this.m_uA,box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PA),r=box2d.b2MulSV(-this.m_ratio*this.m_impulse,this.m_uB,box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PB),s.SelfMulAdd(this.m_invMassA,u),q+=this.m_invIA*box2d.b2CrossVV(this.m_rA,u),m.SelfMulAdd(this.m_invMassB,r),k+=this.m_invIB*box2d.b2CrossVV(this.m_rB,r)):this.m_impulse=0;v.velocities[this.m_indexA].w=q;v.velocities[this.m_indexB].w=k};goog.exportProperty(box2d.b2PulleyJoint.prototype,"InitVelocityConstraints",box2d.b2PulleyJoint.prototype.InitVelocityConstraints);box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PA=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PB=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolveVelocityConstraints=function(k){var j=k.velocities[this.m_indexA].v,s=k.velocities[this.m_indexA].w,q=k.velocities[this.m_indexB].v,r=k.velocities[this.m_indexB].w,n=box2d.b2AddVCrossSV(j,s,this.m_rA,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpA),m=box2d.b2AddVCrossSV(q,r,this.m_rB,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpB),n=-box2d.b2DotVV(this.m_uA,n)-this.m_ratio*box2d.b2DotVV(this.m_uB,m),m=-this.m_mass*n;this.m_impulse+=m;n=box2d.b2MulSV(-m,this.m_uA,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PA);m=box2d.b2MulSV(-this.m_ratio*m,this.m_uB,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PB);j.SelfMulAdd(this.m_invMassA,n);s+=this.m_invIA*box2d.b2CrossVV(this.m_rA,n);q.SelfMulAdd(this.m_invMassB,m);r+=this.m_invIB*box2d.b2CrossVV(this.m_rB,m);k.velocities[this.m_indexA].w=s;k.velocities[this.m_indexB].w=r};goog.exportProperty(box2d.b2PulleyJoint.prototype,"SolveVelocityConstraints",box2d.b2PulleyJoint.prototype.SolveVelocityConstraints);box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PA=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PB=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolvePositionConstraints=function(E){var D=E.positions[this.m_indexA].c,C=E.positions[this.m_indexA].a,A=E.positions[this.m_indexB].c,B=E.positions[this.m_indexB].a,z=this.m_qA.SetAngleRadians(C),y=this.m_qB.SetAngleRadians(B);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);z=box2d.b2MulRV(z,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var y=box2d.b2MulRV(y,this.m_lalcB,this.m_rB),v=this.m_uA.Copy(D).SelfAdd(z).SelfSub(this.m_groundAnchorA),s=this.m_uB.Copy(A).SelfAdd(y).SelfSub(this.m_groundAnchorB),u=v.GetLength(),r=s.GetLength();u>10*box2d.b2_linearSlop?v.SelfMul(1/u):v.SetZero();r>10*box2d.b2_linearSlop?s.SelfMul(1/r):s.SetZero();var q=box2d.b2CrossVV(z,v),j=box2d.b2CrossVV(y,s),q=this.m_invMassA+this.m_invIA*q*q+this.m_ratio*this.m_ratio*(this.m_invMassB+this.m_invIB*j*j);0<q&&(q=1/q);r=this.m_constant-u-this.m_ratio*r;u=box2d.b2Abs(r);r*=-q;v=box2d.b2MulSV(-r,v,box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PA);s=box2d.b2MulSV(-this.m_ratio*r,s,box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PB);D.SelfMulAdd(this.m_invMassA,v);C+=this.m_invIA*box2d.b2CrossVV(z,v);A.SelfMulAdd(this.m_invMassB,s);B+=this.m_invIB*box2d.b2CrossVV(y,s);E.positions[this.m_indexA].a=C;E.positions[this.m_indexB].a=B;return u<box2d.b2_linearSlop};goog.exportProperty(box2d.b2PulleyJoint.prototype,"SolvePositionConstraints",box2d.b2PulleyJoint.prototype.SolvePositionConstraints);box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PA=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PB=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetAnchorA",box2d.b2PulleyJoint.prototype.GetAnchorA);box2d.b2PulleyJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetAnchorB",box2d.b2PulleyJoint.prototype.GetAnchorB);box2d.b2PulleyJoint.prototype.GetReactionForce=function(e,d){return d.SetXY(e*this.m_impulse*this.m_uB.x,e*this.m_impulse*this.m_uB.y)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetReactionForce",box2d.b2PulleyJoint.prototype.GetReactionForce);box2d.b2PulleyJoint.prototype.GetReactionTorque=function(b){return 0};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetReactionTorque",box2d.b2PulleyJoint.prototype.GetReactionTorque);box2d.b2PulleyJoint.prototype.GetGroundAnchorA=function(b){return b.Copy(this.m_groundAnchorA)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetGroundAnchorA",box2d.b2PulleyJoint.prototype.GetGroundAnchorA);box2d.b2PulleyJoint.prototype.GetGroundAnchorB=function(b){return b.Copy(this.m_groundAnchorB)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetGroundAnchorB",box2d.b2PulleyJoint.prototype.GetGroundAnchorB);box2d.b2PulleyJoint.prototype.GetLengthA=function(){return this.m_lengthA};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetLengthA",box2d.b2PulleyJoint.prototype.GetLengthA);box2d.b2PulleyJoint.prototype.GetLengthB=function(){return this.m_lengthB};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetLengthB",box2d.b2PulleyJoint.prototype.GetLengthB);box2d.b2PulleyJoint.prototype.GetRatio=function(){return this.m_ratio};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetRatio",box2d.b2PulleyJoint.prototype.GetRatio);box2d.b2PulleyJoint.prototype.GetCurrentLengthA=function(){var b=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,box2d.b2PulleyJoint.prototype.GetCurrentLengthA.s_p);return box2d.b2DistanceVV(b,this.m_groundAnchorA)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetCurrentLengthA",box2d.b2PulleyJoint.prototype.GetCurrentLengthA);box2d.b2PulleyJoint.prototype.GetCurrentLengthA.s_p=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.GetCurrentLengthB=function(){var b=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,box2d.b2PulleyJoint.prototype.GetCurrentLengthB.s_p);return box2d.b2DistanceVV(b,this.m_groundAnchorB)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetCurrentLengthB",box2d.b2PulleyJoint.prototype.GetCurrentLengthB);box2d.b2PulleyJoint.prototype.GetCurrentLengthB.s_p=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2PulleyJointDef*/ var jd = new box2d.b2PulleyJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.groundAnchorA.SetXY(%.15f, %.15f);\n",this.m_groundAnchorA.x,this.m_groundAnchorA.y);box2d.b2Log("  jd.groundAnchorB.SetXY(%.15f, %.15f);\n",this.m_groundAnchorB.x,this.m_groundAnchorB.y);box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.lengthA = %.15f;\n",this.m_lengthA);box2d.b2Log("  jd.lengthB = %.15f;\n",this.m_lengthB);box2d.b2Log("  jd.ratio = %.15f;\n",this.m_ratio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2PulleyJoint.prototype,"Dump",box2d.b2PulleyJoint.prototype.Dump);box2d.b2PulleyJoint.prototype.ShiftOrigin=function(b){this.m_groundAnchorA.SelfSub(b);this.m_groundAnchorB.SelfSub(b)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"ShiftOrigin",box2d.b2PulleyJoint.prototype.ShiftOrigin);box2d.b2CircleShape=function(b){box2d.b2Shape.call(this,box2d.b2ShapeType.e_circleShape,b||0);this.m_p=new box2d.b2Vec2};goog.inherits(box2d.b2CircleShape,box2d.b2Shape);goog.exportSymbol("box2d.b2CircleShape",box2d.b2CircleShape);box2d.b2CircleShape.prototype.m_p=null;goog.exportProperty(box2d.b2CircleShape.prototype,"m_p",box2d.b2CircleShape.prototype.m_p);box2d.b2CircleShape.prototype.Clone=function(){return(new box2d.b2CircleShape).Copy(this)};goog.exportProperty(box2d.b2CircleShape.prototype,"Clone",box2d.b2CircleShape.prototype.Clone);box2d.b2CircleShape.prototype.Copy=function(b){box2d.b2CircleShape.superClass_.Copy.call(this,b);box2d.ENABLE_ASSERTS&&box2d.b2Assert(b instanceof box2d.b2CircleShape);this.m_p.Copy(b.m_p);return this};goog.exportProperty(box2d.b2CircleShape.prototype,"Copy",box2d.b2CircleShape.prototype.Copy);box2d.b2CircleShape.prototype.GetChildCount=function(){return 1};goog.exportProperty(box2d.b2CircleShape.prototype,"GetChildCount",box2d.b2CircleShape.prototype.GetChildCount);box2d.b2CircleShape.prototype.TestPoint=function(e,d){var f=box2d.b2MulXV(e,this.m_p,box2d.b2CircleShape.prototype.TestPoint.s_center),f=box2d.b2SubVV(d,f,box2d.b2CircleShape.prototype.TestPoint.s_d);return box2d.b2DotVV(f,f)<=box2d.b2Sq(this.m_radius)};goog.exportProperty(box2d.b2CircleShape.prototype,"TestPoint",box2d.b2CircleShape.prototype.TestPoint);box2d.b2CircleShape.prototype.TestPoint.s_center=new box2d.b2Vec2;box2d.b2CircleShape.prototype.TestPoint.s_d=new box2d.b2Vec2;box2d.b2CircleShape.prototype.RayCast=function(k,j,s,q){s=box2d.b2MulXV(s,this.m_p,box2d.b2CircleShape.prototype.RayCast.s_position);s=box2d.b2SubVV(j.p1,s,box2d.b2CircleShape.prototype.RayCast.s_s);var r=box2d.b2DotVV(s,s)-box2d.b2Sq(this.m_radius);q=box2d.b2SubVV(j.p2,j.p1,box2d.b2CircleShape.prototype.RayCast.s_r);var n=box2d.b2DotVV(s,q),m=box2d.b2DotVV(q,q),r=n*n-m*r;if(0>r||m<box2d.b2_epsilon){return !1}n=-(n+box2d.b2Sqrt(r));return 0<=n&&n<=j.maxFraction*m?(n/=m,k.fraction=n,box2d.b2AddVMulSV(s,n,q,k.normal).SelfNormalize(),!0):!1};goog.exportProperty(box2d.b2CircleShape.prototype,"RayCast",box2d.b2CircleShape.prototype.RayCast);box2d.b2CircleShape.prototype.RayCast.s_position=new box2d.b2Vec2;box2d.b2CircleShape.prototype.RayCast.s_s=new box2d.b2Vec2;box2d.b2CircleShape.prototype.RayCast.s_r=new box2d.b2Vec2;box2d.b2CircleShape.prototype.ComputeAABB=function(e,d,f){d=box2d.b2MulXV(d,this.m_p,box2d.b2CircleShape.prototype.ComputeAABB.s_p);e.lowerBound.SetXY(d.x-this.m_radius,d.y-this.m_radius);e.upperBound.SetXY(d.x+this.m_radius,d.y+this.m_radius)};goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeAABB",box2d.b2CircleShape.prototype.ComputeAABB);box2d.b2CircleShape.prototype.ComputeAABB.s_p=new box2d.b2Vec2;box2d.b2CircleShape.prototype.ComputeMass=function(e,d){var f=box2d.b2Sq(this.m_radius);e.mass=d*box2d.b2_pi*f;e.center.Copy(this.m_p);e.I=e.mass*(0.5*f+box2d.b2DotVV(this.m_p,this.m_p))};goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeMass",box2d.b2CircleShape.prototype.ComputeMass);box2d.b2CircleShape.prototype.SetupDistanceProxy=function(e,d){e.m_vertices=[1,!0];e.m_vertices[0]=this.m_p;e.m_count=1;e.m_radius=this.m_radius};box2d.b2CircleShape.prototype.ComputeSubmergedArea=function(j,g,q,m){q=box2d.b2MulXV(q,this.m_p,new box2d.b2Vec2);var n=-(box2d.b2DotVV(j,q)-g);if(n<-this.m_radius+box2d.b2_epsilon){return 0}if(n>this.m_radius){return m.Copy(q),box2d.b2_pi*this.m_radius*this.m_radius}g=this.m_radius*this.m_radius;var k=n*n,n=g*(box2d.b2Asin(n/this.m_radius)+box2d.b2_pi/2)+n*box2d.b2Sqrt(g-k);g=-2/3*box2d.b2Pow(g-k,1.5)/n;m.x=q.x+j.x*g;m.y=q.y+j.y*g;return n};goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeSubmergedArea",box2d.b2CircleShape.prototype.ComputeSubmergedArea);box2d.b2CircleShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2CircleShape*/ var shape = new box2d.b2CircleShape();\n");box2d.b2Log("    shape.m_radius = %.15f;\n",this.m_radius);box2d.b2Log("    shape.m_p.SetXY(%.15f, %.15f);\n",this.m_p.x,this.m_p.y)};goog.exportProperty(box2d.b2CircleShape.prototype,"Dump",box2d.b2CircleShape.prototype.Dump);box2d.b2RopeDef=function(){this.vertices=[];this.masses=[];this.gravity=new box2d.b2Vec2};goog.exportSymbol("box2d.b2RopeDef",box2d.b2RopeDef);box2d.b2RopeDef.prototype.vertices=null;box2d.b2RopeDef.prototype.count=0;box2d.b2RopeDef.prototype.masses=null;box2d.b2RopeDef.prototype.gravity=null;box2d.b2RopeDef.prototype.damping=0.1;box2d.b2RopeDef.prototype.k2=0.9;box2d.b2RopeDef.prototype.k3=0.1;box2d.b2Rope=function(){this.m_gravity=new box2d.b2Vec2};goog.exportSymbol("box2d.b2Rope",box2d.b2Rope);box2d.b2Rope.prototype.m_count=0;box2d.b2Rope.prototype.m_ps=null;box2d.b2Rope.prototype.m_p0s=null;box2d.b2Rope.prototype.m_vs=null;box2d.b2Rope.prototype.m_ims=null;box2d.b2Rope.prototype.m_Ls=null;box2d.b2Rope.prototype.m_as=null;box2d.b2Rope.prototype.m_gravity=null;box2d.b2Rope.prototype.m_damping=0;box2d.b2Rope.prototype.m_k2=1;box2d.b2Rope.prototype.m_k3=0.1;box2d.b2Rope.prototype.GetVertexCount=function(){return this.m_count};goog.exportProperty(box2d.b2Rope.prototype,"GetVertexCount",box2d.b2Rope.prototype.GetVertexCount);box2d.b2Rope.prototype.GetVertices=function(){return this.m_ps};goog.exportProperty(box2d.b2Rope.prototype,"GetVertices",box2d.b2Rope.prototype.GetVertices);box2d.b2Rope.prototype.Initialize=function(j){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=j.count);this.m_count=j.count;this.m_ps=box2d.b2Vec2.MakeArray(this.m_count);this.m_p0s=box2d.b2Vec2.MakeArray(this.m_count);this.m_vs=box2d.b2Vec2.MakeArray(this.m_count);this.m_ims=box2d.b2MakeNumberArray(this.m_count);for(var g=0;g<this.m_count;++g){this.m_ps[g].Copy(j.vertices[g]);this.m_p0s[g].Copy(j.vertices[g]);this.m_vs[g].SetZero();var q=j.masses[g];this.m_ims[g]=0<q?1/q:0}var m=this.m_count-1,q=this.m_count-2;this.m_Ls=box2d.b2MakeNumberArray(m);this.m_as=box2d.b2MakeNumberArray(q);for(g=0;g<m;++g){var n=this.m_ps[g],k=this.m_ps[g+1];this.m_Ls[g]=box2d.b2DistanceVV(n,k)}for(g=0;g<q;++g){n=this.m_ps[g],k=this.m_ps[g+1],m=this.m_ps[g+2],n=box2d.b2SubVV(k,n,box2d.b2Vec2.s_t0),m=box2d.b2SubVV(m,k,box2d.b2Vec2.s_t1),k=box2d.b2CrossVV(n,m),n=box2d.b2DotVV(n,m),this.m_as[g]=box2d.b2Atan2(k,n)}this.m_gravity.Copy(j.gravity);this.m_damping=j.damping;this.m_k2=j.k2;this.m_k3=j.k3};goog.exportProperty(box2d.b2Rope.prototype,"Initialize",box2d.b2Rope.prototype.Initialize);box2d.b2Rope.prototype.Step=function(f,d){if(0!=f){for(var j=Math.exp(-f*this.m_damping),g=0;g<this.m_count;++g){this.m_p0s[g].Copy(this.m_ps[g]),0<this.m_ims[g]&&this.m_vs[g].SelfMulAdd(f,this.m_gravity),this.m_vs[g].SelfMul(j),this.m_ps[g].SelfMulAdd(f,this.m_vs[g])}for(g=0;g<d;++g){this.SolveC2(),this.SolveC3(),this.SolveC2()}j=1/f;for(g=0;g<this.m_count;++g){box2d.b2MulSV(j,box2d.b2SubVV(this.m_ps[g],this.m_p0s[g],box2d.b2Vec2.s_t0),this.m_vs[g])}}};goog.exportProperty(box2d.b2Rope.prototype,"Step",box2d.b2Rope.prototype.Step);box2d.b2Rope.prototype.SolveC2=function(){for(var v=this.m_count-1,u=0;u<v;++u){var s=this.m_ps[u],q=this.m_ps[u+1],r=box2d.b2SubVV(q,s,box2d.b2Rope.s_d),n=r.Normalize(),m=this.m_ims[u],k=this.m_ims[u+1];if(0!=m+k){var j=k/(m+k);s.SelfMulSub(this.m_k2*(m/(m+k))*(this.m_Ls[u]-n),r);q.SelfMulAdd(this.m_k2*j*(this.m_Ls[u]-n),r)}}};goog.exportProperty(box2d.b2Rope.prototype,"SolveC2",box2d.b2Rope.prototype.SolveC2);box2d.b2Rope.s_d=new box2d.b2Vec2;box2d.b2Rope.prototype.SetAngleRadians=function(e){for(var d=this.m_count-2,f=0;f<d;++f){this.m_as[f]=e}};goog.exportProperty(box2d.b2Rope.prototype,"SetAngleRadians",box2d.b2Rope.prototype.SetAngleRadians);box2d.b2Rope.prototype.SolveC3=function(){for(var G=this.m_count-2,F=0;F<G;++F){var E=this.m_ps[F],C=this.m_ps[F+1],D=this.m_ps[F+2],B=this.m_ims[F],A=this.m_ims[F+1],z=this.m_ims[F+2],v=box2d.b2SubVV(C,E,box2d.b2Rope.s_d1),y=box2d.b2SubVV(D,C,box2d.b2Rope.s_d2),u=v.GetLengthSquared(),s=y.GetLengthSquared();if(0!=u*s){var r=box2d.b2CrossVV(v,y),j=box2d.b2DotVV(v,y),r=box2d.b2Atan2(r,j),v=box2d.b2MulSV(-1/u,v.SelfSkew(),box2d.b2Rope.s_Jd1),u=box2d.b2MulSV(1/s,y.SelfSkew(),box2d.b2Rope.s_Jd2),y=box2d.b2NegV(v,box2d.b2Rope.s_J1),s=box2d.b2SubVV(v,u,box2d.b2Rope.s_J2),v=u,u=B*box2d.b2DotVV(y,y)+A*box2d.b2DotVV(s,s)+z*box2d.b2DotVV(v,v);if(0!=u){u=1/u;for(j=r-this.m_as[F];j>box2d.b2_pi;){r-=2*box2d.b2_pi,j=r-this.m_as[F]}for(;j<-box2d.b2_pi;){r+=2*box2d.b2_pi,j=r-this.m_as[F]}r=-this.m_k3*u*j;E.SelfMulAdd(B*r,y);C.SelfMulAdd(A*r,s);D.SelfMulAdd(z*r,v)}}}};goog.exportProperty(box2d.b2Rope.prototype,"SolveC3",box2d.b2Rope.prototype.SolveC3);box2d.b2Rope.s_d1=new box2d.b2Vec2;box2d.b2Rope.s_d2=new box2d.b2Vec2;box2d.b2Rope.s_Jd1=new box2d.b2Vec2;box2d.b2Rope.s_Jd2=new box2d.b2Vec2;box2d.b2Rope.s_J1=new box2d.b2Vec2;box2d.b2Rope.s_J2=new box2d.b2Vec2;box2d.b2Rope.prototype.Draw=function(e){for(var d=new box2d.b2Color(0.4,0.5,0.7),f=0;f<this.m_count-1;++f){e.DrawSegment(this.m_ps[f],this.m_ps[f+1],d)}};goog.exportProperty(box2d.b2Rope.prototype,"Draw",box2d.b2Rope.prototype.Draw);box2d.b2WheelJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_wheelJoint);this.localAnchorA=new box2d.b2Vec2(0,0);this.localAnchorB=new box2d.b2Vec2(0,0);this.localAxisA=new box2d.b2Vec2(1,0)};goog.inherits(box2d.b2WheelJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2WheelJointDef",box2d.b2WheelJointDef);box2d.b2WheelJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2WheelJointDef.prototype,"localAnchorA",box2d.b2WheelJointDef.prototype.localAnchorA);box2d.b2WheelJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2WheelJointDef.prototype,"localAnchorB",box2d.b2WheelJointDef.prototype.localAnchorB);box2d.b2WheelJointDef.prototype.localAxisA=null;goog.exportProperty(box2d.b2WheelJointDef.prototype,"localAxisA",box2d.b2WheelJointDef.prototype.localAxisA);box2d.b2WheelJointDef.prototype.enableMotor=!1;goog.exportProperty(box2d.b2WheelJointDef.prototype,"enableMotor",box2d.b2WheelJointDef.prototype.enableMotor);box2d.b2WheelJointDef.prototype.maxMotorTorque=0;goog.exportProperty(box2d.b2WheelJointDef.prototype,"maxMotorTorque",box2d.b2WheelJointDef.prototype.maxMotorTorque);box2d.b2WheelJointDef.prototype.motorSpeed=0;goog.exportProperty(box2d.b2WheelJointDef.prototype,"motorSpeed",box2d.b2WheelJointDef.prototype.motorSpeed);box2d.b2WheelJointDef.prototype.frequencyHz=2;goog.exportProperty(box2d.b2WheelJointDef.prototype,"frequencyHz",box2d.b2WheelJointDef.prototype.frequencyHz);box2d.b2WheelJointDef.prototype.dampingRatio=0.7;goog.exportProperty(box2d.b2WheelJointDef.prototype,"dampingRatio",box2d.b2WheelJointDef.prototype.dampingRatio);box2d.b2WheelJointDef.prototype.Initialize=function(f,d,j,g){this.bodyA=f;this.bodyB=d;this.bodyA.GetLocalPoint(j,this.localAnchorA);this.bodyB.GetLocalPoint(j,this.localAnchorB);this.bodyA.GetLocalVector(g,this.localAxisA)};goog.exportProperty(box2d.b2WheelJointDef.prototype,"Initialize",box2d.b2WheelJointDef.prototype.Initialize);box2d.b2WheelJoint=function(b){box2d.b2Joint.call(this,b);this.m_frequencyHz=b.frequencyHz;this.m_dampingRatio=b.dampingRatio;this.m_localAnchorA=b.localAnchorA.Clone();this.m_localAnchorB=b.localAnchorB.Clone();this.m_localXAxisA=b.localAxisA.Clone();this.m_localYAxisA=box2d.b2CrossOneV(this.m_localXAxisA,new box2d.b2Vec2);this.m_maxMotorTorque=b.maxMotorTorque;this.m_motorSpeed=b.motorSpeed;this.m_enableMotor=b.enableMotor;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_ax=new box2d.b2Vec2;this.m_ay=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_ax.SetZero();this.m_ay.SetZero()};goog.inherits(box2d.b2WheelJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2WheelJoint",box2d.b2WheelJoint);box2d.b2WheelJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_frequencyHz",box2d.b2WheelJoint.prototype.m_frequencyHz);box2d.b2WheelJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_dampingRatio",box2d.b2WheelJoint.prototype.m_dampingRatio);box2d.b2WheelJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localAnchorA",box2d.b2WheelJoint.prototype.m_localAnchorA);box2d.b2WheelJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localAnchorB",box2d.b2WheelJoint.prototype.m_localAnchorB);box2d.b2WheelJoint.prototype.m_localXAxisA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localXAxisA",box2d.b2WheelJoint.prototype.m_localXAxisA);box2d.b2WheelJoint.prototype.m_localYAxisA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localYAxisA",box2d.b2WheelJoint.prototype.m_localYAxisA);box2d.b2WheelJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_impulse",box2d.b2WheelJoint.prototype.m_impulse);box2d.b2WheelJoint.prototype.m_motorImpulse=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_motorImpulse",box2d.b2WheelJoint.prototype.m_motorImpulse);box2d.b2WheelJoint.prototype.m_springImpulse=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_springImpulse",box2d.b2WheelJoint.prototype.m_springImpulse);box2d.b2WheelJoint.prototype.m_maxMotorTorque=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_maxMotorTorque",box2d.b2WheelJoint.prototype.m_maxMotorTorque);box2d.b2WheelJoint.prototype.m_motorSpeed=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_motorSpeed",box2d.b2WheelJoint.prototype.m_motorSpeed);box2d.b2WheelJoint.prototype.m_enableMotor=!1;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_enableMotor",box2d.b2WheelJoint.prototype.m_enableMotor);box2d.b2WheelJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_indexA",box2d.b2WheelJoint.prototype.m_indexA);box2d.b2WheelJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_indexB",box2d.b2WheelJoint.prototype.m_indexB);box2d.b2WheelJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localCenterA",box2d.b2WheelJoint.prototype.m_localCenterA);box2d.b2WheelJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localCenterB",box2d.b2WheelJoint.prototype.m_localCenterB);box2d.b2WheelJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invMassA",box2d.b2WheelJoint.prototype.m_invMassA);box2d.b2WheelJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invMassB",box2d.b2WheelJoint.prototype.m_invMassB);box2d.b2WheelJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invIA",box2d.b2WheelJoint.prototype.m_invIA);box2d.b2WheelJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invIB",box2d.b2WheelJoint.prototype.m_invIB);box2d.b2WheelJoint.prototype.m_ax=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_ax",box2d.b2WheelJoint.prototype.m_ax);box2d.b2WheelJoint.prototype.m_ay=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_ay",box2d.b2WheelJoint.prototype.m_ay);box2d.b2WheelJoint.prototype.m_sAx=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sAx",box2d.b2WheelJoint.prototype.m_sAx);box2d.b2WheelJoint.prototype.m_sBx=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sBx",box2d.b2WheelJoint.prototype.m_sBx);box2d.b2WheelJoint.prototype.m_sAy=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sAy",box2d.b2WheelJoint.prototype.m_sAy);box2d.b2WheelJoint.prototype.m_sBy=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sBy",box2d.b2WheelJoint.prototype.m_sBy);box2d.b2WheelJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_mass",box2d.b2WheelJoint.prototype.m_mass);box2d.b2WheelJoint.prototype.m_motorMass=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_motorMass",box2d.b2WheelJoint.prototype.m_motorMass);box2d.b2WheelJoint.prototype.m_springMass=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_springMass",box2d.b2WheelJoint.prototype.m_springMass);box2d.b2WheelJoint.prototype.m_bias=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_bias",box2d.b2WheelJoint.prototype.m_bias);box2d.b2WheelJoint.prototype.m_gamma=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_gamma",box2d.b2WheelJoint.prototype.m_gamma);box2d.b2WheelJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_qA",box2d.b2WheelJoint.prototype.m_qA);box2d.b2WheelJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_qB",box2d.b2WheelJoint.prototype.m_qB);box2d.b2WheelJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_lalcA",box2d.b2WheelJoint.prototype.m_lalcA);box2d.b2WheelJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_lalcB",box2d.b2WheelJoint.prototype.m_lalcB);box2d.b2WheelJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_rA",box2d.b2WheelJoint.prototype.m_rA);box2d.b2WheelJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_rB",box2d.b2WheelJoint.prototype.m_rB);box2d.b2WheelJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetMotorSpeed",box2d.b2WheelJoint.prototype.GetMotorSpeed);box2d.b2WheelJoint.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetMaxMotorTorque",box2d.b2WheelJoint.prototype.GetMaxMotorTorque);box2d.b2WheelJoint.prototype.SetSpringFrequencyHz=function(b){this.m_frequencyHz=b};goog.exportProperty(box2d.b2WheelJoint.prototype,"SetSpringFrequencyHz",box2d.b2WheelJoint.prototype.SetSpringFrequencyHz);box2d.b2WheelJoint.prototype.GetSpringFrequencyHz=function(){return this.m_frequencyHz};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetSpringFrequencyHz",box2d.b2WheelJoint.prototype.GetSpringFrequencyHz);box2d.b2WheelJoint.prototype.SetSpringDampingRatio=function(b){this.m_dampingRatio=b};goog.exportProperty(box2d.b2WheelJoint.prototype,"SetSpringDampingRatio",box2d.b2WheelJoint.prototype.SetSpringDampingRatio);box2d.b2WheelJoint.prototype.GetSpringDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetSpringDampingRatio",box2d.b2WheelJoint.prototype.GetSpringDampingRatio);box2d.b2WheelJoint.prototype.InitVelocityConstraints=function(G){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var F=this.m_invMassA,E=this.m_invMassB,C=this.m_invIA,D=this.m_invIB,B=G.positions[this.m_indexA].c,A=G.velocities[this.m_indexA].v,z=G.velocities[this.m_indexA].w,v=G.positions[this.m_indexB].c,y=G.positions[this.m_indexB].a,u=G.velocities[this.m_indexB].v,s=G.velocities[this.m_indexB].w,r=this.m_qA.SetAngleRadians(G.positions[this.m_indexA].a),j=this.m_qB.SetAngleRadians(y);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);y=box2d.b2MulRV(r,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);j=box2d.b2MulRV(j,this.m_lalcB,this.m_rB);B=box2d.b2SubVV(box2d.b2AddVV(v,j,box2d.b2Vec2.s_t0),box2d.b2AddVV(B,y,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_d);box2d.b2MulRV(r,this.m_localYAxisA,this.m_ay);this.m_sAy=box2d.b2CrossVV(box2d.b2AddVV(B,y,box2d.b2Vec2.s_t0),this.m_ay);this.m_sBy=box2d.b2CrossVV(j,this.m_ay);this.m_mass=F+E+C*this.m_sAy*this.m_sAy+D*this.m_sBy*this.m_sBy;0<this.m_mass&&(this.m_mass=1/this.m_mass);this.m_gamma=this.m_bias=this.m_springMass=0;0<this.m_frequencyHz?(box2d.b2MulRV(r,this.m_localXAxisA,this.m_ax),this.m_sAx=box2d.b2CrossVV(box2d.b2AddVV(B,y,box2d.b2Vec2.s_t0),this.m_ax),this.m_sBx=box2d.b2CrossVV(j,this.m_ax),F=F+E+C*this.m_sAx*this.m_sAx+D*this.m_sBx*this.m_sBx,0<F&&(this.m_springMass=1/F,E=box2d.b2DotVV(B,this.m_ax),r=2*box2d.b2_pi*this.m_frequencyHz,B=this.m_springMass*r*r,v=G.step.dt,this.m_gamma=v*(2*this.m_springMass*this.m_dampingRatio*r+v*B),0<this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_bias=E*v*B*this.m_gamma,this.m_springMass=F+this.m_gamma,0<this.m_springMass&&(this.m_springMass=1/this.m_springMass))):this.m_springImpulse=0;this.m_enableMotor?(this.m_motorMass=C+D,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass)):this.m_motorImpulse=this.m_motorMass=0;G.step.warmStarting?(this.m_impulse*=G.step.dtRatio,this.m_springImpulse*=G.step.dtRatio,this.m_motorImpulse*=G.step.dtRatio,C=box2d.b2AddVV(box2d.b2MulSV(this.m_impulse,this.m_ay,box2d.b2Vec2.s_t0),box2d.b2MulSV(this.m_springImpulse,this.m_ax,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_P),D=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,F=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse,A.SelfMulSub(this.m_invMassA,C),z-=this.m_invIA*D,u.SelfMulAdd(this.m_invMassB,C),s+=this.m_invIB*F):this.m_motorImpulse=this.m_springImpulse=this.m_impulse=0;G.velocities[this.m_indexA].w=z;G.velocities[this.m_indexB].w=s};goog.exportProperty(box2d.b2WheelJoint.prototype,"InitVelocityConstraints",box2d.b2WheelJoint.prototype.InitVelocityConstraints);box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_d=new box2d.b2Vec2;box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2WheelJoint.prototype.SolveVelocityConstraints=function(D){var C=this.m_invMassA,B=this.m_invMassB,z=this.m_invIA,A=this.m_invIB,y=D.velocities[this.m_indexA].v,v=D.velocities[this.m_indexA].w,u=D.velocities[this.m_indexB].v,r=D.velocities[this.m_indexB].w,s=box2d.b2DotVV(this.m_ax,box2d.b2SubVV(u,y,box2d.b2Vec2.s_t0))+this.m_sBx*r-this.m_sAx*v,s=-this.m_springMass*(s+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=s;var q=box2d.b2MulSV(s,this.m_ax,box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P),j=s*this.m_sAx,s=s*this.m_sBx;y.SelfMulSub(C,q);v-=z*j;u.SelfMulAdd(B,q);r+=A*s;s=r-v-this.m_motorSpeed;s*=-this.m_motorMass;q=this.m_motorImpulse;j=D.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+s,-j,j);s=this.m_motorImpulse-q;v-=z*s;r+=A*s;s=box2d.b2DotVV(this.m_ay,box2d.b2SubVV(u,y,box2d.b2Vec2.s_t0))+this.m_sBy*r-this.m_sAy*v;s*=-this.m_mass;this.m_impulse+=s;q=box2d.b2MulSV(s,this.m_ay,box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P);j=s*this.m_sAy;s*=this.m_sBy;y.SelfMulSub(C,q);v-=z*j;u.SelfMulAdd(B,q);D.velocities[this.m_indexA].w=v;D.velocities[this.m_indexB].w=r+A*s};goog.exportProperty(box2d.b2WheelJoint.prototype,"SolveVelocityConstraints",box2d.b2WheelJoint.prototype.SolveVelocityConstraints);box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2WheelJoint.prototype.SolvePositionConstraints=function(z){var y=z.positions[this.m_indexA].c,v=z.positions[this.m_indexA].a,s=z.positions[this.m_indexB].c,u=z.positions[this.m_indexB].a,r=this.m_qA.SetAngleRadians(v),q=this.m_qB.SetAngleRadians(u);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var n=box2d.b2MulRV(r,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var q=box2d.b2MulRV(q,this.m_lalcB,this.m_rB),j=box2d.b2AddVV(box2d.b2SubVV(s,y,box2d.b2Vec2.s_t0),box2d.b2SubVV(q,n,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_d),r=box2d.b2MulRV(r,this.m_localYAxisA,this.m_ay),n=box2d.b2CrossVV(box2d.b2AddVV(j,n,box2d.b2Vec2.s_t0),r),q=box2d.b2CrossVV(q,r),j=box2d.b2DotVV(j,this.m_ay),m=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy,m=0!=m?-j/m:0,r=box2d.b2MulSV(m,r,box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_P),n=m*n,q=m*q;y.SelfMulSub(this.m_invMassA,r);v-=this.m_invIA*n;s.SelfMulAdd(this.m_invMassB,r);u+=this.m_invIB*q;z.positions[this.m_indexA].a=v;z.positions[this.m_indexB].a=u;return box2d.b2Abs(j)<=box2d.b2_linearSlop};goog.exportProperty(box2d.b2WheelJoint.prototype,"SolvePositionConstraints",box2d.b2WheelJoint.prototype.SolvePositionConstraints);box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_d=new box2d.b2Vec2;box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2WheelJoint.prototype.GetDefinition=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);return b};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetDefinition",box2d.b2WheelJoint.prototype.GetDefinition);box2d.b2WheelJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetAnchorA",box2d.b2WheelJoint.prototype.GetAnchorA);box2d.b2WheelJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetAnchorB",box2d.b2WheelJoint.prototype.GetAnchorB);box2d.b2WheelJoint.prototype.GetReactionForce=function(e,d){d.x=e*(this.m_impulse*this.m_ay.x+this.m_springImpulse*this.m_ax.x);d.y=e*(this.m_impulse*this.m_ay.y+this.m_springImpulse*this.m_ax.y);return d};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetReactionForce",box2d.b2WheelJoint.prototype.GetReactionForce);box2d.b2WheelJoint.prototype.GetReactionTorque=function(b){return b*this.m_motorImpulse};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetReactionTorque",box2d.b2WheelJoint.prototype.GetReactionTorque);box2d.b2WheelJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetLocalAnchorA",box2d.b2WheelJoint.prototype.GetLocalAnchorA);box2d.b2WheelJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetLocalAnchorB",box2d.b2WheelJoint.prototype.GetLocalAnchorB);box2d.b2WheelJoint.prototype.GetLocalAxisA=function(b){return b.Copy(this.m_localXAxisA)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetLocalAxisA",box2d.b2WheelJoint.prototype.GetLocalAxisA);box2d.b2WheelJoint.prototype.GetJointTranslation=function(){var e=this.m_bodyA,d=this.m_bodyB,f=e.GetWorldPoint(this.m_localAnchorA,new box2d.b2Vec2),d=d.GetWorldPoint(this.m_localAnchorB,new box2d.b2Vec2),f=box2d.b2SubVV(d,f,new box2d.b2Vec2),e=e.GetWorldVector(this.m_localXAxisA,new box2d.b2Vec2);return box2d.b2DotVV(f,e)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetJointTranslation",box2d.b2WheelJoint.prototype.GetJointTranslation);box2d.b2WheelJoint.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetJointSpeed",box2d.b2WheelJoint.prototype.GetJointSpeed);box2d.b2WheelJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor};goog.exportProperty(box2d.b2WheelJoint.prototype,"IsMotorEnabled",box2d.b2WheelJoint.prototype.IsMotorEnabled);box2d.b2WheelJoint.prototype.EnableMotor=function(b){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_enableMotor=b};goog.exportProperty(box2d.b2WheelJoint.prototype,"EnableMotor",box2d.b2WheelJoint.prototype.EnableMotor);box2d.b2WheelJoint.prototype.SetMotorSpeed=function(b){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_motorSpeed=b};goog.exportProperty(box2d.b2WheelJoint.prototype,"SetMotorSpeed",box2d.b2WheelJoint.prototype.SetMotorSpeed);box2d.b2WheelJoint.prototype.SetMaxMotorTorque=function(b){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_maxMotorTorque=b};goog.exportProperty(box2d.b2WheelJoint.prototype,"SetMaxMotorTorque",box2d.b2WheelJoint.prototype.SetMaxMotorTorque);box2d.b2WheelJoint.prototype.GetMotorTorque=function(b){return b*this.m_motorImpulse};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetMotorTorque",box2d.b2WheelJoint.prototype.GetMotorTorque);box2d.b2WheelJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2WheelJointDef*/ var jd = new box2d.b2WheelJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y);box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false");box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed);box2d.b2Log("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque);box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz);box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2WheelJoint.prototype,"Dump",box2d.b2WheelJoint.prototype.Dump);box2d.b2MotorJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_motorJoint);this.linearOffset=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2MotorJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2MotorJointDef",box2d.b2MotorJointDef);box2d.b2MotorJointDef.prototype.linearOffset=null;goog.exportProperty(box2d.b2MotorJointDef.prototype,"linearOffset",box2d.b2MotorJointDef.prototype.linearOffset);box2d.b2MotorJointDef.prototype.angularOffset=0;goog.exportProperty(box2d.b2MotorJointDef.prototype,"angularOffset",box2d.b2MotorJointDef.prototype.angularOffset);box2d.b2MotorJointDef.prototype.maxForce=1;goog.exportProperty(box2d.b2MotorJointDef.prototype,"maxForce",box2d.b2MotorJointDef.prototype.maxForce);box2d.b2MotorJointDef.prototype.maxTorque=1;goog.exportProperty(box2d.b2MotorJointDef.prototype,"maxTorque",box2d.b2MotorJointDef.prototype.maxTorque);box2d.b2MotorJointDef.prototype.correctionFactor=0.3;goog.exportProperty(box2d.b2MotorJointDef.prototype,"correctionFactor",box2d.b2MotorJointDef.prototype.correctionFactor);box2d.b2MotorJointDef.prototype.Initialize=function(e,d){this.bodyA=e;this.bodyB=d;this.bodyA.GetLocalPoint(this.bodyB.GetPosition(),this.linearOffset);var f=this.bodyA.GetAngleRadians();this.angularOffset=this.bodyB.GetAngleRadians()-f};goog.exportProperty(box2d.b2MotorJointDef.prototype,"Initialize",box2d.b2MotorJointDef.prototype.Initialize);box2d.b2MotorJoint=function(b){box2d.b2Joint.call(this,b);this.m_linearOffset=b.linearOffset.Clone();this.m_linearImpulse=new box2d.b2Vec2(0,0);this.m_maxForce=b.maxForce;this.m_maxTorque=b.maxTorque;this.m_correctionFactor=b.correctionFactor;this.m_rA=new box2d.b2Vec2(0,0);this.m_rB=new box2d.b2Vec2(0,0);this.m_localCenterA=new box2d.b2Vec2(0,0);this.m_localCenterB=new box2d.b2Vec2(0,0);this.m_linearError=new box2d.b2Vec2(0,0);this.m_linearMass=new box2d.b2Mat22;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_K=new box2d.b2Mat22};goog.inherits(box2d.b2MotorJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2MotorJoint",box2d.b2MotorJoint);box2d.b2MotorJoint.prototype.m_linearOffset=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearOffset",box2d.b2MotorJoint.prototype.m_linearOffset);box2d.b2MotorJoint.prototype.m_angularOffset=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularOffset",box2d.b2MotorJoint.prototype.m_angularOffset);box2d.b2MotorJoint.prototype.m_linearImpulse=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearImpulse",box2d.b2MotorJoint.prototype.m_linearImpulse);box2d.b2MotorJoint.prototype.m_angularImpulse=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularImpulse",box2d.b2MotorJoint.prototype.m_angularImpulse);box2d.b2MotorJoint.prototype.m_maxForce=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_maxForce",box2d.b2MotorJoint.prototype.m_maxForce);box2d.b2MotorJoint.prototype.m_maxTorque=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_maxTorque",box2d.b2MotorJoint.prototype.m_maxTorque);box2d.b2MotorJoint.prototype.m_correctionFactor=0.3;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_correctionFactor",box2d.b2MotorJoint.prototype.m_correctionFactor);box2d.b2MotorJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_indexA",box2d.b2MotorJoint.prototype.m_indexA);box2d.b2MotorJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_indexB",box2d.b2MotorJoint.prototype.m_indexB);box2d.b2MotorJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_rA",box2d.b2MotorJoint.prototype.m_rA);box2d.b2MotorJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_rB",box2d.b2MotorJoint.prototype.m_rB);box2d.b2MotorJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_localCenterA",box2d.b2MotorJoint.prototype.m_localCenterA);box2d.b2MotorJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_localCenterB",box2d.b2MotorJoint.prototype.m_localCenterB);box2d.b2MotorJoint.prototype.m_linearError=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearError",box2d.b2MotorJoint.prototype.m_linearError);box2d.b2MotorJoint.prototype.m_angularError=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularError",box2d.b2MotorJoint.prototype.m_angularError);box2d.b2MotorJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invMassA",box2d.b2MotorJoint.prototype.m_invMassA);box2d.b2MotorJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invMassB",box2d.b2MotorJoint.prototype.m_invMassB);box2d.b2MotorJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invIA",box2d.b2MotorJoint.prototype.m_invIA);box2d.b2MotorJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invIB",box2d.b2MotorJoint.prototype.m_invIB);box2d.b2MotorJoint.prototype.m_linearMass=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearMass",box2d.b2MotorJoint.prototype.m_linearMass);box2d.b2MotorJoint.prototype.m_angularMass=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularMass",box2d.b2MotorJoint.prototype.m_angularMass);box2d.b2MotorJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_qA",box2d.b2MotorJoint.prototype.m_qA);box2d.b2MotorJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_qB",box2d.b2MotorJoint.prototype.m_qB);box2d.b2MotorJoint.prototype.m_K=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_K",box2d.b2MotorJoint.prototype.m_K);box2d.b2MotorJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetPosition(b)};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetAnchorA",box2d.b2MotorJoint.prototype.GetAnchorA);box2d.b2MotorJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetPosition(b)};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetAnchorB",box2d.b2MotorJoint.prototype.GetAnchorB);box2d.b2MotorJoint.prototype.GetReactionForce=function(e,d){return box2d.b2MulSV(e,this.m_linearImpulse,d)};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetReactionForce",box2d.b2MotorJoint.prototype.GetReactionForce);box2d.b2MotorJoint.prototype.GetReactionTorque=function(b){return b*this.m_angularImpulse};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetReactionTorque",box2d.b2MotorJoint.prototype.GetReactionTorque);box2d.b2MotorJoint.prototype.SetLinearOffset=function(b){box2d.b2IsEqualToV(b,this.m_linearOffset)||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(b))};goog.exportProperty(box2d.b2MotorJoint.prototype,"SetLinearOffset",box2d.b2MotorJoint.prototype.SetLinearOffset);box2d.b2MotorJoint.prototype.GetLinearOffset=function(b){return b.Copy(this.m_linearOffset)};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetLinearOffset",box2d.b2MotorJoint.prototype.GetLinearOffset);box2d.b2MotorJoint.prototype.SetAngularOffset=function(b){b!=this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=b)};goog.exportProperty(box2d.b2MotorJoint.prototype,"SetAngularOffset",box2d.b2MotorJoint.prototype.SetAngularOffset);box2d.b2MotorJoint.prototype.GetAngularOffset=function(){return this.m_angularOffset};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetAngularOffset",box2d.b2MotorJoint.prototype.GetAngularOffset);box2d.b2MotorJoint.prototype.SetMaxForce=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(b)&&0<=b);this.m_maxForce=b};goog.exportProperty(box2d.b2MotorJoint.prototype,"SetMaxForce",box2d.b2MotorJoint.prototype.SetMaxForce);box2d.b2MotorJoint.prototype.GetMaxForce=function(){return this.m_maxForce};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetMaxForce",box2d.b2MotorJoint.prototype.GetMaxForce);box2d.b2MotorJoint.prototype.SetMaxTorque=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(b)&&0<=b);this.m_maxTorque=b};goog.exportProperty(box2d.b2MotorJoint.prototype,"SetMaxTorque",box2d.b2MotorJoint.prototype.SetMaxTorque);box2d.b2MotorJoint.prototype.GetMaxTorque=function(){return this.m_maxTorque};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetMaxTorque",box2d.b2MotorJoint.prototype.GetMaxTorque);box2d.b2MotorJoint.prototype.InitVelocityConstraints=function(J){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var I=J.positions[this.m_indexA].c,H=J.positions[this.m_indexA].a,F=J.velocities[this.m_indexA].v,G=J.velocities[this.m_indexA].w,E=J.positions[this.m_indexB].c,D=J.positions[this.m_indexB].a,C=J.velocities[this.m_indexB].v,A=J.velocities[this.m_indexB].w,B=this.m_qA.SetAngleRadians(H),z=this.m_qB.SetAngleRadians(D),y=box2d.b2MulRV(B,box2d.b2NegV(this.m_localCenterA,box2d.b2Vec2.s_t0),this.m_rA),z=box2d.b2MulRV(z,box2d.b2NegV(this.m_localCenterB,box2d.b2Vec2.s_t0),this.m_rB),v=this.m_invMassA,u=this.m_invMassB,j=this.m_invIA,K=this.m_invIB,L=this.m_K;L.ex.x=v+u+j*y.y*y.y+K*z.y*z.y;L.ex.y=-j*y.x*y.y-K*z.x*z.y;L.ey.x=L.ex.y;L.ey.y=v+u+j*y.x*y.x+K*z.x*z.x;L.GetInverse(this.m_linearMass);this.m_angularMass=j+K;0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass);box2d.b2SubVV(box2d.b2SubVV(box2d.b2AddVV(E,z,box2d.b2Vec2.s_t0),box2d.b2AddVV(I,y,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t2),box2d.b2MulRV(B,this.m_linearOffset,box2d.b2Vec2.s_t3),this.m_linearError);this.m_angularError=D-H-this.m_angularOffset;J.step.warmStarting?(this.m_linearImpulse.SelfMul(J.step.dtRatio),this.m_angularImpulse*=J.step.dtRatio,I=this.m_linearImpulse,F.SelfMulSub(v,I),G-=j*(box2d.b2CrossVV(y,I)+this.m_angularImpulse),C.SelfMulAdd(u,I),A+=K*(box2d.b2CrossVV(z,I)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0);J.velocities[this.m_indexA].w=G;J.velocities[this.m_indexB].w=A};goog.exportProperty(box2d.b2MotorJoint.prototype,"InitVelocityConstraints",box2d.b2MotorJoint.prototype.InitVelocityConstraints);box2d.b2MotorJoint.prototype.SolveVelocityConstraints=function(I){var H=I.velocities[this.m_indexA].v,G=I.velocities[this.m_indexA].w,E=I.velocities[this.m_indexB].v,F=I.velocities[this.m_indexB].w,D=this.m_invMassA,C=this.m_invMassB,B=this.m_invIA,z=this.m_invIB,A=I.step.dt,y=I.step.inv_dt,v=F-G+y*this.m_correctionFactor*this.m_angularError,v=-this.m_angularMass*v,u=this.m_angularImpulse,s=A*this.m_maxTorque;this.m_angularImpulse=box2d.b2Clamp(this.m_angularImpulse+v,-s,s);var v=this.m_angularImpulse-u,G=G-B*v,F=F+z*v,j=this.m_rA,J=this.m_rB,v=box2d.b2AddVV(box2d.b2SubVV(box2d.b2AddVV(E,box2d.b2CrossSV(F,J,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2AddVV(H,box2d.b2CrossSV(G,j,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t2),box2d.b2MulSV(y*this.m_correctionFactor,this.m_linearError,box2d.b2Vec2.s_t3),box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_Cdot),v=box2d.b2MulMV(this.m_linearMass,v,box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_impulse).SelfNeg(),u=box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_oldImpulse.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(v);s=A*this.m_maxForce;this.m_linearImpulse.GetLengthSquared()>s*s&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(s));box2d.b2SubVV(this.m_linearImpulse,u,v);H.SelfMulSub(D,v);G-=B*box2d.b2CrossVV(j,v);E.SelfMulAdd(C,v);F+=z*box2d.b2CrossVV(J,v);I.velocities[this.m_indexA].w=G;I.velocities[this.m_indexB].w=F};goog.exportProperty(box2d.b2MotorJoint.prototype,"SolveVelocityConstraints",box2d.b2MotorJoint.prototype.SolveVelocityConstraints);box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2;box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec2;box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_oldImpulse=new box2d.b2Vec2;box2d.b2MotorJoint.prototype.SolvePositionConstraints=function(b){return !0};goog.exportProperty(box2d.b2MotorJoint.prototype,"SolvePositionConstraints",box2d.b2MotorJoint.prototype.SolvePositionConstraints);box2d.b2MotorJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2MotorJointDef*/ var jd = new box2d.b2MotorJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.linearOffset.SetXY(%.15f, %.15f);\n",this.m_linearOffset.x,this.m_linearOffset.y);box2d.b2Log("  jd.angularOffset = %.15f;\n",this.m_angularOffset);box2d.b2Log("  jd.maxForce = %.15f;\n",this.m_maxForce);box2d.b2Log("  jd.maxTorque = %.15f;\n",this.m_maxTorque);box2d.b2Log("  jd.correctionFactor = %.15f;\n",this.m_correctionFactor);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2MotorJoint.prototype,"Dump",box2d.b2MotorJoint.prototype.Dump);goog.provide("box2d.Render");box2d.b2DebugDraw=function(a){goog.base(this);this.scale=a.scale;this.m_canvas=a.canvas||false;this.m_ctx=a.ctx||false;this.m_settings=a.flags||box2d.b2DrawFlags.e_shapeBit;this.alpha=a.alpha||0.5};goog.inherits(box2d.b2DebugDraw,box2d.b2Draw);box2d.b2DebugDraw.prototype.m_canvas=null;box2d.b2DebugDraw.prototype.m_ctx=null;box2d.b2DebugDraw.prototype.m_settings=null;box2d.b2DebugDraw.prototype.scale=40;box2d.b2DebugDraw.prototype.alpha=0.5;box2d.b2DebugDraw.prototype.PushTransform=function(b){var a=this.m_ctx;a.save();a.globalAlpha=this.alpha;a.translate(b.p.x*this.scale,b.p.y*this.scale);a.rotate(b.q.GetAngleRadians())};box2d.b2DebugDraw.prototype.PopTransform=function(b){var a=this.m_ctx;a.restore()};box2d.b2DebugDraw.prototype.DrawPolygon=function(d,f,b){if(!f){return}var a=this.m_ctx;a.beginPath();a.moveTo(d[0].x,d[0].y);for(var e=1;e<f;e++){a.lineTo(d[e].x*this.scale,d[e].y*this.scale)}a.closePath();a.strokeStyle=b.MakeStyleString(1);a.stroke()};box2d.b2DebugDraw.prototype.DrawSolidPolygon=function(d,f,b){if(!f){return}var a=this.m_ctx;a.beginPath();a.moveTo(d[0].x*this.scale,d[0].y*this.scale);for(var e=1;e<f;e++){a.lineTo(d[e].x*this.scale,d[e].y*this.scale)}a.closePath();a.fillStyle=b.MakeStyleString(0.5);a.fill();a.strokeStyle=b.MakeStyleString(1);a.stroke()};box2d.b2DebugDraw.prototype.DrawCircle=function(b,a,e){if(!a){return}var d=this.m_ctx;d.beginPath();d.arc(b.x*this.scale,b.y*this.scale,a*this.scale,0,box2d.b2_pi*2,true);d.strokeStyle=e.MakeStyleString(1);d.stroke()};box2d.b2DebugDraw.prototype.DrawSolidCircle=function(d,b,g,f){if(!b){return}var e=this.m_ctx;var a=d.x*this.scale;var j=d.y*this.scale;e.beginPath();e.arc(a,j,b,0,box2d.b2_pi*2,true);e.moveTo(a,j);e.lineTo((a+g.x*this.scale*b),(j+g.y*this.scale*b));e.fillStyle=f.MakeStyleString(0.5);e.fill();e.strokeStyle=f.MakeStyleString(1);e.stroke()};box2d.b2DebugDraw.prototype.DrawSegment=function(e,d,b){var a=this.m_ctx;a.beginPath();a.moveTo(e.x*this.scale,e.y*this.scale);a.lineTo(d.x*this.scale,d.y*this.scale);a.strokeStyle=b.MakeStyleString(1);a.stroke()};box2d.b2DebugDraw.prototype.DrawTransform=function(b){var a=this.m_ctx;this.PushTransform(b);a.beginPath();a.moveTo(0,0);a.lineTo(1,0);a.strokeStyle=box2d.b2Color.RED.MakeStyleString(1);a.stroke();a.beginPath();a.moveTo(0,0);a.lineTo(0,1);a.strokeStyle=box2d.b2Color.GREEN.MakeStyleString(1);a.stroke();this.PopTransform(b)};box2d.b2DebugDraw.prototype.DrawPoint=function(f,e,d){var b=this.m_ctx;b.fillStyle=d.MakeStyleString();e/=this.m_settings.viewZoom;e/=this.m_settings.canvasScale;var a=e/2;b.fillRect(f.x*this.scale-a,f.y*this.scale-a,e,e)};box2d.b2DebugDraw.prototype.DrawString=function(a,k,g,j){var b=this.m_ctx;var f=Array.prototype.slice.call(arguments);var e=goog.string.format.apply(null,f.slice(2));b.save();b.setTransform(1,0,0,1,0,0);b.font="18pt helvetica";var d=box2d.b2DebugDraw.prototype.DrawString.s_color;b.fillStyle=d.MakeStyleString();b.fillText(e,a*this.scale,k*this.scale);b.restore()};box2d.b2DebugDraw.prototype.DrawString.s_color=new box2d.b2Color(0.9,0.6,0.6);box2d.b2DebugDraw.prototype.DrawStringWorld=function(k,j,n,m){var a=box2d.b2DebugDraw.prototype.DrawStringWorld.s_p.SetXY(k,j);var q=this.m_settings.viewCenter;box2d.b2SubVV(a,q,a);var u=this.m_settings.viewRotation;box2d.b2MulTRV(u,a,a);var s=this.m_settings.viewZoom;box2d.b2MulSV(s,a,a);var f=this.m_settings.canvasScale;box2d.b2MulSV(f,a,a);a.y*=-1;var b=box2d.b2DebugDraw.prototype.DrawStringWorld.s_cc.SetXY(0.5*this.m_canvas.width,0.5*this.m_canvas.height);box2d.b2AddVV(a,b,a);var r=this.m_ctx;var g=Array.prototype.slice.call(arguments);var e=goog.string.format.apply(null,g.slice(2));r.save();r.setTransform(1,0,0,1,0,0);r.font="18pt helvetica";var d=box2d.b2DebugDraw.prototype.DrawStringWorld.s_color;r.fillStyle=d.MakeStyleString();r.fillText(e,a.x*this.scale,a.y*this.scale);r.restore()};box2d.b2DebugDraw.prototype.DrawStringWorld.s_p=new box2d.b2Vec2();box2d.b2DebugDraw.prototype.DrawStringWorld.s_cc=new box2d.b2Vec2();box2d.b2DebugDraw.prototype.DrawStringWorld.s_color=new box2d.b2Color(0.5,0.9,0.5);box2d.b2DebugDraw.prototype.DrawAABB=function(e,f){var d=this.m_ctx;d.strokeStyle=f.MakeStyleString();var a=e.lowerBound.x;var j=e.lowerBound.y;var b=e.upperBound.x-e.lowerBound.x;var g=e.upperBound.y-e.lowerBound.y;d.strokeRect(a*this.scale,j*this.scale,b*this.scale,g*this.scale)};box2d.b2DebugDraw.prototype.SetFlags=function(a){this.m_settings=a};box2d.b2DebugDraw.prototype.GetFlags=function(){return this.m_settings};var b2AABB=box2d.b2AABB,b2Body=box2d.b2Body,b2BodyDef=box2d.b2BodyDef,b2ChainShape=box2d.b2ChainShape,b2CircleShape=box2d.b2CircleShape,b2ContactListener=box2d.b2ContactListener,b2DebugDraw=box2d.b2DebugDraw,b2EdgeChainDef=box2d.b2EdgeChainDef,b2EdgeShape=box2d.b2EdgeShape,b2Fixture=box2d.b2Fixture,b2FixtureDef=box2d.b2FixtureDef,b2Joint=box2d.b2Joint,b2MassData=box2d.b2MassData,b2Mat22=box2d.b2Mat22,b2MouseJointDef=box2d.b2MouseJointDef,b2PolygonShape=box2d.b2PolygonShape,b2PrismaticJointDef=box2d.b2PrismaticJointDef,b2RevoluteJointDef=box2d.b2RevoluteJointDef,b2Settings=box2d.b2Settings,b2Shape=box2d.b2Shape,b2World=box2d.b2World,b2WorldManifold=box2d.b2WorldManifold,b2Vec2=box2d.b2Vec2;CG.Entity.extend("B2DEntity",{init:function(b,e,d,a,g,f){this._super();this.instanceOf="B2DEntity";this.setImage(e);this.body={};this.alpha=1;this.x=a;this.y=g;this.scale=f;this.id={name:b,uid:0};this.world=d;this.xhandle=(this.width/2);this.yhandle=(this.height/2);if(!this.bodyDef){this.bodyDef=new b2BodyDef;this.bodyDef.allowSleep=true;this.bodyDef.awake=true}if(!this.fixDef){this.fixDef=new b2FixtureDef;this.fixDef.density=1;this.fixDef.friction=0.5;this.fixDef.restitution=0.5}this.isHit=false;this.strength=100;this.dead=false;return this},hit:function(b,a){this.isHit=true;if(this.strength){this.strength-=b;if(this.strength<=0){this.dead=true}}},update:function(){},draw:function(){Game.renderer.draw(this)}});CG.B2DEntity.extend("B2DCircle",{init:function(f,d,g,b,a,k,j,e){this._super(d,g,f,a,k,j);this.instanceOf="B2DCircle";this.radius=b;this.bodyDef.type=e||box2d.b2BodyType.b2_staticBody;this.bodyDef.position.x=this.x/this.scale;this.bodyDef.position.y=this.y/this.scale;this.bodyDef.userData=this.id;this.fixDef.shape=new b2CircleShape(this.radius/this.scale);this.body=this.world.CreateBody(this.bodyDef);this.body.CreateFixture(this.fixDef);return this}});CG.B2DEntity.extend("B2DLine",{init:function(d,b,f,a,e){this._super(b,false,d,0,0,e);this.instanceOf="B2DLine";this.start=f;this.end=a;this.xhandle=0;this.yhandle=0;this.fixDef.shape=new b2EdgeShape();this.fixDef.shape.Set(this.start,this.end);this.bodyDef.type=box2d.b2BodyType.b2_staticBody;this.bodyDef.position.SetXY(0/this.scale,0/this.scale);this.bodyDef.userData=this.id;this.body=this.world.CreateBody(this.bodyDef);this.body.CreateFixture(this.fixDef);return this},update:function(){},draw:function(){}});CG.B2DEntity.extend("B2DRectangle",{init:function(e,b,f,a,j,g,d){this._super(b,f,e,a,j,g);this.instanceOf="B2DRectangle";this.bodyDef.type=d||box2d.b2BodyType.b2_staticBody;this.fixDef.shape=new b2PolygonShape;this.fixDef.shape.SetAsBox(this.width/g*0.5,this.height/g*0.5);this.bodyDef.position.x=this.x/this.scale;this.bodyDef.position.y=this.y/this.scale;this.bodyDef.userData=this.id;this.body=this.world.CreateBody(this.bodyDef);this.body.CreateFixture(this.fixDef);return this}});CG.B2DEntity.extend("B2DPolygon",{init:function(m,d,g,b,q,n,f,j,a){this._super(d,g,m,q,n,f);this.instanceOf="B2DPolygon";this.polys=new Array();this.jsondata=b.data[d];this.xhandle=0;this.yhandle=0;this.vecs=new Array();this.vecs=this.getPolysFromJson(b);this.bodyDef.type=j||box2d.b2BodyType.b2_staticBody;this.bodyDef.position.SetXY(this.x/this.scale,this.y/this.scale);this.bodyDef.userData=this.id;this.bullet=a||false;this.bodyDef.bullet=this.bullet;this.body=this.world.CreateBody(this.bodyDef);for(var k=0,e=this.vecs.length;k<e;k++){this.bodyShapePoly=new b2PolygonShape;this.bodyShapePoly.bounce=this.jsondata[k].restitution;this.bodyShapePoly.SetAsArray(this.vecs[k],this.vecs[k].length);this.fixDef.density=this.jsondata[k].density;this.fixDef.friction=this.jsondata[k].friction;this.fixDef.shape=this.bodyShapePoly;this.body.CreateFixture(this.fixDef)}return this},getPolysFromJson:function(){var g=[];for(var e=0,b=this.jsondata.length;e<b;e++){poly=this.jsondata[e].shape;var d=[];for(var f=0,a=poly.length;f<a;f=f+2){vec=new b2Vec2(poly[f]/this.scale,poly[f+1]/this.scale);d.push(vec)}g.push(d)}return g}});CG.B2DEntity.extend("B2DTerrain",{init:function(g,b,e,j,m,k,d,f,a){this._super(b,e,g,m,k,d);this.instanceOf="B2DTerrain";this.polys=new Array();this.terrainPoly=j;this.terrainTriangles=[];this.holes=[];this.xhandle=0;this.yhandle=0;this.bodyDef.type=f||box2d.b2BodyType.b2_staticBody;this.bodyDef.position.SetXY(this.x/this.scale,this.y/this.scale);this.bodyDef.userData=this.id;this.bullet=a||false;this.bodyDef.bullet=this.bullet;this.createTerrain();return this},createTerrain:function(){this.body=this.world.CreateBody(this.bodyDef);try{for(var d=0,a=this.terrainPoly.length;d<a;d++){var j=this.terrainPoly[d].outer;if(typeof j==="undefined"){continue}var g=new poly2tri.SweepContext(j,{cloneArrays:true});if(this.terrainPoly[d].holes.length>0){for(var f=0,b=this.terrainPoly[d].holes.length;f<b;f++){g.addHole(this.terrainPoly[d].holes[f])}}g.triangulate();this.terrainTriangles=this.terrainTriangles.concat(g.getTriangles()||[])}for(var f=0,b=this.terrainTriangles.length;f<b;f++){this.bodyShapePoly=new b2PolygonShape;this.bodyShapePoly.bounce=0.5;this.bodyShapePoly.SetAsArray(this.getPolysFromTriangulation(this.terrainTriangles[f].points_),this.terrainTriangles[f].points_.length);this.fixDef.density=0.5;this.fixDef.friction=0.5;this.fixDef.shape=this.bodyShapePoly;this.body.CreateFixture(this.fixDef)}}catch(k){console.log("error: createTerrain()",k)}},deleteTerrain:function(){this.terrainTriangles=[];this.world.DestroyBody(this.body)},clipTerrain:function(d){var f=this.createCircle(d);for(var e=0,m=this.terrainPoly.length;e<m;e++){this.terrainPoly[e].holes.push(f)}var s=[];var b=[];var r=[];for(var e=0,m=this.terrainPoly.length;e<m;e++){b=[this.terrainPoly[e].outer];r=[];if(this.terrainPoly[e].holes.length>0){for(var j=0,g=this.terrainPoly[e].holes.length;j<g;j++){r.push(this.terrainPoly[e].holes[j])}}var n=new ClipperLib.Clipper();n.AddPolygons(b,ClipperLib.PolyType.ptSubject);n.AddPolygons(r,ClipperLib.PolyType.ptClip);var q=new ClipperLib.ExPolygons();n.Execute(ClipperLib.ClipType.ctDifference,q,ClipperLib.PolyFillType.pftNonZero,ClipperLib.PolyFillType.pftNonZero);if(q.length>0){for(var a=0,k=q.length;a<k;a++){s.push(q[a])}}}this.terrainPoly=s;this.lightenTerrain();this.deleteTerrain();this.createTerrain()},lightenTerrain:function(){var e=0.02;for(var f=0,a=this.terrainPoly.length;f<a;f++){var d=ClipperLib.Lighten(this.terrainPoly[f].outer,e*this.scale);this.terrainPoly[f].outer=d[0];if(this.terrainPoly[f].holes.length>0){for(var g=0,b=this.terrainPoly[f].holes.length;g<b;g++){var d=ClipperLib.Lighten(this.terrainPoly[f].holes[g],e*this.scale);this.terrainPoly[f].holes[g]=d[0]}}}},cleanTerrain:function(){var e=0.1;for(var f=0,a=this.terrainPoly.length;f<a;f++){var d=ClipperLib.Clean(this.terrainPoly[f].outer,e*this.scale);this.terrainPoly[f].outer=d[0];if(this.terrainPoly[f].holes.length>0){for(var g=0,b=this.terrainPoly[f].holes.length;g<b;g++){var d=ClipperLib.Clean(this.terrainPoly[f].holes[g],e*this.scale);this.terrainPoly[f].holes[g]=d[0]}}}},getPolysFromTriangulation:function(f){var d=[];for(var b=0,a=f.length;b<a;b++){var e=f[b];d.push(new b2Vec2(e.x/this.scale,e.y/this.scale))}return d},createCircle:function(d){var e=2*Math.PI/d.points;var b=[];for(var a=0;a<d.points;a++){b.push({x:d.x+d.radius*Math.cos(e*a),y:d.y+d.radius*Math.sin(e*a)})}return b.reverse()}});CG.B2DEntity.extend("B2DChainShape",{init:function(f,d,b,a,j,g,e){this._super(d,false,f,a,j,g);this.instanceOf="B2DChainShape";this.vertices=this.convertRealWorldPointToBox2DVec2(b);this.xhandle=0;this.yhandle=0;this.bodyDef.type=e||box2d.b2BodyType.b2_staticBody;this.bodyDef.position.SetXY(this.x/this.scale,this.y/this.scale);this.bodyDef.userData=this.id;this.fixDef.shape=new b2ChainShape();this.fixDef.shape.CreateChain(this.vertices,this.vertices.length);this.body=this.world.CreateBody(this.bodyDef);this.body.CreateFixture(this.fixDef);return this},convertRealWorldPointToBox2DVec2:function(b){var f=[];for(var e=0,a=b.length;e<a;e++){var d=new b2Vec2(b[e].x/this.scale,b[e].y/this.scale);f.push(d)}return f},update:function(){},draw:function(){}});CG.B2DEntity.extend("B2DRope",{init:function(k,a,f,n,m,b,j,q,e){this._super(a,f,k,n,m,e);this.instanceOf="B2DRope";this.length=b;this.segments=j;this.segmentHeight=((this.length-this.y)/this.segments)/2;this.segmentWidth=q;this.anchor=new b2Vec2();this.prevBody={};this.bodyGroup=[];this.bodyCount=0;this.body={};this.fixtureDef=new b2FixtureDef();this.bodyShapeCircle=new b2CircleShape();this.bodyDef=new b2BodyDef();this.bodyDef.userData=this.id;this.bodyShapeCircle.m_radius=this.segmentWidth/this.scale;this.fixtureDef.density=1;this.fixtureDef.restitution=0.2;this.fixtureDef.friction=0.2;this.fixtureDef.shape=this.bodyShapeCircle;this.bodyDef.position.SetXY(this.x/this.scale,this.y/this.scale);this.body=this.bodyGroup[0]=this.world.CreateBody(this.bodyDef);this.bodyGroup[0].CreateFixture(this.fixtureDef);this.prevBody=this.bodyGroup[0];this.fixtureDef=new b2FixtureDef();this.bodyShapePoly=new b2PolygonShape();this.bodyDef=new b2BodyDef();this.bodyDef.userData=this.id;this.bodyShapePoly.SetAsBox(this.segmentWidth/this.scale,this.segmentHeight/this.scale);this.bodyDef.type=box2d.b2BodyType.b2_dynamicBody;this.fixtureDef.shape=this.bodyShapePoly;this.fixtureDef.density=20;this.fixtureDef.restitution=0.2;this.fixtureDef.friction=0.2;this.jointDef=new b2RevoluteJointDef();this.jointDef.lowerAngle=-25/CG.Const_180_PI;this.jointDef.upperAngle=25/CG.Const_180_PI;this.jointDef.enableLimit=true;for(var g=0,d=this.segments;g<d;g++){this.bodyDef.position.SetXY(this.x/this.scale,((this.y+this.segmentHeight)+(this.segmentHeight*2)*g)/this.scale);this.bodyGroup[g+1]=this.world.CreateBody(this.bodyDef);this.bodyGroup[g+1].CreateFixture(this.fixtureDef);this.anchor.SetXY(this.x/this.scale,(this.y+(this.segmentHeight*2)*g)/this.scale);this.jointDef.Initialize(this.prevBody,this.bodyGroup[g+1],this.anchor);this.world.CreateJoint(this.jointDef);this.prevBody=this.bodyGroup[g+1];this.bodyCount=g+1}return this},draw:function(){for(var a=1;a<=this.bodyCount;a++){this.body=this.bodyGroup[a];Game.renderer.draw(this)}}});CG.B2DEntity.extend("B2DBridge",{init:function(m,a,g,q,n,d,k,b,f){this._super(a,g,m,q,n,f);this.instanceOf="B2DBridge";this.length=d;this.segments=k;this.segmentHeight=b;this.segmentWidth=((this.length-this.x)/this.segments)/2;this.anchor=new b2Vec2();this.prevBody={};this.bodyGroup=[];this.bodyCount=0;this.body={};this.fixtureDef=new b2FixtureDef();this.bodyShapeCircle=new b2CircleShape();this.bodyDef=new b2BodyDef();this.bodyDef.userData=this.id;this.bodyShapeCircle.m_radius=this.segmentHeight/this.scale;this.fixtureDef.density=20;this.fixtureDef.restitution=0.2;this.fixtureDef.friction=0.2;this.fixtureDef.shape=this.bodyShapeCircle;this.bodyDef.position.SetXY(this.x/this.scale,this.y/this.scale);this.body=this.bodyGroup[0]=this.world.CreateBody(this.bodyDef);this.bodyGroup[0].CreateFixture(this.fixtureDef);this.prevBody=this.bodyGroup[0];this.bodyDef.position.SetXY(this.length/this.scale,this.y/this.scale);this.bodyDef.userData=this.id;this.bodyGroup[1]=this.world.CreateBody(this.bodyDef);this.bodyGroup[1].CreateFixture(this.fixtureDef);this.fixtureDef=new b2FixtureDef();this.bodyShapePoly=new b2PolygonShape();this.bodyDef=new b2BodyDef();this.bodyDef.userData=this.id;this.bodyShapePoly.SetAsBox(this.segmentWidth/this.scale,this.segmentHeight/this.scale);this.bodyDef.type=box2d.b2BodyType.b2_dynamicBody;this.fixtureDef.shape=this.bodyShapePoly;this.fixtureDef.density=20;this.fixtureDef.restitution=0.2;this.fixtureDef.friction=0.2;this.jointDef=new b2RevoluteJointDef();this.jointDef.lowerAngle=-25/CG.Const_180_PI;this.jointDef.upperAngle=25/CG.Const_180_PI;this.jointDef.enableLimit=true;for(var j=0,e=this.segments;j<e;j++){this.bodyDef.position.SetXY(((this.x+this.segmentWidth)+(this.segmentWidth*2)*j)/this.scale,this.y/this.scale);this.bodyGroup[j+2]=this.world.CreateBody(this.bodyDef);this.bodyGroup[j+2].CreateFixture(this.fixtureDef);this.anchor.SetXY((this.x+(this.segmentWidth*2)*j)/this.scale,this.y/this.scale);this.jointDef.Initialize(this.prevBody,this.bodyGroup[j+2],this.anchor);this.world.CreateJoint(this.jointDef);this.prevBody=this.bodyGroup[j+2];this.bodyCount=j+2}this.anchor.SetXY((this.x+(this.segmentWidth*2)*this.segments-1)/this.scale,this.y/this.scale);this.jointDef.Initialize(this.prevBody,this.bodyGroup[1],this.anchor);this.world.CreateJoint(this.jointDef);return this},draw:function(){for(var a=2;a<=this.bodyCount;a++){this.body=this.bodyGroup[a];Game.renderer.draw(this)}}});CG.Layer.extend("B2DWorld",{init:function(a,b){this.framerate=1/30;this.opt=b||{};this.name=a||"";this.debug=false;this.x=0;this.y=0;this.elements=[];this.world=new b2World(new b2Vec2(0,10),this.opt.sleep||true);this.uid=0;this.scale=40;this.world.m_groundBody=this.world.CreateBody(new b2BodyDef());var d=new b2DebugDraw({scale:this.scale,canvas:Game.b_canvas,ctx:Game.b_ctx,flags:box2d.b2DrawFlags.e_shapeBit|box2d.b2DrawFlags.e_jointBit});this.world.SetDebugDraw(d)},update:function(){this.world.Step(this.framerate,10,10);if(CG.mousedown){this.mouseDownAt(mousex,mousey)}else{if(this.isMouseDown()){this.mouseUp()}}for(var b=0,a=this.elements.length;b<a;b++){this.elements[b].update()}},draw:function(){Game.b_ctx.save();Game.b_ctx.translate(this.x,this.y);for(var b=0,a=this.elements.length;b<a;b++){this.elements[b].draw()}if(this.debug){this.world.DrawDebugData();this.world.ClearForces()}Game.b_ctx.restore()},addCustom:function(a){this.uid=this.uid+1;a.id.uid=this.uid;this.elements.push(a)},checkIfBodyExists:function(a){if(a){for(var d=0,b=this.elements.length;d<b;d++){if(this.elements[d].body.m_userData.uid==a.m_userData.uid){return true}}}return false},createBox:function(g,e,a,f,d){this.uid=this.uid+1;var b=new CG.B2DRectangle(this.world,g,e,a,f,this.scale,d);b.id.uid=this.uid;this.elements.push(b);return b},createLine:function(e,d,a){this.uid=this.uid+1;var b=new CG.B2DLine(this.world,e,new b2Vec2(d.x/this.scale,d.y/this.scale),new b2Vec2(a.x/this.scale,a.y/this.scale),this.scale);b.id.uid=this.uid;this.elements.push(b);return b},createCircle:function(j,f,b,a,g,e){this.uid=this.uid+1;var d=new CG.B2DCircle(this.world,j,f,b,a,g,this.scale,e);d.id.uid=this.uid;this.elements.push(d);return d},createPolyBody:function(k,g,f,a,j,e,b){this.uid=this.uid+1;var d=new CG.B2DPolygon(this.world,k,g,f,a,j,this.scale,e,b);d.id.uid=this.uid;this.elements.push(d);return d},createTerrain:function(k,g,f,a,j,e,b){this.uid=this.uid+1;var d=new CG.B2DTerrain(this.world,k,g,f,a,j,this.scale,e,b);d.id.uid=this.uid;this.elements.push(d);return d},createChainShape:function(g,d,a,f,e){this.uid=this.uid+1;var b=new CG.B2DChainShape(this.world,g,d,a,f,this.scale,e);b.id.uid=this.uid;this.elements.push(b);return b},createBridge:function(k,g,b,j,f,e,a){this.uid=this.uid+1;var d=new CG.B2DBridge(this.world,k,g,b,j,f,e,a,this.scale);d.id.uid=this.uid;this.elements.push(d);return d},createRope:function(k,g,b,j,f,e,a){this.uid=this.uid+1;var d=new CG.B2DRope(this.world,k,g,b,j,f,e,a,this.scale);d.id.uid=this.uid;this.elements.push(d);return d},mouseDownAt:function(b,e){if(!this.mouseJoint){var a=this.getBodyAt(b,e);if(a){var d=new b2MouseJointDef();d.bodyA=this.world.m_groundBody;d.bodyB=a;d.target.SetXY((b-this.x)/this.scale,(e-this.y)/this.scale);d.collideConnected=true;d.maxForce=300*a.GetMass();this.mouseJoint=this.world.CreateJoint(d);a.SetAwake(true)}}else{this.mouseJoint.SetTarget(new b2Vec2((b-this.x)/this.scale,(e-this.y)/this.scale))}},mouseUp:function(){this.world.DestroyJoint(this.mouseJoint);this.mouseJoint=null},getBodyAt:function(a,j){var g=(a-this.x)/this.scale;var f=(j-this.y)/this.scale;var e=new b2Vec2(g,f);var d=new b2AABB();d.lowerBound.SetXY(g-0.001,f-0.001);d.upperBound.SetXY(g+0.001,f+0.001);var b=null;this.world.QueryAABB(function(k){if(k.GetBody().GetType()!=b2Body.b2_staticBody){if(k.GetShape().TestPoint(k.GetBody().GetTransform(),e)){b=k.GetBody();return false}}return true},d);return b},deleteBodyAt:function(a,e){body=this.getBodyAt(a,e);if(body){for(var d=0,b=this.elements.length;d<b;d++){if(this.elements[d].body.m_userData.uid==body.m_userData.uid){this.removeElementByIndex(d);this.world.DestroyBody(body);return true}}}return false},isMouseDown:function(){return(this.mouseJoint!=null)},removeElementByIndex:function(a){this.elements.splice(a,1)},removeElementByUid:function(d){for(var b=0,a=this.elements.length;b<a;b++){if(typeof this.elements[b]==="object"&&typeof this.elements[b].id!=="undefined"){if(this.elements[b].id.uid===d){this.elements.splice(b,1)}}}},applyImpulse:function(a,d,b){if(a){a.ApplyLinearImpulse(new b2Vec2(Math.cos(d*CG.Const_PI_180)*b,Math.sin(d*CG.Const_PI_180)*b),a.GetWorldCenter())}},addContactListener:function(a){var b=new box2d.b2ContactListener;if(a.BeginContact){b.BeginContact=function(d){a.BeginContact(d.GetFixtureA().GetBody(),d.GetFixtureB().GetBody())}}if(a.EndContact){b.EndContact=function(d){a.EndContact(d.GetFixtureA().GetBody(),d.GetFixtureB().GetBody())}}if(a.PostSolve){b.PostSolve=function(d,e){a.PostSolve(d.GetFixtureA().GetBody(),d.GetFixtureB().GetBody(),e.normalImpulses[0])}}if(a.PreSolve){b.PreSolve=function(d,e){a.PreSolve(d,e)}}this.world.SetContactListener(b)},getBodySpec:function(a){return{x:a.GetPosition().x,y:a.GetPosition().y,a:a.GetAngle(),c:{x:a.GetWorldCenter().x,y:a.GetWorldCenter().y}}}});