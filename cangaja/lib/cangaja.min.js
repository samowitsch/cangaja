(function(F){var G,M={},L={16:false,18:false,17:false,91:false},C="all",g={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},j={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},b=function(k){return j[k]||k.toUpperCase().charCodeAt(0)},I=[];for(G=1;G<20;G++){j["f"+G]=111+G}function n(Q,P){var k=Q.length;while(k--){if(Q[k]===P){return k}}return -1}function J(P,k){if(P.length!=k.length){return false}for(var Q=0;Q<P.length;Q++){if(P[Q]!==k[Q]){return false}}return true}var B={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function q(k){for(G in L){L[G]=k[B[G]]}}function N(U){var R,T,P,Q,V,S;R=U.keyCode;if(n(I,R)==-1){I.push(R)}if(R==93||R==224){R=91}if(R in L){L[R]=true;for(P in g){if(g[P]==R){m[P]=true}}return}q(U);if(!m.filter.call(this,U)){return}if(!(R in M)){return}S=y();for(Q=0;Q<M[R].length;Q++){T=M[R][Q];if(T.scope==S||T.scope=="all"){V=T.mods.length>0;for(P in L){if((!L[P]&&n(T.mods,+P)>-1)||(L[P]&&n(T.mods,+P)==-1)){V=false}}if((T.mods.length==0&&!L[16]&&!L[18]&&!L[17]&&!L[91])||V){if(T.method(U,T)===false){if(U.preventDefault){U.preventDefault()}else{U.returnValue=false}if(U.stopPropagation){U.stopPropagation()}if(U.cancelBubble){U.cancelBubble=true}}}}}}function f(S){var R=S.keyCode,P,Q=n(I,R);if(Q>=0){I.splice(Q,1)}if(R==93||R==224){R=91}if(R in L){L[R]=false;for(P in g){if(g[P]==R){m[P]=false}}}}function r(){for(G in L){L[G]=false}for(G in g){m[G]=false}}function m(P,Q,T){var S,R;S=d(P);if(T===undefined){T=Q;Q="all"}for(var k=0;k<S.length;k++){R=[];P=S[k].split("+");if(P.length>1){R=H(P);P=[P[P.length-1]]}P=P[0];P=b(P);if(!(P in M)){M[P]=[]}M[P].push({shortcut:S[k],scope:Q,method:T,key:S[k],mods:R})}}function K(R,S){var k,U,T=[],Q,P,V;k=d(R);for(P=0;P<k.length;P++){U=k[P].split("+");if(U.length>1){T=H(U);R=U[U.length-1]}R=b(R);if(S===undefined){S=y()}if(!M[R]){return}for(Q in M[R]){V=M[R][Q];if(V.scope===S&&J(V.mods,T)){M[R][Q]={}}}}}function e(k){if(typeof(k)=="string"){k=b(k)}return n(I,k)!=-1}function A(){return I.slice(0)}function u(P){var k=(P.target||P.srcElement).tagName;return !(k=="INPUT"||k=="SELECT"||k=="TEXTAREA")}for(G in g){m[G]=false}function v(k){C=k||"all"}function y(){return C||"all"}function D(R){var Q,k,P;for(Q in M){k=M[Q];for(P=0;P<k.length;){if(k[P].scope===R){k.splice(P,1)}else{P++}}}}function d(k){var P;k=k.replace(/\s/g,"");P=k.split(",");if((P[P.length-1])==""){P[P.length-2]+=","}return P}function H(P){var Q=P.slice(0,P.length-1);for(var k=0;k<Q.length;k++){Q[k]=g[Q[k]]}return Q}function E(k,P,Q){if(k.addEventListener){k.addEventListener(P,Q,false)}else{if(k.attachEvent){k.attachEvent("on"+P,function(){Q(window.event)})}}}E(document,"keydown",function(k){N(k)});E(document,"keyup",f);E(window,"focus",r);var z=F.key;function O(){var P=F.key;F.key=z;return P}F.key=m;F.key.setScope=v;F.key.getScope=y;F.key.deleteScope=D;F.key.filter=u;F.key.isPressed=e;F.key.getPressedKeyCodes=A;F.key.noConflict=O;F.key.unbind=K;if(typeof module!=="undefined"){module.exports=key}})(this);(function(){var J=navigator.userAgent.toString().toLowerCase();var bc={};if(J.indexOf("chrome")!=-1&&J.indexOf("chromium")==-1){bc.chrome=1}else{bc.chrome=0}if(J.indexOf("chromium")!=-1){bc.chromium=1}else{bc.chromium=0}if(J.indexOf("safari")!=-1&&J.indexOf("chrome")==-1&&J.indexOf("chromium")==-1){bc.safari=1}else{bc.safari=0}if(J.indexOf("firefox")!=-1){bc.firefox=1}else{bc.firefox=0}if(J.indexOf("firefox/17")!=-1){bc.firefox17=1}else{bc.firefox17=0}if(J.indexOf("firefox/15")!=-1){bc.firefox15=1}else{bc.firefox15=0}if(J.indexOf("firefox/3")!=-1){bc.firefox3=1}else{bc.firefox3=0}if(J.indexOf("opera")!=-1){bc.opera=1}else{bc.opera=0}if(J.indexOf("msie 10")!=-1){bc.msie10=1}else{bc.msie10=0}if(J.indexOf("msie 9")!=-1){bc.msie9=1}else{bc.msie9=0}if(J.indexOf("msie 8")!=-1){bc.msie8=1}else{bc.msie8=0}if(J.indexOf("msie 7")!=-1){bc.msie7=1}else{bc.msie7=0}if(J.indexOf("msie ")!=-1){bc.msie=1}else{bc.msie=0}var aE={};aE.biginteger_used=null;var bw;var bd=244837814094590;var aY=((bd&16777215)==15715070);function aZ(bB,bA,bC){aE.biginteger_used=1;if(bB!=null){if("number"==typeof bB){this.fromString(Math.floor(bB).toString(),10)}else{if(bA==null&&"string"!=typeof bB){this.fromString(bB,256)}else{if(bB.indexOf(".")!=-1){bB=bB.substring(0,bB.indexOf("."))}this.fromString(bB,bA)}}}}function v(){return new aZ(null)}function b(bE,bA,bB,bD,bG,bF){while(--bF>=0){var bC=bA*this[bE++]+bB[bD]+bG;bG=Math.floor(bC/67108864);bB[bD++]=bC&67108863}return bG}function by(bE,bJ,bK,bD,bH,bA){var bG=bJ&32767,bI=bJ>>15;while(--bA>=0){var bC=this[bE]&32767;var bF=this[bE++]>>15;var bB=bI*bC+bF*bG;bC=bG*bC+((bB&32767)<<15)+bK[bD]+(bH&1073741823);bH=(bC>>>30)+(bB>>>15)+bI*bF+(bH>>>30);bK[bD++]=bC&1073741823}return bH}function bx(bE,bJ,bK,bD,bH,bA){var bG=bJ&16383,bI=bJ>>14;while(--bA>=0){var bC=this[bE]&16383;var bF=this[bE++]>>14;var bB=bI*bC+bF*bG;bC=bG*bC+((bB&16383)<<14)+bK[bD]+bH;bH=(bC>>28)+(bB>>14)+bI*bF;bK[bD++]=bC&268435455}return bH}if(aY&&(navigator.appName=="Microsoft Internet Explorer")){aZ.prototype.am=by;bw=30}else{if(aY&&(navigator.appName!="Netscape")){aZ.prototype.am=b;bw=26}else{aZ.prototype.am=bx;bw=28}}aZ.prototype.DB=bw;aZ.prototype.DM=((1<<bw)-1);aZ.prototype.DV=(1<<bw);var a0=52;aZ.prototype.FV=Math.pow(2,a0);aZ.prototype.F1=a0-bw;aZ.prototype.F2=2*bw-a0;var a8="0123456789abcdefghijklmnopqrstuvwxyz";var bb=[];var bk,N;bk="0".charCodeAt(0);for(N=0;N<=9;++N){bb[bk++]=N}bk="a".charCodeAt(0);for(N=10;N<36;++N){bb[bk++]=N}bk="A".charCodeAt(0);for(N=10;N<36;++N){bb[bk++]=N}function bz(bA){return a8.charAt(bA)}function Y(bB,bA){var bC=bb[bB.charCodeAt(bA)];return(bC==null)?-1:bC}function aX(bB){for(var bA=this.t-1;bA>=0;--bA){bB[bA]=this[bA]}bB.t=this.t;bB.s=this.s}function G(bA){this.t=1;this.s=(bA<0)?-1:0;if(bA>0){this[0]=bA}else{if(bA<-1){this[0]=bA+this.DV}else{this.t=0}}}function f(bA){var bB=v();bB.fromInt(bA);return bB}function R(bG,bB){var bD;if(bB==16){bD=4}else{if(bB==8){bD=3}else{if(bB==256){bD=8}else{if(bB==2){bD=1}else{if(bB==32){bD=5}else{if(bB==4){bD=2}else{this.fromRadix(bG,bB);return}}}}}}this.t=0;this.s=0;var bF=bG.length,bC=false,bE=0;while(--bF>=0){var bA=(bD==8)?bG[bF]&255:Y(bG,bF);if(bA<0){if(bG.charAt(bF)=="-"){bC=true}continue}bC=false;if(bE==0){this[this.t++]=bA}else{if(bE+bD>this.DB){this[this.t-1]|=(bA&((1<<(this.DB-bE))-1))<<bE;this[this.t++]=(bA>>(this.DB-bE))}else{this[this.t-1]|=bA<<bE}}bE+=bD;if(bE>=this.DB){bE-=this.DB}}if(bD==8&&(bG[0]&128)!=0){this.s=-1;if(bE>0){this[this.t-1]|=((1<<(this.DB-bE))-1)<<bE}}this.clamp();if(bC){aZ.ZERO.subTo(this,this)}}function aA(){var bA=this.s&this.DM;while(this.t>0&&this[this.t-1]==bA){--this.t}}function I(bB){if(this.s<0){return"-"+this.negate().toString(bB)}var bC;if(bB==16){bC=4}else{if(bB==8){bC=3}else{if(bB==2){bC=1}else{if(bB==32){bC=5}else{if(bB==4){bC=2}else{return this.toRadix(bB)}}}}}var bE=(1<<bC)-1,bH,bA=false,bF="",bD=this.t;var bG=this.DB-(bD*this.DB)%bC;if(bD-->0){if(bG<this.DB&&(bH=this[bD]>>bG)>0){bA=true;bF=bz(bH)}while(bD>=0){if(bG<bC){bH=(this[bD]&((1<<bG)-1))<<(bC-bG);bH|=this[--bD]>>(bG+=this.DB-bC)}else{bH=(this[bD]>>(bG-=bC))&bE;if(bG<=0){bG+=this.DB;--bD}}if(bH>0){bA=true}if(bA){bF+=bz(bH)}}}return bA?bF:"0"}function aF(){var bA=v();aZ.ZERO.subTo(this,bA);return bA}function bg(){return(this.s<0)?this.negate():this}function ai(bA){var bC=this.s-bA.s;if(bC!=0){return bC}var bB=this.t;bC=bB-bA.t;if(bC!=0){return(this.s<0)?-bC:bC}while(--bB>=0){if((bC=this[bB]-bA[bB])!=0){return bC}}return 0}function C(bA){var bC=1,bB;if((bB=bA>>>16)!=0){bA=bB;bC+=16}if((bB=bA>>8)!=0){bA=bB;bC+=8}if((bB=bA>>4)!=0){bA=bB;bC+=4}if((bB=bA>>2)!=0){bA=bB;bC+=2}if((bB=bA>>1)!=0){bA=bB;bC+=1}return bC}function M(){if(this.t<=0){return 0}return this.DB*(this.t-1)+C(this[this.t-1]^(this.s&this.DM))}function bl(bC,bB){var bA;for(bA=this.t-1;bA>=0;--bA){bB[bA+bC]=this[bA]}for(bA=bC-1;bA>=0;--bA){bB[bA]=0}bB.t=this.t+bC;bB.s=this.s}function aW(bC,bB){for(var bA=bC;bA<this.t;++bA){bB[bA-bC]=this[bA]}bB.t=Math.max(this.t-bC,0);bB.s=this.s}function L(bH,bD){var bB=bH%this.DB;var bA=this.DB-bB;var bF=(1<<bA)-1;var bE=Math.floor(bH/this.DB),bG=(this.s<<bB)&this.DM,bC;for(bC=this.t-1;bC>=0;--bC){bD[bC+bE+1]=(this[bC]>>bA)|bG;bG=(this[bC]&bF)<<bB}for(bC=bE-1;bC>=0;--bC){bD[bC]=0}bD[bE]=bG;bD.t=this.t+bE+1;bD.s=this.s;bD.clamp()}function D(bG,bD){bD.s=this.s;var bE=Math.floor(bG/this.DB);if(bE>=this.t){bD.t=0;return}var bB=bG%this.DB;var bA=this.DB-bB;var bF=(1<<bB)-1;bD[0]=this[bE]>>bB;for(var bC=bE+1;bC<this.t;++bC){bD[bC-bE-1]|=(this[bC]&bF)<<bA;bD[bC-bE]=this[bC]>>bB}if(bB>0){bD[this.t-bE-1]|=(this.s&bF)<<bA}bD.t=this.t-bE;bD.clamp()}function a1(bB,bD){var bC=0,bE=0,bA=Math.min(bB.t,this.t);while(bC<bA){bE+=this[bC]-bB[bC];bD[bC++]=bE&this.DM;bE>>=this.DB}if(bB.t<this.t){bE-=bB.s;while(bC<this.t){bE+=this[bC];bD[bC++]=bE&this.DM;bE>>=this.DB}bE+=this.s}else{bE+=this.s;while(bC<bB.t){bE-=bB[bC];bD[bC++]=bE&this.DM;bE>>=this.DB}bE-=bB.s}bD.s=(bE<0)?-1:0;if(bE<-1){bD[bC++]=this.DV+bE}else{if(bE>0){bD[bC++]=bE}}bD.t=bC;bD.clamp()}function ad(bB,bD){var bA=this.abs(),bE=bB.abs();var bC=bA.t;bD.t=bC+bE.t;while(--bC>=0){bD[bC]=0}for(bC=0;bC<bE.t;++bC){bD[bC+bA.t]=bA.am(0,bE[bC],bD,bC,0,bA.t)}bD.s=0;bD.clamp();if(this.s!=bB.s){aZ.ZERO.subTo(bD,bD)}}function aC(bC){var bA=this.abs();var bB=bC.t=2*bA.t;while(--bB>=0){bC[bB]=0}for(bB=0;bB<bA.t-1;++bB){var bD=bA.am(bB,bA[bB],bC,2*bB,0,1);if((bC[bB+bA.t]+=bA.am(bB+1,2*bA[bB],bC,2*bB+1,bD,bA.t-bB-1))>=bA.DV){bC[bB+bA.t]-=bA.DV;bC[bB+bA.t+1]=1}}if(bC.t>0){bC[bC.t-1]+=bA.am(bB,bA[bB],bC,2*bB,0,1)}bC.s=0;bC.clamp()}function ae(bJ,bG,bF){var bP=bJ.abs();if(bP.t<=0){return}var bH=this.abs();if(bH.t<bP.t){if(bG!=null){bG.fromInt(0)}if(bF!=null){this.copyTo(bF)}return}if(bF==null){bF=v()}var bD=v(),bA=this.s,bI=bJ.s;var bO=this.DB-C(bP[bP.t-1]);if(bO>0){bP.lShiftTo(bO,bD);bH.lShiftTo(bO,bF)}else{bP.copyTo(bD);bH.copyTo(bF)}var bL=bD.t;var bB=bD[bL-1];if(bB==0){return}var bK=bB*(1<<this.F1)+((bL>1)?bD[bL-2]>>this.F2:0);var bS=this.FV/bK,bR=(1<<this.F1)/bK,bQ=1<<this.F2;var bN=bF.t,bM=bN-bL,bE=(bG==null)?v():bG;bD.dlShiftTo(bM,bE);if(bF.compareTo(bE)>=0){bF[bF.t++]=1;bF.subTo(bE,bF)}aZ.ONE.dlShiftTo(bL,bE);bE.subTo(bD,bD);while(bD.t<bL){bD[bD.t++]=0}while(--bM>=0){var bC=(bF[--bN]==bB)?this.DM:Math.floor(bF[bN]*bS+(bF[bN-1]+bQ)*bR);if((bF[bN]+=bD.am(0,bC,bF,bM,0,bL))<bC){bD.dlShiftTo(bM,bE);bF.subTo(bE,bF);while(bF[bN]<--bC){bF.subTo(bE,bF)}}}if(bG!=null){bF.drShiftTo(bL,bG);if(bA!=bI){aZ.ZERO.subTo(bG,bG)}}bF.t=bL;bF.clamp();if(bO>0){bF.rShiftTo(bO,bF)}if(bA<0){aZ.ZERO.subTo(bF,bF)}}function az(bA){var bB=v();this.abs().divRemTo(bA,null,bB);if(this.s<0&&bB.compareTo(aZ.ZERO)>0){bA.subTo(bB,bB)}return bB}function an(bA){this.m=bA}function aS(bA){if(bA.s<0||bA.compareTo(this.m)>=0){return bA.mod(this.m)}else{return bA}}function bf(bA){return bA}function ak(bA){bA.divRemTo(this.m,null,bA)}function aj(bA,bC,bB){bA.multiplyTo(bC,bB);this.reduce(bB)}function bq(bA,bB){bA.squareTo(bB);this.reduce(bB)}an.prototype.convert=aS;an.prototype.revert=bf;an.prototype.reduce=ak;an.prototype.mulTo=aj;an.prototype.sqrTo=bq;function aa(){if(this.t<1){return 0}var bA=this[0];if((bA&1)==0){return 0}var bB=bA&3;bB=(bB*(2-(bA&15)*bB))&15;bB=(bB*(2-(bA&255)*bB))&255;bB=(bB*(2-(((bA&65535)*bB)&65535)))&65535;bB=(bB*(2-bA*bB%this.DV))%this.DV;return(bB>0)?this.DV-bB:-bB}function m(bA){this.m=bA;this.mp=bA.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<(bA.DB-15))-1;this.mt2=2*bA.t}function be(bA){var bB=v();bA.abs().dlShiftTo(this.m.t,bB);bB.divRemTo(this.m,null,bB);if(bA.s<0&&bB.compareTo(aZ.ZERO)>0){this.m.subTo(bB,bB)}return bB}function bo(bA){var bB=v();bA.copyTo(bB);this.reduce(bB);return bB}function aB(bA){while(bA.t<=this.mt2){bA[bA.t++]=0}for(var bC=0;bC<this.m.t;++bC){var bB=bA[bC]&32767;var bD=(bB*this.mpl+(((bB*this.mph+(bA[bC]>>15)*this.mpl)&this.um)<<15))&bA.DM;bB=bC+this.m.t;bA[bB]+=this.m.am(0,bD,bA,bC,0,this.m.t);while(bA[bB]>=bA.DV){bA[bB]-=bA.DV;bA[++bB]++}}bA.clamp();bA.drShiftTo(this.m.t,bA);if(bA.compareTo(this.m)>=0){bA.subTo(this.m,bA)}}function bh(bA,bB){bA.squareTo(bB);this.reduce(bB)}function X(bA,bC,bB){bA.multiplyTo(bC,bB);this.reduce(bB)}m.prototype.convert=be;m.prototype.revert=bo;m.prototype.reduce=aB;m.prototype.mulTo=X;m.prototype.sqrTo=bh;function y(){return((this.t>0)?(this[0]&1):this.s)==0}function S(bF,bG){if(bF>4294967295||bF<1){return aZ.ONE}var bE=v(),bA=v(),bD=bG.convert(this),bC=C(bF)-1;bD.copyTo(bE);while(--bC>=0){bG.sqrTo(bE,bA);if((bF&(1<<bC))>0){bG.mulTo(bA,bD,bE)}else{var bB=bE;bE=bA;bA=bB}}return bG.revert(bE)}function bj(bB,bA){var bC;if(bB<256||bA.isEven()){bC=new an(bA)}else{bC=new m(bA)}return this.exp(bB,bC)}aZ.prototype.copyTo=aX;aZ.prototype.fromInt=G;aZ.prototype.fromString=R;aZ.prototype.clamp=aA;aZ.prototype.dlShiftTo=bl;aZ.prototype.drShiftTo=aW;aZ.prototype.lShiftTo=L;aZ.prototype.rShiftTo=D;aZ.prototype.subTo=a1;aZ.prototype.multiplyTo=ad;aZ.prototype.squareTo=aC;aZ.prototype.divRemTo=ae;aZ.prototype.invDigit=aa;aZ.prototype.isEven=y;aZ.prototype.exp=S;aZ.prototype.toString=I;aZ.prototype.negate=aF;aZ.prototype.abs=bg;aZ.prototype.compareTo=ai;aZ.prototype.bitLength=M;aZ.prototype.mod=az;aZ.prototype.modPowInt=bj;aZ.ZERO=f(0);aZ.ONE=f(1);function r(){var bA=v();this.copyTo(bA);return bA}function ag(){if(this.s<0){if(this.t==1){return this[0]-this.DV}else{if(this.t==0){return -1}}}else{if(this.t==1){return this[0]}else{if(this.t==0){return 0}}}return((this[1]&((1<<(32-this.DB))-1))<<this.DB)|this[0]}function a9(){return(this.t==0)?this.s:(this[0]<<24)>>24}function aD(){return(this.t==0)?this.s:(this[0]<<16)>>16}function aV(bA){return Math.floor(Math.LN2*this.DB/Math.log(bA))}function bm(){if(this.s<0){return -1}else{if(this.t<=0||(this.t==1&&this[0]<=0)){return 0}else{return 1}}}function V(bA){if(bA==null){bA=10}if(this.signum()==0||bA<2||bA>36){return"0"}var bC=this.chunkSize(bA);var bB=Math.pow(bA,bC);var bF=f(bB),bG=v(),bE=v(),bD="";this.divRemTo(bF,bG,bE);while(bG.signum()>0){bD=(bB+bE.intValue()).toString(bA).substr(1)+bD;bG.divRemTo(bF,bG,bE)}return bE.intValue().toString(bA)+bD}function aL(bI,bF){this.fromInt(0);if(bF==null){bF=10}var bD=this.chunkSize(bF);var bE=Math.pow(bF,bD),bC=false,bA=0,bH=0;for(var bB=0;bB<bI.length;++bB){var bG=Y(bI,bB);if(bG<0){if(bI.charAt(bB)=="-"&&this.signum()==0){bC=true}continue}bH=bF*bH+bG;if(++bA>=bD){this.dMultiply(bE);this.dAddOffset(bH,0);bA=0;bH=0}}if(bA>0){this.dMultiply(Math.pow(bF,bA));this.dAddOffset(bH,0)}if(bC){aZ.ZERO.subTo(this,this)}}function a6(bC,bB,bE){if("number"==typeof bB){if(bC<2){this.fromInt(1)}else{this.fromNumber(bC,bE);if(!this.testBit(bC-1)){this.bitwiseTo(aZ.ONE.shiftLeft(bC-1),aq,this)}if(this.isEven()){this.dAddOffset(1,0)}while(!this.isProbablePrime(bB)){this.dAddOffset(2,0);if(this.bitLength()>bC){this.subTo(aZ.ONE.shiftLeft(bC-1),this)}}}}else{var bA=[],bD=bC&7;bA.length=(bC>>3)+1;bB.nextBytes(bA);if(bD>0){bA[0]&=((1<<bD)-1)}else{bA[0]=0}this.fromString(bA,256)}}function bt(){var bB=this.t,bC=[];bC[0]=this.s;var bD=this.DB-(bB*this.DB)%8,bE,bA=0;if(bB-->0){if(bD<this.DB&&(bE=this[bB]>>bD)!=(this.s&this.DM)>>bD){bC[bA++]=bE|(this.s<<(this.DB-bD))}while(bB>=0){if(bD<8){bE=(this[bB]&((1<<bD)-1))<<(8-bD);bE|=this[--bB]>>(bD+=this.DB-8)}else{bE=(this[bB]>>(bD-=8))&255;if(bD<=0){bD+=this.DB;--bB}}if((bE&128)!=0){bE|=-256}if(bA==0&&(this.s&128)!=(bE&128)){++bA}if(bA>0||bE!=this.s){bC[bA++]=bE}}}return bC}function aH(bA){return(this.compareTo(bA)==0)}function ah(bA){return(this.compareTo(bA)<0)?this:bA}function aQ(bA){return(this.compareTo(bA)>0)?this:bA}function a7(bB,bF,bD){var bC,bE,bA=Math.min(bB.t,this.t);for(bC=0;bC<bA;++bC){bD[bC]=bF(this[bC],bB[bC])}if(bB.t<this.t){bE=bB.s&this.DM;for(bC=bA;bC<this.t;++bC){bD[bC]=bF(this[bC],bE)}bD.t=this.t}else{bE=this.s&this.DM;for(bC=bA;bC<bB.t;++bC){bD[bC]=bF(bE,bB[bC])}bD.t=bB.t}bD.s=bF(this.s,bB.s);bD.clamp()}function W(bA,bB){return bA&bB}function bv(bA){var bB=v();this.bitwiseTo(bA,W,bB);return bB}function aq(bA,bB){return bA|bB}function aU(bA){var bB=v();this.bitwiseTo(bA,aq,bB);return bB}function ab(bA,bB){return bA^bB}function j(bA){var bB=v();this.bitwiseTo(bA,ab,bB);return bB}function P(bA,bB){return bA&~bB}function E(bA){var bB=v();this.bitwiseTo(bA,P,bB);return bB}function ac(){var bB=v();for(var bA=0;bA<this.t;++bA){bB[bA]=this.DM&~this[bA]}bB.t=this.t;bB.s=~this.s;return bB}function Q(bB){var bA=v();if(bB<0){this.rShiftTo(-bB,bA)}else{this.lShiftTo(bB,bA)}return bA}function bu(bB){var bA=v();if(bB<0){this.lShiftTo(-bB,bA)}else{this.rShiftTo(bB,bA)}return bA}function A(bA){if(bA==0){return -1}var bB=0;if((bA&65535)==0){bA>>=16;bB+=16}if((bA&255)==0){bA>>=8;bB+=8}if((bA&15)==0){bA>>=4;bB+=4}if((bA&3)==0){bA>>=2;bB+=2}if((bA&1)==0){++bB}return bB}function H(){for(var bA=0;bA<this.t;++bA){if(this[bA]!=0){return bA*this.DB+A(this[bA])}}if(this.s<0){return this.t*this.DB}return -1}function bi(bA){var bB=0;while(bA!=0){bA&=bA-1;++bB}return bB}function a5(){var bC=0,bA=this.s&this.DM;for(var bB=0;bB<this.t;++bB){bC+=bi(this[bB]^bA)}return bC}function a3(bB){var bA=Math.floor(bB/this.DB);if(bA>=this.t){return(this.s!=0)}return((this[bA]&(1<<(bB%this.DB)))!=0)}function af(bC,bB){var bA=aZ.ONE.shiftLeft(bC);this.bitwiseTo(bA,bB,bA);return bA}function Z(bA){return this.changeBit(bA,aq)}function F(bA){return this.changeBit(bA,P)}function e(bA){return this.changeBit(bA,ab)}function aM(bB,bD){var bC=0,bE=0,bA=Math.min(bB.t,this.t);while(bC<bA){bE+=this[bC]+bB[bC];bD[bC++]=bE&this.DM;bE>>=this.DB}if(bB.t<this.t){bE+=bB.s;while(bC<this.t){bE+=this[bC];bD[bC++]=bE&this.DM;bE>>=this.DB}bE+=this.s}else{bE+=this.s;while(bC<bB.t){bE+=bB[bC];bD[bC++]=bE&this.DM;bE>>=this.DB}bE+=bB.s}bD.s=(bE<0)?-1:0;if(bE>0){bD[bC++]=bE}else{if(bE<-1){bD[bC++]=this.DV+bE}}bD.t=bC;bD.clamp()}function aP(bA){var bB=v();this.addTo(bA,bB);return bB}function bn(bA){var bB=v();this.subTo(bA,bB);return bB}function aG(bA){var bB=v();this.multiplyTo(bA,bB);return bB}function a2(){var bA=v();this.squareTo(bA);return bA}function g(bA){var bB=v();this.divRemTo(bA,bB,null);return bB}function q(bA){var bB=v();this.divRemTo(bA,null,bB);return bB}function a4(bA){var bC=v(),bB=v();this.divRemTo(bA,bC,bB);return new Array(bC,bB)}function z(bA){this[this.t]=this.am(0,bA-1,this,0,0,this.t);++this.t;this.clamp()}function ax(bB,bA){if(bB==0){return}while(this.t<=bA){this[this.t++]=0}this[bA]+=bB;while(this[bA]>=this.DV){this[bA]-=this.DV;if(++bA>=this.t){this[this.t++]=0}++this[bA]}}function aO(){}function ba(bA){return bA}function B(bA,bC,bB){bA.multiplyTo(bC,bB)}function aT(bA,bB){bA.squareTo(bB)}aO.prototype.convert=ba;aO.prototype.revert=ba;aO.prototype.mulTo=B;aO.prototype.sqrTo=aT;function T(bA){return this.exp(bA,new aO())}function u(bA,bE,bD){var bC=Math.min(this.t+bA.t,bE);bD.s=0;bD.t=bC;while(bC>0){bD[--bC]=0}var bB;for(bB=bD.t-this.t;bC<bB;++bC){bD[bC+this.t]=this.am(0,bA[bC],bD,bC,0,this.t)}for(bB=Math.min(bA.t,bE);bC<bB;++bC){this.am(0,bA[bC],bD,bC,0,bE-bC)}bD.clamp()}function k(bA,bD,bC){--bD;var bB=bC.t=this.t+bA.t-bD;bC.s=0;while(--bB>=0){bC[bB]=0}for(bB=Math.max(bD-this.t,0);bB<bA.t;++bB){bC[this.t+bB-bD]=this.am(bD-bB,bA[bB],bC,0,0,this.t+bB-bD)}bC.clamp();bC.drShiftTo(1,bC)}function U(bA){this.r2=v();this.q3=v();aZ.ONE.dlShiftTo(2*bA.t,this.r2);this.mu=this.r2.divide(bA);this.m=bA}function am(bA){if(bA.s<0||bA.t>2*this.m.t){return bA.mod(this.m)}else{if(bA.compareTo(this.m)<0){return bA}else{var bB=v();bA.copyTo(bB);this.reduce(bB);return bB}}}function at(bA){return bA}function br(bA){bA.drShiftTo(this.m.t-1,this.r2);if(bA.t>this.m.t+1){bA.t=this.m.t+1;bA.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(bA.compareTo(this.r2)<0){bA.dAddOffset(1,this.m.t+1)}bA.subTo(this.r2,bA);while(bA.compareTo(this.m)>=0){bA.subTo(this.m,bA)}}function aI(bA,bB){bA.squareTo(bB);this.reduce(bB)}function bs(bA,bC,bB){bA.multiplyTo(bC,bB);this.reduce(bB)}U.prototype.convert=am;U.prototype.revert=at;U.prototype.reduce=br;U.prototype.mulTo=bs;U.prototype.sqrTo=aI;function aR(bJ,bE){var bH=bJ.bitLength(),bF,bB=f(1),bM;if(bH<=0){return bB}else{if(bH<18){bF=1}else{if(bH<48){bF=3}else{if(bH<144){bF=4}else{if(bH<768){bF=5}else{bF=6}}}}}if(bH<8){bM=new an(bE)}else{if(bE.isEven()){bM=new U(bE)}else{bM=new m(bE)}}var bI=[],bD=3,bK=bF-1,bA=(1<<bF)-1;bI[1]=bM.convert(this);if(bF>1){var bP=v();bM.sqrTo(bI[1],bP);while(bD<=bA){bI[bD]=v();bM.mulTo(bP,bI[bD-2],bI[bD]);bD+=2}}var bG=bJ.t-1,bN,bL=true,bC=v(),bO;bH=C(bJ[bG])-1;while(bG>=0){if(bH>=bK){bN=(bJ[bG]>>(bH-bK))&bA}else{bN=(bJ[bG]&((1<<(bH+1))-1))<<(bK-bH);if(bG>0){bN|=bJ[bG-1]>>(this.DB+bH-bK)}}bD=bF;while((bN&1)==0){bN>>=1;--bD}if((bH-=bD)<0){bH+=this.DB;--bG}if(bL){bI[bN].copyTo(bB);bL=false}else{while(bD>1){bM.sqrTo(bB,bC);bM.sqrTo(bC,bB);bD-=2}if(bD>0){bM.sqrTo(bB,bC)}else{bO=bB;bB=bC;bC=bO}bM.mulTo(bC,bI[bN],bB)}while(bG>=0&&(bJ[bG]&(1<<bH))==0){bM.sqrTo(bB,bC);bO=bB;bB=bC;bC=bO;if(--bH<0){bH=this.DB-1;--bG}}}return bM.revert(bB)}function bp(bB){var bA=(this.s<0)?this.negate():this.clone();var bF=(bB.s<0)?bB.negate():bB.clone();if(bA.compareTo(bF)<0){var bD=bA;bA=bF;bF=bD}var bC=bA.getLowestSetBit(),bE=bF.getLowestSetBit();if(bE<0){return bA}if(bC<bE){bE=bC}if(bE>0){bA.rShiftTo(bE,bA);bF.rShiftTo(bE,bF)}while(bA.signum()>0){if((bC=bA.getLowestSetBit())>0){bA.rShiftTo(bC,bA)}if((bC=bF.getLowestSetBit())>0){bF.rShiftTo(bC,bF)}if(bA.compareTo(bF)>=0){bA.subTo(bF,bA);bA.rShiftTo(1,bA)}else{bF.subTo(bA,bF);bF.rShiftTo(1,bF)}}if(bE>0){bF.lShiftTo(bE,bF)}return bF}function K(bD){if(bD<=0){return 0}var bC=this.DV%bD,bB=(this.s<0)?bD-1:0;if(this.t>0){if(bC==0){bB=this[0]%bD}else{for(var bA=this.t-1;bA>=0;--bA){bB=(bC*bB+this[bA])%bD}}}return bB}function d(bB){var bF=bB.isEven();if((this.isEven()&&bF)||bB.signum()==0){return aZ.ZERO}var bE=bB.clone(),bD=this.clone();var bC=f(1),bA=f(0),bH=f(0),bG=f(1);while(bE.signum()!=0){while(bE.isEven()){bE.rShiftTo(1,bE);if(bF){if(!bC.isEven()||!bA.isEven()){bC.addTo(this,bC);bA.subTo(bB,bA)}bC.rShiftTo(1,bC)}else{if(!bA.isEven()){bA.subTo(bB,bA)}}bA.rShiftTo(1,bA)}while(bD.isEven()){bD.rShiftTo(1,bD);if(bF){if(!bH.isEven()||!bG.isEven()){bH.addTo(this,bH);bG.subTo(bB,bG)}bH.rShiftTo(1,bH)}else{if(!bG.isEven()){bG.subTo(bB,bG)}}bG.rShiftTo(1,bG)}if(bE.compareTo(bD)>=0){bE.subTo(bD,bE);if(bF){bC.subTo(bH,bC)}bA.subTo(bG,bA)}else{bD.subTo(bE,bD);if(bF){bH.subTo(bC,bH)}bG.subTo(bA,bG)}}if(bD.compareTo(aZ.ONE)!=0){return aZ.ZERO}if(bG.compareTo(bB)>=0){return bG.subtract(bB)}if(bG.signum()<0){bG.addTo(bB,bG)}else{return bG}if(bG.signum()<0){return bG.add(bB)}else{return bG}}var aJ=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var aK=(1<<26)/aJ[aJ.length-1];function ap(bE){var bD,bB=this.abs();if(bB.t==1&&bB[0]<=aJ[aJ.length-1]){for(bD=0;bD<aJ.length;++bD){if(bB[0]==aJ[bD]){return true}}return false}if(bB.isEven()){return false}bD=1;while(bD<aJ.length){var bA=aJ[bD],bC=bD+1;while(bC<aJ.length&&bA<aK){bA*=aJ[bC++]}bA=bB.modInt(bA);while(bD<bC){if(bA%aJ[bD++]==0){return false}}}return bB.millerRabin(bE)}function n(bE){var bF=this.subtract(aZ.ONE);var bB=bF.getLowestSetBit();if(bB<=0){return false}var bG=bF.shiftRight(bB);bE=(bE+1)>>1;if(bE>aJ.length){bE=aJ.length}var bA=v();for(var bD=0;bD<bE;++bD){bA.fromInt(aJ[Math.floor(Math.random()*aJ.length)]);var bH=bA.modPow(bG,this);if(bH.compareTo(aZ.ONE)!=0&&bH.compareTo(bF)!=0){var bC=1;while(bC++<bB&&bH.compareTo(bF)!=0){bH=bH.modPowInt(2,this);if(bH.compareTo(aZ.ONE)==0){return false}}if(bH.compareTo(bF)!=0){return false}}}return true}aZ.prototype.chunkSize=aV;aZ.prototype.toRadix=V;aZ.prototype.fromRadix=aL;aZ.prototype.fromNumber=a6;aZ.prototype.bitwiseTo=a7;aZ.prototype.changeBit=af;aZ.prototype.addTo=aM;aZ.prototype.dMultiply=z;aZ.prototype.dAddOffset=ax;aZ.prototype.multiplyLowerTo=u;aZ.prototype.multiplyUpperTo=k;aZ.prototype.modInt=K;aZ.prototype.millerRabin=n;aZ.prototype.clone=r;aZ.prototype.intValue=ag;aZ.prototype.byteValue=a9;aZ.prototype.shortValue=aD;aZ.prototype.signum=bm;aZ.prototype.toByteArray=bt;aZ.prototype.equals=aH;aZ.prototype.min=ah;aZ.prototype.max=aQ;aZ.prototype.and=bv;aZ.prototype.or=aU;aZ.prototype.xor=j;aZ.prototype.andNot=E;aZ.prototype.not=ac;aZ.prototype.shiftLeft=Q;aZ.prototype.shiftRight=bu;aZ.prototype.getLowestSetBit=H;aZ.prototype.bitCount=a5;aZ.prototype.testBit=a3;aZ.prototype.setBit=Z;aZ.prototype.clearBit=F;aZ.prototype.flipBit=e;aZ.prototype.add=aP;aZ.prototype.subtract=bn;aZ.prototype.multiply=aG;aZ.prototype.divide=g;aZ.prototype.remainder=q;aZ.prototype.divideAndRemainder=a4;aZ.prototype.modPow=aR;aZ.prototype.modInverse=d;aZ.prototype.pow=T;aZ.prototype.gcd=bp;aZ.prototype.isProbablePrime=ap;aZ.prototype.square=a2;aE.Math_Abs_Int64=aE.Math_Abs_Int32=aE.Math_Abs_Double=function(bA){return Math.abs(bA)};aE.Math_Max_Int32_Int32=function(bB,bA){return Math.max(bB,bA)};if(bc.msie||bc.opera||bc.safari){aE.Cast_Int32=function(bA){return bA|0}}else{aE.Cast_Int32=function(bA){return ~~bA}}if(bc.chrome){aE.Cast_Int64=function(bA){if(bA<-2147483648||bA>2147483647){return bA<0?Math.ceil(bA):Math.floor(bA)}else{return ~~bA}}}else{if(bc.firefox&&typeof(Number.toInteger)=="function"){aE.Cast_Int64=function(bA){return Number.toInteger(bA)}}else{if(bc.msie7||bc.msie8){aE.Cast_Int64=function(bA){return parseInt(bA,10)}}else{if(bc.msie){aE.Cast_Int64=function(bA){if(bA<-2147483648||bA>2147483647){return bA<0?Math.ceil(bA):Math.floor(bA)}return bA|0}}else{aE.Cast_Int64=function(bA){return bA<0?Math.ceil(bA):Math.floor(bA)}}}}}aE.Clear=function(bA){bA.length=0};aE.MaxSteps=64;aE.PI=3.141592653589793;aE.PI2=2*3.141592653589793;aE.IntPoint=function(){var bA=arguments;if(bA.length==1){this.x=bA[0].x;this.y=bA[0].y}if(bA.length==2){this.x=bA[0];this.y=bA[1]}};aE.IntRect=function(){var bC=arguments;if(bC.length==4){var bB=bC[0],bD=bC[1],bE=bC[2],bA=bC[3];this.left=bB;this.top=bD;this.right=bE;this.bottom=bA}else{this.left=0;this.top=0;this.right=0;this.bottom=0}};aE.Polygon=function(){return[]};aE.Polygons=function(){return[]};aE.ExPolygons=function(){var bA=[];bA.exPolygons=true;return bA};aE.ExPolygon=function(){this.outer=null;this.holes=null};aE.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3};aE.PolyType={ptSubject:0,ptClip:1};aE.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3};aE.JoinType={jtSquare:0,jtRound:1,jtMiter:2};aE.EdgeSide={esLeft:1,esRight:2};aE.Protects={ipNone:0,ipLeft:1,ipRight:2,ipBoth:3};aE.Direction={dRightToLeft:0,dLeftToRight:1};aE.TEdge=function(){this.xbot=0;this.ybot=0;this.xcurr=0;this.ycurr=0;this.xtop=0;this.ytop=0;this.dx=0;this.deltaX=0;this.deltaY=0;this.tmpX=0;this.polyType=aE.PolyType.ptSubject;this.side=null;this.windDelta=0;this.windCnt=0;this.windCnt2=0;this.outIdx=0;this.next=null;this.prev=null;this.nextInLML=null;this.nextInAEL=null;this.prevInAEL=null;this.nextInSEL=null;this.prevInSEL=null};aE.IntersectNode=function(){this.edge1=null;this.edge2=null;this.pt=null;this.next=null};aE.LocalMinima=function(){this.y=0;this.leftBound=null;this.rightBound=null;this.next=null};aE.Scanbeam=function(){this.y=0;this.next=null};aE.OutRec=function(){this.idx=0;this.isHole=false;this.FirstLeft=null;this.AppendLink=null;this.pts=null;this.bottomPt=null};aE.OutPt=function(){this.idx=0;this.pt=null;this.next=null;this.prev=null};aE.JoinRec=function(){this.pt1a=null;this.pt1b=null;this.poly1Idx=0;this.pt2a=null;this.pt2b=null;this.poly2Idx=0};aE.HorzJoinRec=function(){this.edge=null;this.savedIdx=0};aE.ClipperBase=function(){this.m_MinimaList=null;this.m_CurrentLM=null;this.m_edges=[[]];this.m_UseFullRange=false};aE.ClipperBase.horizontal=-9007199254740992;aE.ClipperBase.loRange=47453132;aE.ClipperBase.hiRange=4503599627370495;aE.ClipperBase.PointsEqual=function(bB,bA){return(bB.x==bA.x&&bB.y==bA.y)};aE.ClipperBase.prototype.PointIsVertex=function(bC,bB){var bA=bB;do{if(aE.ClipperBase.PointsEqual(bA.pt,bC)){return true}bA=bA.next}while(bA!=bB);return false};aE.ClipperBase.prototype.PointInPolygon=function(bE,bC,bD){var bB=bC;var bA=false;if(bD){do{if((((bB.pt.y<=bE.y)&&(bE.y<bB.prev.pt.y))||((bB.prev.pt.y<=bE.y)&&(bE.y<bB.pt.y)))&&new aZ(bE.x-bB.pt.x).compareTo(new aZ(bB.prev.pt.x-bB.pt.x).multiply(new aZ(bE.y-bB.pt.y)).divide(new aZ(bB.prev.pt.y-bB.pt.y)))<0){bA=!bA}bB=bB.next}while(bB!=bC)}else{do{if((((bB.pt.y<=bE.y)&&(bE.y<bB.prev.pt.y))||((bB.prev.pt.y<=bE.y)&&(bE.y<bB.pt.y)))&&(bE.x-bB.pt.x<(bB.prev.pt.x-bB.pt.x)*(bE.y-bB.pt.y)/(bB.prev.pt.y-bB.pt.y))){bA=!bA}bB=bB.next}while(bB!=bC)}return bA};aE.ClipperBase.prototype.SlopesEqual=aE.ClipperBase.SlopesEqual=function(){var bA=arguments;var bH,bF,bG,bE,bD,bC,bB;if(bA.length==3){bH=bA[0],bF=bA[1],bB=bA[2];if(bB){return new aZ(bH.deltaY).multiply(new aZ(bF.deltaX)).toString()==new aZ(bH.deltaX).multiply(new aZ(bF.deltaY)).toString()}else{return(bH.deltaY)*(bF.deltaX)==(bH.deltaX)*(bF.deltaY)}}else{if(bA.length==4){bG=bA[0],bE=bA[1],bD=bA[2],bB=bA[3];if(bB){return new aZ(bG.y-bE.y).multiply(new aZ(bE.x-bD.x)).toString()==new aZ(bG.x-bE.x).multiply(new aZ(bE.y-bD.y)).toString()}else{return(bG.y-bE.y)*(bE.x-bD.x)-(bG.x-bE.x)*(bE.y-bD.y)==0}}else{if(bA.length==5){bG=bA[0],bE=bA[1],bD=bA[2],bC=bA[3],bB=bA[4];if(bB){return new aZ(bG.y-bE.y).multiply(new aZ(bD.x-bC.x)).toString()==new aZ(bG.x-bE.x).multiply(new aZ(bD.y-bC.y)).toString()}else{return(bG.y-bE.y)*(bD.x-bC.x)-(bG.x-bE.x)*(bD.y-bC.y)==0}}}}};aE.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var bB=0;bB<this.m_edges.length;++bB){for(var bA=0;bA<this.m_edges[bB].length;++bA){this.m_edges[bB][bA]=null}aE.Clear(this.m_edges[bB])}aE.Clear(this.m_edges);this.m_UseFullRange=false};aE.ClipperBase.prototype.DisposeLocalMinimaList=function(){while(this.m_MinimaList!=null){var bA=this.m_MinimaList.next;this.m_MinimaList=null;this.m_MinimaList=bA}this.m_CurrentLM=null};aE.ClipperBase.prototype.AddPolygons=function(bB,bC){var bA=false;var bE=false;if(!(bB instanceof Array)){return bA}for(var bD=0;bD<bB.length;++bD){bE=this.AddPolygon(bB[bD],bC,true);if(bE&&bE!="exceed"){bA=true}else{if(bE=="exceed"){break}}}if(bE=="exceed"){aE.Error("Coordinate exceeds range bounds in AddPolygons().")}return bA};aE.ClipperBase.prototype.AddPolygon=function(bG,bJ,bL){if(!(bG instanceof Array)){return false}var bH=bG.length;if(bH<3){return false}var bB=new aE.Polygon();bB.push(new aE.IntPoint(bG[0].x,bG[0].y));var bE=0;var bF;var bC=false;for(bF=1;bF<bH;++bF){var bK;if(this.m_UseFullRange){bK=aE.ClipperBase.hiRange}else{bK=aE.ClipperBase.loRange}if(aE.Math_Abs_Int64(bG[bF].x)>bK||aE.Math_Abs_Int64(bG[bF].y)>bK){if(aE.Math_Abs_Int64(bG[bF].x)>aE.ClipperBase.hiRange||aE.Math_Abs_Int64(bG[bF].y)>aE.ClipperBase.hiRange){if(typeof(bL)!="undefined"){return"exceed"}bC=true;break}bK=aE.ClipperBase.hiRange;this.m_UseFullRange=true}if(aE.ClipperBase.PointsEqual(bB[bE],bG[bF])){continue}else{if(bE>0&&this.SlopesEqual(bB[bE-1],bB[bE],bG[bF],this.m_UseFullRange)){if(aE.ClipperBase.PointsEqual(bB[bE-1],bG[bF])){bE--}}else{bE++}}if(bE<bB.length){bB[bE]=bG[bF]}else{bB.push(new aE.IntPoint(bG[bF].x,bG[bF].y))}}if(bC&&typeof(bL)=="undefined"){aE.Error("Coordinate exceeds range bounds in AddPolygon()")}if(bE<2){return false}bH=bE+1;while(bH>2){if(aE.ClipperBase.PointsEqual(bB[bE],bB[0])){bE--}else{if(aE.ClipperBase.PointsEqual(bB[0],bB[1])||this.SlopesEqual(bB[bE],bB[0],bB[1],this.m_UseFullRange)){bB[0]=bB[bE--]}else{if(this.SlopesEqual(bB[bE-1],bB[bE],bB[0],this.m_UseFullRange)){bE--}else{if(this.SlopesEqual(bB[0],bB[1],bB[2],this.m_UseFullRange)){for(bF=2;bF<=bE;++bF){bB[bF-1]=bB[bF]}bE--}else{break}}}}bH--}if(bH<3){return false}var bD=[];for(bF=0;bF<bH;bF++){bD.push(new aE.TEdge())}this.m_edges.push(bD);bD[0].xcurr=bB[0].x;bD[0].ycurr=bB[0].y;this.InitEdge(bD[bH-1],bD[0],bD[bH-2],bB[bH-1],bJ);for(bF=bH-2;bF>0;--bF){this.InitEdge(bD[bF],bD[bF+1],bD[bF-1],bB[bF],bJ)}this.InitEdge(bD[0],bD[1],bD[bH-1],bB[0],bJ);var bI=bD[0];var bA=bI;do{bI.xcurr=bI.xbot;bI.ycurr=bI.ybot;if(bI.ytop<bA.ytop){bA=bI}bI=bI.next}while(bI!=bD[0]);if(bA.windDelta>0){bA=bA.next}if(bA.dx==aE.ClipperBase.horizontal){bA=bA.next}bI=bA;do{bI=this.AddBoundsToLML(bI)}while(bI!=bA);return true};aE.ClipperBase.prototype.InitEdge=function(bE,bB,bC,bD,bA){bE.next=bB;bE.prev=bC;bE.xcurr=bD.x;bE.ycurr=bD.y;if(bE.ycurr>=bE.next.ycurr){bE.xbot=bE.xcurr;bE.ybot=bE.ycurr;bE.xtop=bE.next.xcurr;bE.ytop=bE.next.ycurr;bE.windDelta=1}else{bE.xtop=bE.xcurr;bE.ytop=bE.ycurr;bE.xbot=bE.next.xcurr;bE.ybot=bE.next.ycurr;bE.windDelta=-1}this.SetDx(bE);bE.polyType=bA;bE.outIdx=-1};aE.ClipperBase.prototype.SetDx=function(bA){bA.deltaX=(bA.xtop-bA.xbot);bA.deltaY=(bA.ytop-bA.ybot);if(bA.deltaY==0){bA.dx=aE.ClipperBase.horizontal}else{bA.dx=(bA.deltaX)/(bA.deltaY)}};aE.ClipperBase.prototype.AddBoundsToLML=function(bB){bB.nextInLML=null;bB=bB.next;for(;;){if(bB.dx==aE.ClipperBase.horizontal){if(bB.next.ytop<bB.ytop&&bB.next.xbot>bB.prev.xbot){break}if(bB.xtop!=bB.prev.xbot){this.SwapX(bB)}bB.nextInLML=bB.prev}else{if(bB.ycurr==bB.prev.ycurr){break}else{bB.nextInLML=bB.prev}}bB=bB.next}var bA=new aE.LocalMinima();bA.next=null;bA.y=bB.prev.ybot;if(bB.dx==aE.ClipperBase.horizontal){if(bB.xbot!=bB.prev.xbot){this.SwapX(bB)}bA.leftBound=bB.prev;bA.rightBound=bB}else{if(bB.dx<bB.prev.dx){bA.leftBound=bB.prev;bA.rightBound=bB}else{bA.leftBound=bB;bA.rightBound=bB.prev}}bA.leftBound.side=aE.EdgeSide.esLeft;bA.rightBound.side=aE.EdgeSide.esRight;this.InsertLocalMinima(bA);for(;;){if(bB.next.ytop==bB.ytop&&bB.next.dx!=aE.ClipperBase.horizontal){break}bB.nextInLML=bB.next;bB=bB.next;if(bB.dx==aE.ClipperBase.horizontal&&bB.xbot!=bB.prev.xtop){this.SwapX(bB)}}return bB.next};aE.ClipperBase.prototype.InsertLocalMinima=function(bA){if(this.m_MinimaList==null){this.m_MinimaList=bA}else{if(bA.y>=this.m_MinimaList.y){bA.next=this.m_MinimaList;this.m_MinimaList=bA}else{var bB=this.m_MinimaList;while(bB.next!=null&&(bA.y<bB.next.y)){bB=bB.next}bA.next=bB.next;bB.next=bA}}};aE.ClipperBase.prototype.PopLocalMinima=function(){if(this.m_CurrentLM==null){return}this.m_CurrentLM=this.m_CurrentLM.next};aE.ClipperBase.prototype.SwapX=function(bA){bA.xcurr=bA.xtop;bA.xtop=bA.xbot;bA.xbot=bA.xcurr};aE.ClipperBase.prototype.Reset=function(){this.m_CurrentLM=this.m_MinimaList;var bA=this.m_MinimaList;while(bA!=null){var bB=bA.leftBound;while(bB!=null){bB.xcurr=bB.xbot;bB.ycurr=bB.ybot;bB.side=aE.EdgeSide.esLeft;bB.outIdx=-1;bB=bB.nextInLML}bB=bA.rightBound;while(bB!=null){bB.xcurr=bB.xbot;bB.ycurr=bB.ybot;bB.side=aE.EdgeSide.esRight;bB.outIdx=-1;bB=bB.nextInLML}bA=bA.next}return};aE.ClipperBase.prototype.GetBounds=function(){var bA=new aE.IntRect();var bC=this.m_MinimaList;if(bC==null){return bA}bA.left=bC.leftBound.xbot;bA.top=bC.leftBound.ybot;bA.right=bC.leftBound.xbot;bA.bottom=bC.leftBound.ybot;while(bC!=null){if(bC.leftBound.ybot>bA.bottom){bA.bottom=bC.leftBound.ybot}var bD=bC.leftBound;for(;;){var bB=bD;while(bD.nextInLML!=null){if(bD.xbot<bA.left){bA.left=bD.xbot}if(bD.xbot>bA.right){bA.right=bD.xbot}bD=bD.nextInLML}if(bD.xbot<bA.left){bA.left=bD.xbot}if(bD.xbot>bA.right){bA.right=bD.xbot}if(bD.xtop<bA.left){bA.left=bD.xtop}if(bD.xtop>bA.right){bA.right=bD.xtop}if(bD.ytop<bA.top){bA.top=bD.ytop}if(bB==bC.leftBound){bD=bC.rightBound}else{break}}bC=bC.next}return bA};aE.Clipper=function(){this.m_PolyOuts=null;this.m_ClipType=aE.ClipType.ctIntersection;this.m_Scanbeam=null;this.m_ActiveEdges=null;this.m_SortedEdges=null;this.m_IntersectNodes=null;this.m_ExecuteLocked=false;this.m_ClipFillType=aE.PolyFillType.pftEvenOdd;this.m_SubjFillType=aE.PolyFillType.pftEvenOdd;this.m_Joins=null;this.m_HorizJoins=null;this.m_ReverseOutput=false;this.m_UsingExPolygons=false;aE.ClipperBase.call(this);this.m_Scanbeam=null;this.m_ActiveEdges=null;this.m_SortedEdges=null;this.m_IntersectNodes=null;this.m_ExecuteLocked=false;this.m_PolyOuts=[];this.m_Joins=[];this.m_HorizJoins=[];this.m_ReverseOutput=false;this.m_UsingExPolygons=false};aE.Clipper.prototype.Clear=function(){if(this.m_edges.length==0){return}this.DisposeAllPolyPts();aE.ClipperBase.prototype.Clear.call(this)};aE.Clipper.prototype.DisposeScanbeamList=function(){while(this.m_Scanbeam!=null){var bA=this.m_Scanbeam.next;this.m_Scanbeam=null;this.m_Scanbeam=bA}};aE.Clipper.prototype.Reset=function(){aE.ClipperBase.prototype.Reset.call(this);this.m_Scanbeam=null;this.m_ActiveEdges=null;this.m_SortedEdges=null;this.DisposeAllPolyPts();var bA=this.m_MinimaList;while(bA!=null){this.InsertScanbeam(bA.y);this.InsertScanbeam(bA.leftBound.ytop);bA=bA.next}};aE.Clipper.prototype.get_ReverseSolution=function(){return this.m_ReverseOutput};aE.Clipper.prototype.set_ReverseSolution=function(bA){this.m_ReverseOutput=bA};aE.Clipper.prototype.InsertScanbeam=function(bC){var bA;if(this.m_Scanbeam==null){this.m_Scanbeam=new aE.Scanbeam();this.m_Scanbeam.next=null;this.m_Scanbeam.y=bC}else{if(bC>this.m_Scanbeam.y){bA=new aE.Scanbeam();bA.y=bC;bA.next=this.m_Scanbeam;this.m_Scanbeam=bA}else{var bB=this.m_Scanbeam;while(bB.next!=null&&(bC<=bB.next.y)){bB=bB.next}if(bC==bB.y){return}bA=new aE.Scanbeam();bA.y=bC;bA.next=bB.next;bB.next=bA}}};aE.Clipper.prototype.Execute=function(bC,bA,bB,bD){var bE;if(arguments.length==2){bB=aE.PolyFillType.pftEvenOdd;bD=aE.PolyFillType.pftEvenOdd}if(typeof(bA.exPolygons)=="undefined"){if(this.m_ExecuteLocked){return false}this.m_ExecuteLocked=true;aE.Clear(bA);this.m_SubjFillType=bB;this.m_ClipFillType=bD;this.m_ClipType=bC;this.m_UsingExPolygons=false;bE=this.ExecuteInternal();if(bE){this.BuildResult(bA)}this.m_ExecuteLocked=false;return bE}else{if(this.m_ExecuteLocked){return false}this.m_ExecuteLocked=true;aE.Clear(bA);this.m_SubjFillType=bB;this.m_ClipFillType=bD;this.m_ClipType=bC;this.m_UsingExPolygons=true;bE=this.ExecuteInternal();if(bE){this.BuildResultEx(bA)}this.m_ExecuteLocked=false;return bE}};aE.Clipper.prototype.PolySort=function(bE,bD){if(bE==bD){return 0}else{if(bE.pts==null||bD.pts==null){if((bE.pts==null)!=(bD.pts==null)){return bE.pts==null?1:-1}else{return 0}}}var bC,bB;if(bE.isHole){bC=bE.FirstLeft.idx}else{bC=bE.idx}if(bD.isHole){bB=bD.FirstLeft.idx}else{bB=bD.idx}var bA=bC-bB;if(bA==0&&(bE.isHole!=bD.isHole)){return bE.isHole?1:-1}return bA};aE.Clipper.prototype.FindAppendLinkEnd=function(bA){while(bA.AppendLink!=null){bA=bA.AppendLink}return bA};aE.Clipper.prototype.FixHoleLinkage=function(bB){var bA;if(bB.bottomPt!=null){bA=this.m_PolyOuts[bB.bottomPt.idx].FirstLeft}else{bA=bB.FirstLeft}if(bB==bA){aE.Error("HoleLinkage error")}if(bA!=null){if(bA.AppendLink!=null){bA=this.FindAppendLinkEnd(bA)}if(bA==bB){bA=null}else{if(bA.isHole){this.FixHoleLinkage(bA);bA=bA.FirstLeft}}}bB.FirstLeft=bA;if(bA==null){bB.isHole=false}bB.AppendLink=null};aE.Clipper.prototype.ExecuteInternal=function(){var bE;try{this.Reset();if(this.m_CurrentLM==null){return true}var bD=this.PopScanbeam();do{this.InsertLocalMinimaIntoAEL(bD);aE.Clear(this.m_HorizJoins);this.ProcessHorizontals();var bA=this.PopScanbeam();bE=this.ProcessIntersections(bD,bA);if(!bE){break}this.ProcessEdgesAtTopOfScanbeam(bA);bD=bA}while(this.m_Scanbeam!=null)}catch(bF){bE=false}if(bE){var bC;for(var bB=0;bB<this.m_PolyOuts.length;bB++){bC=this.m_PolyOuts[bB];if(bC.pts==null){continue}this.FixupOutPolygon(bC);if(bC.pts==null){continue}if(bC.isHole&&this.m_UsingExPolygons){this.FixHoleLinkage(bC)}if((bC.isHole^this.m_ReverseOutput)==(this.Area(bC,this.m_UseFullRange)>0)){this.ReversePolyPtLinks(bC.pts)}}this.JoinCommonEdges();if(this.m_UsingExPolygons){this.m_PolyOuts.sort(this.PolySort)}}aE.Clear(this.m_Joins);aE.Clear(this.m_HorizJoins);return bE};aE.Clipper.prototype.PopScanbeam=function(){var bB=this.m_Scanbeam.y;var bA=this.m_Scanbeam;this.m_Scanbeam=this.m_Scanbeam.next;bA=null;return bB};aE.Clipper.prototype.DisposeAllPolyPts=function(){for(var bA=0;bA<this.m_PolyOuts.length;++bA){this.DisposeOutRec(bA)}aE.Clear(this.m_PolyOuts)};aE.Clipper.prototype.DisposeOutRec=function(bA){var bB=this.m_PolyOuts[bA];if(bB.pts!=null){this.DisposeOutPts(bB.pts)}bB=null;this.m_PolyOuts[bA]=null};aE.Clipper.prototype.DisposeOutPts=function(bB){if(bB==null){return}var bA=null;bB.prev.next=null;while(bB!=null){bA=bB;bB=bB.next;bA=null}};aE.Clipper.prototype.AddJoin=function(bD,bB,bE,bA){var bC=new aE.JoinRec();if(bE>=0){bC.poly1Idx=bE}else{bC.poly1Idx=bD.outIdx}bC.pt1a=new aE.IntPoint(bD.xcurr,bD.ycurr);bC.pt1b=new aE.IntPoint(bD.xtop,bD.ytop);if(bA>=0){bC.poly2Idx=bA}else{bC.poly2Idx=bB.outIdx}bC.pt2a=new aE.IntPoint(bB.xcurr,bB.ycurr);bC.pt2b=new aE.IntPoint(bB.xtop,bB.ytop);this.m_Joins.push(bC)};aE.Clipper.prototype.AddHorzJoin=function(bC,bA){var bB=new aE.HorzJoinRec();bB.edge=bC;bB.savedIdx=bA;this.m_HorizJoins.push(bB)};aE.Clipper.prototype.InsertLocalMinimaIntoAEL=function(bH){var bG,bF;while(this.m_CurrentLM!=null&&(this.m_CurrentLM.y==bH)){var bC=this.m_CurrentLM.leftBound;var bE=this.m_CurrentLM.rightBound;this.InsertEdgeIntoAEL(bC);this.InsertScanbeam(bC.ytop);this.InsertEdgeIntoAEL(bE);if(this.IsEvenOddFillType(bC)){bC.windDelta=1;bE.windDelta=1}else{bE.windDelta=-bC.windDelta}this.SetWindingCount(bC);bE.windCnt=bC.windCnt;bE.windCnt2=bC.windCnt2;if(bE.dx==aE.ClipperBase.horizontal){this.AddEdgeToSEL(bE);this.InsertScanbeam(bE.nextInLML.ytop)}else{this.InsertScanbeam(bE.ytop)}if(this.IsContributing(bC)){this.AddLocalMinPoly(bC,bE,new aE.IntPoint(bC.xcurr,this.m_CurrentLM.y))}if(bE.outIdx>=0){if(bE.dx==aE.ClipperBase.horizontal){for(var bB=0;bB<this.m_HorizJoins.length;bB++){bG=new aE.IntPoint(),bF=new aE.IntPoint();var bA=this.m_HorizJoins[bB];if((function(){bG={Value:bG};bF={Value:bF};var bI=this.GetOverlapSegment(new aE.IntPoint(bA.edge.xbot,bA.edge.ybot),new aE.IntPoint(bA.edge.xtop,bA.edge.ytop),new aE.IntPoint(bE.xbot,bE.ybot),new aE.IntPoint(bE.xtop,bE.ytop),bG,bF);bG=bG.Value;bF=bF.Value;return bI}).call(this)){this.AddJoin(bA.edge,bE,bA.savedIdx,-1)}}}}if(bC.nextInAEL!=bE){if(bE.outIdx>=0&&bE.prevInAEL.outIdx>=0&&this.SlopesEqual(bE.prevInAEL,bE,this.m_UseFullRange)){this.AddJoin(bE,bE.prevInAEL,-1,-1)}var bD=bC.nextInAEL;bG=new aE.IntPoint(bC.xcurr,bC.ycurr);while(bD!=bE){if(bD==null){aE.Error("InsertLocalMinimaIntoAEL: missing rightbound!")}this.IntersectEdges(bE,bD,bG,aE.Protects.ipNone);bD=bD.nextInAEL}}this.PopLocalMinima()}};aE.Clipper.prototype.InsertEdgeIntoAEL=function(bA){bA.prevInAEL=null;bA.nextInAEL=null;if(this.m_ActiveEdges==null){this.m_ActiveEdges=bA}else{if(this.E2InsertsBeforeE1(this.m_ActiveEdges,bA)){bA.nextInAEL=this.m_ActiveEdges;this.m_ActiveEdges.prevInAEL=bA;this.m_ActiveEdges=bA}else{var bB=this.m_ActiveEdges;while(bB.nextInAEL!=null&&!this.E2InsertsBeforeE1(bB.nextInAEL,bA)){bB=bB.nextInAEL}bA.nextInAEL=bB.nextInAEL;if(bB.nextInAEL!=null){bB.nextInAEL.prevInAEL=bA}bA.prevInAEL=bB;bB.nextInAEL=bA}}};aE.Clipper.prototype.E2InsertsBeforeE1=function(bB,bA){return bA.xcurr==bB.xcurr?bA.dx>bB.dx:bA.xcurr<bB.xcurr};aE.Clipper.prototype.IsEvenOddFillType=function(bA){if(bA.polyType==aE.PolyType.ptSubject){return this.m_SubjFillType==aE.PolyFillType.pftEvenOdd}else{return this.m_ClipFillType==aE.PolyFillType.pftEvenOdd}};aE.Clipper.prototype.IsEvenOddAltFillType=function(bA){if(bA.polyType==aE.PolyType.ptSubject){return this.m_ClipFillType==aE.PolyFillType.pftEvenOdd}else{return this.m_SubjFillType==aE.PolyFillType.pftEvenOdd}};aE.Clipper.prototype.IsContributing=function(bB){var bA,bC;if(bB.polyType==aE.PolyType.ptSubject){bA=this.m_SubjFillType;bC=this.m_ClipFillType}else{bA=this.m_ClipFillType;bC=this.m_SubjFillType}switch(bA){case aE.PolyFillType.pftEvenOdd:case aE.PolyFillType.pftNonZero:if(aE.Math_Abs_Int32(bB.windCnt)!=1){return false}break;case aE.PolyFillType.pftPositive:if(bB.windCnt!=1){return false}break;default:if(bB.windCnt!=-1){return false}break}switch(this.m_ClipType){case aE.ClipType.ctIntersection:switch(bC){case aE.PolyFillType.pftEvenOdd:case aE.PolyFillType.pftNonZero:return(bB.windCnt2!=0);case aE.PolyFillType.pftPositive:return(bB.windCnt2>0);default:return(bB.windCnt2<0)}break;case aE.ClipType.ctUnion:switch(bC){case aE.PolyFillType.pftEvenOdd:case aE.PolyFillType.pftNonZero:return(bB.windCnt2==0);case aE.PolyFillType.pftPositive:return(bB.windCnt2<=0);default:return(bB.windCnt2>=0)}break;case aE.ClipType.ctDifference:if(bB.polyType==aE.PolyType.ptSubject){switch(bC){case aE.PolyFillType.pftEvenOdd:case aE.PolyFillType.pftNonZero:return(bB.windCnt2==0);case aE.PolyFillType.pftPositive:return(bB.windCnt2<=0);default:return(bB.windCnt2>=0)}}else{switch(bC){case aE.PolyFillType.pftEvenOdd:case aE.PolyFillType.pftNonZero:return(bB.windCnt2!=0);case aE.PolyFillType.pftPositive:return(bB.windCnt2>0);default:return(bB.windCnt2<0)}}}return true};aE.Clipper.prototype.SetWindingCount=function(bA){var bB=bA.prevInAEL;while(bB!=null&&bB.polyType!=bA.polyType){bB=bB.prevInAEL}if(bB==null){bA.windCnt=bA.windDelta;bA.windCnt2=0;bB=this.m_ActiveEdges}else{if(this.IsEvenOddFillType(bA)){bA.windCnt=1;bA.windCnt2=bB.windCnt2;bB=bB.nextInAEL}else{if(bB.windCnt*bB.windDelta<0){if(aE.Math_Abs_Int32(bB.windCnt)>1){if(bB.windDelta*bA.windDelta<0){bA.windCnt=bB.windCnt}else{bA.windCnt=bB.windCnt+bA.windDelta}}else{bA.windCnt=bB.windCnt+bB.windDelta+bA.windDelta}}else{if(aE.Math_Abs_Int32(bB.windCnt)>1&&bB.windDelta*bA.windDelta<0){bA.windCnt=bB.windCnt}else{if(bB.windCnt+bA.windDelta==0){bA.windCnt=bB.windCnt}else{bA.windCnt=bB.windCnt+bA.windDelta}}}bA.windCnt2=bB.windCnt2;bB=bB.nextInAEL}}if(this.IsEvenOddAltFillType(bA)){while(bB!=bA){bA.windCnt2=(bA.windCnt2==0)?1:0;bB=bB.nextInAEL}}else{while(bB!=bA){bA.windCnt2+=bB.windDelta;bB=bB.nextInAEL}}};aE.Clipper.prototype.AddEdgeToSEL=function(bA){if(this.m_SortedEdges==null){this.m_SortedEdges=bA;bA.prevInSEL=null;bA.nextInSEL=null}else{bA.nextInSEL=this.m_SortedEdges;bA.prevInSEL=null;this.m_SortedEdges.prevInSEL=bA;this.m_SortedEdges=bA}};aE.Clipper.prototype.CopyAELToSEL=function(){var bA=this.m_ActiveEdges;this.m_SortedEdges=bA;if(this.m_ActiveEdges==null){return}this.m_SortedEdges.prevInSEL=null;bA=bA.nextInAEL;while(bA!=null){bA.prevInSEL=bA.prevInAEL;bA.prevInSEL.nextInSEL=bA;bA.nextInSEL=null;bA=bA.nextInAEL}};aE.Clipper.prototype.SwapPositionsInAEL=function(bB,bA){var bC,bD;if(bB.nextInAEL==null&&bB.prevInAEL==null){return}if(bA.nextInAEL==null&&bA.prevInAEL==null){return}if(bB.nextInAEL==bA){bC=bA.nextInAEL;if(bC!=null){bC.prevInAEL=bB}bD=bB.prevInAEL;if(bD!=null){bD.nextInAEL=bA}bA.prevInAEL=bD;bA.nextInAEL=bB;bB.prevInAEL=bA;bB.nextInAEL=bC}else{if(bA.nextInAEL==bB){bC=bB.nextInAEL;if(bC!=null){bC.prevInAEL=bA}bD=bA.prevInAEL;if(bD!=null){bD.nextInAEL=bB}bB.prevInAEL=bD;bB.nextInAEL=bA;bA.prevInAEL=bB;bA.nextInAEL=bC}else{bC=bB.nextInAEL;bD=bB.prevInAEL;bB.nextInAEL=bA.nextInAEL;if(bB.nextInAEL!=null){bB.nextInAEL.prevInAEL=bB}bB.prevInAEL=bA.prevInAEL;if(bB.prevInAEL!=null){bB.prevInAEL.nextInAEL=bB}bA.nextInAEL=bC;if(bA.nextInAEL!=null){bA.nextInAEL.prevInAEL=bA}bA.prevInAEL=bD;if(bA.prevInAEL!=null){bA.prevInAEL.nextInAEL=bA}}}if(bB.prevInAEL==null){this.m_ActiveEdges=bB}else{if(bA.prevInAEL==null){this.m_ActiveEdges=bA}}};aE.Clipper.prototype.SwapPositionsInSEL=function(bB,bA){var bC,bD;if(bB.nextInSEL==null&&bB.prevInSEL==null){return}if(bA.nextInSEL==null&&bA.prevInSEL==null){return}if(bB.nextInSEL==bA){bC=bA.nextInSEL;if(bC!=null){bC.prevInSEL=bB}bD=bB.prevInSEL;if(bD!=null){bD.nextInSEL=bA}bA.prevInSEL=bD;bA.nextInSEL=bB;bB.prevInSEL=bA;bB.nextInSEL=bC}else{if(bA.nextInSEL==bB){bC=bB.nextInSEL;if(bC!=null){bC.prevInSEL=bA}bD=bA.prevInSEL;if(bD!=null){bD.nextInSEL=bB}bB.prevInSEL=bD;bB.nextInSEL=bA;bA.prevInSEL=bB;bA.nextInSEL=bC}else{bC=bB.nextInSEL;bD=bB.prevInSEL;bB.nextInSEL=bA.nextInSEL;if(bB.nextInSEL!=null){bB.nextInSEL.prevInSEL=bB}bB.prevInSEL=bA.prevInSEL;if(bB.prevInSEL!=null){bB.prevInSEL.nextInSEL=bB}bA.nextInSEL=bC;if(bA.nextInSEL!=null){bA.nextInSEL.prevInSEL=bA}bA.prevInSEL=bD;if(bA.prevInSEL!=null){bA.prevInSEL.nextInSEL=bA}}}if(bB.prevInSEL==null){this.m_SortedEdges=bB}else{if(bA.prevInSEL==null){this.m_SortedEdges=bA}}};aE.Clipper.prototype.AddLocalMaxPoly=function(bC,bB,bA){this.AddOutPt(bC,bA);if(bC.outIdx==bB.outIdx){bC.outIdx=-1;bB.outIdx=-1}else{if(bC.outIdx<bB.outIdx){this.AppendPolygon(bC,bB)}else{this.AppendPolygon(bB,bC)}}};aE.Clipper.prototype.AddLocalMinPoly=function(bE,bD,bC){var bB,bA;if(bD.dx==aE.ClipperBase.horizontal||(bE.dx>bD.dx)){this.AddOutPt(bE,bC);bD.outIdx=bE.outIdx;bE.side=aE.EdgeSide.esLeft;bD.side=aE.EdgeSide.esRight;bB=bE;if(bB.prevInAEL==bD){bA=bD.prevInAEL}else{bA=bB.prevInAEL}}else{this.AddOutPt(bD,bC);bE.outIdx=bD.outIdx;bE.side=aE.EdgeSide.esRight;bD.side=aE.EdgeSide.esLeft;bB=bD;if(bB.prevInAEL==bE){bA=bE.prevInAEL}else{bA=bB.prevInAEL}}if(bA!=null&&bA.outIdx>=0&&(aE.Clipper.TopX(bA,bC.y)==aE.Clipper.TopX(bB,bC.y))&&this.SlopesEqual(bB,bA,this.m_UseFullRange)){this.AddJoin(bB,bA,-1,-1)}};aE.Clipper.prototype.CreateOutRec=function(){var bA=new aE.OutRec();bA.idx=-1;bA.isHole=false;bA.FirstLeft=null;bA.AppendLink=null;bA.pts=null;bA.bottomPt=null;return bA};aE.Clipper.prototype.AddOutPt=function(bD,bC){var bB,bF;var bE=(bD.side==aE.EdgeSide.esLeft);if(bD.outIdx<0){bB=this.CreateOutRec();this.m_PolyOuts.push(bB);bB.idx=this.m_PolyOuts.length-1;bD.outIdx=bB.idx;bF=new aE.OutPt();bB.pts=bF;bB.bottomPt=bF;bF.pt=bC;bF.idx=bB.idx;bF.next=bF;bF.prev=bF;this.SetHoleState(bD,bB)}else{bB=this.m_PolyOuts[bD.outIdx];bF=bB.pts;var bA;if(bE&&aE.ClipperBase.PointsEqual(bC,bF.pt)||(!bE&&aE.ClipperBase.PointsEqual(bC,bF.prev.pt))){return}bA=new aE.OutPt();bA.pt=bC;bA.idx=bB.idx;if(bA.pt.y==bB.bottomPt.pt.y&&bA.pt.x<bB.bottomPt.pt.x){bB.bottomPt=bA}bA.next=bF;bA.prev=bF.prev;bA.prev.next=bA;bF.prev=bA;if(bE){bB.pts=bA}}};aE.Clipper.prototype.SwapPoints=function(bC,bB){var bA=bC.Value;bC.Value=bB.Value;bB.Value=bA};aE.Clipper.prototype.GetOverlapSegment=function(bB,bA,bD,bC,bF,bE){if(aE.Math_Abs_Int64(bB.x-bA.x)>aE.Math_Abs_Int64(bB.y-bA.y)){if(bB.x>bA.x){(function(){bB={Value:bB};bA={Value:bA};var bG=this.SwapPoints(bB,bA);bB=bB.Value;bA=bA.Value;return bG}).call(this)}if(bD.x>bC.x){(function(){bD={Value:bD};bC={Value:bC};var bG=this.SwapPoints(bD,bC);bD=bD.Value;bC=bC.Value;return bG}).call(this)}if(bB.x>bD.x){bF.Value=bB}else{bF.Value=bD}if(bA.x<bC.x){bE.Value=bA}else{bE.Value=bC}return bF.Value.x<bE.Value.x}else{if(bB.y<bA.y){(function(){bB={Value:bB};bA={Value:bA};var bG=this.SwapPoints(bB,bA);bB=bB.Value;bA=bA.Value;return bG}).call(this)}if(bD.y<bC.y){(function(){bD={Value:bD};bC={Value:bC};var bG=this.SwapPoints(bD,bC);bD=bD.Value;bC=bC.Value;return bG}).call(this)}if(bB.y<bD.y){bF.Value=bB}else{bF.Value=bD}if(bA.y>bC.y){bE.Value=bA}else{bE.Value=bC}return bF.Value.y>bE.Value.y}};aE.Clipper.prototype.FindSegment=function(bB,bD,bG,bF){if(bB.Value==null){return false}var bA=bB.Value;var bC=new aE.IntPoint(bG.Value);var bE=new aE.IntPoint(bF.Value);do{if(this.SlopesEqual(bC,bE,bB.Value.pt,bB.Value.prev.pt,bD)&&this.SlopesEqual(bC,bE,bB.Value.pt,bD)&&this.GetOverlapSegment(bC,bE,bB.Value.pt,bB.Value.prev.pt,bG,bF)){return true}bB.Value=bB.Value.next}while(bB.Value!=bA);return false};aE.Clipper.prototype.Pt3IsBetweenPt1AndPt2=function(bC,bB,bA){if(aE.ClipperBase.PointsEqual(bC,bA)||aE.ClipperBase.PointsEqual(bB,bA)){return true}else{if(bC.x!=bB.x){return(bC.x<bA.x)==(bA.x<bB.x)}else{return(bC.y<bA.y)==(bA.y<bB.y)}}};aE.Clipper.prototype.InsertPolyPtBetween=function(bD,bC,bB){var bA=new aE.OutPt();bA.pt=bB;if(bC==bD.next){bD.next=bA;bC.prev=bA;bA.next=bC;bA.prev=bD}else{bC.next=bA;bD.prev=bA;bA.next=bD;bA.prev=bC}return bA};aE.Clipper.prototype.SetHoleState=function(bD,bC){var bB=false;var bA=bD.prevInAEL;while(bA!=null){if(bA.outIdx>=0){bB=!bB;if(bC.FirstLeft==null){bC.FirstLeft=this.m_PolyOuts[bA.outIdx]}}bA=bA.prevInAEL}if(bB){bC.isHole=true}};aE.Clipper.prototype.GetDx=function(bB,bA){if(bB.y==bA.y){return aE.ClipperBase.horizontal}else{return(bA.x-bB.x)/(bA.y-bB.y)}};aE.Clipper.prototype.FirstIsBottomPt=function(bC,bB){var bE=bC.prev;while(aE.ClipperBase.PointsEqual(bE.pt,bC.pt)&&(bE!=bC)){bE=bE.prev}var bD=aE.Math_Abs_Double(this.GetDx(bC.pt,bE.pt));bE=bC.next;while(aE.ClipperBase.PointsEqual(bE.pt,bC.pt)&&(bE!=bC)){bE=bE.next}var bG=aE.Math_Abs_Double(this.GetDx(bC.pt,bE.pt));bE=bB.prev;while(aE.ClipperBase.PointsEqual(bE.pt,bB.pt)&&(bE!=bB)){bE=bE.prev}var bF=aE.Math_Abs_Double(this.GetDx(bB.pt,bE.pt));bE=bB.next;while(aE.ClipperBase.PointsEqual(bE.pt,bB.pt)&&(bE!=bB)){bE=bE.next}var bA=aE.Math_Abs_Double(this.GetDx(bB.pt,bE.pt));return(bD>=bF&&bD>=bA)||(bG>=bF&&bG>=bA)};aE.Clipper.prototype.GetBottomPt=function(bB){var bA=null;var bC=bB.next;while(bC!=bB){if(bC.pt.y>bB.pt.y){bB=bC;bA=null}else{if(bC.pt.y==bB.pt.y&&bC.pt.x<=bB.pt.x){if(bC.pt.x<bB.pt.x){bA=null;bB=bC}else{if(bC.next!=bB&&bC.prev!=bB){bA=bC}}}}bC=bC.next}if(bA!=null){while(bA!=bC){if(!this.FirstIsBottomPt(bC,bA)){bB=bA}bA=bA.next;while(!aE.ClipperBase.PointsEqual(bA.pt,bB.pt)){bA=bA.next}}}return bB};aE.Clipper.prototype.GetLowermostRec=function(bD,bB){var bC=bD.bottomPt;var bA=bB.bottomPt;if(bC.pt.y>bA.pt.y){return bD}else{if(bC.pt.y<bA.pt.y){return bB}else{if(bC.pt.x<bA.pt.x){return bD}else{if(bC.pt.x>bA.pt.x){return bB}else{if(bC.next==bC){return bB}else{if(bA.next==bA){return bD}else{if(this.FirstIsBottomPt(bC,bA)){return bD}else{return bB}}}}}}}};aE.Clipper.prototype.Param1RightOfParam2=function(bB,bA){do{bB=bB.FirstLeft;if(bB==bA){return true}}while(bB!=null);return false};aE.Clipper.prototype.AppendPolygon=function(bL,bK){var bA=this.m_PolyOuts[bL.outIdx];var bN=this.m_PolyOuts[bK.outIdx];var bM;if(this.Param1RightOfParam2(bA,bN)){bM=bN}else{if(this.Param1RightOfParam2(bN,bA)){bM=bA}else{bM=this.GetLowermostRec(bA,bN)}}var bD=bA.pts;var bG=bD.prev;var bC=bN.pts;var bB=bC.prev;var bJ;var bF;if(bL.side==aE.EdgeSide.esLeft){if(bK.side==aE.EdgeSide.esLeft){this.ReversePolyPtLinks(bC);bC.next=bD;bD.prev=bC;bG.next=bB;bB.prev=bG;bA.pts=bB}else{bB.next=bD;bD.prev=bB;bC.prev=bG;bG.next=bC;bA.pts=bC}bJ=aE.EdgeSide.esLeft}else{if(bK.side==aE.EdgeSide.esRight){this.ReversePolyPtLinks(bC);bG.next=bB;bB.prev=bG;bC.next=bD;bD.prev=bC}else{bG.next=bC;bC.prev=bG;bD.prev=bB;bB.next=bD}bJ=aE.EdgeSide.esRight}if(bM==bN){bA.bottomPt=bN.bottomPt;bA.bottomPt.idx=bA.idx;if(bN.FirstLeft!=bA){bA.FirstLeft=bN.FirstLeft}bA.isHole=bN.isHole}bN.pts=null;bN.bottomPt=null;bN.AppendLink=bA;var bE=bL.outIdx;var bH=bK.outIdx;bL.outIdx=-1;bK.outIdx=-1;var bI=this.m_ActiveEdges;while(bI!=null){if(bI.outIdx==bH){bI.outIdx=bE;bI.side=bJ;break}bI=bI.nextInAEL}for(bF=0;bF<this.m_Joins.length;++bF){if(this.m_Joins[bF].poly1Idx==bH){this.m_Joins[bF].poly1Idx=bE}if(this.m_Joins[bF].poly2Idx==bH){this.m_Joins[bF].poly2Idx=bE}}for(bF=0;bF<this.m_HorizJoins.length;++bF){if(this.m_HorizJoins[bF].savedIdx==bH){this.m_HorizJoins[bF].savedIdx=bE}}};aE.Clipper.prototype.ReversePolyPtLinks=function(bC){if(bC==null){return}var bB;var bA;bB=bC;do{bA=bB.next;bB.next=bB.prev;bB.prev=bA;bB=bA}while(bB!=bC)};aE.Clipper.SwapSides=function(bB,bA){var bC=bB.side;bB.side=bA.side;bA.side=bC};aE.Clipper.SwapPolyIndexes=function(bB,bA){var bC=bB.outIdx;bB.outIdx=bA.outIdx;bA.outIdx=bC};aE.Clipper.prototype.DoEdge1=function(bB,bA,bC){this.AddOutPt(bB,bC);aE.Clipper.SwapSides(bB,bA);aE.Clipper.SwapPolyIndexes(bB,bA)};aE.Clipper.prototype.DoEdge2=function(bB,bA,bC){this.AddOutPt(bA,bC);aE.Clipper.SwapSides(bB,bA);aE.Clipper.SwapPolyIndexes(bB,bA)};aE.Clipper.prototype.DoBothEdges=function(bB,bA,bC){this.AddOutPt(bB,bC);this.AddOutPt(bA,bC);aE.Clipper.SwapSides(bB,bA);aE.Clipper.SwapPolyIndexes(bB,bA)};aE.Clipper.prototype.IntersectEdges=function(bM,bI,bP,bH){var bJ=(aE.Protects.ipLeft&bH)==0&&bM.nextInLML==null&&bM.xtop==bP.x&&bM.ytop==bP.y;var bQ=(aE.Protects.ipRight&bH)==0&&bI.nextInLML==null&&bI.xtop==bP.x&&bI.ytop==bP.y;var bE=(bM.outIdx>=0);var bC=(bI.outIdx>=0);if(bM.polyType==bI.polyType){if(this.IsEvenOddFillType(bM)){var bB=bM.windCnt;bM.windCnt=bI.windCnt;bI.windCnt=bB}else{if(bM.windCnt+bI.windDelta==0){bM.windCnt=-bM.windCnt}else{bM.windCnt+=bI.windDelta}if(bI.windCnt-bM.windDelta==0){bI.windCnt=-bI.windCnt}else{bI.windCnt-=bM.windDelta}}}else{if(!this.IsEvenOddFillType(bI)){bM.windCnt2+=bI.windDelta}else{bM.windCnt2=(bM.windCnt2==0)?1:0}if(!this.IsEvenOddFillType(bM)){bI.windCnt2-=bM.windDelta}else{bI.windCnt2=(bI.windCnt2==0)?1:0}}var bO,bD,bA,bG;if(bM.polyType==aE.PolyType.ptSubject){bO=this.m_SubjFillType;bA=this.m_ClipFillType}else{bO=this.m_ClipFillType;bA=this.m_SubjFillType}if(bI.polyType==aE.PolyType.ptSubject){bD=this.m_SubjFillType;bG=this.m_ClipFillType}else{bD=this.m_ClipFillType;bG=this.m_SubjFillType}var bL,bN;switch(bO){case aE.PolyFillType.pftPositive:bL=bM.windCnt;break;case aE.PolyFillType.pftNegative:bL=-bM.windCnt;break;default:bL=aE.Math_Abs_Int32(bM.windCnt);break}switch(bD){case aE.PolyFillType.pftPositive:bN=bI.windCnt;break;case aE.PolyFillType.pftNegative:bN=-bI.windCnt;break;default:bN=aE.Math_Abs_Int32(bI.windCnt);break}if(bE&&bC){if(bJ||bQ||(bL!=0&&bL!=1)||(bN!=0&&bN!=1)||(bM.polyType!=bI.polyType&&this.m_ClipType!=aE.ClipType.ctXor)){this.AddLocalMaxPoly(bM,bI,bP)}else{this.DoBothEdges(bM,bI,bP)}}else{if(bE){if((bN==0||bN==1)&&(this.m_ClipType!=aE.ClipType.ctIntersection||bI.polyType==aE.PolyType.ptSubject||(bI.windCnt2!=0))){this.DoEdge1(bM,bI,bP)}}else{if(bC){if((bL==0||bL==1)&&(this.m_ClipType!=aE.ClipType.ctIntersection||bM.polyType==aE.PolyType.ptSubject||(bM.windCnt2!=0))){this.DoEdge2(bM,bI,bP)}}else{if((bL==0||bL==1)&&(bN==0||bN==1)&&!bJ&&!bQ){var bK,bF;switch(bA){case aE.PolyFillType.pftPositive:bK=bM.windCnt2;break;case aE.PolyFillType.pftNegative:bK=-bM.windCnt2;break;default:bK=aE.Math_Abs_Int32(bM.windCnt2);break}switch(bG){case aE.PolyFillType.pftPositive:bF=bI.windCnt2;break;case aE.PolyFillType.pftNegative:bF=-bI.windCnt2;break;default:bF=aE.Math_Abs_Int32(bI.windCnt2);break}if(bM.polyType!=bI.polyType){this.AddLocalMinPoly(bM,bI,bP)}else{if(bL==1&&bN==1){switch(this.m_ClipType){case aE.ClipType.ctIntersection:if(bK>0&&bF>0){this.AddLocalMinPoly(bM,bI,bP)}break;case aE.ClipType.ctUnion:if(bK<=0&&bF<=0){this.AddLocalMinPoly(bM,bI,bP)}break;case aE.ClipType.ctDifference:if(((bM.polyType==aE.PolyType.ptClip)&&(bK>0)&&(bF>0))||((bM.polyType==aE.PolyType.ptSubject)&&(bK<=0)&&(bF<=0))){this.AddLocalMinPoly(bM,bI,bP)}break;case aE.ClipType.ctXor:this.AddLocalMinPoly(bM,bI,bP);break}}else{aE.Clipper.SwapSides(bM,bI)}}}}}}if((bJ!=bQ)&&((bJ&&(bM.outIdx>=0))||(bQ&&(bI.outIdx>=0)))){aE.Clipper.SwapSides(bM,bI);aE.Clipper.SwapPolyIndexes(bM,bI)}if(bJ){this.DeleteFromAEL(bM)}if(bQ){this.DeleteFromAEL(bI)}};aE.Clipper.prototype.DeleteFromAEL=function(bA){var bC=bA.prevInAEL;var bB=bA.nextInAEL;if(bC==null&&bB==null&&(bA!=this.m_ActiveEdges)){return}if(bC!=null){bC.nextInAEL=bB}else{this.m_ActiveEdges=bB}if(bB!=null){bB.prevInAEL=bC}bA.nextInAEL=null;bA.prevInAEL=null};aE.Clipper.prototype.DeleteFromSEL=function(bC){var bB=bC.prevInSEL;var bA=bC.nextInSEL;if(bB==null&&bA==null&&(bC!=this.m_SortedEdges)){return}if(bB!=null){bB.nextInSEL=bA}else{this.m_SortedEdges=bA}if(bA!=null){bA.prevInSEL=bB}bC.nextInSEL=null;bC.prevInSEL=null};aE.Clipper.prototype.UpdateEdgeIntoAEL=function(bA){if(bA.Value.nextInLML==null){aE.Error("UpdateEdgeIntoAEL: invalid call")}var bC=bA.Value.prevInAEL;var bB=bA.Value.nextInAEL;bA.Value.nextInLML.outIdx=bA.Value.outIdx;if(bC!=null){bC.nextInAEL=bA.Value.nextInLML}else{this.m_ActiveEdges=bA.Value.nextInLML}if(bB!=null){bB.prevInAEL=bA.Value.nextInLML}bA.Value.nextInLML.side=bA.Value.side;bA.Value.nextInLML.windDelta=bA.Value.windDelta;bA.Value.nextInLML.windCnt=bA.Value.windCnt;bA.Value.nextInLML.windCnt2=bA.Value.windCnt2;bA.Value=bA.Value.nextInLML;bA.Value.prevInAEL=bC;bA.Value.nextInAEL=bB;if(bA.Value.dx!=aE.ClipperBase.horizontal){this.InsertScanbeam(bA.Value.ytop)}};aE.Clipper.prototype.ProcessHorizontals=function(){var bA=this.m_SortedEdges;while(bA!=null){this.DeleteFromSEL(bA);this.ProcessHorizontal(bA);bA=this.m_SortedEdges}};aE.Clipper.prototype.ProcessHorizontal=function(bC){var bG;var bF,bA;if(bC.xcurr<bC.xtop){bF=bC.xcurr;bA=bC.xtop;bG=aE.Direction.dLeftToRight}else{bF=bC.xtop;bA=bC.xcurr;bG=aE.Direction.dRightToLeft}var bE;if(bC.nextInLML!=null){bE=null}else{bE=this.GetMaximaPair(bC)}var bD=this.GetNextInAEL(bC,bG);while(bD!=null){var bB=this.GetNextInAEL(bD,bG);if(bE!=null||((bG==aE.Direction.dLeftToRight)&&(bD.xcurr<=bA))||((bG==aE.Direction.dRightToLeft)&&(bD.xcurr>=bF))){if(bD.xcurr==bC.xtop&&bE==null){if(this.SlopesEqual(bD,bC.nextInLML,this.m_UseFullRange)){if(bC.outIdx>=0&&bD.outIdx>=0){this.AddJoin(bC.nextInLML,bD,bC.outIdx,-1)}break}else{if(bD.dx<bC.nextInLML.dx){break}}}if(bD==bE){if(bG==aE.Direction.dLeftToRight){this.IntersectEdges(bC,bD,new aE.IntPoint(bD.xcurr,bC.ycurr),0)}else{this.IntersectEdges(bD,bC,new aE.IntPoint(bD.xcurr,bC.ycurr),0)}if(bE.outIdx>=0){aE.Error("ProcessHorizontal error")}return}else{if(bD.dx==aE.ClipperBase.horizontal&&!this.IsMinima(bD)&&!(bD.xcurr>bD.xtop)){if(bG==aE.Direction.dLeftToRight){this.IntersectEdges(bC,bD,new aE.IntPoint(bD.xcurr,bC.ycurr),(this.IsTopHorz(bC,bD.xcurr))?aE.Protects.ipLeft:aE.Protects.ipBoth)}else{this.IntersectEdges(bD,bC,new aE.IntPoint(bD.xcurr,bC.ycurr),(this.IsTopHorz(bC,bD.xcurr))?aE.Protects.ipRight:aE.Protects.ipBoth)}}else{if(bG==aE.Direction.dLeftToRight){this.IntersectEdges(bC,bD,new aE.IntPoint(bD.xcurr,bC.ycurr),(this.IsTopHorz(bC,bD.xcurr))?aE.Protects.ipLeft:aE.Protects.ipBoth)}else{this.IntersectEdges(bD,bC,new aE.IntPoint(bD.xcurr,bC.ycurr),(this.IsTopHorz(bC,bD.xcurr))?aE.Protects.ipRight:aE.Protects.ipBoth)}}}this.SwapPositionsInAEL(bC,bD)}else{if((bG==aE.Direction.dLeftToRight&&bD.xcurr>bA&&bC.nextInSEL==null)||(bG==aE.Direction.dRightToLeft&&bD.xcurr<bF&&bC.nextInSEL==null)){break}}bD=bB}if(bC.nextInLML!=null){if(bC.outIdx>=0){this.AddOutPt(bC,new aE.IntPoint(bC.xtop,bC.ytop))}(function(){bC={Value:bC};var bH=this.UpdateEdgeIntoAEL(bC);bC=bC.Value;return bH}).call(this)}else{if(bC.outIdx>=0){this.IntersectEdges(bC,bE,new aE.IntPoint(bC.xtop,bC.ycurr),aE.Protects.ipBoth)}this.DeleteFromAEL(bE);this.DeleteFromAEL(bC)}};aE.Clipper.prototype.IsTopHorz=function(bB,bA){var bC=this.m_SortedEdges;while(bC!=null){if((bA>=Math.min(bC.xcurr,bC.xtop))&&(bA<=Math.max(bC.xcurr,bC.xtop))){return false}bC=bC.nextInSEL}return true};aE.Clipper.prototype.GetNextInAEL=function(bB,bA){return bA==aE.Direction.dLeftToRight?bB.nextInAEL:bB.prevInAEL};aE.Clipper.prototype.IsMinima=function(bA){return bA!=null&&(bA.prev.nextInLML!=bA)&&(bA.next.nextInLML!=bA)};aE.Clipper.prototype.IsMaxima=function(bA,bB){return(bA!=null&&bA.ytop==bB&&bA.nextInLML==null)};aE.Clipper.prototype.IsIntermediate=function(bA,bB){return(bA.ytop==bB&&bA.nextInLML!=null)};aE.Clipper.prototype.GetMaximaPair=function(bA){if(!this.IsMaxima(bA.next,bA.ytop)||(bA.next.xtop!=bA.xtop)){return bA.prev}else{return bA.next}};aE.Clipper.prototype.ProcessIntersections=function(bC,bA){if(this.m_ActiveEdges==null){return true}try{this.BuildIntersectList(bC,bA);if(this.m_IntersectNodes==null){return true}if(this.FixupIntersections()){this.ProcessIntersectList()}else{return false}}catch(bB){this.m_SortedEdges=null;this.DisposeIntersectNodes();aE.Error("ProcessIntersections error")}return true};aE.Clipper.prototype.BuildIntersectList=function(bF,bB){if(this.m_ActiveEdges==null){return}var bE=this.m_ActiveEdges;bE.tmpX=aE.Clipper.TopX(bE,bB);this.m_SortedEdges=bE;this.m_SortedEdges.prevInSEL=null;bE=bE.nextInAEL;while(bE!=null){bE.prevInSEL=bE.prevInAEL;bE.prevInSEL.nextInSEL=bE;bE.nextInSEL=null;bE.tmpX=aE.Clipper.TopX(bE,bB);bE=bE.nextInAEL}var bA=true;while(bA&&this.m_SortedEdges!=null){bA=false;bE=this.m_SortedEdges;while(bE.nextInSEL!=null){var bC=bE.nextInSEL;var bD=new aE.IntPoint();if(bE.tmpX>bC.tmpX&&(function(){bD={Value:bD};var bG=this.IntersectPoint(bE,bC,bD);bD=bD.Value;return bG}).call(this)){if(bD.y>bF){bD.y=bF;bD.x=aE.Clipper.TopX(bE,bD.y)}this.AddIntersectNode(bE,bC,bD);this.SwapPositionsInSEL(bE,bC);bA=true}else{bE=bC}}if(bE.prevInSEL!=null){bE.prevInSEL.nextInSEL=null}else{break}}this.m_SortedEdges=null};aE.Clipper.prototype.FixupIntersections=function(){if(this.m_IntersectNodes.next==null){return true}this.CopyAELToSEL();var bD=this.m_IntersectNodes;var bC=this.m_IntersectNodes.next;while(bC!=null){var bB=bD.edge1;var bA;if(bB.prevInSEL==bD.edge2){bA=bB.prevInSEL}else{if(bB.nextInSEL==bD.edge2){bA=bB.nextInSEL}else{while(bC!=null){if(bC.edge1.nextInSEL==bC.edge2||bC.edge1.prevInSEL==bC.edge2){break}else{bC=bC.next}}if(bC==null){return false}this.SwapIntersectNodes(bD,bC);bB=bD.edge1;bA=bD.edge2}}this.SwapPositionsInSEL(bB,bA);bD=bD.next;bC=bD.next}this.m_SortedEdges=null;return(bD.edge1.prevInSEL==bD.edge2||bD.edge1.nextInSEL==bD.edge2)};aE.Clipper.prototype.ProcessIntersectList=function(){while(this.m_IntersectNodes!=null){var bA=this.m_IntersectNodes.next;this.IntersectEdges(this.m_IntersectNodes.edge1,this.m_IntersectNodes.edge2,this.m_IntersectNodes.pt,aE.Protects.ipBoth);this.SwapPositionsInAEL(this.m_IntersectNodes.edge1,this.m_IntersectNodes.edge2);this.m_IntersectNodes=null;this.m_IntersectNodes=bA}};var aw=function(bA){return bA<0?Math.ceil(bA-0.5):Math.round(bA)};var av=function(bA){return bA<0?Math.ceil(bA-0.5):Math.floor(bA+0.5)};var au=function(bA){return bA<0?-Math.round(Math.abs(bA)):Math.round(bA)};var ar=function(bA){if(bA<0){bA-=0.5;return bA<-2147483648?Math.ceil(bA):bA|0}else{bA+=0.5;return bA>2147483647?Math.floor(bA):bA|0}};if(bc.msie){aE.Clipper.Round=aw}else{if(bc.chromium){aE.Clipper.Round=au}else{if(bc.safari){aE.Clipper.Round=ar}else{aE.Clipper.Round=av}}}aE.Clipper.TopX=function(bB,bA){if(bA==bB.ytop){return bB.xtop}return bB.xbot+aE.Clipper.Round(bB.dx*(bA-bB.ybot))};aE.Clipper.prototype.AddIntersectNode=function(bE,bD,bC){var bA=new aE.IntersectNode();bA.edge1=bE;bA.edge2=bD;bA.pt=bC;bA.next=null;if(this.m_IntersectNodes==null){this.m_IntersectNodes=bA}else{if(this.ProcessParam1BeforeParam2(bA,this.m_IntersectNodes)){bA.next=this.m_IntersectNodes;this.m_IntersectNodes=bA}else{var bB=this.m_IntersectNodes;while(bB.next!=null&&this.ProcessParam1BeforeParam2(bB.next,bA)){bB=bB.next}bA.next=bB.next;bB.next=bA}}};aE.Clipper.prototype.ProcessParam1BeforeParam2=function(bC,bB){var bA;if(bC.pt.y==bB.pt.y){if(bC.edge1==bB.edge1||bC.edge2==bB.edge1){bA=bB.pt.x>bC.pt.x;return bB.edge1.dx>0?!bA:bA}else{if(bC.edge1==bB.edge2||bC.edge2==bB.edge2){bA=bB.pt.x>bC.pt.x;return bB.edge2.dx>0?!bA:bA}else{return bB.pt.x>bC.pt.x}}}else{return bC.pt.y>bB.pt.y}};aE.Clipper.prototype.SwapIntersectNodes=function(bE,bD){var bC=bE.edge1;var bB=bE.edge2;var bA=bE.pt;bE.edge1=bD.edge1;bE.edge2=bD.edge2;bE.pt=bD.pt;bD.edge1=bC;bD.edge2=bB;bD.pt=bA};aE.Clipper.prototype.IntersectPoint=function(bC,bA,bF){var bD,bB;if(this.SlopesEqual(bC,bA,this.m_UseFullRange)){return false}else{if(bC.dx==0){bF.Value.x=bC.xbot;if(bA.dx==aE.ClipperBase.horizontal){bF.Value.y=bA.ybot}else{bB=bA.ybot-(bA.xbot/bA.dx);bF.Value.y=aE.Clipper.Round(bF.Value.x/bA.dx+bB)}}else{if(bA.dx==0){bF.Value.x=bA.xbot;if(bC.dx==aE.ClipperBase.horizontal){bF.Value.y=bC.ybot}else{bD=bC.ybot-(bC.xbot/bC.dx);bF.Value.y=aE.Clipper.Round(bF.Value.x/bC.dx+bD)}}else{bD=bC.xbot-bC.ybot*bC.dx;bB=bA.xbot-bA.ybot*bA.dx;var bE=(bB-bD)/(bC.dx-bA.dx);bF.Value.y=aE.Clipper.Round(bE);if(aE.Math_Abs_Double(bC.dx)<aE.Math_Abs_Double(bA.dx)){bF.Value.x=aE.Clipper.Round(bC.dx*bE+bD)}else{bF.Value.x=aE.Clipper.Round(bA.dx*bE+bB)}}}}if(bF.Value.y<bC.ytop||bF.Value.y<bA.ytop){if(bC.ytop>bA.ytop){bF.Value.x=bC.xtop;bF.Value.y=bC.ytop;return aE.Clipper.TopX(bA,bC.ytop)<bC.xtop}else{bF.Value.x=bA.xtop;bF.Value.y=bA.ytop;return aE.Clipper.TopX(bC,bA.ytop)>bA.xtop}}else{return true}};aE.Clipper.prototype.DisposeIntersectNodes=function(){while(this.m_IntersectNodes!=null){var bA=this.m_IntersectNodes.next;this.m_IntersectNodes=null;this.m_IntersectNodes=bA}};aE.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(bB){var bH=this.m_ActiveEdges;var bE;while(bH!=null){if(this.IsMaxima(bH,bB)&&this.GetMaximaPair(bH).dx!=aE.ClipperBase.horizontal){bE=bH.prevInAEL;this.DoMaxima(bH,bB);if(bE==null){bH=this.m_ActiveEdges}else{bH=bE.nextInAEL}}else{if(this.IsIntermediate(bH,bB)&&bH.nextInLML.dx==aE.ClipperBase.horizontal){if(bH.outIdx>=0){this.AddOutPt(bH,new aE.IntPoint(bH.xtop,bH.ytop));for(var bD=0;bD<this.m_HorizJoins.length;++bD){var bG=new aE.IntPoint(),bF=new aE.IntPoint();var bA=this.m_HorizJoins[bD];if((function(){bG={Value:bG};bF={Value:bF};var bI=this.GetOverlapSegment(new aE.IntPoint(bA.edge.xbot,bA.edge.ybot),new aE.IntPoint(bA.edge.xtop,bA.edge.ytop),new aE.IntPoint(bH.nextInLML.xbot,bH.nextInLML.ybot),new aE.IntPoint(bH.nextInLML.xtop,bH.nextInLML.ytop),bG,bF);bG=bG.Value;bF=bF.Value;return bI}).call(this)){this.AddJoin(bA.edge,bH.nextInLML,bA.savedIdx,bH.outIdx)}}this.AddHorzJoin(bH.nextInLML,bH.outIdx)}(function(){bH={Value:bH};var bI=this.UpdateEdgeIntoAEL(bH);bH=bH.Value;return bI}).call(this);this.AddEdgeToSEL(bH)}else{bH.xcurr=aE.Clipper.TopX(bH,bB);bH.ycurr=bB}bH=bH.nextInAEL}}this.ProcessHorizontals();bH=this.m_ActiveEdges;while(bH!=null){if(this.IsIntermediate(bH,bB)){if(bH.outIdx>=0){this.AddOutPt(bH,new aE.IntPoint(bH.xtop,bH.ytop))}(function(){bH={Value:bH};var bI=this.UpdateEdgeIntoAEL(bH);bH=bH.Value;return bI}).call(this);bE=bH.prevInAEL;var bC=bH.nextInAEL;if(bE!=null&&bE.xcurr==bH.xbot&&bE.ycurr==bH.ybot&&bH.outIdx>=0&&bE.outIdx>=0&&bE.ycurr>bE.ytop&&this.SlopesEqual(bH,bE,this.m_UseFullRange)){this.AddOutPt(bE,new aE.IntPoint(bH.xbot,bH.ybot));this.AddJoin(bH,bE,-1,-1)}else{if(bC!=null&&bC.xcurr==bH.xbot&&bC.ycurr==bH.ybot&&bH.outIdx>=0&&bC.outIdx>=0&&bC.ycurr>bC.ytop&&this.SlopesEqual(bH,bC,this.m_UseFullRange)){this.AddOutPt(bC,new aE.IntPoint(bH.xbot,bH.ybot));this.AddJoin(bH,bC,-1,-1)}}}bH=bH.nextInAEL}};aE.Clipper.prototype.DoMaxima=function(bD,bA){var bC=this.GetMaximaPair(bD);var bE=bD.xtop;var bB=bD.nextInAEL;while(bB!=bC){if(bB==null){aE.Error("DoMaxima error")}this.IntersectEdges(bD,bB,new aE.IntPoint(bE,bA),aE.Protects.ipBoth);bB=bB.nextInAEL}if(bD.outIdx<0&&bC.outIdx<0){this.DeleteFromAEL(bD);this.DeleteFromAEL(bC)}else{if(bD.outIdx>=0&&bC.outIdx>=0){this.IntersectEdges(bD,bC,new aE.IntPoint(bE,bA),aE.Protects.ipNone)}else{aE.Error("DoMaxima error")}}};aE.Clipper.ReversePolygons=function(bB){var bA=bB.length,bD;for(var bC=0;bC<bA;bC++){if(bB[bC] instanceof Array){bB[bC].reverse()}}};aE.Clipper.Orientation=function(bA){return this.Area(bA)>=0};aE.Clipper.prototype.PointCount=function(bC){if(bC==null){return 0}var bA=0;var bB=bC;do{bA++;bB=bB.next}while(bB!=bC);return bA};aE.Clipper.prototype.BuildResult=function(bB){aE.Clear(bB);var bG,bA=this.m_PolyOuts.length;for(var bE=0;bE<bA;bE++){bG=this.m_PolyOuts[bE];if(bG.pts==null){continue}var bF=bG.pts;var bD=this.PointCount(bF);if(bD<3){continue}var bH=new aE.Polygon(bD);for(var bC=0;bC<bD;bC++){bH.push(new aE.IntPoint(bF.pt.x,bF.pt.y));bF=bF.prev}bB.push(bH)}};aE.Clipper.prototype.BuildResultEx=function(bA){aE.Clear(bA);var bE=0;while(bE<this.m_PolyOuts.length){var bG=this.m_PolyOuts[bE++];if(bG.pts==null){break}var bF=bG.pts;var bD=this.PointCount(bF);if(bD<3){continue}var bB=new aE.ExPolygon();bB.outer=new aE.Polygon();bB.holes=new aE.Polygons();for(var bC=0;bC<bD;bC++){bB.outer.push(new aE.IntPoint(bF.pt.x,bF.pt.y));bF=bF.prev}while(bE<this.m_PolyOuts.length){bG=this.m_PolyOuts[bE];if(bG.pts==null||!bG.isHole){break}var bH=new aE.Polygon();bF=bG.pts;do{bH.push(new aE.IntPoint(bF.pt.x,bF.pt.y));bF=bF.prev}while(bF!=bG.pts);bB.holes.push(bH);bE++}bA.push(bB)}};aE.Clipper.prototype.FixupOutPolygon=function(bD){var bB=null;bD.pts=bD.bottomPt;var bA=bD.bottomPt;for(;;){if(bA.prev==bA||bA.prev==bA.next){this.DisposeOutPts(bA);bD.pts=null;bD.bottomPt=null;return}if(aE.ClipperBase.PointsEqual(bA.pt,bA.next.pt)||this.SlopesEqual(bA.prev.pt,bA.pt,bA.next.pt,this.m_UseFullRange)){bB=null;var bC=bA;if(bA==bD.bottomPt){bD.bottomPt=null}bA.prev.next=bA.next;bA.next.prev=bA.prev;bA=bA.prev;bC=null}else{if(bA==bB){break}else{if(bB==null){bB=bA}bA=bA.next}}}if(bD.bottomPt==null){bD.bottomPt=this.GetBottomPt(bA);bD.bottomPt.idx=bD.idx;bD.pts=bD.bottomPt}};aE.Clipper.prototype.JoinPoints=function(bC,bM,bK){bM.Value=null;bK.Value=null;var bA=this.m_PolyOuts[bC.poly1Idx];var bN=this.m_PolyOuts[bC.poly2Idx];if(bA==null||bN==null){return false}var bL=bA.pts;var bD=bN.pts;var bJ=bC.pt2a,bI=bC.pt2b;var bG=bC.pt1a,bE=bC.pt1b;if(!(function(){bL={Value:bL};bJ={Value:bJ};bI={Value:bI};var bO=this.FindSegment(bL,this.m_UseFullRange,bJ,bI);bL=bL.Value;bJ=bJ.Value;bI=bI.Value;return bO}).call(this)){return false}if(bA==bN){bD=bL.next;if(!(function(){bD={Value:bD};bG={Value:bG};bE={Value:bE};var bO=this.FindSegment(bD,this.m_UseFullRange,bG,bE);bD=bD.Value;bG=bG.Value;bE=bE.Value;return bO}).call(this)||(bD==bL)){return false}}else{if(!(function(){bD={Value:bD};bG={Value:bG};bE={Value:bE};var bO=this.FindSegment(bD,this.m_UseFullRange,bG,bE);bD=bD.Value;bG=bG.Value;bE=bE.Value;return bO}).call(this)){return false}}if(!(function(){bJ={Value:bJ};bI={Value:bI};var bO=this.GetOverlapSegment(bJ.Value,bI.Value,bG,bE,bJ,bI);bJ=bJ.Value;bI=bI.Value;return bO}).call(this)){return false}var bH,bF,bB=bL.prev;if(aE.ClipperBase.PointsEqual(bL.pt,bJ)){bM.Value=bL}else{if(aE.ClipperBase.PointsEqual(bB.pt,bJ)){bM.Value=bB}else{bM.Value=this.InsertPolyPtBetween(bL,bB,bJ)}}if(aE.ClipperBase.PointsEqual(bL.pt,bI)){bK.Value=bL}else{if(aE.ClipperBase.PointsEqual(bB.pt,bI)){bK.Value=bB}else{if((bM.Value==bL)||(bM.Value==bB)){bK.Value=this.InsertPolyPtBetween(bL,bB,bI)}else{if(this.Pt3IsBetweenPt1AndPt2(bL.pt,bM.Value.pt,bI)){bK.Value=this.InsertPolyPtBetween(bL,bM.Value,bI)}else{bK.Value=this.InsertPolyPtBetween(bM.Value,bB,bI)}}}}bB=bD.prev;if(aE.ClipperBase.PointsEqual(bD.pt,bJ)){bH=bD}else{if(aE.ClipperBase.PointsEqual(bB.pt,bJ)){bH=bB}else{bH=this.InsertPolyPtBetween(bD,bB,bJ)}}if(aE.ClipperBase.PointsEqual(bD.pt,bI)){bF=bD}else{if(aE.ClipperBase.PointsEqual(bB.pt,bI)){bF=bB}else{if((bH==bD)||(bH==bB)){bF=this.InsertPolyPtBetween(bD,bB,bI)}else{if(this.Pt3IsBetweenPt1AndPt2(bD.pt,bH.pt,bI)){bF=this.InsertPolyPtBetween(bD,bH,bI)}else{bF=this.InsertPolyPtBetween(bH,bB,bI)}}}}if(bM.Value.next==bK.Value&&bH.prev==bF){bM.Value.next=bH;bH.prev=bM.Value;bK.Value.prev=bF;bF.next=bK.Value;return true}else{if(bM.Value.prev==bK.Value&&bH.next==bF){bM.Value.prev=bH;bH.next=bM.Value;bK.Value.next=bF;bF.prev=bK.Value;return true}else{return false}}};aE.Clipper.prototype.FixupJoinRecs=function(bB,bE,bC){for(var bA=bC;bA<this.m_Joins.length;bA++){var bD=this.m_Joins[bA];if(bD.poly1Idx==bB.poly1Idx&&this.PointIsVertex(bD.pt1a,bE)){bD.poly1Idx=bB.poly2Idx}if(bD.poly2Idx==bB.poly1Idx&&this.PointIsVertex(bD.pt2a,bE)){bD.poly2Idx=bB.poly2Idx}}};aE.Clipper.prototype.JoinCommonEdges=function(){var bB,bC;for(var bF=0;bF<this.m_Joins.length;bF++){var bD=this.m_Joins[bF];var bI,bH;if(!(function(){bI={Value:bI};bH={Value:bH};var bL=this.JoinPoints(bD,bI,bH);bI=bI.Value;bH=bH.Value;return bL}).call(this)){continue}var bA=this.m_PolyOuts[bD.poly1Idx];var bK=this.m_PolyOuts[bD.poly2Idx];if(bA==bK){bA.pts=this.GetBottomPt(bI);bA.bottomPt=bA.pts;bA.bottomPt.idx=bA.idx;bK=this.CreateOutRec();this.m_PolyOuts.push(bK);bK.idx=this.m_PolyOuts.length-1;bD.poly2Idx=bK.idx;bK.pts=this.GetBottomPt(bH);bK.bottomPt=bK.pts;bK.bottomPt.idx=bK.idx;if(this.PointInPolygon(bK.pts.pt,bA.pts,this.m_UseFullRange)){bK.isHole=!bA.isHole;bK.FirstLeft=bA;this.FixupJoinRecs(bD,bH,bF+1);this.FixupOutPolygon(bA);this.FixupOutPolygon(bK);if((bK.isHole^this.m_ReverseOutput)==(this.Area(bK,this.m_UseFullRange)>0)){this.ReversePolyPtLinks(bK.pts)}}else{if(this.PointInPolygon(bA.pts.pt,bK.pts,this.m_UseFullRange)){bK.isHole=bA.isHole;bA.isHole=!bK.isHole;bK.FirstLeft=bA.FirstLeft;bA.FirstLeft=bK;this.FixupJoinRecs(bD,bH,bF+1);this.FixupOutPolygon(bA);this.FixupOutPolygon(bK);if((bA.isHole^this.m_ReverseOutput)==(this.Area(bA,this.m_UseFullRange)>0)){this.ReversePolyPtLinks(bA.pts)}if(this.m_UsingExPolygons&&bA.isHole){for(bB=0;bB<this.m_PolyOuts.length;++bB){bC=this.m_PolyOuts[bB];if(bC.isHole&&bC.bottomPt!=null&&bC.FirstLeft==bA){bC.FirstLeft=bK}}}}else{bK.isHole=bA.isHole;bK.FirstLeft=bA.FirstLeft;this.FixupJoinRecs(bD,bH,bF+1);this.FixupOutPolygon(bA);this.FixupOutPolygon(bK);if(this.m_UsingExPolygons&&bK.pts!=null){for(bB=0;bB<this.m_PolyOuts.length;++bB){bC=this.m_PolyOuts[bB];if(bC.isHole&&bC.bottomPt!=null&&bC.FirstLeft==bA&&this.PointInPolygon(bC.bottomPt.pt,bK.pts,this.m_UseFullRange)){bC.FirstLeft=bK}}}}}}else{if(this.m_UsingExPolygons){for(bB=0;bB<this.m_PolyOuts.length;++bB){if(this.m_PolyOuts[bB].isHole&&this.m_PolyOuts[bB].bottomPt!=null&&this.m_PolyOuts[bB].FirstLeft==bK){this.m_PolyOuts[bB].FirstLeft=bA}}}this.FixupOutPolygon(bA);if(bA.pts!=null){bA.isHole=this.Area(bA,this.m_UseFullRange)<0;if(bA.isHole&&bA.FirstLeft==null){bA.FirstLeft=bK.FirstLeft}}var bE=bA.idx;var bG=bK.idx;bK.pts=null;bK.bottomPt=null;bK.AppendLink=bA;for(bB=bF+1;bB<this.m_Joins.length;bB++){var bJ=this.m_Joins[bB];if(bJ.poly1Idx==bG){bJ.poly1Idx=bE}if(bJ.poly2Idx==bG){bJ.poly2Idx=bE}}}}};aE.Clipper.FullRangeNeeded=function(bC){var bA=false;for(var bB=0;bB<bC.length;bB++){if(aE.Math_Abs_Int64(bC[bB].x)>aE.ClipperBase.hiRange||aE.Math_Abs_Int64(bC[bB].y)>aE.ClipperBase.hiRange){aE.Error("Coordinate exceeds range bounds in FullRangeNeeded().")}else{if(aE.Math_Abs_Int64(bC[bB].x)>aE.ClipperBase.loRange||aE.Math_Abs_Int64(bC[bB].y)>aE.ClipperBase.loRange){bA=true}}}return bA};aE.Clipper.prototype.Area=aE.Clipper.Area=function(){var bH=arguments;var bD,bG;if(bH.length==1){var bA=bH[0];var bF=bA.length-1;if(bF<2){return 0}if(aE.Clipper.FullRangeNeeded(bA)){bG=new aZ(bA[bF].x+bA[0].x).multiply(new aZ(bA[0].y-bA[bF].y));for(bD=1;bD<=bF;++bD){bG=bG.add(new aZ(bA[bD-1].x+bA[bD].x).multiply(new aZ(bA[bD].y-bA[bD-1].y)))}return parseFloat(bG.toString())/2}else{var bB=(bA[bF].x+bA[0].x)*(bA[0].y-bA[bF].y);for(bD=1;bD<=bF;++bD){bB+=(bA[bD-1].x+bA[bD].x)*(bA[bD].y-bA[bD-1].y)}return bB/2}}else{if(bH.length==2){var bI=bH[0];var bC=bH[1];var bE=bI.pts;if(bE==null){return 0}if(bC){bG=new aZ(aZ.ZERO);do{bG=bG.add(new aZ(bE.pt.x+bE.prev.pt.x).multiply(new aZ(bE.prev.pt.y-bE.pt.y)));bE=bE.next}while(bE!=bI.pts);return parseFloat(bG.toString())/2}else{bG=0;do{bG=bG+(bE.pt.x+bE.prev.pt.x)*(bE.prev.pt.y-bE.pt.y);bE=bE.next}while(bE!=bI.pts);return bG/2}}}};aE.Clipper.BuildArc=function(bH,bC,bB,bA){var bF=Math.sqrt(aE.Math_Abs_Double(bA))*aE.Math_Abs_Double(bB-bC);bF=bF/4;if(bF<6){bF=6}if(bF>64){bF=aE.MaxSteps}var bD=aE.Cast_Int32(bF);var bJ=new aE.Polygon();var bI=(bB-bC)/(bD-1);var bG=bC;for(var bE=0;bE<bD;++bE){bJ.push(new aE.IntPoint(bH.x+aE.Clipper.Round(Math.cos(bG)*bA),bH.y+aE.Clipper.Round(Math.sin(bG)*bA)));bG+=bI}return bJ};aE.Clipper.GetUnitNormal=function(bE,bD){var bB=(bD.x-bE.x);var bA=(bD.y-bE.y);if((bB==0)&&(bA==0)){return new aE.Clipper.DoublePoint(0,0)}var bC=1/Math.sqrt(bB*bB+bA*bA);bB*=bC;bA*=bC;return new aE.Clipper.DoublePoint(bA,-bB)};aE.Clipper.prototype.OffsetPolygons=function(bD,bG,bB,bE,bF){var bC=arguments;if(bC.length==4){bF=true}else{if(bC.length==3){bE=2;bF=true}else{if(bC.length==2){bB=aE.JoinType.jtSquare;bE=2;bF=true}}}if(isNaN(bG)){aE.Error("Delta is not a number")}else{if(isNaN(bE)){aE.Error("MiterLimit is not a number")}}var bA={};new aE.Clipper.PolyOffsetBuilder(bD,bA,bG,bB,bE,bF);if(bA.Value){bA=bA.Value}else{bA=[[]]}return bA};aE.Clipper.prototype.SimplifyPolygon=function(bB,bD){var bA=new aE.Polygons();var bC=new aE.Clipper();if(bC.AddPolygon(bB,aE.PolyType.ptSubject)){bC.Execute(aE.ClipType.ctUnion,bA,bD,bD)}return bA};aE.Clipper.prototype.SimplifyPolygons=function(bB,bD){var bA=new aE.Polygons();var bC=new aE.Clipper();if(bC.AddPolygons(bB,aE.PolyType.ptSubject)){bC.Execute(aE.ClipType.ctUnion,bA,bD,bD)}return bA};var al=aE.Clipper;var O=aE.ClipperBase;var ao;if(typeof(Object.getOwnPropertyNames)=="undefined"){for(ao in O.prototype){if(typeof(al.prototype[ao])=="undefined"||al.prototype[ao]==Object.prototype[ao]){al.prototype[ao]=O.prototype[ao]}}for(ao in O){if(typeof(al[ao])=="undefined"){al[ao]=O[ao]}}al.$baseCtor=O}else{var aN=Object.getOwnPropertyNames(O.prototype);for(var ay=0;ay<aN.length;ay++){if(typeof(Object.getOwnPropertyDescriptor(al.prototype,aN[ay]))=="undefined"){Object.defineProperty(al.prototype,aN[ay],Object.getOwnPropertyDescriptor(O.prototype,aN[ay]))}}for(ao in O){if(typeof(al[ao])=="undefined"){al[ao]=O[ao]}}al.$baseCtor=O}aE.Clipper.DoublePoint=function(bA,bB){this.x=bA;this.y=bB};aE.Clipper.PolyOffsetBuilder=function(bQ,bL,bO,bI,bE,bK){this.pts=null;this.currentPoly=null;this.normals=null;this.delta=0;this.m_R=0;this.m_i=0;this.m_j=0;this.m_k=0;this.botPt=null;if(bO==0){bL.Value=bQ;return}this.pts=bQ;this.delta=bO;var bG,bF;if(bK){var bJ=this.pts.length,bC=0;while(bC<bJ&&this.pts[bC].length==0){bC++}if(bC==bJ){return}this.botPt=this.pts[bC][0];for(bG=bC;bG<bJ;++bG){if(this.UpdateBotPt(this.pts[bG][0])){bC=bG}for(bF=this.pts[bG].length-1;bF>0;bF--){if(aE.ClipperBase.PointsEqual(this.pts[bG][bF],this.pts[bG][bF-1])){this.pts[bG].splice(bF,1)}else{if(this.UpdateBotPt(this.pts[bG][bF])){bC=bG}}}}if(!aE.Clipper.Orientation(this.pts[bC])){aE.Clipper.ReversePolygons(this.pts)}}if(bE<=1){bE=1}var bB=2/(bE*bE);this.normals=[];var bN=bO*bO;bL.Value=new aE.Polygons();var bH;for(this.m_i=0;this.m_i<this.pts.length;this.m_i++){bH=this.pts[this.m_i].length;if(bH>1&&this.pts[this.m_i][0].x==this.pts[this.m_i][bH-1].x&&this.pts[this.m_i][0].y==this.pts[this.m_i][bH-1].y){bH--}if(bH==0||(bH<3&&bO<=0)){continue}else{if(bH==1){var bD;bD=aE.Clipper.BuildArc(this.pts[this.m_i][bH-1],0,aE.PI2,bO);bL.Value.push(bD);continue}}aE.Clear(this.normals);for(bF=0;bF<bH-1;++bF){this.normals.push(aE.Clipper.GetUnitNormal(this.pts[this.m_i][bF],this.pts[this.m_i][bF+1]))}this.normals.push(aE.Clipper.GetUnitNormal(this.pts[this.m_i][bH-1],this.pts[this.m_i][0]));this.currentPoly=new aE.Polygon();this.m_k=bH-1;for(this.m_j=0;this.m_j<bH;++this.m_j){switch(bI){case aE.JoinType.jtMiter:this.m_R=1+(this.normals[this.m_j].x*this.normals[this.m_k].x+this.normals[this.m_j].y*this.normals[this.m_k].y);if(this.m_R>=bB){this.DoMiter()}else{this.DoSquare(bE)}break;case aE.JoinType.jtRound:this.DoRound();break;case aE.JoinType.jtSquare:this.DoSquare(1);break}this.m_k=this.m_j}bL.Value.push(this.currentPoly)}var bM=new aE.Clipper();bM.AddPolygons(bL.Value,aE.PolyType.ptSubject);if(bO>0){bM.Execute(aE.ClipType.ctUnion,bL.Value,aE.PolyFillType.pftPositive,aE.PolyFillType.pftPositive)}else{var bA=bM.GetBounds();var bP=new aE.Polygon();bP.push(new aE.IntPoint(bA.left-10,bA.bottom+10));bP.push(new aE.IntPoint(bA.right+10,bA.bottom+10));bP.push(new aE.IntPoint(bA.right+10,bA.top-10));bP.push(new aE.IntPoint(bA.left-10,bA.top-10));bM.AddPolygon(bP,aE.PolyType.ptSubject);bM.Execute(aE.ClipType.ctUnion,bL.Value,aE.PolyFillType.pftNegative,aE.PolyFillType.pftNegative);if(bL.Value.length>0){bL.Value.splice(0,1);for(bG=0;bG<bL.Value.length;bG++){bL.Value[bG].reverse()}}}};aE.Clipper.PolyOffsetBuilder.prototype.UpdateBotPt=function(bA){if(bA.y>this.botPt.y||(bA.y==this.botPt.y&&bA.x<this.botPt.x)){this.botPt=bA;return true}else{return false}};aE.Clipper.PolyOffsetBuilder.prototype.AddPoint=function(bA){this.currentPoly.push(bA)};aE.Clipper.PolyOffsetBuilder.prototype.DoSquare=function(bE){var bF=new aE.IntPoint(aE.Cast_Int64(aE.Clipper.Round(this.pts[this.m_i][this.m_j].x+this.normals[this.m_k].x*this.delta)),aE.Cast_Int64(aE.Clipper.Round(this.pts[this.m_i][this.m_j].y+this.normals[this.m_k].y*this.delta)));var bD=new aE.IntPoint(aE.Cast_Int64(aE.Clipper.Round(this.pts[this.m_i][this.m_j].x+this.normals[this.m_j].x*this.delta)),aE.Cast_Int64(aE.Clipper.Round(this.pts[this.m_i][this.m_j].y+this.normals[this.m_j].y*this.delta)));if((this.normals[this.m_k].x*this.normals[this.m_j].y-this.normals[this.m_j].x*this.normals[this.m_k].y)*this.delta>=0){var bB=Math.atan2(this.normals[this.m_k].y,this.normals[this.m_k].x);var bA=Math.atan2(-this.normals[this.m_j].y,-this.normals[this.m_j].x);bB=Math.abs(bA-bB);if(bB>aE.PI){bB=aE.PI2-bB}var bC=Math.tan((aE.PI-bB)/4)*Math.abs(this.delta*bE);bF=new aE.IntPoint(aE.Cast_Int64((bF.x-this.normals[this.m_k].y*bC)),aE.Cast_Int64((bF.y+this.normals[this.m_k].x*bC)));this.AddPoint(bF);bD=new aE.IntPoint(aE.Cast_Int64((bD.x+this.normals[this.m_j].y*bC)),aE.Cast_Int64((bD.y-this.normals[this.m_j].x*bC)));this.AddPoint(bD)}else{this.AddPoint(bF);this.AddPoint(this.pts[this.m_i][this.m_j]);this.AddPoint(bD)}};aE.Clipper.PolyOffsetBuilder.prototype.DoMiter=function(){if((this.normals[this.m_k].x*this.normals[this.m_j].y-this.normals[this.m_j].x*this.normals[this.m_k].y)*this.delta>=0){var bA=this.delta/this.m_R;this.AddPoint(new aE.IntPoint(aE.Cast_Int64(aE.Clipper.Round(this.pts[this.m_i][this.m_j].x+(this.normals[this.m_k].x+this.normals[this.m_j].x)*bA)),aE.Cast_Int64(aE.Clipper.Round(this.pts[this.m_i][this.m_j].y+(this.normals[this.m_k].y+this.normals[this.m_j].y)*bA))))}else{var bC=new aE.IntPoint(aE.Cast_Int64(aE.Clipper.Round(this.pts[this.m_i][this.m_j].x+this.normals[this.m_k].x*this.delta)),aE.Cast_Int64(aE.Clipper.Round(this.pts[this.m_i][this.m_j].y+this.normals[this.m_k].y*this.delta)));var bB=new aE.IntPoint(aE.Cast_Int64(aE.Clipper.Round(this.pts[this.m_i][this.m_j].x+this.normals[this.m_j].x*this.delta)),aE.Cast_Int64(aE.Clipper.Round(this.pts[this.m_i][this.m_j].y+this.normals[this.m_j].y*this.delta)));this.AddPoint(bC);this.AddPoint(this.pts[this.m_i][this.m_j]);this.AddPoint(bB)}};aE.Clipper.PolyOffsetBuilder.prototype.DoRound=function(){var bF=new aE.IntPoint(aE.Clipper.Round(this.pts[this.m_i][this.m_j].x+this.normals[this.m_k].x*this.delta),aE.Clipper.Round(this.pts[this.m_i][this.m_j].y+this.normals[this.m_k].y*this.delta));var bE=new aE.IntPoint(aE.Clipper.Round(this.pts[this.m_i][this.m_j].x+this.normals[this.m_j].x*this.delta),aE.Clipper.Round(this.pts[this.m_i][this.m_j].y+this.normals[this.m_j].y*this.delta));this.AddPoint(bF);if((this.normals[this.m_k].x*this.normals[this.m_j].y-this.normals[this.m_j].x*this.normals[this.m_k].y)*this.delta>=0){if((this.normals[this.m_j].x*this.normals[this.m_k].x+this.normals[this.m_j].y*this.normals[this.m_k].y)<0.985){var bC=Math.atan2(this.normals[this.m_k].y,this.normals[this.m_k].x);var bB=Math.atan2(this.normals[this.m_j].y,this.normals[this.m_j].x);if(this.delta>0&&bB<bC){bB+=aE.PI2}else{if(this.delta<0&&bB>bC){bB-=aE.PI2}}var bD=aE.Clipper.BuildArc(this.pts[this.m_i][this.m_j],bC,bB,this.delta);for(var bA=0;bA<bD.length;bA++){this.AddPoint(bD[bA])}}}else{this.AddPoint(this.pts[this.m_i][this.m_j])}this.AddPoint(bE)};aE.Error=function(bB){try{throw new Error(bB)}catch(bA){alert(bA.message)}};aE.Clone=function(bF){if(!(bF instanceof Array)){return[]}if(bF.length==0){return[]}else{if(bF.length==1&&bF[0].length==0){return[[]]}}var bH=bF[0] instanceof Array;if(!bH){bF=[bF]}var bB=bF.length,bG,bE,bC,bA;var bD=[];for(bE=0;bE<bB;bE++){bG=bF[bE].length;bA=[];for(bC=0;bC<bG;bC++){bA.push({x:bF[bE][bC].x,y:bF[bE][bC].y})}bD.push(bA)}if(!bH){bD=bD[0]}return bD};aE.Clean=function(bK,bL){if(!(bK instanceof Array)){return[]}var bC=bK[0] instanceof Array;var bK=aE.Clone(bK);if(typeof bL!="number"||bL===null){aE.Error("Delta is not a number in Clean().");return bK}if(bK.length==0||(bK.length==1&&bK[0].length==0)||bL<0){return bK}if(!bC){bK=[bK]}var bH=bK.length;var bI,bA,bM,bJ,bB,bE,bG;var bF=[];for(var bD=0;bD<bH;bD++){bA=bK[bD];bI=bA.length;if(bI==0){continue}else{if(bI<3){bM=bA;bF.push(bM);continue}}bM=bA;bJ=bL*bL;bB=bA[0];bE=1;for(bG=1;bG<bI;bG++){if((bA[bG].x-bB.x)*(bA[bG].x-bB.x)+(bA[bG].y-bB.y)*(bA[bG].y-bB.y)<=bJ){continue}bM[bE]=bA[bG];bB=bA[bG];bE++}bB=bA[bE-1];if((bA[0].x-bB.x)*(bA[0].x-bB.x)+(bA[0].y-bB.y)*(bA[0].y-bB.y)<=bJ){bE--}if(bE<bI){bM.splice(bE,bI-bE)}if(bM.length){bF.push(bM)}}if(!bC&&bF.length){bF=bF[0]}else{if(!bC&&bF.length==0){bF=[]}else{if(bC&&bF.length==0){bF=[[]]}}}return bF};aE.Lighten=function(bG,bP){if(!(bG instanceof Array)){return[]}if(typeof bP!="number"||bP===null){aE.Error("Tolerance is not a number in Lighten().");return aE.Clone(bG)}if(bG.length===0||(bG.length==1&&bG[0].length===0)||bP<0){return aE.Clone(bG)}if(!(bG[0] instanceof Array)){bG=[bG]}var bN,bM,bC,bL,bH,bF,bJ,bI,bD,bR,bB,bA;var bE,bS,bQ;var bO=bG.length;var bK=[];for(bN=0;bN<bO;bN++){bC=bG[bN];for(bL=0;bL<1000000;bL++){bH=[];bF=bC.length;if(bC[bF-1].x!=bC[0].x||bC[bF-1].y!=bC[0].y){bA=1;bC.push({x:bC[0].x,y:bC[0].y});bF=bC.length}else{bA=0}bB=[];for(bM=0;bM<bF-2;bM++){bJ=bC[bM];bD=bC[bM+1];bI=bC[bM+2];bE=bI.x-bJ.x;bS=bI.y-bJ.y;bR=0;if(bE!==0||bS!==0){bQ=Math.sqrt(bE*bE+bS*bS);bR=Math.abs((bD.x-bJ.x)*bS-(bD.y-bJ.y)*bE)/bQ}if(bR<=bP){bB[bM+1]=1;bM++}}bH.push({x:bC[0].x,y:bC[0].y});for(bM=1;bM<bF-1;bM++){if(!bB[bM]){bH.push({x:bC[bM].x,y:bC[bM].y})}}bH.push({x:bC[bF-1].x,y:bC[bF-1].y});if(bA){bC.pop()}if(!bB.length){break}else{bC=bH}}bF=bH.length;if(bH[bF-1].x==bH[0].x&&bH[bF-1].y==bH[0].y){bH.pop()}if(bH.length>2){bK.push(bH)}}if(!bG[0] instanceof Array){bK=bK[0]}if(typeof(bK)=="undefined"){bK=[[]]}return bK};if(typeof(document)!=="undefined"){window.ClipperLib=aE}else{self.ClipperLib=aE}})();(function(u){var E=u.poly2tri;var g;if(typeof exports!=="undefined"){g=exports}else{g=u.poly2tri={}}g.noConflict=function(){u.poly2tri=E;return this};var r=function(H,G){this.name="PointError";this.points=G=G||[];this.message=H||"Invalid Points!";for(var F=0;F<G.length;F++){this.message+=" "+D.toString(G[F])}};r.prototype=new Error();r.prototype.constructor=r;var D=function(F,G){this.x=+F||0;this.y=+G||0;this._p2t_edge_list=null};D.prototype.toString=function(){return("("+this.x+";"+this.y+")")};D.prototype.clone=function(){return new D(this.x,this.y)};D.prototype.set_zero=function(){this.x=0;this.y=0;return this};D.prototype.set=function(F,G){this.x=+F||0;this.y=+G||0;return this};D.prototype.negate=function(){this.x=-this.x;this.y=-this.y;return this};D.prototype.add=function(F){this.x+=F.x;this.y+=F.y;return this};D.prototype.sub=function(F){this.x-=F.x;this.y-=F.y;return this};D.prototype.mul=function(F){this.x*=F;this.y*=F;return this};D.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};D.prototype.normalize=function(){var F=this.length();this.x/=F;this.y/=F;return F};D.prototype.equals=function(F){return this.x===F.x&&this.y===F.y};D.negate=function(F){return new D(-F.x,-F.y)};D.add=function(G,F){return new D(G.x+F.x,G.y+F.y)};D.sub=function(G,F){return new D(G.x-F.x,G.y-F.y)};D.mul=function(F,G){return new D(F*G.x,F*G.y)};D.cross=function(G,F){if(typeof(G)==="number"){if(typeof(F)==="number"){return G*F}else{return new D(-G*F.y,G*F.x)}}else{if(typeof(F)==="number"){return new D(F*G.y,-F*G.x)}else{return G.x*F.y-G.y*F.x}}};D.toString=function(G){var F=G.toString();return(F==="[object Object]"?D.prototype.toString.call(G):F)};D.compare=function(G,F){if(G.y===F.y){return G.x-F.x}else{return G.y-F.y}};D.cmp=D.compare;D.equals=function(G,F){return G.x===F.x&&G.y===F.y};D.dot=function(G,F){return G.x*F.x+G.y*F.y};var k=function(G,F){this.p=G;this.q=F;if(G.y>F.y){this.q=G;this.p=F}else{if(G.y===F.y){if(G.x>F.x){this.q=G;this.p=F}else{if(G.x===F.x){throw new r("poly2tri Invalid Edge constructor: repeated points!",[G])}}}}if(!this.q._p2t_edge_list){this.q._p2t_edge_list=[]}this.q._p2t_edge_list.push(this)};var y=function(G,F,H){this.points_=[G,F,H];this.neighbors_=[null,null,null];this.interior_=false;this.constrained_edge=[false,false,false];this.delaunay_edge=[false,false,false]};y.prototype.toString=function(){var F=D.toString;return("["+F(this.points_[0])+F(this.points_[1])+F(this.points_[2])+"]")};y.prototype.getPoint=function(F){return this.points_[F]};y.prototype.GetPoint=y.prototype.getPoint;y.prototype.getNeighbor=function(F){return this.neighbors_[F]};y.prototype.containsPoint=function(F){var G=this.points_;return(F===G[0]||F===G[1]||F===G[2])};y.prototype.containsEdge=function(F){return this.containsPoint(F.p)&&this.containsPoint(F.q)};y.prototype.containsPoints=function(G,F){return this.containsPoint(G)&&this.containsPoint(F)};y.prototype.isInterior=function(){return this.interior_};y.prototype.setInterior=function(F){this.interior_=F;return this};y.prototype.markNeighborPointers=function(I,H,F){var G=this.points_;if((I===G[2]&&H===G[1])||(I===G[1]&&H===G[2])){this.neighbors_[0]=F}else{if((I===G[0]&&H===G[2])||(I===G[2]&&H===G[0])){this.neighbors_[1]=F}else{if((I===G[0]&&H===G[1])||(I===G[1]&&H===G[0])){this.neighbors_[2]=F}else{throw new Error("poly2tri Invalid Triangle.markNeighborPointers() call")}}}};y.prototype.markNeighbor=function(F){var G=this.points_;if(F.containsPoints(G[1],G[2])){this.neighbors_[0]=F;F.markNeighborPointers(G[1],G[2],this)}else{if(F.containsPoints(G[0],G[2])){this.neighbors_[1]=F;F.markNeighborPointers(G[0],G[2],this)}else{if(F.containsPoints(G[0],G[1])){this.neighbors_[2]=F;F.markNeighborPointers(G[0],G[1],this)}}}};y.prototype.clearNeigbors=function(){this.neighbors_[0]=null;this.neighbors_[1]=null;this.neighbors_[2]=null};y.prototype.clearDelunayEdges=function(){this.delaunay_edge[0]=false;this.delaunay_edge[1]=false;this.delaunay_edge[2]=false};y.prototype.pointCW=function(G){var F=this.points_;if(G===F[0]){return F[2]}else{if(G===F[1]){return F[0]}else{if(G===F[2]){return F[1]}else{return null}}}};y.prototype.pointCCW=function(G){var F=this.points_;if(G===F[0]){return F[1]}else{if(G===F[1]){return F[2]}else{if(G===F[2]){return F[0]}else{return null}}}};y.prototype.neighborCW=function(F){if(F===this.points_[0]){return this.neighbors_[1]}else{if(F===this.points_[1]){return this.neighbors_[2]}else{return this.neighbors_[0]}}};y.prototype.neighborCCW=function(F){if(F===this.points_[0]){return this.neighbors_[2]}else{if(F===this.points_[1]){return this.neighbors_[0]}else{return this.neighbors_[1]}}};y.prototype.getConstrainedEdgeCW=function(F){if(F===this.points_[0]){return this.constrained_edge[1]}else{if(F===this.points_[1]){return this.constrained_edge[2]}else{return this.constrained_edge[0]}}};y.prototype.getConstrainedEdgeCCW=function(F){if(F===this.points_[0]){return this.constrained_edge[2]}else{if(F===this.points_[1]){return this.constrained_edge[0]}else{return this.constrained_edge[1]}}};y.prototype.setConstrainedEdgeCW=function(G,F){if(G===this.points_[0]){this.constrained_edge[1]=F}else{if(G===this.points_[1]){this.constrained_edge[2]=F}else{this.constrained_edge[0]=F}}};y.prototype.setConstrainedEdgeCCW=function(G,F){if(G===this.points_[0]){this.constrained_edge[2]=F}else{if(G===this.points_[1]){this.constrained_edge[0]=F}else{this.constrained_edge[1]=F}}};y.prototype.getDelaunayEdgeCW=function(F){if(F===this.points_[0]){return this.delaunay_edge[1]}else{if(F===this.points_[1]){return this.delaunay_edge[2]}else{return this.delaunay_edge[0]}}};y.prototype.getDelaunayEdgeCCW=function(F){if(F===this.points_[0]){return this.delaunay_edge[2]}else{if(F===this.points_[1]){return this.delaunay_edge[0]}else{return this.delaunay_edge[1]}}};y.prototype.setDelaunayEdgeCW=function(G,F){if(G===this.points_[0]){this.delaunay_edge[1]=F}else{if(G===this.points_[1]){this.delaunay_edge[2]=F}else{this.delaunay_edge[0]=F}}};y.prototype.setDelaunayEdgeCCW=function(G,F){if(G===this.points_[0]){this.delaunay_edge[2]=F}else{if(G===this.points_[1]){this.delaunay_edge[0]=F}else{this.delaunay_edge[1]=F}}};y.prototype.neighborAcross=function(F){if(F===this.points_[0]){return this.neighbors_[0]}else{if(F===this.points_[1]){return this.neighbors_[1]}else{return this.neighbors_[2]}}};y.prototype.oppositePoint=function(G,H){var F=G.pointCW(H);return this.pointCW(F)};y.prototype.legalize=function(F,G){var H=this.points_;if(F===H[0]){H[1]=H[0];H[0]=H[2];H[2]=G}else{if(F===H[1]){H[2]=H[1];H[1]=H[0];H[0]=G}else{if(F===H[2]){H[0]=H[2];H[2]=H[1];H[1]=G}else{throw new Error("poly2tri Invalid Triangle.legalize() call")}}}};y.prototype.index=function(G){var F=this.points_;if(G===F[0]){return 0}else{if(G===F[1]){return 1}else{if(G===F[2]){return 2}else{throw new Error("poly2tri Invalid Triangle.index() call")}}}};y.prototype.edgeIndex=function(H,G){var F=this.points_;if(H===F[0]){if(G===F[1]){return 2}else{if(G===F[2]){return 1}}}else{if(H===F[1]){if(G===F[2]){return 0}else{if(G===F[0]){return 2}}}else{if(H===F[2]){if(G===F[0]){return 1}else{if(G===F[1]){return 0}}}}}return -1};y.prototype.markConstrainedEdgeByIndex=function(F){this.constrained_edge[F]=true};y.prototype.markConstrainedEdgeByEdge=function(F){this.markConstrainedEdgeByPoints(F.p,F.q)};y.prototype.markConstrainedEdgeByPoints=function(H,G){var F=this.points_;if((G===F[0]&&H===F[1])||(G===F[1]&&H===F[0])){this.constrained_edge[2]=true}else{if((G===F[0]&&H===F[2])||(G===F[2]&&H===F[0])){this.constrained_edge[1]=true}else{if((G===F[1]&&H===F[2])||(G===F[2]&&H===F[1])){this.constrained_edge[0]=true}}}};var B=3*Math.PI/4;var m=Math.PI/2;var q=1e-12;var n=0.3;var A={CW:1,CCW:-1,COLLINEAR:0};function v(H,G,F){var J=(H.x-F.x)*(G.y-F.y);var I=(H.y-F.y)*(G.x-F.x);var K=J-I;if(K>-(q)&&K<(q)){return A.COLLINEAR}else{if(K>0){return A.CCW}else{return A.CW}}}function e(H,G,F,W){var Q=W.x;var P=W.y;var K=H.x-Q;var J=H.y-P;var U=G.x-Q;var T=G.y-P;var I=K*T;var S=U*J;var O=I-S;if(O<=(q)){return false}var N=F.x-Q;var M=F.y-P;var V=N*J;var R=K*M;var L=V-R;if(L<=(q)){return false}return true}var C=function(G,F){this.point=G;this.triangle=F||null;this.next=null;this.prev=null;this.value=G.x};var j=function(G,F){this.head_=G;this.tail_=F;this.search_node_=G};j.prototype.head=function(){return this.head_};j.prototype.setHead=function(F){this.head_=F};j.prototype.tail=function(){return this.tail_};j.prototype.setTail=function(F){this.tail_=F};j.prototype.search=function(){return this.search_node_};j.prototype.setSearch=function(F){this.search_node_=F};j.prototype.findSearchNode=function(){return this.search_node_};j.prototype.locateNode=function(F){var G=this.search_node_;if(F<G.value){while(G=G.prev){if(F>=G.value){this.search_node_=G;return G}}}else{while(G=G.next){if(F<G.value){this.search_node_=G.prev;return G.prev}}}return null};j.prototype.locatePoint=function(G){var H=G.x;var I=this.findSearchNode(H);var F=I.point.x;if(H===F){if(G!==I.point){if(G===I.prev.point){I=I.prev}else{if(G===I.next.point){I=I.next}else{throw new Error("poly2tri Invalid AdvancingFront.locatePoint() call")}}}}else{if(H<F){while(I=I.prev){if(G===I.point){break}}}else{while(I=I.next){if(G===I.point){break}}}}if(I){this.search_node_=I}return I};var d=function(){this.left_node=null;this.bottom_node=null;this.right_node=null;this.width=0;this.left_highest=false};d.prototype.clear=function(){this.left_node=null;this.bottom_node=null;this.right_node=null;this.width=0;this.left_highest=false};var f=function(){this.constrained_edge=null;this.right=false};var b=function(G,F){F=F||{};this.triangles_=[];this.map_=[];this.points_=(F.cloneArrays?G.slice(0):G);this.edge_list=[];this.pmin_=this.pmax_=null;this.front_=null;this.head_=null;this.tail_=null;this.af_head_=null;this.af_middle_=null;this.af_tail_=null;this.basin=new d();this.edge_event=new f();this.initEdges(this.points_)};b.prototype.addHole=function(G){this.initEdges(G);var H,F=G.length;for(H=0;H<F;H++){this.points_.push(G[H])}return this};b.prototype.AddHole=b.prototype.addHole;b.prototype.addPoint=function(F){this.points_.push(F);return this};b.prototype.AddPoint=b.prototype.addPoint;b.prototype.addPoints=function(F){this.points_=this.points_.concat(F);return this};b.prototype.triangulate=function(){z.triangulate(this);return this};b.prototype.getBoundingBox=function(){return{min:this.pmin_,max:this.pmax_}};b.prototype.getTriangles=function(){return this.triangles_};b.prototype.GetTriangles=b.prototype.getTriangles;b.prototype.front=function(){return this.front_};b.prototype.pointCount=function(){return this.points_.length};b.prototype.head=function(){return this.head_};b.prototype.setHead=function(F){this.head_=F};b.prototype.tail=function(){return this.tail_};b.prototype.setTail=function(F){this.tail_=F};b.prototype.getMap=function(){return this.map_};b.prototype.initTriangulation=function(){var J=this.points_[0].x;var F=this.points_[0].x;var H=this.points_[0].y;var L=this.points_[0].y;var I,K=this.points_.length;for(I=1;I<K;I++){var G=this.points_[I];(G.x>J)&&(J=G.x);(G.x<F)&&(F=G.x);(G.y>H)&&(H=G.y);(G.y<L)&&(L=G.y)}this.pmin_=new D(F,L);this.pmax_=new D(J,H);var N=n*(J-F);var M=n*(H-L);this.head_=new D(J+N,L-M);this.tail_=new D(F-N,L-M);this.points_.sort(D.compare)};b.prototype.initEdges=function(G){var H,F=G.length;for(H=0;H<F;++H){this.edge_list.push(new k(G[H],G[(H+1)%F]))}};b.prototype.getPoint=function(F){return this.points_[F]};b.prototype.addToMap=function(F){this.map_.push(F)};b.prototype.locateNode=function(F){return this.front_.locateNode(F.x)};b.prototype.createAdvancingFront=function(){var H;var G;var F;var I=new y(this.points_[0],this.tail_,this.head_);this.map_.push(I);H=new C(I.getPoint(1),I);G=new C(I.getPoint(0),I);F=new C(I.getPoint(2));this.front_=new j(H,F);H.next=G;G.next=F;G.prev=H;F.prev=G};b.prototype.removeNode=function(F){};b.prototype.mapTriangleToNodes=function(G){for(var F=0;F<3;++F){if(!G.getNeighbor(F)){var H=this.front_.locatePoint(G.pointCW(G.getPoint(F)));if(H){H.triangle=G}}}};b.prototype.removeFromMap=function(I){var G,H=this.map_,F=H.length;for(G=0;G<F;G++){if(H[G]===I){H.splice(G,1);break}}};b.prototype.meshClean=function(I){var H=[I],G,F;while(G=H.pop()){if(!G.isInterior()){G.setInterior(true);this.triangles_.push(G);for(F=0;F<3;F++){if(!G.constrained_edge[F]){H.push(G.getNeighbor(F))}}}}};var z={};z.triangulate=function(F){F.initTriangulation();F.createAdvancingFront();z.sweepPoints(F);z.finalizationPolygon(F)};z.sweepPoints=function(L){var J,G=L.pointCount();for(J=1;J<G;++J){var F=L.getPoint(J);var K=z.pointEvent(L,F);var H=F._p2t_edge_list;for(var I=0;H&&I<H.length;++I){z.edgeEventByEdge(L,H[I],K)}}};z.finalizationPolygon=function(H){var F=H.front().head().next.triangle;var G=H.front().head().next.point;while(!F.getConstrainedEdgeCW(G)){F=F.neighborCCW(G)}H.meshClean(F)};z.pointEvent=function(H,F){var G=H.locateNode(F);var I=z.newFrontTriangle(H,F,G);if(F.x<=G.point.x+(q)){z.fill(H,G)}z.fillAdvancingFront(H,I);return I};z.edgeEventByEdge=function(H,G,F){H.edge_event.constrained_edge=G;H.edge_event.right=(G.p.x>G.q.x);if(z.isEdgeSideOfTriangle(F.triangle,G.p,G.q)){return}z.fillEdgeEvent(H,G,F);z.edgeEventByPoints(H,G.p,G.q,F.triangle,G.q)};z.edgeEventByPoints=function(I,N,M,H,J){if(z.isEdgeSideOfTriangle(H,N,M)){return}var L=H.pointCCW(J);var G=v(M,L,N);if(G===A.COLLINEAR){throw new r("poly2tri EdgeEvent: Collinear not supported!",[M,L,N])}var K=H.pointCW(J);var F=v(M,K,N);if(F===A.COLLINEAR){throw new r("poly2tri EdgeEvent: Collinear not supported!",[M,K,N])}if(G===F){if(G===A.CW){H=H.neighborCCW(J)}else{H=H.neighborCW(J)}z.edgeEventByPoints(I,N,M,H,J)}else{z.flipEdgeEvent(I,N,M,H,J)}};z.isEdgeSideOfTriangle=function(J,G,F){var H=J.edgeIndex(G,F);if(H!==-1){J.markConstrainedEdgeByIndex(H);var I=J.getNeighbor(H);if(I){I.markConstrainedEdgeByPoints(G,F)}return true}return false};z.newFrontTriangle=function(I,F,G){var H=new y(F,G.point,G.next.point);H.markNeighbor(G.triangle);I.addToMap(H);var J=new C(F);J.next=G.next;J.prev=G;G.next.prev=J;G.next=J;if(!z.legalize(I,H)){I.mapTriangleToNodes(H)}return J};z.fill=function(H,F){var G=new y(F.prev.point,F.point,F.next.point);G.markNeighbor(F.prev.triangle);G.markNeighbor(F.triangle);H.addToMap(G);F.prev.next=F.next;F.next.prev=F.prev;if(!z.legalize(H,G)){H.mapTriangleToNodes(G)}};z.fillAdvancingFront=function(H,I){var F=I.next;var G;while(F.next){G=z.holeAngle(F);if(G>m||G<-(m)){break}z.fill(H,F);F=F.next}F=I.prev;while(F.prev){G=z.holeAngle(F);if(G>m||G<-(m)){break}z.fill(H,F);F=F.prev}if(I.next&&I.next.next){G=z.basinAngle(I);if(G<B){z.fillBasin(H,I)}}};z.basinAngle=function(G){var H=G.point.x-G.next.next.point.x;var F=G.point.y-G.next.next.point.y;return Math.atan2(F,H)};z.holeAngle=function(G){var H=G.next.point.x-G.point.x;var F=G.next.point.y-G.point.y;var J=G.prev.point.x-G.point.x;var I=G.prev.point.y-G.point.y;return Math.atan2(H*I-F*J,H*J+F*I)};z.legalize=function(K,M){for(var I=0;I<3;++I){if(M.delaunay_edge[I]){continue}var H=M.getNeighbor(I);if(H){var F=M.getPoint(I);var J=H.oppositePoint(M,F);var L=H.index(J);if(H.constrained_edge[L]||H.delaunay_edge[L]){M.constrained_edge[I]=H.constrained_edge[L];continue}var G=z.inCircle(F,M.pointCCW(F),M.pointCW(F),J);if(G){M.delaunay_edge[I]=true;H.delaunay_edge[L]=true;z.rotateTrianglePair(M,F,H,J);var N=!z.legalize(K,M);if(N){K.mapTriangleToNodes(M)}N=!z.legalize(K,H);if(N){K.mapTriangleToNodes(H)}M.delaunay_edge[I]=false;H.delaunay_edge[L]=false;return true}}}return false};z.inCircle=function(H,G,F,aa){var K=H.x-aa.x;var J=H.y-aa.y;var W=G.x-aa.x;var V=G.y-aa.y;var I=K*V;var U=W*J;var R=I-U;if(R<=0){return false}var O=F.x-aa.x;var N=F.y-aa.y;var Y=O*J;var T=K*N;var L=Y-T;if(L<=0){return false}var X=W*N;var Q=O*V;var P=K*K+J*J;var Z=W*W+V*V;var S=O*O+N*N;var M=P*(X-Q)+Z*L+S*R;return M>0};z.rotateTrianglePair=function(U,G,L,Q){var T,S,R,P;T=U.neighborCCW(G);S=U.neighborCW(G);R=L.neighborCCW(Q);P=L.neighborCW(Q);var J,I,H,F;J=U.getConstrainedEdgeCCW(G);I=U.getConstrainedEdgeCW(G);H=L.getConstrainedEdgeCCW(Q);F=L.getConstrainedEdgeCW(Q);var O,N,M,K;O=U.getDelaunayEdgeCCW(G);N=U.getDelaunayEdgeCW(G);M=L.getDelaunayEdgeCCW(Q);K=L.getDelaunayEdgeCW(Q);U.legalize(G,Q);L.legalize(Q,G);L.setDelaunayEdgeCCW(G,O);U.setDelaunayEdgeCW(G,N);U.setDelaunayEdgeCCW(Q,M);L.setDelaunayEdgeCW(Q,K);L.setConstrainedEdgeCCW(G,J);U.setConstrainedEdgeCW(G,I);U.setConstrainedEdgeCCW(Q,H);L.setConstrainedEdgeCW(Q,F);U.clearNeigbors();L.clearNeigbors();if(T){L.markNeighbor(T)}if(S){U.markNeighbor(S)}if(R){U.markNeighbor(R)}if(P){L.markNeighbor(P)}U.markNeighbor(L)};z.fillBasin=function(G,F){if(v(F.point,F.next.point,F.next.next.point)===A.CCW){G.basin.left_node=F.next.next}else{G.basin.left_node=F.next}G.basin.bottom_node=G.basin.left_node;while(G.basin.bottom_node.next&&G.basin.bottom_node.point.y>=G.basin.bottom_node.next.point.y){G.basin.bottom_node=G.basin.bottom_node.next}if(G.basin.bottom_node===G.basin.left_node){return}G.basin.right_node=G.basin.bottom_node;while(G.basin.right_node.next&&G.basin.right_node.point.y<G.basin.right_node.next.point.y){G.basin.right_node=G.basin.right_node.next}if(G.basin.right_node===G.basin.bottom_node){return}G.basin.width=G.basin.right_node.point.x-G.basin.left_node.point.x;G.basin.left_highest=G.basin.left_node.point.y>G.basin.right_node.point.y;z.fillBasinReq(G,G.basin.bottom_node)};z.fillBasinReq=function(H,F){if(z.isShallow(H,F)){return}z.fill(H,F);var G;if(F.prev===H.basin.left_node&&F.next===H.basin.right_node){return}else{if(F.prev===H.basin.left_node){G=v(F.point,F.next.point,F.next.next.point);if(G===A.CW){return}F=F.next}else{if(F.next===H.basin.right_node){G=v(F.point,F.prev.point,F.prev.prev.point);if(G===A.CCW){return}F=F.prev}else{if(F.prev.point.y<F.next.point.y){F=F.prev}else{F=F.next}}}}z.fillBasinReq(H,F)};z.isShallow=function(H,G){var F;if(H.basin.left_highest){F=H.basin.left_node.point.y-G.point.y}else{F=H.basin.right_node.point.y-G.point.y}if(H.basin.width>F){return true}return false};z.fillEdgeEvent=function(H,G,F){if(H.edge_event.right){z.fillRightAboveEdgeEvent(H,G,F)}else{z.fillLeftAboveEdgeEvent(H,G,F)}};z.fillRightAboveEdgeEvent=function(H,G,F){while(F.next.point.x<G.p.x){if(v(G.q,F.next.point,G.p)===A.CCW){z.fillRightBelowEdgeEvent(H,G,F)}else{F=F.next}}};z.fillRightBelowEdgeEvent=function(H,G,F){if(F.point.x<G.p.x){if(v(F.point,F.next.point,F.next.next.point)===A.CCW){z.fillRightConcaveEdgeEvent(H,G,F)}else{z.fillRightConvexEdgeEvent(H,G,F);z.fillRightBelowEdgeEvent(H,G,F)}}};z.fillRightConcaveEdgeEvent=function(H,G,F){z.fill(H,F.next);if(F.next.point!==G.p){if(v(G.q,F.next.point,G.p)===A.CCW){if(v(F.point,F.next.point,F.next.next.point)===A.CCW){z.fillRightConcaveEdgeEvent(H,G,F)}else{}}}};z.fillRightConvexEdgeEvent=function(H,G,F){if(v(F.next.point,F.next.next.point,F.next.next.next.point)===A.CCW){z.fillRightConcaveEdgeEvent(H,G,F.next)}else{if(v(G.q,F.next.next.point,G.p)===A.CCW){z.fillRightConvexEdgeEvent(H,G,F.next)}else{}}};z.fillLeftAboveEdgeEvent=function(H,G,F){while(F.prev.point.x>G.p.x){if(v(G.q,F.prev.point,G.p)===A.CW){z.fillLeftBelowEdgeEvent(H,G,F)}else{F=F.prev}}};z.fillLeftBelowEdgeEvent=function(H,G,F){if(F.point.x>G.p.x){if(v(F.point,F.prev.point,F.prev.prev.point)===A.CW){z.fillLeftConcaveEdgeEvent(H,G,F)}else{z.fillLeftConvexEdgeEvent(H,G,F);z.fillLeftBelowEdgeEvent(H,G,F)}}};z.fillLeftConvexEdgeEvent=function(H,G,F){if(v(F.prev.point,F.prev.prev.point,F.prev.prev.prev.point)===A.CW){z.fillLeftConcaveEdgeEvent(H,G,F.prev)}else{if(v(G.q,F.prev.prev.point,G.p)===A.CW){z.fillLeftConvexEdgeEvent(H,G,F.prev)}else{}}};z.fillLeftConcaveEdgeEvent=function(H,G,F){z.fill(H,F.prev);if(F.prev.point!==G.p){if(v(G.q,F.prev.point,G.p)===A.CW){if(v(F.point,F.prev.point,F.prev.prev.point)===A.CW){z.fillLeftConcaveEdgeEvent(H,G,F)}else{}}}};z.flipEdgeEvent=function(K,N,M,L,F){var H=L.neighborAcross(F);if(!H){throw new Error("poly2tri [BUG:FIXME] FLIP failed due to missing triangle!")}var J=H.oppositePoint(L,F);if(e(F,L.pointCCW(F),L.pointCW(F),J)){z.rotateTrianglePair(L,F,H,J);K.mapTriangleToNodes(L);K.mapTriangleToNodes(H);if(F===M&&J===N){if(M===K.edge_event.constrained_edge.q&&N===K.edge_event.constrained_edge.p){L.markConstrainedEdgeByPoints(N,M);H.markConstrainedEdgeByPoints(N,M);z.legalize(K,L);z.legalize(K,H)}else{}}else{var G=v(M,J,N);L=z.nextFlipTriangle(K,G,L,H,F,J);z.flipEdgeEvent(K,N,M,L,F)}}else{var I=z.nextFlipPoint(N,M,H,J);z.flipScanEdgeEvent(K,N,M,L,H,I);z.edgeEventByPoints(K,N,M,L,F)}};z.nextFlipTriangle=function(K,J,F,H,I,L){var G;if(J===A.CCW){G=H.edgeIndex(I,L);H.delaunay_edge[G]=true;z.legalize(K,H);H.clearDelunayEdges();return F}G=F.edgeIndex(I,L);F.delaunay_edge[G]=true;z.legalize(K,F);F.clearDelunayEdges();return H};z.nextFlipPoint=function(G,F,I,J){var H=v(F,J,G);if(H===A.CW){return I.pointCCW(J)}else{if(H===A.CCW){return I.pointCW(J)}else{throw new r("poly2tri [Unsupported] nextFlipPoint: opposing point on constrained edge!",[F,J,G])}}};z.flipScanEdgeEvent=function(J,N,L,M,K,F){var G=K.neighborAcross(F);if(!G){throw new Error("poly2tri [BUG:FIXME] FLIP failed due to missing triangle")}var I=G.oppositePoint(K,F);if(e(L,M.pointCCW(L),M.pointCW(L),I)){z.flipEdgeEvent(J,L,I,G,I)}else{var H=z.nextFlipPoint(N,L,G,I);z.flipScanEdgeEvent(J,N,L,M,G,H)}};g.PointError=r;g.Point=D;g.Triangle=y;g.SweepContext=b;g.triangulate=z.triangulate;g.sweep={Triangulate:z.triangulate}}(this));(function(){if(typeof Namespace==="function"){Namespace("js.poly2tri");js.poly2tri=poly2tri;Namespace.provide("js.poly2tri")}}());var spine={};spine.BoneData=function(b,d){this.name=b;this.parent=d};spine.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:true,inheritRotation:true};spine.SlotData=function(b,d){this.name=b;this.boneData=d};spine.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:false};spine.Bone=function(d,b){this.data=d;this.parent=b;this.setToSetupPose()};spine.Bone.yDown=false;spine.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(e,d){var f=this.parent;if(f!=null){this.worldX=this.x*f.m00+this.y*f.m01+f.worldX;this.worldY=this.x*f.m10+this.y*f.m11+f.worldY;if(this.data.inheritScale){this.worldScaleX=f.worldScaleX*this.scaleX;this.worldScaleY=f.worldScaleY*this.scaleY}else{this.worldScaleX=this.scaleX;this.worldScaleY=this.scaleY}this.worldRotation=this.data.inheritRotation?f.worldRotation+this.rotation:this.rotation}else{this.worldX=this.x;this.worldY=this.y;this.worldScaleX=this.scaleX;this.worldScaleY=this.scaleY;this.worldRotation=this.rotation}var j=this.worldRotation*Math.PI/180;var g=Math.cos(j);var b=Math.sin(j);this.m00=g*this.worldScaleX;this.m10=b*this.worldScaleX;this.m01=-b*this.worldScaleY;this.m11=g*this.worldScaleY;if(e){this.m00=-this.m00;this.m01=-this.m01}if(d!=spine.Bone.yDown){this.m10=-this.m10;this.m11=-this.m11}},setToSetupPose:function(){var b=this.data;this.x=b.x;this.y=b.y;this.rotation=b.rotation;this.scaleX=b.scaleX;this.scaleY=b.scaleY}};spine.Slot=function(b,e,d){this.data=b;this.skeleton=e;this.bone=d;this.setToSetupPose()};spine.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(b){this.attachment=b;this._attachmentTime=this.skeleton.time},setAttachmentTime:function(b){this._attachmentTime=this.skeleton.time-b},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var d=this.data;this.r=d.r;this.g=d.g;this.b=d.b;this.a=d.a;var f=this.skeleton.data.slots;for(var b=0,e=f.length;b<e;b++){if(f[b]==d){this.setAttachment(!d.attachmentName?null:this.skeleton.getAttachmentBySlotIndex(b,d.attachmentName));break}}}};spine.Skin=function(b){this.name=b;this.attachments={}};spine.Skin.prototype={addAttachment:function(b,d,e){this.attachments[b+":"+d]=e},getAttachment:function(b,d){return this.attachments[b+":"+d]},_attachAll:function(g,m){for(var e in m.attachments){var f=e.indexOf(":");var b=parseInt(e.substring(0,f));var d=e.substring(f+1);var k=g.slots[b];if(k.attachment&&k.attachment.name==d){var j=this.getAttachment(b,d);if(j){k.setAttachment(j)}}}}};spine.Animation=function(b,d,e){this.name=b;this.timelines=d;this.duration=e};spine.Animation.prototype={apply:function(k,j,g,b,f){if(b&&this.duration!=0){g%=this.duration;j%=this.duration}var e=this.timelines;for(var d=0,m=e.length;d<m;d++){e[d].apply(k,j,g,f,1)}},mix:function(f,b,e,k,q,g){if(k&&this.duration!=0){e%=this.duration;b%=this.duration}var m=this.timelines;for(var j=0,d=m.length;j<d;j++){m[j].apply(f,b,e,q,g)}}};spine.binarySearch=function(d,j,e){var b=0;var f=Math.floor(d.length/e)-2;if(f==0){return e}var g=f>>>1;while(true){if(d[(g+1)*e]<=j){b=g+1}else{f=g}if(b==f){return(b+1)*e}g=(b+f)>>>1}};spine.linearSearch=function(b,g,f){for(var d=0,e=b.length-f;d<=e;d+=f){if(b[d]>g){return d}}return -1};spine.Curves=function(b){this.curves=[];this.curves.length=(b-1)*6};spine.Curves.prototype={setLinear:function(b){this.curves[b*6]=0},setStepped:function(b){this.curves[b*6]=-1},setCurve:function(m,r,B,q,A){var u=1/10;var k=u*u;var j=k*u;var e=3*u;var d=3*k;var b=6*k;var C=6*j;var z=-r*2+q;var y=-B*2+A;var g=(r-q)*3+1;var f=(B-A)*3+1;var v=m*6;var n=this.curves;n[v]=r*e+z*d+g*j;n[v+1]=B*e+y*d+f*j;n[v+2]=z*b+g*C;n[v+3]=y*b+f*C;n[v+4]=g*C;n[v+5]=f*C},getCurvePercent:function(f,n){n=n<0?0:(n>1?1:n);var k=f*6;var z=this.curves;var b=z[k];if(!b){return n}if(b==-1){return 0}var A=z[k+1];var v=z[k+2];var u=z[k+3];var j=z[k+4];var g=z[k+5];var r=b,q=A;var m=10-2;while(true){if(r>=n){var e=r-b;var d=q-A;return d+(q-d)*(n-e)/(r-e)}if(m==0){break}m--;b+=v;A+=u;v+=j;u+=g;r+=b;q+=A}return q+(1-q)*(n-r)/(1-r)}};spine.RotateTimeline=function(b){this.curves=new spine.Curves(b);this.frames=[];this.frames.length=b*2};spine.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,b,d){e*=2;this.frames[e]=b;this.frames[e+1]=d},apply:function(f,b,e,u,g){var q=this.frames;if(e<q[0]){return}var r=f.bones[this.boneIndex];if(e>=q[q.length-2]){var j=r.data.rotation+q[q.length-1]-r.rotation;while(j>180){j-=360}while(j<-180){j+=360}r.rotation+=j*g;return}var d=spine.binarySearch(q,e,2);var k=q[d-1];var n=q[d];var m=1-(e-n)/(q[d-2]-n);m=this.curves.getCurvePercent(d/2-1,m);var j=q[d+1]-k;while(j>180){j-=360}while(j<-180){j+=360}j=r.data.rotation+(k+j*m)-r.rotation;while(j>180){j-=360}while(j<-180){j+=360}r.rotation+=j*g}};spine.TranslateTimeline=function(b){this.curves=new spine.Curves(b);this.frames=[];this.frames.length=b*3};spine.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(f,d,b,e){f*=3;this.frames[f]=d;this.frames[f+1]=b;this.frames[f+2]=e},apply:function(f,b,e,u,g){var q=this.frames;if(e<q[0]){return}var r=f.bones[this.boneIndex];if(e>=q[q.length-3]){r.x+=(r.data.x+q[q.length-2]-r.x)*g;r.y+=(r.data.y+q[q.length-1]-r.y)*g;return}var d=spine.binarySearch(q,e,3);var k=q[d-2];var j=q[d-1];var n=q[d];var m=1-(e-n)/(q[d+-3]-n);m=this.curves.getCurvePercent(d/3-1,m);r.x+=(r.data.x+k+(q[d+1]-k)*m-r.x)*g;r.y+=(r.data.y+j+(q[d+2]-j)*m-r.y)*g}};spine.ScaleTimeline=function(b){this.curves=new spine.Curves(b);this.frames=[];this.frames.length=b*3};spine.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(f,d,b,e){f*=3;this.frames[f]=d;this.frames[f+1]=b;this.frames[f+2]=e},apply:function(f,b,e,u,g){var q=this.frames;if(e<q[0]){return}var r=f.bones[this.boneIndex];if(e>=q[q.length-3]){r.scaleX+=(r.data.scaleX-1+q[q.length-2]-r.scaleX)*g;r.scaleY+=(r.data.scaleY-1+q[q.length-1]-r.scaleY)*g;return}var d=spine.binarySearch(q,e,3);var k=q[d-2];var j=q[d-1];var n=q[d];var m=1-(e-n)/(q[d+-3]-n);m=this.curves.getCurvePercent(d/3-1,m);r.scaleX+=(r.data.scaleX-1+k+(q[d+1]-k)*m-r.scaleX)*g;r.scaleY+=(r.data.scaleY-1+j+(q[d+2]-j)*m-r.scaleY)*g}};spine.ColorTimeline=function(b){this.curves=new spine.Curves(b);this.frames=[];this.frames.length=b*5};spine.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(m,k,j,f,d,e){m*=5;this.frames[m]=k;this.frames[m+1]=j;this.frames[m+2]=f;this.frames[m+3]=d;this.frames[m+4]=e},apply:function(f,E,k,G,j){var u=this.frames;if(k<u[0]){return}var e=f.slots[this.slotIndex];if(k>=u[u.length-5]){var A=u.length-1;e.r=u[A-3];e.g=u[A-2];e.b=u[A-1];e.a=u[A];return}var m=spine.binarySearch(u,k,5);var n=u[m-4];var y=u[m-3];var z=u[m-2];var B=u[m-1];var q=u[m];var d=1-(k-q)/(u[m-5]-q);d=this.curves.getCurvePercent(m/5-1,d);var v=n+(u[m+1]-n)*d;var C=y+(u[m+2]-y)*d;var D=z+(u[m+3]-z)*d;var F=B+(u[m+4]-B)*d;if(j<1){e.r+=(v-e.r)*j;e.g+=(C-e.g)*j;e.b+=(D-e.b)*j;e.a+=(F-e.a)*j}else{e.r=v;e.g=C;e.b=D;e.a=F}}};spine.AttachmentTimeline=function(b){this.curves=new spine.Curves(b);this.frames=[];this.frames.length=b;this.attachmentNames=[];this.attachmentNames.length=b};spine.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(e,d,b){this.frames[e]=d;this.attachmentNames[e]=b},apply:function(j,g,f,b,e){var k=this.frames;if(f<k[0]){return}var m;if(f>=k[k.length-1]){m=k.length-1}else{m=spine.binarySearch(k,f,1)-1}var d=this.attachmentNames[m];j.slots[this.slotIndex].setAttachment(!d?null:j.getAttachmentBySlotIndex(this.slotIndex,d))}};spine.EventTimeline=function(b){this.frames=[];this.frames.length=b;this.events=[];this.events.length=b};spine.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(e,d,b){this.frames[e]=d;this.events[e]=b},apply:function(j,b,g,q,k){if(!q){return}var m=this.frames;var f=m.length;if(b>g){apply(j,b,Number.MAX_VALUE,q,k);b=-1}else{if(b>=m[f-1]){return}}if(g<m[0]){return}var e;if(b<m[0]){e=0}else{e=spine.binarySearch(m,b,1);var d=m[e];while(e>0){if(m[e-1]!=d){break}e--}}var n=this.events;for(;e<f&&g>=m[e];e++){q.push(n[e])}}};spine.DrawOrderTimeline=function(b){this.frames=[];this.frames.length=b;this.drawOrders=[];this.drawOrders.length=b};spine.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(e,b,d){this.frames[e]=b;this.drawOrders[e]=d},apply:function(j,d,g,v,k){var r=this.frames;if(g<r[0]){return}var e;if(g>=r[r.length-1]){e=r.length-1}else{e=spine.binarySearch(r,g,1)-1}var b=j.drawOrder;var q=j.slots;var u=this.drawOrders[e];if(!u){for(var m=0,f=q.length;m<f;m++){b[m]=q[m]}}else{for(var m=0,f=u.length;m<f;m++){b[m]=j.slots[u[m]]}}}};spine.SkeletonData=function(){this.bones=[];this.slots=[];this.skins=[];this.events=[];this.animations=[]};spine.SkeletonData.prototype={defaultSkin:null,findBone:function(e){var b=this.bones;for(var d=0,f=b.length;d<f;d++){if(b[d].name==e){return b[d]}}return null},findBoneIndex:function(e){var b=this.bones;for(var d=0,f=b.length;d<f;d++){if(b[d].name==e){return d}}return -1},findSlot:function(b){var e=this.slots;for(var d=0,f=e.length;d<f;d++){if(e[d].name==b){return slot[d]}}return null},findSlotIndex:function(b){var e=this.slots;for(var d=0,f=e.length;d<f;d++){if(e[d].name==b){return d}}return -1},findSkin:function(b){var e=this.skins;for(var d=0,f=e.length;d<f;d++){if(e[d].name==b){return e[d]}}return null},findEvent:function(b){var e=this.events;for(var d=0,f=e.length;d<f;d++){if(e[d].name==b){return e[d]}}return null},findAnimation:function(d){var f=this.animations;for(var b=0,e=f.length;b<e;b++){if(f[b].name==d){return f[b]}}return null}};spine.Skeleton=function(b){this.data=b;this.bones=[];for(var d=0,m=b.bones.length;d<m;d++){var j=b.bones[d];var e=!j.parent?null:this.bones[b.bones.indexOf(j.parent)];this.bones.push(new spine.Bone(j,e))}this.slots=[];this.drawOrder=[];for(var d=0,m=b.slots.length;d<m;d++){var f=b.slots[d];var g=this.bones[b.bones.indexOf(f.boneData)];var k=new spine.Slot(f,this,g);this.slots.push(k);this.drawOrder.push(k)}};spine.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:false,flipY:false,updateWorldTransform:function(){var e=this.flipX;var d=this.flipY;var b=this.bones;for(var f=0,g=b.length;f<g;f++){b[f].updateWorldTransform(e,d)}},setToSetupPose:function(){this.setBonesToSetupPose();this.setSlotsToSetupPose()},setBonesToSetupPose:function(){var b=this.bones;for(var d=0,e=b.length;d<e;d++){b[d].setToSetupPose()}},setSlotsToSetupPose:function(){var d=this.slots;for(var b=0,e=d.length;b<e;b++){d[b].setToSetupPose(b)}},getRootBone:function(){return this.bones.length==0?null:this.bones[0]},findBone:function(e){var b=this.bones;for(var d=0,f=b.length;d<f;d++){if(b[d].data.name==e){return b[d]}}return null},findBoneIndex:function(e){var b=this.bones;for(var d=0,f=b.length;d<f;d++){if(b[d].data.name==e){return d}}return -1},findSlot:function(b){var e=this.slots;for(var d=0,f=e.length;d<f;d++){if(e[d].data.name==b){return e[d]}}return null},findSlotIndex:function(b){var e=this.slots;for(var d=0,f=e.length;d<f;d++){if(e[d].data.name==b){return d}}return -1},setSkinByName:function(b){var d=this.data.findSkin(b);if(!d){throw"Skin not found: "+b}this.setSkin(d)},setSkin:function(b){if(this.skin&&b){b._attachAll(this,this.skin)}this.skin=b},getAttachmentBySlotName:function(d,b){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(d),b)},getAttachmentBySlotIndex:function(d,b){if(this.skin){var e=this.skin.getAttachment(d,b);if(e){return e}}if(this.data.defaultSkin){return this.data.defaultSkin.getAttachment(d,b)}return null},setAttachment:function(d,b){var f=this.slots;for(var e=0,k=f.size;e<k;e++){var j=f[e];if(j.data.name==d){var g=null;if(b){g=this.getAttachment(e,b);if(!g){throw"Attachment not found: "+b+", for slot: "+d}}j.setAttachment(g);return}}throw"Slot not found: "+d},update:function(b){time+=b}};spine.EventData=function(b){this.name=b};spine.EventData.prototype={intValue:0,floatValue:0,stringValue:null};spine.Event=function(b){this.data=b};spine.Event.prototype={intValue:0,floatValue:0,stringValue:null};spine.AttachmentType={region:0,boundingbox:1};spine.RegionAttachment=function(b){this.name=b;this.offset=[];this.offset.length=8;this.uvs=[];this.uvs.length=8};spine.RegionAttachment.prototype={type:spine.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(e,b,g,j,d){var f=this.uvs;if(d){f[2]=e;f[3]=j;f[4]=e;f[5]=b;f[6]=g;f[7]=b;f[0]=g;f[1]=j}else{f[0]=e;f[1]=j;f[2]=e;f[3]=b;f[4]=g;f[5]=b;f[6]=g;f[7]=j}},updateOffset:function(){var A=this.width/this.regionOriginalWidth*this.scaleX;var z=this.height/this.regionOriginalHeight*this.scaleY;var d=-this.width/2*this.scaleX+this.regionOffsetX*A;var C=-this.height/2*this.scaleY+this.regionOffsetY*z;var k=d+this.regionWidth*A;var y=C+this.regionHeight*z;var B=this.rotation*Math.PI/180;var e=Math.cos(B);var b=Math.sin(B);var n=d*e+this.x;var m=d*b;var u=C*e+this.y;var q=C*b;var v=k*e+this.x;var r=k*b;var g=y*e+this.y;var f=y*b;var j=this.offset;j[0]=n-q;j[1]=u+m;j[2]=n-f;j[3]=g+m;j[4]=v-f;j[5]=g+r;j[6]=v-q;j[7]=u+r},computeVertices:function(j,g,m,f){j+=m.worldX;g+=m.worldY;var n=m.m00;var k=m.m01;var e=m.m10;var d=m.m11;var b=this.offset;f[0]=b[0]*n+b[1]*k+j;f[1]=b[0]*e+b[1]*d+g;f[2]=b[2]*n+b[3]*k+j;f[3]=b[2]*e+b[3]*d+g;f[4]=b[4]*n+b[5]*k+j;f[5]=b[4]*e+b[5]*d+g;f[6]=b[6]*n+b[7]*k+j;f[7]=b[6]*e+b[7]*d+g}};spine.BoundingBoxAttachment=function(b){this.name=b;this.vertices=[]};spine.BoundingBoxAttachment.prototype={type:spine.AttachmentType.boundingBox,computeWorldVertices:function(q,k,v,b){q+=v.worldX;k+=v.worldY;var z=v.m00;var u=v.m01;var g=v.m10;var f=v.m11;var j=this.vertices;for(var e=0,d=j.length;e<d;e+=2){var r=j[e];var m=j[e+1];b[e]=r*z+m*u+q;b[e+1]=r*g+m*f+k}}};spine.AnimationStateData=function(b){this.skeletonData=b;this.animationToMixTime={}};spine.AnimationStateData.prototype={defaultMix:0,setMixByName:function(d,b,e){var g=this.skeletonData.findAnimation(d);if(!g){throw"Animation not found: "+d}var f=this.skeletonData.findAnimation(b);if(!f){throw"Animation not found: "+b}this.setMix(g,f,e)},setMix:function(e,d,b){this.animationToMixTime[e.name+":"+d.name]=b},getMix:function(e,d){var b=this.animationToMixTime[e.name+":"+d.name];return b?b:this.defaultMix}};spine.TrackEntry=function(){};spine.TrackEntry.prototype={next:null,previous:null,animation:null,loop:false,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,onStart:null,onEnd:null,onComplete:null,onEvent:null};spine.AnimationState=function(b){this.data=b;this.tracks=[];this.events=[]};spine.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(g){g*=this.timeScale;for(var b=0;b<this.tracks.length;b++){var f=this.tracks[b];if(!f){continue}var e=g*f.timeScale;f.time+=e;if(f.previous){f.previous.time+=e;f.mixTime+=e}var d=f.next;if(d){if(f.lastTime>=d.delay){this.setCurrent(b,d)}}else{if(!f.loop&&f.lastTime>=f.endTime){this.clearTrack(b)}}}},apply:function(g){for(var j=0;j<this.tracks.length;j++){var r=this.tracks[j];if(!r){continue}this.events.length=0;var e=r.time;var d=r.lastTime;var n=r.endTime;var k=r.loop;if(!k&&e>n){e=n}var m=r.previous;if(!m){r.animation.apply(g,r.lastTime,e,k,this.events)}else{var u=m.time;if(!m.loop&&u>m.endTime){u=m.endTime}m.animation.apply(g,u,u,m.loop,null);var f=r.mixTime/r.mixDuration;if(f>=1){f=1;r.previous=null}r.animation.mix(g,r.lastTime,e,k,this.events,f)}for(var v=0,y=this.events.length;v<y;v++){var b=this.events[v];if(r.onEvent!=null){r.onEvent(j,b)}if(this.onEvent!=null){this.onEvent(j,b)}}if(k?(d%n>e%n):(d<n&&e>=n)){var q=Math.floor(e/n);if(r.onComplete){r.onComplete(j,q)}if(this.onComplete){this.onComplete(j,q)}}r.lastTime=r.time}},clearTracks:function(){for(var b=0,d=this.tracks.length;b<d;b++){this.clearTrack(b)}this.tracks.length=0},clearTrack:function(d){if(d>=this.tracks.length){return}var b=this.tracks[d];if(!b){return}if(b.onEnd!=null){b.onEnd(d)}if(this.onEnd!=null){this.onEnd(d)}this.tracks[d]=null},_expandToIndex:function(b){if(b<this.tracks.length){return this.tracks[b]}while(b>=this.tracks.length){this.tracks.push(null)}return null},setCurrent:function(b,d){var e=this._expandToIndex(b);if(e){e.previous=null;if(e.onEnd!=null){e.onEnd(b)}if(this.onEnd!=null){this.onEnd(b)}d.mixDuration=this.data.getMix(e.animation,d.animation);if(d.mixDuration>0){d.mixTime=0;d.previous=e}}this.tracks[b]=d;if(d.onStart!=null){d.onStart(b)}if(this.onStart!=null){this.onStart(b)}},setAnimationByName:function(f,d,b){var e=this.data.skeletonData.findAnimation(d);if(!e){throw"Animation not found: "+d}return this.setAnimation(f,e,b)},setAnimation:function(f,e,b){var d=new spine.TrackEntry();d.animation=e;d.loop=b;d.endTime=e.duration;this.setCurrent(f,d);return d},addAnimationByName:function(g,e,b,d){var f=this.data.skeletonData.findAnimation(e);if(!f){throw"Animation not found: "+e}return this.addAnimation(g,f,b,d)},addAnimation:function(j,g,b,d){var f=new spine.TrackEntry();f.animation=g;f.loop=b;f.endTime=g.duration;var e=this._expandToIndex(j);if(e){while(e.next){e=e.next}e.next=f}else{this.tracks[j]=f}if(d<=0){if(e){d+=e.endTime-this.data.getMix(e.animation,g)}else{d=0}}f.delay=d;return f},getCurrent:function(b){if(b>=this.tracks.length){return null}return this.tracks[b]}};spine.SkeletonJson=function(b){this.attachmentLoader=b};spine.SkeletonJson.prototype={scale:1,readSkeletonData:function(E){var d=new spine.SkeletonData();var J=E.bones;for(var H=0,C=J.length;H<C;H++){var L=J[H];var r=null;if(L.parent){r=d.findBone(L.parent);if(!r){throw"Parent bone not found: "+L.parent}}var g=new spine.BoneData(L.name,r);g.length=(L.length||0)*this.scale;g.x=(L.x||0)*this.scale;g.y=(L.y||0)*this.scale;g.rotation=(L.rotation||0);g.scaleX=L.scaleX||1;g.scaleY=L.scaleY||1;g.inheritScale=L.inheritScale||true;g.inheritRotation=L.inheritRotation||true;d.bones.push(g)}var v=E.slots;for(var H=0,C=v.length;H<C;H++){var I=v[H];var g=d.findBone(I.bone);if(!g){throw"Slot bone not found: "+I.bone}var j=new spine.SlotData(I.name,g);var G=I.color;if(G){j.r=spine.SkeletonJson.toColor(G,0);j.g=spine.SkeletonJson.toColor(G,1);j.b=spine.SkeletonJson.toColor(G,2);j.a=spine.SkeletonJson.toColor(G,3)}j.attachmentName=I.attachment;j.additiveBlending=I.additive;d.slots.push(j)}var M=E.skins;for(var y in M){if(!M.hasOwnProperty(y)){continue}var B=M[y];var F=new spine.Skin(y);for(var k in B){if(!B.hasOwnProperty(k)){continue}var K=d.findSlotIndex(k);var D=B[k];for(var A in D){if(!D.hasOwnProperty(A)){continue}var u=this.readAttachment(F,A,D[A]);if(u!=null){F.addAttachment(K,A,u)}}}d.skins.push(F);if(F.name=="default"){d.defaultSkin=F}}var b=E.events;for(var f in b){if(!b.hasOwnProperty(f)){continue}var z=b[f];var e=new spine.EventData(f);e.intValue=z["int"]||0;e.floatValue=z["float"]||0;e.stringValue=z.string||null;d.events.push(e)}var q=E.animations;for(var m in q){if(!q.hasOwnProperty(m)){continue}this.readAnimation(m,q[m],d)}return d},readAttachment:function(j,d,g){d=g.name||d;var f=spine.AttachmentType[g.type||"region"];var k=this.attachmentLoader.newAttachment(j,f,d);if(f==spine.AttachmentType.region){k.x=(g.x||0)*this.scale;k.y=(g.y||0)*this.scale;k.scaleX=g.scaleX||1;k.scaleY=g.scaleY||1;k.rotation=g.rotation||0;k.width=(g.width||32)*this.scale;k.height=(g.height||32)*this.scale;k.updateOffset()}else{if(f==spine.AttachmentType.boundingBox){var b=g.vertices;for(var e=0,m=b.length;e<m;e++){k.vertices.push(b[e]*scale)}}}return k},readAnimation:function(B,J,U){var N=[];var H=0;var S=J.bones;for(var A in S){if(!S.hasOwnProperty(A)){continue}var z=U.findBoneIndex(A);if(z==-1){throw"Bone not found: "+A}var q=S[A];for(var d in q){if(!q.hasOwnProperty(d)){continue}var ac=q[d];if(d=="rotate"){var v=new spine.RotateTimeline(ac.length);v.boneIndex=z;var j=0;for(var V=0,T=ac.length;V<T;V++){var X=ac[V];v.setFrame(j,X.time,X.angle);spine.SkeletonJson.readCurve(v,j,X);j++}N.push(v);H=Math.max(H,v.frames[v.getFrameCount()*2-2])}else{if(d=="translate"||d=="scale"){var v;var E=1;if(d=="scale"){v=new spine.ScaleTimeline(ac.length)}else{v=new spine.TranslateTimeline(ac.length);E=this.scale}v.boneIndex=z;var j=0;for(var V=0,T=ac.length;V<T;V++){var X=ac[V];var P=(X.x||0)*E;var O=(X.y||0)*E;v.setFrame(j,X.time,P,O);spine.SkeletonJson.readCurve(v,j,X);j++}N.push(v);H=Math.max(H,v.frames[v.getFrameCount()*3-3])}else{throw"Invalid timeline type for a bone: "+d+" ("+A+")"}}}}var Z=J.slots;for(var ab in Z){if(!Z.hasOwnProperty(ab)){continue}var I=Z[ab];var ae=U.findSlotIndex(ab);for(var d in I){if(!I.hasOwnProperty(d)){continue}var ac=I[d];if(d=="color"){var v=new spine.ColorTimeline(ac.length);v.slotIndex=ae;var j=0;for(var V=0,T=ac.length;V<T;V++){var X=ac[V];var K=X.color;var Q=spine.SkeletonJson.toColor(K,0);var W=spine.SkeletonJson.toColor(K,1);var aa=spine.SkeletonJson.toColor(K,2);var ad=spine.SkeletonJson.toColor(K,3);v.setFrame(j,X.time,Q,W,aa,ad);spine.SkeletonJson.readCurve(v,j,X);j++}N.push(v);H=Math.max(H,v.frames[v.getFrameCount()*5-5])}else{if(d=="attachment"){var v=new spine.AttachmentTimeline(ac.length);v.slotIndex=ae;var j=0;for(var V=0,T=ac.length;V<T;V++){var X=ac[V];v.setFrame(j++,X.time,X.name)}N.push(v);H=Math.max(H,v.frames[v.getFrameCount()-1])}else{throw"Invalid timeline type for a slot: "+d+" ("+ab+")"}}}}var F=J.events;if(F){var v=new spine.EventTimeline(F.length);var j=0;for(var V=0,T=F.length;V<T;V++){var f=F[V];var C=U.findEvent(f.name);if(!C){throw"Event not found: "+f.name}var af=new spine.Event(C);af.intValue=f.hasOwnProperty("int")?f["int"]:C.intValue;af.floatValue=f.hasOwnProperty("float")?f["float"]:C.floatValue;af.stringValue=f.hasOwnProperty("string")?f.string:C.stringValue;v.setFrame(j++,f.time,af)}N.push(v);H=Math.max(H,v.frames[v.getFrameCount()-1])}var R=J.draworder;if(R){var v=new spine.DrawOrderTimeline(R.length);var u=U.slots.length;var j=0;for(var V=0,T=R.length;V<T;V++){var ag=R[V];var M=null;if(ag.offsets){M=[];M.length=u;for(var L=u-1;L>=0;L--){M[L]=-1}var D=ag.offsets;var e=[];e.length=u-D.length;var m=0,G=0;for(var L=0,Y=D.length;L<Y;L++){var k=D[L];var ae=U.findSlotIndex(k.slot);if(ae==-1){throw"Slot not found: "+k.slot}while(m!=ae){e[G++]=m++}M[m+k.offset]=m++}while(m<u){e[G++]=m++}for(var L=u-1;L>=0;L--){if(M[L]==-1){M[L]=e[--G]}}}v.setFrame(j++,ag.time,M)}N.push(v);H=Math.max(H,v.frames[v.getFrameCount()-1])}U.animations.push(new spine.Animation(B,N,H))}};spine.SkeletonJson.readCurve=function(b,f,e){var d=e.curve;if(!d){return}if(d=="stepped"){b.curves.setStepped(f)}else{if(d instanceof Array){b.curves.setCurve(f,d[0],d[1],d[2],d[3])}}};spine.SkeletonJson.toColor=function(b,d){if(b.length!=8){throw"Color hexidecimal length must be 8, recieved: "+b}return parseInt(b.substring(d*2,(d*2)+2),16)/255};spine.Atlas=function(k,b){this.textureLoader=b;this.pages=[];this.regions=[];var e=new spine.AtlasReader(k);var q=[];q.length=4;var f=null;while(true){var u=e.readLine();if(u==null){break}u=e.trim(u);if(u.length==0){f=null}else{if(!f){f=new spine.AtlasPage();f.name=u;f.format=spine.Atlas.Format[e.readValue()];e.readTuple(q);f.minFilter=spine.Atlas.TextureFilter[q[0]];f.magFilter=spine.Atlas.TextureFilter[q[1]];var n=e.readValue();f.uWrap=spine.Atlas.TextureWrap.clampToEdge;f.vWrap=spine.Atlas.TextureWrap.clampToEdge;if(n=="x"){f.uWrap=spine.Atlas.TextureWrap.repeat}else{if(n=="y"){f.vWrap=spine.Atlas.TextureWrap.repeat}else{if(n=="xy"){f.uWrap=f.vWrap=spine.Atlas.TextureWrap.repeat}}}b.load(f,u);this.pages.push(f)}else{var j=new spine.AtlasRegion();j.name=u;j.page=f;j.rotate=e.readValue()=="true";e.readTuple(q);var m=parseInt(q[0]);var g=parseInt(q[1]);e.readTuple(q);var d=parseInt(q[0]);var r=parseInt(q[1]);j.u=m/f.width;j.v=g/f.height;if(j.rotate){j.u2=(m+r)/f.width;j.v2=(g+d)/f.height}else{j.u2=(m+d)/f.width;j.v2=(g+r)/f.height}j.x=m;j.y=g;j.width=Math.abs(d);j.height=Math.abs(r);if(e.readTuple(q)==4){j.splits=[parseInt(q[0]),parseInt(q[1]),parseInt(q[2]),parseInt(q[3])];if(e.readTuple(q)==4){j.pads=[parseInt(q[0]),parseInt(q[1]),parseInt(q[2]),parseInt(q[3])];e.readTuple(q)}}j.originalWidth=parseInt(q[0]);j.originalHeight=parseInt(q[1]);e.readTuple(q);j.offsetX=parseInt(q[0]);j.offsetY=parseInt(q[1]);j.index=parseInt(e.readValue());this.regions.push(j)}}}};spine.Atlas.prototype={findRegion:function(b){var f=this.regions;for(var d=0,e=f.length;d<e;d++){if(f[d].name==b){return f[d]}}return null},dispose:function(){var b=this.pages;for(var d=0,e=b.length;d<e;d++){this.textureLoader.unload(b[d].rendererObject)}},updateUVs:function(d){var g=this.regions;for(var b=0,f=g.length;b<f;b++){var e=g[b];if(e.page!=d){continue}e.u=e.x/d.width;e.v=e.y/d.height;if(e.rotate){e.u2=(e.x+e.height)/d.width;e.v2=(e.y+e.width)/d.height}else{e.u2=(e.x+e.width)/d.width;e.v2=(e.y+e.height)/d.height}}}};spine.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6};spine.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6};spine.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2};spine.AtlasPage=function(){};spine.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0};spine.AtlasRegion=function(){};spine.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:false,splits:null,pads:null};spine.AtlasReader=function(b){this.lines=b.split(/\r\n|\r|\n/)};spine.AtlasReader.prototype={index:0,trim:function(b){return b.replace(/^\s+|\s+$/g,"")},readLine:function(){if(this.index>=this.lines.length){return null}return this.lines[this.index++]},readValue:function(){var b=this.readLine();var d=b.indexOf(":");if(d==-1){throw"Invalid line: "+b}return this.trim(b.substring(d+1))},readTuple:function(d){var e=this.readLine();var g=e.indexOf(":");if(g==-1){throw"Invalid line: "+e}var f=0,j=g+1;for(;f<3;f++){var b=e.indexOf(",",j);if(b==-1){if(f==0){throw"Invalid line: "+e}break}d[f]=this.trim(e.substr(j,b-j));j=b+1}d[f]=this.trim(e.substring(j));return f+1}};spine.AtlasAttachmentLoader=function(b){this.atlas=b};spine.AtlasAttachmentLoader.prototype={newAttachment:function(f,d,b){switch(d){case spine.AttachmentType.boundingbox:return new spine.BoundingBoxAttachment(b);case spine.AttachmentType.region:var e=this.atlas.findRegion(b);if(!e){throw"Region not found in atlas: "+b+" ("+d+")"}var g=new spine.RegionAttachment(b);g.rendererObject=e;g.setUVs(e.u,e.v,e.u2,e.v2,e.rotate);g.regionOffsetX=e.offsetX;g.regionOffsetY=e.offsetY;g.regionWidth=e.width;g.regionHeight=e.height;g.regionOriginalWidth=e.originalWidth;g.regionOriginalHeight=e.originalHeight;return g}throw"Unknown attachment type: "+d}};spine.SkeletonBounds=function(){this.polygonPool=[];this.polygons=[];this.boundingBoxes=[]};spine.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(f,r){var q=f.slots;var k=q.length;var z=f.x,u=f.y;var d=this.boundingBoxes;var m=this.polygonPool;var v=this.polygons;d.length=0;for(var j=0,b=v.length;j<b;j++){m.push(v[j])}v.length=0;for(var j=0;j<k;j++){var A=q[j];var g=A.attachment;if(g.type!=spine.AttachmentType.boundingBox){continue}d.push(g);var e=m.length;if(e>0){polygon=m[e-1];m.splice(e-1,1)}else{polygon=[]}v.push(polygon);polygon.length=g.vertices.length;g.computeWorldVertices(z,u,A.bone,polygon)}if(r){this.aabbCompute()}},aabbCompute:function(){var r=this.polygons;var g=Number.MAX_VALUE,f=Number.MAX_VALUE,d=Number.MIN_VALUE,b=Number.MIN_VALUE;for(var j=0,e=r.length;j<e;j++){var k=r[j];for(var u=0,v=k.length;u<v;u+=2){var q=k[u];var m=k[u+1];g=Math.min(g,q);f=Math.min(f,m);d=Math.max(d,q);b=Math.max(b,m)}}this.minX=g;this.minY=f;this.maxX=d;this.maxY=b},aabbContainsPoint:function(b,d){return b>=this.minX&&b<=this.maxX&&d>=this.minY&&d<=this.maxY},aabbIntersectsSegment:function(f,u,e,q){var k=this.minX,j=this.minY,d=this.maxX,b=this.maxY;if((f<=k&&e<=k)||(u<=j&&q<=j)||(f>=d&&e>=d)||(u>=b&&q>=b)){return false}var g=(q-u)/(e-f);var n=g*(k-f)+u;if(n>j&&n<b){return true}n=g*(d-f)+u;if(n>j&&n<b){return true}var r=(j-u)/g+f;if(r>k&&r<d){return true}r=(b-u)/g+f;if(r>k&&r<d){return true}return false},aabbIntersectsSkeleton:function(b){return this.minX<b.maxX&&this.maxX>b.minX&&this.minY<b.maxY&&this.maxY>b.minY},containsPoint:function(b,g){var d=this.polygons;for(var e=0,f=d.length;e<f;e++){if(this.polygonContainsPoint(d[e],b,g)){return this.boundingBoxes[e]}}return null},intersectsSegment:function(e,j,d,g){var b=this.polygons;for(var f=0,k=b.length;f<k;f++){if(b[f].intersectsSegment(e,j,d,g)){return boundingBoxes[f]}}return null},polygonContainsPoint:function(k,m,j){var q=k.length;var e=q-2;var f=false;for(var n=0;n<q;n+=2){var b=k[n+1];var g=k[e+1];if((b<j&&g>=j)||(g<j&&b>=j)){var d=k[n];if(d+(j-b)/(g-b)*(k[e]-d)<m){f=!f}}e=n}return f},intersectsSegment:function(v,F,j,D,g){var d=v.length;var E=F-D,f=j-g;var n=F*g-j*D;var C=v[d-2],e=v[d-1];for(var z=0;z<d;z+=2){var A=v[z],b=v[z+1];var m=C*b-e*A;var u=C-A,B=e-b;var k=E*B-f*u;var r=(n*u-E*m)/k;if(((r>=C&&r<=A)||(r>=A&&r<=C))&&((r>=F&&r<=D)||(r>=D&&r<=F))){var q=(n*B-f*m)/k;if(((q>=e&&q<=b)||(q>=b&&q<=e))&&((q>=j&&q<=g)||(q>=g&&q<=j))){return true}}C=A;e=b}return false},getPolygon:function(d){var b=this.boundingBoxes.indexOf(d);return b==-1?null:this.polygons[b]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}};var CG=CG||{VERSION:1,canvas:{},ctx:{},Const_PI_180:Math.PI/180,Const_180_PI:180/Math.PI,LEFT:1,RIGHT:2,UP:3,DOWN:4,mousedown:false,mouse:{x:0,y:0},start:{x:0,y:0},end:{x:0,y:0}};(function(){var d=0;var e=["ms","moz","webkit","o"];for(var b=0;b<e.length&&!window.requestAnimationFrame;++b){window.requestAnimationFrame=window[e[b]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[e[b]+"CancelAnimationFrame"]||window[e[b]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(m,g){var f=new Date().getTime();var j=Math.max(0,16-(f-d));var k=window.setTimeout(function(){m(f+j)},j);d=f+j;return k}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(f){clearTimeout(f)}}}());(function(){var b=false,d=/xyz/.test(function(){var e})?/\b_super\b/:/.*/;CG.Class=function(){};CG.Class.prototype.isA=function(e){return this.className===e};CG.Class.extend=function(m,f,j){if(!typeof m==="string"){j=f;f=m;m=null}var q=this.prototype,r=this;b=true;var n=new r();b=false;function k(u,v){return function(){var z=this._super;this._super=q[u];var y=v.apply(this,arguments);this._super=z;return y}}for(var g in f){n[g]=typeof f[g]==="function"&&typeof q[g]==="function"&&d.test(f[g])?k(g,f[g]):f[g]}function e(){if(!b&&this.init){this.init.apply(this,arguments)}}e.prototype=n;e.prototype.constructor=e;e.extend=CG.Class.extend;if(j){CG._extend(e,j)}if(m){CG[m]=e;e.prototype.className=m;e.className=m}return e}}());var Clock=function(e){this.targetfps=e||60;this.startTime=Date.now();this.ms=this.startTime;this.last=this.startTime;this.time=0;this.dt=0;this.delta=0;this.fps=0;this.frameCount=0;this.frameCounter=true;var d=0;var b=0;this.tick=function(){if(this.frameCounter){this.frameCount++}this.ms=Date.now();this.dt=this.ms-this.last;this.last=this.ms;this.delta=this.dt/(1000/this.targetfps);this.time+=0.001*this.dt;if(this.frameCounter){d+=this.dt;b++;if(d>1000){this.fps=Math.round((b*1000)/d);b=0;d=0}}}};function loadString(b){var d=new XMLHttpRequest();d.open("GET",b,false);d.send(null);if((d.status==200)||(d.status==0)){return d.responseText}return""}String.prototype.ltrim=function(b){if(b){return this.replace(new RegExp("^["+b+"]+"),"")}return this.replace(/^\s+/,"")};String.prototype.rtrim=function(b){if(b){return this.replace(new RegExp("["+b+"]+$"),"")}return this.replace(/\s+$/,"")};String.prototype.trim=function(b){if(b){return this.ltrim(b).rtrim(b)}return this.ltrim().rtrim()};String.prototype.startsWith=function(b){return !this.indexOf(b)};CG.Class.extend("CanvasRenderer",{init:function(b){return this},draw:function(f){Game.b_ctx.save();switch(f.instanceOf){case"Sprite":case"Button":case"Particle":f.updateDiff();Game.b_ctx.globalAlpha=f.alpha;Game.b_ctx.translate(f.position.x,f.position.y);if(f.atlasimage){Game.b_ctx.rotate((f.rotation-f.imagerotation)*CG.Const_PI_180);Game.b_ctx.drawImage(f.image,f.xoffset,f.yoffset,f.cutwidth,f.cutheight,0-f.xhandle,0-f.yhandle,f.cutwidth*f.xscale,f.cutheight*f.yscale)}else{Game.b_ctx.rotate(f.rotation*CG.Const_PI_180);Game.b_ctx.drawImage(f.image,0-f.xhandle,0-f.yhandle,f.image.width*f.xscale,f.image.height*f.yscale)}break;case"Animation":f.updateDiff();Game.b_ctx.globalAlpha=f.alpha;Game.b_ctx.translate(f.position.x,f.position.y);if(f.frames==1){Game.b_ctx.drawImage(f.image,f.position.x,f.position.y,f.image.width*f.xscale,f.image.height*f.yscale)}else{f.fx=f.currentframe*f.width;if((f.fx/f.image.width)>0){f.fx=f.fx%f.image.width}f.fy=Math.floor(f.width*f.currentframe/f.image.width)*f.height;Game.b_ctx.rotate(f.rotation*CG.Const_PI_180);try{Game.b_ctx.drawImage(f.image,f.fx,f.fy,f.width,f.height,0-f.xhandle,0-f.yhandle,f.width*f.xscale,f.height*f.yscale)}catch(j){}}break;case"Font":for(var g=0,d=f.text.length;g<d;g++){var b=f.text.charCodeAt(g);try{Game.b_ctx.drawImage(f.atlas,f.x[b],f.y[b],f.width[b],f.height[b],f.currentX,f.currentY+f.yoff[b],f.width[b],f.height[b])}catch(j){}f.currentX+=f.xadv[b]}break;case"Bitmap":Game.b_ctx.drawImage(f.bitmap_canvas,f.x,f.y);break;case"Map":if(f.orientation=="orthogonal"){Game.b_ctx.globalAlpha=f.layers[f.layer].opacity;Game.b_ctx.translate(f.rx,f.ry);try{Game.b_ctx.drawImage(f.atlas,f.cx,f.cy,f.tilewidth,f.tileheight,f.sx,f.sy,f.tilewidth*f.xscale,f.tileheight*f.yscale)}catch(j){}}else{if(f.orientation=="isometric"){Game.b_ctx.globalAlpha=f.layers[f.layer].opacity;Game.b_ctx.translate(f.xpos,f.ypos);try{Game.b_ctx.drawImage(f.atlas,f.cx,f.cy,f.tilewidth,f.tileset.tileheight,0,0,f.tilewidth*f.xscale,f.tileset.tileheight*f.yscale)}catch(j){}}}break;case"B2DEntity":case"B2DCircle":case"B2DRectangle":case"B2DPolygon":case"B2DBridge":case"B2DRope":Game.b_ctx.globalAlpha=f.alpha;Game.b_ctx.translate(f.body.GetPosition().x*f.scale,f.body.GetPosition().y*f.scale);if(f.atlasimage){Game.b_ctx.rotate((f.body.GetAngleRadians()-f.imagerotation));Game.b_ctx.drawImage(f.image,f.xoffset,f.yoffset,f.cutwidth,f.cutheight,0-f.xhandle,0-f.yhandle,f.cutwidth,f.cutheight)}else{Game.b_ctx.rotate(f.body.GetAngleRadians());Game.b_ctx.drawImage(f.image,0-f.xhandle,0-f.yhandle,f.image.width,f.image.height)}break}Game.b_ctx.restore()}});CG.Class.extend("Delta",{init:function(b){this.targetfps=b;this.currenttime=0;this.lasttime=new Date().getTime();this.elapsedtime=0;this.frametime=0;this.delta=0;this.fps=0},update:function(){this.currenttime=new Date().getTime();var b=(this.currenttime-this.lasttime)/1000;this.fps=1/b;this.lasttime=this.currenttime},getDelta:function(){return this.delta},getFPS:function(){return this.fps}});CG.Class.extend("Entity",{init:function(b){this.name=b||"";this.visible=true},update:function(){throw {name:"Entity Error",message:"Subclass has no update method."}},draw:function(){throw {name:"Entity Error",message:"Subclass has no draw method."}},setImage:function(b){this.atlasimage=false;if(b){if(b instanceof CG.AtlasImage){this.image=Game.asset.getImageByName(b.atlasname);this.imagerotation=b.rotation;this.xoffset=b.xoffset;this.yoffset=b.yoffset;this.width=b.width;this.height=b.height;this.atlasimage=true;if(this.imagerotation!==0){this.cutwidth=b.height;this.cutheight=b.width}else{this.cutwidth=b.width;this.cutheight=b.height}}else{if(typeof b=="string"&&b!=""){this.image=new Image();this.image.src=b;this.width=this.image.width;this.height=this.image.height}else{this.image=b;this.width=this.image.width;this.height=this.image.height}}}}});CG.Entity.extend("Point",{init:function(b,d){this.x=b||0;this.y=d||0}});CG.Point.extend("Vector",{init:function(b,e,d){this._super(this,b,e);this.z=d||0}});CG.Entity.extend("Rectangle",{init:function(d,e,b){this.position=d||new CG.Point(0,0);this.width=e||0;this.height=b||0;this.clickable=false;this.dragable=false;this.rotation=0;this.xscale=1;this.yscale=1;this.clicked=false;this.hover=false;this.boundingradius=0;this.mapcollision=false;return this},AABB:function(){a=this.rotation*CG.Const_PI_180;s=Math.sin(a);c=Math.cos(a);if(s<0){s=-s}if(c<0){c=-c}return{bw:this.height*this.xscale*s+this.width*this.yscale*c,bh:this.height*this.xscale*c+this.width*this.yscale*s}},ifClicked:function(){if(CG.mousedown&&this.clickable){var e=CG.mouse.x-this.position.x,b=CG.mouse.y-this.position.y;var j=Math.sqrt(e*e+b*b);var g=Math.atan2(b,e);var k=g-(this.rotation*CG.Const_PI_180);var d=Math.cos(k)*j;var f=Math.sin(k)*j;if(d>-0.5*(this.width*this.xscale)&&d<0.5*(this.width*this.xscale)&&f>-0.5*(this.height*this.yscale)&&f<0.5*(this.height*this.yscale)){this.clicked=true;CG.mousedown=false}}return false},ifMouseOver:function(){var e=CG.mouse.x-this.position.x,b=CG.mouse.y-this.position.y;var j=Math.sqrt(e*e+b*b);var g=Math.atan2(b,e);var k=g-(this.rotation*CG.Const_PI_180);var d=Math.cos(k)*j;var f=Math.sin(k)*j;if(d>-0.5*(this.width*this.xscale)&&d<0.5*(this.width*this.xscale)&&f>-0.5*(this.height*this.yscale)&&f<0.5*(this.height*this.yscale)){this.hover=true}else{this.hover=false}},checkCollision:function(b,d){b.forEach(function(f,e){if(f.className=="MapArea"){if((this.position.y+this.AABB().bh/2)>=f.bound.y&&this.position.y-this.AABB().bh/2<=(f.bound.y+f.bound.height)&&(this.position.x+this.AABB().bw/2)>=f.bound.x&&this.position.x-this.AABB().bw/2<=(f.bound.x+f.bound.width)){if(f.type==="outer"){w=0.5*(this.width+f.bound.width);h=0.5*(this.height+f.bound.height);dx=this.position.x-(f.bound.width/2+f.bound.x);dy=this.position.y-(f.bound.height/2+f.bound.y);if(Math.abs(dx)<=w&&Math.abs(dy)<=h){wy=w*dy;hx=h*dx;if(wy>hx){if(wy>-hx){direction="bottom";overlap=((this.position.y-this.AABB().bh/2)-(f.bound.y+f.bound.height))>>0}else{direction="CG.LEFT";overlap=((this.position.x+this.AABB().bw/2)-f.bound.x)>>0}}else{if(wy>-hx){direction="right";overlap=((this.position.x-this.AABB().bw/2)-(f.bound.x+f.bound.width))>>0}else{direction="top";overlap=((this.position.y+this.AABB().bh/2)-f.bound.y)>>0}}}collision={overlap:overlap,direction:direction};d(this,f,collision)}}}else{if(this.boundingradius>0&&f.boundingradius>0){distx=this.position.x-f.position.x;disty=this.position.y-f.position.y;dist=Math.sqrt((distx*distx)+(disty*disty));if(dist<=(this.boundingradius/2*this.xscale+f.boundingradius/2*f.yscale)){collision=false;d(this,f,collision)}}else{if((this.position.y+this.AABB().bh/2)>=f.position.y-f.AABB().bh/2&&this.position.y-this.AABB().bh/2<=(f.position.y+f.AABB().bh/2)&&(this.position.x+this.AABB().bw/2)>=f.position.x-f.AABB().bw/2&&this.position.x-this.AABB().bw/2<=(f.position.x+f.AABB().bw/2)){w=0.5*(this.width+f.width);h=0.5*(this.height+f.height);dx=this.position.x-f.position.x;dy=this.position.y-f.position.y;if(Math.abs(dx)<=w&&Math.abs(dy)<=h){wy=w*dy;hx=h*dx;if(wy>hx){if(wy>-hx){direction="bottom";overlap=((this.position.y-this.AABB().bh/2)-(f.position.y-f.AABB().bh/2))>>0}else{direction="CG.LEFT";overlap=((this.position.x+this.AABB().bw/2)-(f.position.x+f.AABB().bw/2))>>0}}else{if(wy>-hx){direction="right";overlap=((this.position.x-this.AABB().bw/2)-(f.position.x-f.AABB().bw/2))>>0}else{direction="top";overlap=((this.position.y+this.AABB().bh/2)-(f.position.y+f.AABB().bh/2))>>0}}}collision={overlap:overlap,direction:direction};d(this,f,collision)}}}},this);return this}});CG.Entity.extend("Bound",{init:function(d,f,e,b){this._super();this.x=d;this.y=f;this.width=e;this.height=b;return this},setName:function(b){this.name=b;return this}});CG.Entity.extend("Buffer",{init:function(e,b,d){this._super(d);this.b_canvas=document.createElement("canvas");this.b_canvas.width=e;this.b_canvas.height=b;this.b_ctx=this.b_canvas.getContext("2d");return this}});CG.Rectangle.extend("Sprite",{init:function(d,b){this._super(b,0,0);this.instanceOf="Sprite";this.atlasimage=false;this.setImage(d);this.bound=Game.bound;this.diffpoint=new CG.Point(this.bound.x,this.bound.y);this.xspeed=0;this.xscale=1;this.xhandle=0;this.yspeed=0;this.yscale=1;this.yhandle=0;this.boundsMode=false;this.rotation=0;this.rotationspeed=0;this.alpha=1;this.clicked=false;this.followobject=false;this.followspeed=false;this.followsteps=false;this.attachedobject=false;this.offsetx=0;this.offsety=0;return this},update:function(){this.ifClicked();this.ifMouseOver();this.ifAttached();if(this.followobject){this.follow()}this.position.x+=this.xspeed;this.position.y+=this.yspeed;this.rotation+=this.rotationspeed;this.xhandle=(this.width*this.xscale/2);this.yhandle=(this.height*this.yscale/2);if(this.boundsMode){this.checkBound()}},draw:function(){Game.renderer.draw(this)},checkBound:function(){switch(this.boundsMode){case"bounce":if(this.position.x>(this.bound.width-this.xhandle+this.bound.x)){this.position.x=this.bound.width-this.xhandle+this.bound.x;this.xspeed=this.xspeed*-1}else{if(this.position.x<this.bound.x+this.xhandle){this.position.x=this.bound.x+this.xhandle;this.xspeed=this.xspeed*-1}}if(this.position.y>(this.bound.height-this.yhandle+this.bound.y)){this.position.y=this.bound.height-this.yhandle+this.bound.y;this.yspeed=this.yspeed*-1}else{if(this.position.y<this.bound.y+this.yhandle){this.position.y=this.bound.y+this.yhandle;this.yspeed=this.yspeed*-1}}break;case"slide":if(this.position.x>(this.bound.width+this.xhandle+this.bound.x)){this.position.x=(this.bound.x-this.xhandle)}else{if(this.position.x<this.bound.x-this.xhandle){this.position.x=this.bound.x+this.bound.width+this.xhandle}}if(this.position.y>(this.bound.height+this.yhandle+this.bound.y)){this.position.y=(this.bound.y-this.yhandle)}else{if(this.position.y<this.bound.y-this.yhandle){this.position.y=this.bound.height+this.yhandle+this.bound.y}}break;default:break}},updateDiff:function(){if(this.diffpoint.x!==this.bound.x){this.position.x+=this.bound.x-this.diffpoint.x}if(this.diffpoint.y!==this.bound.y){this.position.y+=this.bound.y-this.diffpoint.y}this.diffpoint.x=this.bound.x;this.diffpoint.y=this.bound.y},follow:function(){if(this.followspeed){angl=Math.atan2(this.followobject.position.x-this.position.x,this.followobject.position.y-this.position.y)*CG.Const_180_PI;xs=this.followspeed*Math.sin(angl*CG.Const_PI_180);ys=this.followspeed*Math.cos(angl*CG.Const_PI_180);this.xspeed=xs;this.yspeed=ys;this.rotation=angl*-1}else{if(this.followsteps){angl=Math.atan2(this.followobject.position.x-this.position.x,this.followobject.position.y-this.position.y)*CG.Const_180_PI;this.rotation=angl*-1;if(this.followobject.position.x!=this.position.x){distx=this.followobject.position.x-this.position.x;this.xspeed=distx/this.followsteps}else{this.xspeed=0}if(this.followobject.position.y!=this.position.y){disty=this.followobject.position.y-this.position.y;this.yspeed=disty/this.followsteps}else{this.yspeed=0}}}},setBound:function(b){this.bound=b;return this},ifAttached:function(){if(this.attachedobject!=false){this.attachedobject.position._x=this.attachedobject.position.x=(this.position.x+this.offsetx);this.attachedobject.position._y=this.attachedobject.position.y=(this.position.y+this.offsety)}},attachObject:function(b){this.attachedobject=b;return this},removeAttachedObject:function(){this.attachedobject=null;return this},setAttachedOffsetX:function(b){this.offsetx=b;return this},setAttachedOffsetY:function(b){this.offsety=b;return this}});CG.Class.extend("AtlasImage",{init:function(f,e,g,d,b){this.source="";this.atlasimage="";this.atlasname="";this.image=f||"";this.name=f.split(/(\\|\/)/g).pop().split(".")[0];this.xoffset=e||0;this.yoffset=g||0;this.width=d||0;this.height=b||0;this.rotation=0}});CG.Class.extend("AtlasTexturePacker",{init:function(){if(typeof(ejecta)=="undefined"){this.xml="";this.xmlDoc="";this.parser=new DOMParser()||{}}this.imagename="";this.width=0;this.height=0;this.atlasimages=[];return this},loadXml:function(e){if(typeof e=="string"){this.xml=loadString(e)}else{this.xml=e.data}this.xmlDoc=this.parser.parseFromString(this.xml,"text/xml");this.imagename=this.xmlDoc.getElementsByTagName("TextureAtlas")[0].getAttribute("imagePath");this.width=parseInt(this.xmlDoc.getElementsByTagName("TextureAtlas")[0].getAttribute("width"));this.height=parseInt(this.xmlDoc.getElementsByTagName("TextureAtlas")[0].getAttribute("height"));var f=this.xmlDoc.getElementsByTagName("sprite");for(var d=0,b=f.length;d<b;d++){atlasimage=new CG.atlasimage(f[d].getAttribute("n"),parseInt(f[d].getAttribute("x")),parseInt(f[d].getAttribute("y")),parseInt(f[d].getAttribute("w")),parseInt(f[d].getAttribute("h")));if(f[d].getAttribute("r")=="y"){atlasimage.rotation=90}atlasimage.atlasimage=this.imagename;atlasimage.source="xml";atlasimage.atlasname=this.imagename.split(/(\\|\/)/g).pop().split(".")[0];this.atlasimages.push(atlasimage)}return this},loadJson:function(e){if(typeof e=="string"){this.json=JSON.parse(loadString(e))}else{this.json=e.data}this.imagename=this.json.meta.image;this.width=this.json.meta.size.w;this.height=this.json.meta.size.h;for(var d=0,b=this.json.frames.length;d<b;d++){var g=this.json.frames[d];var f=new CG.AtlasImage(g.filename,g.frame.x,g.frame.y,g.frame.w,g.frame.h);if(g.rotated===true){f.rotation=90}f.atlasimage=this.imagename;f.source="json";f.atlasname=this.imagename.split(/(\\|\/)/g).pop().split(".")[0];this.atlasimages.push(f)}return this},getAtlasImages:function(){return this.atlasimages}});CG.Sprite.extend("Animation",{init:function(g,b,j,f,e,d){this._super(g,b);this.instanceOf="Animation";if(typeof g=="string"){this.image=new Image();this.image.src=g}else{this.image=g}this.loop=true;this.status=0;this.currentframe=0;this.frames=0;this.startframe=j-1;this.endframe=f-1;this.width=e;this.height=d;if(this.startframe===undefined&&this.endframe===undefined){this.frames=1;this.startframe=0;this.endframe=0}else{this.currentframe=this.startframe-1;this.frames=this.endframe-this.startframe+1}this.fx=0;this.fy=0;this.delay=0;this.tempdelay=0;return this},update:function(){if(this.status==0){this.tempdelay+=1;if(this.tempdelay>=this.delay){this.tempdelay=0;if(this.frames>1){this.currentframe+=1;if((this.currentframe-this.startframe)>=this.frames){if(this.loop===false){this.status=1}else{this.currentframe=this.startframe}}}}}this._super()},draw:function(){Game.renderer.draw(this)}});CG.Entity.extend("Bitmap",{init:function(d,b){this._super(this);this.instanceOf="Bitmap";this.x=0;this.y=0;this.bitmap_canvas=document.createElement("canvas");this.bitmap_canvas.width=d;this.bitmap_canvas.height=b;this.bitmap_ctx=this.bitmap_canvas.getContext("2d");return this},loadImage:function(b){this.setImage(b);this.drawImageToBuffer();return this},update:function(){},draw:function(){Game.renderer.draw(this)},clearBuffer:function(){this.bitmap_ctx.clearRect(0,0,this.bitmap_canvas.width,this.bitmap_canvas.height);return this},drawImageToBuffer:function(){this.bitmap_ctx.drawImage(this.image,0,0);return this},clearRect:function(d,f,e,b){this.bitmap_ctx.save();this.bitmap_ctx.globalCompositeOperation="destination-out";this.bitmap_ctx.clearRect(d,f,e,b);this.bitmap_ctx.restore()},clearCircle:function(d,e,b){this.bitmap_ctx.save();this.bitmap_ctx.globalCompositeOperation="destination-out";this.bitmap_ctx.beginPath();this.bitmap_ctx.arc(d,e,b,0,2*Math.PI,false);this.bitmap_ctx.closePath();this.bitmap_ctx.fill();this.bitmap_ctx.restore()},getPixel:function(b,d){return this.bitmap_ctx.getImageData(b,d,1,1)},getPixels:function(d,f,e,b){return this.bitmap_ctx.getImageData(d,f,e,b)}});CG.Sprite.extend("Button",{init:function(f,d,g,e,b){this._super(f,d);this.instanceOf="Button";this.font=e;this.clickedCallback=b;this.clicked=false;this.clickable=true;this.visible=true;this.text=g;return this},update:function(){this.ifClicked();this.ifMouseOver();this.ifAttached();this.xhandle=(this.width*this.xscale/2);this.yhandle=(this.height*this.yscale/2);if(this.clicked){if(this.clickedCallback){this.clicked=false;this.clickedCallback(this)}}},draw:function(){if(this.visible==true){Game.renderer.draw(this);this.font.drawText(this.text,this.position.x-(this.font.getTextWidth(this.text)/2>>0),this.position.y-((this.font.getFontSize()/2)>>0))}}});CG.Entity.extend("Menu",{init:function(b,e,d){this.x=b;this.y=e;this.margin=d;this.step=this.y;this.buttons=[];return this},addButton:function(b){this.buttons.push(b)},update:function(){this.buttons.forEach(function(b){b.update()},this)},draw:function(){this.buttons.forEach(function(b){b.position.x=this.x;b.position.y=this.step;b.draw();this.step+=b.height;this.step+=this.margin},this);this.step=this.y}});CG.Class.extend("MediaAsset",{init:function(b){if(b!==""&&typeof b!=="undefined"){this.image=new Image();this.image.src=b}this.ready=false;this.progress=0;this.images=[];this.currimage=0;this.sounds=[];this.currsound=0;this.xmls=[];this.currxml=0;this.jsons=[];this.currjson=0;this.fonts=[];this.currfont=0;this.assetcount=0;this.assetcurrent=0;this.width=300;this.height=20;this.radius=10;this.linewidth=8;this.bordercolor="white";this.progresscolor="red";this.shadowcolor="#222";this.shadowblur=6;this.shadowoffsetx=2;this.shadowoffsety=2},addImage:function(d,b){this.assetcount+=1;this.images.push({name:b||"",path:d,img:new Image()});return this},addFont:function(d,b){this.assetcount+=1;this.fonts.push({name:b||"",path:d,data:""});return this},addXml:function(d,b){this.assetcount+=1;this.xmls.push({name:b||"",path:d,data:""});return this},addJson:function(d,b){this.assetcount+=1;this.jsons.push({name:b||"",path:d,data:""});return this},getImageByName:function(d){for(var e=0,b=this.images.length;e<b;e++){if(this.images[e].name==d){if(this.images[e] instanceof CG.AtlasImage){return this.images[e]}else{return this.images[e].img}}}throw new CG.MediaAssetException("No image with this name in asset.")},getImagesByName:function(d){names=[];for(var e=0,b=this.images.length;e<b;e++){if(this.images[e].name==d){if(this.images[e] instanceof CG.AtlasImage){names.push(this.images[e])}else{names.push(this.images[e].img)}}}if(names.length===0){throw new CG.MediaAssetException("No image with this name in asset.")}return names},getFontByName:function(d){for(var e=0,b=this.fonts.length;e<b;e++){if(this.fonts[e].name==d){return this.fonts[e]}}throw new CG.MediaAssetException("No font with this name in asset.")},getXmlByName:function(d){for(var e=0,b=this.xmls.length;e<b;e++){if(this.xmls[e].name==d){return this.xmls[e]}}throw new CG.MediaAssetException("No XML with this name in asset.")},getJsonByName:function(d){for(var e=0,b=this.jsons.length;e<b;e++){if(this.jsons[e].name==d){return this.jsons[e]}}throw new CG.MediaAssetException("No JSON with this name in asset.")},startPreLoad:function(){this.progress=100/this.assetcount*this.assetcurrent;this.progressScreen();if(this.currimage<this.images.length){this.images[this.currimage].img.onload=function(){console.log("loaded image ("+Math.floor(100/(this.images.length-1)*this.currimage)+" %): "+this.images[this.currimage].name);this.currimage+=1;this.assetcurrent+=1;this.startPreLoad()}.bind(this);this.images[this.currimage].img.src=this.images[this.currimage].path}else{if(this.currfont<this.fonts.length){this.fonts[this.currfont].data=loadString(this.fonts[this.currfont].path);this.currfont+=1;this.assetcurrent+=1;this.startPreLoad()}else{if(this.currxml<this.xmls.length){this.xmls[this.currxml].data=loadString(this.xmls[this.currxml].path);this.currxml+=1;this.assetcurrent+=1;this.startPreLoad()}else{if(this.currjson<this.jsons.length){this.jsons[this.currjson].data=JSON.parse(loadString(this.jsons[this.currjson].path));this.currjson+=1;this.assetcurrent+=1;this.startPreLoad()}else{if(this.currimage==this.images.length&&this.assetcount==this.assetcurrent){this.ready=true;Game.create()}}}}}},progressScreen:function(){var b=(Game.bound.width-this.width)/2;var d=(Game.bound.height-this.height)/2;if(this.image){Game.ctx.drawImage(this.image,0,0,this.image.width,this.image.height)}else{Game.ctx.clearRect(0,0,Game.bound.width,Game.bound.height)}Game.ctx.save();Game.ctx.fillStyle=this.progresscolor;Game.ctx.fillRect((Game.bound.width-this.width)/2,(Game.bound.height-this.height)/2,this.width/100*this.progress,this.height);Game.ctx.strokeStyle=this.bordercolor;Game.ctx.shadowColor=this.shadowcolor;Game.ctx.shadowBlur=this.shadowblur;Game.ctx.shadowOffsetX=this.shadowoffsetx;Game.ctx.shadowOffsetY=this.shadowoffsety;Game.ctx.beginPath();Game.ctx.moveTo(b+this.radius,d);Game.ctx.lineTo(b+this.width-(1*this.radius),d);Game.ctx.arcTo(b+this.width,d,b+this.width,d+this.radius,this.radius);Game.ctx.arcTo(b+this.width,this.radius*2+d,b+this.width-(1*this.radius),this.radius*2+d,this.radius);Game.ctx.lineTo(b+this.radius,2*this.radius+d);Game.ctx.arcTo(b,2*this.radius+d,b,d,this.radius);Game.ctx.arcTo(b,d,2*this.radius+b,d,this.radius);Game.ctx.lineWidth=this.linewidth;Game.ctx.stroke();Game.ctx.restore()}});function MediaAssetException(b){this.message=b}CG.Entity.extend("Font",{init:function(){this.instanceOf="Font";this.atlas=new Image();this.fontFile="";this.chars=new Array(256);this.x=new Array(256);this.y=new Array(256);this.width=new Array(256);this.height=new Array(256);this.xoff=new Array(256);this.yoff=new Array(256);this.xadv=new Array(256);this.lineHeight=0;this.face="";this.size=0;this.bold=0;this.italic=0;this.base=0;this.scaleW=0;this.scaleH=0;this.text="";this.currentX=0;this.currentY=0;return this},update:function(){throw {name:"Font Error",message:"TODO, not defined yet."}},draw:function(){throw {name:"Font Error",message:"TODO, not defined yet."}},drawText:function(d,b,e){this.text=d;this.currentX=b;this.currentY=e;Game.renderer.draw(this)},getLineHeight:function(){return this.lineHeight},getFontSize:function(){return this.size},getTextWidth:function(f){var d=0;var g=0;for(var e=0,b=f.length;e<b;e++){d+=this.xadv[f.charCodeAt(e)]}return d},loadFont:function(j){idnum=0;if(typeof j=="string"){this.fontFile=loadString(j)}else{this.fontFile=j.data}var e=this.fontFile.split("\n");for(l in e){line=e[l].trim();if(line.startsWith("info")||line==""){var k=line.split(" ");for(i in k){var H=k[i];if(H.startsWith("face=")){var z=H.split("=");this.face=z[1].split('"').join("")}if(H.startsWith("size=")){var C=H.split("=");this.size=parseInt(C[1])}if(H.startsWith("bold=")){var E=H.split("=");this.bold=parseInt(E[1])}if(H.startsWith("italic=")){var n=H.split("=");this.italic=parseInt(n[1])}}}if(line.startsWith("padding")){continue}if(line.startsWith("common")){var q=line.split(" ");for(c in q){var B=q[c];if(B.startsWith("lineHeight=")){var J=B.split("=");this.lineHeight=parseInt(J[1])}if(B.startsWith("base=")){var r=B.split("=");this.base=parseInt(r[1])}if(B.startsWith("scaleW=")){var I=B.split("=");this.scaleW=parseInt(I[1])}if(B.startsWith("scaleH=")){var m=B.split("=");this.scaleH=parseInt(m[1])}}}if(line.startsWith("page")){var f=line.split(" ");for(p in f){data=f[p];if(data.startsWith("file=")){var v=data.split("=");this.atlas.src="media/font/"+v[1].split('"').join("")}}}if(line.startsWith("chars")){continue}if(line.startsWith("char")){var A=line.split(" ");for(l in A){ld=A[l];if(ld.startsWith("id=")){var b=ld.split("=");idnum=parseInt(b[1])}if(ld.startsWith("x=")){var F=ld.split("=");this.x[idnum]=parseInt(F[1])}if(ld.startsWith("y=")){var g=ld.split("=");this.y[idnum]=parseInt(g[1])}if(ld.startsWith("width=")){var y=ld.split("=");this.width[idnum]=parseInt(y[1])}if(ld.startsWith("height=")){var u=ld.split("=");this.height[idnum]=parseInt(u[1])}if(ld.startsWith("xoffset=")){var d=ld.split("=");this.xoff[idnum]=parseInt(d[1])}if(ld.startsWith("yoffset=")){var D=ld.split("=");this.yoff[idnum]=parseInt(D[1])}if(ld.startsWith("xadvance=")){var G=ld.split("=");this.xadv[idnum]=parseInt(G[1])}}}}return this}});CG.Entity.extend("Text",{init:function(b){this.font=b;this.text="";this.textcurrent="";this.x=0;this.y=0;this.width=0;this.height=0;this.textAlign="left";return this},initAsTextblock:function(b){return this},initAsScroller:function(){},initAsTicker:function(){},setText:function(b){this.text=b;return this},update:function(){},draw:function(){}});CG.Class.extend("Director",{init:function(){this.screens=[];this.activescreen=0;this.nextscreen=0;this.duration=20;this.stepx=40;this.stepy=30;this.alpha=0;this.mode="fade";this.direction=CG.RIGHT;this.color="rgb(0,0,0)";return this},update:function(){switch(this.mode){case"scale":if(this.nextscreen!=this.activescreen){this.screens[this.activescreen].xscale-=0.4/this.duration;this.screens[this.activescreen].yscale-=0.4/this.duration}else{if(this.nextscreen==this.activescreen){this.screens[this.activescreen].xscale+=0.4/this.duration;this.screens[this.activescreen].yscale+=0.4/this.duration}}if(this.screens[this.activescreen].xscale>=1){this.screens[this.activescreen].xscale=this.screens[this.activescreen].yscale=1;this.screens[this.nextscreen].xscale=this.screens[this.nextscreen].yscale=1}if(this.screens[this.activescreen].xscale<=0){this.screens[this.activescreen].xscale=this.screens[this.activescreen].yscale=1;this.screens[this.nextscreen].xscale=this.screens[this.nextscreen].yscale=0;this.activescreen=this.nextscreen}break;case"fade":if(this.nextscreen!=this.activescreen&&this.alpha<1){this.alpha+=1/this.duration}else{if(this.nextscreen==this.activescreen&&this.alpha!=0){this.alpha-=1/this.duration}}if(this.alpha>=1){this.activescreen=this.nextscreen;this.alpha=1}if(this.alpha<0){this.alpha=0}break;case"slide":if(this.nextscreen!=this.activescreen){switch(this.direction){case CG.UP:this.screens[this.activescreen].position.y-=this.stepy;this.screens[this.nextscreen].position.y-=this.stepy;if(this.screens[this.nextscreen].position.y<0){this.resetScreens();this.activescreen=this.nextscreen}break;case CG.DOWN:this.screens[this.activescreen].position.y+=this.stepy;this.screens[this.nextscreen].position.y+=this.stepy;if(this.screens[this.nextscreen].position.y>0){this.resetScreens();this.activescreen=this.nextscreen}break;case CG.LEFT:this.screens[this.activescreen].position.x-=this.stepx;this.screens[this.nextscreen].position.x-=this.stepx;if(this.screens[this.nextscreen].position.x<0){this.resetScreens();this.activescreen=this.nextscreen}break;case CG.RIGHT:this.screens[this.activescreen].position.x+=this.stepx;this.screens[this.nextscreen].position.x+=this.stepx;if(this.screens[this.nextscreen].position.x>0){this.resetScreens();this.activescreen=this.nextscreen}break}}break}this.screens[this.activescreen].update()},draw:function(){this.screens[this.activescreen].draw();if(this.screens[this.nextscreen].position.x!=0||this.screens[this.nextscreen].position.y!=0){this.screens[this.nextscreen].draw()}if(this.alpha>0){Game.b_ctx.save();Game.b_ctx.globalAlpha=this.alpha;Game.b_ctx.fillStyle=this.color;Game.b_ctx.fillRect(0,0,Game.bound.width,Game.bound.height);Game.b_ctx.restore()}},nextScreen:function(b,f,e){var d=this.getIndexOfScreen(b);if(d!=this.activescreen){this.resetScreens();this.mode=f;this.duration=e;this.stepx=Game.canvas.width/this.duration>>0;this.stepy=Game.canvas.height/this.duration>>0;this.nextscreen=d;if(this.mode==="scale"){this.alpha=0}else{if(this.mode==="fade"){}else{if(this.mode==="slide"){switch(this.direction){case CG.UP:this.screens[this.nextscreen].position.y+=CG.canvas.height;break;case CG.DOWN:this.screens[this.nextscreen].position.y-=CG.canvas.height;break;case CG.LEFT:this.screens[this.nextscreen].position.x+=CG.canvas.width;break;case CG.RIGHT:default:this.screens[this.nextscreen].position.x-=CG.canvas.width;break}}}}}return this},resetScreens:function(){this.screens[this.activescreen].position=new CG.Point(0,0);this.screens[this.nextscreen].position=new CG.Point(0,0);return this},addScreen:function(b){this.screens.push(b);return this},getScreenByName:function(e){for(var d=0,b=this.screens.length;d<b;d++){if(this.screens[d].name==e){return this.screens[d]}}return false},getIndexOfScreen:function(e){for(var d=0,b=this.screens.length;d<b;d++){if(this.screens[d].name==e){return d}}return false},getActiveScreenName:function(){return this.screens[this.activescreen].name},setDirection:function(b){this.direction=b;return this}});CG.Entity.extend("Screen",{init:function(b){this._super(b);this.position=new CG.Point(0,0);this.xscale=1;this.yscale=1;this.layers=[];return this},create:function(){},update:function(){for(var d=0,b=this.layers.length;d<b;d++){this.layers[d].update()}},draw:function(){Game.b_ctx.save();if(this.xscale!==1||this.yscale!==1){Game.b_ctx.translate((Game.width-(Game.width*this.xscale))/2,(Game.height-(Game.height*this.yscale))/2);Game.b_ctx.scale(this.xscale,this.yscale)}else{Game.b_ctx.translate(this.position.x,this.position.y)}for(var d=0,b=this.layers.length;d<b;d++){this.layers[d].draw()}Game.b_ctx.restore()},addLayer:function(b){this.layers.push(b);return this},getLayerByName:function(e){for(var d=0,b=this.layers.length;d<b;d++){if(this.layers[d].name==e){return this.layers[d]}}return false}});CG.Entity.extend("Layer",{init:function(d){this._super(d);var b=this;this.elements=[];this.elementsToDelete=[];return this},update:function(){if(this.visible==true){for(var d=0,b=this.elements.length;d<b;d++){this.elements[d].update();if(this.elements[d].status==1){this.elementsToDelete.push(this.elements[d])}}if(this.elementsToDelete.length>0){this._deleteElements()}}},draw:function(){if(this.visible==true){for(var d=0,b=this.elements.length;d<b;d++){this.elements[d].draw()}}},_deleteElements:function(){this.elementsToDelete.reverse();this.elementsToDelete.forEach(this._deleteElement,this);this.elementsToDelete=[]},_deleteElement:function(b){this.elements.splice(b,1)},addElement:function(b){this.elements.push(b);return this},getElementByName:function(d){for(var e=0,b=this.elements.length;e<b;e++){if(this.elements[e].name==d){return this.elements[e]}}return false},getElementsByName:function(d){elements=[];for(var e=0,b=this.elements.length;e<b;e++){if(this.elements[e].name==d){elements.push(this.elements[e])}}return elements}});CG.Class.extend("MapTileLayer",{init:function(){this.width=0;this.height=0;this.visible=true;this.opacity=1;this.tiles=[];return this}});CG.Class.extend("MapTileProperties",{init:function(){this.animated=false;this.animDelay=0;this.animDirection=0;this.animNext=0;this.delayTimer=0;return this}});CG.Class.extend("MapPoint",{init:function(b,f,d,e){this.initposition=b||new CG.Point(0,0);this.mapoffset=f||new CG.Point(0,0);this.gid=e;this.name=d;this.position=new CG.Point(b.x,b.y);return this},update:function(){this.position.x=this.initposition.x-this.mapoffset.x;this.position.y=this.initposition.y-this.mapoffset.y}});CG.Class.extend("MapArea",{init:function(f,e,b,d){this.initbound=f||new CG.Bound(0,0,0,0);this.mapoffset=e||new CG.Point(0,0);this.name=b;this.type=d||false;this.bound=new CG.Bound(f.x,f.y,f.width,f.height);return this},update:function(){this.bound.x=this.initbound.x-this.mapoffset.x;this.bound.y=this.initbound.y-this.mapoffset.y}});CG.Entity.extend("Map",{init:function(d,b,e){this._super(e);this.instanceOf="Map";this.elements=[];this.points=[];this.areas=[];this.position=new CG.Point(0,0);this.changemap="";this.animated=false;this.animDelayFactor=20;this.atlas=new Image();this.atlaswidth=0;this.atlasheight=0;this.atlastranscol="";if(typeof(ejecta)=="undefined"){this.xml="";this.parser=new DOMParser();this.xmlDoc=""}this.json={};this.layers=[];this.renderlayer="all";this.tileproperties=[];this.orientation="";this.width=0;this.height=0;this.tilewidth=0;this.tileheight=0;this.tileset={tilewidth:0,tileheight:0,offsetx:0,offsety:0,spacing:0,margin:0};this.xspeed=0;this.yspeed=0;this.xscale=1;this.yscale=1;this.alpha=1;this.wrapX=false;this.wrapY=false;this.layertocheck=0;return this},loadMapXml:function(f){this.changemap="";this.animated=false;this.layers=[];if(typeof f=="string"){this.xml=loadString(f)}else{this.xml=f.data}this.removeJsonData();this.xmlDoc=this.parser.parseFromString(this.xml,"text/xml");var D=map.xmlDoc.getElementsByTagName("map")[0];this.orientation=D.getAttribute("orientation");this.width=parseInt(D.getAttribute("width"));this.height=parseInt(D.getAttribute("height"));this.tilewidth=parseInt(D.getAttribute("tilewidth"));this.tileheight=parseInt(D.getAttribute("tileheight"));var n=D.childElementCount;var e=D.firstElementChild;for(i=0;i<n;i++){console.log(">"+e.nodeName);switch(e.nodeName){case"tileset":this.tileset.tilewidth=parseInt(e.getAttribute("tilewidth"));this.tileset.tileheight=parseInt(e.getAttribute("tileheight"));if(e.getAttribute("spacing")){this.tileset.spacing=parseInt(e.getAttribute("spacing"))}if(e.getAttribute("margin")){this.tileset.margin=parseInt(e.getAttribute("margin"))}if(e.getElementsByTagName("tileoffset")[0]){this.tileset.offsetx=parseInt(e.getElementsByTagName("tileoffset")[0].getAttribute("x"));this.tileset.offsety=parseInt(e.getElementsByTagName("tileoffset")[0].getAttribute("y"))}var q=e.getElementsByTagName("image")[0];this.atlas.src="media/map/"+q.getAttribute("source");this.atlaswidth=parseInt(q.getAttribute("width"));this.atlasheight=parseInt(q.getAttribute("height"));this.atlastranscol=q.getAttribute("trans");break;case"layer":var g=new CG.MapTileLayer();data=e.getElementsByTagName("data")[0];if(data.getAttribute("encoding")=="csv"){g.tiles=data.textContent.replace(/(\r\n|\n|\r)/gm,"").split(",");console.log("map encoding csv [layer "+i+"]")}else{if(data.getAttribute("encoding")=="base64"&&data.getAttribute("compression")=="gzip"){throw"base64 gzip compressed map format not supported at the moment"}else{if(data.getAttribute("encoding")=="base64"&&data.getAttribute("compression")=="zlib"){throw"base64 zlib compressed map format not supported at the moment"}else{if(data.getAttribute("encoding")=="base64"){throw"base64 map format not supported at the moment"}else{console.log("map encoding xml [layer "+i+"]");var B=e.getElementsByTagName("tile");for(x in B){if(x<B.length){g.tiles[x]=parseInt(B[x].getAttribute("gid"))}}}}}}g.name=e.getAttribute("name");g.width=parseInt(e.getAttribute("width"));g.height=parseInt(e.getAttribute("height"));if(e.getAttribute("opacity")){g.opacity=parseFloat(e.getAttribute("opacity"))}if(e.getAttribute("visible")==="0"){g.visible=false}this.layers.push(g);break;case"objectgroup":console.log("grouplayer found");var b=e.getElementsByTagName("object");for(o in b){if(o<b.length){var m=b[o];var E=m.getAttribute("name");if(m.getAttribute("gid")){this.points.push(new CG.MapPoint(new CG.Point(parseInt(m.getAttribute("x")),parseInt(m.getAttribute("y"))),this.position,m.getAttribute("name"),parseInt(m.getAttribute("gid"))));console.log("tile as oject found: "+E);console.log(m)}else{if(m.getAttribute("width")){type=false;k=m.getElementsByTagName("property");console.log(k.length);for(var r=0,y=k.length;r<y;r++){if(k[r].getAttribute("name")=="type"){type=k[r].getAttribute("value")}}this.areas.push(new CG.MapArea(new CG.Bound(parseInt(m.getAttribute("x")),parseInt(m.getAttribute("y")),parseInt(m.getAttribute("width")),parseInt(m.getAttribute("height"))),this.position,m.getAttribute("name"),type));console.log("group object found: "+E);console.log(m)}else{if(m.getElementsByTagName("polygon").length>0){console.log("polygon found: "+E)}else{if(m.getElementsByTagName("polyline").length>0){console.log("polyline found: "+E)}}}}}}break}e=e.nextElementSibling}this.tileproperties=Array(parseInt((this.atlaswidth/this.tilewidth))*parseInt((this.atlasheight/this.tileheight)));var B=map.xmlDoc.getElementsByTagName("tileset")[0].getElementsByTagName("tile");var j=new Date().getTime();for(i in B){var z=new CG.MapTileProperties();var C=B[i];if(i<this.tileproperties.length){var u=C.getAttribute("id");var k=C.getElementsByTagName("properties")[0].getElementsByTagName("property");for(r in k){if(r<k.length){var d=k[r];var A=d.getAttribute("name");var v=d.getAttribute("value");if(A=="name"){z.name=v}else{if(A=="anim_delay"){z.animDelay=parseInt(v);z.delayTimer=j;this.animated=true}else{if(A=="anim_direction"){z.animDirection=parseInt(v)}else{if(A=="anim_next"){z.animNext=parseInt(v);z.animated=true}}}}}}this.tileproperties[u]=z}}return this},loadMapJson:function(d){this.changemap="";this.animated=false;this.layers=[];if(typeof d=="string"){this.json=JSON.parse(loadString(d))}else{this.json=d.data}this.removeXmlData();this.orientation=this.json.orientation;this.width=this.json.width;this.height=this.json.height;this.tilewidth=this.json.tilewidth;this.tileheight=this.json.tileheight;for(i=0,l=this.json.layers.length;i<l;i++){switch(this.json.layers[i].type){case"tilelayer":var m=new CG.MapTileLayer();m.tiles=this.json.layers[i].data;m.name=this.json.layers[i].name;m.width=this.json.layers[i].width;m.height=this.json.layers[i].height;m.opacity=this.json.layers[i].opacity;m.visible=this.json.layers[i].visible;this.layers.push(m);break;case"objectgroup":console.log("grouplayer found");var k=this.json.layers[i].objects;for(o in k){if(o<k.length){var f=k[o];var b=f.name;if(f.gid){this.points.push(new CG.MapPoint(new CG.Point(parseInt(f.x),parseInt(f.y)),this.position,f.name,parseInt(f.gid)));console.log("tile as oject found: "+b);console.log(f)}else{if(f.width){this.areas.push(new CG.MapArea(new CG.Bound(parseInt(f.x),parseInt(f.y),parseInt(f.width),parseInt(f.height)),this.position,f.name,f.properties.type));console.log("group object found: "+b);console.log(f)}else{if(f.polygon){console.log("polygon found: "+b)}else{if(f.polyline){console.log("polyline found: "+b)}}}}}}break}}this.atlas.src="media/map/"+this.json.tilesets[0].image;this.atlaswidth=this.json.tilesets[0].imagewidth;this.atlasheight=this.json.tilesets[0].imageheight;this.atlastranscol=this.json.tilesets[0].transparentcolor;this.tileproperties=Array(parseInt((this.atlaswidth/this.tilewidth))*parseInt((this.atlasheight/this.tileheight)));var j=this.json.tilesets[0].tileproperties;var e=new Date().getTime();for(id in j){var n=new CG.MapTileProperties();var g=j[id];n.name=g.name;n.animDelay=parseInt(g.anim_delay);n.delayTimer=(n.animDelay>0)?e:0;n.animated=(n.animDelay>0)?true:false;n.animNext=parseInt(g.anim_next);if(n.animDelay>0){this.animated=true}n.animDirection=parseInt(g.anim_direction);this.tileproperties[id]=n}return this},drawMap:function(z,v,q,n,u,k,A){this.position.x=q;this.position.y=n;this.bx=q||this.bx||0;this.by=n||this.by||0;this.bw=u||Game.bound.width;this.bh=k||Game.bound.height;this.sx=z||this.sx||0;this.sy=v||this.sy||0;this.callback=A||false;this.rx=0;this.ry=0;this.cx=0;this.cy=0;this.xpos=0;this.ypos=0;this.layer=0;this.updatePointsAndAreas();if(this.changemap!=""){this.loadMap(this.changemap)}if(this.visible){this.updateAnimation();if(this.layers.length>0){for(this.layer=0,j=this.layers.length;this.layer<j;this.layer++){var C=this.layers[this.layer];if(this.renderlayer==C.name||this.renderlayer==this.layer||this.renderlayer=="all"){if(this.orientation=="orthogonal"&&C.visible==true){modx=(this.bx*this.xscale)%this.tilewidth;mody=(this.by*this.yscale)%this.tileheight;r=this.by;my=Math.floor(parseFloat(this.by)/parseFloat(this.tileheight))>>0;var f=(this.by+this.bh+this.tileheight);while(r<f){x=this.bx;mx=Math.floor(parseFloat(this.bx)/parseFloat(this.tilewidth))>>0;var g=(this.bx+this.bw+this.tilewidth);while(x<g){if((this.wrapX||(mx>=0&&mx<this.width))&&(this.wrapY||(my>=0&&my<this.height))){mx2=mx;my2=my;while(mx2<0){mx2+=this.width}while(mx2>=this.width){mx2-=this.width}while(my2<0){my2+=this.height}while(my2>=this.height){my2-=this.height}m=C.tiles[mx2+my2*C.width]-1;if(m>=0){if(modx<0){modx+=this.tilewidth}if(mody<0){mody+=this.tileheight}this.rx=x-modx-this.bx;this.ry=r-mody-this.by;if(this.elements.length>0&&this.layertocheck==j){for(var e=0,j=this.elements.length;e<j;e++){if(this.checkMapCollision(this.elements[0],this.rx,this.ry)){this.callback(this.elements[e],this.tileproperties[m])}}}this.cx=(m%(this.atlaswidth/this.tilewidth))*this.tilewidth;this.cy=Math.floor(this.tilewidth*m/this.atlaswidth)*this.tileheight;Game.renderer.draw(this)}}x=x+this.tilewidth;mx+=1}r=r+this.tileheight;my+=1}}else{if(this.orientation=="isometric"){var B=C.width+C.height;for(var r=0;r<B;r++){var b=r;var d=0;while(b>=C.height){b-=1;d+=1}while(b>=0&&d<C.width){var m=C.tiles[d+b*C.width];this.xpos=(d-b-1)*this.tilewidth/2-q;this.ypos=(d+b+1)*this.tileheight/2-n;if(this.xpos>-this.tileset.tilewidth&&this.xpos<u&&this.ypos>-this.tileset.tileheight&&this.ypos<k){if(m>0){this.cx=((m-1)%(this.atlaswidth/this.tilewidth))*this.tilewidth;this.cy=Math.floor(this.tilewidth*(m-1)/this.atlaswidth)*this.tileset.tileheight;Game.renderer.draw(this)}}b-=1;d+=1}}}}}}}}},updatePointsAndAreas:function(){this.points.forEach(function(b,d){b.update()},this);this.areas.forEach(function(d,b){d.update()},this)},getPointsByName:function(d){points=[];for(var e=0,b=this.points.length;e<b;e++){if(this.points[e].name===d){points.push(this.points[e])}}if(points.length>0){return points}return false},getAreasByName:function(d){areas=[];for(var e=0,b=this.areas.length;e<b;e++){if(this.areas[e].name===d){areas.push(this.areas[e])}}if(areas.length>0){return areas}return false},setLayerToRender:function(b){this.renderlayer=b;return this},update:function(){this.bx+=this.xspeed;this.by+=this.yspeed;if(this.getBounds().width-Game.bound.width<this.bx){this.xspeed=this.xspeed*-1}if(this.bx<0){this.xspeed=this.xspeed*-1}if(this.getBounds().height-Game.bound.height<this.by){this.yspeed=this.yspeed*-1}if(this.by<0){this.yspeed=this.yspeed*-1}return this},draw:function(){this.drawMap(this.bx,this.by,this.bw,this.bh,this.sx,this.sy,this.callback);return this},getBounds:function(){return{width:this.width*this.tilewidth,height:this.height*this.tileheight}},updateAnimation:function(){if(this.visible&&this.animated){if(this.layers.length>0){for(var f=0,b=this.layers.length;f<b;f++){var k=new Date().getTime();for(t=0;t<this.layers[f].tiles.length;t++){var g=this.layers[f].tiles[t];if(g>0){try{var d=this.tileproperties[g-1];if(d.animated&&d.animDirection!=0){if(k>(d.delayTimer+(d.animDelay/this.animDelayFactor))){switch(d.animDirection){case 1:this.layers[f].tiles[t]+=d.animNext;this.tileproperties[g-1+d.animNext].delayTimer=k;break;case -1:this.layers[f].tiles[t]-=d.animNext;this.tileproperties[g-1-d.animNext].delayTimer=k;break;default:break}}}}catch(j){}}}}}}},addElement:function(b){this.elements.push(b);return this},checkMapCollision:function(d,j,g){if(d.boundingradius>0){var b=d.boundingradius/2*d.xscale;var f=d.boundingradius/2*d.yscale;if(d.position.x+b>=j&&d.position.x-b<=j+this.tilewidth&&d.position.y+f>=g&&d.position.y-f<=g+this.tileheight){return true}}else{var k=d.width/2*d.xscale;var e=d.height/2*d.yscale;if(d.position.x+k>=j&&d.position.x-k<=j+this.tilewidth&&d.position.y+e>=g&&d.position.y-e<=g+this.tileheight){return true}}return false},checkElementsToAreasCollision:function(f,e){for(var d=0,b=f.length;d<b;d++){obj=f[d].checkCollision(this.areas,e)}return this},removeJsonData:function(){this.json={};return this},removeXmlData:function(){this.xml="";this.xmlDoc="";return this}});CG.Entity.extend("Sequence",{init:function(b){this._super(b);this.current=0;this.loop=false;this.translations=[];return this},addTranslation:function(b){this.translations.push(b);return this},update:function(b){if(this.current<this.translations.length){if(this.translations[this.current].finished===false){this.translations[this.current].update()}else{this.current+=1}}else{if(this.loop){this.reset()}else{}}},draw:function(){},reset:function(){for(var d=0,b=this.translations.length;d<b;d++){this.translations[d].reset()}this.current=0;return this}});CG.Entity.extend("Translate",{init:function(){this._super();this.type="";this.tx=0;this.ty=0;this.x1=0;this.y1=0;this.x2=0;this.y2=0;this.bx=0;this.by=0;this.theobj={};this.r1=0;this.r2=0;this.startangle=0;this.angle=0;this.speed=0;this.steps=0;this.step=0;this.positions=[];this.finished=false;return this},initTween:function(f,k,b,n){this.type="tween";this.theobj=f;this.steps=k;this.x1=b.x;this.y1=b.y;this.x2=n.x;this.y2=n.y;var m=(this.x2-this.x1)/this.steps;var j=(this.y2-this.y1)/this.steps;var g=this.x1>>0;var d=this.y1>>0;for(var e=0;e<=this.steps;e++){this.positions.push(new CG.Point(g,d));g+=m;d+=j}return this},initOval:function(g,f,e,b,j,d){this.type="oval";this.theobj=g;this.x1=f.x;this.y1=f.y;this.r1=e;this.r2=b;this.startangle=j;this.speed=d;return this},initBezier:function(j,f,b,k,e,d){this.type="bezier";this.theobj=j;this.steps=f;this.start=k;this.end=b;if(this.control2=="undefined"&&this.control1=="undefined"){this.control2=new CG.Point(this.start.x+3*(this.end.x-this.start.x)/4,this.start.y+3*(this.end.y-this.start.y)/4)}else{this.control2=d||e}this.control1=e||new CG.Point(this.start.x+(this.end.x-this.start.x)/4,this.start.y+(this.end.y-this.start.y)/4);b1=function(n){return(n*n*n)};b2=function(n){return(3*n*n*(1-n))};b3=function(n){return(3*n*(1-n)*(1-n))};b4=function(n){return((1-n)*(1-n)*(1-n))};for(var g=0;g<=this.steps;g++){percent=(1/this.steps)*g;var m=new CG.Point();m.x=this.start.x*b1(percent)+this.control1.x*b2(percent)+this.control2.x*b3(percent)+this.end.x*b4(percent);m.y=this.start.y*b1(percent)+this.control1.y*b2(percent)+this.control2.y*b3(percent)+this.end.y*b4(percent);this.positions.push(m)}return this},draw:function(){},update:function(){var d=this.theobj;switch(this.type){case"bezier":case"tween":if(this.step<this.steps){d.position.x=d.position._x=this.positions[this.step].x;d.position.y=d.position._y=this.positions[this.step].y;this.step+=1}else{this.finished=true}break;case"oval":var b=this.startangle*CG.Const_PI_180;this.tx=this.x1-(this.r1*Math.cos(b));this.ty=this.y1-(this.r2*Math.sin(b));this.startangle+=this.speed;if(this.startangle>360){this.startangle=0+(this.startangle-360)}d.position.x=d.position._x=this.tx>>0;d.position.y=d.position._y=this.ty>>0;break;default:break}},draw:function(){},reset:function(){this.step=0;this.finished=false}});CG.Entity.extend("Morph",{init:function(f,d,b,e){this.mode=f;this.min=d;this.max=b;this.speed=e;this.angle=0;this.rad=this.max-this.min;this.val=0},update:function(){switch(this.mode){case"sinus":var b=this.angle*CG.Const_PI_180;this.val=this.rad*Math.sin(b);if(this.val<0){this.val=this.val*-1}this.angle+=this.speed;if(this.angle>360){this.angle=0+(this.angle-360)}break}return this},draw:function(){},getVal:function(){return this.val}});CG.Sprite.extend("Particle",{init:function(b){this._super(b,new CG.Point(0,0));this.instanceOf="Particle";this.lifetime=100;this.currtime=this.lifetime;this.aging=1;this.fadeout=false;this.alpha=1;this.gravity=0},update:function(){if(this.visible){if(this.fadeout){this.alpha=this.currtime/this.lifetime;if(this.alpha<=0){this.visible=false}}this.currtime-=this.aging;if(this.currtime<0){this.visible=false}this.position.x+=this.xspeed;this.position.y+=this.yspeed;this.yspeed+=this.gravity;this.rotation+=this.rotationspeed;this.xhandle=(this.width*this.xscale/2);this.yhandle=(this.height*this.yscale/2)}},draw:function(){if(this.visible){Game.renderer.draw(this)}}});CG.Entity.extend("Emitter",{init:function(b){this._super();this.particles=[];this.maxparticles=50;this.creationtime=100;this.currenttime=0;this.creationspeed=50;this.gravity=0.05;this.image=null;this.type="";this.position=b||new CG.Point(0,0);this.position._x=this.position.x;this.position._y=this.position.y;this.rotation=0;this.width=200;this.height=200;this.radius=0;this.pspeed=10;this.protation=0;this.pdirection=0;this.plifetime=100;this.paging=1;this.pfadeout=false;return this},initAsPoint:function(b){this.image=b;this.type="point";return this},initAsExplosion:function(e,d,b){this.image=e;this.type="explosion";this.min=d;this.max=b;return this},initAsCorona:function(d,b){this.image=d;this.type="corona";this.radius=b||0;return this},initAsLine:function(e,b,d){this.image=e;this.width=b||200;this.pdirection=d||CG.UP;this.type="line";return this},initAsRectangle:function(e,d,b){this.image=e;this.width=d||200;this.height=b||200;this.type="rectangle";return this},createParticle:function(){particle=new CG.Particle(this.image);return particle},initParticle:function(d){if(this.pfadeout){d.fadeout=true}d.gravity=this.gravity;d.alpha=1;d.visible=true;d.lifetime=this.plifetime;d.currtime=this.plifetime;d.rotationspeed=this.protation;switch(this.type){case"corona":var b=this.getRandom(0,359)*CG.Const_PI_180;d.position.x=this.getX()-(this.radius*Math.cos(b));d.position.y=this.getY()-(this.radius*Math.sin(b));angl=Math.atan2(d.position.x-this.getX(),d.position.y-this.getY())*CG.Const_180_PI;d.xspeed=this.pspeed*Math.sin(angl*CG.Const_PI_180);d.yspeed=this.pspeed*Math.cos(angl*CG.Const_PI_180);break;case"rectangle":rndx=this.getRandom(this.width/2*-1,this.width/2);rndy=this.getRandom(this.height/2*-1,this.height/2);d.position.x=this.position._x-rndx;d.position.y=this.position._y-rndy;d.xspeed=0;d.yspeed=0;break;case"line":rnd=this.getRandom(this.width/2*-1,this.width/2);switch(this.pdirection){default:case CG.UP:d.xspeed=0;d.yspeed=this.pspeed*-1;d.position.x=rnd+this.getX();d.position.y=this.position._y;break;case CG.DOWN:d.xspeed=0;d.yspeed=this.pspeed;d.position.x=rnd+this.getX();d.position.y=this.position._y;break;case CG.LEFT:d.xspeed=this.pspeed*-1;d.yspeed=0;d.position.x=this.position._x;d.position.y=rnd+this.getY();break;case CG.RIGHT:d.xspeed=this.pspeed;d.yspeed=0;d.position.x=this.position._x;d.position.y=rnd+this.getY();break}break;case"explosion":d.position.x=this.position._x;d.position.y=this.position._y;d.xspeed=this.getRandom(this.min,this.max);d.yspeed=this.getRandom(this.min,this.max);break;case"point":default:d.xspeed=0;d.yspeed=0;d.position.x=this.position._x;d.position.y=this.position._y;break}return d},update:function(){if(this.visible){this.currenttime+=this.creationspeed;if(this.currenttime>=this.creationtime){this.currenttime=0;if(this.particles.length<this.maxparticles){this.particles.push(this.initParticle(this.createParticle()))}else{particle=this.searchInvisibleParticle();this.initParticle(particle);this.particles.sort(function(f,e){return f.currtime-e.currtime})}}for(var d=0,b=this.particles.length;d<b;d++){this.particles[d].update()}return this}},draw:function(){if(this.visible){for(var d=0,b=this.particles.length;d<b;d++){this.particles[d].draw()}return this}},searchInvisibleParticle:function(){for(var d=0,b=this.particles.length;d<b;d++){if(this.particles[d].visible==false){return this.particles[d]}}return this},setEmitterPosition:function(b){this.position=b;return this},setName:function(b){this.name=b;return this},setCreationTime:function(b){this.creationtime=b;return this},setMaxParticles:function(b){this.maxparticles=b;return this},setGravity:function(b){this.gravity=b;return this},setParticleSpeed:function(b){this.pspeed=b;return this},setProtation:function(b){this.protation=b;return this},setPLifetime:function(b){this.plifetime=b;return this},activateFadeout:function(){this.pfadeout=true;return this},deactivateFadeout:function(){this.pfadeout=false;return this},getRandom:function(d,b){return Math.random()*(b-d+1)+d>>0},getX:function(){return this.position._x},getY:function(){return this.position._y}});var COMPILED=!0,goog=goog||{};goog.global=this;goog.DEBUG=!1;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.provide=function(e){if(!COMPILED){if(goog.isProvided_(e)){throw Error('Namespace "'+e+'" already declared.')}delete goog.implicitNamespaces_[e];for(var d=e;(d=d.substring(0,d.lastIndexOf(".")))&&!goog.getObjectByName(d);){goog.implicitNamespaces_[d]=!0}}goog.exportPath_(e)};goog.setTestOnly=function(b){if(COMPILED&&!goog.DEBUG){throw b=b||"",Error("Importing test-only code into non-debug environment"+b?": "+b:".")}};COMPILED||(goog.isProvided_=function(b){return !goog.implicitNamespaces_[b]&&!!goog.getObjectByName(b)},goog.implicitNamespaces_={});goog.exportPath_=function(f,d,j){f=f.split(".");j=j||goog.global;f[0] in j||!j.execScript||j.execScript("var "+f[0]);for(var g;f.length&&(g=f.shift());){!f.length&&goog.isDef(d)?j[g]=d:j=j[g]?j[g]:j[g]={}}};goog.getObjectByName=function(g,f){for(var m=g.split("."),j=f||goog.global,k;k=m.shift();){if(goog.isDefAndNotNull(j[k])){j=j[k]}else{return null}}return j};goog.globalize=function(f,d){var j=d||goog.global,g;for(g in f){j[g]=f[g]}};goog.addDependency=function(j,g,q){if(!COMPILED){var m;j=j.replace(/\\/g,"/");for(var n=goog.dependencies_,k=0;m=g[k];k++){n.nameToPath[m]=j,j in n.pathToNames||(n.pathToNames[j]={}),n.pathToNames[j][m]=!0}for(m=0;g=q[m];m++){j in n.requires||(n.requires[j]={}),n.requires[j][g]=!0}}};goog.ENABLE_DEBUG_LOADER=!0;goog.require=function(e){if(!COMPILED&&!goog.isProvided_(e)){if(goog.ENABLE_DEBUG_LOADER){var d=goog.getPathFromDeps_(e);if(d){goog.included_[d]=!0;goog.writeScripts_();return}}e="goog.require could not find: "+e;goog.global.console&&goog.global.console.error(e);throw Error(e)}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(e,d){return e};goog.abstractMethod=function(){throw Error("unimplemented abstract method")};goog.addSingletonGetter=function(b){b.getInstance=function(){if(b.instance_){return b.instance_}goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=b);return b.instance_=new b}};goog.instantiatedSingletons_=[];!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var b=goog.global.document;return"undefined"!=typeof b&&"write" in b},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH){goog.basePath=goog.global.CLOSURE_BASE_PATH}else{if(goog.inHtmlDocument_()){for(var f=goog.global.document.getElementsByTagName("script"),d=f.length-1;0<=d;--d){var j=f[d].src,g=j.lastIndexOf("?"),g=-1==g?j.length:g;if("base.js"==j.substr(g-7,7)){goog.basePath=j.substr(0,g-7);break}}}}},goog.importScript_=function(e){var d=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[e]&&d(e)&&(goog.dependencies_.written[e]=!0)},goog.writeScriptTag_=function(e){if(goog.inHtmlDocument_()){var d=goog.global.document;if("complete"==d.readyState){if(/\bdeps.js$/.test(e)){return !1}throw Error('Cannot write "'+e+'" after document load')}d.write('<script type="text/javascript" src="'+e+'">\x3c/script>');return !0}return !1},goog.writeScripts_=function(){function g(e){if(!(e in j.written)){if(!(e in j.visited)&&(j.visited[e]=!0,e in j.requires)){for(var b in j.requires[e]){if(!goog.isProvided_(b)){if(b in j.nameToPath){g(j.nameToPath[b])}else{throw Error("Undefined nameToPath for "+b)}}}}e in m||(m[e]=!0,f.push(e))}}var f=[],m={},j=goog.dependencies_,k;for(k in goog.included_){j.written[k]||g(k)}for(k=0;k<f.length;k++){if(f[k]){goog.importScript_(goog.basePath+f[k])}else{throw Error("Undefined script input")}}},goog.getPathFromDeps_=function(b){return b in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[b]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));goog.typeOf=function(e){var d=typeof e;if("object"==d){if(e){if(e instanceof Array){return"array"}if(e instanceof Object){return d}var f=Object.prototype.toString.call(e);if("[object Window]"==f){return"object"}if("[object Array]"==f||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice")){return"array"}if("[object Function]"==f||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call")){return"function"}}else{return"null"}}else{if("function"==d&&"undefined"==typeof e.call){return"object"}}return d};goog.isDef=function(b){return void 0!==b};goog.isNull=function(b){return null===b};goog.isDefAndNotNull=function(b){return null!=b};goog.isArray=function(b){return"array"==goog.typeOf(b)};goog.isArrayLike=function(e){var d=goog.typeOf(e);return"array"==d||"object"==d&&"number"==typeof e.length};goog.isDateLike=function(b){return goog.isObject(b)&&"function"==typeof b.getFullYear};goog.isString=function(b){return"string"==typeof b};goog.isBoolean=function(b){return"boolean"==typeof b};goog.isNumber=function(b){return"number"==typeof b};goog.isFunction=function(b){return"function"==goog.typeOf(b)};goog.isObject=function(e){var d=typeof e;return"object"==d&&null!=e||"function"==d};goog.getUid=function(b){return b[goog.UID_PROPERTY_]||(b[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(e){"removeAttribute" in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(d){}};goog.UID_PROPERTY_="closure_uid_"+(1000000000*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(e){var d=goog.typeOf(e);if("object"==d||"array"==d){if(e.clone){return e.clone()}var d="array"==d?[]:{},f;for(f in e){d[f]=goog.cloneObject(e[f])}return d}return e};goog.bindNative_=function(e,d,f){return e.call.apply(e.bind,arguments)};goog.bindJs_=function(f,d,j){if(!f){throw Error()}if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,g);return f.apply(d,b)}}return function(){return f.apply(d,arguments)}};goog.bind=function(e,d,f){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};goog.partial=function(e,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=Array.prototype.slice.call(arguments);g.unshift.apply(g,f);return e.apply(this,g)}};goog.mixin=function(e,d){for(var f in d){e[f]=d[f]}};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return +new Date};goog.globalEval=function(a){if(goog.global.execScript){goog.global.execScript(a,"JavaScript")}else{if(goog.global.eval){if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_){goog.global.eval(a)}else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);b.body.removeChild(c)}}else{throw Error("goog.globalEval not available")}}};goog.evalWorksForGlobals_=null;goog.getCssName=function(f,d){var j=function(b){return goog.cssNameMapping_[b]||b},g=function(m){m=m.split("-");for(var k=[],n=0;n<m.length;n++){k.push(j(m[n]))}return k.join("-")},g=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?j:g:function(b){return b};return d?f+"-"+g(d):g(f)};goog.setCssNameMapping=function(e,d){goog.cssNameMapping_=e;goog.cssNameMappingStyle_=d};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(g,f){var m=f||{},j;for(j in m){var k=(""+m[j]).replace(/\$/g,"$$$$");g=g.replace(RegExp("\\{\\$"+j+"\\}","gi"),k)}return g};goog.getMsgWithFallback=function(e,d){return e};goog.exportSymbol=function(e,d,f){goog.exportPath_(e,d,f)};goog.exportProperty=function(e,d,f){e[d]=f};goog.inherits=function(e,d){function f(){}f.prototype=d.prototype;e.superClass_=d.prototype;e.prototype=new f;e.prototype.constructor=e};goog.base=function(k,j,u){var q=arguments.callee.caller;if(q.superClass_){return q.superClass_.constructor.apply(k,Array.prototype.slice.call(arguments,1))}for(var r=Array.prototype.slice.call(arguments,2),n=!1,m=k.constructor;m;m=m.superClass_&&m.superClass_.constructor){if(m.prototype[j]===q){n=!0}else{if(n){return m.prototype[j].apply(k,r)}}}if(k[j]===q){return k.constructor.prototype[j].apply(k,r)}throw Error("goog.base called from a method of one name to a method of a different name")};goog.scope=function(b){b.call(goog.global)};goog.debug={};goog.debug.Error=function(b){Error.captureStackTrace?Error.captureStackTrace(this,goog.debug.Error):this.stack=Error().stack||"";b&&(this.message=String(b))};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.string={};goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=function(e,d){return 0==e.lastIndexOf(d,0)};goog.string.endsWith=function(e,d){var f=e.length-d.length;return 0<=f&&e.indexOf(d,f)==f};goog.string.caseInsensitiveStartsWith=function(e,d){return 0==goog.string.caseInsensitiveCompare(d,e.substr(0,d.length))};goog.string.caseInsensitiveEndsWith=function(e,d){return 0==goog.string.caseInsensitiveCompare(d,e.substr(e.length-d.length,d.length))};goog.string.subs=function(f,d){for(var j=1;j<arguments.length;j++){var g=String(arguments[j]).replace(/\$/g,"$$$$");f=f.replace(/\%s/,g)}return f};goog.string.collapseWhitespace=function(b){return b.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmpty=function(b){return/^[\s\xa0]*$/.test(b)};goog.string.isEmptySafe=function(b){return goog.string.isEmpty(goog.string.makeSafe(b))};goog.string.isBreakingWhitespace=function(b){return !/[^\t\n\r ]/.test(b)};goog.string.isAlpha=function(b){return !/[^a-zA-Z]/.test(b)};goog.string.isNumeric=function(b){return !/[^0-9]/.test(b)};goog.string.isAlphaNumeric=function(b){return !/[^a-zA-Z0-9]/.test(b)};goog.string.isSpace=function(b){return" "==b};goog.string.isUnicodeChar=function(b){return 1==b.length&&" "<=b&&"~">=b||"\u0080"<=b&&"\ufffd">=b};goog.string.stripNewlines=function(b){return b.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(b){return b.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(b){return b.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(b){return b.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(b){return b.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(b){return b.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(b){return b.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(f,d){var j=String(f).toLowerCase(),g=String(d).toLowerCase();return j<g?-1:j==g?0:1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;goog.string.numerateCompare=function(k,j){if(k==j){return 0}if(!k){return -1}if(!j){return 1}for(var v=k.toLowerCase().match(goog.string.numerateCompareRegExp_),r=j.toLowerCase().match(goog.string.numerateCompareRegExp_),u=Math.min(v.length,r.length),q=0;q<u;q++){var n=v[q],m=r[q];if(n!=m){return v=parseInt(n,10),!isNaN(v)&&(r=parseInt(m,10),!isNaN(r)&&v-r)?v-r:n<m?-1:1}}return v.length!=r.length?v.length-r.length:k<j?-1:1};goog.string.urlEncode=function(b){return encodeURIComponent(String(b))};goog.string.urlDecode=function(b){return decodeURIComponent(b.replace(/\+/g," "))};goog.string.newLineToBr=function(e,d){return e.replace(/(\r\n|\r|\n)/g,d?"<br />":"<br>")};goog.string.htmlEscape=function(e,d){if(d){return e.replace(goog.string.amperRe_,"&amp;").replace(goog.string.ltRe_,"&lt;").replace(goog.string.gtRe_,"&gt;").replace(goog.string.quotRe_,"&quot;")}if(!goog.string.allRe_.test(e)){return e}-1!=e.indexOf("&")&&(e=e.replace(goog.string.amperRe_,"&amp;"));-1!=e.indexOf("<")&&(e=e.replace(goog.string.ltRe_,"&lt;"));-1!=e.indexOf(">")&&(e=e.replace(goog.string.gtRe_,"&gt;"));-1!=e.indexOf('"')&&(e=e.replace(goog.string.quotRe_,"&quot;"));return e};goog.string.amperRe_=/&/g;goog.string.ltRe_=/</g;goog.string.gtRe_=/>/g;goog.string.quotRe_=/\"/g;goog.string.allRe_=/[&<>\"]/;goog.string.unescapeEntities=function(b){return goog.string.contains(b,"&")?"document" in goog.global?goog.string.unescapeEntitiesUsingDom_(b):goog.string.unescapePureXmlEntities_(b):b};goog.string.unescapeEntitiesUsingDom_=function(e){var d={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},f=document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,function(b,m){var k=d[b];if(k){return k}if("#"==m.charAt(0)){var j=Number("0"+m.substr(1));isNaN(j)||(k=String.fromCharCode(j))}k||(f.innerHTML=b+" ",k=f.firstChild.nodeValue.slice(0,-1));return d[b]=k})};goog.string.unescapePureXmlEntities_=function(b){return b.replace(/&([^;]+);/g,function(d,g){switch(g){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==g.charAt(0)){var f=Number("0"+g.substr(1));if(!isNaN(f)){return String.fromCharCode(f)}}return d}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(e,d){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),d)};goog.string.stripQuotes=function(g,f){for(var m=f.length,j=0;j<m;j++){var k=1==m?f:f.charAt(j);if(g.charAt(0)==k&&g.charAt(g.length-1)==k){return g.substring(1,g.length-1)}}return g};goog.string.truncate=function(e,d,f){f&&(e=goog.string.unescapeEntities(e));e.length>d&&(e=e.substring(0,d-3)+"...");f&&(e=goog.string.htmlEscape(e));return e};goog.string.truncateMiddle=function(g,f,m,j){m&&(g=goog.string.unescapeEntities(g));if(j&&g.length>f){j>f&&(j=f);var k=g.length-j;g=g.substring(0,f-j)+"..."+g.substring(k)}else{g.length>f&&(j=Math.floor(f/2),k=g.length-j,g=g.substring(0,j+f%2)+"..."+g.substring(k))}m&&(g=goog.string.htmlEscape(g));return g};goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};goog.string.quote=function(g){g=String(g);if(g.quote){return g.quote()}for(var f=['"'],m=0;m<g.length;m++){var j=g.charAt(m),k=j.charCodeAt(0);f[m+1]=goog.string.specialEscapeChars_[j]||(31<k&&127>k?j:goog.string.escapeChar(j))}f.push('"');return f.join("")};goog.string.escapeString=function(e){for(var d=[],f=0;f<e.length;f++){d[f]=goog.string.escapeChar(e.charAt(f))}return d.join("")};goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_){return goog.string.jsEscapeCache_[e]}if(e in goog.string.specialEscapeChars_){return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e]}var d=e,f=e.charCodeAt(0);if(31<f&&127>f){d=e}else{if(256>f){if(d="\\x",16>f||256<f){d+="0"}}else{d="\\u",4096>f&&(d+="0")}d+=f.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[e]=d};goog.string.toMap=function(e){for(var d={},f=0;f<e.length;f++){d[e.charAt(f)]=!0}return d};goog.string.contains=function(e,d){return -1!=e.indexOf(d)};goog.string.countOf=function(e,d){return e&&d?e.split(d).length-1:0};goog.string.removeAt=function(f,d,j){var g=f;0<=d&&(d<f.length&&0<j)&&(g=f.substr(0,d)+f.substr(d+j,f.length-d-j));return g};goog.string.remove=function(e,d){var f=RegExp(goog.string.regExpEscape(d),"");return e.replace(f,"")};goog.string.removeAll=function(e,d){var f=RegExp(goog.string.regExpEscape(d),"g");return e.replace(f,"")};goog.string.regExpEscape=function(b){return String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(e,d){return Array(d+1).join(e)};goog.string.padNumber=function(e,d,f){e=goog.isDef(f)?e.toFixed(f):String(e);f=e.indexOf(".");-1==f&&(f=e.length);return goog.string.repeat("0",Math.max(0,d-f))+e};goog.string.makeSafe=function(b){return null==b?"":String(b)};goog.string.buildString=function(b){return Array.prototype.join.call(arguments,"")};goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};goog.string.compareVersions=function(H,G){for(var F=0,D=goog.string.trim(String(H)).split("."),E=goog.string.trim(String(G)).split("."),C=Math.max(D.length,E.length),B=0;0==F&&B<C;B++){var A=D[B]||"",y=E[B]||"",z=RegExp("(\\d*)(\\D*)","g"),v=RegExp("(\\d*)(\\D*)","g");do{var u=z.exec(A)||["","",""],r=v.exec(y)||["","",""];if(0==u[0].length&&0==r[0].length){break}var F=0==u[1].length?0:parseInt(u[1],10),j=0==r[1].length?0:parseInt(r[1],10),F=goog.string.compareElements_(F,j)||goog.string.compareElements_(0==u[2].length,0==r[2].length)||goog.string.compareElements_(u[2],r[2])}while(0==F)}return F};goog.string.compareElements_=function(e,d){return e<d?-1:e>d?1:0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(e){for(var d=0,f=0;f<e.length;++f){d=31*d+e.charCodeAt(f),d%=goog.string.HASHCODE_MAX_}return d};goog.string.uniqueStringCounter_=2147483648*Math.random()|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};goog.string.toNumber=function(e){var d=Number(e);return 0==d&&goog.string.isEmpty(e)?NaN:d};goog.string.toCamelCase=function(b){return String(b).replace(/\-([a-z])/g,function(d,e){return e.toUpperCase()})};goog.string.toSelectorCase=function(b){return String(b).replace(/([A-Z])/g,"-$1").toLowerCase()};goog.string.toTitleCase=function(e,d){var f=goog.isString(d)?goog.string.regExpEscape(d):"\\s";return e.replace(RegExp("(^"+(f?"|["+f+"]+":"")+")([a-z])","g"),function(j,g,k){return g+k.toUpperCase()})};goog.string.parseInt=function(b){isFinite(b)&&(b=String(b));return goog.isString(b)?/^\s*-?0x/i.test(b)?parseInt(b,16):parseInt(b,10):NaN};goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(e,d){d.unshift(e);goog.debug.Error.call(this,goog.string.subs.apply(null,d));d.shift();this.messagePattern=e};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.doAssertFailure_=function(j,g,q,m){var n="Assertion failed";if(q){var n=n+(": "+q),k=m}else{j&&(n+=": "+j,k=g)}throw new goog.asserts.AssertionError(""+n,k||[])};goog.asserts.assert=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.fail=function(e,d){if(goog.asserts.ENABLE_ASSERTS){throw new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}};goog.asserts.assertNumber=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertString=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertFunction=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertObject=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertArray=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertBoolean=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertInstanceof=function(f,d,j,g){!goog.asserts.ENABLE_ASSERTS||f instanceof d||goog.asserts.doAssertFailure_("instanceof check failed.",null,j,Array.prototype.slice.call(arguments,3));return f};goog.string.format=function(f,d){var j=Array.prototype.slice.call(arguments),g=j.shift();if("undefined"==typeof g){throw Error("[goog.string.format] Template required")}return g.replace(/%([0\-\ \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(C,B,A,z,v,y,u,r){if("%"==y){return"%"}var q=j.shift();if("undefined"==typeof q){throw Error("[goog.string.format] Not enough arguments")}arguments[0]=q;return goog.string.format.demuxes_[y].apply(null,arguments)})};goog.string.format.demuxes_={};goog.string.format.demuxes_.s=function(k,j,v,r,u,q,n,m){return isNaN(v)||""==v||k.length>=v?k:k=-1<j.indexOf("-",0)?k+goog.string.repeat(" ",v-k.length):goog.string.repeat(" ",v-k.length)+k};goog.string.format.demuxes_.f=function(k,j,v,r,u,q,n,m){r=k.toString();isNaN(u)||""==u||(r=k.toFixed(u));q=0>k?"-":0<=j.indexOf("+")?"+":0<=j.indexOf(" ")?" ":"";0<=k&&(r=q+r);if(isNaN(v)||r.length>=v){return r}r=isNaN(u)?Math.abs(k).toString():Math.abs(k).toFixed(u);k=v-r.length-q.length;0<=j.indexOf("-",0)?r=q+r+goog.string.repeat(" ",k):(j=0<=j.indexOf("0",0)?"0":" ",r=q+goog.string.repeat(j,k)+r);return r};goog.string.format.demuxes_.d=function(k,j,v,r,u,q,n,m){return goog.string.format.demuxes_.f(parseInt(k,10),j,v,r,0,q,n,m)};goog.string.format.demuxes_.i=goog.string.format.demuxes_.d;goog.string.format.demuxes_.u=goog.string.format.demuxes_.d;var box2d={b2Settings:{}};Object.defineProperty||(Object.defineProperty=function(e,d,f){Object.__defineGetter__&&("get" in f?e.__defineGetter__(d,f.get):"value" in f&&e.__defineGetter__(d,f.value));Object.__defineSetter__&&("set" in f?e.__defineSetter__(d,f.set):"value" in f&&e.__defineSetter__(d,f.value))});box2d.DEBUG=!1;goog.exportSymbol("box2d.DEBUG",box2d.DEBUG);box2d.ENABLE_ASSERTS=box2d.DEBUG;goog.exportSymbol("box2d.ENABLE_ASSERTS",box2d.ENABLE_ASSERTS);box2d.b2Assert=function(e,d,f){if(box2d.DEBUG&&!e){}};goog.exportSymbol("box2d.b2Assert",box2d.b2Assert);box2d.b2_maxFloat=1e+37;goog.exportSymbol("box2d.b2_maxFloat",box2d.b2_maxFloat);box2d.b2_epsilon=0.00001;goog.exportSymbol("box2d.b2_epsilon",box2d.b2_epsilon);box2d.b2_epsilon_sq=box2d.b2_epsilon*box2d.b2_epsilon;goog.exportSymbol("box2d.b2_epsilon_sq",box2d.b2_epsilon_sq);box2d.b2_pi=Math.PI;goog.exportSymbol("box2d.b2_pi",box2d.b2_pi);box2d.b2_maxManifoldPoints=2;goog.exportSymbol("box2d.b2_maxManifoldPoints",box2d.b2_maxManifoldPoints);box2d.b2_maxPolygonVertices=8;goog.exportSymbol("box2d.b2_maxPolygonVertices",box2d.b2_maxPolygonVertices);box2d.b2_aabbExtension=0.1;goog.exportSymbol("box2d.b2_aabbExtension",box2d.b2_aabbExtension);box2d.b2_aabbMultiplier=2;goog.exportSymbol("box2d.b2_aabbMultiplier",box2d.b2_aabbMultiplier);box2d.b2_linearSlop=0.008;goog.exportSymbol("box2d.b2_linearSlop",box2d.b2_linearSlop);box2d.b2_angularSlop=2/180*box2d.b2_pi;goog.exportSymbol("box2d.b2_angularSlop",box2d.b2_angularSlop);box2d.b2_polygonRadius=2*box2d.b2_linearSlop;goog.exportSymbol("box2d.b2_polygonRadius",box2d.b2_polygonRadius);box2d.b2_maxSubSteps=8;goog.exportSymbol("box2d.b2_maxSubSteps",box2d.b2_maxSubSteps);box2d.b2_maxTOIContacts=32;goog.exportSymbol("box2d.b2_maxTOIContacts",box2d.b2_maxTOIContacts);box2d.b2_velocityThreshold=1;goog.exportSymbol("box2d.b2_velocityThreshold",box2d.b2_velocityThreshold);box2d.b2_maxLinearCorrection=0.2;goog.exportSymbol("box2d.b2_maxLinearCorrection",box2d.b2_maxLinearCorrection);box2d.b2_maxAngularCorrection=8/180*box2d.b2_pi;goog.exportSymbol("box2d.b2_maxAngularCorrection",box2d.b2_maxAngularCorrection);box2d.b2_maxTranslation=2;goog.exportSymbol("box2d.b2_maxTranslation",box2d.b2_maxTranslation);box2d.b2_maxTranslationSquared=box2d.b2_maxTranslation*box2d.b2_maxTranslation;goog.exportSymbol("box2d.b2_maxTranslationSquared",box2d.b2_maxTranslationSquared);box2d.b2_maxRotation=0.5*box2d.b2_pi;goog.exportSymbol("box2d.b2_maxRotation",box2d.b2_maxRotation);box2d.b2_maxRotationSquared=box2d.b2_maxRotation*box2d.b2_maxRotation;goog.exportSymbol("box2d.b2_maxRotationSquared",box2d.b2_maxRotationSquared);box2d.b2_baumgarte=0.2;goog.exportSymbol("box2d.b2_baumgarte",box2d.b2_baumgarte);box2d.b2_toiBaumgarte=0.75;goog.exportSymbol("box2d.b2_toiBaumgarte",box2d.b2_toiBaumgarte);box2d.b2_timeToSleep=0.5;goog.exportSymbol("box2d.b2_timeToSleep",box2d.b2_timeToSleep);box2d.b2_linearSleepTolerance=0.01;goog.exportSymbol("box2d.b2_linearSleepTolerance",box2d.b2_linearSleepTolerance);box2d.b2_angularSleepTolerance=2/180*box2d.b2_pi;goog.exportSymbol("box2d.b2_angularSleepTolerance",box2d.b2_angularSleepTolerance);box2d.b2Alloc=function(b){return null};goog.exportSymbol("box2d.b2Alloc",box2d.b2Alloc);box2d.b2Free=function(b){};goog.exportSymbol("box2d.b2Free",box2d.b2Free);box2d.b2Log=function(e,d){var f=Array.prototype.slice.call(arguments),f=goog.string.format.apply(null,f.slice(0));goog.global.console.log(f)};goog.exportSymbol("box2d.b2Log",box2d.b2Log);box2d.b2Version=function(e,d,f){this.major=e||0;this.minor=d||0;this.revision=f||0};goog.exportSymbol("box2d.b2Version",box2d.b2Version);box2d.b2Version.prototype.major=0;goog.exportProperty(box2d.b2Version.prototype,"major",box2d.b2Version.prototype.major);box2d.b2Version.prototype.minor=0;goog.exportProperty(box2d.b2Version.prototype,"minor",box2d.b2Version.prototype.minor);box2d.b2Version.prototype.revision=0;goog.exportProperty(box2d.b2Version.prototype,"revision",box2d.b2Version.prototype.revision);box2d.b2Version.prototype.toString=function(){return this.major+"."+this.minor+"."+this.revision};goog.exportProperty(box2d.b2Version.prototype,"toString",box2d.b2Version.prototype.toString);box2d.b2_version=new box2d.b2Version(2,3,0);goog.exportSymbol("box2d.b2_version",box2d.b2_version);box2d.b2_changelist=254;goog.exportSymbol("box2d.b2_changelist",box2d.b2_changelist);box2d.b2ParseInt=function(b){return parseInt(b,10)};goog.exportSymbol("box2d.b2ParseInt",box2d.b2ParseInt);box2d.b2ParseUInt=function(b){return box2d.b2Abs(parseInt(b,10))};goog.exportSymbol("box2d.b2ParseUInt",box2d.b2ParseUInt);box2d.b2MakeArray=function(f,d){void 0===f&&(f=0);var j=Array(f);if(void 0!==d){for(var g=0;g<f;++g){j[g]=d(g)}}return j};goog.exportSymbol("box2d.b2MakeArray",box2d.b2MakeArray);box2d.b2MakeNumberArray=function(b){return box2d.b2MakeArray(b,function(d){return 0})};goog.exportSymbol("box2d.b2MakeNumberArray",box2d.b2MakeNumberArray);box2d.b2Math={};box2d.b2_pi_over_180=box2d.b2_pi/180;goog.exportSymbol("box2d.b2_pi_over_180",box2d.b2_pi_over_180);box2d.b2_180_over_pi=180/box2d.b2_pi;goog.exportSymbol("box2d.b2_180_over_pi",box2d.b2_180_over_pi);box2d.b2_two_pi=2*box2d.b2_pi;goog.exportSymbol("box2d.b2_two_pi",box2d.b2_two_pi);box2d.b2Abs=function(b){return 0>b?-b:b};goog.exportSymbol("box2d.b2Abs",box2d.b2Abs);box2d.b2Min=function(e,d){return e<d?e:d};goog.exportSymbol("box2d.b2Min",box2d.b2Min);box2d.b2Max=function(e,d){return e>d?e:d};goog.exportSymbol("box2d.b2Max",box2d.b2Max);box2d.b2Clamp=function(e,d,f){return e<d?d:e>f?f:e};goog.exportSymbol("box2d.b2Clamp",box2d.b2Clamp);box2d.b2Swap=function(e,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);var f=e[0];e[0]=d[0];d[0]=f};goog.exportSymbol("box2d.b2Swap",box2d.b2Swap);box2d.b2IsValid=function(b){return isFinite(b)};goog.exportSymbol("box2d.b2IsValid",box2d.b2IsValid);box2d.b2Sq=function(b){return b*b};goog.exportSymbol("box2d.b2Sq",box2d.b2Sq);box2d.b2InvSqrt=function(b){return 1/Math.sqrt(b)};goog.exportSymbol("box2d.b2InvSqrt",box2d.b2InvSqrt);box2d.b2Sqrt=function(b){return Math.sqrt(b)};goog.exportSymbol("box2d.b2Sqrt",box2d.b2Sqrt);box2d.b2Pow=function(e,d){return Math.pow(e,d)};goog.exportSymbol("box2d.b2Pow",box2d.b2Pow);box2d.b2DegToRad=function(b){return b*box2d.b2_pi_over_180};goog.exportSymbol("box2d.b2DegToRad",box2d.b2DegToRad);box2d.b2RadToDeg=function(b){return b*box2d.b2_180_over_pi};goog.exportSymbol("box2d.b2RadToDeg",box2d.b2RadToDeg);box2d.b2Cos=function(b){return Math.cos(b)};goog.exportSymbol("box2d.b2Cos",box2d.b2Cos);box2d.b2Sin=function(b){return Math.sin(b)};goog.exportSymbol("box2d.b2Sin",box2d.b2Sin);box2d.b2Acos=function(b){return Math.acos(b)};goog.exportSymbol("box2d.b2Acos",box2d.b2Acos);box2d.b2Asin=function(b){return Math.asin(b)};goog.exportSymbol("box2d.b2Asin",box2d.b2Asin);box2d.b2Atan2=function(e,d){return Math.atan2(e,d)};goog.exportSymbol("box2d.b2Atan2",box2d.b2Atan2);box2d.b2NextPowerOfTwo=function(b){b|=b>>1&2147483647;b|=b>>2&1073741823;b|=b>>4&268435455;b|=b>>8&16777215;return(b|b>>16&65535)+1};goog.exportSymbol("box2d.b2NextPowerOfTwo",box2d.b2NextPowerOfTwo);box2d.b2IsPowerOfTwo=function(b){return 0<b&&0==(b&b-1)};goog.exportSymbol("box2d.b2IsPowerOfTwo",box2d.b2IsPowerOfTwo);box2d.b2Random=function(){return 2*Math.random()-1};goog.exportSymbol("box2d.b2Random",box2d.b2Random);box2d.b2RandomRange=function(e,d){return(d-e)*Math.random()+e};goog.exportSymbol("box2d.b2RandomRange",box2d.b2RandomRange);box2d.b2Vec2=function(e,d){this.x=e||0;this.y=d||0};goog.exportSymbol("box2d.b2Vec2",box2d.b2Vec2);box2d.b2Vec2.prototype.x=0;goog.exportProperty(box2d.b2Vec2.prototype,"x",box2d.b2Vec2.prototype.x);box2d.b2Vec2.prototype.y=0;goog.exportProperty(box2d.b2Vec2.prototype,"y",box2d.b2Vec2.prototype.y);box2d.b2Vec2_zero=new box2d.b2Vec2;goog.exportSymbol("box2d.b2Vec2_zero",box2d.b2Vec2_zero);box2d.b2Vec2.ZERO=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"ZERO",box2d.b2Vec2.ZERO);box2d.b2Vec2.UNITX=new box2d.b2Vec2(1,0);goog.exportProperty(box2d.b2Vec2,"UNITX",box2d.b2Vec2.UNITX);box2d.b2Vec2.UNITY=new box2d.b2Vec2(0,1);goog.exportProperty(box2d.b2Vec2,"UNITY",box2d.b2Vec2.UNITY);box2d.b2Vec2.s_t0=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"s_t0",box2d.b2Vec2.s_t0);box2d.b2Vec2.s_t1=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"s_t1",box2d.b2Vec2.s_t1);box2d.b2Vec2.s_t2=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"s_t2",box2d.b2Vec2.s_t2);box2d.b2Vec2.s_t3=new box2d.b2Vec2;goog.exportProperty(box2d.b2Vec2,"s_t3",box2d.b2Vec2.s_t3);box2d.b2Vec2.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2Vec2})};goog.exportProperty(box2d.b2Vec2,"MakeArray",box2d.b2Vec2.MakeArray);box2d.b2Vec2.prototype.Clone=function(){return new box2d.b2Vec2(this.x,this.y)};goog.exportProperty(box2d.b2Vec2.prototype,"Clone",box2d.b2Vec2.prototype.Clone);box2d.b2Vec2.prototype.SetZero=function(){this.y=this.x=0;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SetZero",box2d.b2Vec2.prototype.SetZero);box2d.b2Vec2.prototype.SetXY=function(e,d){this.x=e;this.y=d;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SetXY",box2d.b2Vec2.prototype.SetXY);box2d.b2Vec2.prototype.Copy=function(b){this.x=b.x;this.y=b.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"Copy",box2d.b2Vec2.prototype.Copy);box2d.b2Vec2.prototype.SelfAdd=function(b){this.x+=b.x;this.y+=b.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfAdd",box2d.b2Vec2.prototype.SelfAdd);box2d.b2Vec2.prototype.SelfAddXY=function(e,d){this.x+=e;this.y+=d;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfAddXY",box2d.b2Vec2.prototype.SelfAddXY);box2d.b2Vec2.prototype.SelfSub=function(b){this.x-=b.x;this.y-=b.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfSub",box2d.b2Vec2.prototype.SelfSub);box2d.b2Vec2.prototype.SelfSubXY=function(e,d){this.x-=e;this.y-=d;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfSubXY",box2d.b2Vec2.prototype.SelfSubXY);box2d.b2Vec2.prototype.SelfMul=function(b){this.x*=b;this.y*=b;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMul",box2d.b2Vec2.prototype.SelfMul);box2d.b2Vec2.prototype.SelfMulAdd=function(e,d){this.x+=e*d.x;this.y+=e*d.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMulAdd",box2d.b2Vec2.prototype.SelfMulAdd);box2d.b2Vec2.prototype.SelfMulSub=function(e,d){this.x-=e*d.x;this.y-=e*d.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMulSub",box2d.b2Vec2.prototype.SelfMulSub);box2d.b2Vec2.prototype.Dot=function(b){return this.x*b.x+this.y*b.y};goog.exportProperty(box2d.b2Vec2.prototype,"Dot",box2d.b2Vec2.prototype.Dot);box2d.b2Vec2.prototype.Cross=function(b){return this.x*b.y-this.y*b.x};goog.exportProperty(box2d.b2Vec2.prototype,"Cross",box2d.b2Vec2.prototype.Cross);box2d.b2Vec2.prototype.GetLength=function(){var e=this.x,d=this.y;return Math.sqrt(e*e+d*d)};goog.exportProperty(box2d.b2Vec2.prototype,"GetLength",box2d.b2Vec2.prototype.GetLength);box2d.b2Vec2.prototype.GetLengthSquared=function(){var e=this.x,d=this.y;return e*e+d*d};goog.exportProperty(box2d.b2Vec2.prototype,"GetLengthSquared",box2d.b2Vec2.prototype.GetLengthSquared);box2d.b2Vec2.prototype.Normalize=function(){var e=this.GetLength();if(e>=box2d.b2_epsilon){var d=1/e;this.x*=d;this.y*=d}return e};goog.exportProperty(box2d.b2Vec2.prototype,"Normalize",box2d.b2Vec2.prototype.Normalize);box2d.b2Vec2.prototype.SelfNormalize=function(){var b=this.GetLength();b>=box2d.b2_epsilon&&(b=1/b,this.x*=b,this.y*=b);return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfNormalize",box2d.b2Vec2.prototype.SelfNormalize);box2d.b2Vec2.prototype.SelfRotate=function(f,d){var j=this.x,g=this.y;this.x=f*j-d*g;this.y=d*j+f*g;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfRotate",box2d.b2Vec2.prototype.SelfRotate);box2d.b2Vec2.prototype.SelfRotateRadians=function(b){return this.SelfRotate(Math.cos(b),Math.sin(b))};goog.exportProperty(box2d.b2Vec2.prototype,"SelfRotateRadians",box2d.b2Vec2.prototype.SelfRotateRadians);box2d.b2Vec2.prototype.SelfRotateDegrees=function(b){return this.SelfRotateRadians(box2d.b2DegToRad(b))};goog.exportProperty(box2d.b2Vec2.prototype,"SelfRotateDegrees",box2d.b2Vec2.prototype.SelfRotateDegrees);box2d.b2Vec2.prototype.IsValid=function(){return isFinite(this.x)&&isFinite(this.y)};goog.exportProperty(box2d.b2Vec2.prototype,"IsValid",box2d.b2Vec2.prototype.IsValid);box2d.b2Vec2.prototype.SelfCrossVS=function(e){var d=this.x;this.x=e*this.y;this.y=-e*d;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfCrossVS",box2d.b2Vec2.prototype.SelfCrossVS);box2d.b2Vec2.prototype.SelfCrossSV=function(e){var d=this.x;this.x=-e*this.y;this.y=e*d;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfCrossSV",box2d.b2Vec2.prototype.SelfCrossSV);box2d.b2Vec2.prototype.SelfMinV=function(b){this.x=box2d.b2Min(this.x,b.x);this.y=box2d.b2Min(this.y,b.y);return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMinV",box2d.b2Vec2.prototype.SelfMinV);box2d.b2Vec2.prototype.SelfMaxV=function(b){this.x=box2d.b2Max(this.x,b.x);this.y=box2d.b2Max(this.y,b.y);return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfMaxV",box2d.b2Vec2.prototype.SelfMaxV);box2d.b2Vec2.prototype.SelfAbs=function(){this.x=box2d.b2Abs(this.x);this.y=box2d.b2Abs(this.y);return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfAbs",box2d.b2Vec2.prototype.SelfAbs);box2d.b2Vec2.prototype.SelfNeg=function(){this.x=-this.x;this.y=-this.y;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfNeg",box2d.b2Vec2.prototype.SelfNeg);box2d.b2Vec2.prototype.SelfSkew=function(){var b=this.x;this.x=-this.y;this.y=b;return this};goog.exportProperty(box2d.b2Vec2.prototype,"SelfSkew",box2d.b2Vec2.prototype.SelfSkew);box2d.b2AbsV=function(e,d){d.x=box2d.b2Abs(e.x);d.y=box2d.b2Abs(e.y);return d};goog.exportSymbol("box2d.b2AbsV",box2d.b2AbsV);box2d.b2MinV=function(e,d,f){f.x=box2d.b2Min(e.x,d.x);f.y=box2d.b2Min(e.y,d.y);return f};goog.exportSymbol("box2d.b2MinV",box2d.b2MinV);box2d.b2MaxV=function(e,d,f){f.x=box2d.b2Max(e.x,d.x);f.y=box2d.b2Max(e.y,d.y);return f};goog.exportSymbol("box2d.b2MaxV",box2d.b2MaxV);box2d.b2ClampV=function(f,d,j,g){g.x=box2d.b2Clamp(f.x,d.x,j.x);g.y=box2d.b2Clamp(f.y,d.y,j.y);return g};goog.exportSymbol("box2d.b2ClampV",box2d.b2ClampV);box2d.b2RotateV=function(g,f,m,j){var k=g.x;g=g.y;j.x=f*k-m*g;j.y=m*k+f*g;return j};goog.exportSymbol("box2d.b2RotateV",box2d.b2RotateV);box2d.b2RotateRadiansV=function(e,d,f){return box2d.b2RotateV(e,Math.cos(d),Math.sin(d),f)};goog.exportSymbol("box2d.b2RotateRadiansV",box2d.b2RotateRadiansV);box2d.b2RotateDegreesV=function(e,d,f){return box2d.b2RotateRadiansV(e,box2d.b2DegToRad(d),f)};goog.exportSymbol("box2d.b2RotateDegreesV",box2d.b2RotateDegreesV);box2d.b2DotVV=function(e,d){return e.x*d.x+e.y*d.y};goog.exportSymbol("box2d.b2DotVV",box2d.b2DotVV);box2d.b2CrossVV=function(e,d){return e.x*d.y-e.y*d.x};goog.exportSymbol("box2d.b2CrossVV",box2d.b2CrossVV);box2d.b2CrossVS=function(f,d,j){var g=f.x;j.x=d*f.y;j.y=-d*g;return j};goog.exportSymbol("box2d.b2CrossVS",box2d.b2CrossVS);box2d.b2CrossVOne=function(e,d){var f=e.x;d.x=e.y;d.y=-f;return d};goog.exportSymbol("box2d.b2CrossVOne",box2d.b2CrossVOne);box2d.b2CrossSV=function(f,d,j){var g=d.x;j.x=-f*d.y;j.y=f*g;return j};goog.exportSymbol("box2d.b2CrossSV",box2d.b2CrossSV);box2d.b2CrossOneV=function(e,d){var f=e.x;d.x=-e.y;d.y=f;return d};goog.exportSymbol("box2d.b2CrossOneV",box2d.b2CrossOneV);box2d.b2AddVV=function(e,d,f){f.x=e.x+d.x;f.y=e.y+d.y;return f};goog.exportSymbol("box2d.b2AddVV",box2d.b2AddVV);box2d.b2SubVV=function(e,d,f){f.x=e.x-d.x;f.y=e.y-d.y;return f};goog.exportSymbol("box2d.b2SubVV",box2d.b2SubVV);box2d.b2MulSV=function(e,d,f){f.x=d.x*e;f.y=d.y*e;return f};goog.exportSymbol("box2d.b2MulSV",box2d.b2MulSV);box2d.b2AddVMulSV=function(f,d,j,g){g.x=f.x+d*j.x;g.y=f.y+d*j.y;return g};goog.exportSymbol("box2d.b2AddVMulSV",box2d.b2AddVMulSV);box2d.b2SubVMulSV=function(f,d,j,g){g.x=f.x-d*j.x;g.y=f.y-d*j.y;return g};goog.exportSymbol("box2d.b2SubVMulSV",box2d.b2SubVMulSV);box2d.b2AddVCrossSV=function(g,f,m,j){var k=m.x;j.x=g.x-f*m.y;j.y=g.y+f*k;return j};goog.exportSymbol("box2d.b2AddVCrossSV",box2d.b2AddVCrossSV);box2d.b2MidVV=function(e,d,f){f.x=0.5*(e.x+d.x);f.y=0.5*(e.y+d.y);return f};goog.exportSymbol("box2d.b2MidVV",box2d.b2MidVV);box2d.b2ExtVV=function(e,d,f){f.x=0.5*(d.x-e.x);f.y=0.5*(d.y-e.y);return f};goog.exportSymbol("box2d.b2ExtVV",box2d.b2ExtVV);box2d.b2IsEqualToV=function(e,d){return e.x==d.x&&e.y==d.y};goog.exportSymbol("box2d.b2IsEqualToV",box2d.b2IsEqualToV);box2d.b2DistanceVV=function(f,d){var j=f.x-d.x,g=f.y-d.y;return Math.sqrt(j*j+g*g)};goog.exportSymbol("box2d.b2DistanceVV",box2d.b2DistanceVV);box2d.b2DistanceSquaredVV=function(f,d){var j=f.x-d.x,g=f.y-d.y;return j*j+g*g};goog.exportSymbol("box2d.b2DistanceSquaredVV",box2d.b2DistanceSquaredVV);box2d.b2NegV=function(e,d){d.x=-e.x;d.y=-e.y;return d};goog.exportSymbol("box2d.b2NegV",box2d.b2NegV);box2d.b2Vec3=function(e,d,f){this.x=e||0;this.y=d||0;this.z=f||0};goog.exportSymbol("box2d.b2Vec3",box2d.b2Vec3);box2d.b2Vec3.prototype.x=0;goog.exportProperty(box2d.b2Vec3.prototype,"x",box2d.b2Vec3.prototype.x);box2d.b2Vec3.prototype.y=0;goog.exportProperty(box2d.b2Vec3.prototype,"y",box2d.b2Vec3.prototype.y);box2d.b2Vec3.prototype.z=0;goog.exportProperty(box2d.b2Vec3.prototype,"z",box2d.b2Vec3.prototype.z);box2d.b2Vec3.ZERO=new box2d.b2Vec3;goog.exportProperty(box2d.b2Vec3,"ZERO",box2d.b2Vec3.ZERO);box2d.b2Vec3.s_t0=new box2d.b2Vec3;goog.exportProperty(box2d.b2Vec3,"s_t0",box2d.b2Vec3.s_t0);box2d.b2Vec3.prototype.Clone=function(){return new box2d.b2Vec3(this.x,this.y,this.z)};goog.exportProperty(box2d.b2Vec3.prototype,"Clone",box2d.b2Vec3.prototype.Clone);box2d.b2Vec3.prototype.SetZero=function(){this.z=this.y=this.x=0;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SetZero",box2d.b2Vec3.prototype.SetZero);box2d.b2Vec3.prototype.SetXYZ=function(e,d,f){this.x=e;this.y=d;this.z=f;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SetXYZ",box2d.b2Vec3.prototype.SetXYZ);box2d.b2Vec3.prototype.Copy=function(b){this.x=b.x;this.y=b.y;this.z=b.z;return this};goog.exportProperty(box2d.b2Vec3.prototype,"Copy",box2d.b2Vec3.prototype.Copy);box2d.b2Vec3.prototype.SelfNeg=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfNeg",box2d.b2Vec3.prototype.SelfNeg);box2d.b2Vec3.prototype.SelfAdd=function(b){this.x+=b.x;this.y+=b.y;this.z+=b.z;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfAdd",box2d.b2Vec3.prototype.SelfAdd);box2d.b2Vec3.prototype.SelfAddXYZ=function(e,d,f){this.x+=e;this.y+=d;this.z+=f;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfAddXYZ",box2d.b2Vec3.prototype.SelfAddXYZ);box2d.b2Vec3.prototype.SelfSub=function(b){this.x-=b.x;this.y-=b.y;this.z-=b.z;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfSub",box2d.b2Vec3.prototype.SelfSub);box2d.b2Vec3.prototype.SelfSubXYZ=function(e,d,f){this.x-=e;this.y-=d;this.z-=f;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfSubXYZ",box2d.b2Vec3.prototype.SelfSubXYZ);box2d.b2Vec3.prototype.SelfMul=function(b){this.x*=b;this.y*=b;this.z*=b;return this};goog.exportProperty(box2d.b2Vec3.prototype,"SelfMul",box2d.b2Vec3.prototype.SelfMul);box2d.b2DotV3V3=function(e,d){return e.x*d.x+e.y*d.y+e.z*d.z};goog.exportSymbol("box2d.b2DotV3V3",box2d.b2DotV3V3);box2d.b2CrossV3V3=function(k,j,u){var q=k.x,r=k.y;k=k.z;var n=j.x,m=j.y;j=j.z;u.x=r*j-k*m;u.y=k*n-q*j;u.z=q*m-r*n;return u};goog.exportSymbol("box2d.b2CrossV3V3",box2d.b2CrossV3V3);box2d.b2Mat22=function(){this.ex=new box2d.b2Vec2(1,0);this.ey=new box2d.b2Vec2(0,1)};goog.exportSymbol("box2d.b2Mat22",box2d.b2Mat22);box2d.b2Mat22.prototype.ex=null;goog.exportProperty(box2d.b2Mat22.prototype,"ex",box2d.b2Mat22.prototype.ex);box2d.b2Mat22.prototype.ey=null;goog.exportProperty(box2d.b2Mat22.prototype,"ey",box2d.b2Mat22.prototype.ey);box2d.b2Mat22.IDENTITY=new box2d.b2Mat22;goog.exportProperty(box2d.b2Mat22,"IDENTITY",box2d.b2Mat22.IDENTITY);box2d.b2Mat22.prototype.Clone=function(){return(new box2d.b2Mat22).Copy(this)};goog.exportProperty(box2d.b2Mat22.prototype,"Clone",box2d.b2Mat22.prototype.Clone);box2d.b2Mat22.FromVV=function(e,d){return(new box2d.b2Mat22).SetVV(e,d)};goog.exportProperty(box2d.b2Mat22,"FromVV",box2d.b2Mat22.FromVV);box2d.b2Mat22.FromSSSS=function(f,d,j,g){return(new box2d.b2Mat22).SetSSSS(f,d,j,g)};goog.exportProperty(box2d.b2Mat22,"FromSSSS",box2d.b2Mat22.FromSSSS);box2d.b2Mat22.FromAngleRadians=function(b){return(new box2d.b2Mat22).SetAngleRadians(b)};goog.exportProperty(box2d.b2Mat22,"FromAngleRadians",box2d.b2Mat22.FromAngleRadians);box2d.b2Mat22.prototype.SetSSSS=function(f,d,j,g){this.ex.SetXY(f,j);this.ey.SetXY(d,g);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SetSSSS",box2d.b2Mat22.prototype.SetSSSS);box2d.b2Mat22.prototype.SetVV=function(e,d){this.ex.Copy(e);this.ey.Copy(d);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SetVV",box2d.b2Mat22.prototype.SetVV);box2d.b2Mat22.prototype.SetAngle=function(e){var d=Math.cos(e);e=Math.sin(e);this.ex.SetXY(d,e);this.ey.SetXY(-e,d);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SetAngle",box2d.b2Mat22.prototype.SetAngle);box2d.b2Mat22.prototype.SetAngleRadians=box2d.b2Mat22.prototype.SetAngle;box2d.b2Mat22.prototype.SetAngleDegrees=function(b){return this.SetAngle(box2d.b2DegToRad(b))};box2d.b2Mat22.prototype.Copy=function(b){this.ex.Copy(b.ex);this.ey.Copy(b.ey);return this};goog.exportProperty(box2d.b2Mat22.prototype,"Copy",box2d.b2Mat22.prototype.Copy);box2d.b2Mat22.prototype.SetIdentity=function(){this.ex.SetXY(1,0);this.ey.SetXY(0,1);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SetIdentity",box2d.b2Mat22.prototype.SetIdentity);box2d.b2Mat22.prototype.SetZero=function(){this.ex.SetZero();this.ey.SetZero();return this};goog.exportProperty(box2d.b2Mat22.prototype,"SetZero",box2d.b2Mat22.prototype.SetZero);box2d.b2Mat22.prototype.GetAngle=function(){return Math.atan2(this.ex.y,this.ex.x)};goog.exportProperty(box2d.b2Mat22.prototype,"GetAngle",box2d.b2Mat22.prototype.GetAngle);box2d.b2Mat22.prototype.GetAngleRadians=box2d.b2Mat22.prototype.GetAngle;box2d.b2Mat22.prototype.GetInverse=function(j){var g=this.ex.x,q=this.ey.x,m=this.ex.y,n=this.ey.y,k=g*n-q*m;0!=k&&(k=1/k);j.ex.x=k*n;j.ey.x=-k*q;j.ex.y=-k*m;j.ey.y=k*g;return j};goog.exportProperty(box2d.b2Mat22.prototype,"GetInverse",box2d.b2Mat22.prototype.GetInverse);box2d.b2Mat22.prototype.Solve=function(k,j,v){var r=this.ex.x,u=this.ey.x,q=this.ex.y,n=this.ey.y,m=r*n-u*q;0!=m&&(m=1/m);v.x=m*(n*k-u*j);v.y=m*(r*j-q*k);return v};goog.exportProperty(box2d.b2Mat22.prototype,"Solve",box2d.b2Mat22.prototype.Solve);box2d.b2Mat22.prototype.SelfAbs=function(){this.ex.SelfAbs();this.ey.SelfAbs();return this};goog.exportProperty(box2d.b2Mat22.prototype,"SelfAbs",box2d.b2Mat22.prototype.SelfAbs);box2d.b2Mat22.prototype.SelfInv=function(){return this.GetInverse(this)};goog.exportProperty(box2d.b2Mat22.prototype,"SelfInv",box2d.b2Mat22.prototype.SelfInv);box2d.b2Mat22.prototype.SelfAddM=function(b){this.ex.SelfAdd(b.ex);this.ey.SelfAdd(b.ey);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SelfAddM",box2d.b2Mat22.prototype.SelfAddM);box2d.b2Mat22.prototype.SelfSubM=function(b){this.ex.SelfSub(b.ex);this.ey.SelfSub(b.ey);return this};goog.exportProperty(box2d.b2Mat22.prototype,"SelfSubM",box2d.b2Mat22.prototype.SelfSubM);box2d.b2AbsM=function(f,d){var j=f.ex,g=f.ey;d.ex.x=box2d.b2Abs(j.x);d.ex.y=box2d.b2Abs(j.y);d.ey.x=box2d.b2Abs(g.x);d.ey.y=box2d.b2Abs(g.y);return d};goog.exportSymbol("box2d.b2AbsM",box2d.b2AbsM);box2d.b2MulMV=function(g,f,m){var j=g.ex;g=g.ey;var k=f.x;f=f.y;m.x=j.x*k+g.x*f;m.y=j.y*k+g.y*f;return m};goog.exportSymbol("box2d.b2MulMV",box2d.b2MulMV);box2d.b2MulTMV=function(g,f,m){var j=g.ex;g=g.ey;var k=f.x;f=f.y;m.x=j.x*k+j.y*f;m.y=g.x*k+g.y*f;return m};goog.exportSymbol("box2d.b2MulTMV",box2d.b2MulTMV);box2d.b2AddMM=function(g,f,m){var j=g.ex;g=g.ey;var k=f.ex;f=f.ey;m.ex.x=j.x+k.x;m.ex.y=j.y+k.y;m.ey.x=g.x+f.x;m.ey.y=g.y+f.y;return m};goog.exportSymbol("box2d.b2AddMM",box2d.b2AddMM);box2d.b2MulMM=function(y,v,u){var q=y.ex.x,r=y.ex.y,n=y.ey.x;y=y.ey.y;var m=v.ex.x,k=v.ex.y,j=v.ey.x;v=v.ey.y;u.ex.x=q*m+n*k;u.ex.y=r*m+y*k;u.ey.x=q*j+n*v;u.ey.y=r*j+y*v;return u};goog.exportSymbol("box2d.b2MulMM",box2d.b2MulMM);box2d.b2MulTMM=function(y,v,u){var q=y.ex.x,r=y.ex.y,n=y.ey.x;y=y.ey.y;var m=v.ex.x,k=v.ex.y,j=v.ey.x;v=v.ey.y;u.ex.x=q*m+r*k;u.ex.y=n*m+y*k;u.ey.x=q*j+r*v;u.ey.y=n*j+y*v;return u};goog.exportSymbol("box2d.b2MulTMM",box2d.b2MulTMM);box2d.b2Mat33=function(){this.ex=new box2d.b2Vec3(1,0,0);this.ey=new box2d.b2Vec3(0,1,0);this.ez=new box2d.b2Vec3(0,0,1)};goog.exportSymbol("box2d.b2Mat33",box2d.b2Mat33);box2d.b2Mat33.prototype.ex=null;goog.exportProperty(box2d.b2Mat33.prototype,"ex",box2d.b2Mat33.prototype.ex);box2d.b2Mat33.prototype.ey=null;goog.exportProperty(box2d.b2Mat33.prototype,"ey",box2d.b2Mat33.prototype.ey);box2d.b2Mat33.prototype.ez=null;goog.exportProperty(box2d.b2Mat33.prototype,"ez",box2d.b2Mat33.prototype.ez);box2d.b2Mat33.IDENTITY=new box2d.b2Mat33;goog.exportProperty(box2d.b2Mat33,"IDENTITY",box2d.b2Mat33.IDENTITY);box2d.b2Mat33.prototype.Clone=function(){return(new box2d.b2Mat33).Copy(this)};goog.exportProperty(box2d.b2Mat33.prototype,"Clone",box2d.b2Mat33.prototype.Clone);box2d.b2Mat33.prototype.SetVVV=function(e,d,f){this.ex.Copy(e);this.ey.Copy(d);this.ez.Copy(f);return this};goog.exportProperty(box2d.b2Mat33.prototype,"SetVVV",box2d.b2Mat33.prototype.SetVVV);box2d.b2Mat33.prototype.Copy=function(b){this.ex.Copy(b.ex);this.ey.Copy(b.ey);this.ez.Copy(b.ez);return this};goog.exportProperty(box2d.b2Mat33.prototype,"Copy",box2d.b2Mat33.prototype.Copy);box2d.b2Mat33.prototype.SetIdentity=function(){this.ex.SetXYZ(1,0,0);this.ey.SetXYZ(0,1,0);this.ez.SetXYZ(0,0,1);return this};goog.exportProperty(box2d.b2Mat33.prototype,"SetIdentity",box2d.b2Mat33.prototype.SetIdentity);box2d.b2Mat33.prototype.SetZero=function(){this.ex.SetZero();this.ey.SetZero();this.ez.SetZero();return this};goog.exportProperty(box2d.b2Mat33.prototype,"SetZero",box2d.b2Mat33.prototype.SetZero);box2d.b2Mat33.prototype.SelfAddM=function(b){this.ex.SelfAdd(b.ex);this.ey.SelfAdd(b.ey);this.ez.SelfAdd(b.ez);return this};goog.exportProperty(box2d.b2Mat33.prototype,"SelfAddM",box2d.b2Mat33.prototype.SelfAddM);box2d.b2Mat33.prototype.Solve33=function(H,G,F,D){var E=this.ex.x,C=this.ex.y,B=this.ex.z,A=this.ey.x,y=this.ey.y,z=this.ey.z,v=this.ez.x,u=this.ez.y,r=this.ez.z,j=E*(y*r-z*u)+C*(z*v-A*r)+B*(A*u-y*v);0!=j&&(j=1/j);D.x=j*(H*(y*r-z*u)+G*(z*v-A*r)+F*(A*u-y*v));D.y=j*(E*(G*r-F*u)+C*(F*v-H*r)+B*(H*u-G*v));D.z=j*(E*(y*F-z*G)+C*(z*H-A*F)+B*(A*G-y*H));return D};goog.exportProperty(box2d.b2Mat33.prototype,"Solve33",box2d.b2Mat33.prototype.Solve33);box2d.b2Mat33.prototype.Solve22=function(k,j,v){var r=this.ex.x,u=this.ey.x,q=this.ex.y,n=this.ey.y,m=r*n-u*q;0!=m&&(m=1/m);v.x=m*(n*k-u*j);v.y=m*(r*j-q*k);return v};goog.exportProperty(box2d.b2Mat33.prototype,"Solve22",box2d.b2Mat33.prototype.Solve22);box2d.b2Mat33.prototype.GetInverse22=function(j){var g=this.ex.x,q=this.ey.x,m=this.ex.y,n=this.ey.y,k=g*n-q*m;0!=k&&(k=1/k);j.ex.x=k*n;j.ey.x=-k*q;j.ex.z=0;j.ex.y=-k*m;j.ey.y=k*g;j.ey.z=0;j.ez.x=0;j.ez.y=0;j.ez.z=0};goog.exportProperty(box2d.b2Mat33.prototype,"GetInverse22",box2d.b2Mat33.prototype.GetInverse22);box2d.b2Mat33.prototype.GetSymInverse33=function(k){var j=box2d.b2DotV3V3(this.ex,box2d.b2CrossV3V3(this.ey,this.ez,box2d.b2Vec3.s_t0));0!=j&&(j=1/j);var v=this.ex.x,r=this.ey.x,u=this.ez.x,q=this.ey.y,n=this.ez.y,m=this.ez.z;k.ex.x=j*(q*m-n*n);k.ex.y=j*(u*n-r*m);k.ex.z=j*(r*n-u*q);k.ey.x=k.ex.y;k.ey.y=j*(v*m-u*u);k.ey.z=j*(u*r-v*n);k.ez.x=k.ex.z;k.ez.y=k.ey.z;k.ez.z=j*(v*q-r*r)};goog.exportProperty(box2d.b2Mat33.prototype,"GetSymInverse33",box2d.b2Mat33.prototype.GetSymInverse33);box2d.b2MulM33V3=function(g,f,m){var j=f.x,k=f.y;f=f.z;m.x=g.ex.x*j+g.ey.x*k+g.ez.x*f;m.y=g.ex.y*j+g.ey.y*k+g.ez.y*f;m.z=g.ex.z*j+g.ey.z*k+g.ez.z*f;return m};goog.exportSymbol("box2d.b2MulM33V3",box2d.b2MulM33V3);box2d.b2MulM33XYZ=function(g,f,m,j,k){k.x=g.ex.x*f+g.ey.x*m+g.ez.x*j;k.y=g.ex.y*f+g.ey.y*m+g.ez.y*j;k.z=g.ex.z*f+g.ey.z*m+g.ez.z*j;return k};goog.exportSymbol("box2d.b2MulM33XYZ",box2d.b2MulM33XYZ);box2d.b2MulM33V2=function(f,d,j){var g=d.x;d=d.y;j.x=f.ex.x*g+f.ey.x*d;j.y=f.ex.y*g+f.ey.y*d;return j};goog.exportSymbol("box2d.b2MulM33V2",box2d.b2MulM33V2);box2d.b2MulM33XY=function(f,d,j,g){g.x=f.ex.x*d+f.ey.x*j;g.y=f.ex.y*d+f.ey.y*j;return g};goog.exportSymbol("box2d.b2MulM33XY",box2d.b2MulM33XY);box2d.b2Rot=function(b){b&&(this.angle=b,this.s=Math.sin(b),this.c=Math.cos(b))};goog.exportSymbol("box2d.b2Rot",box2d.b2Rot);box2d.b2Rot.prototype.angle=0;goog.exportProperty(box2d.b2Rot.prototype,"angle",box2d.b2Rot.prototype.angle);box2d.b2Rot.prototype.s=0;goog.exportProperty(box2d.b2Rot.prototype,"s",box2d.b2Rot.prototype.s);box2d.b2Rot.prototype.c=1;goog.exportProperty(box2d.b2Rot.prototype,"c",box2d.b2Rot.prototype.c);box2d.b2Rot.IDENTITY=new box2d.b2Rot;goog.exportProperty(box2d.b2Rot,"IDENTITY",box2d.b2Rot.IDENTITY);box2d.b2Rot.prototype.Clone=function(){return(new box2d.b2Rot).Copy(this)};goog.exportProperty(box2d.b2Rot.prototype,"Clone",box2d.b2Rot.prototype.Clone);box2d.b2Rot.prototype.Copy=function(b){this.angle=b.angle;this.s=b.s;this.c=b.c;return this};goog.exportProperty(box2d.b2Rot.prototype,"Copy",box2d.b2Rot.prototype.Copy);box2d.b2Rot.prototype.SetAngle=function(b){this.angle!=b&&(this.angle=b,this.s=Math.sin(b),this.c=Math.cos(b));return this};goog.exportProperty(box2d.b2Rot.prototype,"SetAngle",box2d.b2Rot.prototype.SetAngle);box2d.b2Rot.prototype.SetAngleRadians=box2d.b2Rot.prototype.SetAngle;box2d.b2Rot.prototype.SetAngleDegrees=function(b){return this.SetAngle(box2d.b2DegToRad(b))};box2d.b2Rot.prototype.SetIdentity=function(){this.s=this.angle=0;this.c=1;return this};goog.exportProperty(box2d.b2Rot.prototype,"SetIdentity",box2d.b2Rot.prototype.SetIdentity);box2d.b2Rot.prototype.GetAngle=function(){return this.angle};goog.exportProperty(box2d.b2Rot.prototype,"GetAngle",box2d.b2Rot.prototype.GetAngle);box2d.b2Rot.prototype.GetAngleRadians=box2d.b2Rot.prototype.GetAngle;box2d.b2Rot.prototype.GetAngleDegrees=function(){return box2d.b2RadToDeg(this.GetAngle())};box2d.b2Rot.prototype.GetXAxis=function(b){b.x=this.c;b.y=this.s;return b};goog.exportProperty(box2d.b2Rot.prototype,"GetXAxis",box2d.b2Rot.prototype.GetXAxis);box2d.b2Rot.prototype.GetYAxis=function(b){b.x=-this.s;b.y=this.c;return b};goog.exportProperty(box2d.b2Rot.prototype,"GetYAxis",box2d.b2Rot.prototype.GetYAxis);box2d.b2MulRR=function(g,f,m){var j=g.c;g=g.s;var k=f.c;f=f.s;m.s=g*k+j*f;m.c=j*k-g*f;return m};goog.exportSymbol("box2d.b2MulRR",box2d.b2MulRR);box2d.b2MulTRR=function(g,f,m){var j=g.c;g=g.s;var k=f.c;f=f.s;m.s=j*f-g*k;m.c=j*k+g*f;return m};goog.exportSymbol("box2d.b2MulTRR",box2d.b2MulTRR);box2d.b2MulRV=function(g,f,m){var j=g.c;g=g.s;var k=f.x;f=f.y;m.x=j*k-g*f;m.y=g*k+j*f;return m};goog.exportSymbol("box2d.b2MulRV",box2d.b2MulRV);box2d.b2MulTRV=function(g,f,m){var j=g.c;g=g.s;var k=f.x;f=f.y;m.x=j*k+g*f;m.y=-g*k+j*f;return m};goog.exportSymbol("box2d.b2MulTRV",box2d.b2MulTRV);box2d.b2Transform=function(){this.p=new box2d.b2Vec2;this.q=new box2d.b2Rot};goog.exportSymbol("box2d.b2Transform",box2d.b2Transform);box2d.b2Transform.prototype.p=null;goog.exportProperty(box2d.b2Transform.prototype,"p",box2d.b2Transform.prototype.p);box2d.b2Transform.prototype.q=null;goog.exportProperty(box2d.b2Transform.prototype,"q",box2d.b2Transform.prototype.q);box2d.b2Transform.IDENTITY=new box2d.b2Transform;goog.exportProperty(box2d.b2Transform,"IDENTITY",box2d.b2Transform.IDENTITY);box2d.b2Transform.prototype.Clone=function(){return(new box2d.b2Transform).Copy(this)};goog.exportProperty(box2d.b2Transform.prototype,"Clone",box2d.b2Transform.prototype.Clone);box2d.b2Transform.prototype.Copy=function(b){this.p.Copy(b.p);this.q.Copy(b.q);return this};goog.exportProperty(box2d.b2Transform.prototype,"Copy",box2d.b2Transform.prototype.Copy);box2d.b2Transform.prototype.SetIdentity=function(){this.p.SetZero();this.q.SetIdentity();return this};goog.exportProperty(box2d.b2Transform.prototype,"SetIdentity",box2d.b2Transform.prototype.SetIdentity);box2d.b2Transform.prototype.SetPositionRotation=function(e,d){this.p.Copy(e);this.q.Copy(d);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetPositionRotation",box2d.b2Transform.prototype.SetPositionRotation);box2d.b2Transform.prototype.SetPositionAngleRadians=function(e,d){this.p.Copy(e);this.q.SetAngleRadians(d);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetPositionAngleRadians",box2d.b2Transform.prototype.SetPositionAngleRadians);box2d.b2Transform.prototype.SetPosition=function(b){this.p.Copy(b);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetPosition",box2d.b2Transform.prototype.SetPosition);box2d.b2Transform.prototype.SetPositionXY=function(e,d){this.p.SetXY(e,d);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetPositionXY",box2d.b2Transform.prototype.SetPositionXY);box2d.b2Transform.prototype.SetRotation=function(b){this.q.Copy(b);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetRotation",box2d.b2Transform.prototype.SetRotation);box2d.b2Transform.prototype.SetRotationAngleRadians=function(b){this.q.SetAngleRadians(b);return this};goog.exportProperty(box2d.b2Transform.prototype,"SetRotationAngleRadians",box2d.b2Transform.prototype.SetRotationAngleRadians);box2d.b2Transform.prototype.GetPosition=function(){return this.p};goog.exportProperty(box2d.b2Transform.prototype,"GetPosition",box2d.b2Transform.prototype.GetPosition);box2d.b2Transform.prototype.GetRotation=function(){return this.q};goog.exportProperty(box2d.b2Transform.prototype,"GetRotation",box2d.b2Transform.prototype.GetRotation);box2d.b2Transform.prototype.GetRotationAngle=function(){return this.q.GetAngle()};goog.exportProperty(box2d.b2Transform.prototype,"GetRotationAngle",box2d.b2Transform.prototype.GetRotationAngle);box2d.b2Transform.prototype.GetRotationAngleRadians=box2d.b2Transform.prototype.GetRotationAngle;box2d.b2Transform.prototype.GetAngle=function(){return this.q.GetAngle()};goog.exportProperty(box2d.b2Transform.prototype,"GetAngle",box2d.b2Transform.prototype.GetAngle);box2d.b2Transform.prototype.GetAngleRadians=box2d.b2Transform.prototype.GetAngle;box2d.b2MulXV=function(j,g,q){var m=j.q.c,n=j.q.s,k=g.x;g=g.y;q.x=m*k-n*g+j.p.x;q.y=n*k+m*g+j.p.y;return q};goog.exportSymbol("box2d.b2MulXV",box2d.b2MulXV);box2d.b2MulTXV=function(j,g,q){var m=j.q.c,n=j.q.s,k=g.x-j.p.x;j=g.y-j.p.y;q.x=m*k+n*j;q.y=-n*k+m*j;return q};goog.exportSymbol("box2d.b2MulTXV",box2d.b2MulTXV);box2d.b2MulXX=function(e,d,f){box2d.b2MulRR(e.q,d.q,f.q);box2d.b2AddVV(box2d.b2MulRV(e.q,d.p,f.p),e.p,f.p);return f};goog.exportSymbol("box2d.b2MulXX",box2d.b2MulXX);box2d.b2MulTXX=function(e,d,f){box2d.b2MulTRR(e.q,d.q,f.q);box2d.b2MulTRV(e.q,box2d.b2SubVV(d.p,e.p,f.p),f.p);return f};goog.exportSymbol("box2d.b2MulTXX",box2d.b2MulTXX);box2d.b2Sweep=function(){this.localCenter=new box2d.b2Vec2;this.c0=new box2d.b2Vec2;this.c=new box2d.b2Vec2};goog.exportSymbol("box2d.b2Sweep",box2d.b2Sweep);box2d.b2Sweep.prototype.localCenter=null;goog.exportProperty(box2d.b2Sweep.prototype,"localCenter",box2d.b2Sweep.prototype.localCenter);box2d.b2Sweep.prototype.c0=null;goog.exportProperty(box2d.b2Sweep.prototype,"c0",box2d.b2Sweep.prototype.c0);box2d.b2Sweep.prototype.c=null;goog.exportProperty(box2d.b2Sweep.prototype,"c",box2d.b2Sweep.prototype.c);box2d.b2Sweep.prototype.a0=0;goog.exportProperty(box2d.b2Sweep.prototype,"a0",box2d.b2Sweep.prototype.a0);box2d.b2Sweep.prototype.a=0;goog.exportProperty(box2d.b2Sweep.prototype,"a",box2d.b2Sweep.prototype.a);box2d.b2Sweep.prototype.alpha0=0;goog.exportProperty(box2d.b2Sweep.prototype,"alpha0",box2d.b2Sweep.prototype.alpha0);box2d.b2Sweep.prototype.Clone=function(){return(new box2d.b2Sweep).Copy(this)};goog.exportProperty(box2d.b2Sweep.prototype,"Clone",box2d.b2Sweep.prototype.Clone);box2d.b2Sweep.prototype.Copy=function(b){this.localCenter.Copy(b.localCenter);this.c0.Copy(b.c0);this.c.Copy(b.c);this.a0=b.a0;this.a=b.a;this.alpha0=b.alpha0;return this};goog.exportProperty(box2d.b2Sweep.prototype,"Copy",box2d.b2Sweep.prototype.Copy);box2d.b2Sweep.prototype.GetTransform=function(e,d){var f=1-d;e.p.x=f*this.c0.x+d*this.c.x;e.p.y=f*this.c0.y+d*this.c.y;e.q.SetAngleRadians(f*this.a0+d*this.a);e.p.SelfSub(box2d.b2MulRV(e.q,this.localCenter,box2d.b2Vec2.s_t0));return e};goog.exportProperty(box2d.b2Sweep.prototype,"GetTransform",box2d.b2Sweep.prototype.GetTransform);box2d.b2Sweep.prototype.Advance=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(1>this.alpha0);var d=(e-this.alpha0)/(1-this.alpha0),f=1-d;this.c0.x=f*this.c0.x+d*this.c.x;this.c0.y=f*this.c0.y+d*this.c.y;this.a0=f*this.a0+d*this.a;this.alpha0=e};goog.exportProperty(box2d.b2Sweep.prototype,"Advance",box2d.b2Sweep.prototype.Advance);box2d.b2Sweep.prototype.Normalize=function(){var b=box2d.b2_two_pi*Math.floor(this.a0/box2d.b2_two_pi);this.a0-=b;this.a-=b};goog.exportProperty(box2d.b2Sweep.prototype,"Normalize",box2d.b2Sweep.prototype.Normalize);box2d.b2ControllerEdge=function(){};goog.exportSymbol("box2d.b2ControllerEdge",box2d.b2ControllerEdge);box2d.b2ControllerEdge.prototype.controller=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"controller",box2d.b2ControllerEdge.prototype.controller);box2d.b2ControllerEdge.prototype.body=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"body",box2d.b2ControllerEdge.prototype.body);box2d.b2ControllerEdge.prototype.prevBody=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"prevBody",box2d.b2ControllerEdge.prototype.prevBody);box2d.b2ControllerEdge.prototype.nextBody=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"nextBody",box2d.b2ControllerEdge.prototype.nextBody);box2d.b2ControllerEdge.prototype.prevController=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"prevController",box2d.b2ControllerEdge.prototype.prevController);box2d.b2ControllerEdge.prototype.nextController=null;goog.exportProperty(box2d.b2ControllerEdge.prototype,"nextController",box2d.b2ControllerEdge.prototype.nextController);box2d.b2Controller=function(){};goog.exportSymbol("box2d.b2Controller",box2d.b2Controller);box2d.b2Controller.prototype.m_world=null;goog.exportProperty(box2d.b2Controller.prototype,"m_world",box2d.b2Controller.prototype.m_world);box2d.b2Controller.prototype.m_bodyList=null;goog.exportProperty(box2d.b2Controller.prototype,"m_bodyList",box2d.b2Controller.prototype.m_bodyList);box2d.b2Controller.prototype.m_bodyCount=0;goog.exportProperty(box2d.b2Controller.prototype,"m_bodyCount",box2d.b2Controller.prototype.m_bodyCount);box2d.b2Controller.prototype.m_prev=null;goog.exportProperty(box2d.b2Controller.prototype,"m_prev",box2d.b2Controller.prototype.m_prev);box2d.b2Controller.prototype.m_next=null;goog.exportProperty(box2d.b2Controller.prototype,"m_next",box2d.b2Controller.prototype.m_next);box2d.b2Controller.prototype.Step=function(b){};goog.exportProperty(box2d.b2Controller.prototype,"Step",box2d.b2Controller.prototype.Step);box2d.b2Controller.prototype.Draw=function(b){};goog.exportProperty(box2d.b2Controller.prototype,"Draw",box2d.b2Controller.prototype.Draw);box2d.b2Controller.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2Controller.prototype,"GetNext",box2d.b2Controller.prototype.GetNext);box2d.b2Controller.prototype.GetPrev=function(){return this.m_prev};goog.exportProperty(box2d.b2Controller.prototype,"GetPrev",box2d.b2Controller.prototype.GetPrev);box2d.b2Controller.prototype.GetWorld=function(){return this.m_world};goog.exportProperty(box2d.b2Controller.prototype,"GetWorld",box2d.b2Controller.prototype.GetWorld);box2d.b2Controller.prototype.GetBodyList=function(){return this.m_bodyList};goog.exportProperty(box2d.b2Controller.prototype,"GetBodyList",box2d.b2Controller.prototype.GetBodyList);box2d.b2Controller.prototype.AddBody=function(e){var d=new box2d.b2ControllerEdge;d.body=e;d.controller=this;d.nextBody=this.m_bodyList;d.prevBody=null;this.m_bodyList&&(this.m_bodyList.prevBody=d);this.m_bodyList=d;++this.m_bodyCount;d.nextController=e.m_controllerList;d.prevController=null;e.m_controllerList&&(e.m_controllerList.prevController=d);e.m_controllerList=d;++e.m_controllerCount};goog.exportProperty(box2d.b2Controller.prototype,"AddBody",box2d.b2Controller.prototype.AddBody);box2d.b2Controller.prototype.RemoveBody=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_bodyCount);for(var d=this.m_bodyList;d&&d.body!=e;){d=d.nextBody}box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!=d);d.prevBody&&(d.prevBody.nextBody=d.nextBody);d.nextBody&&(d.nextBody.prevBody=d.prevBody);this.m_bodyList==d&&(this.m_bodyList=d.nextBody);--this.m_bodyCount;d.nextController&&(d.nextController.prevController=d.prevController);d.prevController&&(d.prevController.nextController=d.nextController);e.m_controllerList==d&&(e.m_controllerList=d.nextController);--e.m_controllerCount};goog.exportProperty(box2d.b2Controller.prototype,"RemoveBody",box2d.b2Controller.prototype.RemoveBody);box2d.b2Controller.prototype.Clear=function(){for(;this.m_bodyList;){this.RemoveBody(this.m_bodyList.body)}this.m_bodyCount=0};goog.exportProperty(box2d.b2Controller.prototype,"Clear",box2d.b2Controller.prototype.Clear);box2d.b2ConstantAccelController=function(){box2d.b2Controller.call(this);this.A=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2ConstantAccelController,box2d.b2Controller);goog.exportSymbol("box2d.b2ConstantAccelController",box2d.b2ConstantAccelController);box2d.b2ConstantAccelController.prototype.A=null;goog.exportProperty(box2d.b2ConstantAccelController.prototype,"A",box2d.b2ConstantAccelController.prototype.A);box2d.b2ConstantAccelController.prototype.Step=function(e){e=box2d.b2MulSV(e.dt,this.A,box2d.b2ConstantAccelController.prototype.Step.s_dtA);for(var d=this.m_bodyList;d;d=d.nextBody){var f=d.body;f.IsAwake()&&f.SetLinearVelocity(box2d.b2AddVV(f.GetLinearVelocity(),e,box2d.b2Vec2.s_t0))}};goog.exportProperty(box2d.b2ConstantAccelController.prototype,"Step",box2d.b2ConstantAccelController.prototype.Step);box2d.b2ConstantAccelController.prototype.Step.s_dtA=new box2d.b2Vec2;box2d.b2JointType={e_unknownJoint:0,e_revoluteJoint:1,e_prismaticJoint:2,e_distanceJoint:3,e_pulleyJoint:4,e_mouseJoint:5,e_gearJoint:6,e_wheelJoint:7,e_weldJoint:8,e_frictionJoint:9,e_ropeJoint:10,e_motorJoint:11,e_areaJoint:12};goog.exportSymbol("box2d.b2JointType",box2d.b2JointType);goog.exportProperty(box2d.b2JointType,"e_unknownJoint",box2d.b2JointType.e_unknownJoint);goog.exportProperty(box2d.b2JointType,"e_revoluteJoint",box2d.b2JointType.e_revoluteJoint);goog.exportProperty(box2d.b2JointType,"e_prismaticJoint",box2d.b2JointType.e_prismaticJoint);goog.exportProperty(box2d.b2JointType,"e_distanceJoint",box2d.b2JointType.e_distanceJoint);goog.exportProperty(box2d.b2JointType,"e_pulleyJoint",box2d.b2JointType.e_pulleyJoint);goog.exportProperty(box2d.b2JointType,"e_mouseJoint",box2d.b2JointType.e_mouseJoint);goog.exportProperty(box2d.b2JointType,"e_gearJoint",box2d.b2JointType.e_gearJoint);goog.exportProperty(box2d.b2JointType,"e_wheelJoint",box2d.b2JointType.e_wheelJoint);goog.exportProperty(box2d.b2JointType,"e_weldJoint",box2d.b2JointType.e_weldJoint);goog.exportProperty(box2d.b2JointType,"e_frictionJoint",box2d.b2JointType.e_frictionJoint);goog.exportProperty(box2d.b2JointType,"e_ropeJoint",box2d.b2JointType.e_ropeJoint);goog.exportProperty(box2d.b2JointType,"e_motorJoint",box2d.b2JointType.e_motorJoint);goog.exportProperty(box2d.b2JointType,"e_areaJoint",box2d.b2JointType.e_areaJoint);box2d.b2LimitState={e_inactiveLimit:0,e_atLowerLimit:1,e_atUpperLimit:2,e_equalLimits:3};goog.exportSymbol("box2d.b2LimitState",box2d.b2LimitState);goog.exportProperty(box2d.b2LimitState,"e_inactiveLimit",box2d.b2LimitState.e_inactiveLimit);goog.exportProperty(box2d.b2LimitState,"e_atLowerLimit",box2d.b2LimitState.e_atLowerLimit);goog.exportProperty(box2d.b2LimitState,"e_atUpperLimit",box2d.b2LimitState.e_atUpperLimit);goog.exportProperty(box2d.b2LimitState,"e_equalLimits",box2d.b2LimitState.e_equalLimits);box2d.b2Jacobian=function(){this.linear=new box2d.b2Vec2};goog.exportSymbol("box2d.b2Jacobian",box2d.b2Jacobian);box2d.b2Jacobian.prototype.linear=null;goog.exportProperty(box2d.b2Jacobian.prototype,"linear",box2d.b2Jacobian.prototype.linear);box2d.b2Jacobian.prototype.angularA=0;goog.exportProperty(box2d.b2Jacobian.prototype,"angularA",box2d.b2Jacobian.prototype.angularA);box2d.b2Jacobian.prototype.angularB=0;goog.exportProperty(box2d.b2Jacobian.prototype,"angularB",box2d.b2Jacobian.prototype.angularB);box2d.b2Jacobian.prototype.SetZero=function(){this.linear.SetZero();this.angularB=this.angularA=0;return this};goog.exportProperty(box2d.b2Jacobian.prototype,"SetZero",box2d.b2Jacobian.prototype.SetZero);box2d.b2Jacobian.prototype.Set=function(e,d,f){this.linear.Copy(e);this.angularA=d;this.angularB=f;return this};goog.exportProperty(box2d.b2Jacobian.prototype,"Set",box2d.b2Jacobian.prototype.Set);box2d.b2JointEdge=function(){};goog.exportSymbol("box2d.b2JointEdge",box2d.b2JointEdge);box2d.b2JointEdge.prototype.other=null;goog.exportProperty(box2d.b2JointEdge.prototype,"other",box2d.b2JointEdge.prototype.other);box2d.b2JointEdge.prototype.joint=null;goog.exportProperty(box2d.b2JointEdge.prototype,"joint",box2d.b2JointEdge.prototype.joint);box2d.b2JointEdge.prototype.prev=null;goog.exportProperty(box2d.b2JointEdge.prototype,"prev",box2d.b2JointEdge.prototype.prev);box2d.b2JointEdge.prototype.next=null;goog.exportProperty(box2d.b2JointEdge.prototype,"next",box2d.b2JointEdge.prototype.next);box2d.b2JointDef=function(b){this.type=b};goog.exportSymbol("box2d.b2JointDef",box2d.b2JointDef);box2d.b2JointDef.prototype.type=box2d.b2JointType.e_unknownJoint;goog.exportProperty(box2d.b2JointDef.prototype,"type",box2d.b2JointDef.prototype.type);box2d.b2JointDef.prototype.userData=null;goog.exportProperty(box2d.b2JointDef.prototype,"userData",box2d.b2JointDef.prototype.userData);box2d.b2JointDef.prototype.bodyA=null;goog.exportProperty(box2d.b2JointDef.prototype,"bodyA",box2d.b2JointDef.prototype.bodyA);box2d.b2JointDef.prototype.bodyB=null;goog.exportProperty(box2d.b2JointDef.prototype,"bodyB",box2d.b2JointDef.prototype.bodyB);box2d.b2JointDef.prototype.collideConnected=!1;goog.exportProperty(box2d.b2JointDef.prototype,"collideConnected",box2d.b2JointDef.prototype.collideConnected);box2d.b2Joint=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(b.bodyA!=b.bodyB);this.m_type=b.type;this.m_edgeA=new box2d.b2JointEdge;this.m_edgeB=new box2d.b2JointEdge;this.m_bodyA=b.bodyA;this.m_bodyB=b.bodyB;this.m_collideConnected=b.collideConnected;this.m_userData=b.userData};goog.exportSymbol("box2d.b2Joint",box2d.b2Joint);box2d.b2Joint.prototype.m_type=box2d.b2JointType.e_unknownJoint;goog.exportProperty(box2d.b2Joint.prototype,"m_type",box2d.b2Joint.prototype.m_type);box2d.b2Joint.prototype.m_prev=null;goog.exportProperty(box2d.b2Joint.prototype,"m_prev",box2d.b2Joint.prototype.m_prev);box2d.b2Joint.prototype.m_next=null;goog.exportProperty(box2d.b2Joint.prototype,"m_next",box2d.b2Joint.prototype.m_next);box2d.b2Joint.prototype.m_edgeA=null;goog.exportProperty(box2d.b2Joint.prototype,"m_edgeA",box2d.b2Joint.prototype.m_edgeA);box2d.b2Joint.prototype.m_edgeB=null;goog.exportProperty(box2d.b2Joint.prototype,"m_edgeB",box2d.b2Joint.prototype.m_edgeB);box2d.b2Joint.prototype.m_bodyA=null;goog.exportProperty(box2d.b2Joint.prototype,"m_bodyA",box2d.b2Joint.prototype.m_bodyA);box2d.b2Joint.prototype.m_bodyB=null;goog.exportProperty(box2d.b2Joint.prototype,"m_bodyB",box2d.b2Joint.prototype.m_bodyB);box2d.b2Joint.prototype.m_index=0;goog.exportProperty(box2d.b2Joint.prototype,"m_index",box2d.b2Joint.prototype.m_index);box2d.b2Joint.prototype.m_islandFlag=!1;goog.exportProperty(box2d.b2Joint.prototype,"m_islandFlag",box2d.b2Joint.prototype.m_islandFlag);box2d.b2Joint.prototype.m_collideConnected=!1;goog.exportProperty(box2d.b2Joint.prototype,"m_collideConnected",box2d.b2Joint.prototype.m_collideConnected);box2d.b2Joint.prototype.m_userData=null;goog.exportProperty(box2d.b2Joint.prototype,"m_userData",box2d.b2Joint.prototype.m_userData);box2d.b2Joint.prototype.GetAnchorA=function(b){return b.SetZero()};goog.exportProperty(box2d.b2Joint.prototype,"GetAnchorA",box2d.b2Joint.prototype.GetAnchorA);box2d.b2Joint.prototype.GetAnchorB=function(b){return b.SetZero()};goog.exportProperty(box2d.b2Joint.prototype,"GetAnchorB",box2d.b2Joint.prototype.GetAnchorB);box2d.b2Joint.prototype.GetReactionForce=function(e,d){return d.SetZero()};goog.exportProperty(box2d.b2Joint.prototype,"GetReactionForce",box2d.b2Joint.prototype.GetReactionForce);box2d.b2Joint.prototype.GetReactionTorque=function(b){return 0};goog.exportProperty(box2d.b2Joint.prototype,"GetReactionTorque",box2d.b2Joint.prototype.GetReactionTorque);box2d.b2Joint.prototype.InitVelocityConstraints=function(b){};goog.exportProperty(box2d.b2Joint.prototype,"InitVelocityConstraints",box2d.b2Joint.prototype.InitVelocityConstraints);box2d.b2Joint.prototype.SolveVelocityConstraints=function(b){};goog.exportProperty(box2d.b2Joint.prototype,"SolveVelocityConstraints",box2d.b2Joint.prototype.SolveVelocityConstraints);box2d.b2Joint.prototype.SolvePositionConstraints=function(b){return !1};goog.exportProperty(box2d.b2Joint.prototype,"SolvePositionConstraints",box2d.b2Joint.prototype.SolvePositionConstraints);box2d.b2Joint.prototype.GetType=function(){return this.m_type};goog.exportProperty(box2d.b2Joint.prototype,"GetType",box2d.b2Joint.prototype.GetType);box2d.b2Joint.prototype.GetBodyA=function(){return this.m_bodyA};goog.exportProperty(box2d.b2Joint.prototype,"GetBodyA",box2d.b2Joint.prototype.GetBodyA);box2d.b2Joint.prototype.GetBodyB=function(){return this.m_bodyB};goog.exportProperty(box2d.b2Joint.prototype,"GetBodyB",box2d.b2Joint.prototype.GetBodyB);box2d.b2Joint.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2Joint.prototype,"GetNext",box2d.b2Joint.prototype.GetNext);box2d.b2Joint.prototype.GetUserData=function(){return this.m_userData};goog.exportProperty(box2d.b2Joint.prototype,"GetUserData",box2d.b2Joint.prototype.GetUserData);box2d.b2Joint.prototype.SetUserData=function(b){this.m_userData=b};goog.exportProperty(box2d.b2Joint.prototype,"SetUserData",box2d.b2Joint.prototype.SetUserData);box2d.b2Joint.prototype.GetCollideConnected=function(){return this.m_collideConnected};goog.exportProperty(box2d.b2Joint.prototype,"GetCollideConnected",box2d.b2Joint.prototype.GetCollideConnected);box2d.b2Joint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("// Dump is not supported for this joint type.\n")};goog.exportProperty(box2d.b2Joint.prototype,"Dump",box2d.b2Joint.prototype.Dump);box2d.b2Joint.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()};goog.exportProperty(box2d.b2Joint.prototype,"IsActive",box2d.b2Joint.prototype.IsActive);box2d.b2Joint.prototype.ShiftOrigin=function(b){};goog.exportProperty(box2d.b2Joint.prototype,"ShiftOrigin",box2d.b2Joint.prototype.ShiftOrigin);box2d.b2RevoluteJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_revoluteJoint);this.localAnchorA=new box2d.b2Vec2(0,0);this.localAnchorB=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2RevoluteJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2RevoluteJointDef",box2d.b2RevoluteJointDef);box2d.b2RevoluteJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"localAnchorA",box2d.b2RevoluteJointDef.prototype.localAnchorA);box2d.b2RevoluteJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"localAnchorB",box2d.b2RevoluteJointDef.prototype.localAnchorB);box2d.b2RevoluteJointDef.prototype.referenceAngle=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"referenceAngle",box2d.b2RevoluteJointDef.prototype.referenceAngle);box2d.b2RevoluteJointDef.prototype.enableLimit=!1;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"enableLimit",box2d.b2RevoluteJointDef.prototype.enableLimit);box2d.b2RevoluteJointDef.prototype.lowerAngle=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"lowerAngle",box2d.b2RevoluteJointDef.prototype.lowerAngle);box2d.b2RevoluteJointDef.prototype.upperAngle=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"upperAngle",box2d.b2RevoluteJointDef.prototype.upperAngle);box2d.b2RevoluteJointDef.prototype.enableMotor=!1;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"enableMotor",box2d.b2RevoluteJointDef.prototype.enableMotor);box2d.b2RevoluteJointDef.prototype.motorSpeed=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"motorSpeed",box2d.b2RevoluteJointDef.prototype.motorSpeed);box2d.b2RevoluteJointDef.prototype.maxMotorTorque=0;goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"maxMotorTorque",box2d.b2RevoluteJointDef.prototype.maxMotorTorque);box2d.b2RevoluteJointDef.prototype.Initialize=function(e,d,f){this.bodyA=e;this.bodyB=d;this.bodyA.GetLocalPoint(f,this.localAnchorA);this.bodyB.GetLocalPoint(f,this.localAnchorB);this.referenceAngle=this.bodyB.GetAngleRadians()-this.bodyA.GetAngleRadians()};goog.exportProperty(box2d.b2RevoluteJointDef.prototype,"Initialize",box2d.b2RevoluteJointDef.prototype.Initialize);box2d.b2RevoluteJoint=function(b){box2d.b2Joint.call(this,b);this.m_localAnchorA=new box2d.b2Vec2;this.m_localAnchorB=new box2d.b2Vec2;this.m_impulse=new box2d.b2Vec3;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_mass=new box2d.b2Mat33;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_K=new box2d.b2Mat22;this.m_localAnchorA.Copy(b.localAnchorA);this.m_localAnchorB.Copy(b.localAnchorB);this.m_referenceAngle=b.referenceAngle;this.m_impulse.SetZero();this.m_motorImpulse=0;this.m_lowerAngle=b.lowerAngle;this.m_upperAngle=b.upperAngle;this.m_maxMotorTorque=b.maxMotorTorque;this.m_motorSpeed=b.motorSpeed;this.m_enableLimit=b.enableLimit;this.m_enableMotor=b.enableMotor;this.m_limitState=box2d.b2LimitState.e_inactiveLimit};goog.inherits(box2d.b2RevoluteJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2RevoluteJoint",box2d.b2RevoluteJoint);box2d.b2RevoluteJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localAnchorA",box2d.b2RevoluteJoint.prototype.m_localAnchorA);box2d.b2RevoluteJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localAnchorB",box2d.b2RevoluteJoint.prototype.m_localAnchorB);box2d.b2RevoluteJoint.prototype.m_impulse=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_impulse",box2d.b2RevoluteJoint.prototype.m_impulse);box2d.b2RevoluteJoint.prototype.m_motorImpulse=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_motorImpulse",box2d.b2RevoluteJoint.prototype.m_motorImpulse);box2d.b2RevoluteJoint.prototype.m_enableMotor=!1;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_enableMotor",box2d.b2RevoluteJoint.prototype.m_enableMotor);box2d.b2RevoluteJoint.prototype.m_maxMotorTorque=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_maxMotorTorque",box2d.b2RevoluteJoint.prototype.m_maxMotorTorque);box2d.b2RevoluteJoint.prototype.m_motorSpeed=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_motorSpeed",box2d.b2RevoluteJoint.prototype.m_motorSpeed);box2d.b2RevoluteJoint.prototype.m_enableLimit=!1;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_enableLimit",box2d.b2RevoluteJoint.prototype.m_enableLimit);box2d.b2RevoluteJoint.prototype.m_referenceAngle=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_referenceAngle",box2d.b2RevoluteJoint.prototype.m_referenceAngle);box2d.b2RevoluteJoint.prototype.m_lowerAngle=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_lowerAngle",box2d.b2RevoluteJoint.prototype.m_lowerAngle);box2d.b2RevoluteJoint.prototype.m_upperAngle=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_upperAngle",box2d.b2RevoluteJoint.prototype.m_upperAngle);box2d.b2RevoluteJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_indexA",box2d.b2RevoluteJoint.prototype.m_indexA);box2d.b2RevoluteJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_indexB",box2d.b2RevoluteJoint.prototype.m_indexB);box2d.b2RevoluteJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_rA",box2d.b2RevoluteJoint.prototype.m_rA);box2d.b2RevoluteJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_rB",box2d.b2RevoluteJoint.prototype.m_rB);box2d.b2RevoluteJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localCenterA",box2d.b2RevoluteJoint.prototype.m_localCenterA);box2d.b2RevoluteJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_localCenterB",box2d.b2RevoluteJoint.prototype.m_localCenterB);box2d.b2RevoluteJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invMassA",box2d.b2RevoluteJoint.prototype.m_invMassA);box2d.b2RevoluteJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invMassB",box2d.b2RevoluteJoint.prototype.m_invMassB);box2d.b2RevoluteJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invIA",box2d.b2RevoluteJoint.prototype.m_invIA);box2d.b2RevoluteJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_invIB",box2d.b2RevoluteJoint.prototype.m_invIB);box2d.b2RevoluteJoint.prototype.m_mass=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_mass",box2d.b2RevoluteJoint.prototype.m_mass);box2d.b2RevoluteJoint.prototype.m_motorMass=0;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_motorMass",box2d.b2RevoluteJoint.prototype.m_motorMass);box2d.b2RevoluteJoint.prototype.m_limitState=box2d.b2LimitState.e_inactiveLimit;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_limitState",box2d.b2RevoluteJoint.prototype.m_limitState);box2d.b2RevoluteJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_qA",box2d.b2RevoluteJoint.prototype.m_qA);box2d.b2RevoluteJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_qB",box2d.b2RevoluteJoint.prototype.m_qB);box2d.b2RevoluteJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_lalcA",box2d.b2RevoluteJoint.prototype.m_lalcA);box2d.b2RevoluteJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_lalcB",box2d.b2RevoluteJoint.prototype.m_lalcB);box2d.b2RevoluteJoint.prototype.m_K=null;goog.exportProperty(box2d.b2RevoluteJoint.prototype,"m_K",box2d.b2RevoluteJoint.prototype.m_K);box2d.b2RevoluteJoint.prototype.InitVelocityConstraints=function(E){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var D=E.positions[this.m_indexA].a,C=E.velocities[this.m_indexA].v,A=E.velocities[this.m_indexA].w,B=E.positions[this.m_indexB].a,z=E.velocities[this.m_indexB].v,y=E.velocities[this.m_indexB].w,v=this.m_qA.SetAngleRadians(D),r=this.m_qB.SetAngleRadians(B);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2MulRV(v,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2MulRV(r,this.m_lalcB,this.m_rB);var v=this.m_invMassA,r=this.m_invMassB,u=this.m_invIA,q=this.m_invIB,j=0==u+q;this.m_mass.ex.x=v+r+this.m_rA.y*this.m_rA.y*u+this.m_rB.y*this.m_rB.y*q;this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*u-this.m_rB.y*this.m_rB.x*q;this.m_mass.ez.x=-this.m_rA.y*u-this.m_rB.y*q;this.m_mass.ex.y=this.m_mass.ey.x;this.m_mass.ey.y=v+r+this.m_rA.x*this.m_rA.x*u+this.m_rB.x*this.m_rB.x*q;this.m_mass.ez.y=this.m_rA.x*u+this.m_rB.x*q;this.m_mass.ex.z=this.m_mass.ez.x;this.m_mass.ey.z=this.m_mass.ez.y;this.m_mass.ez.z=u+q;this.m_motorMass=u+q;0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass);if(!1==this.m_enableMotor||j){this.m_motorImpulse=0}this.m_enableLimit&&!1==j?(D=B-D-this.m_referenceAngle,box2d.b2Abs(this.m_upperAngle-this.m_lowerAngle)<2*box2d.b2_angularSlop?this.m_limitState=box2d.b2LimitState.e_equalLimits:D<=this.m_lowerAngle?(this.m_limitState!=box2d.b2LimitState.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=box2d.b2LimitState.e_atLowerLimit):D>=this.m_upperAngle?(this.m_limitState!=box2d.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=box2d.b2LimitState.e_atUpperLimit):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):this.m_limitState=box2d.b2LimitState.e_inactiveLimit;E.step.warmStarting?(this.m_impulse.SelfMul(E.step.dtRatio),this.m_motorImpulse*=E.step.dtRatio,D=box2d.b2RevoluteJoint.prototype.InitVelocityConstraints.s_P.SetXY(this.m_impulse.x,this.m_impulse.y),C.SelfMulSub(v,D),A-=u*(box2d.b2CrossVV(this.m_rA,D)+this.m_motorImpulse+this.m_impulse.z),z.SelfMulAdd(r,D),y+=q*(box2d.b2CrossVV(this.m_rB,D)+this.m_motorImpulse+this.m_impulse.z)):(this.m_impulse.SetZero(),this.m_motorImpulse=0);E.velocities[this.m_indexA].w=A;E.velocities[this.m_indexB].w=y};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"InitVelocityConstraints",box2d.b2RevoluteJoint.prototype.InitVelocityConstraints);box2d.b2RevoluteJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints=function(F){var E=F.velocities[this.m_indexA].v,D=F.velocities[this.m_indexA].w,B=F.velocities[this.m_indexB].v,C=F.velocities[this.m_indexB].w,A=this.m_invMassA,z=this.m_invMassB,y=this.m_invIA,u=this.m_invIB,v=0==y+u;if(this.m_enableMotor&&this.m_limitState!=box2d.b2LimitState.e_equalLimits&&!1==v){var r=C-D-this.m_motorSpeed,r=-this.m_motorMass*r,q=this.m_motorImpulse,j=F.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+r,-j,j);r=this.m_motorImpulse-q;D-=y*r;C+=u*r}this.m_enableLimit&&this.m_limitState!=box2d.b2LimitState.e_inactiveLimit&&!1==v?(v=box2d.b2SubVV(box2d.b2AddVCrossSV(B,C,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(E,D,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot1),r=this.m_mass.Solve33(v.x,v.y,C-D,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse3).SelfNeg(),this.m_limitState==box2d.b2LimitState.e_equalLimits?this.m_impulse.SelfAdd(r):this.m_limitState==box2d.b2LimitState.e_atLowerLimit?(q=this.m_impulse.z+r.z,0>q?(q=-v.x+this.m_impulse.z*this.m_mass.ez.x,v=-v.y+this.m_impulse.z*this.m_mass.ez.y,v=this.m_mass.Solve22(q,v,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced),r.x=v.x,r.y=v.y,r.z=-this.m_impulse.z,this.m_impulse.x+=v.x,this.m_impulse.y+=v.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(r)):this.m_limitState==box2d.b2LimitState.e_atUpperLimit&&(q=this.m_impulse.z+r.z,0<q?(q=-v.x+this.m_impulse.z*this.m_mass.ez.x,v=-v.y+this.m_impulse.z*this.m_mass.ez.y,v=this.m_mass.Solve22(q,v,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced),r.x=v.x,r.y=v.y,r.z=-this.m_impulse.z,this.m_impulse.x+=v.x,this.m_impulse.y+=v.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(r)),v=box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_P.SetXY(r.x,r.y),E.SelfMulSub(A,v),D-=y*(box2d.b2CrossVV(this.m_rA,v)+r.z),B.SelfMulAdd(z,v),C+=u*(box2d.b2CrossVV(this.m_rB,v)+r.z)):(r=box2d.b2SubVV(box2d.b2AddVCrossSV(B,C,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(E,D,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot),r=this.m_mass.Solve22(-r.x,-r.y,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse2),this.m_impulse.x+=r.x,this.m_impulse.y+=r.y,E.SelfMulSub(A,r),D-=y*box2d.b2CrossVV(this.m_rA,r),B.SelfMulAdd(z,r),C+=u*box2d.b2CrossVV(this.m_rB,r));F.velocities[this.m_indexA].w=D;F.velocities[this.m_indexB].w=C};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SolveVelocityConstraints",box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints);box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot1=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse3=new box2d.b2Vec3;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse2=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolvePositionConstraints=function(J){var I=J.positions[this.m_indexA].c,H=J.positions[this.m_indexA].a,F=J.positions[this.m_indexB].c,G=J.positions[this.m_indexB].a,E=this.m_qA.SetAngleRadians(H),D=this.m_qB.SetAngleRadians(G),C=0,A=0,A=0==this.m_invIA+this.m_invIB;if(this.m_enableLimit&&this.m_limitState!=box2d.b2LimitState.e_inactiveLimit&&!1==A){var B=G-H-this.m_referenceAngle,A=0;this.m_limitState==box2d.b2LimitState.e_equalLimits?(B=box2d.b2Clamp(B-this.m_lowerAngle,-box2d.b2_maxAngularCorrection,box2d.b2_maxAngularCorrection),A=-this.m_motorMass*B,C=box2d.b2Abs(B)):this.m_limitState==box2d.b2LimitState.e_atLowerLimit?(B-=this.m_lowerAngle,C=-B,B=box2d.b2Clamp(B+box2d.b2_angularSlop,-box2d.b2_maxAngularCorrection,0),A=-this.m_motorMass*B):this.m_limitState==box2d.b2LimitState.e_atUpperLimit&&(C=B-=this.m_upperAngle,B=box2d.b2Clamp(B-box2d.b2_angularSlop,0,box2d.b2_maxAngularCorrection),A=-this.m_motorMass*B);H-=this.m_invIA*A;G+=this.m_invIB*A}E.SetAngleRadians(H);D.SetAngleRadians(G);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);E=box2d.b2MulRV(E,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var D=box2d.b2MulRV(D,this.m_lalcB,this.m_rB),B=box2d.b2SubVV(box2d.b2AddVV(F,D,box2d.b2Vec2.s_t0),box2d.b2AddVV(I,E,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_C),A=B.GetLength(),z=this.m_invMassA,y=this.m_invMassB,v=this.m_invIA,u=this.m_invIB,j=this.m_K;j.ex.x=z+y+v*E.y*E.y+u*D.y*D.y;j.ex.y=-v*E.x*E.y-u*D.x*D.y;j.ey.x=j.ex.y;j.ey.y=z+y+v*E.x*E.x+u*D.x*D.x;B=j.Solve(B.x,B.y,box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_impulse).SelfNeg();I.SelfMulSub(z,B);H-=v*box2d.b2CrossVV(E,B);F.SelfMulAdd(y,B);G+=u*box2d.b2CrossVV(D,B);J.positions[this.m_indexA].a=H;J.positions[this.m_indexB].a=G;return A<=box2d.b2_linearSlop&&C<=box2d.b2_angularSlop};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SolvePositionConstraints",box2d.b2RevoluteJoint.prototype.SolvePositionConstraints);box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_C=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec2;box2d.b2RevoluteJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetAnchorA",box2d.b2RevoluteJoint.prototype.GetAnchorA);box2d.b2RevoluteJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetAnchorB",box2d.b2RevoluteJoint.prototype.GetAnchorB);box2d.b2RevoluteJoint.prototype.GetReactionForce=function(e,d){return d.SetXY(e*this.m_impulse.x,e*this.m_impulse.y)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetReactionForce",box2d.b2RevoluteJoint.prototype.GetReactionForce);box2d.b2RevoluteJoint.prototype.GetReactionTorque=function(b){return b*this.m_impulse.z};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetReactionTorque",box2d.b2RevoluteJoint.prototype.GetReactionTorque);box2d.b2RevoluteJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetLocalAnchorA",box2d.b2RevoluteJoint.prototype.GetLocalAnchorA);box2d.b2RevoluteJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetLocalAnchorB",box2d.b2RevoluteJoint.prototype.GetLocalAnchorB);box2d.b2RevoluteJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetReferenceAngle",box2d.b2RevoluteJoint.prototype.GetReferenceAngle);box2d.b2RevoluteJoint.prototype.GetJointAngleRadians=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetJointAngleRadians",box2d.b2RevoluteJoint.prototype.GetJointAngleRadians);box2d.b2RevoluteJoint.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetJointSpeed",box2d.b2RevoluteJoint.prototype.GetJointSpeed);box2d.b2RevoluteJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"IsMotorEnabled",box2d.b2RevoluteJoint.prototype.IsMotorEnabled);box2d.b2RevoluteJoint.prototype.EnableMotor=function(b){this.m_enableMotor!=b&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=b)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"EnableMotor",box2d.b2RevoluteJoint.prototype.EnableMotor);box2d.b2RevoluteJoint.prototype.GetMotorTorque=function(b){return b*this.m_motorImpulse};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetMotorTorque",box2d.b2RevoluteJoint.prototype.GetMotorTorque);box2d.b2RevoluteJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetMotorSpeed",box2d.b2RevoluteJoint.prototype.GetMotorSpeed);box2d.b2RevoluteJoint.prototype.SetMaxMotorTorque=function(b){this.m_maxMotorTorque=b};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SetMaxMotorTorque",box2d.b2RevoluteJoint.prototype.SetMaxMotorTorque);box2d.b2RevoluteJoint.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetMaxMotorTorque",box2d.b2RevoluteJoint.prototype.GetMaxMotorTorque);box2d.b2RevoluteJoint.prototype.IsLimitEnabled=function(){return this.m_enableLimit};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"IsLimitEnabled",box2d.b2RevoluteJoint.prototype.IsLimitEnabled);box2d.b2RevoluteJoint.prototype.EnableLimit=function(b){b!=this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=b,this.m_impulse.z=0)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"EnableLimit",box2d.b2RevoluteJoint.prototype.EnableLimit);box2d.b2RevoluteJoint.prototype.GetLowerLimit=function(){return this.m_lowerAngle};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetLowerLimit",box2d.b2RevoluteJoint.prototype.GetLowerLimit);box2d.b2RevoluteJoint.prototype.GetUpperLimit=function(){return this.m_upperAngle};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"GetUpperLimit",box2d.b2RevoluteJoint.prototype.GetUpperLimit);box2d.b2RevoluteJoint.prototype.SetLimits=function(e,d){if(e!=this.m_lowerAngle||d!=this.m_upperAngle){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=e,this.m_upperAngle=d}};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SetLimits",box2d.b2RevoluteJoint.prototype.SetLimits);box2d.b2RevoluteJoint.prototype.SetMotorSpeed=function(b){this.m_motorSpeed!=b&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=b)};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"SetMotorSpeed",box2d.b2RevoluteJoint.prototype.SetMotorSpeed);box2d.b2RevoluteJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2RevoluteJointDef*/ var jd = new box2d.b2RevoluteJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle);box2d.b2Log("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false");box2d.b2Log("  jd.lowerAngle = %.15f;\n",this.m_lowerAngle);box2d.b2Log("  jd.upperAngle = %.15f;\n",this.m_upperAngle);box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false");box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed);box2d.b2Log("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2RevoluteJoint.prototype,"Dump",box2d.b2RevoluteJoint.prototype.Dump);box2d.b2PrismaticJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_prismaticJoint);this.localAnchorA=new box2d.b2Vec2;this.localAnchorB=new box2d.b2Vec2;this.localAxisA=new box2d.b2Vec2(1,0)};goog.inherits(box2d.b2PrismaticJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2PrismaticJointDef",box2d.b2PrismaticJointDef);box2d.b2PrismaticJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"localAnchorA",box2d.b2PrismaticJointDef.prototype.localAnchorA);box2d.b2PrismaticJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"localAnchorB",box2d.b2PrismaticJointDef.prototype.localAnchorB);box2d.b2PrismaticJointDef.prototype.localAxisA=null;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"localAxisA",box2d.b2PrismaticJointDef.prototype.localAxisA);box2d.b2PrismaticJointDef.prototype.referenceAngle=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"referenceAngle",box2d.b2PrismaticJointDef.prototype.referenceAngle);box2d.b2PrismaticJointDef.prototype.enableLimit=!1;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"enableLimit",box2d.b2PrismaticJointDef.prototype.enableLimit);box2d.b2PrismaticJointDef.prototype.lowerTranslation=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"lowerTranslation",box2d.b2PrismaticJointDef.prototype.lowerTranslation);box2d.b2PrismaticJointDef.prototype.upperTranslation=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"upperTranslation",box2d.b2PrismaticJointDef.prototype.upperTranslation);box2d.b2PrismaticJointDef.prototype.enableMotor=!1;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"enableMotor",box2d.b2PrismaticJointDef.prototype.enableMotor);box2d.b2PrismaticJointDef.prototype.maxMotorForce=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"maxMotorForce",box2d.b2PrismaticJointDef.prototype.maxMotorForce);box2d.b2PrismaticJointDef.prototype.motorSpeed=0;goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"motorSpeed",box2d.b2PrismaticJointDef.prototype.motorSpeed);box2d.b2PrismaticJointDef.prototype.Initialize=function(f,d,j,g){this.bodyA=f;this.bodyB=d;this.bodyA.GetLocalPoint(j,this.localAnchorA);this.bodyB.GetLocalPoint(j,this.localAnchorB);this.bodyA.GetLocalVector(g,this.localAxisA);this.referenceAngle=this.bodyB.GetAngleRadians()-this.bodyA.GetAngleRadians()};goog.exportProperty(box2d.b2PrismaticJointDef.prototype,"Initialize",box2d.b2PrismaticJointDef.prototype.Initialize);box2d.b2PrismaticJoint=function(b){box2d.b2Joint.call(this,b);this.m_localAnchorA=b.localAnchorA.Clone();this.m_localAnchorB=b.localAnchorB.Clone();this.m_localXAxisA=b.localAxisA.Clone().SelfNormalize();this.m_localYAxisA=box2d.b2CrossOneV(this.m_localXAxisA,new box2d.b2Vec2);this.m_referenceAngle=b.referenceAngle;this.m_impulse=new box2d.b2Vec3(0,0,0);this.m_lowerTranslation=b.lowerTranslation;this.m_upperTranslation=b.upperTranslation;this.m_maxMotorForce=b.maxMotorForce;this.m_motorSpeed=b.motorSpeed;this.m_enableLimit=b.enableLimit;this.m_enableMotor=b.enableMotor;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_axis=new box2d.b2Vec2(0,0);this.m_perp=new box2d.b2Vec2(0,0);this.m_K=new box2d.b2Mat33;this.m_K3=new box2d.b2Mat33;this.m_K2=new box2d.b2Mat22;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2};goog.inherits(box2d.b2PrismaticJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2PrismaticJoint",box2d.b2PrismaticJoint);box2d.b2PrismaticJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localAnchorA",box2d.b2PrismaticJoint.prototype.m_localAnchorA);box2d.b2PrismaticJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localAnchorB",box2d.b2PrismaticJoint.prototype.m_localAnchorB);box2d.b2PrismaticJoint.prototype.m_localXAxisA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localXAxisA",box2d.b2PrismaticJoint.prototype.m_localXAxisA);box2d.b2PrismaticJoint.prototype.m_localYAxisA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localYAxisA",box2d.b2PrismaticJoint.prototype.m_localYAxisA);box2d.b2PrismaticJoint.prototype.m_referenceAngle=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_referenceAngle",box2d.b2PrismaticJoint.prototype.m_referenceAngle);box2d.b2PrismaticJoint.prototype.m_impulse=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_impulse",box2d.b2PrismaticJoint.prototype.m_impulse);box2d.b2PrismaticJoint.prototype.m_motorImpulse=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_motorImpulse",box2d.b2PrismaticJoint.prototype.m_motorImpulse);box2d.b2PrismaticJoint.prototype.m_lowerTranslation=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_lowerTranslation",box2d.b2PrismaticJoint.prototype.m_lowerTranslation);box2d.b2PrismaticJoint.prototype.m_upperTranslation=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_upperTranslation",box2d.b2PrismaticJoint.prototype.m_upperTranslation);box2d.b2PrismaticJoint.prototype.m_maxMotorForce=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_maxMotorForce",box2d.b2PrismaticJoint.prototype.m_maxMotorForce);box2d.b2PrismaticJoint.prototype.m_motorSpeed=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_motorSpeed",box2d.b2PrismaticJoint.prototype.m_motorSpeed);box2d.b2PrismaticJoint.prototype.m_enableLimit=!1;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_enableLimit",box2d.b2PrismaticJoint.prototype.m_enableLimit);box2d.b2PrismaticJoint.prototype.m_enableMotor=!1;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_enableMotor",box2d.b2PrismaticJoint.prototype.m_enableMotor);box2d.b2PrismaticJoint.prototype.m_limitState=box2d.b2LimitState.e_inactiveLimit;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_limitState",box2d.b2PrismaticJoint.prototype.m_limitState);box2d.b2PrismaticJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_indexA",box2d.b2PrismaticJoint.prototype.m_indexA);box2d.b2PrismaticJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_indexB",box2d.b2PrismaticJoint.prototype.m_indexB);box2d.b2PrismaticJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localCenterA",box2d.b2PrismaticJoint.prototype.m_localCenterA);box2d.b2PrismaticJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_localCenterB",box2d.b2PrismaticJoint.prototype.m_localCenterB);box2d.b2PrismaticJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invMassA",box2d.b2PrismaticJoint.prototype.m_invMassA);box2d.b2PrismaticJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invMassB",box2d.b2PrismaticJoint.prototype.m_invMassB);box2d.b2PrismaticJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invIA",box2d.b2PrismaticJoint.prototype.m_invIA);box2d.b2PrismaticJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_invIB",box2d.b2PrismaticJoint.prototype.m_invIB);box2d.b2PrismaticJoint.prototype.m_axis=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_axis",box2d.b2PrismaticJoint.prototype.m_axis);box2d.b2PrismaticJoint.prototype.m_perp=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_perp",box2d.b2PrismaticJoint.prototype.m_perp);box2d.b2PrismaticJoint.prototype.m_s1=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_s1",box2d.b2PrismaticJoint.prototype.m_s1);box2d.b2PrismaticJoint.prototype.m_s2=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_s2",box2d.b2PrismaticJoint.prototype.m_s2);box2d.b2PrismaticJoint.prototype.m_a1=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_a1",box2d.b2PrismaticJoint.prototype.m_a1);box2d.b2PrismaticJoint.prototype.m_a2=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_a2",box2d.b2PrismaticJoint.prototype.m_a2);box2d.b2PrismaticJoint.prototype.m_K=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_K",box2d.b2PrismaticJoint.prototype.m_K);box2d.b2PrismaticJoint.prototype.m_K3=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_K3",box2d.b2PrismaticJoint.prototype.m_K3);box2d.b2PrismaticJoint.prototype.m_K2=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_K2",box2d.b2PrismaticJoint.prototype.m_K2);box2d.b2PrismaticJoint.prototype.m_motorMass=0;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_motorMass",box2d.b2PrismaticJoint.prototype.m_motorMass);box2d.b2PrismaticJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_qA",box2d.b2PrismaticJoint.prototype.m_qA);box2d.b2PrismaticJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_qB",box2d.b2PrismaticJoint.prototype.m_qB);box2d.b2PrismaticJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_lalcA",box2d.b2PrismaticJoint.prototype.m_lalcA);box2d.b2PrismaticJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_lalcB",box2d.b2PrismaticJoint.prototype.m_lalcB);box2d.b2PrismaticJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_rA",box2d.b2PrismaticJoint.prototype.m_rA);box2d.b2PrismaticJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2PrismaticJoint.prototype,"m_rB",box2d.b2PrismaticJoint.prototype.m_rB);box2d.b2PrismaticJoint.prototype.InitVelocityConstraints=function(F){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var E=F.positions[this.m_indexA].c,D=F.velocities[this.m_indexA].v,B=F.velocities[this.m_indexA].w,C=F.positions[this.m_indexB].c,A=F.positions[this.m_indexB].a,z=F.velocities[this.m_indexB].v,y=F.velocities[this.m_indexB].w,u=this.m_qA.SetAngleRadians(F.positions[this.m_indexA].a),A=this.m_qB.SetAngleRadians(A);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var v=box2d.b2MulRV(u,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var r=box2d.b2MulRV(A,this.m_lalcB,this.m_rB),q=box2d.b2AddVV(box2d.b2SubVV(C,E,box2d.b2Vec2.s_t0),box2d.b2SubVV(r,v,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_d),E=this.m_invMassA,C=this.m_invMassB,A=this.m_invIA,j=this.m_invIB;box2d.b2MulRV(u,this.m_localXAxisA,this.m_axis);this.m_a1=box2d.b2CrossVV(box2d.b2AddVV(q,v,box2d.b2Vec2.s_t0),this.m_axis);this.m_a2=box2d.b2CrossVV(r,this.m_axis);this.m_motorMass=E+C+A*this.m_a1*this.m_a1+j*this.m_a2*this.m_a2;0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass);box2d.b2MulRV(u,this.m_localYAxisA,this.m_perp);this.m_s1=box2d.b2CrossVV(box2d.b2AddVV(q,v,box2d.b2Vec2.s_t0),this.m_perp);this.m_s2=box2d.b2CrossVV(r,this.m_perp);this.m_K.ex.x=E+C+A*this.m_s1*this.m_s1+j*this.m_s2*this.m_s2;this.m_K.ex.y=A*this.m_s1+j*this.m_s2;this.m_K.ex.z=A*this.m_s1*this.m_a1+j*this.m_s2*this.m_a2;this.m_K.ey.x=this.m_K.ex.y;this.m_K.ey.y=A+j;0==this.m_K.ey.y&&(this.m_K.ey.y=1);this.m_K.ey.z=A*this.m_a1+j*this.m_a2;this.m_K.ez.x=this.m_K.ex.z;this.m_K.ez.y=this.m_K.ey.z;this.m_K.ez.z=E+C+A*this.m_a1*this.m_a1+j*this.m_a2*this.m_a2;this.m_enableLimit?(u=box2d.b2DotVV(this.m_axis,q),box2d.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*box2d.b2_linearSlop?this.m_limitState=box2d.b2LimitState.e_equalLimits:u<=this.m_lowerTranslation?this.m_limitState!=box2d.b2LimitState.e_atLowerLimit&&(this.m_limitState=box2d.b2LimitState.e_atLowerLimit,this.m_impulse.z=0):u>=this.m_upperTranslation?this.m_limitState!=box2d.b2LimitState.e_atUpperLimit&&(this.m_limitState=box2d.b2LimitState.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0);!1==this.m_enableMotor&&(this.m_motorImpulse=0);F.step.warmStarting?(this.m_impulse.SelfMul(F.step.dtRatio),this.m_motorImpulse*=F.step.dtRatio,u=box2d.b2AddVV(box2d.b2MulSV(this.m_impulse.x,this.m_perp,box2d.b2Vec2.s_t0),box2d.b2MulSV(this.m_motorImpulse+this.m_impulse.z,this.m_axis,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_P),v=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,r=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2,D.SelfMulSub(E,u),B-=A*v,z.SelfMulAdd(C,u),y+=j*r):(this.m_impulse.SetZero(),this.m_motorImpulse=0);F.velocities[this.m_indexA].w=B;F.velocities[this.m_indexB].w=y};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"InitVelocityConstraints",box2d.b2PrismaticJoint.prototype.InitVelocityConstraints);box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_d=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints=function(F){var E=F.velocities[this.m_indexA].v,D=F.velocities[this.m_indexA].w,B=F.velocities[this.m_indexB].v,C=F.velocities[this.m_indexB].w,A=this.m_invMassA,z=this.m_invMassB,y=this.m_invIA,u=this.m_invIB;if(this.m_enableMotor&&this.m_limitState!=box2d.b2LimitState.e_equalLimits){var v=box2d.b2DotVV(this.m_axis,box2d.b2SubVV(B,E,box2d.b2Vec2.s_t0))+this.m_a2*C-this.m_a1*D,v=this.m_motorMass*(this.m_motorSpeed-v),r=this.m_motorImpulse,q=F.step.dt*this.m_maxMotorForce;this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+v,-q,q);v=this.m_motorImpulse-r;r=box2d.b2MulSV(v,this.m_axis,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P);q=v*this.m_a1;v*=this.m_a2;E.SelfMulSub(A,r);D-=y*q;B.SelfMulAdd(z,r);C+=u*v}var q=box2d.b2DotVV(this.m_perp,box2d.b2SubVV(B,E,box2d.b2Vec2.s_t0))+this.m_s2*C-this.m_s1*D,j=C-D;this.m_enableLimit&&this.m_limitState!=box2d.b2LimitState.e_inactiveLimit?(v=box2d.b2DotVV(this.m_axis,box2d.b2SubVV(B,E,box2d.b2Vec2.s_t0))+this.m_a2*C-this.m_a1*D,r=box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f1.Copy(this.m_impulse),v=this.m_K.Solve33(-q,-j,-v,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df3),this.m_impulse.SelfAdd(v),this.m_limitState==box2d.b2LimitState.e_atLowerLimit?this.m_impulse.z=box2d.b2Max(this.m_impulse.z,0):this.m_limitState==box2d.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=box2d.b2Min(this.m_impulse.z,0)),q=this.m_K.Solve22(-q-(this.m_impulse.z-r.z)*this.m_K.ez.x,-j-(this.m_impulse.z-r.z)*this.m_K.ez.y,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f2r),q.x+=r.x,q.y+=r.y,this.m_impulse.x=q.x,this.m_impulse.y=q.y,v.x=this.m_impulse.x-r.x,v.y=this.m_impulse.y-r.y,v.z=this.m_impulse.z-r.z,r=box2d.b2AddVV(box2d.b2MulSV(v.x,this.m_perp,box2d.b2Vec2.s_t0),box2d.b2MulSV(v.z,this.m_axis,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P),q=v.x*this.m_s1+v.y+v.z*this.m_a1,v=v.x*this.m_s2+v.y+v.z*this.m_a2):(v=this.m_K.Solve22(-q,-j,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df2),this.m_impulse.x+=v.x,this.m_impulse.y+=v.y,r=box2d.b2MulSV(v.x,this.m_perp,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P),q=v.x*this.m_s1+v.y,v=v.x*this.m_s2+v.y);E.SelfMulSub(A,r);D-=y*q;B.SelfMulAdd(z,r);F.velocities[this.m_indexA].w=D;F.velocities[this.m_indexB].w=C+u*v};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SolveVelocityConstraints",box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints);box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f2r=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f1=new box2d.b2Vec3;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df3=new box2d.b2Vec3;box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df2=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolvePositionConstraints=function(ad){var ac=ad.positions[this.m_indexA].c,ab=ad.positions[this.m_indexA].a,Z=ad.positions[this.m_indexB].c,aa=ad.positions[this.m_indexB].a,Y=this.m_qA.SetAngleRadians(ab),X=this.m_qB.SetAngleRadians(aa),W=this.m_invMassA,U=this.m_invMassB,V=this.m_invIA,T=this.m_invIB,S=box2d.b2MulRV(Y,this.m_lalcA,this.m_rA),R=box2d.b2MulRV(X,this.m_lalcB,this.m_rB),P=box2d.b2SubVV(box2d.b2AddVV(Z,R,box2d.b2Vec2.s_t0),box2d.b2AddVV(ac,S,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_d),N=box2d.b2MulRV(Y,this.m_localXAxisA,this.m_axis),J=box2d.b2CrossVV(box2d.b2AddVV(P,S,box2d.b2Vec2.s_t0),N),X=box2d.b2CrossVV(R,N),Y=box2d.b2MulRV(Y,this.m_localYAxisA,this.m_perp),L=box2d.b2CrossVV(box2d.b2AddVV(P,S,box2d.b2Vec2.s_t0),Y),H=box2d.b2CrossVV(R,Y),G=box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse,j=box2d.b2DotVV(Y,P),K=aa-ab-this.m_referenceAngle,S=box2d.b2Abs(j),R=box2d.b2Abs(K),z=!1,F=0;this.m_enableLimit&&(P=box2d.b2DotVV(N,P),box2d.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*box2d.b2_linearSlop?(F=box2d.b2Clamp(P,-box2d.b2_maxLinearCorrection,box2d.b2_maxLinearCorrection),S=box2d.b2Max(S,box2d.b2Abs(P)),z=!0):P<=this.m_lowerTranslation?(F=box2d.b2Clamp(P-this.m_lowerTranslation+box2d.b2_linearSlop,-box2d.b2_maxLinearCorrection,0),S=box2d.b2Max(S,this.m_lowerTranslation-P),z=!0):P>=this.m_upperTranslation&&(F=box2d.b2Clamp(P-this.m_upperTranslation-box2d.b2_linearSlop,0,box2d.b2_maxLinearCorrection),S=box2d.b2Max(S,P-this.m_upperTranslation),z=!0));if(z){var P=V*L+T*H,M=V*L*J+T*H*X,z=V+T;0==z&&(z=1);var Q=V*J+T*X,I=W+U+V*J*J+T*X*X,O=this.m_K3;O.ex.SetXYZ(W+U+V*L*L+T*H*H,P,M);O.ey.SetXYZ(P,z,Q);O.ez.SetXYZ(M,Q,I);G=O.Solve33(-j,-K,-F,G)}else{P=V*L+T*H,z=V+T,0==z&&(z=1),F=this.m_K2,F.ex.SetXY(W+U+V*L*L+T*H*H,P),F.ey.SetXY(P,z),j=F.Solve(-j,-K,box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse1),G.x=j.x,G.y=j.y,G.z=0}N=box2d.b2AddVV(box2d.b2MulSV(G.x,Y,box2d.b2Vec2.s_t0),box2d.b2MulSV(G.z,N,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_P);J=G.x*L+G.y+G.z*J;X=G.x*H+G.y+G.z*X;ac.SelfMulSub(W,N);ab-=V*J;Z.SelfMulAdd(U,N);ad.positions[this.m_indexA].a=ab;ad.positions[this.m_indexB].a=aa+T*X;return S<=box2d.b2_linearSlop&&R<=box2d.b2_angularSlop};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SolvePositionConstraints",box2d.b2PrismaticJoint.prototype.SolvePositionConstraints);box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_d=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec3;box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse1=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetAnchorA",box2d.b2PrismaticJoint.prototype.GetAnchorA);box2d.b2PrismaticJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetAnchorB",box2d.b2PrismaticJoint.prototype.GetAnchorB);box2d.b2PrismaticJoint.prototype.GetReactionForce=function(e,d){return d.SetXY(e*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),e*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetReactionForce",box2d.b2PrismaticJoint.prototype.GetReactionForce);box2d.b2PrismaticJoint.prototype.GetReactionTorque=function(b){return b*this.m_impulse.y};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetReactionTorque",box2d.b2PrismaticJoint.prototype.GetReactionTorque);box2d.b2PrismaticJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLocalAnchorA",box2d.b2PrismaticJoint.prototype.GetLocalAnchorA);box2d.b2PrismaticJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLocalAnchorB",box2d.b2PrismaticJoint.prototype.GetLocalAnchorB);box2d.b2PrismaticJoint.prototype.GetLocalAxisA=function(b){return b.Copy(this.m_localXAxisA)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLocalAxisA",box2d.b2PrismaticJoint.prototype.GetLocalAxisA);box2d.b2PrismaticJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetReferenceAngle",box2d.b2PrismaticJoint.prototype.GetReferenceAngle);box2d.b2PrismaticJoint.prototype.GetJointTranslation=function(){var e=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pA),d=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pB),e=box2d.b2SubVV(d,e,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_d),d=this.m_bodyA.GetWorldVector(this.m_localXAxisA,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_axis);return box2d.b2DotVV(e,d)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetJointTranslation",box2d.b2PrismaticJoint.prototype.GetJointTranslation);box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pA=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pB=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_d=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_axis=new box2d.b2Vec2;box2d.b2PrismaticJoint.prototype.GetJointSpeed=function(){var k=this.m_bodyA,j=this.m_bodyB;box2d.b2SubVV(this.m_localAnchorA,k.m_sweep.localCenter,this.m_lalcA);var v=box2d.b2MulRV(k.m_xf.q,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,j.m_sweep.localCenter,this.m_lalcB);var r=box2d.b2MulRV(j.m_xf.q,this.m_lalcB,this.m_rB),u=box2d.b2AddVV(k.m_sweep.c,v,box2d.b2Vec2.s_t0),q=box2d.b2AddVV(j.m_sweep.c,r,box2d.b2Vec2.s_t1),u=box2d.b2SubVV(q,u,box2d.b2Vec2.s_t2),q=k.GetWorldVector(this.m_localXAxisA,this.m_axis),n=k.m_linearVelocity,m=j.m_linearVelocity,k=k.m_angularVelocity,j=j.m_angularVelocity;return box2d.b2DotVV(u,box2d.b2CrossSV(k,q,box2d.b2Vec2.s_t0))+box2d.b2DotVV(q,box2d.b2SubVV(box2d.b2AddVCrossSV(m,j,r,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(n,k,v,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0))};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetJointSpeed",box2d.b2PrismaticJoint.prototype.GetJointSpeed);box2d.b2PrismaticJoint.prototype.IsLimitEnabled=function(){return this.m_enableLimit};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"IsLimitEnabled",box2d.b2PrismaticJoint.prototype.IsLimitEnabled);box2d.b2PrismaticJoint.prototype.EnableLimit=function(b){b!=this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=b,this.m_impulse.z=0)};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"EnableLimit",box2d.b2PrismaticJoint.prototype.EnableLimit);box2d.b2PrismaticJoint.prototype.GetLowerLimit=function(){return this.m_lowerTranslation};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetLowerLimit",box2d.b2PrismaticJoint.prototype.GetLowerLimit);box2d.b2PrismaticJoint.prototype.GetUpperLimit=function(){return this.m_upperTranslation};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetUpperLimit",box2d.b2PrismaticJoint.prototype.GetUpperLimit);box2d.b2PrismaticJoint.prototype.SetLimits=function(e,d){if(e!=this.m_lowerTranslation||d!=this.m_upperTranslation){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=e,this.m_upperTranslation=d,this.m_impulse.z=0}};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SetLimits",box2d.b2PrismaticJoint.prototype.SetLimits);box2d.b2PrismaticJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"IsMotorEnabled",box2d.b2PrismaticJoint.prototype.IsMotorEnabled);box2d.b2PrismaticJoint.prototype.EnableMotor=function(b){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_enableMotor=b};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"EnableMotor",box2d.b2PrismaticJoint.prototype.EnableMotor);box2d.b2PrismaticJoint.prototype.SetMotorSpeed=function(b){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_motorSpeed=b};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SetMotorSpeed",box2d.b2PrismaticJoint.prototype.SetMotorSpeed);box2d.b2PrismaticJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetMotorSpeed",box2d.b2PrismaticJoint.prototype.GetMotorSpeed);box2d.b2PrismaticJoint.prototype.SetMaxMotorForce=function(b){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_maxMotorForce=b};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"SetMaxMotorForce",box2d.b2PrismaticJoint.prototype.SetMaxMotorForce);box2d.b2PrismaticJoint.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetMaxMotorForce",box2d.b2PrismaticJoint.prototype.GetMaxMotorForce);box2d.b2PrismaticJoint.prototype.GetMotorForce=function(b){return b*this.m_motorImpulse};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"GetMotorForce",box2d.b2PrismaticJoint.prototype.GetMotorForce);box2d.b2PrismaticJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2PrismaticJointDef*/ var jd = new box2d.b2PrismaticJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.localAxisA.SetXY(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y);box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle);box2d.b2Log("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false");box2d.b2Log("  jd.lowerTranslation = %.15f;\n",this.m_lowerTranslation);box2d.b2Log("  jd.upperTranslation = %.15f;\n",this.m_upperTranslation);box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false");box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed);box2d.b2Log("  jd.maxMotorForce = %.15f;\n",this.m_maxMotorForce);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2PrismaticJoint.prototype,"Dump",box2d.b2PrismaticJoint.prototype.Dump);box2d.b2GearJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_gearJoint)};goog.inherits(box2d.b2GearJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2GearJointDef",box2d.b2GearJointDef);box2d.b2GearJointDef.prototype.joint1=null;goog.exportProperty(box2d.b2GearJointDef.prototype,"joint1",box2d.b2GearJointDef.prototype.joint1);box2d.b2GearJointDef.prototype.joint2=null;goog.exportProperty(box2d.b2GearJointDef.prototype,"joint2",box2d.b2GearJointDef.prototype.joint2);box2d.b2GearJointDef.prototype.ratio=1;goog.exportProperty(box2d.b2GearJointDef.prototype,"ratio",box2d.b2GearJointDef.prototype.ratio);box2d.b2GearJoint=function(j){box2d.b2Joint.call(this,j);this.m_joint1=j.joint1;this.m_joint2=j.joint2;this.m_localAnchorA=new box2d.b2Vec2;this.m_localAnchorB=new box2d.b2Vec2;this.m_localAnchorC=new box2d.b2Vec2;this.m_localAnchorD=new box2d.b2Vec2;this.m_localAxisC=new box2d.b2Vec2;this.m_localAxisD=new box2d.b2Vec2;this.m_lcA=new box2d.b2Vec2;this.m_lcB=new box2d.b2Vec2;this.m_lcC=new box2d.b2Vec2;this.m_lcD=new box2d.b2Vec2;this.m_JvAC=new box2d.b2Vec2;this.m_JvBD=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_qC=new box2d.b2Rot;this.m_qD=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_lalcC=new box2d.b2Vec2;this.m_lalcD=new box2d.b2Vec2;this.m_typeA=this.m_joint1.GetType();this.m_typeB=this.m_joint2.GetType();box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_typeA==box2d.b2JointType.e_revoluteJoint||this.m_typeA==box2d.b2JointType.e_prismaticJoint);box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_typeB==box2d.b2JointType.e_revoluteJoint||this.m_typeB==box2d.b2JointType.e_prismaticJoint);var g,q;this.m_bodyC=this.m_joint1.GetBodyA();this.m_bodyA=this.m_joint1.GetBodyB();g=this.m_bodyA.m_xf;var m=this.m_bodyA.m_sweep.a;q=this.m_bodyC.m_xf;var n=this.m_bodyC.m_sweep.a;this.m_typeA==box2d.b2JointType.e_revoluteJoint?(q=j.joint1,this.m_localAnchorC.Copy(q.m_localAnchorA),this.m_localAnchorA.Copy(q.m_localAnchorB),this.m_referenceAngleA=q.m_referenceAngle,this.m_localAxisC.SetZero(),g=m-n-this.m_referenceAngleA):(n=j.joint1,this.m_localAnchorC.Copy(n.m_localAnchorA),this.m_localAnchorA.Copy(n.m_localAnchorB),this.m_referenceAngleA=n.m_referenceAngle,this.m_localAxisC.Copy(n.m_localXAxisA),m=this.m_localAnchorC,g=box2d.b2MulTRV(q.q,box2d.b2AddVV(box2d.b2MulRV(g.q,this.m_localAnchorA,box2d.b2Vec2.s_t0),box2d.b2SubVV(g.p,q.p,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),g=box2d.b2DotVV(box2d.b2SubVV(g,m,box2d.b2Vec2.s_t0),this.m_localAxisC));this.m_bodyD=this.m_joint2.GetBodyA();this.m_bodyB=this.m_joint2.GetBodyB();q=this.m_bodyB.m_xf;var n=this.m_bodyB.m_sweep.a,m=this.m_bodyD.m_xf,k=this.m_bodyD.m_sweep.a;this.m_typeB==box2d.b2JointType.e_revoluteJoint?(q=j.joint2,this.m_localAnchorD.Copy(q.m_localAnchorA),this.m_localAnchorB.Copy(q.m_localAnchorB),this.m_referenceAngleB=q.m_referenceAngle,this.m_localAxisD.SetZero(),q=n-k-this.m_referenceAngleB):(n=j.joint2,this.m_localAnchorD.Copy(n.m_localAnchorA),this.m_localAnchorB.Copy(n.m_localAnchorB),this.m_referenceAngleB=n.m_referenceAngle,this.m_localAxisD.Copy(n.m_localXAxisA),n=this.m_localAnchorD,q=box2d.b2MulTRV(m.q,box2d.b2AddVV(box2d.b2MulRV(q.q,this.m_localAnchorB,box2d.b2Vec2.s_t0),box2d.b2SubVV(q.p,m.p,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),q=box2d.b2DotVV(box2d.b2SubVV(q,n,box2d.b2Vec2.s_t0),this.m_localAxisD));this.m_ratio=j.ratio;this.m_constant=g+this.m_ratio*q;this.m_impulse=0};goog.inherits(box2d.b2GearJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2GearJoint",box2d.b2GearJoint);box2d.b2GearJoint.prototype.m_joint1=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_joint1",box2d.b2GearJoint.prototype.m_joint1);box2d.b2GearJoint.prototype.m_joint2=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_joint2",box2d.b2GearJoint.prototype.m_joint2);box2d.b2GearJoint.prototype.m_typeA=box2d.b2JointType.e_unknownJoint;goog.exportProperty(box2d.b2GearJoint.prototype,"m_typeA",box2d.b2GearJoint.prototype.m_typeA);box2d.b2GearJoint.prototype.m_typeB=box2d.b2JointType.e_unknownJoint;goog.exportProperty(box2d.b2GearJoint.prototype,"m_typeB",box2d.b2GearJoint.prototype.m_typeB);box2d.b2GearJoint.prototype.m_bodyC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_bodyC",box2d.b2GearJoint.prototype.m_bodyC);box2d.b2GearJoint.prototype.m_bodyD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_bodyD",box2d.b2GearJoint.prototype.m_bodyD);box2d.b2GearJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorA",box2d.b2GearJoint.prototype.m_localAnchorA);box2d.b2GearJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorB",box2d.b2GearJoint.prototype.m_localAnchorB);box2d.b2GearJoint.prototype.m_localAnchorC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorC",box2d.b2GearJoint.prototype.m_localAnchorC);box2d.b2GearJoint.prototype.m_localAnchorD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAnchorD",box2d.b2GearJoint.prototype.m_localAnchorD);box2d.b2GearJoint.prototype.m_localAxisC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAxisC",box2d.b2GearJoint.prototype.m_localAxisC);box2d.b2GearJoint.prototype.m_localAxisD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_localAxisD",box2d.b2GearJoint.prototype.m_localAxisD);box2d.b2GearJoint.prototype.m_referenceAngleA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_referenceAngleA",box2d.b2GearJoint.prototype.m_referenceAngleA);box2d.b2GearJoint.prototype.m_referenceAngleB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_referenceAngleB",box2d.b2GearJoint.prototype.m_referenceAngleB);box2d.b2GearJoint.prototype.m_constant=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_constant",box2d.b2GearJoint.prototype.m_constant);box2d.b2GearJoint.prototype.m_ratio=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_ratio",box2d.b2GearJoint.prototype.m_ratio);box2d.b2GearJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_impulse",box2d.b2GearJoint.prototype.m_impulse);box2d.b2GearJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexA",box2d.b2GearJoint.prototype.m_indexA);box2d.b2GearJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexB",box2d.b2GearJoint.prototype.m_indexB);box2d.b2GearJoint.prototype.m_indexC=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexC",box2d.b2GearJoint.prototype.m_indexC);box2d.b2GearJoint.prototype.m_indexD=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_indexD",box2d.b2GearJoint.prototype.m_indexD);box2d.b2GearJoint.prototype.m_lcA=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcA",box2d.b2GearJoint.prototype.m_lcA);box2d.b2GearJoint.prototype.m_lcB=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcB",box2d.b2GearJoint.prototype.m_lcB);box2d.b2GearJoint.prototype.m_lcC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcC",box2d.b2GearJoint.prototype.m_lcC);box2d.b2GearJoint.prototype.m_lcD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lcD",box2d.b2GearJoint.prototype.m_lcD);box2d.b2GearJoint.prototype.m_mA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mA",box2d.b2GearJoint.prototype.m_mA);box2d.b2GearJoint.prototype.m_mB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mB",box2d.b2GearJoint.prototype.m_mB);box2d.b2GearJoint.prototype.m_mC=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mC",box2d.b2GearJoint.prototype.m_mC);box2d.b2GearJoint.prototype.m_mD=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mD",box2d.b2GearJoint.prototype.m_mD);box2d.b2GearJoint.prototype.m_iA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_iA",box2d.b2GearJoint.prototype.m_iA);box2d.b2GearJoint.prototype.m_iB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_iB",box2d.b2GearJoint.prototype.m_iB);box2d.b2GearJoint.prototype.m_iC=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_iC",box2d.b2GearJoint.prototype.m_iC);box2d.b2GearJoint.prototype.m_iD=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_iD",box2d.b2GearJoint.prototype.m_iD);box2d.b2GearJoint.prototype.m_JvAC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JvAC",box2d.b2GearJoint.prototype.m_JvAC);box2d.b2GearJoint.prototype.m_JvBD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JvBD",box2d.b2GearJoint.prototype.m_JvBD);box2d.b2GearJoint.prototype.m_JwA=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwA",box2d.b2GearJoint.prototype.m_JwA);box2d.b2GearJoint.prototype.m_JwB=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwB",box2d.b2GearJoint.prototype.m_JwB);box2d.b2GearJoint.prototype.m_JwC=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwC",box2d.b2GearJoint.prototype.m_JwC);box2d.b2GearJoint.prototype.m_JwD=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_JwD",box2d.b2GearJoint.prototype.m_JwD);box2d.b2GearJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2GearJoint.prototype,"m_mass",box2d.b2GearJoint.prototype.m_mass);box2d.b2GearJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_qA",box2d.b2GearJoint.prototype.m_qA);box2d.b2GearJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_qB",box2d.b2GearJoint.prototype.m_qB);box2d.b2GearJoint.prototype.m_qC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_qC",box2d.b2GearJoint.prototype.m_qC);box2d.b2GearJoint.prototype.m_qD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_qD",box2d.b2GearJoint.prototype.m_qD);box2d.b2GearJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcA",box2d.b2GearJoint.prototype.m_lalcA);box2d.b2GearJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcB",box2d.b2GearJoint.prototype.m_lalcB);box2d.b2GearJoint.prototype.m_lalcC=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcC",box2d.b2GearJoint.prototype.m_lalcC);box2d.b2GearJoint.prototype.m_lalcD=null;goog.exportProperty(box2d.b2GearJoint.prototype,"m_lalcD",box2d.b2GearJoint.prototype.m_lalcD);box2d.b2GearJoint.prototype.InitVelocityConstraints=function(H){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_indexC=this.m_bodyC.m_islandIndex;this.m_indexD=this.m_bodyD.m_islandIndex;this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter);this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter);this.m_mA=this.m_bodyA.m_invMass;this.m_mB=this.m_bodyB.m_invMass;this.m_mC=this.m_bodyC.m_invMass;this.m_mD=this.m_bodyD.m_invMass;this.m_iA=this.m_bodyA.m_invI;this.m_iB=this.m_bodyB.m_invI;this.m_iC=this.m_bodyC.m_invI;this.m_iD=this.m_bodyD.m_invI;var G=H.velocities[this.m_indexA].v,F=H.velocities[this.m_indexA].w,D=H.positions[this.m_indexB].a,E=H.velocities[this.m_indexB].v,C=H.velocities[this.m_indexB].w,B=H.positions[this.m_indexC].a,A=H.velocities[this.m_indexC].v,y=H.velocities[this.m_indexC].w,z=H.positions[this.m_indexD].a,v=H.velocities[this.m_indexD].v,u=H.velocities[this.m_indexD].w,r=this.m_qA.SetAngleRadians(H.positions[this.m_indexA].a),D=this.m_qB.SetAngleRadians(D),j=this.m_qC.SetAngleRadians(B),B=this.m_qD.SetAngleRadians(z);this.m_mass=0;this.m_typeA==box2d.b2JointType.e_revoluteJoint?(this.m_JvAC.SetZero(),this.m_JwC=this.m_JwA=1,this.m_mass+=this.m_iA+this.m_iC):(z=box2d.b2MulRV(j,this.m_localAxisC,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u),box2d.b2SubVV(this.m_localAnchorC,this.m_lcC,this.m_lalcC),j=box2d.b2MulRV(j,this.m_lalcC,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rC),box2d.b2SubVV(this.m_localAnchorA,this.m_lcA,this.m_lalcA),r=box2d.b2MulRV(r,this.m_lalcA,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rA),this.m_JvAC.Copy(z),this.m_JwC=box2d.b2CrossVV(j,z),this.m_JwA=box2d.b2CrossVV(r,z),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA);this.m_typeB==box2d.b2JointType.e_revoluteJoint?(this.m_JvBD.SetZero(),this.m_JwD=this.m_JwB=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD)):(z=box2d.b2MulRV(B,this.m_localAxisD,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u),box2d.b2SubVV(this.m_localAnchorD,this.m_lcD,this.m_lalcD),r=box2d.b2MulRV(B,this.m_lalcD,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rD),box2d.b2SubVV(this.m_localAnchorB,this.m_lcB,this.m_lalcB),D=box2d.b2MulRV(D,this.m_lalcB,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rB),box2d.b2MulSV(this.m_ratio,z,this.m_JvBD),this.m_JwD=this.m_ratio*box2d.b2CrossVV(r,z),this.m_JwB=this.m_ratio*box2d.b2CrossVV(D,z),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB);this.m_mass=0<this.m_mass?1/this.m_mass:0;H.step.warmStarting?(G.SelfMulAdd(this.m_mA*this.m_impulse,this.m_JvAC),F+=this.m_iA*this.m_impulse*this.m_JwA,E.SelfMulAdd(this.m_mB*this.m_impulse,this.m_JvBD),C+=this.m_iB*this.m_impulse*this.m_JwB,A.SelfMulSub(this.m_mC*this.m_impulse,this.m_JvAC),y-=this.m_iC*this.m_impulse*this.m_JwC,v.SelfMulSub(this.m_mD*this.m_impulse,this.m_JvBD),u-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0;H.velocities[this.m_indexA].w=F;H.velocities[this.m_indexB].w=C;H.velocities[this.m_indexC].w=y;H.velocities[this.m_indexD].w=u};box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u=new box2d.b2Vec2;box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rA=new box2d.b2Vec2;box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rB=new box2d.b2Vec2;box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rC=new box2d.b2Vec2;box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rD=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolveVelocityConstraints=function(A){var z=A.velocities[this.m_indexA].v,y=A.velocities[this.m_indexA].w,u=A.velocities[this.m_indexB].v,v=A.velocities[this.m_indexB].w,r=A.velocities[this.m_indexC].v,q=A.velocities[this.m_indexC].w,n=A.velocities[this.m_indexD].v,j=A.velocities[this.m_indexD].w,m=box2d.b2DotVV(this.m_JvAC,box2d.b2SubVV(z,r,box2d.b2Vec2.s_t0))+box2d.b2DotVV(this.m_JvBD,box2d.b2SubVV(u,n,box2d.b2Vec2.s_t0)),m=m+(this.m_JwA*y-this.m_JwC*q+(this.m_JwB*v-this.m_JwD*j)),m=-this.m_mass*m;this.m_impulse+=m;z.SelfMulAdd(this.m_mA*m,this.m_JvAC);y+=this.m_iA*m*this.m_JwA;u.SelfMulAdd(this.m_mB*m,this.m_JvBD);v+=this.m_iB*m*this.m_JwB;r.SelfMulSub(this.m_mC*m,this.m_JvAC);q-=this.m_iC*m*this.m_JwC;n.SelfMulSub(this.m_mD*m,this.m_JvBD);j-=this.m_iD*m*this.m_JwD;A.velocities[this.m_indexA].w=y;A.velocities[this.m_indexB].w=v;A.velocities[this.m_indexC].w=q;A.velocities[this.m_indexD].w=j};box2d.b2GearJoint.prototype.SolvePositionConstraints=function(R){var Q=R.positions[this.m_indexA].c,P=R.positions[this.m_indexA].a,N=R.positions[this.m_indexB].c,O=R.positions[this.m_indexB].a,M=R.positions[this.m_indexC].c,L=R.positions[this.m_indexC].a,K=R.positions[this.m_indexD].c,I=R.positions[this.m_indexD].a,J=this.m_qA.SetAngleRadians(P),H=this.m_qB.SetAngleRadians(O),G=this.m_qC.SetAngleRadians(L),F=this.m_qD.SetAngleRadians(I),E=this.m_JvAC,D=this.m_JvBD,B,C,A=0;if(this.m_typeA==box2d.b2JointType.e_revoluteJoint){E.SetZero(),J=B=1,A+=this.m_iA+this.m_iC,G=P-L-this.m_referenceAngleA}else{C=box2d.b2MulRV(G,this.m_localAxisC,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u);B=box2d.b2MulRV(G,this.m_lalcC,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rC);var z=box2d.b2MulRV(J,this.m_lalcA,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rA);E.Copy(C);J=box2d.b2CrossVV(B,C);B=box2d.b2CrossVV(z,C);A+=this.m_mC+this.m_mA+this.m_iC*J*J+this.m_iA*B*B;C=this.m_lalcC;G=box2d.b2MulTRV(G,box2d.b2AddVV(z,box2d.b2SubVV(Q,M,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0);G=box2d.b2DotVV(box2d.b2SubVV(G,C,box2d.b2Vec2.s_t0),this.m_localAxisC)}if(this.m_typeB==box2d.b2JointType.e_revoluteJoint){D.SetZero(),H=C=this.m_ratio,A+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),F=O-I-this.m_referenceAngleB}else{C=box2d.b2MulRV(F,this.m_localAxisD,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u);var j=box2d.b2MulRV(F,this.m_lalcD,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rD),z=box2d.b2MulRV(H,this.m_lalcB,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rB);box2d.b2MulSV(this.m_ratio,C,D);H=this.m_ratio*box2d.b2CrossVV(j,C);C=this.m_ratio*box2d.b2CrossVV(z,C);A+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*H*H+this.m_iB*C*C;j=this.m_lalcD;F=box2d.b2MulTRV(F,box2d.b2AddVV(z,box2d.b2SubVV(N,K,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0);F=box2d.b2DotVV(box2d.b2SubVV(F,j,box2d.b2Vec2.s_t0),this.m_localAxisD)}F=G+this.m_ratio*F-this.m_constant;G=0;0<A&&(G=-F/A);Q.SelfMulAdd(this.m_mA*G,E);P+=this.m_iA*G*B;N.SelfMulAdd(this.m_mB*G,D);O+=this.m_iB*G*C;M.SelfMulSub(this.m_mC*G,E);L-=this.m_iC*G*J;K.SelfMulSub(this.m_mD*G,D);I-=this.m_iD*G*H;R.positions[this.m_indexA].a=P;R.positions[this.m_indexB].a=O;R.positions[this.m_indexC].a=L;R.positions[this.m_indexD].a=I;return 0<box2d.b2_linearSlop};goog.exportProperty(box2d.b2GearJoint.prototype,"SolvePositionConstraints",box2d.b2GearJoint.prototype.SolvePositionConstraints);box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rA=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rB=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rC=new box2d.b2Vec2;box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rD=new box2d.b2Vec2;box2d.b2GearJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2GearJoint.prototype,"GetAnchorA",box2d.b2GearJoint.prototype.GetAnchorA);box2d.b2GearJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2GearJoint.prototype,"GetAnchorB",box2d.b2GearJoint.prototype.GetAnchorB);box2d.b2GearJoint.prototype.GetReactionForce=function(e,d){return box2d.b2MulSV(e*this.m_impulse,this.m_JvAC,d)};goog.exportProperty(box2d.b2GearJoint.prototype,"GetReactionForce",box2d.b2GearJoint.prototype.GetReactionForce);box2d.b2GearJoint.prototype.GetReactionTorque=function(b){return b*this.m_impulse*this.m_JwA};goog.exportProperty(box2d.b2GearJoint.prototype,"GetReactionTorque",box2d.b2GearJoint.prototype.GetReactionTorque);box2d.b2GearJoint.prototype.GetJoint1=function(){return this.m_joint1};goog.exportProperty(box2d.b2GearJoint.prototype,"GetJoint1",box2d.b2GearJoint.prototype.GetJoint1);box2d.b2GearJoint.prototype.GetJoint2=function(){return this.m_joint2};goog.exportProperty(box2d.b2GearJoint.prototype,"GetJoint2",box2d.b2GearJoint.prototype.GetJoint2);box2d.b2GearJoint.prototype.GetRatio=function(){return this.m_ratio};goog.exportProperty(box2d.b2GearJoint.prototype,"GetRatio",box2d.b2GearJoint.prototype.GetRatio);box2d.b2GearJoint.prototype.SetRatio=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(b));this.m_ratio=b};goog.exportProperty(box2d.b2GearJoint.prototype,"SetRatio",box2d.b2GearJoint.prototype.SetRatio);box2d.b2GearJoint.prototype.Dump=function(){if(box2d.DEBUG){var f=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex,j=this.m_joint1.m_index,g=this.m_joint2.m_index;box2d.b2Log("  /*box2d.b2GearJointDef*/ var jd = new box2d.b2GearJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",f);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.joint1 = joints[%d];\n",j);box2d.b2Log("  jd.joint2 = joints[%d];\n",g);box2d.b2Log("  jd.ratio = %.15f;\n",this.m_ratio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2GearJoint.prototype,"Dump",box2d.b2GearJoint.prototype.Dump);box2d.b2DistanceProxy=function(){this.m_buffer=box2d.b2Vec2.MakeArray(2)};goog.exportSymbol("box2d.b2DistanceProxy",box2d.b2DistanceProxy);box2d.b2DistanceProxy.prototype.m_buffer=null;goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_buffer",box2d.b2DistanceProxy.prototype.m_buffer);box2d.b2DistanceProxy.prototype.m_vertices=null;goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_vertices",box2d.b2DistanceProxy.prototype.m_vertices);box2d.b2DistanceProxy.prototype.m_count=0;goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_count",box2d.b2DistanceProxy.prototype.m_count);box2d.b2DistanceProxy.prototype.m_radius=0;goog.exportProperty(box2d.b2DistanceProxy.prototype,"m_radius",box2d.b2DistanceProxy.prototype.m_radius);box2d.b2DistanceProxy.prototype.Reset=function(){this.m_vertices=null;this.m_radius=this.m_count=0;return this};goog.exportProperty(box2d.b2DistanceProxy.prototype,"Reset",box2d.b2DistanceProxy.prototype.Reset);box2d.b2DistanceProxy.prototype.SetShape=function(e,d){e.SetupDistanceProxy(this,d)};goog.exportProperty(box2d.b2DistanceProxy.prototype,"SetShape",box2d.b2DistanceProxy.prototype.SetShape);box2d.b2DistanceProxy.prototype.GetSupport=function(g){for(var f=0,m=box2d.b2DotVV(this.m_vertices[0],g),j=1;j<this.m_count;++j){var k=box2d.b2DotVV(this.m_vertices[j],g);k>m&&(f=j,m=k)}return f};goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetSupport",box2d.b2DistanceProxy.prototype.GetSupport);box2d.b2DistanceProxy.prototype.GetSupportVertex=function(j,g){for(var q=0,m=box2d.b2DotVV(this.m_vertices[0],j),n=1;n<this.m_count;++n){var k=box2d.b2DotVV(this.m_vertices[n],j);k>m&&(q=n,m=k)}return g.Copy(this.m_vertices[q])};goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetSupportVertex",box2d.b2DistanceProxy.prototype.GetSupportVertex);box2d.b2DistanceProxy.prototype.GetVertexCount=function(){return this.m_count};goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetVertexCount",box2d.b2DistanceProxy.prototype.GetVertexCount);box2d.b2DistanceProxy.prototype.GetVertex=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=b&&b<this.m_count);return this.m_vertices[b]};goog.exportProperty(box2d.b2DistanceProxy.prototype,"GetVertex",box2d.b2DistanceProxy.prototype.GetVertex);box2d.b2SimplexCache=function(){this.indexA=box2d.b2MakeNumberArray(3);this.indexB=box2d.b2MakeNumberArray(3)};goog.exportSymbol("box2d.b2SimplexCache",box2d.b2SimplexCache);box2d.b2SimplexCache.prototype.metric=0;goog.exportProperty(box2d.b2SimplexCache.prototype,"metric",box2d.b2SimplexCache.prototype.metric);box2d.b2SimplexCache.prototype.count=0;goog.exportProperty(box2d.b2SimplexCache.prototype,"count",box2d.b2SimplexCache.prototype.count);box2d.b2SimplexCache.prototype.indexA=null;goog.exportProperty(box2d.b2SimplexCache.prototype,"indexA",box2d.b2SimplexCache.prototype.indexA);box2d.b2SimplexCache.prototype.indexB=null;goog.exportProperty(box2d.b2SimplexCache.prototype,"indexB",box2d.b2SimplexCache.prototype.indexB);box2d.b2SimplexCache.prototype.Reset=function(){this.count=this.metric=0;return this};goog.exportProperty(box2d.b2SimplexCache.prototype,"Reset",box2d.b2SimplexCache.prototype.Reset);box2d.b2DistanceInput=function(){this.proxyA=new box2d.b2DistanceProxy;this.proxyB=new box2d.b2DistanceProxy;this.transformA=new box2d.b2Transform;this.transformB=new box2d.b2Transform};goog.exportSymbol("box2d.b2DistanceInput",box2d.b2DistanceInput);box2d.b2DistanceInput.prototype.proxyA=null;goog.exportProperty(box2d.b2DistanceInput.prototype,"proxyA",box2d.b2DistanceInput.prototype.proxyA);box2d.b2DistanceInput.prototype.proxyB=null;goog.exportProperty(box2d.b2DistanceInput.prototype,"proxyB",box2d.b2DistanceInput.prototype.proxyB);box2d.b2DistanceInput.prototype.transformA=null;goog.exportProperty(box2d.b2DistanceInput.prototype,"transformA",box2d.b2DistanceInput.prototype.transformA);box2d.b2DistanceInput.prototype.transformB=null;goog.exportProperty(box2d.b2DistanceInput.prototype,"transformB",box2d.b2DistanceInput.prototype.transformB);box2d.b2DistanceInput.prototype.useRadii=!1;goog.exportProperty(box2d.b2DistanceInput.prototype,"useRadii",box2d.b2DistanceInput.prototype.useRadii);box2d.b2DistanceInput.prototype.Reset=function(){this.proxyA.Reset();this.proxyB.Reset();this.transformA.SetIdentity();this.transformB.SetIdentity();this.useRadii=!1;return this};goog.exportProperty(box2d.b2DistanceInput.prototype,"Reset",box2d.b2DistanceInput.prototype.Reset);box2d.b2DistanceOutput=function(){this.pointA=new box2d.b2Vec2;this.pointB=new box2d.b2Vec2};goog.exportSymbol("box2d.b2DistanceOutput",box2d.b2DistanceOutput);box2d.b2DistanceOutput.prototype.pointA=null;goog.exportProperty(box2d.b2DistanceOutput.prototype,"pointA",box2d.b2DistanceOutput.prototype.pointA);box2d.b2DistanceOutput.prototype.pointB=null;goog.exportProperty(box2d.b2DistanceOutput.prototype,"pointB",box2d.b2DistanceOutput.prototype.pointB);box2d.b2DistanceOutput.prototype.distance=0;goog.exportProperty(box2d.b2DistanceOutput.prototype,"distance",box2d.b2DistanceOutput.prototype.distance);box2d.b2DistanceOutput.prototype.iterations=0;goog.exportProperty(box2d.b2DistanceOutput.prototype,"iterations",box2d.b2DistanceOutput.prototype.iterations);box2d.b2DistanceOutput.prototype.Reset=function(){this.pointA.SetZero();this.pointB.SetZero();this.iterations=this.distance=0;return this};goog.exportProperty(box2d.b2DistanceOutput.prototype,"Reset",box2d.b2DistanceOutput.prototype.Reset);box2d.b2_gjkCalls=0;goog.exportSymbol("box2d.b2_gjkCalls",box2d.b2_gjkCalls);box2d.b2_gjkIters=0;goog.exportSymbol("box2d.b2_gjkIters",box2d.b2_gjkIters);box2d.b2_gjkMaxIters=0;goog.exportSymbol("box2d.b2_gjkMaxIters",box2d.b2_gjkMaxIters);box2d.b2SimplexVertex=function(){this.wA=new box2d.b2Vec2;this.wB=new box2d.b2Vec2;this.w=new box2d.b2Vec2};goog.exportSymbol("box2d.b2SimplexVertex",box2d.b2SimplexVertex);box2d.b2SimplexVertex.prototype.wA=null;goog.exportProperty(box2d.b2SimplexVertex.prototype,"wA",box2d.b2SimplexVertex.prototype.wA);box2d.b2SimplexVertex.prototype.wB=null;goog.exportProperty(box2d.b2SimplexVertex.prototype,"wB",box2d.b2SimplexVertex.prototype.wB);box2d.b2SimplexVertex.prototype.w=null;goog.exportProperty(box2d.b2SimplexVertex.prototype,"w",box2d.b2SimplexVertex.prototype.w);box2d.b2SimplexVertex.prototype.a=0;goog.exportProperty(box2d.b2SimplexVertex.prototype,"a",box2d.b2SimplexVertex.prototype.a);box2d.b2SimplexVertex.prototype.indexA=0;goog.exportProperty(box2d.b2SimplexVertex.prototype,"indexA",box2d.b2SimplexVertex.prototype.indexA);box2d.b2SimplexVertex.prototype.indexB=0;goog.exportProperty(box2d.b2SimplexVertex.prototype,"indexB",box2d.b2SimplexVertex.prototype.indexB);box2d.b2SimplexVertex.prototype.Copy=function(b){this.wA.Copy(b.wA);this.wB.Copy(b.wB);this.w.Copy(b.w);this.a=b.a;this.indexA=b.indexA;this.indexB=b.indexB;return this};goog.exportProperty(box2d.b2SimplexVertex.prototype,"Copy",box2d.b2SimplexVertex.prototype.Copy);box2d.b2Simplex=function(){this.m_v1=new box2d.b2SimplexVertex;this.m_v2=new box2d.b2SimplexVertex;this.m_v3=new box2d.b2SimplexVertex;this.m_vertices=Array(3);this.m_vertices[0]=this.m_v1;this.m_vertices[1]=this.m_v2;this.m_vertices[2]=this.m_v3};goog.exportSymbol("box2d.b2Simplex",box2d.b2Simplex);box2d.b2Simplex.prototype.m_v1=null;goog.exportProperty(box2d.b2Simplex.prototype,"m_v1",box2d.b2Simplex.prototype.m_v1);box2d.b2Simplex.prototype.m_v2=null;goog.exportProperty(box2d.b2Simplex.prototype,"m_v2",box2d.b2Simplex.prototype.m_v2);box2d.b2Simplex.prototype.m_v3=null;goog.exportProperty(box2d.b2Simplex.prototype,"m_v3",box2d.b2Simplex.prototype.m_v3);box2d.b2Simplex.prototype.m_vertices=null;goog.exportProperty(box2d.b2Simplex.prototype,"m_vertices",box2d.b2Simplex.prototype.m_vertices);box2d.b2Simplex.prototype.m_count=0;goog.exportProperty(box2d.b2Simplex.prototype,"m_count",box2d.b2Simplex.prototype.m_count);box2d.b2Simplex.prototype.ReadCache=function(A,z,y,u,v){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=A.count&&3>=A.count);this.m_count=A.count;for(var r=this.m_vertices,q=0;q<this.m_count;++q){var n=r[q];n.indexA=A.indexA[q];n.indexB=A.indexB[q];var j=z.GetVertex(n.indexA),m=u.GetVertex(n.indexB);box2d.b2MulXV(y,j,n.wA);box2d.b2MulXV(v,m,n.wB);box2d.b2SubVV(n.wB,n.wA,n.w);n.a=0}1<this.m_count&&(A=A.metric,q=this.GetMetric(),q<0.5*A||2*A<q||q<box2d.b2_epsilon)&&(this.m_count=0);0==this.m_count&&(n=r[0],n.indexA=0,n.indexB=0,j=z.GetVertex(0),m=u.GetVertex(0),box2d.b2MulXV(y,j,n.wA),box2d.b2MulXV(v,m,n.wB),box2d.b2SubVV(n.wB,n.wA,n.w),this.m_count=n.a=1)};goog.exportProperty(box2d.b2Simplex.prototype,"ReadCache",box2d.b2Simplex.prototype.ReadCache);box2d.b2Simplex.prototype.WriteCache=function(e){e.metric=this.GetMetric();e.count=this.m_count;for(var d=this.m_vertices,f=0;f<this.m_count;++f){e.indexA[f]=d[f].indexA,e.indexB[f]=d[f].indexB}};goog.exportProperty(box2d.b2Simplex.prototype,"WriteCache",box2d.b2Simplex.prototype.WriteCache);box2d.b2Simplex.prototype.GetSearchDirection=function(e){switch(this.m_count){case 1:return box2d.b2NegV(this.m_v1.w,e);case 2:var d=box2d.b2SubVV(this.m_v2.w,this.m_v1.w,e);return 0<box2d.b2CrossVV(d,box2d.b2NegV(this.m_v1.w,box2d.b2Vec2.s_t0))?box2d.b2CrossOneV(d,e):box2d.b2CrossVOne(d,e);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),e.SetZero()}};goog.exportProperty(box2d.b2Simplex.prototype,"GetSearchDirection",box2d.b2Simplex.prototype.GetSearchDirection);box2d.b2Simplex.prototype.GetClosestPoint=function(b){switch(this.m_count){case 0:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),b.SetZero();case 1:return b.Copy(this.m_v1.w);case 2:return b.SetXY(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);case 3:return b.SetZero();default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),b.SetZero()}};goog.exportProperty(box2d.b2Simplex.prototype,"GetClosestPoint",box2d.b2Simplex.prototype.GetClosestPoint);box2d.b2Simplex.prototype.GetWitnessPoints=function(e,d){switch(this.m_count){case 0:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);break;case 1:e.Copy(this.m_v1.wA);d.Copy(this.m_v1.wB);break;case 2:e.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x;e.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y;d.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x;d.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:d.x=e.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x;d.y=e.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}};goog.exportProperty(box2d.b2Simplex.prototype,"GetWitnessPoints",box2d.b2Simplex.prototype.GetWitnessPoints);box2d.b2Simplex.prototype.GetMetric=function(){switch(this.m_count){case 0:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0;case 1:return 0;case 2:return box2d.b2DistanceVV(this.m_v1.w,this.m_v2.w);case 3:return box2d.b2CrossVV(box2d.b2SubVV(this.m_v2.w,this.m_v1.w,box2d.b2Vec2.s_t0),box2d.b2SubVV(this.m_v3.w,this.m_v1.w,box2d.b2Vec2.s_t1));default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0}};goog.exportProperty(box2d.b2Simplex.prototype,"GetMetric",box2d.b2Simplex.prototype.GetMetric);box2d.b2Simplex.prototype.Solve2=function(){var e=this.m_v1.w,d=this.m_v2.w,f=box2d.b2SubVV(d,e,box2d.b2Simplex.s_e12),e=-box2d.b2DotVV(e,f);0>=e?this.m_count=this.m_v1.a=1:(d=box2d.b2DotVV(d,f),0>=d?(this.m_count=this.m_v2.a=1,this.m_v1.Copy(this.m_v2)):(f=1/(d+e),this.m_v1.a=d*f,this.m_v2.a=e*f,this.m_count=2))};goog.exportProperty(box2d.b2Simplex.prototype,"Solve2",box2d.b2Simplex.prototype.Solve2);box2d.b2Simplex.prototype.Solve3=function(){var C=this.m_v1.w,B=this.m_v2.w,A=this.m_v3.w,y=box2d.b2SubVV(B,C,box2d.b2Simplex.s_e12),z=box2d.b2DotVV(C,y),v=box2d.b2DotVV(B,y),z=-z,u=box2d.b2SubVV(A,C,box2d.b2Simplex.s_e13),r=box2d.b2DotVV(C,u),n=box2d.b2DotVV(A,u),r=-r,q=box2d.b2SubVV(A,B,box2d.b2Simplex.s_e23),j=box2d.b2DotVV(B,q),q=box2d.b2DotVV(A,q),j=-j,u=box2d.b2CrossVV(y,u),y=u*box2d.b2CrossVV(B,A),A=u*box2d.b2CrossVV(A,C),C=u*box2d.b2CrossVV(C,B);0>=z&&0>=r?this.m_count=this.m_v1.a=1:0<v&&0<z&&0>=C?(n=1/(v+z),this.m_v1.a=v*n,this.m_v2.a=z*n,this.m_count=2):0<n&&0<r&&0>=A?(v=1/(n+r),this.m_v1.a=n*v,this.m_v3.a=r*v,this.m_count=2,this.m_v2.Copy(this.m_v3)):0>=v&&0>=j?(this.m_count=this.m_v2.a=1,this.m_v1.Copy(this.m_v2)):0>=n&&0>=q?(this.m_count=this.m_v3.a=1,this.m_v1.Copy(this.m_v3)):0<q&&0<j&&0>=y?(v=1/(q+j),this.m_v2.a=q*v,this.m_v3.a=j*v,this.m_count=2,this.m_v1.Copy(this.m_v3)):(v=1/(y+A+C),this.m_v1.a=y*v,this.m_v2.a=A*v,this.m_v3.a=C*v,this.m_count=3)};goog.exportProperty(box2d.b2Simplex.prototype,"Solve3",box2d.b2Simplex.prototype.Solve3);box2d.b2Simplex.s_e12=new box2d.b2Vec2;box2d.b2Simplex.s_e13=new box2d.b2Vec2;box2d.b2Simplex.s_e23=new box2d.b2Vec2;box2d.b2Distance=function(J,I,H){++box2d.b2_gjkCalls;var F=H.proxyA,G=H.proxyB,E=H.transformA,D=H.transformB,C=box2d.b2Distance.s_simplex;C.ReadCache(I,F,E,G,D);for(var A=C.m_vertices,B=box2d.b2Distance.s_saveA,z=box2d.b2Distance.s_saveB,y=0,v=0;20>v;){for(var y=C.m_count,u=0;u<y;++u){B[u]=A[u].indexA,z[u]=A[u].indexB}switch(C.m_count){case 1:break;case 2:C.Solve2();break;case 3:C.Solve3();break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}if(3==C.m_count){break}var j=C.GetClosestPoint(box2d.b2Distance.s_p);j.GetLengthSquared();u=C.GetSearchDirection(box2d.b2Distance.s_d);if(u.GetLengthSquared()<box2d.b2_epsilon_sq){break}j=A[C.m_count];j.indexA=F.GetSupport(box2d.b2MulTRV(E.q,box2d.b2NegV(u,box2d.b2Vec2.s_t0),box2d.b2Distance.s_supportA));box2d.b2MulXV(E,F.GetVertex(j.indexA),j.wA);j.indexB=G.GetSupport(box2d.b2MulTRV(D.q,u,box2d.b2Distance.s_supportB));box2d.b2MulXV(D,G.GetVertex(j.indexB),j.wB);box2d.b2SubVV(j.wB,j.wA,j.w);++v;++box2d.b2_gjkIters;for(var K=!1,u=0;u<y;++u){if(j.indexA==B[u]&&j.indexB==z[u]){K=!0;break}}if(K){break}++C.m_count}box2d.b2_gjkMaxIters=box2d.b2Max(box2d.b2_gjkMaxIters,v);C.GetWitnessPoints(J.pointA,J.pointB);J.distance=box2d.b2DistanceVV(J.pointA,J.pointB);J.iterations=v;C.WriteCache(I);H.useRadii&&(I=F.m_radius,G=G.m_radius,J.distance>I+G&&J.distance>box2d.b2_epsilon?(J.distance-=I+G,H=box2d.b2SubVV(J.pointB,J.pointA,box2d.b2Distance.s_normal),H.Normalize(),J.pointA.SelfMulAdd(I,H),J.pointB.SelfMulSub(G,H)):(j=box2d.b2MidVV(J.pointA,J.pointB,box2d.b2Distance.s_p),J.pointA.Copy(j),J.pointB.Copy(j),J.distance=0))};goog.exportSymbol("box2d.b2Distance",box2d.b2Distance);box2d.b2Distance.s_simplex=new box2d.b2Simplex;box2d.b2Distance.s_saveA=box2d.b2MakeNumberArray(3);box2d.b2Distance.s_saveB=box2d.b2MakeNumberArray(3);box2d.b2Distance.s_p=new box2d.b2Vec2;box2d.b2Distance.s_d=new box2d.b2Vec2;box2d.b2Distance.s_normal=new box2d.b2Vec2;box2d.b2Distance.s_supportA=new box2d.b2Vec2;box2d.b2Distance.s_supportB=new box2d.b2Vec2;box2d.b2WeldJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_weldJoint);this.localAnchorA=new box2d.b2Vec2;this.localAnchorB=new box2d.b2Vec2};goog.inherits(box2d.b2WeldJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2WeldJointDef",box2d.b2WeldJointDef);box2d.b2WeldJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2WeldJointDef.prototype,"localAnchorA",box2d.b2WeldJointDef.prototype.localAnchorA);box2d.b2WeldJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2WeldJointDef.prototype,"localAnchorB",box2d.b2WeldJointDef.prototype.localAnchorB);box2d.b2WeldJointDef.prototype.referenceAngle=0;goog.exportProperty(box2d.b2WeldJointDef.prototype,"referenceAngle",box2d.b2WeldJointDef.prototype.referenceAngle);box2d.b2WeldJointDef.prototype.frequencyHz=0;goog.exportProperty(box2d.b2WeldJointDef.prototype,"frequencyHz",box2d.b2WeldJointDef.prototype.frequencyHz);box2d.b2WeldJointDef.prototype.dampingRatio=0;goog.exportProperty(box2d.b2WeldJointDef.prototype,"dampingRatio",box2d.b2WeldJointDef.prototype.dampingRatio);box2d.b2WeldJointDef.prototype.Initialize=function(e,d,f){this.bodyA=e;this.bodyB=d;this.bodyA.GetLocalPoint(f,this.localAnchorA);this.bodyB.GetLocalPoint(f,this.localAnchorB);this.referenceAngle=this.bodyB.GetAngleRadians()-this.bodyA.GetAngleRadians()};goog.exportProperty(box2d.b2WeldJointDef.prototype,"Initialize",box2d.b2WeldJointDef.prototype.Initialize);box2d.b2WeldJoint=function(b){box2d.b2Joint.call(this,b);this.m_frequencyHz=b.frequencyHz;this.m_dampingRatio=b.dampingRatio;this.m_localAnchorA=b.localAnchorA.Clone();this.m_localAnchorB=b.localAnchorB.Clone();this.m_referenceAngle=b.referenceAngle;this.m_impulse=new box2d.b2Vec3(0,0,0);this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_mass=new box2d.b2Mat33;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_K=new box2d.b2Mat33};goog.inherits(box2d.b2WeldJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2WeldJoint",box2d.b2WeldJoint);box2d.b2WeldJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_frequencyHz",box2d.b2WeldJoint.prototype.m_frequencyHz);box2d.b2WeldJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_dampingRatio",box2d.b2WeldJoint.prototype.m_dampingRatio);box2d.b2WeldJoint.prototype.m_bias=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_bias",box2d.b2WeldJoint.prototype.m_bias);box2d.b2WeldJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localAnchorA",box2d.b2WeldJoint.prototype.m_localAnchorA);box2d.b2WeldJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localAnchorB",box2d.b2WeldJoint.prototype.m_localAnchorB);box2d.b2WeldJoint.prototype.m_referenceAngle=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_referenceAngle",box2d.b2WeldJoint.prototype.m_referenceAngle);box2d.b2WeldJoint.prototype.m_gamma=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_gamma",box2d.b2WeldJoint.prototype.m_gamma);box2d.b2WeldJoint.prototype.m_impulse=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_impulse",box2d.b2WeldJoint.prototype.m_impulse);box2d.b2WeldJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_indexA",box2d.b2WeldJoint.prototype.m_indexA);box2d.b2WeldJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_indexB",box2d.b2WeldJoint.prototype.m_indexB);box2d.b2WeldJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_rA",box2d.b2WeldJoint.prototype.m_rA);box2d.b2WeldJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_rB",box2d.b2WeldJoint.prototype.m_rB);box2d.b2WeldJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localCenterA",box2d.b2WeldJoint.prototype.m_localCenterA);box2d.b2WeldJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_localCenterB",box2d.b2WeldJoint.prototype.m_localCenterB);box2d.b2WeldJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invMassA",box2d.b2WeldJoint.prototype.m_invMassA);box2d.b2WeldJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invMassB",box2d.b2WeldJoint.prototype.m_invMassB);box2d.b2WeldJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invIA",box2d.b2WeldJoint.prototype.m_invIA);box2d.b2WeldJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_invIB",box2d.b2WeldJoint.prototype.m_invIB);box2d.b2WeldJoint.prototype.m_mass=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_mass",box2d.b2WeldJoint.prototype.m_mass);box2d.b2WeldJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_qA",box2d.b2WeldJoint.prototype.m_qA);box2d.b2WeldJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_qB",box2d.b2WeldJoint.prototype.m_qB);box2d.b2WeldJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_lalcA",box2d.b2WeldJoint.prototype.m_lalcA);box2d.b2WeldJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_lalcB",box2d.b2WeldJoint.prototype.m_lalcB);box2d.b2WeldJoint.prototype.m_K=null;goog.exportProperty(box2d.b2WeldJoint.prototype,"m_K",box2d.b2WeldJoint.prototype.m_K);box2d.b2WeldJoint.prototype.InitVelocityConstraints=function(J){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var I=J.positions[this.m_indexA].a,H=J.velocities[this.m_indexA].v,F=J.velocities[this.m_indexA].w,G=J.positions[this.m_indexB].a,E=J.velocities[this.m_indexB].v,D=J.velocities[this.m_indexB].w,C=this.m_qA.SetAngleRadians(I),A=this.m_qB.SetAngleRadians(G);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2MulRV(C,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2MulRV(A,this.m_lalcB,this.m_rB);var C=this.m_invMassA,A=this.m_invMassB,B=this.m_invIA,z=this.m_invIB,y=this.m_K;y.ex.x=C+A+this.m_rA.y*this.m_rA.y*B+this.m_rB.y*this.m_rB.y*z;y.ey.x=-this.m_rA.y*this.m_rA.x*B-this.m_rB.y*this.m_rB.x*z;y.ez.x=-this.m_rA.y*B-this.m_rB.y*z;y.ex.y=y.ey.x;y.ey.y=C+A+this.m_rA.x*this.m_rA.x*B+this.m_rB.x*this.m_rB.x*z;y.ez.y=this.m_rA.x*B+this.m_rB.x*z;y.ex.z=y.ez.x;y.ey.z=y.ez.y;y.ez.z=B+z;if(0<this.m_frequencyHz){y.GetInverse22(this.m_mass);var y=B+z,v=0<y?1/y:0,I=G-I-this.m_referenceAngle,G=2*box2d.b2_pi*this.m_frequencyHz,u=v*G*G,j=J.step.dt;this.m_gamma=j*(2*v*this.m_dampingRatio*G+j*u);this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0;this.m_bias=I*j*u*this.m_gamma;y+=this.m_gamma;this.m_mass.ez.z=0!=y?1/y:0}else{y.GetSymInverse33(this.m_mass),this.m_bias=this.m_gamma=0}J.step.warmStarting?(this.m_impulse.SelfMul(J.step.dtRatio),y=box2d.b2WeldJoint.prototype.InitVelocityConstraints.s_P.SetXY(this.m_impulse.x,this.m_impulse.y),H.SelfMulSub(C,y),F-=B*(box2d.b2CrossVV(this.m_rA,y)+this.m_impulse.z),E.SelfMulAdd(A,y),D+=z*(box2d.b2CrossVV(this.m_rB,y)+this.m_impulse.z)):this.m_impulse.SetZero();J.velocities[this.m_indexA].w=F;J.velocities[this.m_indexB].w=D};box2d.b2WeldJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolveVelocityConstraints=function(C){var B=C.velocities[this.m_indexA].v,A=C.velocities[this.m_indexA].w,y=C.velocities[this.m_indexB].v,z=C.velocities[this.m_indexB].w,v=this.m_invMassA,u=this.m_invMassB,r=this.m_invIA,n=this.m_invIB;if(0<this.m_frequencyHz){var q=-this.m_mass.ez.z*(z-A+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=q;A-=r*q;z+=n*q;q=box2d.b2SubVV(box2d.b2AddVCrossSV(y,z,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(B,A,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1);q=box2d.b2MulM33XY(this.m_mass,q.x,q.y,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse1).SelfNeg();this.m_impulse.x+=q.x;this.m_impulse.y+=q.y;B.SelfMulSub(v,q);A-=r*box2d.b2CrossVV(this.m_rA,q);y.SelfMulAdd(u,q);z+=n*box2d.b2CrossVV(this.m_rB,q)}else{var q=box2d.b2SubVV(box2d.b2AddVCrossSV(y,z,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(B,A,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1),j=box2d.b2MulM33XYZ(this.m_mass,q.x,q.y,z-A,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse).SelfNeg();this.m_impulse.SelfAdd(j);q=box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_P.SetXY(j.x,j.y);B.SelfMulSub(v,q);A-=r*(box2d.b2CrossVV(this.m_rA,q)+j.z);y.SelfMulAdd(u,q);z+=n*(box2d.b2CrossVV(this.m_rB,q)+j.z)}C.velocities[this.m_indexA].w=A;C.velocities[this.m_indexB].w=z};goog.exportProperty(box2d.b2WeldJoint.prototype,"SolveVelocityConstraints",box2d.b2WeldJoint.prototype.SolveVelocityConstraints);box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse1=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec3;box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolvePositionConstraints=function(J){var I=J.positions[this.m_indexA].c,H=J.positions[this.m_indexA].a,F=J.positions[this.m_indexB].c,G=J.positions[this.m_indexB].a,E=this.m_qA.SetAngleRadians(H),D=this.m_qB.SetAngleRadians(G),C=this.m_invMassA,A=this.m_invMassB,B=this.m_invIA,z=this.m_invIB;box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var y=box2d.b2MulRV(E,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var v=box2d.b2MulRV(D,this.m_lalcB,this.m_rB),u=this.m_K;u.ex.x=C+A+y.y*y.y*B+v.y*v.y*z;u.ey.x=-y.y*y.x*B-v.y*v.x*z;u.ez.x=-y.y*B-v.y*z;u.ex.y=u.ey.x;u.ey.y=C+A+y.x*y.x*B+v.x*v.x*z;u.ez.y=y.x*B+v.x*z;u.ex.z=u.ez.x;u.ey.z=u.ez.y;u.ez.z=B+z;if(0<this.m_frequencyHz){var j=box2d.b2SubVV(box2d.b2AddVV(F,v,box2d.b2Vec2.s_t0),box2d.b2AddVV(I,y,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1),D=j.GetLength(),E=0,u=u.Solve22(j.x,j.y,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P).SelfNeg();I.SelfMulSub(C,u);H-=B*box2d.b2CrossVV(y,u);F.SelfMulAdd(A,u);G+=z*box2d.b2CrossVV(v,u)}else{j=box2d.b2SubVV(box2d.b2AddVV(F,v,box2d.b2Vec2.s_t0),box2d.b2AddVV(I,y,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1),y=G-H-this.m_referenceAngle,D=j.GetLength(),E=box2d.b2Abs(y),y=u.Solve33(j.x,j.y,y,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse).SelfNeg(),u=box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P.SetXY(y.x,y.y),I.SelfMulSub(C,u),H-=B*(box2d.b2CrossVV(this.m_rA,u)+y.z),F.SelfMulAdd(A,u),G+=z*(box2d.b2CrossVV(this.m_rB,u)+y.z)}J.positions[this.m_indexA].a=H;J.positions[this.m_indexB].a=G;return D<=box2d.b2_linearSlop&&E<=box2d.b2_angularSlop};goog.exportProperty(box2d.b2WeldJoint.prototype,"SolvePositionConstraints",box2d.b2WeldJoint.prototype.SolvePositionConstraints);box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec3;box2d.b2WeldJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetAnchorA",box2d.b2WeldJoint.prototype.GetAnchorA);box2d.b2WeldJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetAnchorB",box2d.b2WeldJoint.prototype.GetAnchorB);box2d.b2WeldJoint.prototype.GetReactionForce=function(e,d){return d.SetXY(e*this.m_impulse.x,e*this.m_impulse.y)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetReactionForce",box2d.b2WeldJoint.prototype.GetReactionForce);box2d.b2WeldJoint.prototype.GetReactionTorque=function(b){return b*this.m_impulse.z};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetReactionTorque",box2d.b2WeldJoint.prototype.GetReactionTorque);box2d.b2WeldJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetLocalAnchorA",box2d.b2WeldJoint.prototype.GetLocalAnchorA);box2d.b2WeldJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetLocalAnchorB",box2d.b2WeldJoint.prototype.GetLocalAnchorB);box2d.b2WeldJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetReferenceAngle",box2d.b2WeldJoint.prototype.GetReferenceAngle);box2d.b2WeldJoint.prototype.SetFrequency=function(b){this.m_frequencyHz=b};box2d.b2WeldJoint.prototype.GetFrequency=function(){return this.m_frequencyHz};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetFrequency",box2d.b2WeldJoint.prototype.GetFrequency);box2d.b2WeldJoint.prototype.SetDampingRatio=function(b){this.m_dampingRatio=b};box2d.b2WeldJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2WeldJoint.prototype,"GetDampingRatio",box2d.b2WeldJoint.prototype.GetDampingRatio);box2d.b2WeldJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2WeldJointDef*/ var jd = new box2d.b2WeldJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle);box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz);box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2WeldJoint.prototype,"Dump",box2d.b2WeldJoint.prototype.Dump);box2d.b2RopeJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_ropeJoint);this.localAnchorA=new box2d.b2Vec2(-1,0);this.localAnchorB=new box2d.b2Vec2(1,0)};goog.inherits(box2d.b2RopeJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2RopeJointDef",box2d.b2RopeJointDef);box2d.b2RopeJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2RopeJointDef.prototype,"localAnchorA",box2d.b2RopeJointDef.prototype.localAnchorA);box2d.b2RopeJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2RopeJointDef.prototype,"localAnchorB",box2d.b2RopeJointDef.prototype.localAnchorB);box2d.b2RopeJointDef.prototype.maxLength=0;goog.exportProperty(box2d.b2RopeJointDef.prototype,"maxLength",box2d.b2RopeJointDef.prototype.maxLength);box2d.b2RopeJoint=function(b){box2d.b2Joint.call(this,b);this.m_localAnchorA=b.localAnchorA.Clone();this.m_localAnchorB=b.localAnchorB.Clone();this.m_maxLength=b.maxLength;this.m_u=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2};goog.inherits(box2d.b2RopeJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2RopeJoint",box2d.b2RopeJoint);box2d.b2RopeJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localAnchorA",box2d.b2RopeJoint.prototype.m_localAnchorA);box2d.b2RopeJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localAnchorB",box2d.b2RopeJoint.prototype.m_localAnchorB);box2d.b2RopeJoint.prototype.m_maxLength=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_maxLength",box2d.b2RopeJoint.prototype.m_maxLength);box2d.b2RopeJoint.prototype.m_length=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_length",box2d.b2RopeJoint.prototype.m_length);box2d.b2RopeJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_impulse",box2d.b2RopeJoint.prototype.m_impulse);box2d.b2RopeJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_indexA",box2d.b2RopeJoint.prototype.m_indexA);box2d.b2RopeJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_indexB",box2d.b2RopeJoint.prototype.m_indexB);box2d.b2RopeJoint.prototype.m_u=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_u",box2d.b2RopeJoint.prototype.m_u);box2d.b2RopeJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_rA",box2d.b2RopeJoint.prototype.m_rA);box2d.b2RopeJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_rB",box2d.b2RopeJoint.prototype.m_rB);box2d.b2RopeJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localCenterA",box2d.b2RopeJoint.prototype.m_localCenterA);box2d.b2RopeJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_localCenterB",box2d.b2RopeJoint.prototype.m_localCenterB);box2d.b2RopeJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invMassA",box2d.b2RopeJoint.prototype.m_invMassA);box2d.b2RopeJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invMassB",box2d.b2RopeJoint.prototype.m_invMassB);box2d.b2RopeJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invIA",box2d.b2RopeJoint.prototype.m_invIA);box2d.b2RopeJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_invIB",box2d.b2RopeJoint.prototype.m_invIB);box2d.b2RopeJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_mass",box2d.b2RopeJoint.prototype.m_mass);box2d.b2RopeJoint.prototype.m_state=box2d.b2LimitState.e_inactiveLimit;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_state",box2d.b2RopeJoint.prototype.m_state);box2d.b2RopeJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_qA",box2d.b2RopeJoint.prototype.m_qA);box2d.b2RopeJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_qB",box2d.b2RopeJoint.prototype.m_qB);box2d.b2RopeJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_lalcA",box2d.b2RopeJoint.prototype.m_lalcA);box2d.b2RopeJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2RopeJoint.prototype,"m_lalcB",box2d.b2RopeJoint.prototype.m_lalcB);box2d.b2RopeJoint.prototype.InitVelocityConstraints=function(y){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var v=y.positions[this.m_indexA].c,u=y.velocities[this.m_indexA].v,q=y.velocities[this.m_indexA].w,r=y.positions[this.m_indexB].c,n=y.positions[this.m_indexB].a,m=y.velocities[this.m_indexB].v,k=y.velocities[this.m_indexB].w,j=this.m_qA.SetAngleRadians(y.positions[this.m_indexA].a),n=this.m_qB.SetAngleRadians(n);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2MulRV(j,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2MulRV(n,this.m_lalcB,this.m_rB);this.m_u.Copy(r).SelfAdd(this.m_rB).SelfSub(v).SelfSub(this.m_rA);this.m_length=this.m_u.GetLength();this.m_state=0<this.m_length-this.m_maxLength?box2d.b2LimitState.e_atUpperLimit:box2d.b2LimitState.e_inactiveLimit;this.m_length>box2d.b2_linearSlop?(this.m_u.SelfMul(1/this.m_length),v=box2d.b2CrossVV(this.m_rA,this.m_u),r=box2d.b2CrossVV(this.m_rB,this.m_u),v=this.m_invMassA+this.m_invIA*v*v+this.m_invMassB+this.m_invIB*r*r,this.m_mass=0!=v?1/v:0,y.step.warmStarting?(this.m_impulse*=y.step.dtRatio,v=box2d.b2MulSV(this.m_impulse,this.m_u,box2d.b2RopeJoint.prototype.InitVelocityConstraints.s_P),u.SelfMulSub(this.m_invMassA,v),q-=this.m_invIA*box2d.b2CrossVV(this.m_rA,v),m.SelfMulAdd(this.m_invMassB,v),k+=this.m_invIB*box2d.b2CrossVV(this.m_rB,v)):this.m_impulse=0,y.velocities[this.m_indexA].w=q,y.velocities[this.m_indexB].w=k):(this.m_u.SetZero(),this.m_impulse=this.m_mass=0)};goog.exportProperty(box2d.b2RopeJoint.prototype,"InitVelocityConstraints",box2d.b2RopeJoint.prototype.InitVelocityConstraints);box2d.b2RopeJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2RopeJoint.prototype.SolveVelocityConstraints=function(k){var j=k.velocities[this.m_indexA].v,v=k.velocities[this.m_indexA].w,r=k.velocities[this.m_indexB].v,u=k.velocities[this.m_indexB].w,q=box2d.b2AddVCrossSV(j,v,this.m_rA,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpA),n=box2d.b2AddVCrossSV(r,u,this.m_rB,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpB),m=this.m_length-this.m_maxLength,q=box2d.b2DotVV(this.m_u,box2d.b2SubVV(n,q,box2d.b2Vec2.s_t0));0>m&&(q+=k.step.inv_dt*m);m=-this.m_mass*q;q=this.m_impulse;this.m_impulse=box2d.b2Min(0,this.m_impulse+m);m=this.m_impulse-q;m=box2d.b2MulSV(m,this.m_u,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_P);j.SelfMulSub(this.m_invMassA,m);v-=this.m_invIA*box2d.b2CrossVV(this.m_rA,m);r.SelfMulAdd(this.m_invMassB,m);u+=this.m_invIB*box2d.b2CrossVV(this.m_rB,m);k.velocities[this.m_indexA].w=v;k.velocities[this.m_indexB].w=u};goog.exportProperty(box2d.b2RopeJoint.prototype,"SolveVelocityConstraints",box2d.b2RopeJoint.prototype.SolveVelocityConstraints);box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2;box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2;box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2RopeJoint.prototype.SolvePositionConstraints=function(A){var z=A.positions[this.m_indexA].c,y=A.positions[this.m_indexA].a,u=A.positions[this.m_indexB].c,v=A.positions[this.m_indexB].a,r=this.m_qA.SetAngleRadians(y),q=this.m_qB.SetAngleRadians(v);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);r=box2d.b2MulRV(r,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var q=box2d.b2MulRV(q,this.m_lalcB,this.m_rB),n=this.m_u.Copy(u).SelfAdd(q).SelfSub(z).SelfSub(r),j=n.Normalize(),m=j-this.m_maxLength,m=box2d.b2Clamp(m,0,box2d.b2_maxLinearCorrection),n=box2d.b2MulSV(-this.m_mass*m,n,box2d.b2RopeJoint.prototype.SolvePositionConstraints.s_P);z.SelfMulSub(this.m_invMassA,n);y-=this.m_invIA*box2d.b2CrossVV(r,n);u.SelfMulAdd(this.m_invMassB,n);v+=this.m_invIB*box2d.b2CrossVV(q,n);A.positions[this.m_indexA].a=y;A.positions[this.m_indexB].a=v;return j-this.m_maxLength<box2d.b2_linearSlop};goog.exportProperty(box2d.b2RopeJoint.prototype,"SolvePositionConstraints",box2d.b2RopeJoint.prototype.SolvePositionConstraints);box2d.b2RopeJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2RopeJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetAnchorA",box2d.b2RopeJoint.prototype.GetAnchorA);box2d.b2RopeJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetAnchorB",box2d.b2RopeJoint.prototype.GetAnchorB);box2d.b2RopeJoint.prototype.GetReactionForce=function(e,d){return box2d.b2MulSV(e*this.m_impulse,this.m_u,d)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetReactionForce",box2d.b2RopeJoint.prototype.GetReactionForce);box2d.b2RopeJoint.prototype.GetReactionTorque=function(b){return 0};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetReactionTorque",box2d.b2RopeJoint.prototype.GetReactionTorque);box2d.b2RopeJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetLocalAnchorA",box2d.b2RopeJoint.prototype.GetLocalAnchorA);box2d.b2RopeJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetLocalAnchorB",box2d.b2RopeJoint.prototype.GetLocalAnchorB);box2d.b2RopeJoint.prototype.SetMaxLength=function(b){this.m_maxLength=b};goog.exportProperty(box2d.b2RopeJoint.prototype,"SetMaxLength",box2d.b2RopeJoint.prototype.SetMaxLength);box2d.b2RopeJoint.prototype.GetMaxLength=function(){return this.m_maxLength};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetMaxLength",box2d.b2RopeJoint.prototype.GetMaxLength);box2d.b2RopeJoint.prototype.GetLimitState=function(){return this.m_state};goog.exportProperty(box2d.b2RopeJoint.prototype,"GetLimitState",box2d.b2RopeJoint.prototype.GetLimitState);box2d.b2RopeJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2RopeJointDef*/ var jd = new box2d.b2RopeJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.maxLength = %.15f;\n",this.m_maxLength);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2RopeJoint.prototype,"Dump",box2d.b2RopeJoint.prototype.Dump);box2d.b2GravityController=function(){box2d.b2Controller.call(this)};goog.inherits(box2d.b2GravityController,box2d.b2Controller);goog.exportSymbol("box2d.b2GravityController",box2d.b2GravityController);box2d.b2GravityController.prototype.G=1;goog.exportProperty(box2d.b2GravityController.prototype,"G",box2d.b2GravityController.prototype.G);box2d.b2GravityController.prototype.invSqr=!0;goog.exportProperty(box2d.b2GravityController.prototype,"invSqr",box2d.b2GravityController.prototype.invSqr);box2d.b2GravityController.prototype.Step=function(C){if(this.invSqr){for(C=this.m_bodyList;C;C=C.nextBody){for(var B=C.body,A=B.GetWorldCenter(),y=B.GetMass(),z=this.m_bodyList;z!=C;z=z.nextBody){var v=z.body,u=v.GetWorldCenter(),r=v.GetMass(),n=u.x-A.x,q=u.y-A.y,j=n*n+q*q;j<box2d.b2_epsilon||(n=box2d.b2GravityController.prototype.Step.s_f.SetXY(n,q),n.SelfMul(this.G/j/box2d.b2Sqrt(j)*y*r),B.IsAwake()&&B.ApplyForce(n,A),v.IsAwake()&&v.ApplyForce(n.SelfMul(-1),u))}}}else{for(C=this.m_bodyList;C;C=C.nextBody){for(B=C.body,A=B.GetWorldCenter(),y=B.GetMass(),z=this.m_bodyList;z!=C;z=z.nextBody){v=z.body,u=v.GetWorldCenter(),r=v.GetMass(),n=u.x-A.x,q=u.y-A.y,j=n*n+q*q,j<box2d.b2_epsilon||(n=box2d.b2GravityController.prototype.Step.s_f.SetXY(n,q),n.SelfMul(this.G/j*y*r),B.IsAwake()&&B.ApplyForce(n,A),v.IsAwake()&&v.ApplyForce(n.SelfMul(-1),u))}}}};goog.exportProperty(box2d.b2GravityController.prototype,"Step",box2d.b2GravityController.prototype.Step);box2d.b2GravityController.prototype.Step.s_f=new box2d.b2Vec2;box2d.b2Profile=function(){};goog.exportSymbol("box2d.b2Profile",box2d.b2Profile);box2d.b2Profile.prototype.step=0;goog.exportProperty(box2d.b2Profile.prototype,"step",box2d.b2Profile.prototype.step);box2d.b2Profile.prototype.collide=0;goog.exportProperty(box2d.b2Profile.prototype,"collide",box2d.b2Profile.prototype.collide);box2d.b2Profile.prototype.solve=0;goog.exportProperty(box2d.b2Profile.prototype,"solve",box2d.b2Profile.prototype.solve);box2d.b2Profile.prototype.solveInit=0;goog.exportProperty(box2d.b2Profile.prototype,"solveInit",box2d.b2Profile.prototype.solveInit);box2d.b2Profile.prototype.solveVelocity=0;goog.exportProperty(box2d.b2Profile.prototype,"solveVelocity",box2d.b2Profile.prototype.solveVelocity);box2d.b2Profile.prototype.solvePosition=0;goog.exportProperty(box2d.b2Profile.prototype,"solvePosition",box2d.b2Profile.prototype.solvePosition);box2d.b2Profile.prototype.broadphase=0;goog.exportProperty(box2d.b2Profile.prototype,"broadphase",box2d.b2Profile.prototype.broadphase);box2d.b2Profile.prototype.solveTOI=0;goog.exportProperty(box2d.b2Profile.prototype,"solveTOI",box2d.b2Profile.prototype.solveTOI);box2d.b2Profile.prototype.Reset=function(){this.solveTOI=this.broadphase=this.solvePosition=this.solveVelocity=this.solveInit=this.solve=this.collide=this.step=0;return this};goog.exportProperty(box2d.b2Profile.prototype,"Reset",box2d.b2Profile.prototype.Reset);box2d.b2TimeStep=function(){};goog.exportSymbol("box2d.b2TimeStep",box2d.b2TimeStep);box2d.b2TimeStep.prototype.dt=0;goog.exportProperty(box2d.b2TimeStep.prototype,"dt",box2d.b2TimeStep.prototype.dt);box2d.b2TimeStep.prototype.inv_dt=0;goog.exportProperty(box2d.b2TimeStep.prototype,"inv_dt",box2d.b2TimeStep.prototype.inv_dt);box2d.b2TimeStep.prototype.dtRatio=0;goog.exportProperty(box2d.b2TimeStep.prototype,"dtRatio",box2d.b2TimeStep.prototype.dtRatio);box2d.b2TimeStep.prototype.velocityIterations=0;goog.exportProperty(box2d.b2TimeStep.prototype,"velocityIterations",box2d.b2TimeStep.prototype.velocityIterations);box2d.b2TimeStep.prototype.positionIterations=0;goog.exportProperty(box2d.b2TimeStep.prototype,"positionIterations",box2d.b2TimeStep.prototype.positionIterations);box2d.b2TimeStep.prototype.warmStarting=!1;goog.exportProperty(box2d.b2TimeStep.prototype,"warmStarting",box2d.b2TimeStep.prototype.warmStarting);box2d.b2TimeStep.prototype.Copy=function(b){this.dt=b.dt;this.inv_dt=b.inv_dt;this.dtRatio=b.dtRatio;this.positionIterations=b.positionIterations;this.velocityIterations=b.velocityIterations;this.warmStarting=b.warmStarting;return this};goog.exportProperty(box2d.b2TimeStep.prototype,"Copy",box2d.b2TimeStep.prototype.Copy);box2d.b2Position=function(){this.c=new box2d.b2Vec2};goog.exportSymbol("box2d.b2Position",box2d.b2Position);box2d.b2Position.prototype.c=null;goog.exportProperty(box2d.b2Position.prototype,"c",box2d.b2Position.prototype.c);box2d.b2Position.prototype.a=0;goog.exportProperty(box2d.b2Position.prototype,"a",box2d.b2Position.prototype.a);box2d.b2Position.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2Position})};goog.exportProperty(box2d.b2Position,"MakeArray",box2d.b2Position.MakeArray);box2d.b2Velocity=function(){this.v=new box2d.b2Vec2};goog.exportSymbol("box2d.b2Velocity",box2d.b2Velocity);box2d.b2Velocity.prototype.v=null;goog.exportProperty(box2d.b2Velocity.prototype,"v",box2d.b2Velocity.prototype.v);box2d.b2Velocity.prototype.w=0;goog.exportProperty(box2d.b2Velocity.prototype,"w",box2d.b2Velocity.prototype.w);box2d.b2Velocity.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2Velocity})};goog.exportProperty(box2d.b2Velocity,"MakeArray",box2d.b2Velocity.MakeArray);box2d.b2SolverData=function(){this.step=new box2d.b2TimeStep};goog.exportSymbol("box2d.b2SolverData",box2d.b2SolverData);box2d.b2SolverData.prototype.step=null;goog.exportProperty(box2d.b2SolverData.prototype,"step",box2d.b2SolverData.prototype.step);box2d.b2SolverData.prototype.positions=null;goog.exportProperty(box2d.b2SolverData.prototype,"positions",box2d.b2SolverData.prototype.positions);box2d.b2SolverData.prototype.velocities=null;goog.exportProperty(box2d.b2SolverData.prototype,"velocities",box2d.b2SolverData.prototype.velocities);box2d.b2Collision={};box2d.b2ContactFeatureType={e_vertex:0,e_face:1};goog.exportSymbol("box2d.b2ContactFeatureType",box2d.b2ContactFeatureType);goog.exportProperty(box2d.b2ContactFeatureType,"e_vertex",box2d.b2ContactFeatureType.e_vertex);goog.exportProperty(box2d.b2ContactFeatureType,"e_face",box2d.b2ContactFeatureType.e_face);box2d.b2ContactFeature=function(b){this._id=b};goog.exportSymbol("box2d.b2ContactFeature",box2d.b2ContactFeature);box2d.b2ContactFeature.prototype._id=null;goog.exportProperty(box2d.b2ContactFeature.prototype,"_id",box2d.b2ContactFeature.prototype._id);box2d.b2ContactFeature.prototype._indexA=0;goog.exportProperty(box2d.b2ContactFeature.prototype,"_indexA",box2d.b2ContactFeature.prototype._indexA);box2d.b2ContactFeature.prototype._indexB=0;goog.exportProperty(box2d.b2ContactFeature.prototype,"_indexB",box2d.b2ContactFeature.prototype._indexB);box2d.b2ContactFeature.prototype._typeA=0;goog.exportProperty(box2d.b2ContactFeature.prototype,"_typeA",box2d.b2ContactFeature.prototype._typeA);box2d.b2ContactFeature.prototype._typeB=0;goog.exportProperty(box2d.b2ContactFeature.prototype,"_typeB",box2d.b2ContactFeature.prototype._typeB);Object.defineProperty(box2d.b2ContactFeature.prototype,"indexA",{enumerable:!1,configurable:!0,get:function(){return this._indexA},set:function(b){this._indexA=b;this._id._key=this._id._key&4294967040|this._indexA&255}});Object.defineProperty(box2d.b2ContactFeature.prototype,"indexB",{enumerable:!1,configurable:!0,get:function(){return this._indexB},set:function(b){this._indexB=b;this._id._key=this._id._key&4294902015|this._indexB<<8&65280}});Object.defineProperty(box2d.b2ContactFeature.prototype,"typeA",{enumerable:!1,configurable:!0,get:function(){return this._typeA},set:function(b){this._typeA=b;this._id._key=this._id._key&4278255615|this._typeA<<16&16711680}});Object.defineProperty(box2d.b2ContactFeature.prototype,"typeB",{enumerable:!1,configurable:!0,get:function(){return this._typeB},set:function(b){this._typeB=b;this._id._key=this._id._key&16777215|this._typeB<<24&4278190080}});box2d.b2ContactID=function(){this.cf=new box2d.b2ContactFeature(this)};goog.exportSymbol("box2d.b2ContactID",box2d.b2ContactID);box2d.b2ContactID.prototype.cf=null;goog.exportProperty(box2d.b2ContactID.prototype,"cf",box2d.b2ContactID.prototype.cf);box2d.b2ContactID.prototype.key=0;goog.exportProperty(box2d.b2ContactID.prototype,"key",box2d.b2ContactID.prototype.key);box2d.b2ContactID.prototype.Copy=function(b){this.key=b.key;return this};goog.exportProperty(box2d.b2ContactID.prototype,"Copy",box2d.b2ContactID.prototype.Copy);box2d.b2ContactID.prototype.Clone=function(){return(new box2d.b2ContactID).Copy(this)};goog.exportProperty(box2d.b2ContactID.prototype,"Clone",box2d.b2ContactID.prototype.Clone);Object.defineProperty(box2d.b2ContactID.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key},set:function(b){this._key=b;this.cf._indexA=this._key&255;this.cf._indexB=this._key>>8&255;this.cf._typeA=this._key>>16&255;this.cf._typeB=this._key>>24&255}});box2d.b2ManifoldPoint=function(){this.localPoint=new box2d.b2Vec2;this.id=new box2d.b2ContactID};goog.exportSymbol("box2d.b2ManifoldPoint",box2d.b2ManifoldPoint);box2d.b2ManifoldPoint.prototype.localPoint=null;goog.exportProperty(box2d.b2ManifoldPoint.prototype,"localPoint",box2d.b2ManifoldPoint.prototype.localPoint);box2d.b2ManifoldPoint.prototype.normalImpulse=0;goog.exportProperty(box2d.b2ManifoldPoint.prototype,"normalImpulse",box2d.b2ManifoldPoint.prototype.normalImpulse);box2d.b2ManifoldPoint.prototype.tangentImpulse=0;goog.exportProperty(box2d.b2ManifoldPoint.prototype,"tangentImpulse",box2d.b2ManifoldPoint.prototype.tangentImpulse);box2d.b2ManifoldPoint.prototype.id=null;goog.exportProperty(box2d.b2ManifoldPoint.prototype,"id",box2d.b2ManifoldPoint.prototype.id);box2d.b2ManifoldPoint.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2ManifoldPoint})};goog.exportProperty(box2d.b2ManifoldPoint,"MakeArray",box2d.b2ManifoldPoint.MakeArray);box2d.b2ManifoldPoint.prototype.Reset=function(){this.localPoint.SetZero();this.tangentImpulse=this.normalImpulse=0;this.id.key=0};goog.exportProperty(box2d.b2ManifoldPoint.prototype,"Reset",box2d.b2ManifoldPoint.prototype.Reset);box2d.b2ManifoldPoint.prototype.Copy=function(b){this.localPoint.Copy(b.localPoint);this.normalImpulse=b.normalImpulse;this.tangentImpulse=b.tangentImpulse;this.id.Copy(b.id);return this};goog.exportProperty(box2d.b2ManifoldPoint.prototype,"Copy",box2d.b2ManifoldPoint.prototype.Copy);box2d.b2ManifoldType={e_unknown:-1,e_circles:0,e_faceA:1,e_faceB:2};goog.exportSymbol("box2d.b2ManifoldType",box2d.b2ManifoldType);goog.exportProperty(box2d.b2ManifoldType,"e_unknown",box2d.b2ManifoldType.e_unknown);goog.exportProperty(box2d.b2ManifoldType,"e_circles",box2d.b2ManifoldType.e_circles);goog.exportProperty(box2d.b2ManifoldType,"e_faceA",box2d.b2ManifoldType.e_faceA);goog.exportProperty(box2d.b2ManifoldType,"e_faceB",box2d.b2ManifoldType.e_faceB);box2d.b2Manifold=function(){this.points=box2d.b2ManifoldPoint.MakeArray(box2d.b2_maxManifoldPoints);this.localNormal=new box2d.b2Vec2;this.localPoint=new box2d.b2Vec2;this.type=box2d.b2ManifoldType.e_unknown;this.pointCount=0};goog.exportSymbol("box2d.b2Manifold",box2d.b2Manifold);box2d.b2Manifold.prototype.points=null;goog.exportProperty(box2d.b2Manifold.prototype,"points",box2d.b2Manifold.prototype.points);box2d.b2Manifold.prototype.localNormal=null;goog.exportProperty(box2d.b2Manifold.prototype,"localNormal",box2d.b2Manifold.prototype.localNormal);box2d.b2Manifold.prototype.localPoint=null;goog.exportProperty(box2d.b2Manifold.prototype,"localPoint",box2d.b2Manifold.prototype.localPoint);box2d.b2Manifold.prototype.type=box2d.b2ManifoldType.e_unknown;goog.exportProperty(box2d.b2Manifold.prototype,"type",box2d.b2Manifold.prototype.type);box2d.b2Manifold.prototype.pointCount=0;goog.exportProperty(box2d.b2Manifold.prototype,"pointCount",box2d.b2Manifold.prototype.pointCount);box2d.b2Manifold.prototype.Reset=function(){for(var e=0,d=box2d.b2_maxManifoldPoints;e<d;++e){this.points[e].Reset()}this.localNormal.SetZero();this.localPoint.SetZero();this.type=box2d.b2ManifoldType.e_unknown;this.pointCount=0};goog.exportProperty(box2d.b2Manifold.prototype,"Reset",box2d.b2Manifold.prototype.Reset);box2d.b2Manifold.prototype.Copy=function(e){this.pointCount=e.pointCount;for(var d=0,f=box2d.b2_maxManifoldPoints;d<f;++d){this.points[d].Copy(e.points[d])}this.localNormal.Copy(e.localNormal);this.localPoint.Copy(e.localPoint);this.type=e.type;return this};goog.exportProperty(box2d.b2Manifold.prototype,"Copy",box2d.b2Manifold.prototype.Copy);box2d.b2Manifold.prototype.Clone=function(){return(new box2d.b2Manifold).Copy(this)};goog.exportProperty(box2d.b2Manifold.prototype,"Clone",box2d.b2Manifold.prototype.Clone);box2d.b2WorldManifold=function(){this.normal=new box2d.b2Vec2;this.points=box2d.b2Vec2.MakeArray(box2d.b2_maxManifoldPoints)};goog.exportSymbol("box2d.b2WorldManifold",box2d.b2WorldManifold);box2d.b2WorldManifold.prototype.normal=null;goog.exportProperty(box2d.b2WorldManifold.prototype,"normal",box2d.b2WorldManifold.prototype.normal);box2d.b2WorldManifold.prototype.points=null;goog.exportProperty(box2d.b2WorldManifold.prototype,"points",box2d.b2WorldManifold.prototype.points);box2d.b2WorldManifold.prototype.Initialize=function(C,B,A,y,z){if(0!=C.pointCount){switch(C.type){case box2d.b2ManifoldType.e_circles:this.normal.SetXY(1,0);B=box2d.b2MulXV(B,C.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_pointA);C=box2d.b2MulXV(y,C.points[0].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_pointB);box2d.b2DistanceSquaredVV(B,C)>box2d.b2_epsilon_sq&&box2d.b2SubVV(C,B,this.normal).SelfNormalize();var v=box2d.b2AddVMulSV(B,A,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA),u=box2d.b2SubVMulSV(C,z,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB);box2d.b2MidVV(v,u,this.points[0]);break;case box2d.b2ManifoldType.e_faceA:box2d.b2MulRV(B.q,C.localNormal,this.normal);for(var r=box2d.b2MulXV(B,C.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_planePoint),n=0,q=C.pointCount;n<q;++n){var j=box2d.b2MulXV(y,C.points[n].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_clipPoint),v=A-box2d.b2DotVV(box2d.b2SubVV(j,r,box2d.b2Vec2.s_t0),this.normal),v=box2d.b2AddVMulSV(j,v,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA),u=box2d.b2SubVMulSV(j,z,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB);box2d.b2MidVV(v,u,this.points[n])}break;case box2d.b2ManifoldType.e_faceB:box2d.b2MulRV(y.q,C.localNormal,this.normal);r=box2d.b2MulXV(y,C.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_planePoint);n=0;for(q=C.pointCount;n<q;++n){j=box2d.b2MulXV(B,C.points[n].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_clipPoint),v=z-box2d.b2DotVV(box2d.b2SubVV(j,r,box2d.b2Vec2.s_t0),this.normal),u=box2d.b2AddVMulSV(j,v,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB),v=box2d.b2SubVMulSV(j,A,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA),box2d.b2MidVV(v,u,this.points[n])}this.normal.SelfNeg()}}};goog.exportProperty(box2d.b2WorldManifold.prototype,"Initialize",box2d.b2WorldManifold.prototype.Initialize);box2d.b2WorldManifold.prototype.Initialize.s_pointA=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_pointB=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_cA=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_cB=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_planePoint=new box2d.b2Vec2;box2d.b2WorldManifold.prototype.Initialize.s_clipPoint=new box2d.b2Vec2;box2d.b2PointState={b2_nullState:0,b2_addState:1,b2_persistState:2,b2_removeState:3};goog.exportSymbol("box2d.b2PointState",box2d.b2PointState);goog.exportProperty(box2d.b2PointState,"b2_nullState   ",box2d.b2PointState.b2_nullState);goog.exportProperty(box2d.b2PointState,"b2_addState    ",box2d.b2PointState.b2_addState);goog.exportProperty(box2d.b2PointState,"b2_persistState",box2d.b2PointState.b2_persistState);goog.exportProperty(box2d.b2PointState,"b2_removeState ",box2d.b2PointState.b2_removeState);box2d.b2GetPointStates=function(y,v,u,q){for(var r=0,n=u.pointCount;r<n;++r){var m=u.points[r].id,m=m.key;y[r]=box2d.b2PointState.b2_removeState;for(var k=0,j=q.pointCount;k<j;++k){if(q.points[k].id.key==m){y[r]=box2d.b2PointState.b2_persistState;break}}}for(n=box2d.b2_maxManifoldPoints;r<n;++r){y[r]=box2d.b2PointState.b2_nullState}r=0;for(n=q.pointCount;r<n;++r){for(m=q.points[r].id,m=m.key,v[r]=box2d.b2PointState.b2_addState,k=0,j=u.pointCount;k<j;++k){if(u.points[k].id.key==m){v[r]=box2d.b2PointState.b2_persistState;break}}}for(n=box2d.b2_maxManifoldPoints;r<n;++r){v[r]=box2d.b2PointState.b2_nullState}};goog.exportSymbol("box2d.b2GetPointStates",box2d.b2GetPointStates);box2d.b2ClipVertex=function(){this.v=new box2d.b2Vec2;this.id=new box2d.b2ContactID};goog.exportSymbol("box2d.b2ClipVertex",box2d.b2ClipVertex);box2d.b2ClipVertex.prototype.v=null;goog.exportProperty(box2d.b2ClipVertex.prototype,"v",box2d.b2ClipVertex.prototype.v);box2d.b2ClipVertex.prototype.id=null;goog.exportProperty(box2d.b2ClipVertex.prototype,"id",box2d.b2ClipVertex.prototype.id);box2d.b2ClipVertex.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2ClipVertex})};goog.exportProperty(box2d.b2ClipVertex,"MakeArray",box2d.b2ClipVertex.MakeArray);box2d.b2ClipVertex.prototype.Copy=function(b){this.v.Copy(b.v);this.id.Copy(b.id);return this};goog.exportProperty(box2d.b2ClipVertex.prototype,"Copy",box2d.b2ClipVertex.prototype.Copy);box2d.b2RayCastInput=function(){this.p1=new box2d.b2Vec2;this.p2=new box2d.b2Vec2;this.maxFraction=1};goog.exportSymbol("box2d.b2RayCastInput",box2d.b2RayCastInput);box2d.b2RayCastInput.prototype.p1=null;goog.exportProperty(box2d.b2RayCastInput.prototype,"p1",box2d.b2RayCastInput.prototype.p1);box2d.b2RayCastInput.prototype.p2=null;goog.exportProperty(box2d.b2RayCastInput.prototype,"p2",box2d.b2RayCastInput.prototype.p2);box2d.b2RayCastInput.prototype.maxFraction=1;goog.exportProperty(box2d.b2RayCastInput.prototype,"maxFraction",box2d.b2RayCastInput.prototype.maxFraction);box2d.b2RayCastInput.prototype.Copy=function(b){this.p1.Copy(b.p1);this.p2.Copy(b.p2);this.maxFraction=b.maxFraction;return this};goog.exportProperty(box2d.b2RayCastInput.prototype,"Copy",box2d.b2RayCastInput.prototype.Copy);box2d.b2RayCastOutput=function(){this.normal=new box2d.b2Vec2;this.fraction=0};goog.exportSymbol("box2d.b2RayCastOutput",box2d.b2RayCastOutput);box2d.b2RayCastOutput.prototype.normal=null;goog.exportProperty(box2d.b2RayCastOutput.prototype,"normal",box2d.b2RayCastOutput.prototype.normal);box2d.b2RayCastOutput.prototype.fraction=0;goog.exportProperty(box2d.b2RayCastOutput.prototype,"fraction",box2d.b2RayCastOutput.prototype.fraction);box2d.b2RayCastOutput.prototype.Copy=function(b){this.normal.Copy(b.normal);this.fraction=b.fraction;return this};goog.exportProperty(box2d.b2RayCastOutput.prototype,"Copy",box2d.b2RayCastOutput.prototype.Copy);box2d.b2AABB=function(){this.lowerBound=new box2d.b2Vec2;this.upperBound=new box2d.b2Vec2;this.m_out_center=new box2d.b2Vec2;this.m_out_extent=new box2d.b2Vec2};goog.exportSymbol("box2d.b2AABB",box2d.b2AABB);box2d.b2AABB.prototype.lowerBound=null;goog.exportProperty(box2d.b2AABB.prototype,"lowerBound",box2d.b2AABB.prototype.lowerBound);box2d.b2AABB.prototype.upperBound=null;goog.exportProperty(box2d.b2AABB.prototype,"upperBound",box2d.b2AABB.prototype.upperBound);box2d.b2AABB.prototype.m_out_center=null;goog.exportProperty(box2d.b2AABB.prototype,"m_out_center",box2d.b2AABB.prototype.m_out_center);box2d.b2AABB.prototype.m_out_extent=null;goog.exportProperty(box2d.b2AABB.prototype,"m_out_extent",box2d.b2AABB.prototype.m_out_extent);box2d.b2AABB.prototype.Copy=function(b){this.lowerBound.Copy(b.lowerBound);this.upperBound.Copy(b.upperBound);return this};goog.exportProperty(box2d.b2AABB.prototype,"Copy",box2d.b2AABB.prototype.Copy);box2d.b2AABB.prototype.IsValid=function(){var b=this.upperBound.y-this.lowerBound.y;return b=(b=0<=this.upperBound.x-this.lowerBound.x&&0<=b)&&this.lowerBound.IsValid()&&this.upperBound.IsValid()};goog.exportProperty(box2d.b2AABB.prototype,"IsValid",box2d.b2AABB.prototype.IsValid);box2d.b2AABB.prototype.GetCenter=function(){return box2d.b2MidVV(this.lowerBound,this.upperBound,this.m_out_center)};goog.exportProperty(box2d.b2AABB.prototype,"GetCenter",box2d.b2AABB.prototype.GetCenter);box2d.b2AABB.prototype.GetExtents=function(){return box2d.b2ExtVV(this.lowerBound,this.upperBound,this.m_out_extent)};goog.exportProperty(box2d.b2AABB.prototype,"GetExtents",box2d.b2AABB.prototype.GetExtents);box2d.b2AABB.prototype.GetPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))};goog.exportProperty(box2d.b2AABB.prototype,"GetPerimeter",box2d.b2AABB.prototype.GetPerimeter);box2d.b2AABB.prototype.Combine1=function(b){this.lowerBound.x=box2d.b2Min(this.lowerBound.x,b.lowerBound.x);this.lowerBound.y=box2d.b2Min(this.lowerBound.y,b.lowerBound.y);this.upperBound.x=box2d.b2Max(this.upperBound.x,b.upperBound.x);this.upperBound.y=box2d.b2Max(this.upperBound.y,b.upperBound.y);return this};goog.exportProperty(box2d.b2AABB.prototype,"Combine1",box2d.b2AABB.prototype.Combine1);box2d.b2AABB.prototype.Combine2=function(e,d){this.lowerBound.x=box2d.b2Min(e.lowerBound.x,d.lowerBound.x);this.lowerBound.y=box2d.b2Min(e.lowerBound.y,d.lowerBound.y);this.upperBound.x=box2d.b2Max(e.upperBound.x,d.upperBound.x);this.upperBound.y=box2d.b2Max(e.upperBound.y,d.upperBound.y);return this};goog.exportProperty(box2d.b2AABB.prototype,"Combine2",box2d.b2AABB.prototype.Combine2);box2d.b2AABB.Combine=function(e,d,f){f.Combine2(e,d);return f};goog.exportProperty(box2d.b2AABB,"Combine",box2d.b2AABB.Combine);box2d.b2AABB.prototype.Contains=function(e){var d;return d=(d=(d=(d=this.lowerBound.x<=e.lowerBound.x)&&this.lowerBound.y<=e.lowerBound.y)&&e.upperBound.x<=this.upperBound.x)&&e.upperBound.y<=this.upperBound.y};goog.exportProperty(box2d.b2AABB.prototype,"Contains",box2d.b2AABB.prototype.Contains);box2d.b2AABB.prototype.RayCast=function(C,B){var A=-box2d.b2_maxFloat,y=box2d.b2_maxFloat,z=B.p1.x,v=B.p1.y,u=B.p2.x-B.p1.x,r=B.p2.y-B.p1.y,n=box2d.b2Abs(u),q=box2d.b2Abs(r),j=C.normal;if(n<box2d.b2_epsilon){if(z<this.lowerBound.x||this.upperBound.x<z){return !1}}else{if(n=1/u,u=(this.lowerBound.x-z)*n,z=(this.upperBound.x-z)*n,n=-1,u>z&&(n=u,u=z,z=n,n=1),u>A&&(j.x=n,j.y=0,A=u),y=box2d.b2Min(y,z),A>y){return !1}}if(q<box2d.b2_epsilon){if(v<this.lowerBound.y||this.upperBound.y<v){return !1}}else{if(n=1/r,u=(this.lowerBound.y-v)*n,z=(this.upperBound.y-v)*n,n=-1,u>z&&(n=u,u=z,z=n,n=1),u>A&&(j.x=0,j.y=n,A=u),y=box2d.b2Min(y,z),A>y){return !1}}if(0>A||B.maxFraction<A){return !1}C.fraction=A;return !0};goog.exportProperty(box2d.b2AABB.prototype,"RayCast",box2d.b2AABB.prototype.RayCast);box2d.b2AABB.prototype.TestOverlap=function(e){var d=e.lowerBound.y-this.upperBound.y,f=this.lowerBound.y-e.upperBound.y;return 0<e.lowerBound.x-this.upperBound.x||0<d||0<this.lowerBound.x-e.upperBound.x||0<f?!1:!0};goog.exportProperty(box2d.b2AABB.prototype,"TestOverlap",box2d.b2AABB.prototype.TestOverlap);box2d.b2TestOverlapAABB=function(f,d){var j=d.lowerBound.y-f.upperBound.y,g=f.lowerBound.y-d.upperBound.y;return 0<d.lowerBound.x-f.upperBound.x||0<j||0<f.lowerBound.x-d.upperBound.x||0<g?!1:!0};goog.exportSymbol("box2d.b2TestOverlapAABB",box2d.b2TestOverlapAABB);box2d.b2ClipSegmentToLine=function(k,j,v,r,u){var q=0,n=j[0];j=j[1];var m=box2d.b2DotVV(v,n.v)-r;v=box2d.b2DotVV(v,j.v)-r;0>=m&&k[q++].Copy(n);0>=v&&k[q++].Copy(j);0>m*v&&(v=m/(m-v),r=k[q].v,r.x=n.v.x+v*(j.v.x-n.v.x),r.y=n.v.y+v*(j.v.y-n.v.y),k=k[q].id,k.cf.indexA=u,k.cf.indexB=n.id.cf.indexB,k.cf.typeA=box2d.b2ContactFeatureType.e_vertex,k.cf.typeB=box2d.b2ContactFeatureType.e_face,++q);return q};goog.exportSymbol("box2d.b2ClipSegmentToLine",box2d.b2ClipSegmentToLine);box2d.b2TestOverlapShape=function(k,j,u,q,r,n){var m=box2d.b2TestOverlapShape.s_input.Reset();m.proxyA.SetShape(k,j);m.proxyB.SetShape(u,q);m.transformA.Copy(r);m.transformB.Copy(n);m.useRadii=!0;k=box2d.b2TestOverlapShape.s_simplexCache.Reset();k.count=0;j=box2d.b2TestOverlapShape.s_output.Reset();box2d.b2Distance(j,k,m);return j.distance<10*box2d.b2_epsilon};goog.exportSymbol("box2d.b2TestOverlapShape",box2d.b2TestOverlapShape);box2d.b2TestOverlapShape.s_input=new box2d.b2DistanceInput;box2d.b2TestOverlapShape.s_simplexCache=new box2d.b2SimplexCache;box2d.b2TestOverlapShape.s_output=new box2d.b2DistanceOutput;box2d.b2Timer=function(){this.m_start=(new Date).getTime()};goog.exportSymbol("box2d.b2Timer",box2d.b2Timer);box2d.b2Timer.prototype.m_start=0;goog.exportProperty(box2d.b2Timer.prototype,"m_start",box2d.b2Timer.prototype.m_start);box2d.b2Timer.prototype.Reset=function(){this.m_start=(new Date).getTime();return this};goog.exportProperty(box2d.b2Timer.prototype,"Reset",box2d.b2Timer.prototype.Reset);box2d.b2Timer.prototype.GetMilliseconds=function(){return(new Date).getTime()-this.m_start};goog.exportProperty(box2d.b2Timer.prototype,"GetMilliseconds",box2d.b2Timer.prototype.GetMilliseconds);box2d.b2Counter=function(){};goog.exportSymbol("box2d.b2Counter",box2d.b2Counter);box2d.b2Counter.prototype.m_count=0;goog.exportProperty(box2d.b2Counter.prototype,"m_count",box2d.b2Counter.prototype.m_count);box2d.b2Counter.prototype.m_min_count=0;goog.exportProperty(box2d.b2Counter.prototype,"m_min_count",box2d.b2Counter.prototype.m_min_count);box2d.b2Counter.prototype.m_max_count=0;goog.exportProperty(box2d.b2Counter.prototype,"m_max_count",box2d.b2Counter.prototype.m_max_count);box2d.b2Counter.prototype.GetCount=function(){return this.m_count};goog.exportProperty(box2d.b2Counter.prototype,"GetCount",box2d.b2Counter.prototype.GetCount);box2d.b2Counter.prototype.GetMinCount=function(){return this.m_min_count};goog.exportProperty(box2d.b2Counter.prototype,"GetMinCount",box2d.b2Counter.prototype.GetMinCount);box2d.b2Counter.prototype.GetMaxCount=function(){return this.m_max_count};goog.exportProperty(box2d.b2Counter.prototype,"GetMaxCount",box2d.b2Counter.prototype.GetMaxCount);box2d.b2Counter.prototype.ResetCount=function(){var b=this.m_count;this.m_count=0;return b};goog.exportProperty(box2d.b2Counter.prototype,"ResetCount",box2d.b2Counter.prototype.ResetCount);box2d.b2Counter.prototype.ResetMinCount=function(){this.m_min_count=0};goog.exportProperty(box2d.b2Counter.prototype,"ResetMinCount",box2d.b2Counter.prototype.ResetMinCount);box2d.b2Counter.prototype.ResetMaxCount=function(){this.m_max_count=0};goog.exportProperty(box2d.b2Counter.prototype,"ResetMaxCount",box2d.b2Counter.prototype.ResetMaxCount);box2d.b2Counter.prototype.Increment=function(){this.m_count++;this.m_max_count<this.m_count&&(this.m_max_count=this.m_count)};goog.exportProperty(box2d.b2Counter.prototype,"Increment",box2d.b2Counter.prototype.Increment);box2d.b2Counter.prototype.Decrement=function(){this.m_count--;this.m_min_count>this.m_count&&(this.m_min_count=this.m_count)};goog.exportProperty(box2d.b2Counter.prototype,"Decrement",box2d.b2Counter.prototype.Decrement);box2d.b2_toiTime=0;goog.exportSymbol("box2d.b2_toiTime",box2d.b2_toiTime);box2d.b2_toiMaxTime=0;goog.exportSymbol("box2d.b2_toiMaxTime",box2d.b2_toiMaxTime);box2d.b2_toiCalls=0;goog.exportSymbol("box2d.b2_toiCalls",box2d.b2_toiCalls);box2d.b2_toiIters=0;goog.exportSymbol("box2d.b2_toiIters",box2d.b2_toiIters);box2d.b2_toiMaxIters=0;goog.exportSymbol("box2d.b2_toiMaxIters",box2d.b2_toiMaxIters);box2d.b2_toiRootIters=0;goog.exportSymbol("box2d.b2_toiRootIters",box2d.b2_toiRootIters);box2d.b2_toiMaxRootIters=0;goog.exportSymbol("box2d.b2_toiMaxRootIters",box2d.b2_toiMaxRootIters);box2d.b2TOIInput=function(){this.proxyA=new box2d.b2DistanceProxy;this.proxyB=new box2d.b2DistanceProxy;this.sweepA=new box2d.b2Sweep;this.sweepB=new box2d.b2Sweep};goog.exportSymbol("box2d.b2TOIInput",box2d.b2TOIInput);box2d.b2TOIInput.prototype.proxyA=null;goog.exportProperty(box2d.b2TOIInput.prototype,"proxyA",box2d.b2TOIInput.prototype.proxyA);box2d.b2TOIInput.prototype.proxyB=null;goog.exportProperty(box2d.b2TOIInput.prototype,"proxyB",box2d.b2TOIInput.prototype.proxyB);box2d.b2TOIInput.prototype.sweepA=null;goog.exportProperty(box2d.b2TOIInput.prototype,"sweepA",box2d.b2TOIInput.prototype.sweepA);box2d.b2TOIInput.prototype.sweepB=null;goog.exportProperty(box2d.b2TOIInput.prototype,"sweepB",box2d.b2TOIInput.prototype.sweepB);box2d.b2TOIInput.prototype.tMax=0;goog.exportProperty(box2d.b2TOIInput.prototype,"tMax",box2d.b2TOIInput.prototype.tMax);box2d.b2TOIOutputState={e_unknown:0,e_failed:1,e_overlapped:2,e_touching:3,e_separated:4};goog.exportSymbol("box2d.b2TOIOutputState",box2d.b2TOIOutputState);goog.exportProperty(box2d.b2TOIOutputState,"e_unknown",box2d.b2TOIOutputState.e_unknown);goog.exportProperty(box2d.b2TOIOutputState,"e_failed",box2d.b2TOIOutputState.e_failed);goog.exportProperty(box2d.b2TOIOutputState,"e_overlapped",box2d.b2TOIOutputState.e_overlapped);goog.exportProperty(box2d.b2TOIOutputState,"e_touching",box2d.b2TOIOutputState.e_touching);goog.exportProperty(box2d.b2TOIOutputState,"e_separated",box2d.b2TOIOutputState.e_separated);box2d.b2TOIOutput=function(){};goog.exportSymbol("box2d.b2TOIOutput",box2d.b2TOIOutput);box2d.b2TOIOutput.prototype.state=box2d.b2TOIOutputState.e_unknown;goog.exportProperty(box2d.b2TOIOutput.prototype,"state",box2d.b2TOIOutput.prototype.state);box2d.b2TOIOutput.prototype.t=0;goog.exportProperty(box2d.b2TOIOutput.prototype,"t",box2d.b2TOIOutput.prototype.t);box2d.b2SeparationFunctionType={e_unknown:-1,e_points:0,e_faceA:1,e_faceB:2};goog.exportSymbol("box2d.b2SeparationFunctionType",box2d.b2SeparationFunctionType);goog.exportProperty(box2d.b2SeparationFunctionType,"e_unknown",box2d.b2SeparationFunctionType.e_unknown);goog.exportProperty(box2d.b2SeparationFunctionType,"e_points",box2d.b2SeparationFunctionType.e_points);goog.exportProperty(box2d.b2SeparationFunctionType,"e_faceA",box2d.b2SeparationFunctionType.e_faceA);goog.exportProperty(box2d.b2SeparationFunctionType,"e_faceB",box2d.b2SeparationFunctionType.e_faceB);box2d.b2SeparationFunction=function(){this.m_sweepA=new box2d.b2Sweep;this.m_sweepB=new box2d.b2Sweep;this.m_localPoint=new box2d.b2Vec2;this.m_axis=new box2d.b2Vec2};goog.exportSymbol("box2d.b2SeparationFunction",box2d.b2SeparationFunction);box2d.b2SeparationFunction.prototype.m_proxyA=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_proxyA",box2d.b2SeparationFunction.prototype.m_proxyA);box2d.b2SeparationFunction.prototype.m_proxyB=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_proxyB",box2d.b2SeparationFunction.prototype.m_proxyB);box2d.b2SeparationFunction.prototype.m_sweepA=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_sweepA",box2d.b2SeparationFunction.prototype.m_sweepA);box2d.b2SeparationFunction.prototype.m_sweepB=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_sweepB",box2d.b2SeparationFunction.prototype.m_sweepB);box2d.b2SeparationFunction.prototype.m_type=box2d.b2SeparationFunctionType.e_unknown;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_type",box2d.b2SeparationFunction.prototype.m_type);box2d.b2SeparationFunction.prototype.m_localPoint=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_localPoint",box2d.b2SeparationFunction.prototype.m_localPoint);box2d.b2SeparationFunction.prototype.m_axis=null;goog.exportProperty(box2d.b2SeparationFunction.prototype,"m_axis",box2d.b2SeparationFunction.prototype.m_axis);box2d.b2SeparationFunction.prototype.Initialize=function(j,g,q,m,n,k){this.m_proxyA=g;this.m_proxyB=m;g=j.count;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<g&&3>g);this.m_sweepA.Copy(q);this.m_sweepB.Copy(n);q=box2d.b2TimeOfImpact.s_xfA;n=box2d.b2TimeOfImpact.s_xfB;this.m_sweepA.GetTransform(q,k);this.m_sweepB.GetTransform(n,k);1==g?(this.m_type=box2d.b2SeparationFunctionType.e_points,g=this.m_proxyA.GetVertex(j.indexA[0]),j=this.m_proxyB.GetVertex(j.indexB[0]),q=box2d.b2MulXV(q,g,box2d.b2TimeOfImpact.s_pointA),n=box2d.b2MulXV(n,j,box2d.b2TimeOfImpact.s_pointB),box2d.b2SubVV(n,q,this.m_axis),j=this.m_axis.Normalize()):(j.indexA[0]==j.indexA[1]?(this.m_type=box2d.b2SeparationFunctionType.e_faceB,g=this.m_proxyB.GetVertex(j.indexB[0]),m=this.m_proxyB.GetVertex(j.indexB[1]),box2d.b2CrossVOne(box2d.b2SubVV(m,g,box2d.b2Vec2.s_t0),this.m_axis).SelfNormalize(),k=box2d.b2MulRV(n.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),box2d.b2MidVV(g,m,this.m_localPoint),n=box2d.b2MulXV(n,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),g=this.m_proxyA.GetVertex(j.indexA[0]),q=box2d.b2MulXV(q,g,box2d.b2TimeOfImpact.s_pointA),j=box2d.b2DotVV(box2d.b2SubVV(q,n,box2d.b2Vec2.s_t0),k)):(this.m_type=box2d.b2SeparationFunctionType.e_faceA,g=this.m_proxyA.GetVertex(j.indexA[0]),m=this.m_proxyA.GetVertex(j.indexA[1]),box2d.b2CrossVOne(box2d.b2SubVV(m,g,box2d.b2Vec2.s_t0),this.m_axis).SelfNormalize(),k=box2d.b2MulRV(q.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),box2d.b2MidVV(g,m,this.m_localPoint),q=box2d.b2MulXV(q,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),j=this.m_proxyB.GetVertex(j.indexB[0]),n=box2d.b2MulXV(n,j,box2d.b2TimeOfImpact.s_pointB),j=box2d.b2DotVV(box2d.b2SubVV(n,q,box2d.b2Vec2.s_t0),k)),0>j&&(this.m_axis.SelfNeg(),j=-j));return j};goog.exportProperty(box2d.b2SeparationFunction.prototype,"Initialize",box2d.b2SeparationFunction.prototype.Initialize);box2d.b2SeparationFunction.prototype.FindMinSeparation=function(k,j,u){var q=box2d.b2TimeOfImpact.s_xfA,r=box2d.b2TimeOfImpact.s_xfB;this.m_sweepA.GetTransform(q,u);this.m_sweepB.GetTransform(r,u);switch(this.m_type){case box2d.b2SeparationFunctionType.e_points:var n=box2d.b2MulTRV(q.q,this.m_axis,box2d.b2TimeOfImpact.s_axisA),m=box2d.b2MulTRV(r.q,box2d.b2NegV(this.m_axis,box2d.b2Vec2.s_t0),box2d.b2TimeOfImpact.s_axisB);k[0]=this.m_proxyA.GetSupport(n);j[0]=this.m_proxyB.GetSupport(m);k=this.m_proxyA.GetVertex(k[0]);j=this.m_proxyB.GetVertex(j[0]);q=box2d.b2MulXV(q,k,box2d.b2TimeOfImpact.s_pointA);r=box2d.b2MulXV(r,j,box2d.b2TimeOfImpact.s_pointB);return j=box2d.b2DotVV(box2d.b2SubVV(r,q,box2d.b2Vec2.s_t0),this.m_axis);case box2d.b2SeparationFunctionType.e_faceA:return u=box2d.b2MulRV(q.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),q=box2d.b2MulXV(q,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),m=box2d.b2MulTRV(r.q,box2d.b2NegV(u,box2d.b2Vec2.s_t0),box2d.b2TimeOfImpact.s_axisB),k[0]=-1,j[0]=this.m_proxyB.GetSupport(m),j=this.m_proxyB.GetVertex(j[0]),r=box2d.b2MulXV(r,j,box2d.b2TimeOfImpact.s_pointB),j=box2d.b2DotVV(box2d.b2SubVV(r,q,box2d.b2Vec2.s_t0),u);case box2d.b2SeparationFunctionType.e_faceB:return u=box2d.b2MulRV(r.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),r=box2d.b2MulXV(r,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),n=box2d.b2MulTRV(q.q,box2d.b2NegV(u,box2d.b2Vec2.s_t0),box2d.b2TimeOfImpact.s_axisA),j[0]=-1,k[0]=this.m_proxyA.GetSupport(n),k=this.m_proxyA.GetVertex(k[0]),q=box2d.b2MulXV(q,k,box2d.b2TimeOfImpact.s_pointA),j=box2d.b2DotVV(box2d.b2SubVV(q,r,box2d.b2Vec2.s_t0),u);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),k[0]=-1,j[0]=-1,0}};goog.exportProperty(box2d.b2SeparationFunction.prototype,"FindMinSeparation",box2d.b2SeparationFunction.prototype.FindMinSeparation);box2d.b2SeparationFunction.prototype.Evaluate=function(g,f,m){var j=box2d.b2TimeOfImpact.s_xfA,k=box2d.b2TimeOfImpact.s_xfB;this.m_sweepA.GetTransform(j,m);this.m_sweepB.GetTransform(k,m);switch(this.m_type){case box2d.b2SeparationFunctionType.e_points:return g=this.m_proxyA.GetVertex(g),f=this.m_proxyB.GetVertex(f),j=box2d.b2MulXV(j,g,box2d.b2TimeOfImpact.s_pointA),k=box2d.b2MulXV(k,f,box2d.b2TimeOfImpact.s_pointB),j=box2d.b2DotVV(box2d.b2SubVV(k,j,box2d.b2Vec2.s_t0),this.m_axis);case box2d.b2SeparationFunctionType.e_faceA:return m=box2d.b2MulRV(j.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),j=box2d.b2MulXV(j,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),f=this.m_proxyB.GetVertex(f),k=box2d.b2MulXV(k,f,box2d.b2TimeOfImpact.s_pointB),j=box2d.b2DotVV(box2d.b2SubVV(k,j,box2d.b2Vec2.s_t0),m);case box2d.b2SeparationFunctionType.e_faceB:return m=box2d.b2MulRV(k.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),k=box2d.b2MulXV(k,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),g=this.m_proxyA.GetVertex(g),j=box2d.b2MulXV(j,g,box2d.b2TimeOfImpact.s_pointA),j=box2d.b2DotVV(box2d.b2SubVV(j,k,box2d.b2Vec2.s_t0),m);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0}};goog.exportProperty(box2d.b2SeparationFunction.prototype,"Evaluate",box2d.b2SeparationFunction.prototype.Evaluate);box2d.b2TimeOfImpact=function(ad,ac){var ab=box2d.b2TimeOfImpact.s_timer.Reset();++box2d.b2_toiCalls;ad.state=box2d.b2TOIOutputState.e_unknown;ad.t=ac.tMax;var Z=ac.proxyA,aa=ac.proxyB,Y=box2d.b2TimeOfImpact.s_sweepA.Copy(ac.sweepA),X=box2d.b2TimeOfImpact.s_sweepB.Copy(ac.sweepB);Y.Normalize();X.Normalize();var W=ac.tMax,U=box2d.b2Max(box2d.b2_linearSlop,Z.m_radius+aa.m_radius-3*box2d.b2_linearSlop),V=0.25*box2d.b2_linearSlop;box2d.ENABLE_ASSERTS&&box2d.b2Assert(U>V);var T=0,S=0,R=box2d.b2TimeOfImpact.s_cache;R.count=0;var P=box2d.b2TimeOfImpact.s_distanceInput;P.proxyA=ac.proxyA;P.proxyB=ac.proxyB;for(P.useRadii=!1;;){var N=box2d.b2TimeOfImpact.s_xfA,J=box2d.b2TimeOfImpact.s_xfB;Y.GetTransform(N,T);X.GetTransform(J,T);P.transformA.Copy(N);P.transformB.Copy(J);N=box2d.b2TimeOfImpact.s_distanceOutput;box2d.b2Distance(N,R,P);if(0>=N.distance){ad.state=box2d.b2TOIOutputState.e_overlapped;ad.t=0;break}if(N.distance<U+V){ad.state=box2d.b2TOIOutputState.e_touching;ad.t=T;break}N=box2d.b2TimeOfImpact.s_fcn;N.Initialize(R,Z,Y,aa,X,T);for(var J=!1,L=W,H=0;;){var G=box2d.b2TimeOfImpact.s_indexA,j=box2d.b2TimeOfImpact.s_indexB,K=N.FindMinSeparation(G,j,L);if(K>U+V){ad.state=box2d.b2TOIOutputState.e_separated;ad.t=W;J=!0;break}if(K>U-V){T=L;break}var z=N.Evaluate(G[0],j[0],T);if(z<U-V){ad.state=box2d.b2TOIOutputState.e_failed;ad.t=T;J=!0;break}if(z<=U+V){ad.state=box2d.b2TOIOutputState.e_touching;ad.t=T;J=!0;break}for(var F=0,M=T,Q=L;;){var I=0,I=F&1?M+(U-z)*(Q-M)/(K-z):0.5*(M+Q);++F;++box2d.b2_toiRootIters;var O=N.Evaluate(G[0],j[0],I);if(box2d.b2Abs(O-U)<V){L=I;break}O>U?(M=I,z=O):(Q=I,K=O);if(50==F){break}}box2d.b2_toiMaxRootIters=box2d.b2Max(box2d.b2_toiMaxRootIters,F);++H;if(H==box2d.b2_maxPolygonVertices){break}}++S;++box2d.b2_toiIters;if(J){break}if(20==S){ad.state=box2d.b2TOIOutputState.e_failed;ad.t=T;break}}box2d.b2_toiMaxIters=box2d.b2Max(box2d.b2_toiMaxIters,S);ab=ab.GetMilliseconds();box2d.b2_toiMaxTime=box2d.b2Max(box2d.b2_toiMaxTime,ab);box2d.b2_toiTime+=ab};goog.exportSymbol("box2d.b2TimeOfImpact",box2d.b2TimeOfImpact);box2d.b2TimeOfImpact.s_timer=new box2d.b2Timer;box2d.b2TimeOfImpact.s_cache=new box2d.b2SimplexCache;box2d.b2TimeOfImpact.s_distanceInput=new box2d.b2DistanceInput;box2d.b2TimeOfImpact.s_distanceOutput=new box2d.b2DistanceOutput;box2d.b2TimeOfImpact.s_xfA=new box2d.b2Transform;box2d.b2TimeOfImpact.s_xfB=new box2d.b2Transform;box2d.b2TimeOfImpact.s_indexA=box2d.b2MakeNumberArray(1);box2d.b2TimeOfImpact.s_indexB=box2d.b2MakeNumberArray(1);box2d.b2TimeOfImpact.s_fcn=new box2d.b2SeparationFunction;box2d.b2TimeOfImpact.s_sweepA=new box2d.b2Sweep;box2d.b2TimeOfImpact.s_sweepB=new box2d.b2Sweep;box2d.b2TimeOfImpact.s_pointA=new box2d.b2Vec2;box2d.b2TimeOfImpact.s_pointB=new box2d.b2Vec2;box2d.b2TimeOfImpact.s_normal=new box2d.b2Vec2;box2d.b2TimeOfImpact.s_axisA=new box2d.b2Vec2;box2d.b2TimeOfImpact.s_axisB=new box2d.b2Vec2;box2d.b2MixFriction=function(e,d){return box2d.b2Sqrt(e*d)};goog.exportSymbol("box2d.b2MixFriction",box2d.b2MixFriction);box2d.b2MixRestitution=function(e,d){return e>d?e:d};goog.exportSymbol("box2d.b2MixRestitution",box2d.b2MixRestitution);box2d.b2ContactEdge=function(){};goog.exportSymbol("box2d.b2ContactEdge",box2d.b2ContactEdge);box2d.b2ContactEdge.prototype.other=null;goog.exportProperty(box2d.b2ContactEdge.prototype,"other",box2d.b2ContactEdge.prototype.other);box2d.b2ContactEdge.prototype.contact=null;goog.exportProperty(box2d.b2ContactEdge.prototype,"contact",box2d.b2ContactEdge.prototype.contact);box2d.b2ContactEdge.prototype.prev=null;goog.exportProperty(box2d.b2ContactEdge.prototype,"prev",box2d.b2ContactEdge.prototype.prev);box2d.b2ContactEdge.prototype.next=null;goog.exportProperty(box2d.b2ContactEdge.prototype,"next",box2d.b2ContactEdge.prototype.next);box2d.b2ContactFlag={e_none:0,e_islandFlag:1,e_touchingFlag:2,e_enabledFlag:4,e_filterFlag:8,e_bulletHitFlag:16,e_toiFlag:32};goog.exportProperty(box2d.b2ContactFlag,"e_none",box2d.b2ContactFlag.e_none);goog.exportProperty(box2d.b2ContactFlag,"e_islandFlag",box2d.b2ContactFlag.e_islandFlag);goog.exportProperty(box2d.b2ContactFlag,"e_touchingFlag",box2d.b2ContactFlag.e_touchingFlag);goog.exportProperty(box2d.b2ContactFlag,"e_enabledFlag",box2d.b2ContactFlag.e_enabledFlag);goog.exportProperty(box2d.b2ContactFlag,"e_filterFlag",box2d.b2ContactFlag.e_filterFlag);goog.exportProperty(box2d.b2ContactFlag,"e_bulletHitFlag",box2d.b2ContactFlag.e_bulletHitFlag);goog.exportProperty(box2d.b2ContactFlag,"e_toiFlag",box2d.b2ContactFlag.e_toiFlag);box2d.b2Contact=function(){this.m_nodeA=new box2d.b2ContactEdge;this.m_nodeB=new box2d.b2ContactEdge;this.m_manifold=new box2d.b2Manifold;this.m_oldManifold=new box2d.b2Manifold};goog.exportSymbol("box2d.b2Contact",box2d.b2Contact);box2d.b2Contact.prototype.m_flags=box2d.b2ContactFlag.e_none;goog.exportProperty(box2d.b2Contact.prototype,"m_flags",box2d.b2Contact.prototype.m_flags);box2d.b2Contact.prototype.m_prev=null;goog.exportProperty(box2d.b2Contact.prototype,"m_prev",box2d.b2Contact.prototype.m_prev);box2d.b2Contact.prototype.m_next=null;goog.exportProperty(box2d.b2Contact.prototype,"m_next",box2d.b2Contact.prototype.m_next);box2d.b2Contact.prototype.m_nodeA=null;goog.exportProperty(box2d.b2Contact.prototype,"m_nodeA",box2d.b2Contact.prototype.m_nodeA);box2d.b2Contact.prototype.m_nodeB=null;goog.exportProperty(box2d.b2Contact.prototype,"m_nodeB",box2d.b2Contact.prototype.m_nodeB);box2d.b2Contact.prototype.m_fixtureA=null;goog.exportProperty(box2d.b2Contact.prototype,"m_fixtureA",box2d.b2Contact.prototype.m_fixtureA);box2d.b2Contact.prototype.m_fixtureB=null;goog.exportProperty(box2d.b2Contact.prototype,"m_fixtureB",box2d.b2Contact.prototype.m_fixtureB);box2d.b2Contact.prototype.m_indexA=0;goog.exportProperty(box2d.b2Contact.prototype,"m_indexA",box2d.b2Contact.prototype.m_indexA);box2d.b2Contact.prototype.m_indexB=0;goog.exportProperty(box2d.b2Contact.prototype,"m_indexB",box2d.b2Contact.prototype.m_indexB);box2d.b2Contact.prototype.m_manifold=null;goog.exportProperty(box2d.b2Contact.prototype,"m_manifold",box2d.b2Contact.prototype.m_manifold);box2d.b2Contact.prototype.m_toiCount=0;goog.exportProperty(box2d.b2Contact.prototype,"m_toiCount",box2d.b2Contact.prototype.m_toiCount);box2d.b2Contact.prototype.m_toi=0;goog.exportProperty(box2d.b2Contact.prototype,"m_toi",box2d.b2Contact.prototype.m_toi);box2d.b2Contact.prototype.m_friction=0;goog.exportProperty(box2d.b2Contact.prototype,"m_friction",box2d.b2Contact.prototype.m_friction);box2d.b2Contact.prototype.m_restitution=0;goog.exportProperty(box2d.b2Contact.prototype,"m_restitution",box2d.b2Contact.prototype.m_restitution);box2d.b2Contact.prototype.m_tangentSpeed=0;goog.exportProperty(box2d.b2Contact.prototype,"m_tangentSpeed",box2d.b2Contact.prototype.m_tangentSpeed);box2d.b2Contact.prototype.m_oldManifold=null;goog.exportProperty(box2d.b2Contact.prototype,"m_oldManifold",box2d.b2Contact.prototype.m_oldManifold);box2d.b2Contact.prototype.GetManifold=function(){return this.m_manifold};goog.exportProperty(box2d.b2Contact.prototype,"GetManifold",box2d.b2Contact.prototype.GetManifold);box2d.b2Contact.prototype.GetWorldManifold=function(g){var f=this.m_fixtureA.GetBody(),m=this.m_fixtureB.GetBody(),j=this.m_fixtureA.GetShape(),k=this.m_fixtureB.GetShape();g.Initialize(this.m_manifold,f.GetTransform(),j.m_radius,m.GetTransform(),k.m_radius)};goog.exportProperty(box2d.b2Contact.prototype,"GetWorldManifold",box2d.b2Contact.prototype.GetWorldManifold);box2d.b2Contact.prototype.IsTouching=function(){return(this.m_flags&box2d.b2ContactFlag.e_touchingFlag)==box2d.b2ContactFlag.e_touchingFlag};goog.exportProperty(box2d.b2Contact.prototype,"IsTouching",box2d.b2Contact.prototype.IsTouching);box2d.b2Contact.prototype.SetEnabled=function(b){this.m_flags=b?this.m_flags|box2d.b2ContactFlag.e_enabledFlag:this.m_flags&~box2d.b2ContactFlag.e_enabledFlag};goog.exportProperty(box2d.b2Contact.prototype,"SetEnabled",box2d.b2Contact.prototype.SetEnabled);box2d.b2Contact.prototype.IsEnabled=function(){return(this.m_flags&box2d.b2ContactFlag.e_enabledFlag)==box2d.b2ContactFlag.e_enabledFlag};goog.exportProperty(box2d.b2Contact.prototype,"IsEnabled",box2d.b2Contact.prototype.IsEnabled);box2d.b2Contact.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2Contact.prototype,"GetNext",box2d.b2Contact.prototype.GetNext);box2d.b2Contact.prototype.GetFixtureA=function(){return this.m_fixtureA};goog.exportProperty(box2d.b2Contact.prototype,"GetFixtureA",box2d.b2Contact.prototype.GetFixtureA);box2d.b2Contact.prototype.GetChildIndexA=function(){return this.m_indexA};goog.exportProperty(box2d.b2Contact.prototype,"GetChildIndexA",box2d.b2Contact.prototype.GetChildIndexA);box2d.b2Contact.prototype.GetFixtureB=function(){return this.m_fixtureB};goog.exportProperty(box2d.b2Contact.prototype,"GetFixtureB",box2d.b2Contact.prototype.GetFixtureB);box2d.b2Contact.prototype.GetChildIndexB=function(){return this.m_indexB};goog.exportProperty(box2d.b2Contact.prototype,"GetChildIndexB",box2d.b2Contact.prototype.GetChildIndexB);box2d.b2Contact.prototype.Evaluate=function(e,d,f){};goog.exportProperty(box2d.b2Contact.prototype,"Evaluate",box2d.b2Contact.prototype.Evaluate);box2d.b2Contact.prototype.FlagForFiltering=function(){this.m_flags|=box2d.b2ContactFlag.e_filterFlag};goog.exportProperty(box2d.b2Contact.prototype,"FlagForFiltering",box2d.b2Contact.prototype.FlagForFiltering);box2d.b2Contact.prototype.SetFriction=function(b){this.m_friction=b};goog.exportProperty(box2d.b2Contact.prototype,"SetFriction",box2d.b2Contact.prototype.SetFriction);box2d.b2Contact.prototype.GetFriction=function(){return this.m_friction};goog.exportProperty(box2d.b2Contact.prototype,"GetFriction",box2d.b2Contact.prototype.GetFriction);box2d.b2Contact.prototype.ResetFriction=function(){this.m_friction=box2d.b2MixFriction(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)};goog.exportProperty(box2d.b2Contact.prototype,"ResetFriction",box2d.b2Contact.prototype.ResetFriction);box2d.b2Contact.prototype.SetRestitution=function(b){this.m_restitution=b};goog.exportProperty(box2d.b2Contact.prototype,"SetRestitution",box2d.b2Contact.prototype.SetRestitution);box2d.b2Contact.prototype.GetRestitution=function(){return this.m_restitution};goog.exportProperty(box2d.b2Contact.prototype,"GetRestitution",box2d.b2Contact.prototype.GetRestitution);box2d.b2Contact.prototype.ResetRestitution=function(){this.m_restitution=box2d.b2MixRestitution(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)};goog.exportProperty(box2d.b2Contact.prototype,"ResetRestitution",box2d.b2Contact.prototype.ResetRestitution);box2d.b2Contact.prototype.SetTangentSpeed=function(b){this.m_tangentSpeed=b};goog.exportProperty(box2d.b2Contact.prototype,"SetTangentSpeed",box2d.b2Contact.prototype.SetTangentSpeed);box2d.b2Contact.prototype.GetTangentSpeed=function(){return this.m_tangentSpeed};goog.exportProperty(box2d.b2Contact.prototype,"GetTangentSpeed",box2d.b2Contact.prototype.GetTangentSpeed);box2d.b2Contact.prototype.Reset=function(f,d,j,g){this.m_flags=box2d.b2ContactFlag.e_enabledFlag;this.m_fixtureA=f;this.m_fixtureB=j;this.m_indexA=d;this.m_indexB=g;this.m_manifold.pointCount=0;this.m_next=this.m_prev=null;this.m_nodeA.contact=null;this.m_nodeA.prev=null;this.m_nodeA.next=null;this.m_nodeA.other=null;this.m_nodeB.contact=null;this.m_nodeB.prev=null;this.m_nodeB.next=null;this.m_nodeB.other=null;this.m_toiCount=0;this.m_friction=box2d.b2MixFriction(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction);this.m_restitution=box2d.b2MixRestitution(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)};goog.exportProperty(box2d.b2Contact.prototype,"Reset",box2d.b2Contact.prototype.Reset);box2d.b2Contact.prototype.Update=function(C){var B=this.m_oldManifold;this.m_oldManifold=this.m_manifold;this.m_manifold=B;this.m_flags|=box2d.b2ContactFlag.e_enabledFlag;var A=!1,B=(this.m_flags&box2d.b2ContactFlag.e_touchingFlag)==box2d.b2ContactFlag.e_touchingFlag,y=this.m_fixtureA.IsSensor(),z=this.m_fixtureB.IsSensor(),y=y||z,z=this.m_fixtureA.GetBody(),v=this.m_fixtureB.GetBody(),A=z.GetTransform(),u=v.GetTransform();if(y){z=this.m_fixtureA.GetShape(),v=this.m_fixtureB.GetShape(),A=box2d.b2TestOverlapShape(z,this.m_indexA,v,this.m_indexB,A,u),this.m_manifold.pointCount=0}else{this.Evaluate(this.m_manifold,A,u);A=0<this.m_manifold.pointCount;for(u=0;u<this.m_manifold.pointCount;++u){var r=this.m_manifold.points[u];r.normalImpulse=0;r.tangentImpulse=0;for(var n=r.id,q=0;q<this.m_oldManifold.pointCount;++q){var j=this.m_oldManifold.points[q];if(j.id.key==n.key){r.normalImpulse=j.normalImpulse;r.tangentImpulse=j.tangentImpulse;break}}}A!=B&&(z.SetAwake(!0),v.SetAwake(!0))}this.m_flags=A?this.m_flags|box2d.b2ContactFlag.e_touchingFlag:this.m_flags&~box2d.b2ContactFlag.e_touchingFlag;!1==B&&(!0==A&&C)&&C.BeginContact(this);!0==B&&(!1==A&&C)&&C.EndContact(this);!1==y&&(A&&C)&&C.PreSolve(this,this.m_oldManifold)};goog.exportProperty(box2d.b2Contact.prototype,"Update",box2d.b2Contact.prototype.Update);box2d.b2Contact.prototype.ComputeTOI=function(f,d){var j=box2d.b2Contact.prototype.ComputeTOI.s_input;j.proxyA.SetShape(this.m_fixtureA.GetShape(),this.m_indexA);j.proxyB.SetShape(this.m_fixtureB.GetShape(),this.m_indexB);j.sweepA.Copy(f);j.sweepB.Copy(d);j.tMax=box2d.b2_linearSlop;var g=box2d.b2Contact.prototype.ComputeTOI.s_output;box2d.b2TimeOfImpact(g,j);return g.t};goog.exportProperty(box2d.b2Contact.prototype,"ComputeTOI",box2d.b2Contact.prototype.ComputeTOI);box2d.b2Contact.prototype.ComputeTOI.s_input=new box2d.b2TOIInput;box2d.b2Contact.prototype.ComputeTOI.s_output=new box2d.b2TOIOutput;box2d.b2PolygonAndCircleContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2PolygonAndCircleContact,box2d.b2Contact);goog.exportSymbol("box2d.b2PolygonAndCircleContact",box2d.b2PolygonAndCircleContact);box2d.b2PolygonAndCircleContact.Create=function(b){return new box2d.b2PolygonAndCircleContact};goog.exportProperty(box2d.b2PolygonAndCircleContact,"Create",box2d.b2PolygonAndCircleContact.Create);box2d.b2PolygonAndCircleContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2PolygonAndCircleContact,"Destroy",box2d.b2PolygonAndCircleContact.Destroy);box2d.b2PolygonAndCircleContact.prototype.Reset=function(f,d,j,g){box2d.b2PolygonAndCircleContact.superClass_.Reset.call(this,f,d,j,g);box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.GetType()==box2d.b2ShapeType.e_polygonShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(j.GetType()==box2d.b2ShapeType.e_circleShape)};goog.exportProperty(box2d.b2PolygonAndCircleContact.prototype,"Reset",box2d.b2PolygonAndCircleContact.prototype.Reset);box2d.b2PolygonAndCircleContact.prototype.Evaluate=function(g,f,m){var j=this.m_fixtureA.GetShape(),k=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(j instanceof box2d.b2PolygonShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(k instanceof box2d.b2CircleShape);box2d.b2CollidePolygonAndCircle(g,j instanceof box2d.b2PolygonShape?j:null,f,k instanceof box2d.b2CircleShape?k:null,m)};goog.exportProperty(box2d.b2PolygonAndCircleContact.prototype,"Evaluate",box2d.b2PolygonAndCircleContact.prototype.Evaluate);box2d.b2EdgeAndPolygonContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2EdgeAndPolygonContact,box2d.b2Contact);goog.exportSymbol("box2d.b2EdgeAndPolygonContact",box2d.b2EdgeAndPolygonContact);box2d.b2EdgeAndPolygonContact.Create=function(b){return new box2d.b2EdgeAndPolygonContact};goog.exportProperty(box2d.b2EdgeAndPolygonContact,"Create",box2d.b2EdgeAndPolygonContact.Create);box2d.b2EdgeAndPolygonContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2EdgeAndPolygonContact,"Destroy",box2d.b2EdgeAndPolygonContact.Destroy);box2d.b2EdgeAndPolygonContact.prototype.Reset=function(f,d,j,g){box2d.b2EdgeAndPolygonContact.superClass_.Reset.call(this,f,d,j,g);box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.GetType()==box2d.b2ShapeType.e_edgeShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(j.GetType()==box2d.b2ShapeType.e_polygonShape)};goog.exportProperty(box2d.b2EdgeAndPolygonContact.prototype,"Reset",box2d.b2EdgeAndPolygonContact.prototype.Reset);box2d.b2EdgeAndPolygonContact.prototype.Evaluate=function(g,f,m){var j=this.m_fixtureA.GetShape(),k=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(j instanceof box2d.b2EdgeShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(k instanceof box2d.b2PolygonShape);box2d.b2CollideEdgeAndPolygon(g,j instanceof box2d.b2EdgeShape?j:null,f,k instanceof box2d.b2PolygonShape?k:null,m)};goog.exportProperty(box2d.b2EdgeAndPolygonContact.prototype,"Evaluate",box2d.b2EdgeAndPolygonContact.prototype.Evaluate);box2d.b2MassData=function(){this.center=new box2d.b2Vec2(0,0)};goog.exportSymbol("box2d.b2MassData",box2d.b2MassData);box2d.b2MassData.prototype.mass=0;goog.exportProperty(box2d.b2MassData.prototype,"mass",box2d.b2MassData.prototype.mass);box2d.b2MassData.prototype.center=null;goog.exportProperty(box2d.b2MassData.prototype,"center",box2d.b2MassData.prototype.center);box2d.b2MassData.prototype.I=0;goog.exportProperty(box2d.b2MassData.prototype,"I",box2d.b2MassData.prototype.I);box2d.b2ShapeType={e_unknown:-1,e_circleShape:0,e_edgeShape:1,e_polygonShape:2,e_chainShape:3,e_shapeTypeCount:4};goog.exportSymbol("box2d.b2ShapeType",box2d.b2ShapeType);goog.exportProperty(box2d.b2ShapeType,"e_unknown",box2d.b2ShapeType.e_unknown);goog.exportProperty(box2d.b2ShapeType,"e_circleShape",box2d.b2ShapeType.e_circleShape);goog.exportProperty(box2d.b2ShapeType,"e_edgeShape",box2d.b2ShapeType.e_edgeShape);goog.exportProperty(box2d.b2ShapeType,"e_polygonShape",box2d.b2ShapeType.e_polygonShape);goog.exportProperty(box2d.b2ShapeType,"e_chainShape",box2d.b2ShapeType.e_chainShape);goog.exportProperty(box2d.b2ShapeType,"e_shapeTypeCount",box2d.b2ShapeType.e_shapeTypeCount);box2d.b2Shape=function(e,d){this.m_type=e;this.m_radius=d};goog.exportSymbol("box2d.b2Shape",box2d.b2Shape);box2d.b2Shape.prototype.m_type=box2d.b2ShapeType.e_unknown;goog.exportProperty(box2d.b2Shape.prototype,"m_type",box2d.b2Shape.prototype.m_type);box2d.b2Shape.prototype.m_radius=0;goog.exportProperty(box2d.b2Shape.prototype,"m_radius",box2d.b2Shape.prototype.m_radius);box2d.b2Shape.prototype.Clone=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);return null};goog.exportProperty(box2d.b2Shape.prototype,"Clone",box2d.b2Shape.prototype.Clone);box2d.b2Shape.prototype.Copy=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_type==b.m_type);this.m_radius=b.m_radius;return this};goog.exportProperty(box2d.b2Shape.prototype,"Copy",box2d.b2Shape.prototype.Copy);box2d.b2Shape.prototype.GetType=function(){return this.m_type};goog.exportProperty(box2d.b2Shape.prototype,"GetType",box2d.b2Shape.prototype.GetType);box2d.b2Shape.prototype.GetChildCount=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual");return 0};goog.exportProperty(box2d.b2Shape.prototype,"GetChildCount",box2d.b2Shape.prototype.GetChildCount);box2d.b2Shape.prototype.TestPoint=function(e,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual");return !1};goog.exportProperty(box2d.b2Shape.prototype,"TestPoint",box2d.b2Shape.prototype.TestPoint);box2d.b2Shape.prototype.RayCast=function(f,d,j,g){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual");return !1};goog.exportProperty(box2d.b2Shape.prototype,"RayCast",box2d.b2Shape.prototype.RayCast);box2d.b2Shape.prototype.ComputeAABB=function(e,d,f){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")};goog.exportProperty(box2d.b2Shape.prototype,"ComputeAABB",box2d.b2Shape.prototype.ComputeAABB);box2d.b2Shape.prototype.ComputeMass=function(e,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")};goog.exportProperty(box2d.b2Shape.prototype,"ComputeMass",box2d.b2Shape.prototype.ComputeMass);box2d.b2Shape.prototype.SetupDistanceProxy=function(e,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")};box2d.b2Shape.prototype.ComputeSubmergedArea=function(f,d,j,g){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual");return 0};goog.exportProperty(box2d.b2Shape.prototype,"ComputeSubmergedArea",box2d.b2Shape.prototype.ComputeSubmergedArea);box2d.b2Shape.prototype.Dump=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")};goog.exportProperty(box2d.b2Shape.prototype,"Dump",box2d.b2Shape.prototype.Dump);box2d.b2PolygonShape=function(){box2d.b2Shape.call(this,box2d.b2ShapeType.e_polygonShape,box2d.b2_polygonRadius);this.m_centroid=new box2d.b2Vec2(0,0);this.m_vertices=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices);this.m_normals=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices)};goog.inherits(box2d.b2PolygonShape,box2d.b2Shape);goog.exportSymbol("box2d.b2PolygonShape",box2d.b2PolygonShape);box2d.b2PolygonShape.prototype.m_centroid=null;goog.exportProperty(box2d.b2PolygonShape.prototype,"m_centroid",box2d.b2PolygonShape.prototype.m_centroid);box2d.b2PolygonShape.prototype.m_vertices=null;goog.exportProperty(box2d.b2PolygonShape.prototype,"m_vertices",box2d.b2PolygonShape.prototype.m_vertices);box2d.b2PolygonShape.prototype.m_normals=null;goog.exportProperty(box2d.b2PolygonShape.prototype,"m_normals",box2d.b2PolygonShape.prototype.m_normals);box2d.b2PolygonShape.prototype.m_count=0;goog.exportProperty(box2d.b2PolygonShape.prototype,"m_count",box2d.b2PolygonShape.prototype.m_count);box2d.b2PolygonShape.prototype.Clone=function(){return(new box2d.b2PolygonShape).Copy(this)};goog.exportProperty(box2d.b2PolygonShape.prototype,"Clone",box2d.b2PolygonShape.prototype.Clone);box2d.b2PolygonShape.prototype.Copy=function(e){box2d.b2PolygonShape.superClass_.Copy.call(this,e);box2d.ENABLE_ASSERTS&&box2d.b2Assert(e instanceof box2d.b2PolygonShape);this.m_centroid.Copy(e.m_centroid);this.m_count=e.m_count;for(var d=0,f=this.m_count;d<f;++d){this.m_vertices[d].Copy(e.m_vertices[d]),this.m_normals[d].Copy(e.m_normals[d])}return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"Copy",box2d.b2PolygonShape.prototype.Copy);box2d.b2PolygonShape.prototype.SetAsBox=function(e,d){this.m_count=4;this.m_vertices[0].SetXY(-e,-d);this.m_vertices[1].SetXY(e,-d);this.m_vertices[2].SetXY(e,d);this.m_vertices[3].SetXY(-e,d);this.m_normals[0].SetXY(0,-1);this.m_normals[1].SetXY(1,0);this.m_normals[2].SetXY(0,1);this.m_normals[3].SetXY(-1,0);this.m_centroid.SetZero();return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"SetAsBox",box2d.b2PolygonShape.prototype.SetAsBox);box2d.b2PolygonShape.prototype.SetAsOrientedBox=function(f,d,j,g){this.m_count=4;this.m_vertices[0].SetXY(-f,-d);this.m_vertices[1].SetXY(f,-d);this.m_vertices[2].SetXY(f,d);this.m_vertices[3].SetXY(-f,d);this.m_normals[0].SetXY(0,-1);this.m_normals[1].SetXY(1,0);this.m_normals[2].SetXY(0,1);this.m_normals[3].SetXY(-1,0);this.m_centroid.Copy(j);f=new box2d.b2Transform;f.SetPosition(j);f.SetRotationAngleRadians(g);j=0;for(g=this.m_count;j<g;++j){box2d.b2MulXV(f,this.m_vertices[j],this.m_vertices[j]),box2d.b2MulRV(f.q,this.m_normals[j],this.m_normals[j])}return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"SetAsOrientedBox",box2d.b2PolygonShape.prototype.SetAsOrientedBox);box2d.b2PolygonShape.prototype.Set=function(F,E){void 0===E&&(E=F.length);box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=E&&E<=box2d.b2_maxPolygonVertices);if(3>E){return this.SetAsBox(1,1)}for(var D=box2d.b2Min(E,box2d.b2_maxPolygonVertices),B=box2d.b2PolygonShape.prototype.Set.s_ps,C=0;C<D;++C){B[C].Copy(F[C])}for(var A=0,z=B[0].x,C=1;C<E;++C){var y=B[C].x;if(y>z||y==z&&B[C].y<B[A].y){A=C,z=y}}y=box2d.b2PolygonShape.prototype.Set.s_hull;z=0;for(C=A;;){y[z]=C;for(var u=0,v=1;v<D;++v){if(u==C){u=v}else{var r=box2d.b2SubVV(B[u],B[y[z]],box2d.b2PolygonShape.prototype.Set.s_r),q=box2d.b2SubVV(B[v],B[y[z]],box2d.b2PolygonShape.prototype.Set.s_v),j=box2d.b2CrossVV(r,q);0>j&&(u=v);0==j&&q.GetLengthSquared()>r.GetLengthSquared()&&(u=v)}}++z;C=u;if(u==A){break}}this.m_count=z;for(C=0;C<z;++C){this.m_vertices[C].Copy(B[y[C]])}C=0;for(D=z;C<D;++C){B=box2d.b2SubVV(this.m_vertices[(C+1)%D],this.m_vertices[C],box2d.b2Vec2.s_t0),box2d.ENABLE_ASSERTS&&box2d.b2Assert(B.GetLengthSquared()>box2d.b2_epsilon_sq),box2d.b2CrossVOne(B,this.m_normals[C]).SelfNormalize()}box2d.b2PolygonShape.ComputeCentroid(this.m_vertices,z,this.m_centroid);return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"Set",box2d.b2PolygonShape.prototype.Set);box2d.b2PolygonShape.prototype.Set.s_ps=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices);box2d.b2PolygonShape.prototype.Set.s_hull=box2d.b2MakeNumberArray(box2d.b2_maxPolygonVertices);box2d.b2PolygonShape.prototype.Set.s_r=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.Set.s_v=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.SetAsVector=function(e,d){this.Set(e,d);return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"SetAsVector",box2d.b2PolygonShape.prototype.SetAsVector);box2d.b2PolygonShape.prototype.SetAsArray=function(e,d){this.Set(e,d);return this};goog.exportProperty(box2d.b2PolygonShape.prototype,"SetAsArray",box2d.b2PolygonShape.prototype.SetAsArray);box2d.b2PolygonShape.prototype.GetChildCount=function(){return 1};goog.exportProperty(box2d.b2PolygonShape.prototype,"GetChildCount",box2d.b2PolygonShape.prototype.GetChildCount);box2d.b2PolygonShape.prototype.TestPoint=function(g,f){for(var m=box2d.b2MulTXV(g,f,box2d.b2PolygonShape.prototype.TestPoint.s_pLocal),j=0,k=this.m_count;j<k;++j){if(0<box2d.b2DotVV(this.m_normals[j],box2d.b2SubVV(m,this.m_vertices[j],box2d.b2Vec2.s_t0))){return !1}}return !0};goog.exportProperty(box2d.b2PolygonShape.prototype,"TestPoint",box2d.b2PolygonShape.prototype.TestPoint);box2d.b2PolygonShape.prototype.TestPoint.s_pLocal=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.RayCast=function(E,D,C,A){A=box2d.b2MulTXV(C,D.p1,box2d.b2PolygonShape.prototype.RayCast.s_p1);for(var B=box2d.b2MulTXV(C,D.p2,box2d.b2PolygonShape.prototype.RayCast.s_p2),B=box2d.b2SubVV(B,A,box2d.b2PolygonShape.prototype.RayCast.s_d),z=0,y=D.maxFraction,v=-1,r=0,u=this.m_count;r<u;++r){var q=box2d.b2DotVV(this.m_normals[r],box2d.b2SubVV(this.m_vertices[r],A,box2d.b2Vec2.s_t0)),j=box2d.b2DotVV(this.m_normals[r],B);if(0==j){if(0>q){return !1}}else{0>j&&q<z*j?(z=q/j,v=r):0<j&&q<y*j&&(y=q/j)}if(y<z){return !1}}box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=z&&z<=D.maxFraction);return 0<=v?(E.fraction=z,box2d.b2MulRV(C.q,this.m_normals[v],E.normal),!0):!1};goog.exportProperty(box2d.b2PolygonShape.prototype,"RayCast",box2d.b2PolygonShape.prototype.RayCast);box2d.b2PolygonShape.prototype.RayCast.s_p1=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.RayCast.s_p2=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.RayCast.s_d=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeAABB=function(j,g,q){q=box2d.b2MulXV(g,this.m_vertices[0],j.lowerBound);j=j.upperBound.Copy(q);for(var m=0,n=this.m_count;m<n;++m){var k=box2d.b2MulXV(g,this.m_vertices[m],box2d.b2PolygonShape.prototype.ComputeAABB.s_v);box2d.b2MinV(k,q,q);box2d.b2MaxV(k,j,j)}g=this.m_radius;q.SelfSubXY(g,g);j.SelfAddXY(g,g)};goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeAABB",box2d.b2PolygonShape.prototype.ComputeAABB);box2d.b2PolygonShape.prototype.ComputeAABB.s_v=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeMass=function(H,G){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=this.m_count);for(var F=box2d.b2PolygonShape.prototype.ComputeMass.s_center.SetZero(),D=0,E=0,C=box2d.b2PolygonShape.prototype.ComputeMass.s_s.SetZero(),B=0,A=this.m_count;B<A;++B){C.SelfAdd(this.m_vertices[B])}C.SelfMul(1/this.m_count);for(var y=1/3,B=0,A=this.m_count;B<A;++B){var z=box2d.b2SubVV(this.m_vertices[B],C,box2d.b2PolygonShape.prototype.ComputeMass.s_e1),v=box2d.b2SubVV(this.m_vertices[(B+1)%A],C,box2d.b2PolygonShape.prototype.ComputeMass.s_e2),u=box2d.b2CrossVV(z,v),r=0.5*u,D=D+r;F.SelfAdd(box2d.b2MulSV(r*y,box2d.b2AddVV(z,v,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1));var r=z.x,z=z.y,j=v.x,v=v.y,E=E+0.25*y*u*(r*r+j*r+j*j+(z*z+v*z+v*v))}H.mass=G*D;box2d.ENABLE_ASSERTS&&box2d.b2Assert(D>box2d.b2_epsilon);F.SelfMul(1/D);box2d.b2AddVV(F,C,H.center);H.I=G*E;H.I+=H.mass*(box2d.b2DotVV(H.center,H.center)-box2d.b2DotVV(F,F))};goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeMass",box2d.b2PolygonShape.prototype.ComputeMass);box2d.b2PolygonShape.prototype.ComputeMass.s_center=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeMass.s_s=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeMass.s_e1=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeMass.s_e2=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.Validate=function(){for(var k=0;k<this.m_count;++k){for(var j=k,u=(k+1)%this.m_count,q=this.m_vertices[j],r=box2d.b2SubVV(this.m_vertices[u],q,box2d.b2PolygonShape.prototype.Validate.s_e),n=0;n<this.m_count;++n){if(n!=j&&n!=u){var m=box2d.b2SubVV(this.m_vertices[n],q,box2d.b2PolygonShape.prototype.Validate.s_v);if(0>box2d.b2CrossVV(r,m)){return !1}}}}return !0};goog.exportProperty(box2d.b2PolygonShape.prototype,"Validate",box2d.b2PolygonShape.prototype.Validate);box2d.b2PolygonShape.prototype.Validate.s_e=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.Validate.s_v=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.SetupDistanceProxy=function(e,d){e.m_vertices=this.m_vertices;e.m_count=this.m_count;e.m_radius=this.m_radius};box2d.b2PolygonShape.prototype.ComputeSubmergedArea=function(E,D,C,A){var B=box2d.b2MulTRV(C.q,E,box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_normalL),z=D-box2d.b2DotVV(E,C.p),y=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_depths,v=0,r=-1;D=-1;var u=!1;E=0;for(var q=this.m_count;E<q;++E){y[E]=box2d.b2DotVV(B,this.m_vertices[E])-z;var j=y[E]<-box2d.b2_epsilon;0<E&&(j?u||(r=E-1,v++):u&&(D=E-1,v++));u=j}switch(v){case 0:return u?(E=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_md,this.ComputeMass(E,1),box2d.b2MulXV(C,E.center,A),E.mass):0;case 1:-1==r?r=this.m_count-1:D=this.m_count-1}E=(r+1)%this.m_count;B=(D+1)%this.m_count;z=(0-y[r])/(y[E]-y[r]);y=(0-y[D])/(y[B]-y[D]);r=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_intoVec.SetXY(this.m_vertices[r].x*(1-z)+this.m_vertices[E].x*z,this.m_vertices[r].y*(1-z)+this.m_vertices[E].y*z);D=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_outoVec.SetXY(this.m_vertices[D].x*(1-y)+this.m_vertices[B].x*y,this.m_vertices[D].y*(1-y)+this.m_vertices[B].y*y);y=0;z=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_center.SetZero();v=this.m_vertices[E];for(u=null;E!=B;){E=(E+1)%this.m_count,u=E==B?D:this.m_vertices[E],q=0.5*((v.x-r.x)*(u.y-r.y)-(v.y-r.y)*(u.x-r.x)),y+=q,z.x+=q*(r.x+v.x+u.x)/3,z.y+=q*(r.y+v.y+u.y)/3,v=u}z.SelfMul(1/y);box2d.b2MulXV(C,z,A);return y};goog.exportProperty(box2d.b2PolygonShape.prototype,"ComputeSubmergedArea",box2d.b2PolygonShape.prototype.ComputeSubmergedArea);box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_normalL=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_depths=box2d.b2MakeNumberArray(box2d.b2_maxPolygonVertices);box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_md=new box2d.b2MassData;box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_intoVec=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_outoVec=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_center=new box2d.b2Vec2;box2d.b2PolygonShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2PolygonShape*/ var shape = new box2d.b2PolygonShape();\n");box2d.b2Log("    /*box2d.b2Vec2[]*/ var vs = box2d.b2Vec2.MakeArray(%d);\n",box2d.b2_maxPolygonVertices);for(var b=0;b<this.m_count;++b){box2d.b2Log("    vs[%d].SetXY(%.15f, %.15f);\n",b,this.m_vertices[b].x,this.m_vertices[b].y)}box2d.b2Log("    shape.Set(vs, %d);\n",this.m_count)};goog.exportProperty(box2d.b2PolygonShape.prototype,"Dump",box2d.b2PolygonShape.prototype.Dump);box2d.b2PolygonShape.ComputeCentroid=function(E,D,C){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=D);C.SetZero();for(var A=0,B=box2d.b2PolygonShape.ComputeCentroid.s_pRef.SetZero(),z=1/3,y=0;y<D;++y){var v=B,r=E[y],u=E[(y+1)%D],q=box2d.b2SubVV(r,v,box2d.b2PolygonShape.ComputeCentroid.s_e1),j=box2d.b2SubVV(u,v,box2d.b2PolygonShape.ComputeCentroid.s_e2),q=0.5*box2d.b2CrossVV(q,j),A=A+q;C.x+=q*z*(v.x+r.x+u.x);C.y+=q*z*(v.y+r.y+u.y)}box2d.ENABLE_ASSERTS&&box2d.b2Assert(A>box2d.b2_epsilon);C.SelfMul(1/A);return C};goog.exportProperty(box2d.b2PolygonShape,"ComputeCentroid",box2d.b2PolygonShape.ComputeCentroid);box2d.b2PolygonShape.ComputeCentroid.s_pRef=new box2d.b2Vec2;box2d.b2PolygonShape.ComputeCentroid.s_e1=new box2d.b2Vec2;box2d.b2PolygonShape.ComputeCentroid.s_e2=new box2d.b2Vec2;box2d.b2CollideEdge={};box2d.b2CollideEdgeAndCircle=function(E,D,C,A,B){E.pointCount=0;C=box2d.b2MulTXV(C,box2d.b2MulXV(B,A.m_p,box2d.b2Vec2.s_t0),box2d.b2CollideEdgeAndCircle.s_Q);var z=D.m_vertex1,y=D.m_vertex2,v=box2d.b2SubVV(y,z,box2d.b2CollideEdgeAndCircle.s_e),r=box2d.b2DotVV(v,box2d.b2SubVV(y,C,box2d.b2Vec2.s_t0)),u=box2d.b2DotVV(v,box2d.b2SubVV(C,z,box2d.b2Vec2.s_t0)),q=D.m_radius+A.m_radius;B=box2d.b2CollideEdgeAndCircle.s_id;B.cf.indexB=0;B.cf.typeB=box2d.b2ContactFeatureType.e_vertex;if(0>=u){var j=z,r=box2d.b2SubVV(C,j,box2d.b2CollideEdgeAndCircle.s_d),r=box2d.b2DotVV(r,r);if(!(r>q*q)){if(D.m_hasVertex0&&(D=box2d.b2SubVV(z,D.m_vertex0,box2d.b2CollideEdgeAndCircle.s_e1),0<box2d.b2DotVV(D,box2d.b2SubVV(z,C,box2d.b2Vec2.s_t0)))){return}B.cf.indexA=0;B.cf.typeA=box2d.b2ContactFeatureType.e_vertex;E.pointCount=1;E.type=box2d.b2ManifoldType.e_circles;E.localNormal.SetZero();E.localPoint.Copy(j);E.points[0].id.Copy(B);E.points[0].localPoint.Copy(A.m_p)}}else{if(0>=r){if(j=y,r=box2d.b2SubVV(C,j,box2d.b2CollideEdgeAndCircle.s_d),r=box2d.b2DotVV(r,r),!(r>q*q)){if(D.m_hasVertex3&&(z=box2d.b2SubVV(D.m_vertex3,y,box2d.b2CollideEdgeAndCircle.s_e2),0<box2d.b2DotVV(z,box2d.b2SubVV(C,y,box2d.b2Vec2.s_t0)))){return}B.cf.indexA=1;B.cf.typeA=box2d.b2ContactFeatureType.e_vertex;E.pointCount=1;E.type=box2d.b2ManifoldType.e_circles;E.localNormal.SetZero();E.localPoint.Copy(j);E.points[0].id.Copy(B);E.points[0].localPoint.Copy(A.m_p)}}else{D=box2d.b2DotVV(v,v),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<D),j=box2d.b2CollideEdgeAndCircle.s_P,j.x=1/D*(r*z.x+u*y.x),j.y=1/D*(r*z.y+u*y.y),r=box2d.b2SubVV(C,j,box2d.b2CollideEdgeAndCircle.s_d),r=box2d.b2DotVV(r,r),r>q*q||(j=box2d.b2CollideEdgeAndCircle.s_n.SetXY(-v.y,v.x),0>box2d.b2DotVV(j,box2d.b2SubVV(C,z,box2d.b2Vec2.s_t0))&&j.SetXY(-j.x,-j.y),j.Normalize(),B.cf.indexA=0,B.cf.typeA=box2d.b2ContactFeatureType.e_face,E.pointCount=1,E.type=box2d.b2ManifoldType.e_faceA,E.localNormal.Copy(j),E.localPoint.Copy(z),E.points[0].id.Copy(B),E.points[0].localPoint.Copy(A.m_p))}}};goog.exportSymbol("box2d.b2CollideEdgeAndCircle",box2d.b2CollideEdgeAndCircle);box2d.b2CollideEdgeAndCircle.s_Q=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_e=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_d=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_e1=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_e2=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_P=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_n=new box2d.b2Vec2;box2d.b2CollideEdgeAndCircle.s_id=new box2d.b2ContactID;box2d.b2EPAxisType={e_unknown:0,e_edgeA:1,e_edgeB:2};goog.exportSymbol("box2d.b2EPAxisType",box2d.b2EPAxisType);goog.exportProperty(box2d.b2EPAxisType,"e_unknown",box2d.b2EPAxisType.e_unknown);goog.exportProperty(box2d.b2EPAxisType,"e_edgeA",box2d.b2EPAxisType.e_edgeA);goog.exportProperty(box2d.b2EPAxisType,"e_edgeB",box2d.b2EPAxisType.e_edgeB);box2d.b2EPAxis=function(){};goog.exportSymbol("box2d.b2EPAxis",box2d.b2EPAxis);box2d.b2EPAxis.prototype.type=box2d.b2EPAxisType.e_unknown;goog.exportProperty(box2d.b2EPAxis.prototype,"type",box2d.b2EPAxis.prototype.type);box2d.b2EPAxis.prototype.index=0;goog.exportProperty(box2d.b2EPAxis.prototype,"index",box2d.b2EPAxis.prototype.index);box2d.b2EPAxis.prototype.separation=0;goog.exportProperty(box2d.b2EPAxis.prototype,"separation",box2d.b2EPAxis.prototype.separation);box2d.b2TempPolygon=function(){this.vertices=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices);this.normals=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices);this.count=0};goog.exportSymbol("box2d.b2TempPolygon",box2d.b2TempPolygon);box2d.b2TempPolygon.prototype.vertices=null;goog.exportProperty(box2d.b2TempPolygon.prototype,"vertices",box2d.b2TempPolygon.prototype.vertices);box2d.b2TempPolygon.prototype.normals=null;goog.exportProperty(box2d.b2TempPolygon.prototype,"normals",box2d.b2TempPolygon.prototype.normals);box2d.b2TempPolygon.prototype.count=0;goog.exportProperty(box2d.b2TempPolygon.prototype,"count",box2d.b2TempPolygon.prototype.count);box2d.b2ReferenceFace=function(){this.i2=this.i1=0;this.v1=new box2d.b2Vec2;this.v2=new box2d.b2Vec2;this.normal=new box2d.b2Vec2;this.sideNormal1=new box2d.b2Vec2;this.sideOffset1=0;this.sideNormal2=new box2d.b2Vec2;this.sideOffset2=0};goog.exportSymbol("box2d.b2ReferenceFace",box2d.b2ReferenceFace);box2d.b2ReferenceFace.prototype.i1=0;goog.exportProperty(box2d.b2ReferenceFace.prototype,"i1",box2d.b2ReferenceFace.prototype.i1);box2d.b2ReferenceFace.prototype.i2=0;goog.exportProperty(box2d.b2ReferenceFace.prototype,"i2",box2d.b2ReferenceFace.prototype.i2);box2d.b2ReferenceFace.prototype.v1=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"v1",box2d.b2ReferenceFace.prototype.v1);box2d.b2ReferenceFace.prototype.v2=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"v2",box2d.b2ReferenceFace.prototype.v2);box2d.b2ReferenceFace.prototype.normal=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"normal",box2d.b2ReferenceFace.prototype.normal);box2d.b2ReferenceFace.prototype.sideNormal1=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideNormal1",box2d.b2ReferenceFace.prototype.sideNormal1);box2d.b2ReferenceFace.prototype.sideOffset1=0;goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideOffset1",box2d.b2ReferenceFace.prototype.sideOffset1);box2d.b2ReferenceFace.prototype.sideNormal2=null;goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideNormal2",box2d.b2ReferenceFace.prototype.sideNormal2);box2d.b2ReferenceFace.prototype.sideOffset2=0;goog.exportProperty(box2d.b2ReferenceFace.prototype,"sideOffset2",box2d.b2ReferenceFace.prototype.sideOffset2);box2d.b2EPColliderVertexType={e_isolated:0,e_concave:1,e_convex:2};goog.exportSymbol("box2d.b2EPColliderVertexType",box2d.b2EPColliderVertexType);goog.exportProperty(box2d.b2EPColliderVertexType,"e_isolated",box2d.b2EPColliderVertexType.e_isolated);goog.exportProperty(box2d.b2EPColliderVertexType,"e_concave",box2d.b2EPColliderVertexType.e_concave);goog.exportProperty(box2d.b2EPColliderVertexType,"e_convex",box2d.b2EPColliderVertexType.e_convex);box2d.b2EPCollider=function(){this.m_polygonB=new box2d.b2TempPolygon;this.m_xf=new box2d.b2Transform;this.m_centroidB=new box2d.b2Vec2;this.m_v0=new box2d.b2Vec2;this.m_v1=new box2d.b2Vec2;this.m_v2=new box2d.b2Vec2;this.m_v3=new box2d.b2Vec2;this.m_normal0=new box2d.b2Vec2;this.m_normal1=new box2d.b2Vec2;this.m_normal2=new box2d.b2Vec2;this.m_normal=new box2d.b2Vec2;this.m_type2=this.m_type1=box2d.b2EPColliderVertexType.e_isolated;this.m_lowerLimit=new box2d.b2Vec2;this.m_upperLimit=new box2d.b2Vec2;this.m_radius=0;this.m_front=!1};goog.exportSymbol("box2d.b2EPCollider",box2d.b2EPCollider);box2d.b2EPCollider.prototype.m_polygonB=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_polygonB",box2d.b2EPCollider.prototype.m_polygonB);box2d.b2EPCollider.prototype.m_xf=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_xf",box2d.b2EPCollider.prototype.m_xf);box2d.b2EPCollider.prototype.m_centroidB=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_centroidB",box2d.b2EPCollider.prototype.m_centroidB);box2d.b2EPCollider.prototype.m_v0=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_v0",box2d.b2EPCollider.prototype.m_v0);box2d.b2EPCollider.prototype.m_v1=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_v1",box2d.b2EPCollider.prototype.m_v1);box2d.b2EPCollider.prototype.m_v2=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_v2",box2d.b2EPCollider.prototype.m_v2);box2d.b2EPCollider.prototype.m_v3=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_v3",box2d.b2EPCollider.prototype.m_v3);box2d.b2EPCollider.prototype.m_normal0=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal0",box2d.b2EPCollider.prototype.m_normal0);box2d.b2EPCollider.prototype.m_normal1=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal1",box2d.b2EPCollider.prototype.m_normal1);box2d.b2EPCollider.prototype.m_normal2=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal2",box2d.b2EPCollider.prototype.m_normal2);box2d.b2EPCollider.prototype.m_normal=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_normal",box2d.b2EPCollider.prototype.m_normal);box2d.b2EPCollider.prototype.m_type1=box2d.b2EPColliderVertexType.e_isolated;goog.exportProperty(box2d.b2EPCollider.prototype,"m_type1",box2d.b2EPCollider.prototype.m_type1);box2d.b2EPCollider.prototype.m_type2=box2d.b2EPColliderVertexType.e_isolated;goog.exportProperty(box2d.b2EPCollider.prototype,"m_type2",box2d.b2EPCollider.prototype.m_type2);box2d.b2EPCollider.prototype.m_lowerLimit=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_lowerLimit",box2d.b2EPCollider.prototype.m_lowerLimit);box2d.b2EPCollider.prototype.m_upperLimit=null;goog.exportProperty(box2d.b2EPCollider.prototype,"m_upperLimit",box2d.b2EPCollider.prototype.m_upperLimit);box2d.b2EPCollider.prototype.m_radius=0;goog.exportProperty(box2d.b2EPCollider.prototype,"m_radius",box2d.b2EPCollider.prototype.m_radius);box2d.b2EPCollider.prototype.m_front=!1;goog.exportProperty(box2d.b2EPCollider.prototype,"m_front",box2d.b2EPCollider.prototype.m_front);box2d.b2EPCollider.prototype.Collide=function(A,z,y,u,v){box2d.b2MulTXX(y,v,this.m_xf);box2d.b2MulXV(this.m_xf,u.m_centroid,this.m_centroidB);this.m_v0.Copy(z.m_vertex0);this.m_v1.Copy(z.m_vertex1);this.m_v2.Copy(z.m_vertex2);this.m_v3.Copy(z.m_vertex3);y=z.m_hasVertex0;z=z.m_hasVertex3;v=box2d.b2SubVV(this.m_v2,this.m_v1,box2d.b2EPCollider.s_edge1);v.Normalize();this.m_normal1.SetXY(v.y,-v.x);var r=box2d.b2DotVV(this.m_normal1,box2d.b2SubVV(this.m_centroidB,this.m_v1,box2d.b2Vec2.s_t0)),q=0,n=0,j=!1,m=!1;y&&(q=box2d.b2SubVV(this.m_v1,this.m_v0,box2d.b2EPCollider.s_edge0),q.Normalize(),this.m_normal0.SetXY(q.y,-q.x),j=0<=box2d.b2CrossVV(q,v),q=box2d.b2DotVV(this.m_normal0,box2d.b2SubVV(this.m_centroidB,this.m_v0,box2d.b2Vec2.s_t0)));z&&(n=box2d.b2SubVV(this.m_v3,this.m_v2,box2d.b2EPCollider.s_edge2),n.Normalize(),this.m_normal2.SetXY(n.y,-n.x),m=0<box2d.b2CrossVV(v,n),n=box2d.b2DotVV(this.m_normal2,box2d.b2SubVV(this.m_centroidB,this.m_v2,box2d.b2Vec2.s_t0)));y&&z?j&&m?(this.m_front=0<=q||0<=r||0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):j?(this.m_front=0<=q||0<=r&&0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):m?(this.m_front=0<=n||0<=q&&0<=r)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg()):(this.m_front=0<=q&&0<=r&&0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg()):y?j?((this.m_front=0<=q||0<=r)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1)),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_front=0<=q&&0<=r)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal0).SelfNeg()):z?m?(this.m_front=0<=r||0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1)):((this.m_front=0<=r&&0<=n)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg()),this.m_upperLimit.Copy(this.m_normal1)):(this.m_front=0<=r)?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1));this.m_polygonB.count=u.m_count;r=0;for(q=u.m_count;r<q;++r){box2d.b2MulXV(this.m_xf,u.m_vertices[r],this.m_polygonB.vertices[r]),box2d.b2MulRV(this.m_xf.q,u.m_normals[r],this.m_polygonB.normals[r])}this.m_radius=2*box2d.b2_polygonRadius;A.pointCount=0;y=this.ComputeEdgeSeparation(box2d.b2EPCollider.s_edgeAxis);if(!(y.type==box2d.b2EPAxisType.e_unknown||y.separation>this.m_radius||(z=this.ComputePolygonSeparation(box2d.b2EPCollider.s_polygonAxis),z.type!=box2d.b2EPAxisType.e_unknown&&z.separation>this.m_radius))){y=z.type==box2d.b2EPAxisType.e_unknown?y:z.separation>0.98*y.separation+0.001?z:y;v=box2d.b2EPCollider.s_ie;z=box2d.b2EPCollider.s_rf;if(y.type==box2d.b2EPAxisType.e_edgeA){A.type=box2d.b2ManifoldType.e_faceA;n=0;j=box2d.b2DotVV(this.m_normal,this.m_polygonB.normals[0]);r=1;for(q=this.m_polygonB.count;r<q;++r){m=box2d.b2DotVV(this.m_normal,this.m_polygonB.normals[r]),m<j&&(j=m,n=r)}q=n;r=(q+1)%this.m_polygonB.count;n=v[0];n.v.Copy(this.m_polygonB.vertices[q]);n.id.cf.indexA=0;n.id.cf.indexB=q;n.id.cf.typeA=box2d.b2ContactFeatureType.e_face;n.id.cf.typeB=box2d.b2ContactFeatureType.e_vertex;q=v[1];q.v.Copy(this.m_polygonB.vertices[r]);q.id.cf.indexA=0;q.id.cf.indexB=r;q.id.cf.typeA=box2d.b2ContactFeatureType.e_face;q.id.cf.typeB=box2d.b2ContactFeatureType.e_vertex;this.m_front?(z.i1=0,z.i2=1,z.v1.Copy(this.m_v1),z.v2.Copy(this.m_v2),z.normal.Copy(this.m_normal1)):(z.i1=1,z.i2=0,z.v1.Copy(this.m_v2),z.v2.Copy(this.m_v1),z.normal.Copy(this.m_normal1).SelfNeg())}else{A.type=box2d.b2ManifoldType.e_faceB,n=v[0],n.v.Copy(this.m_v1),n.id.cf.indexA=0,n.id.cf.indexB=y.index,n.id.cf.typeA=box2d.b2ContactFeatureType.e_vertex,n.id.cf.typeB=box2d.b2ContactFeatureType.e_face,q=v[1],q.v.Copy(this.m_v2),q.id.cf.indexA=0,q.id.cf.indexB=y.index,q.id.cf.typeA=box2d.b2ContactFeatureType.e_vertex,q.id.cf.typeB=box2d.b2ContactFeatureType.e_face,z.i1=y.index,z.i2=(z.i1+1)%this.m_polygonB.count,z.v1.Copy(this.m_polygonB.vertices[z.i1]),z.v2.Copy(this.m_polygonB.vertices[z.i2]),z.normal.Copy(this.m_polygonB.normals[z.i1])}z.sideNormal1.SetXY(z.normal.y,-z.normal.x);z.sideNormal2.Copy(z.sideNormal1).SelfNeg();z.sideOffset1=box2d.b2DotVV(z.sideNormal1,z.v1);z.sideOffset2=box2d.b2DotVV(z.sideNormal2,z.v2);r=box2d.b2EPCollider.s_clipPoints1;n=box2d.b2EPCollider.s_clipPoints2;q=0;q=box2d.b2ClipSegmentToLine(r,v,z.sideNormal1,z.sideOffset1,z.i1);if(!(q<box2d.b2_maxManifoldPoints||(q=box2d.b2ClipSegmentToLine(n,r,z.sideNormal2,z.sideOffset2,z.i2),q<box2d.b2_maxManifoldPoints))){y.type==box2d.b2EPAxisType.e_edgeA?(A.localNormal.Copy(z.normal),A.localPoint.Copy(z.v1)):(A.localNormal.Copy(u.m_normals[z.i1]),A.localPoint.Copy(u.m_vertices[z.i1]));r=u=0;for(q=box2d.b2_maxManifoldPoints;r<q;++r){box2d.b2DotVV(z.normal,box2d.b2SubVV(n[r].v,z.v1,box2d.b2Vec2.s_t0))<=this.m_radius&&(v=A.points[u],y.type==box2d.b2EPAxisType.e_edgeA?(box2d.b2MulTXV(this.m_xf,n[r].v,v.localPoint),v.id=n[r].id):(v.localPoint.Copy(n[r].v),v.id.cf.typeA=n[r].id.cf.typeB,v.id.cf.typeB=n[r].id.cf.typeA,v.id.cf.indexA=n[r].id.cf.indexB,v.id.cf.indexB=n[r].id.cf.indexA),++u)}A.pointCount=u}}};goog.exportProperty(box2d.b2EPCollider.prototype,"Collide",box2d.b2EPCollider.prototype.Collide);box2d.b2EPCollider.s_edge1=new box2d.b2Vec2;box2d.b2EPCollider.s_edge0=new box2d.b2Vec2;box2d.b2EPCollider.s_edge2=new box2d.b2Vec2;box2d.b2EPCollider.s_ie=box2d.b2ClipVertex.MakeArray(2);box2d.b2EPCollider.s_rf=new box2d.b2ReferenceFace;box2d.b2EPCollider.s_clipPoints1=box2d.b2ClipVertex.MakeArray(2);box2d.b2EPCollider.s_clipPoints2=box2d.b2ClipVertex.MakeArray(2);box2d.b2EPCollider.s_edgeAxis=new box2d.b2EPAxis;box2d.b2EPCollider.s_polygonAxis=new box2d.b2EPAxis;box2d.b2EPCollider.prototype.ComputeEdgeSeparation=function(f){f.type=box2d.b2EPAxisType.e_edgeA;f.index=this.m_front?0:1;f.separation=box2d.b2_maxFloat;for(var d=0,j=this.m_polygonB.count;d<j;++d){var g=box2d.b2DotVV(this.m_normal,box2d.b2SubVV(this.m_polygonB.vertices[d],this.m_v1,box2d.b2Vec2.s_t0));g<f.separation&&(f.separation=g)}return f};goog.exportProperty(box2d.b2EPCollider.prototype,"ComputeEdgeSeparation",box2d.b2EPCollider.prototype.ComputeEdgeSeparation);box2d.b2EPCollider.prototype.ComputePolygonSeparation=function(k){k.type=box2d.b2EPAxisType.e_unknown;k.index=-1;k.separation=-box2d.b2_maxFloat;for(var j=box2d.b2EPCollider.s_perp.SetXY(-this.m_normal.y,this.m_normal.x),u=0,q=this.m_polygonB.count;u<q;++u){var r=box2d.b2NegV(this.m_polygonB.normals[u],box2d.b2EPCollider.s_n),n=box2d.b2DotVV(r,box2d.b2SubVV(this.m_polygonB.vertices[u],this.m_v1,box2d.b2Vec2.s_t0)),m=box2d.b2DotVV(r,box2d.b2SubVV(this.m_polygonB.vertices[u],this.m_v2,box2d.b2Vec2.s_t0)),n=box2d.b2Min(n,m);if(n>this.m_radius){k.type=box2d.b2EPAxisType.e_edgeB;k.index=u;k.separation=n;break}if(0<=box2d.b2DotVV(r,j)){if(box2d.b2DotVV(box2d.b2SubVV(r,this.m_upperLimit,box2d.b2Vec2.s_t0),this.m_normal)<-box2d.b2_angularSlop){continue}}else{if(box2d.b2DotVV(box2d.b2SubVV(r,this.m_lowerLimit,box2d.b2Vec2.s_t0),this.m_normal)<-box2d.b2_angularSlop){continue}}n>k.separation&&(k.type=box2d.b2EPAxisType.e_edgeB,k.index=u,k.separation=n)}return k};goog.exportProperty(box2d.b2EPCollider.prototype,"ComputePolygonSeparation",box2d.b2EPCollider.prototype.ComputePolygonSeparation);box2d.b2EPCollider.s_n=new box2d.b2Vec2;box2d.b2EPCollider.s_perp=new box2d.b2Vec2;box2d.b2CollideEdgeAndPolygon=function(g,f,m,j,k){box2d.b2CollideEdgeAndPolygon.s_collider.Collide(g,f,m,j,k)};goog.exportSymbol("box2d.b2CollideEdgeAndPolygon",box2d.b2CollideEdgeAndPolygon);box2d.b2CollideEdgeAndPolygon.s_collider=new box2d.b2EPCollider;box2d.b2EdgeShape=function(){box2d.b2Shape.call(this,box2d.b2ShapeType.e_edgeShape,box2d.b2_polygonRadius);this.m_vertex1=new box2d.b2Vec2;this.m_vertex2=new box2d.b2Vec2;this.m_vertex0=new box2d.b2Vec2;this.m_vertex3=new box2d.b2Vec2};goog.inherits(box2d.b2EdgeShape,box2d.b2Shape);goog.exportSymbol("box2d.b2EdgeShape",box2d.b2EdgeShape);box2d.b2EdgeShape.prototype.m_vertex1=null;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex1",box2d.b2EdgeShape.prototype.m_vertex1);box2d.b2EdgeShape.prototype.m_vertex2=null;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex2",box2d.b2EdgeShape.prototype.m_vertex2);box2d.b2EdgeShape.prototype.m_vertex0=null;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex0",box2d.b2EdgeShape.prototype.m_vertex0);box2d.b2EdgeShape.prototype.m_vertex3=null;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_vertex3",box2d.b2EdgeShape.prototype.m_vertex3);box2d.b2EdgeShape.prototype.m_hasVertex0=!1;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_hasVertex0",box2d.b2EdgeShape.prototype.m_hasVertex0);box2d.b2EdgeShape.prototype.m_hasVertex3=!1;goog.exportProperty(box2d.b2EdgeShape.prototype,"m_hasVertex3",box2d.b2EdgeShape.prototype.m_hasVertex3);box2d.b2EdgeShape.prototype.Set=function(e,d){this.m_vertex1.Copy(e);this.m_vertex2.Copy(d);this.m_hasVertex3=this.m_hasVertex0=!1;return this};goog.exportProperty(box2d.b2EdgeShape.prototype,"Set",box2d.b2EdgeShape.prototype.Set);box2d.b2EdgeShape.prototype.SetAsEdge=box2d.b2EdgeShape.prototype.Set;box2d.b2EdgeShape.prototype.Clone=function(){return(new box2d.b2EdgeShape).Copy(this)};goog.exportProperty(box2d.b2EdgeShape.prototype,"Clone",box2d.b2EdgeShape.prototype.Clone);box2d.b2EdgeShape.prototype.Copy=function(b){box2d.b2EdgeShape.superClass_.Copy.call(this,b);box2d.ENABLE_ASSERTS&&box2d.b2Assert(b instanceof box2d.b2EdgeShape);this.m_vertex1.Copy(b.m_vertex1);this.m_vertex2.Copy(b.m_vertex2);this.m_vertex0.Copy(b.m_vertex0);this.m_vertex3.Copy(b.m_vertex3);this.m_hasVertex0=b.m_hasVertex0;this.m_hasVertex3=b.m_hasVertex3;return this};goog.exportProperty(box2d.b2EdgeShape.prototype,"Copy",box2d.b2EdgeShape.prototype.Copy);box2d.b2EdgeShape.prototype.GetChildCount=function(){return 1};goog.exportProperty(box2d.b2EdgeShape.prototype,"GetChildCount",box2d.b2EdgeShape.prototype.GetChildCount);box2d.b2EdgeShape.prototype.TestPoint=function(e,d){return !1};goog.exportProperty(box2d.b2EdgeShape.prototype,"TestPoint",box2d.b2EdgeShape.prototype.TestPoint);box2d.b2EdgeShape.prototype.RayCast=function(y,v,u,q){var r=box2d.b2MulTXV(u,v.p1,box2d.b2EdgeShape.prototype.RayCast.s_p1);q=box2d.b2MulTXV(u,v.p2,box2d.b2EdgeShape.prototype.RayCast.s_p2);var n=box2d.b2SubVV(q,r,box2d.b2EdgeShape.prototype.RayCast.s_d);q=this.m_vertex1;var m=this.m_vertex2,k=box2d.b2SubVV(m,q,box2d.b2EdgeShape.prototype.RayCast.s_e),j=y.normal.SetXY(k.y,-k.x).SelfNormalize(),k=box2d.b2DotVV(j,box2d.b2SubVV(q,r,box2d.b2Vec2.s_t0)),j=box2d.b2DotVV(j,n);if(0==j){return !1}j=k/j;if(0>j||v.maxFraction<j){return !1}v=box2d.b2AddVMulSV(r,j,n,box2d.b2EdgeShape.prototype.RayCast.s_q);r=box2d.b2SubVV(m,q,box2d.b2EdgeShape.prototype.RayCast.s_r);m=box2d.b2DotVV(r,r);if(0==m){return !1}q=box2d.b2DotVV(box2d.b2SubVV(v,q,box2d.b2Vec2.s_t0),r)/m;if(0>q||1<q){return !1}y.fraction=j;box2d.b2MulRV(u.q,y.normal,y.normal);0<k&&y.normal.SelfNeg();return !0};goog.exportProperty(box2d.b2EdgeShape.prototype,"RayCast",box2d.b2EdgeShape.prototype.RayCast);box2d.b2EdgeShape.prototype.RayCast.s_p1=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_p2=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_d=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_e=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_q=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.RayCast.s_r=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.ComputeAABB=function(e,d,f){f=box2d.b2MulXV(d,this.m_vertex1,box2d.b2EdgeShape.prototype.ComputeAABB.s_v1);d=box2d.b2MulXV(d,this.m_vertex2,box2d.b2EdgeShape.prototype.ComputeAABB.s_v2);box2d.b2MinV(f,d,e.lowerBound);box2d.b2MaxV(f,d,e.upperBound);d=this.m_radius;e.lowerBound.SelfSubXY(d,d);e.upperBound.SelfAddXY(d,d)};goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeAABB",box2d.b2EdgeShape.prototype.ComputeAABB);box2d.b2EdgeShape.prototype.ComputeAABB.s_v1=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.ComputeAABB.s_v2=new box2d.b2Vec2;box2d.b2EdgeShape.prototype.ComputeMass=function(e,d){e.mass=0;box2d.b2MidVV(this.m_vertex1,this.m_vertex2,e.center);e.I=0};goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeMass",box2d.b2EdgeShape.prototype.ComputeMass);box2d.b2EdgeShape.prototype.SetupDistanceProxy=function(e,d){e.m_vertices=Array(2);e.m_vertices[0]=this.m_vertex1;e.m_vertices[1]=this.m_vertex2;e.m_count=2;e.m_radius=this.m_radius};box2d.b2EdgeShape.prototype.ComputeSubmergedArea=function(f,d,j,g){g.SetZero();return 0};goog.exportProperty(box2d.b2EdgeShape.prototype,"ComputeSubmergedArea",box2d.b2EdgeShape.prototype.ComputeSubmergedArea);box2d.b2EdgeShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2EdgeShape*/ var shape = new box2d.b2EdgeShape();\n");box2d.b2Log("    shape.m_radius = %.15f;\n",this.m_radius);box2d.b2Log("    shape.m_vertex0.SetXY(%.15f, %.15f);\n",this.m_vertex0.x,this.m_vertex0.y);box2d.b2Log("    shape.m_vertex1.SetXY(%.15f, %.15f);\n",this.m_vertex1.x,this.m_vertex1.y);box2d.b2Log("    shape.m_vertex2.SetXY(%.15f, %.15f);\n",this.m_vertex2.x,this.m_vertex2.y);box2d.b2Log("    shape.m_vertex3.SetXY(%.15f, %.15f);\n",this.m_vertex3.x,this.m_vertex3.y);box2d.b2Log("    shape.m_hasVertex0 = %s;\n",this.m_hasVertex0);box2d.b2Log("    shape.m_hasVertex3 = %s;\n",this.m_hasVertex3)};goog.exportProperty(box2d.b2EdgeShape.prototype,"Dump",box2d.b2EdgeShape.prototype.Dump);box2d.b2ChainShape=function(){box2d.b2Shape.call(this,box2d.b2ShapeType.e_chainShape,box2d.b2_polygonRadius);this.m_prevVertex=new box2d.b2Vec2;this.m_nextVertex=new box2d.b2Vec2};goog.inherits(box2d.b2ChainShape,box2d.b2Shape);goog.exportSymbol("box2d.b2ChainShape",box2d.b2ChainShape);box2d.b2ChainShape.prototype.m_vertices=null;goog.exportProperty(box2d.b2ChainShape.prototype,"m_vertices",box2d.b2ChainShape.prototype.m_vertices);box2d.b2ChainShape.prototype.m_count=0;goog.exportProperty(box2d.b2ChainShape.prototype,"m_count",box2d.b2ChainShape.prototype.m_count);box2d.b2ChainShape.prototype.m_prevVertex=null;goog.exportProperty(box2d.b2ChainShape.prototype,"m_prevVertex",box2d.b2ChainShape.prototype.m_prevVertex);box2d.b2ChainShape.prototype.m_nextVertex=null;goog.exportProperty(box2d.b2ChainShape.prototype,"m_nextVertex",box2d.b2ChainShape.prototype.m_nextVertex);box2d.b2ChainShape.prototype.m_hasPrevVertex=!1;goog.exportProperty(box2d.b2ChainShape.prototype,"m_hasPrevVertex",box2d.b2ChainShape.prototype.m_hasPrevVertex);box2d.b2ChainShape.prototype.m_hasNextVertex=!1;goog.exportProperty(box2d.b2ChainShape.prototype,"m_hasNextVertex",box2d.b2ChainShape.prototype.m_hasNextVertex);box2d.b2ChainShape.prototype.CreateLoop=function(e,d){d=d||e.length;box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==this.m_vertices&&0==this.m_count);box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=d);if(box2d.ENABLE_ASSERTS){for(var f=1;f<d;++f){box2d.b2Assert(box2d.b2DistanceSquaredVV(e[f-1],e[f])>box2d.b2_linearSlop*box2d.b2_linearSlop)}}this.m_count=d+1;this.m_vertices=box2d.b2Vec2.MakeArray(this.m_count);for(f=0;f<d;++f){this.m_vertices[f].Copy(e[f])}this.m_vertices[d].Copy(this.m_vertices[0]);this.m_prevVertex.Copy(this.m_vertices[this.m_count-2]);this.m_nextVertex.Copy(this.m_vertices[1]);this.m_hasNextVertex=this.m_hasPrevVertex=!0;return this};goog.exportProperty(box2d.b2ChainShape.prototype,"CreateLoop",box2d.b2ChainShape.prototype.CreateLoop);box2d.b2ChainShape.prototype.CreateChain=function(e,d){d=d||e.length;box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==this.m_vertices&&0==this.m_count);box2d.ENABLE_ASSERTS&&box2d.b2Assert(2<=d);if(box2d.ENABLE_ASSERTS){for(var f=1;f<d;++f){box2d.b2Assert(box2d.b2DistanceSquaredVV(e[f-1],e[f])>box2d.b2_linearSlop*box2d.b2_linearSlop)}}this.m_count=d;this.m_vertices=box2d.b2Vec2.MakeArray(d);for(f=0;f<d;++f){this.m_vertices[f].Copy(e[f])}this.m_hasNextVertex=this.m_hasPrevVertex=!1;return this};goog.exportProperty(box2d.b2ChainShape.prototype,"CreateChain",box2d.b2ChainShape.prototype.CreateChain);box2d.b2ChainShape.prototype.SetPrevVertex=function(b){this.m_prevVertex.Copy(b);this.m_hasPrevVertex=!0;return this};goog.exportProperty(box2d.b2ChainShape.prototype,"SetPrevVertex",box2d.b2ChainShape.prototype.SetPrevVertex);box2d.b2ChainShape.prototype.SetNextVertex=function(b){this.m_nextVertex.Copy(b);this.m_hasNextVertex=!0;return this};goog.exportProperty(box2d.b2ChainShape.prototype,"SetNextVertex",box2d.b2ChainShape.prototype.SetNextVertex);box2d.b2ChainShape.prototype.Clone=function(){return(new box2d.b2ChainShape).Copy(this)};goog.exportProperty(box2d.b2ChainShape.prototype,"Clone",box2d.b2ChainShape.prototype.Clone);box2d.b2ChainShape.prototype.Copy=function(b){box2d.b2ChainShape.superClass_.Copy.call(this,b);box2d.ENABLE_ASSERTS&&box2d.b2Assert(b instanceof box2d.b2ChainShape);this.CreateChain(b.m_vertices,b.m_count);this.m_prevVertex.Copy(b.m_prevVertex);this.m_nextVertex.Copy(b.m_nextVertex);this.m_hasPrevVertex=b.m_hasPrevVertex;this.m_hasNextVertex=b.m_hasNextVertex;return this};goog.exportProperty(box2d.b2ChainShape.prototype,"Copy",box2d.b2ChainShape.prototype.Copy);box2d.b2ChainShape.prototype.GetChildCount=function(){return this.m_count-1};goog.exportProperty(box2d.b2ChainShape.prototype,"GetChildCount",box2d.b2ChainShape.prototype.GetChildCount);box2d.b2ChainShape.prototype.GetChildEdge=function(e,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=d&&d<this.m_count-1);e.m_type=box2d.b2ShapeType.e_edgeShape;e.m_radius=this.m_radius;e.m_vertex1.Copy(this.m_vertices[d]);e.m_vertex2.Copy(this.m_vertices[d+1]);0<d?(e.m_vertex0.Copy(this.m_vertices[d-1]),e.m_hasVertex0=!0):(e.m_vertex0.Copy(this.m_prevVertex),e.m_hasVertex0=this.m_hasPrevVertex);d<this.m_count-2?(e.m_vertex3.Copy(this.m_vertices[d+2]),e.m_hasVertex3=!0):(e.m_vertex3.Copy(this.m_nextVertex),e.m_hasVertex3=this.m_hasNextVertex)};goog.exportProperty(box2d.b2ChainShape.prototype,"GetChildEdge",box2d.b2ChainShape.prototype.GetChildEdge);box2d.b2ChainShape.prototype.TestPoint=function(e,d){return !1};goog.exportProperty(box2d.b2ChainShape.prototype,"TestPoint",box2d.b2ChainShape.prototype.TestPoint);box2d.b2ChainShape.prototype.RayCast=function(g,f,m,j){box2d.ENABLE_ASSERTS&&box2d.b2Assert(j<this.m_count);var k=box2d.b2ChainShape.s_edgeShape;k.m_vertex1.Copy(this.m_vertices[j]);k.m_vertex2.Copy(this.m_vertices[(j+1)%this.m_count]);return k.RayCast(g,f,m,0)};goog.exportProperty(box2d.b2ChainShape.prototype,"RayCast",box2d.b2ChainShape.prototype.RayCast);box2d.b2ChainShape.s_edgeShape=new box2d.b2EdgeShape;goog.exportProperty(box2d.b2ChainShape,"s_edgeShape",box2d.b2ChainShape.s_edgeShape);box2d.b2ChainShape.prototype.ComputeAABB=function(f,d,j){box2d.ENABLE_ASSERTS&&box2d.b2Assert(j<this.m_count);var g=this.m_vertices[(j+1)%this.m_count];j=box2d.b2MulXV(d,this.m_vertices[j],box2d.b2ChainShape.prototype.ComputeAABB.s_v1);d=box2d.b2MulXV(d,g,box2d.b2ChainShape.prototype.ComputeAABB.s_v2);box2d.b2MinV(j,d,f.lowerBound);box2d.b2MaxV(j,d,f.upperBound)};goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeAABB",box2d.b2ChainShape.prototype.ComputeAABB);box2d.b2ChainShape.prototype.ComputeAABB.s_v1=new box2d.b2Vec2;goog.exportProperty(box2d.b2ChainShape.prototype.ComputeAABB,"s_v1",box2d.b2ChainShape.prototype.ComputeAABB.s_v1);box2d.b2ChainShape.prototype.ComputeAABB.s_v2=new box2d.b2Vec2;goog.exportProperty(box2d.b2ChainShape.prototype.ComputeAABB,"s_v2",box2d.b2ChainShape.prototype.ComputeAABB.s_v2);box2d.b2ChainShape.prototype.ComputeMass=function(e,d){e.mass=0;e.center.SetZero();e.I=0};goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeMass",box2d.b2ChainShape.prototype.ComputeMass);box2d.b2ChainShape.prototype.SetupDistanceProxy=function(e,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=d&&d<this.m_count);e.m_buffer[0].Copy(this.m_vertices[d]);d+1<this.m_count?e.m_buffer[1].Copy(this.m_vertices[d+1]):e.m_buffer[1].Copy(this.m_vertices[0]);e.m_vertices=e.m_buffer;e.m_count=2;e.m_radius=this.m_radius};box2d.b2ChainShape.prototype.ComputeSubmergedArea=function(f,d,j,g){g.SetZero();return 0};goog.exportProperty(box2d.b2ChainShape.prototype,"ComputeSubmergedArea",box2d.b2ChainShape.prototype.ComputeSubmergedArea);box2d.b2ChainShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2ChainShape*/ var shape = new box2d.b2ChainShape();\n");box2d.b2Log("    /*box2d.b2Vec2[]*/ var vs = box2d.b2Vec2.MakeArray(%d);\n",box2d.b2_maxPolygonVertices);for(var b=0;b<this.m_count;++b){box2d.b2Log("    vs[%d].SetXY(%.15f, %.15f);\n",b,this.m_vertices[b].x,this.m_vertices[b].y)}box2d.b2Log("    shape.CreateChain(vs, %d);\n",this.m_count);box2d.b2Log("    shape.m_prevVertex.SetXY(%.15f, %.15f);\n",this.m_prevVertex.x,this.m_prevVertex.y);box2d.b2Log("    shape.m_nextVertex.SetXY(%.15f, %.15f);\n",this.m_nextVertex.x,this.m_nextVertex.y);box2d.b2Log("    shape.m_hasPrevVertex = %s;\n",this.m_hasPrevVertex?"true":"false");box2d.b2Log("    shape.m_hasNextVertex = %s;\n",this.m_hasNextVertex?"true":"false")};goog.exportProperty(box2d.b2ChainShape.prototype,"Dump",box2d.b2ChainShape.prototype.Dump);box2d.b2ChainAndPolygonContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2ChainAndPolygonContact,box2d.b2Contact);goog.exportSymbol("box2d.b2ChainAndPolygonContact",box2d.b2ChainAndPolygonContact);box2d.b2ChainAndPolygonContact.Create=function(b){return new box2d.b2ChainAndPolygonContact};goog.exportProperty(box2d.b2ChainAndPolygonContact,"Create",box2d.b2ChainAndPolygonContact.Create);box2d.b2ChainAndPolygonContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2ChainAndPolygonContact,"Destroy",box2d.b2ChainAndPolygonContact.Destroy);box2d.b2ChainAndPolygonContact.prototype.Reset=function(f,d,j,g){box2d.b2ChainAndPolygonContact.superClass_.Reset.call(this,f,d,j,g);box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.GetType()==box2d.b2ShapeType.e_chainShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(j.GetType()==box2d.b2ShapeType.e_polygonShape)};goog.exportProperty(box2d.b2ChainAndPolygonContact.prototype,"Reset",box2d.b2ChainAndPolygonContact.prototype.Reset);box2d.b2ChainAndPolygonContact.prototype.Evaluate=function(j,g,q){var m=this.m_fixtureA.GetShape(),n=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(m instanceof box2d.b2ChainShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(n instanceof box2d.b2PolygonShape);var k=box2d.b2ChainAndPolygonContact.prototype.Evaluate.s_edge;(m instanceof box2d.b2ChainShape?m:null).GetChildEdge(k,this.m_indexA);box2d.b2CollideEdgeAndPolygon(j,k,g,n instanceof box2d.b2PolygonShape?n:null,q)};goog.exportProperty(box2d.b2ChainAndPolygonContact.prototype,"Evaluate",box2d.b2ChainAndPolygonContact.prototype.Evaluate);box2d.b2ChainAndPolygonContact.prototype.Evaluate.s_edge=new box2d.b2EdgeShape;box2d.b2CollidePolygon={};box2d.b2EdgeSeparation=function(E,D,C,A,B){var z=E.m_count,y=E.m_vertices,v=E.m_normals;E=A.m_count;A=A.m_vertices;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=C&&C<z);for(var z=box2d.b2MulRV(D.q,v[C],box2d.b2EdgeSeparation.s_normal1World),r=box2d.b2MulTRV(B.q,z,box2d.b2EdgeSeparation.s_normal1),v=0,u=box2d.b2_maxFloat,q=0;q<E;++q){var j=box2d.b2DotVV(A[q],r);j<u&&(u=j,v=q)}D=box2d.b2MulXV(D,y[C],box2d.b2EdgeSeparation.s_v1);B=box2d.b2MulXV(B,A[v],box2d.b2EdgeSeparation.s_v2);return box2d.b2DotVV(box2d.b2SubVV(B,D,box2d.b2Vec2.s_t0),z)};goog.exportSymbol("box2d.b2EdgeSeparation",box2d.b2EdgeSeparation);box2d.b2EdgeSeparation.s_normal1World=new box2d.b2Vec2;box2d.b2EdgeSeparation.s_normal1=new box2d.b2Vec2;box2d.b2EdgeSeparation.s_v1=new box2d.b2Vec2;box2d.b2EdgeSeparation.s_v2=new box2d.b2Vec2;box2d.b2FindMaxSeparation=function(J,I,H,F,G){for(var E=I.m_count,D=I.m_normals,C=box2d.b2SubVV(box2d.b2MulXV(G,F.m_centroid,box2d.b2Vec2.s_t0),box2d.b2MulXV(H,I.m_centroid,box2d.b2Vec2.s_t1),box2d.b2FindMaxSeparation.s_d),A=box2d.b2MulTRV(H.q,C,box2d.b2FindMaxSeparation.s_dLocal1),C=0,B=-box2d.b2_maxFloat,z=0;z<E;++z){var y=box2d.b2DotVV(D[z],A);y>B&&(B=y,C=z)}var D=box2d.b2EdgeSeparation(I,H,C,F,G),A=(C+E-1)%E,B=box2d.b2EdgeSeparation(I,H,A,F,G),z=(C+1)%E,y=box2d.b2EdgeSeparation(I,H,z,F,G),v=0,u=0,j=0;if(B>D&&B>y){j=-1,v=A,u=B}else{if(y>D){j=1,v=z,u=y}else{return J[0]=C,D}}for(;;){if(C=-1==j?(v+E-1)%E:(v+1)%E,D=box2d.b2EdgeSeparation(I,H,C,F,G),D>u){v=C,u=D}else{break}}J[0]=v;return u};goog.exportSymbol("box2d.b2FindMaxSeparation",box2d.b2FindMaxSeparation);box2d.b2FindMaxSeparation.s_d=new box2d.b2Vec2;box2d.b2FindMaxSeparation.s_dLocal1=new box2d.b2Vec2;box2d.b2FindIncidentEdge=function(C,B,A,y,z,v){var u=B.m_count,r=B.m_normals,n=z.m_count;B=z.m_vertices;z=z.m_normals;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=y&&y<u);A=box2d.b2MulTRV(v.q,box2d.b2MulRV(A.q,r[y],box2d.b2Vec2.s_t0),box2d.b2FindIncidentEdge.s_normal1);for(var u=0,r=box2d.b2_maxFloat,q=0;q<n;++q){var j=box2d.b2DotVV(A,z[q]);j<r&&(r=j,u=q)}z=u;n=(z+1)%n;A=C[0];box2d.b2MulXV(v,B[z],A.v);A=A.id.cf;A.indexA=y;A.indexB=z;A.typeA=box2d.b2ContactFeatureType.e_face;A.typeB=box2d.b2ContactFeatureType.e_vertex;C=C[1];box2d.b2MulXV(v,B[n],C.v);v=C.id.cf;v.indexA=y;v.indexB=n;v.typeA=box2d.b2ContactFeatureType.e_face;v.typeB=box2d.b2ContactFeatureType.e_vertex};goog.exportSymbol("box2d.b2FindIncidentEdge",box2d.b2FindIncidentEdge);box2d.b2FindIncidentEdge.s_normal1=new box2d.b2Vec2;box2d.b2CollidePolygons=function(J,I,H,F,G){J.pointCount=0;var E=I.m_radius+F.m_radius,D=box2d.b2CollidePolygons.s_edgeA;D[0]=0;var C=box2d.b2FindMaxSeparation(D,I,H,F,G);if(!(C>E)){var A=box2d.b2CollidePolygons.s_edgeB;A[0]=0;var B=box2d.b2FindMaxSeparation(A,F,G,I,H);if(!(B>E)){var z=0,y=0;B>0.98*C+0.001?(C=F,F=I,I=G,z=A[0],J.type=box2d.b2ManifoldType.e_faceB,y=1):(C=I,I=H,H=G,z=D[0],J.type=box2d.b2ManifoldType.e_faceA,y=0);D=box2d.b2CollidePolygons.s_incidentEdge;box2d.b2FindIncidentEdge(D,C,I,z,F,H);G=C.m_vertices;var A=z,C=(z+1)%C.m_count,v=G[A],u=G[C],z=box2d.b2SubVV(u,v,box2d.b2CollidePolygons.s_localTangent);z.Normalize();G=box2d.b2CrossVOne(z,box2d.b2CollidePolygons.s_localNormal);F=box2d.b2MidVV(v,u,box2d.b2CollidePolygons.s_planePoint);var B=box2d.b2MulRV(I.q,z,box2d.b2CollidePolygons.s_tangent),z=box2d.b2CrossVOne(B,box2d.b2CollidePolygons.s_normal),v=box2d.b2MulXV(I,v,box2d.b2CollidePolygons.s_v11),j=box2d.b2MulXV(I,u,box2d.b2CollidePolygons.s_v12);I=box2d.b2DotVV(z,v);var u=-box2d.b2DotVV(B,v)+E,j=box2d.b2DotVV(B,j)+E,K=box2d.b2CollidePolygons.s_clipPoints1,v=box2d.b2CollidePolygons.s_clipPoints2,L=box2d.b2NegV(B,box2d.b2CollidePolygons.s_ntangent),D=box2d.b2ClipSegmentToLine(K,D,L,u,A);if(!(2>D||(D=box2d.b2ClipSegmentToLine(v,K,B,j,C),2>D))){J.localNormal.Copy(G);J.localPoint.Copy(F);for(A=D=0;A<box2d.b2_maxManifoldPoints;++A){G=v[A],box2d.b2DotVV(z,G.v)-I<=E&&(C=J.points[D],box2d.b2MulTXV(H,G.v,C.localPoint),C.id.Copy(G.id),y&&(G=C.id.cf,C.id.cf.indexA=G.indexB,C.id.cf.indexB=G.indexA,C.id.cf.typeA=G.typeB,C.id.cf.typeB=G.typeA),++D)}J.pointCount=D}}}};goog.exportSymbol("box2d.b2CollidePolygons",box2d.b2CollidePolygons);box2d.b2CollidePolygons.s_incidentEdge=box2d.b2ClipVertex.MakeArray(2);box2d.b2CollidePolygons.s_clipPoints1=box2d.b2ClipVertex.MakeArray(2);box2d.b2CollidePolygons.s_clipPoints2=box2d.b2ClipVertex.MakeArray(2);box2d.b2CollidePolygons.s_edgeA=box2d.b2MakeNumberArray(1);box2d.b2CollidePolygons.s_edgeB=box2d.b2MakeNumberArray(1);box2d.b2CollidePolygons.s_localTangent=new box2d.b2Vec2;box2d.b2CollidePolygons.s_localNormal=new box2d.b2Vec2;box2d.b2CollidePolygons.s_planePoint=new box2d.b2Vec2;box2d.b2CollidePolygons.s_normal=new box2d.b2Vec2;box2d.b2CollidePolygons.s_tangent=new box2d.b2Vec2;box2d.b2CollidePolygons.s_ntangent=new box2d.b2Vec2;box2d.b2CollidePolygons.s_v11=new box2d.b2Vec2;box2d.b2CollidePolygons.s_v12=new box2d.b2Vec2;box2d.b2PolygonContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2PolygonContact,box2d.b2Contact);goog.exportSymbol("box2d.b2PolygonContact",box2d.b2PolygonContact);box2d.b2PolygonContact.Create=function(b){return new box2d.b2PolygonContact};goog.exportProperty(box2d.b2PolygonContact,"Create",box2d.b2PolygonContact.Create);box2d.b2PolygonContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2PolygonContact,"Destroy",box2d.b2PolygonContact.Destroy);box2d.b2PolygonContact.prototype.Reset=function(f,d,j,g){box2d.b2PolygonContact.superClass_.Reset.call(this,f,d,j,g)};goog.exportProperty(box2d.b2PolygonContact.prototype,"Reset",box2d.b2PolygonContact.prototype.Reset);box2d.b2PolygonContact.prototype.Evaluate=function(g,f,m){var j=this.m_fixtureA.GetShape(),k=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(j instanceof box2d.b2PolygonShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(k instanceof box2d.b2PolygonShape);box2d.b2CollidePolygons(g,j instanceof box2d.b2PolygonShape?j:null,f,k instanceof box2d.b2PolygonShape?k:null,m)};goog.exportProperty(box2d.b2PolygonContact.prototype,"Evaluate",box2d.b2PolygonContact.prototype.Evaluate);box2d.b2CollideCircle={};box2d.b2CollideCircles=function(g,f,m,j,k){g.pointCount=0;m=box2d.b2MulXV(m,f.m_p,box2d.b2CollideCircles.s_pA);k=box2d.b2MulXV(k,j.m_p,box2d.b2CollideCircles.s_pB);k=box2d.b2DistanceSquaredVV(m,k);m=f.m_radius+j.m_radius;k>m*m||(g.type=box2d.b2ManifoldType.e_circles,g.localPoint.Copy(f.m_p),g.localNormal.SetZero(),g.pointCount=1,g.points[0].localPoint.Copy(j.m_p),g.points[0].id.key=0)};goog.exportSymbol("box2d.b2CollideCircles",box2d.b2CollideCircles);box2d.b2CollideCircles.s_pA=new box2d.b2Vec2;box2d.b2CollideCircles.s_pB=new box2d.b2Vec2;box2d.b2CollidePolygonAndCircle=function(C,B,A,y,z){C.pointCount=0;z=box2d.b2MulXV(z,y.m_p,box2d.b2CollidePolygonAndCircle.s_c);A=box2d.b2MulTXV(A,z,box2d.b2CollidePolygonAndCircle.s_cLocal);var v=0,u=-box2d.b2_maxFloat;z=B.m_radius+y.m_radius;var r=B.m_count,n=B.m_vertices;B=B.m_normals;for(var q=0;q<r;++q){var j=box2d.b2DotVV(B[q],box2d.b2SubVV(A,n[q],box2d.b2Vec2.s_t0));if(j>z){return}j>u&&(u=j,v=q)}q=v;j=n[q];r=n[(q+1)%r];u<box2d.b2_epsilon?(C.pointCount=1,C.type=box2d.b2ManifoldType.e_faceA,C.localNormal.Copy(B[v]),box2d.b2MidVV(j,r,C.localPoint),C.points[0].localPoint.Copy(y.m_p),C.points[0].id.key=0):(u=box2d.b2DotVV(box2d.b2SubVV(A,j,box2d.b2Vec2.s_t0),box2d.b2SubVV(r,j,box2d.b2Vec2.s_t1)),v=box2d.b2DotVV(box2d.b2SubVV(A,r,box2d.b2Vec2.s_t0),box2d.b2SubVV(j,r,box2d.b2Vec2.s_t1)),0>=u?box2d.b2DistanceSquaredVV(A,j)>z*z||(C.pointCount=1,C.type=box2d.b2ManifoldType.e_faceA,box2d.b2SubVV(A,j,C.localNormal).SelfNormalize(),C.localPoint.Copy(j),C.points[0].localPoint.Copy(y.m_p),C.points[0].id.key=0):0>=v?box2d.b2DistanceSquaredVV(A,r)>z*z||(C.pointCount=1,C.type=box2d.b2ManifoldType.e_faceA,box2d.b2SubVV(A,r,C.localNormal).SelfNormalize(),C.localPoint.Copy(r),C.points[0].localPoint.Copy(y.m_p),C.points[0].id.key=0):(v=box2d.b2MidVV(j,r,box2d.b2CollidePolygonAndCircle.s_faceCenter),u=box2d.b2DotVV(box2d.b2SubVV(A,v,box2d.b2Vec2.s_t1),B[q]),u>z||(C.pointCount=1,C.type=box2d.b2ManifoldType.e_faceA,C.localNormal.Copy(B[q]).SelfNormalize(),C.localPoint.Copy(v),C.points[0].localPoint.Copy(y.m_p),C.points[0].id.key=0)))};goog.exportSymbol("box2d.b2CollidePolygonAndCircle",box2d.b2CollidePolygonAndCircle);box2d.b2CollidePolygonAndCircle.s_c=new box2d.b2Vec2;box2d.b2CollidePolygonAndCircle.s_cLocal=new box2d.b2Vec2;box2d.b2CollidePolygonAndCircle.s_faceCenter=new box2d.b2Vec2;box2d.b2CircleContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2CircleContact,box2d.b2Contact);goog.exportSymbol("box2d.b2CircleContact",box2d.b2CircleContact);box2d.b2CircleContact.Create=function(b){return new box2d.b2CircleContact};goog.exportProperty(box2d.b2CircleContact,"Create",box2d.b2CircleContact.Create);box2d.b2CircleContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2CircleContact,"Destroy",box2d.b2CircleContact.Destroy);box2d.b2CircleContact.prototype.Reset=function(f,d,j,g){box2d.b2CircleContact.superClass_.Reset.call(this,f,d,j,g)};goog.exportProperty(box2d.b2CircleContact.prototype,"Reset",box2d.b2CircleContact.prototype.Reset);box2d.b2CircleContact.prototype.Evaluate=function(g,f,m){var j=this.m_fixtureA.GetShape(),k=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(j instanceof box2d.b2CircleShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(k instanceof box2d.b2CircleShape);box2d.b2CollideCircles(g,j instanceof box2d.b2CircleShape?j:null,f,k instanceof box2d.b2CircleShape?k:null,m)};goog.exportProperty(box2d.b2CircleContact.prototype,"Evaluate",box2d.b2CircleContact.prototype.Evaluate);box2d.b2ChainAndCircleContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2ChainAndCircleContact,box2d.b2Contact);goog.exportSymbol("box2d.b2ChainAndCircleContact",box2d.b2ChainAndCircleContact);box2d.b2ChainAndCircleContact.Create=function(b){return new box2d.b2ChainAndCircleContact};goog.exportProperty(box2d.b2ChainAndCircleContact,"Create",box2d.b2ChainAndCircleContact.Create);box2d.b2ChainAndCircleContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2ChainAndCircleContact,"Destroy",box2d.b2ChainAndCircleContact.Destroy);box2d.b2ChainAndCircleContact.prototype.Reset=function(f,d,j,g){box2d.b2ChainAndCircleContact.superClass_.Reset.call(this,f,d,j,g);box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.GetType()==box2d.b2ShapeType.e_chainShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(j.GetType()==box2d.b2ShapeType.e_circleShape)};goog.exportProperty(box2d.b2ChainAndCircleContact.prototype,"Reset",box2d.b2ChainAndCircleContact.prototype.Reset);box2d.b2ChainAndCircleContact.prototype.Evaluate=function(j,g,q){var m=this.m_fixtureA.GetShape(),n=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(m instanceof box2d.b2ChainShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(n instanceof box2d.b2CircleShape);var k=box2d.b2ChainAndCircleContact.prototype.Evaluate.s_edge;(m instanceof box2d.b2ChainShape?m:null).GetChildEdge(k,this.m_indexA);box2d.b2CollideEdgeAndCircle(j,k,g,n instanceof box2d.b2CircleShape?n:null,q)};goog.exportProperty(box2d.b2ChainAndCircleContact.prototype,"Evaluate",box2d.b2ChainAndCircleContact.prototype.Evaluate);box2d.b2ChainAndCircleContact.prototype.Evaluate.s_edge=new box2d.b2EdgeShape;box2d.b2EdgeAndCircleContact=function(){box2d.b2Contact.call(this)};goog.inherits(box2d.b2EdgeAndCircleContact,box2d.b2Contact);goog.exportSymbol("box2d.b2EdgeAndCircleContact",box2d.b2EdgeAndCircleContact);box2d.b2EdgeAndCircleContact.Create=function(b){return new box2d.b2EdgeAndCircleContact};goog.exportProperty(box2d.b2EdgeAndCircleContact,"Create",box2d.b2EdgeAndCircleContact.Create);box2d.b2EdgeAndCircleContact.Destroy=function(e,d){};goog.exportProperty(box2d.b2EdgeAndCircleContact,"Destroy",box2d.b2EdgeAndCircleContact.Destroy);box2d.b2EdgeAndCircleContact.prototype.Reset=function(f,d,j,g){box2d.b2EdgeAndCircleContact.superClass_.Reset.call(this,f,d,j,g);box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.GetType()==box2d.b2ShapeType.e_edgeShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(j.GetType()==box2d.b2ShapeType.e_circleShape)};goog.exportProperty(box2d.b2EdgeAndCircleContact.prototype,"Reset",box2d.b2EdgeAndCircleContact.prototype.Reset);box2d.b2EdgeAndCircleContact.prototype.Evaluate=function(g,f,m){var j=this.m_fixtureA.GetShape(),k=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(j instanceof box2d.b2EdgeShape);box2d.ENABLE_ASSERTS&&box2d.b2Assert(k instanceof box2d.b2CircleShape);box2d.b2CollideEdgeAndCircle(g,j instanceof box2d.b2EdgeShape?j:null,f,k instanceof box2d.b2CircleShape?k:null,m)};goog.exportProperty(box2d.b2EdgeAndCircleContact.prototype,"Evaluate",box2d.b2EdgeAndCircleContact.prototype.Evaluate);box2d.b2VelocityConstraintPoint=function(){this.rA=new box2d.b2Vec2;this.rB=new box2d.b2Vec2};goog.exportSymbol("box2d.b2VelocityConstraintPoint",box2d.b2VelocityConstraintPoint);box2d.b2VelocityConstraintPoint.prototype.rA=null;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"rA",box2d.b2VelocityConstraintPoint.prototype.rA);box2d.b2VelocityConstraintPoint.prototype.rB=null;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"rB",box2d.b2VelocityConstraintPoint.prototype.rB);box2d.b2VelocityConstraintPoint.prototype.normalImpulse=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"normalImpulse",box2d.b2VelocityConstraintPoint.prototype.normalImpulse);box2d.b2VelocityConstraintPoint.prototype.tangentImpulse=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"tangentImpulse",box2d.b2VelocityConstraintPoint.prototype.tangentImpulse);box2d.b2VelocityConstraintPoint.prototype.normalMass=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"normalMass",box2d.b2VelocityConstraintPoint.prototype.normalMass);box2d.b2VelocityConstraintPoint.prototype.tangentMass=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"tangentMass",box2d.b2VelocityConstraintPoint.prototype.tangentMass);box2d.b2VelocityConstraintPoint.prototype.velocityBias=0;goog.exportProperty(box2d.b2VelocityConstraintPoint.prototype,"velocityBias",box2d.b2VelocityConstraintPoint.prototype.velocityBias);box2d.b2VelocityConstraintPoint.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2VelocityConstraintPoint})};goog.exportProperty(box2d.b2VelocityConstraintPoint,"MakeArray",box2d.b2VelocityConstraintPoint.MakeArray);box2d.b2ContactVelocityConstraint=function(){this.points=box2d.b2VelocityConstraintPoint.MakeArray(box2d.b2_maxManifoldPoints);this.normal=new box2d.b2Vec2;this.tangent=new box2d.b2Vec2;this.normalMass=new box2d.b2Mat22;this.K=new box2d.b2Mat22};goog.exportSymbol("box2d.b2ContactVelocityConstraint",box2d.b2ContactVelocityConstraint);box2d.b2ContactVelocityConstraint.prototype.points=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"points",box2d.b2ContactVelocityConstraint.prototype.points);box2d.b2ContactVelocityConstraint.prototype.normal=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"normal",box2d.b2ContactVelocityConstraint.prototype.normal);box2d.b2ContactVelocityConstraint.prototype.tangent=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"tangent",box2d.b2ContactVelocityConstraint.prototype.tangent);box2d.b2ContactVelocityConstraint.prototype.normalMass=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"normalMass",box2d.b2ContactVelocityConstraint.prototype.normalMass);box2d.b2ContactVelocityConstraint.prototype.K=null;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"K",box2d.b2ContactVelocityConstraint.prototype.K);box2d.b2ContactVelocityConstraint.prototype.indexA=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"indexA",box2d.b2ContactVelocityConstraint.prototype.indexA);box2d.b2ContactVelocityConstraint.prototype.indexB=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"indexB",box2d.b2ContactVelocityConstraint.prototype.indexB);box2d.b2ContactVelocityConstraint.prototype.invMassA=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invMassA",box2d.b2ContactVelocityConstraint.prototype.invMassA);box2d.b2ContactVelocityConstraint.prototype.invMassB=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invMassB",box2d.b2ContactVelocityConstraint.prototype.invMassB);box2d.b2ContactVelocityConstraint.prototype.invIA=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invIA",box2d.b2ContactVelocityConstraint.prototype.invIA);box2d.b2ContactVelocityConstraint.prototype.invIB=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"invIB",box2d.b2ContactVelocityConstraint.prototype.invIB);box2d.b2ContactVelocityConstraint.prototype.friction=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"friction",box2d.b2ContactVelocityConstraint.prototype.friction);box2d.b2ContactVelocityConstraint.prototype.restitution=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"restitution",box2d.b2ContactVelocityConstraint.prototype.restitution);box2d.b2ContactVelocityConstraint.prototype.tangentSpeed=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"tangentSpeed",box2d.b2ContactVelocityConstraint.prototype.tangentSpeed);box2d.b2ContactVelocityConstraint.prototype.pointCount=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"pointCount",box2d.b2ContactVelocityConstraint.prototype.pointCount);box2d.b2ContactVelocityConstraint.prototype.contactIndex=0;goog.exportProperty(box2d.b2ContactVelocityConstraint.prototype,"contactIndex",box2d.b2ContactVelocityConstraint.prototype.contactIndex);box2d.b2ContactVelocityConstraint.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2ContactVelocityConstraint})};goog.exportProperty(box2d.b2ContactVelocityConstraint,"MakeArray",box2d.b2ContactVelocityConstraint.MakeArray);box2d.b2ContactPositionConstraint=function(){this.localPoints=box2d.b2Vec2.MakeArray(box2d.b2_maxManifoldPoints);this.localNormal=new box2d.b2Vec2;this.localPoint=new box2d.b2Vec2;this.localCenterA=new box2d.b2Vec2;this.localCenterB=new box2d.b2Vec2};goog.exportSymbol("box2d.b2ContactPositionConstraint",box2d.b2ContactPositionConstraint);box2d.b2ContactPositionConstraint.prototype.localPoints=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localPoints",box2d.b2ContactPositionConstraint.prototype.localPoints);box2d.b2ContactPositionConstraint.prototype.localNormal=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localNormal",box2d.b2ContactPositionConstraint.prototype.localNormal);box2d.b2ContactPositionConstraint.prototype.localPoint=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localPoint",box2d.b2ContactPositionConstraint.prototype.localPoint);box2d.b2ContactPositionConstraint.prototype.indexA=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"indexA",box2d.b2ContactPositionConstraint.prototype.indexA);box2d.b2ContactPositionConstraint.prototype.indexB=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"indexB",box2d.b2ContactPositionConstraint.prototype.indexB);box2d.b2ContactPositionConstraint.prototype.invMassA=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invMassA",box2d.b2ContactPositionConstraint.prototype.invMassA);box2d.b2ContactPositionConstraint.prototype.invMassB=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invMassB",box2d.b2ContactPositionConstraint.prototype.invMassB);box2d.b2ContactPositionConstraint.prototype.localCenterA=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localCenterA",box2d.b2ContactPositionConstraint.prototype.localCenterA);box2d.b2ContactPositionConstraint.prototype.localCenterB=null;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"localCenterB",box2d.b2ContactPositionConstraint.prototype.localCenterB);box2d.b2ContactPositionConstraint.prototype.invIA=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invIA",box2d.b2ContactPositionConstraint.prototype.invIA);box2d.b2ContactPositionConstraint.prototype.invIB=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"invIB",box2d.b2ContactPositionConstraint.prototype.invIB);box2d.b2ContactPositionConstraint.prototype.type=box2d.b2ManifoldType.e_unknown;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"type",box2d.b2ContactPositionConstraint.prototype.type);box2d.b2ContactPositionConstraint.prototype.radiusA=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"radiusA",box2d.b2ContactPositionConstraint.prototype.radiusA);box2d.b2ContactPositionConstraint.prototype.radiusB=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"radiusB",box2d.b2ContactPositionConstraint.prototype.radiusB);box2d.b2ContactPositionConstraint.prototype.pointCount=0;goog.exportProperty(box2d.b2ContactPositionConstraint.prototype,"pointCount",box2d.b2ContactPositionConstraint.prototype.pointCount);box2d.b2ContactPositionConstraint.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2ContactPositionConstraint})};goog.exportProperty(box2d.b2ContactPositionConstraint,"MakeArray",box2d.b2ContactPositionConstraint.MakeArray);box2d.b2ContactSolverDef=function(){this.step=new box2d.b2TimeStep};goog.exportSymbol("box2d.b2ContactSolverDef",box2d.b2ContactSolverDef);box2d.b2ContactSolverDef.prototype.step=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"step",box2d.b2ContactSolverDef.prototype.step);box2d.b2ContactSolverDef.prototype.contacts=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"contacts",box2d.b2ContactSolverDef.prototype.contacts);box2d.b2ContactSolverDef.prototype.count=0;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"count",box2d.b2ContactSolverDef.prototype.count);box2d.b2ContactSolverDef.prototype.positions=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"positions",box2d.b2ContactSolverDef.prototype.positions);box2d.b2ContactSolverDef.prototype.velocities=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"velocities",box2d.b2ContactSolverDef.prototype.velocities);box2d.b2ContactSolverDef.prototype.allocator=null;goog.exportProperty(box2d.b2ContactSolverDef.prototype,"allocator",box2d.b2ContactSolverDef.prototype.allocator);box2d.b2ContactSolver=function(){this.m_step=new box2d.b2TimeStep;this.m_positionConstraints=box2d.b2ContactPositionConstraint.MakeArray(1024);this.m_velocityConstraints=box2d.b2ContactVelocityConstraint.MakeArray(1024)};goog.exportSymbol("box2d.b2ContactSolver",box2d.b2ContactSolver);box2d.b2ContactSolver.prototype.m_step=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_step",box2d.b2ContactSolver.prototype.m_step);box2d.b2ContactSolver.prototype.m_positions=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_positions",box2d.b2ContactSolver.prototype.m_positions);box2d.b2ContactSolver.prototype.m_velocities=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_velocities",box2d.b2ContactSolver.prototype.m_velocities);box2d.b2ContactSolver.prototype.m_allocator=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_allocator",box2d.b2ContactSolver.prototype.m_allocator);box2d.b2ContactSolver.prototype.m_positionConstraints=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_positionConstraints",box2d.b2ContactSolver.prototype.m_positionConstraints);box2d.b2ContactSolver.prototype.m_velocityConstraints=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_velocityConstraints",box2d.b2ContactSolver.prototype.m_velocityConstraints);box2d.b2ContactSolver.prototype.m_contacts=null;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_contacts",box2d.b2ContactSolver.prototype.m_contacts);box2d.b2ContactSolver.prototype.m_count=0;goog.exportProperty(box2d.b2ContactSolver.prototype,"m_count",box2d.b2ContactSolver.prototype.m_count);box2d.b2ContactSolver.prototype.Initialize=function(A){this.m_step.Copy(A.step);this.m_allocator=A.allocator;this.m_count=A.count;if(this.m_positionConstraints.length<this.m_count){var z=box2d.b2Max(2*this.m_positionConstraints.length,this.m_count);for(box2d.DEBUG&&window.console.log("box2d.b2ContactSolver.m_positionConstraints: "+z);this.m_positionConstraints.length<z;){this.m_positionConstraints[this.m_positionConstraints.length]=new box2d.b2ContactPositionConstraint}}if(this.m_velocityConstraints.length<this.m_count){for(z=box2d.b2Max(2*this.m_velocityConstraints.length,this.m_count),box2d.DEBUG&&window.console.log("box2d.b2ContactSolver.m_velocityConstraints: "+z);this.m_velocityConstraints.length<z;){this.m_velocityConstraints[this.m_velocityConstraints.length]=new box2d.b2ContactVelocityConstraint}}this.m_positions=A.positions;this.m_velocities=A.velocities;this.m_contacts=A.contacts;var y,u,v,r,q,n,j,m;A=0;for(z=this.m_count;A<z;++A){for(v=this.m_contacts[A],r=v.m_fixtureA,q=v.m_fixtureB,y=r.GetShape(),u=q.GetShape(),y=y.m_radius,u=u.m_radius,n=r.GetBody(),j=q.GetBody(),q=v.GetManifold(),m=q.pointCount,box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<m),r=this.m_velocityConstraints[A],r.friction=v.m_friction,r.restitution=v.m_restitution,r.tangentSpeed=v.m_tangentSpeed,r.indexA=n.m_islandIndex,r.indexB=j.m_islandIndex,r.invMassA=n.m_invMass,r.invMassB=j.m_invMass,r.invIA=n.m_invI,r.invIB=j.m_invI,r.contactIndex=A,r.pointCount=m,r.K.SetZero(),r.normalMass.SetZero(),v=this.m_positionConstraints[A],v.indexA=n.m_islandIndex,v.indexB=j.m_islandIndex,v.invMassA=n.m_invMass,v.invMassB=j.m_invMass,v.localCenterA.Copy(n.m_sweep.localCenter),v.localCenterB.Copy(j.m_sweep.localCenter),v.invIA=n.m_invI,v.invIB=j.m_invI,v.localNormal.Copy(q.localNormal),v.localPoint.Copy(q.localPoint),v.pointCount=m,v.radiusA=y,v.radiusB=u,v.type=q.type,y=0,u=m;y<u;++y){n=q.points[y],m=r.points[y],this.m_step.warmStarting?(m.normalImpulse=this.m_step.dtRatio*n.normalImpulse,m.tangentImpulse=this.m_step.dtRatio*n.tangentImpulse):(m.normalImpulse=0,m.tangentImpulse=0),m.rA.SetZero(),m.rB.SetZero(),m.normalMass=0,m.tangentMass=0,m.velocityBias=0,v.localPoints[y].Copy(n.localPoint)}}return this};goog.exportProperty(box2d.b2ContactSolver.prototype,"Initialize",box2d.b2ContactSolver.prototype.Initialize);box2d.b2ContactSolver.prototype.InitializeVelocityConstraints=function(){var V,U,T,R,S,Q,P,O,M,N,L,K,J,I,H,E,G,C,B,j,F=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfA,z=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfB,A=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_worldManifold;V=0;for(U=this.m_count;V<U;++V){S=this.m_velocityConstraints[V];Q=this.m_positionConstraints[V];T=Q.radiusA;R=Q.radiusB;P=this.m_contacts[S.contactIndex].GetManifold();O=S.indexA;M=S.indexB;N=S.invMassA;L=S.invMassB;K=S.invIA;J=S.invIB;I=Q.localCenterA;H=Q.localCenterB;Q=this.m_positions[O].c;E=this.m_positions[O].a;G=this.m_velocities[O].v;O=this.m_velocities[O].w;C=this.m_positions[M].c;B=this.m_positions[M].a;j=this.m_velocities[M].v;M=this.m_velocities[M].w;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<P.pointCount);F.q.SetAngleRadians(E);z.q.SetAngleRadians(B);box2d.b2SubVV(Q,box2d.b2MulRV(F.q,I,box2d.b2Vec2.s_t0),F.p);box2d.b2SubVV(C,box2d.b2MulRV(z.q,H,box2d.b2Vec2.s_t0),z.p);A.Initialize(P,F,T,z,R);S.normal.Copy(A.normal);box2d.b2CrossVOne(S.normal,S.tangent);R=S.pointCount;for(T=0;T<R;++T){P=S.points[T],box2d.b2SubVV(A.points[T],Q,P.rA),box2d.b2SubVV(A.points[T],C,P.rB),I=box2d.b2CrossVV(P.rA,S.normal),H=box2d.b2CrossVV(P.rB,S.normal),I=N+L+K*I*I+J*H*H,P.normalMass=0<I?1/I:0,H=S.tangent,I=box2d.b2CrossVV(P.rA,H),H=box2d.b2CrossVV(P.rB,H),I=N+L+K*I*I+J*H*H,P.tangentMass=0<I?1/I:0,P.velocityBias=0,I=box2d.b2DotVV(S.normal,box2d.b2SubVV(box2d.b2AddVCrossSV(j,M,P.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(G,O,P.rA,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0)),I<-box2d.b2_velocityThreshold&&(P.velocityBias+=-S.restitution*I)}2==S.pointCount&&(G=S.points[0],C=S.points[1],Q=box2d.b2CrossVV(G.rA,S.normal),G=box2d.b2CrossVV(G.rB,S.normal),O=box2d.b2CrossVV(C.rA,S.normal),M=box2d.b2CrossVV(C.rB,S.normal),C=N+L+K*Q*Q+J*G*G,j=N+L+K*O*O+J*M*M,N=N+L+K*Q*O+J*G*M,C*C<1000*(C*j-N*N)?(S.K.ex.SetXY(C,N),S.K.ey.SetXY(N,j),S.K.GetInverse(S.normalMass)):S.pointCount=1)}};goog.exportProperty(box2d.b2ContactSolver.prototype,"InitializeVelocityConstraints",box2d.b2ContactSolver.prototype.InitializeVelocityConstraints);box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfA=new box2d.b2Transform;box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfB=new box2d.b2Transform;box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_worldManifold=new box2d.b2WorldManifold;box2d.b2ContactSolver.prototype.WarmStart=function(){var P,O,N,L,M,K,J,I,G,H,F,E,D,C,B,z,A,y,j=box2d.b2ContactSolver.prototype.WarmStart.s_P;P=0;for(O=this.m_count;P<O;++P){M=this.m_velocityConstraints[P];K=M.indexA;J=M.indexB;I=M.invMassA;G=M.invIA;H=M.invMassB;F=M.invIB;L=M.pointCount;E=this.m_velocities[K].v;D=this.m_velocities[K].w;C=this.m_velocities[J].v;B=this.m_velocities[J].w;z=M.normal;A=M.tangent;for(N=0;N<L;++N){y=M.points[N],box2d.b2AddVV(box2d.b2MulSV(y.normalImpulse,z,box2d.b2Vec2.s_t0),box2d.b2MulSV(y.tangentImpulse,A,box2d.b2Vec2.s_t1),j),D-=G*box2d.b2CrossVV(y.rA,j),E.SelfMulSub(I,j),B+=F*box2d.b2CrossVV(y.rB,j),C.SelfMulAdd(H,j)}this.m_velocities[K].w=D;this.m_velocities[J].w=B}};goog.exportProperty(box2d.b2ContactSolver.prototype,"WarmStart",box2d.b2ContactSolver.prototype.WarmStart);box2d.b2ContactSolver.prototype.WarmStart.s_P=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints=function(){var an,am,al,aj,ak,ai,ah,ag,ae,af,ad,ac,ab,Z,X,T,V,R,P,J=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv,U=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv1,L=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv2,N,W,aa=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P,S=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_a,Y=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_b,j=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_x,O=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_d,Q=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1,M=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P2,K=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1P2;an=0;for(am=this.m_count;an<am;++an){ak=this.m_velocityConstraints[an];ai=ak.indexA;ah=ak.indexB;ag=ak.invMassA;ae=ak.invIA;af=ak.invMassB;ad=ak.invIB;ac=ak.pointCount;ab=this.m_velocities[ai].v;Z=this.m_velocities[ai].w;X=this.m_velocities[ah].v;T=this.m_velocities[ah].w;V=ak.normal;R=ak.tangent;P=ak.friction;box2d.ENABLE_ASSERTS&&box2d.b2Assert(1==ac||2==ac);al=0;for(aj=ac;al<aj;++al){ac=ak.points[al],box2d.b2SubVV(box2d.b2AddVCrossSV(X,T,ac.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(ab,Z,ac.rA,box2d.b2Vec2.s_t1),J),N=box2d.b2DotVV(J,R)-ak.tangentSpeed,N=ac.tangentMass*-N,W=P*ac.normalImpulse,W=box2d.b2Clamp(ac.tangentImpulse+N,-W,W),N=W-ac.tangentImpulse,ac.tangentImpulse=W,box2d.b2MulSV(N,R,aa),ab.SelfMulSub(ag,aa),Z-=ae*box2d.b2CrossVV(ac.rA,aa),X.SelfMulAdd(af,aa),T+=ad*box2d.b2CrossVV(ac.rB,aa)}if(1==ak.pointCount){ac=ak.points[0],box2d.b2SubVV(box2d.b2AddVCrossSV(X,T,ac.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(ab,Z,ac.rA,box2d.b2Vec2.s_t1),J),ak=box2d.b2DotVV(J,V),N=-ac.normalMass*(ak-ac.velocityBias),W=box2d.b2Max(ac.normalImpulse+N,0),N=W-ac.normalImpulse,ac.normalImpulse=W,box2d.b2MulSV(N,V,aa),ab.SelfMulSub(ag,aa),Z-=ae*box2d.b2CrossVV(ac.rA,aa),X.SelfMulAdd(af,aa),T+=ad*box2d.b2CrossVV(ac.rB,aa)}else{for(al=ak.points[0],R=ak.points[1],S.SetXY(al.normalImpulse,R.normalImpulse),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=S.x&&0<=S.y),box2d.b2SubVV(box2d.b2AddVCrossSV(X,T,al.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(ab,Z,al.rA,box2d.b2Vec2.s_t1),U),box2d.b2SubVV(box2d.b2AddVCrossSV(X,T,R.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(ab,Z,R.rA,box2d.b2Vec2.s_t1),L),P=box2d.b2DotVV(U,V),ac=box2d.b2DotVV(L,V),Y.x=P-al.velocityBias,Y.y=ac-R.velocityBias,Y.SelfSub(box2d.b2MulMV(ak.K,S,box2d.b2Vec2.s_t0));;){box2d.b2MulMV(ak.normalMass,Y,j).SelfNeg();if(0<=j.x&&0<=j.y){box2d.b2SubVV(j,S,O);box2d.b2MulSV(O.x,V,Q);box2d.b2MulSV(O.y,V,M);box2d.b2AddVV(Q,M,K);ab.SelfMulSub(ag,K);Z-=ae*(box2d.b2CrossVV(al.rA,Q)+box2d.b2CrossVV(R.rA,M));X.SelfMulAdd(af,K);T+=ad*(box2d.b2CrossVV(al.rB,Q)+box2d.b2CrossVV(R.rB,M));al.normalImpulse=j.x;R.normalImpulse=j.y;break}j.x=-al.normalMass*Y.x;j.y=0;ac=ak.K.ex.y*j.x+Y.y;if(0<=j.x&&0<=ac){box2d.b2SubVV(j,S,O);box2d.b2MulSV(O.x,V,Q);box2d.b2MulSV(O.y,V,M);box2d.b2AddVV(Q,M,K);ab.SelfMulSub(ag,K);Z-=ae*(box2d.b2CrossVV(al.rA,Q)+box2d.b2CrossVV(R.rA,M));X.SelfMulAdd(af,K);T+=ad*(box2d.b2CrossVV(al.rB,Q)+box2d.b2CrossVV(R.rB,M));al.normalImpulse=j.x;R.normalImpulse=j.y;break}j.x=0;j.y=-R.normalMass*Y.y;P=ak.K.ey.x*j.y+Y.x;if(0<=j.y&&0<=P){box2d.b2SubVV(j,S,O);box2d.b2MulSV(O.x,V,Q);box2d.b2MulSV(O.y,V,M);box2d.b2AddVV(Q,M,K);ab.SelfMulSub(ag,K);Z-=ae*(box2d.b2CrossVV(al.rA,Q)+box2d.b2CrossVV(R.rA,M));X.SelfMulAdd(af,K);T+=ad*(box2d.b2CrossVV(al.rB,Q)+box2d.b2CrossVV(R.rB,M));al.normalImpulse=j.x;R.normalImpulse=j.y;break}j.x=0;j.y=0;P=Y.x;ac=Y.y;if(0<=P&&0<=ac){box2d.b2SubVV(j,S,O);box2d.b2MulSV(O.x,V,Q);box2d.b2MulSV(O.y,V,M);box2d.b2AddVV(Q,M,K);ab.SelfMulSub(ag,K);Z-=ae*(box2d.b2CrossVV(al.rA,Q)+box2d.b2CrossVV(R.rA,M));X.SelfMulAdd(af,K);T+=ad*(box2d.b2CrossVV(al.rB,Q)+box2d.b2CrossVV(R.rB,M));al.normalImpulse=j.x;R.normalImpulse=j.y;break}break}}this.m_velocities[ai].w=Z;this.m_velocities[ah].w=T}};goog.exportProperty(box2d.b2ContactSolver.prototype,"SolveVelocityConstraints",box2d.b2ContactSolver.prototype.SolveVelocityConstraints);box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv1=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv2=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_a=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_b=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_x=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_d=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P2=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1P2=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.StoreImpulses=function(){var j,g,q,m,n,k;j=0;for(g=this.m_count;j<g;++j){for(n=this.m_velocityConstraints[j],k=this.m_contacts[n.contactIndex].GetManifold(),q=0,m=n.pointCount;q<m;++q){k.points[q].normalImpulse=n.points[q].normalImpulse,k.points[q].tangentImpulse=n.points[q].tangentImpulse}}};goog.exportProperty(box2d.b2ContactSolver.prototype,"StoreImpulses",box2d.b2ContactSolver.prototype.StoreImpulses);box2d.b2PositionSolverManifold=function(){this.normal=new box2d.b2Vec2;this.point=new box2d.b2Vec2};goog.exportSymbol("box2d.b2PositionSolverManifold",box2d.b2PositionSolverManifold);box2d.b2PositionSolverManifold.prototype.normal=null;goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"normal",box2d.b2PositionSolverManifold.prototype.normal);box2d.b2PositionSolverManifold.prototype.point=null;goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"point",box2d.b2PositionSolverManifold.prototype.point);box2d.b2PositionSolverManifold.prototype.separation=0;goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"separation",box2d.b2PositionSolverManifold.prototype.separation);box2d.b2PositionSolverManifold.prototype.Initialize=function(k,j,v,r){var u=box2d.b2PositionSolverManifold.prototype.Initialize.s_pointA,q=box2d.b2PositionSolverManifold.prototype.Initialize.s_pointB,n=box2d.b2PositionSolverManifold.prototype.Initialize.s_planePoint,m=box2d.b2PositionSolverManifold.prototype.Initialize.s_clipPoint;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<k.pointCount);switch(k.type){case box2d.b2ManifoldType.e_circles:box2d.b2MulXV(j,k.localPoint,u);box2d.b2MulXV(v,k.localPoints[0],q);box2d.b2SubVV(q,u,this.normal).SelfNormalize();box2d.b2MidVV(u,q,this.point);this.separation=box2d.b2DotVV(box2d.b2SubVV(q,u,box2d.b2Vec2.s_t0),this.normal)-k.radiusA-k.radiusB;break;case box2d.b2ManifoldType.e_faceA:box2d.b2MulRV(j.q,k.localNormal,this.normal);box2d.b2MulXV(j,k.localPoint,n);box2d.b2MulXV(v,k.localPoints[r],m);this.separation=box2d.b2DotVV(box2d.b2SubVV(m,n,box2d.b2Vec2.s_t0),this.normal)-k.radiusA-k.radiusB;this.point.Copy(m);break;case box2d.b2ManifoldType.e_faceB:box2d.b2MulRV(v.q,k.localNormal,this.normal),box2d.b2MulXV(v,k.localPoint,n),box2d.b2MulXV(j,k.localPoints[r],m),this.separation=box2d.b2DotVV(box2d.b2SubVV(m,n,box2d.b2Vec2.s_t0),this.normal)-k.radiusA-k.radiusB,this.point.Copy(m),this.normal.SelfNeg()}};goog.exportProperty(box2d.b2PositionSolverManifold.prototype,"Initialize",box2d.b2PositionSolverManifold.prototype.Initialize);box2d.b2PositionSolverManifold.prototype.Initialize.s_pointA=new box2d.b2Vec2;box2d.b2PositionSolverManifold.prototype.Initialize.s_pointB=new box2d.b2Vec2;box2d.b2PositionSolverManifold.prototype.Initialize.s_planePoint=new box2d.b2Vec2;box2d.b2PositionSolverManifold.prototype.Initialize.s_clipPoint=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolvePositionConstraints=function(){var af,ae,ad,ab,ac,aa,Z,Y,W,X,V,U,T,R,P,L,N,J=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfA,I=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfB,F=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_psm,M,G,H,O=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rA,S=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rB,K,Q=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_P,j=0;af=0;for(ae=this.m_count;af<ae;++af){ac=this.m_positionConstraints[af];aa=ac.indexA;Z=ac.indexB;Y=ac.localCenterA;W=ac.invMassA;X=ac.invIA;V=ac.localCenterB;U=ac.invMassB;T=ac.invIB;ab=ac.pointCount;R=this.m_positions[aa].c;P=this.m_positions[aa].a;L=this.m_positions[Z].c;N=this.m_positions[Z].a;for(ad=0;ad<ab;++ad){J.q.SetAngleRadians(P),I.q.SetAngleRadians(N),box2d.b2SubVV(R,box2d.b2MulRV(J.q,Y,box2d.b2Vec2.s_t0),J.p),box2d.b2SubVV(L,box2d.b2MulRV(I.q,V,box2d.b2Vec2.s_t0),I.p),F.Initialize(ac,J,I,ad),M=F.normal,G=F.point,H=F.separation,box2d.b2SubVV(G,R,O),box2d.b2SubVV(G,L,S),j=box2d.b2Min(j,H),G=box2d.b2Clamp(box2d.b2_baumgarte*(H+box2d.b2_linearSlop),-box2d.b2_maxLinearCorrection,0),H=box2d.b2CrossVV(O,M),K=box2d.b2CrossVV(S,M),H=W+U+X*H*H+T*K*K,G=0<H?-G/H:0,box2d.b2MulSV(G,M,Q),R.SelfMulSub(W,Q),P-=X*box2d.b2CrossVV(O,Q),L.SelfMulAdd(U,Q),N+=T*box2d.b2CrossVV(S,Q)}this.m_positions[aa].a=P;this.m_positions[Z].a=N}return j>-3*box2d.b2_linearSlop};goog.exportProperty(box2d.b2ContactSolver.prototype,"SolvePositionConstraints",box2d.b2ContactSolver.prototype.SolvePositionConstraints);box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfA=new box2d.b2Transform;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfB=new box2d.b2Transform;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_psm=new box2d.b2PositionSolverManifold;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rA=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rB=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints=function(aj,ai){var ah,af,ag,ae,ad,ac,aa,ab,Z,Y,X,V,T,P,R,N,L,H=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfA,Q=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfB,I=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_psm,J,S,W,O=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rA,U=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rB,j,K=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_P,M=0;ah=0;for(af=this.m_count;ah<af;++ah){ad=this.m_positionConstraints[ah];ac=ad.indexA;aa=ad.indexB;ab=ad.localCenterA;Z=ad.localCenterB;ae=ad.pointCount;X=Y=0;if(ac==aj||ac==ai){Y=ad.invMassA,X=ad.invIA}T=V=0;if(aa==aj||aa==ai){V=ad.invMassB,T=ad.invIB}P=this.m_positions[ac].c;R=this.m_positions[ac].a;N=this.m_positions[aa].c;L=this.m_positions[aa].a;for(ag=0;ag<ae;++ag){H.q.SetAngleRadians(R),Q.q.SetAngleRadians(L),box2d.b2SubVV(P,box2d.b2MulRV(H.q,ab,box2d.b2Vec2.s_t0),H.p),box2d.b2SubVV(N,box2d.b2MulRV(Q.q,Z,box2d.b2Vec2.s_t0),Q.p),I.Initialize(ad,H,Q,ag),J=I.normal,S=I.point,W=I.separation,box2d.b2SubVV(S,P,O),box2d.b2SubVV(S,N,U),M=box2d.b2Min(M,W),S=box2d.b2Clamp(box2d.b2_toiBaumgarte*(W+box2d.b2_linearSlop),-box2d.b2_maxLinearCorrection,0),W=box2d.b2CrossVV(O,J),j=box2d.b2CrossVV(U,J),W=Y+V+X*W*W+T*j*j,S=0<W?-S/W:0,box2d.b2MulSV(S,J,K),P.SelfMulSub(Y,K),R-=X*box2d.b2CrossVV(O,K),N.SelfMulAdd(V,K),L+=T*box2d.b2CrossVV(U,K)}this.m_positions[ac].a=R;this.m_positions[aa].a=L}return M>=-1.5*box2d.b2_linearSlop};goog.exportProperty(box2d.b2ContactSolver.prototype,"SolveTOIPositionConstraints",box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints);box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfA=new box2d.b2Transform;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfB=new box2d.b2Transform;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_psm=new box2d.b2PositionSolverManifold;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rA=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rB=new box2d.b2Vec2;box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_P=new box2d.b2Vec2;box2d.b2WorldCallbacks={};box2d.b2DestructionListener=function(){};goog.exportSymbol("box2d.b2DestructionListener",box2d.b2DestructionListener);box2d.b2DestructionListener.prototype.SayGoodbyeJoint=function(b){};goog.exportProperty(box2d.b2DestructionListener.prototype,"SayGoodbyeJoint",box2d.b2DestructionListener.prototype.SayGoodbyeJoint);box2d.b2DestructionListener.prototype.SayGoodbyeFixture=function(b){};goog.exportProperty(box2d.b2DestructionListener.prototype,"SayGoodbyeFixture",box2d.b2DestructionListener.prototype.SayGoodbyeFixture);box2d.b2ContactFilter=function(){};goog.exportSymbol("box2d.b2ContactFilter",box2d.b2ContactFilter);box2d.b2ContactFilter.prototype.ShouldCollide=function(f,d){var j=f.GetFilterData(),g=d.GetFilterData();return j.groupIndex==g.groupIndex&&0!=j.groupIndex?0<j.groupIndex:0!=(j.maskBits&g.categoryBits)&&0!=(j.categoryBits&g.maskBits)};goog.exportProperty(box2d.b2ContactFilter.prototype,"ShouldCollide",box2d.b2ContactFilter.prototype.ShouldCollide);box2d.b2ContactFilter.b2_defaultFilter=new box2d.b2ContactFilter;box2d.b2ContactImpulse=function(){this.normalImpulses=box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints);this.tangentImpulses=box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints)};goog.exportSymbol("box2d.b2ContactImpulse",box2d.b2ContactImpulse);box2d.b2ContactImpulse.prototype.normalImpulses=null;box2d.b2ContactImpulse.prototype.tangentImpulses=null;box2d.b2ContactImpulse.prototype.count=0;box2d.b2ContactListener=function(){};goog.exportSymbol("box2d.b2ContactListener",box2d.b2ContactListener);box2d.b2ContactListener.prototype.BeginContact=function(b){};goog.exportProperty(box2d.b2ContactListener.prototype,"BeginContact",box2d.b2ContactListener.prototype.BeginContact);box2d.b2ContactListener.prototype.EndContact=function(b){};goog.exportProperty(box2d.b2ContactListener.prototype,"EndContact",box2d.b2ContactListener.prototype.EndContact);box2d.b2ContactListener.prototype.PreSolve=function(e,d){};goog.exportProperty(box2d.b2ContactListener.prototype,"PreSolve",box2d.b2ContactListener.prototype.PreSolve);box2d.b2ContactListener.prototype.PostSolve=function(e,d){};goog.exportProperty(box2d.b2ContactListener.prototype,"PostSolve",box2d.b2ContactListener.prototype.PostSolve);box2d.b2ContactListener.b2_defaultListener=new box2d.b2ContactListener;goog.exportProperty(box2d.b2ContactListener,"b2_defaultListener",box2d.b2ContactListener.b2_defaultListener);box2d.b2QueryCallback=function(){};goog.exportSymbol("box2d.b2QueryCallback",box2d.b2QueryCallback);box2d.b2QueryCallback.prototype.ReportFixture=function(b){return !0};goog.exportProperty(box2d.b2QueryCallback.prototype,"ReportFixture",box2d.b2QueryCallback.prototype.ReportFixture);box2d.b2RayCastCallback=function(){};goog.exportSymbol("box2d.b2RayCastCallback",box2d.b2RayCastCallback);box2d.b2RayCastCallback.prototype.ReportFixture=function(f,d,j,g){return g};goog.exportProperty(box2d.b2RayCastCallback.prototype,"ReportFixture",box2d.b2RayCastCallback.prototype.ReportFixture);box2d.b2Island=function(){this.m_bodies=Array(1024);this.m_contacts=Array(1024);this.m_joints=Array(1024);this.m_positions=box2d.b2Position.MakeArray(1024);this.m_velocities=box2d.b2Velocity.MakeArray(1024)};goog.exportSymbol("box2d.b2Island",box2d.b2Island);box2d.b2Island.prototype.m_allocator=null;goog.exportProperty(box2d.b2Island.prototype,"m_allocator",box2d.b2Island.prototype.m_allocator);box2d.b2Island.prototype.m_listener=null;goog.exportProperty(box2d.b2Island.prototype,"m_listener",box2d.b2Island.prototype.m_listener);box2d.b2Island.prototype.m_bodies=null;goog.exportProperty(box2d.b2Island.prototype,"m_bodies",box2d.b2Island.prototype.m_bodies);box2d.b2Island.prototype.m_contacts=null;goog.exportProperty(box2d.b2Island.prototype,"m_contacts",box2d.b2Island.prototype.m_contacts);box2d.b2Island.prototype.m_joints=null;goog.exportProperty(box2d.b2Island.prototype,"m_joints",box2d.b2Island.prototype.m_joints);box2d.b2Island.prototype.m_positions=null;goog.exportProperty(box2d.b2Island.prototype,"m_positions",box2d.b2Island.prototype.m_positions);box2d.b2Island.prototype.m_velocities=null;goog.exportProperty(box2d.b2Island.prototype,"m_velocities",box2d.b2Island.prototype.m_velocities);box2d.b2Island.prototype.m_bodyCount=0;goog.exportProperty(box2d.b2Island.prototype,"m_bodyCount",box2d.b2Island.prototype.m_bodyCount);box2d.b2Island.prototype.m_jointCount=0;goog.exportProperty(box2d.b2Island.prototype,"m_jointCount",box2d.b2Island.prototype.m_jointCount);box2d.b2Island.prototype.m_contactCount=0;goog.exportProperty(box2d.b2Island.prototype,"m_contactCount",box2d.b2Island.prototype.m_contactCount);box2d.b2Island.prototype.m_bodyCapacity=0;goog.exportProperty(box2d.b2Island.prototype,"m_bodyCapacity",box2d.b2Island.prototype.m_bodyCapacity);box2d.b2Island.prototype.m_contactCapacity=0;goog.exportProperty(box2d.b2Island.prototype,"m_contactCapacity",box2d.b2Island.prototype.m_contactCapacity);box2d.b2Island.prototype.m_jointCapacity=0;goog.exportProperty(box2d.b2Island.prototype,"m_jointCapacity",box2d.b2Island.prototype.m_jointCapacity);box2d.b2Island.prototype.Initialize=function(g,f,m,j,k){this.m_bodyCapacity=g;this.m_contactCapacity=f;this.m_jointCapacity=m;this.m_jointCount=this.m_contactCount=this.m_bodyCount=0;this.m_allocator=j;for(this.m_listener=k;this.m_bodies.length<g;){this.m_bodies[this.m_bodies.length]=null}for(;this.m_contacts.length<f;){this.m_contacts[this.m_contacts.length]=null}for(;this.m_joints.length<m;){this.m_joints[this.m_joints.length]=null}if(this.m_positions.length<g){for(f=box2d.b2Max(2*this.m_positions.length,g),box2d.DEBUG&&window.console.log("box2d.b2Island.m_positions: "+f);this.m_positions.length<f;){this.m_positions[this.m_positions.length]=new box2d.b2Position}}if(this.m_velocities.length<g){for(f=box2d.b2Max(2*this.m_velocities.length,g),box2d.DEBUG&&window.console.log("box2d.b2Island.m_velocities: "+f);this.m_velocities.length<f;){this.m_velocities[this.m_velocities.length]=new box2d.b2Velocity}}};goog.exportProperty(box2d.b2Island.prototype,"Initialize",box2d.b2Island.prototype.Initialize);box2d.b2Island.prototype.Clear=function(){this.m_jointCount=this.m_contactCount=this.m_bodyCount=0};goog.exportProperty(box2d.b2Island.prototype,"Clear",box2d.b2Island.prototype.Clear);box2d.b2Island.prototype.AddBody=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_bodyCount<this.m_bodyCapacity);b.m_islandIndex=this.m_bodyCount;this.m_bodies[this.m_bodyCount++]=b};goog.exportProperty(box2d.b2Island.prototype,"AddBody",box2d.b2Island.prototype.AddBody);box2d.b2Island.prototype.AddContact=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_contactCount<this.m_contactCapacity);this.m_contacts[this.m_contactCount++]=b};goog.exportProperty(box2d.b2Island.prototype,"AddContact",box2d.b2Island.prototype.AddContact);box2d.b2Island.prototype.AddJoint=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_jointCount<this.m_jointCapacity);this.m_joints[this.m_jointCount++]=b};goog.exportProperty(box2d.b2Island.prototype,"AddJoint",box2d.b2Island.prototype.AddJoint);box2d.b2Island.prototype.Solve=function(F,E,D,B){for(var C=box2d.b2Island.s_timer.Reset(),A=E.dt,z=0;z<this.m_bodyCount;++z){var y=this.m_bodies[z],u=this.m_positions[z].c.Copy(y.m_sweep.c),v=y.m_sweep.a,r=this.m_velocities[z].v.Copy(y.m_linearVelocity),q=y.m_angularVelocity;y.m_sweep.c0.Copy(y.m_sweep.c);y.m_sweep.a0=y.m_sweep.a;y.m_type==box2d.b2BodyType.b2_dynamicBody&&(r.x+=A*(y.m_gravityScale*D.x+y.m_invMass*y.m_force.x),r.y+=A*(y.m_gravityScale*D.y+y.m_invMass*y.m_force.y),q+=A*y.m_invI*y.m_torque,r.SelfMul(box2d.b2Clamp(1-A*y.m_linearDamping,0,1)),q*=box2d.b2Clamp(1-A*y.m_angularDamping,0,1));this.m_positions[z].a=v;this.m_velocities[z].w=q}C.Reset();y=box2d.b2Island.s_solverData;y.step.Copy(E);y.positions=this.m_positions;y.velocities=this.m_velocities;z=box2d.b2Island.s_contactSolverDef;z.step.Copy(E);z.contacts=this.m_contacts;z.count=this.m_contactCount;z.positions=this.m_positions;z.velocities=this.m_velocities;z.allocator=this.m_allocator;D=box2d.b2Island.s_contactSolver.Initialize(z);D.InitializeVelocityConstraints();E.warmStarting&&D.WarmStart();for(z=0;z<this.m_jointCount;++z){this.m_joints[z].InitVelocityConstraints(y)}F.solveInit=C.GetMilliseconds();C.Reset();for(z=0;z<E.velocityIterations;++z){for(v=0;v<this.m_jointCount;++v){this.m_joints[v].SolveVelocityConstraints(y)}D.SolveVelocityConstraints()}D.StoreImpulses();F.solveVelocity=C.GetMilliseconds();for(z=0;z<this.m_bodyCount;++z){var u=this.m_positions[z].c,v=this.m_positions[z].a,r=this.m_velocities[z].v,q=this.m_velocities[z].w,j=box2d.b2MulSV(A,r,box2d.b2Island.s_translation);box2d.b2DotVV(j,j)>box2d.b2_maxTranslationSquared&&(j=box2d.b2_maxTranslation/j.GetLength(),r.SelfMul(j));j=A*q;j*j>box2d.b2_maxRotationSquared&&(j=box2d.b2_maxRotation/box2d.b2Abs(j),q*=j);u.x+=A*r.x;u.y+=A*r.y;v+=A*q;this.m_positions[z].a=v;this.m_velocities[z].w=q}C.Reset();u=!1;for(z=0;z<E.positionIterations;++z){r=D.SolvePositionConstraints();q=!0;for(v=0;v<this.m_jointCount;++v){j=this.m_joints[v].SolvePositionConstraints(y),q=q&&j}if(r&&q){u=!0;break}}for(z=0;z<this.m_bodyCount;++z){E=this.m_bodies[z],E.m_sweep.c.Copy(this.m_positions[z].c),E.m_sweep.a=this.m_positions[z].a,E.m_linearVelocity.Copy(this.m_velocities[z].v),E.m_angularVelocity=this.m_velocities[z].w,E.SynchronizeTransform()}F.solvePosition=C.GetMilliseconds();this.Report(D.m_velocityConstraints);if(B){F=box2d.b2_maxFloat;B=box2d.b2_linearSleepTolerance*box2d.b2_linearSleepTolerance;C=box2d.b2_angularSleepTolerance*box2d.b2_angularSleepTolerance;for(z=0;z<this.m_bodyCount;++z){y=this.m_bodies[z],y.GetType()!=box2d.b2BodyType.b2_staticBody&&(0==(y.m_flags&box2d.b2BodyFlag.e_autoSleepFlag)||y.m_angularVelocity*y.m_angularVelocity>C||box2d.b2DotVV(y.m_linearVelocity,y.m_linearVelocity)>B?F=y.m_sleepTime=0:(y.m_sleepTime+=A,F=box2d.b2Min(F,y.m_sleepTime)))}if(F>=box2d.b2_timeToSleep&&u){for(z=0;z<this.m_bodyCount;++z){y=this.m_bodies[z],y.SetAwake(!1)}}}};goog.exportProperty(box2d.b2Island.prototype,"Solve",box2d.b2Island.prototype.Solve);box2d.b2Island.prototype.SolveTOI=function(k,j,v){box2d.ENABLE_ASSERTS&&box2d.b2Assert(j<this.m_bodyCount);box2d.ENABLE_ASSERTS&&box2d.b2Assert(v<this.m_bodyCount);for(var r=0;r<this.m_bodyCount;++r){var u=this.m_bodies[r];this.m_positions[r].c.Copy(u.m_sweep.c);this.m_positions[r].a=u.m_sweep.a;this.m_velocities[r].v.Copy(u.m_linearVelocity);this.m_velocities[r].w=u.m_angularVelocity}r=box2d.b2Island.s_contactSolverDef;r.contacts=this.m_contacts;r.count=this.m_contactCount;r.allocator=this.m_allocator;r.step.Copy(k);r.positions=this.m_positions;r.velocities=this.m_velocities;u=box2d.b2Island.s_contactSolver.Initialize(r);for(r=0;r<k.positionIterations&&!u.SolveTOIPositionConstraints(j,v);++r){}this.m_bodies[j].m_sweep.c0.Copy(this.m_positions[j].c);this.m_bodies[j].m_sweep.a0=this.m_positions[j].a;this.m_bodies[v].m_sweep.c0.Copy(this.m_positions[v].c);this.m_bodies[v].m_sweep.a0=this.m_positions[v].a;u.InitializeVelocityConstraints();for(r=0;r<k.velocityIterations;++r){u.SolveVelocityConstraints()}k=k.dt;for(r=0;r<this.m_bodyCount;++r){j=this.m_positions[r].c;v=this.m_positions[r].a;var q=this.m_velocities[r].v,n=this.m_velocities[r].w,m=box2d.b2MulSV(k,q,box2d.b2Island.s_translation);box2d.b2DotVV(m,m)>box2d.b2_maxTranslationSquared&&(m=box2d.b2_maxTranslation/m.GetLength(),q.SelfMul(m));m=k*n;m*m>box2d.b2_maxRotationSquared&&(m=box2d.b2_maxRotation/box2d.b2Abs(m),n*=m);j.SelfMulAdd(k,q);v+=k*n;this.m_positions[r].a=v;this.m_velocities[r].w=n;m=this.m_bodies[r];m.m_sweep.c.Copy(j);m.m_sweep.a=v;m.m_linearVelocity.Copy(q);m.m_angularVelocity=n;m.SynchronizeTransform()}this.Report(u.m_velocityConstraints)};goog.exportProperty(box2d.b2Island.prototype,"SolveTOI",box2d.b2Island.prototype.SolveTOI);box2d.b2Island.prototype.Report=function(j){if(null!=this.m_listener){for(var g=0;g<this.m_contactCount;++g){var q=this.m_contacts[g];if(q){var m=j[g],n=box2d.b2Island.s_impulse;n.count=m.pointCount;for(var k=0;k<m.pointCount;++k){n.normalImpulses[k]=m.points[k].normalImpulse,n.tangentImpulses[k]=m.points[k].tangentImpulse}this.m_listener.PostSolve(q,n)}}}};goog.exportProperty(box2d.b2Island.prototype,"Report",box2d.b2Island.prototype.Report);box2d.b2Island.s_timer=new box2d.b2Timer;box2d.b2Island.s_solverData=new box2d.b2SolverData;box2d.b2Island.s_contactSolverDef=new box2d.b2ContactSolverDef;box2d.b2Island.s_contactSolver=new box2d.b2ContactSolver;box2d.b2Island.s_translation=new box2d.b2Vec2;box2d.b2Island.s_impulse=new box2d.b2ContactImpulse;box2d.b2ContactRegister=function(){};goog.exportSymbol("box2d.b2ContactRegister",box2d.b2ContactRegister);box2d.b2ContactRegister.prototype.createFcn=null;box2d.b2ContactRegister.prototype.destroyFcn=null;box2d.b2ContactRegister.prototype.primary=!1;box2d.b2ContactFactory=function(b){this.m_allocator=b;this.InitializeRegisters()};goog.exportSymbol("box2d.b2ContactFactory",box2d.b2ContactFactory);box2d.b2ContactFactory.prototype.m_allocator=null;box2d.b2ContactFactory.prototype.AddType=function(j,g,q,m){var n=box2d.b2MakeArray(256,function(d){return j()});g=function(d){return 0<n.length?n.pop():j(d)};var k=function(e,d){n.push(e)};this.m_registers[q][m].pool=n;this.m_registers[q][m].createFcn=g;this.m_registers[q][m].destroyFcn=k;this.m_registers[q][m].primary=!0;q!=m&&(this.m_registers[m][q].pool=n,this.m_registers[m][q].createFcn=g,this.m_registers[m][q].destroyFcn=k,this.m_registers[m][q].primary=!1)};goog.exportProperty(box2d.b2ContactFactory.prototype,"AddType",box2d.b2ContactFactory.prototype.AddType);box2d.b2ContactFactory.prototype.InitializeRegisters=function(){this.m_registers=Array(box2d.b2ShapeType.e_shapeTypeCount);for(var e=0;e<box2d.b2ShapeType.e_shapeTypeCount;e++){this.m_registers[e]=Array(box2d.b2ShapeType.e_shapeTypeCount);for(var d=0;d<box2d.b2ShapeType.e_shapeTypeCount;d++){this.m_registers[e][d]=new box2d.b2ContactRegister}}this.AddType(box2d.b2CircleContact.Create,box2d.b2CircleContact.Destroy,box2d.b2ShapeType.e_circleShape,box2d.b2ShapeType.e_circleShape);this.AddType(box2d.b2PolygonAndCircleContact.Create,box2d.b2PolygonAndCircleContact.Destroy,box2d.b2ShapeType.e_polygonShape,box2d.b2ShapeType.e_circleShape);this.AddType(box2d.b2PolygonContact.Create,box2d.b2PolygonContact.Destroy,box2d.b2ShapeType.e_polygonShape,box2d.b2ShapeType.e_polygonShape);this.AddType(box2d.b2EdgeAndCircleContact.Create,box2d.b2EdgeAndCircleContact.Destroy,box2d.b2ShapeType.e_edgeShape,box2d.b2ShapeType.e_circleShape);this.AddType(box2d.b2EdgeAndPolygonContact.Create,box2d.b2EdgeAndPolygonContact.Destroy,box2d.b2ShapeType.e_edgeShape,box2d.b2ShapeType.e_polygonShape);this.AddType(box2d.b2ChainAndCircleContact.Create,box2d.b2ChainAndCircleContact.Destroy,box2d.b2ShapeType.e_chainShape,box2d.b2ShapeType.e_circleShape);this.AddType(box2d.b2ChainAndPolygonContact.Create,box2d.b2ChainAndPolygonContact.Destroy,box2d.b2ShapeType.e_chainShape,box2d.b2ShapeType.e_polygonShape)};goog.exportProperty(box2d.b2ContactFactory.prototype,"InitializeRegisters",box2d.b2ContactFactory.prototype.InitializeRegisters);box2d.b2ContactFactory.prototype.Create=function(j,g,q,m){var n=j.GetType(),k=q.GetType();box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=n&&n<box2d.b2ShapeType.e_shapeTypeCount);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=k&&k<box2d.b2ShapeType.e_shapeTypeCount);n=this.m_registers[n][k];k=n.createFcn;return null!=k?(n.primary?(n=k(this.m_allocator),n.Reset(j,g,q,m)):(n=k(this.m_allocator),n.Reset(q,m,j,g)),n):null};goog.exportProperty(box2d.b2ContactFactory.prototype,"Create",box2d.b2ContactFactory.prototype.Create);box2d.b2ContactFactory.prototype.Destroy=function(e){var d=e.m_fixtureA,f=e.m_fixtureB;0<e.m_manifold.pointCount&&(!1==d.IsSensor()&&!1==f.IsSensor())&&(d.GetBody().SetAwake(!0),f.GetBody().SetAwake(!0));d=d.GetType();f=f.GetType();box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=d&&f<box2d.b2ShapeType.e_shapeTypeCount);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=d&&f<box2d.b2ShapeType.e_shapeTypeCount);f=this.m_registers[d][f].destroyFcn;f(e,this.m_allocator)};goog.exportProperty(box2d.b2ContactFactory.prototype,"Destroy",box2d.b2ContactFactory.prototype.Destroy);box2d.b2GrowableStack=function(b){this.m_stack=Array(b)};goog.exportSymbol("box2d.b2GrowableStack",box2d.b2GrowableStack);box2d.b2GrowableStack.prototype.m_stack=null;goog.exportProperty(box2d.b2GrowableStack.prototype,"m_stack",box2d.b2GrowableStack.prototype.m_stack);box2d.b2GrowableStack.prototype.m_count=0;goog.exportProperty(box2d.b2GrowableStack.prototype,"m_count",box2d.b2GrowableStack.prototype.m_count);box2d.b2GrowableStack.prototype.Reset=function(){this.m_count=0;return this};goog.exportProperty(box2d.b2GrowableStack.prototype,"Reset",box2d.b2GrowableStack.prototype.Reset);box2d.b2GrowableStack.prototype.Push=function(b){this.m_stack[this.m_count]=b;++this.m_count};goog.exportProperty(box2d.b2GrowableStack.prototype,"Push",box2d.b2GrowableStack.prototype.Push);box2d.b2GrowableStack.prototype.Pop=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_count);--this.m_count;var b=this.m_stack[this.m_count];this.m_stack[this.m_count]=null;return b};goog.exportProperty(box2d.b2GrowableStack.prototype,"Pop",box2d.b2GrowableStack.prototype.Pop);box2d.b2GrowableStack.prototype.GetCount=function(){return this.m_count};goog.exportProperty(box2d.b2GrowableStack.prototype,"GetCount",box2d.b2GrowableStack.prototype.GetCount);box2d.b2TreeNode=function(b){this.m_id=b||0;this.aabb=new box2d.b2AABB};goog.exportSymbol("box2d.b2TreeNode",box2d.b2TreeNode);box2d.b2TreeNode.prototype.m_id=0;goog.exportProperty(box2d.b2TreeNode.prototype,"m_id",box2d.b2TreeNode.prototype.m_id);box2d.b2TreeNode.prototype.aabb=null;goog.exportProperty(box2d.b2TreeNode.prototype,"aabb",box2d.b2TreeNode.prototype.aabb);box2d.b2TreeNode.prototype.userData=null;goog.exportProperty(box2d.b2TreeNode.prototype,"userData",box2d.b2TreeNode.prototype.userData);box2d.b2TreeNode.prototype.parent=null;goog.exportProperty(box2d.b2TreeNode.prototype,"parent",box2d.b2TreeNode.prototype.parent);box2d.b2TreeNode.prototype.child1=null;goog.exportProperty(box2d.b2TreeNode.prototype,"child1",box2d.b2TreeNode.prototype.child1);box2d.b2TreeNode.prototype.child2=null;goog.exportProperty(box2d.b2TreeNode.prototype,"child2",box2d.b2TreeNode.prototype.child2);box2d.b2TreeNode.prototype.height=0;goog.exportProperty(box2d.b2TreeNode.prototype,"height",box2d.b2TreeNode.prototype.height);box2d.b2TreeNode.prototype.IsLeaf=function(){return null==this.child1};goog.exportProperty(box2d.b2TreeNode.prototype,"IsLeaf",box2d.b2TreeNode.prototype.IsLeaf);box2d.b2DynamicTree=function(){};goog.exportSymbol("box2d.b2DynamicTree",box2d.b2DynamicTree);box2d.b2DynamicTree.prototype.m_root=null;goog.exportProperty(box2d.b2DynamicTree.prototype,"m_root",box2d.b2DynamicTree.prototype.m_root);box2d.b2DynamicTree.prototype.m_freeList=null;goog.exportProperty(box2d.b2DynamicTree.prototype,"m_freeList",box2d.b2DynamicTree.prototype.m_freeList);box2d.b2DynamicTree.prototype.m_path=0;goog.exportProperty(box2d.b2DynamicTree.prototype,"m_path",box2d.b2DynamicTree.prototype.m_path);box2d.b2DynamicTree.prototype.m_insertionCount=0;goog.exportProperty(box2d.b2DynamicTree.prototype,"m_insertionCount",box2d.b2DynamicTree.prototype.m_insertionCount);box2d.b2DynamicTree.s_stack=new box2d.b2GrowableStack(256);box2d.b2DynamicTree.s_r=new box2d.b2Vec2;box2d.b2DynamicTree.s_v=new box2d.b2Vec2;box2d.b2DynamicTree.s_abs_v=new box2d.b2Vec2;box2d.b2DynamicTree.s_segmentAABB=new box2d.b2AABB;box2d.b2DynamicTree.s_subInput=new box2d.b2RayCastInput;box2d.b2DynamicTree.s_combinedAABB=new box2d.b2AABB;box2d.b2DynamicTree.s_aabb=new box2d.b2AABB;box2d.b2DynamicTree.prototype.GetUserData=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!=b);return b.userData};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetUserData",box2d.b2DynamicTree.prototype.GetUserData);box2d.b2DynamicTree.prototype.GetFatAABB=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!=b);return b.aabb};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetFatAABB",box2d.b2DynamicTree.prototype.GetFatAABB);box2d.b2DynamicTree.prototype.Query=function(f,d){if(null!=this.m_root){var j=box2d.b2DynamicTree.s_stack.Reset();for(j.Push(this.m_root);0<j.GetCount();){var g=j.Pop();if(null!=g&&g.aabb.TestOverlap(d)){if(g.IsLeaf()){if(!1==f(g)){break}}else{j.Push(g.child1),j.Push(g.child2)}}}}};goog.exportProperty(box2d.b2DynamicTree.prototype,"Query",box2d.b2DynamicTree.prototype.Query);box2d.b2DynamicTree.prototype.RayCast=function(E,D){if(null!=this.m_root){var C=D.p1,A=D.p2,B=box2d.b2SubVV(A,C,box2d.b2DynamicTree.s_r);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<B.GetLengthSquared());B.Normalize();var B=box2d.b2CrossOneV(B,box2d.b2DynamicTree.s_v),z=box2d.b2AbsV(B,box2d.b2DynamicTree.s_abs_v),y=D.maxFraction,v=box2d.b2DynamicTree.s_segmentAABB,r=C.x+y*(A.x-C.x),u=C.y+y*(A.y-C.y);v.lowerBound.x=box2d.b2Min(C.x,r);v.lowerBound.y=box2d.b2Min(C.y,u);v.upperBound.x=box2d.b2Max(C.x,r);v.upperBound.y=box2d.b2Max(C.y,u);var q=box2d.b2DynamicTree.s_stack.Reset();for(q.Push(this.m_root);0<q.GetCount();){if(r=q.Pop(),null!=r&&!1!=box2d.b2TestOverlapAABB(r.aabb,v)){var u=r.aabb.GetCenter(),j=r.aabb.GetExtents();if(!(0<box2d.b2Abs(box2d.b2DotVV(B,box2d.b2SubVV(C,u,box2d.b2Vec2.s_t0)))-box2d.b2DotVV(z,j))){if(r.IsLeaf()){u=box2d.b2DynamicTree.s_subInput;u.p1.Copy(D.p1);u.p2.Copy(D.p2);u.maxFraction=y;r=E(u,r);if(0==r){break}0<r&&(y=r,r=C.x+y*(A.x-C.x),u=C.y+y*(A.y-C.y),v.lowerBound.x=box2d.b2Min(C.x,r),v.lowerBound.y=box2d.b2Min(C.y,u),v.upperBound.x=box2d.b2Max(C.x,r),v.upperBound.y=box2d.b2Max(C.y,u))}else{q.Push(r.child1),q.Push(r.child2)}}}}}};goog.exportProperty(box2d.b2DynamicTree.prototype,"RayCast",box2d.b2DynamicTree.prototype.RayCast);box2d.b2DynamicTree.prototype.AllocateNode=function(){if(this.m_freeList){var b=this.m_freeList;this.m_freeList=b.parent;b.parent=null;b.child1=null;b.child2=null;b.height=0;b.userData=null;return b}return new box2d.b2TreeNode(box2d.b2DynamicTree.prototype.s_node_id++)};goog.exportProperty(box2d.b2DynamicTree.prototype,"AllocateNode",box2d.b2DynamicTree.prototype.AllocateNode);box2d.b2DynamicTree.prototype.s_node_id=0;box2d.b2DynamicTree.prototype.FreeNode=function(b){b.parent=this.m_freeList;b.height=-1;this.m_freeList=b};goog.exportProperty(box2d.b2DynamicTree.prototype,"FreeNode",box2d.b2DynamicTree.prototype.FreeNode);box2d.b2DynamicTree.prototype.CreateProxy=function(g,f){var m=this.AllocateNode(),j=box2d.b2_aabbExtension,k=box2d.b2_aabbExtension;m.aabb.lowerBound.x=g.lowerBound.x-j;m.aabb.lowerBound.y=g.lowerBound.y-k;m.aabb.upperBound.x=g.upperBound.x+j;m.aabb.upperBound.y=g.upperBound.y+k;m.userData=f;m.height=0;this.InsertLeaf(m);return m};goog.exportProperty(box2d.b2DynamicTree.prototype,"CreateProxy",box2d.b2DynamicTree.prototype.CreateProxy);box2d.b2DynamicTree.prototype.DestroyProxy=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(b.IsLeaf());this.RemoveLeaf(b);this.FreeNode(b)};goog.exportProperty(box2d.b2DynamicTree.prototype,"DestroyProxy",box2d.b2DynamicTree.prototype.DestroyProxy);box2d.b2DynamicTree.prototype.MoveProxy=function(f,d,j){box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.IsLeaf());if(f.aabb.Contains(d)){return !1}this.RemoveLeaf(f);var g=box2d.b2_aabbExtension+box2d.b2_aabbMultiplier*(0<j.x?j.x:-j.x);j=box2d.b2_aabbExtension+box2d.b2_aabbMultiplier*(0<j.y?j.y:-j.y);f.aabb.lowerBound.x=d.lowerBound.x-g;f.aabb.lowerBound.y=d.lowerBound.y-j;f.aabb.upperBound.x=d.upperBound.x+g;f.aabb.upperBound.y=d.upperBound.y+j;this.InsertLeaf(f);return !0};goog.exportProperty(box2d.b2DynamicTree.prototype,"MoveProxy",box2d.b2DynamicTree.prototype.MoveProxy);box2d.b2DynamicTree.prototype.InsertLeaf=function(C){++this.m_insertionCount;if(null==this.m_root){this.m_root=C,this.m_root.parent=null}else{var B=C.aabb;B.GetCenter();for(var A=this.m_root,y,z;!1==A.IsLeaf();){y=A.child1;z=A.child2;var v=A.aabb.GetPerimeter(),u=box2d.b2DynamicTree.s_combinedAABB;u.Combine2(A.aabb,B);var r=u.GetPerimeter(),u=2*r,r=2*(r-v),n=box2d.b2DynamicTree.s_aabb,q,j;y.IsLeaf()?(n.Combine2(B,y.aabb),v=n.GetPerimeter()+r):(n.Combine2(B,y.aabb),q=y.aabb.GetPerimeter(),j=n.GetPerimeter(),v=j-q+r);z.IsLeaf()?(n.Combine2(B,z.aabb),r=n.GetPerimeter()+r):(n.Combine2(B,z.aabb),q=z.aabb.GetPerimeter(),j=n.GetPerimeter(),r=j-q+r);if(u<v&&u<r){break}A=v<r?y:z}y=A.parent;z=this.AllocateNode();z.parent=y;z.userData=null;z.aabb.Combine2(B,A.aabb);z.height=A.height+1;y?(y.child1==A?y.child1=z:y.child2=z,z.child1=A,z.child2=C,A.parent=z,C.parent=z):(z.child1=A,z.child2=C,A.parent=z,this.m_root=C.parent=z);for(A=C.parent;null!=A;){A=this.Balance(A),y=A.child1,z=A.child2,box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!=y),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!=z),A.height=1+box2d.b2Max(y.height,z.height),A.aabb.Combine2(y.aabb,z.aabb),A=A.parent}}};goog.exportProperty(box2d.b2DynamicTree.prototype,"InsertLeaf",box2d.b2DynamicTree.prototype.InsertLeaf);box2d.b2DynamicTree.prototype.RemoveLeaf=function(e){if(e==this.m_root){this.m_root=null}else{var d=e.parent,f=d.parent;e=d.child1==e?d.child2:d.child1;if(f){for(f.child1==d?f.child1=e:f.child2=e,e.parent=f,this.FreeNode(d),d=f;d;){d=this.Balance(d),f=d.child1,e=d.child2,d.aabb.Combine2(f.aabb,e.aabb),d.height=1+box2d.b2Max(f.height,e.height),d=d.parent}}else{this.m_root=e,e.parent=null,this.FreeNode(d)}}};goog.exportProperty(box2d.b2DynamicTree.prototype,"RemoveLeaf",box2d.b2DynamicTree.prototype.RemoveLeaf);box2d.b2DynamicTree.prototype.Balance=function(g){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!=g);if(g.IsLeaf()||2>g.height){return g}var f=g.child1,m=g.child2,j=m.height-f.height;if(1<j){var j=m.child1,k=m.child2;m.child1=g;m.parent=g.parent;g.parent=m;null!=m.parent?m.parent.child1==g?m.parent.child1=m:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(m.parent.child2==g),m.parent.child2=m):this.m_root=m;j.height>k.height?(m.child2=j,g.child2=k,k.parent=g,g.aabb.Combine2(f.aabb,k.aabb),m.aabb.Combine2(g.aabb,j.aabb),g.height=1+box2d.b2Max(f.height,k.height),m.height=1+box2d.b2Max(g.height,j.height)):(m.child2=k,g.child2=j,j.parent=g,g.aabb.Combine2(f.aabb,j.aabb),m.aabb.Combine2(g.aabb,k.aabb),g.height=1+box2d.b2Max(f.height,j.height),m.height=1+box2d.b2Max(g.height,k.height));return m}return -1>j?(j=f.child1,k=f.child2,f.child1=g,f.parent=g.parent,g.parent=f,null!=f.parent?f.parent.child1==g?f.parent.child1=f:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.parent.child2==g),f.parent.child2=f):this.m_root=f,j.height>k.height?(f.child2=j,g.child1=k,k.parent=g,g.aabb.Combine2(m.aabb,k.aabb),f.aabb.Combine2(g.aabb,j.aabb),g.height=1+box2d.b2Max(m.height,k.height),f.height=1+box2d.b2Max(g.height,j.height)):(f.child2=k,g.child1=j,j.parent=g,g.aabb.Combine2(m.aabb,j.aabb),f.aabb.Combine2(g.aabb,k.aabb),g.height=1+box2d.b2Max(m.height,j.height),f.height=1+box2d.b2Max(g.height,k.height)),f):g};goog.exportProperty(box2d.b2DynamicTree.prototype,"Balance",box2d.b2DynamicTree.prototype.Balance);box2d.b2DynamicTree.prototype.GetHeight=function(){return null==this.m_root?0:this.m_root.height};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetHeight",box2d.b2DynamicTree.prototype.GetHeight);box2d.b2DynamicTree.prototype.GetAreaRatio=function(){if(null==this.m_root){return 0}var e=this.m_root.aabb.GetPerimeter(),d=function(b){if(null==b||b.IsLeaf()){return 0}var f=b.aabb.GetPerimeter(),f=f+d(b.child1);return f+=d(b.child2)};return d(this.m_root)/e};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetAreaRatio",box2d.b2DynamicTree.prototype.GetAreaRatio);box2d.b2DynamicTree.prototype.ComputeHeightNode=function(e){if(e.IsLeaf()){return 0}var d=this.ComputeHeightNode(e.child1);e=this.ComputeHeightNode(e.child2);return 1+box2d.b2Max(d,e)};goog.exportProperty(box2d.b2DynamicTree.prototype,"ComputeHeightNode",box2d.b2DynamicTree.prototype.ComputeHeightNode);box2d.b2DynamicTree.prototype.ComputeHeight=function(){return this.ComputeHeightNode(this.m_root)};goog.exportProperty(box2d.b2DynamicTree.prototype,"ComputeHeight",box2d.b2DynamicTree.prototype.ComputeHeight);box2d.b2DynamicTree.prototype.ValidateStructure=function(e){if(null!=e){e==this.m_root&&box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==e.parent);var d=e.child1,f=e.child2;e.IsLeaf()?(box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==d),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==f),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0==e.height)):(box2d.ENABLE_ASSERTS&&box2d.b2Assert(d.parent==e),box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.parent==e),this.ValidateStructure(d),this.ValidateStructure(f))}};goog.exportProperty(box2d.b2DynamicTree.prototype,"ValidateStructure",box2d.b2DynamicTree.prototype.ValidateStructure);box2d.b2DynamicTree.prototype.ValidateMetrics=function(f){if(null!=f){var d=f.child1,j=f.child2;if(f.IsLeaf()){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==d),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null==j),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0==f.height)}else{var g;g=1+box2d.b2Max(d.height,j.height);box2d.ENABLE_ASSERTS&&box2d.b2Assert(f.height==g);g=box2d.b2DynamicTree.s_aabb;g.Combine2(d.aabb,j.aabb);box2d.ENABLE_ASSERTS&&box2d.b2Assert(g.lowerBound==f.aabb.lowerBound);box2d.ENABLE_ASSERTS&&box2d.b2Assert(g.upperBound==f.aabb.upperBound);this.ValidateMetrics(d);this.ValidateMetrics(j)}}};goog.exportProperty(box2d.b2DynamicTree.prototype,"ValidateMetrics",box2d.b2DynamicTree.prototype.ValidateMetrics);box2d.b2DynamicTree.prototype.Validate=function(){this.ValidateStructure(this.m_root);this.ValidateMetrics(this.m_root);for(var e=0,d=this.m_freeList;null!=d;){d=d.parent,++e}box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.GetHeight()==this.ComputeHeight())};goog.exportProperty(box2d.b2DynamicTree.prototype,"Validate",box2d.b2DynamicTree.prototype.Validate);box2d.b2DynamicTree.prototype.GetMaxBalance=function(){var b;b=this.m_root;null==b?b=0:1>=b.height?b=0:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==b.IsLeaf()),b=box2d.b2Abs(b.child2.height-b.child1.height),b=box2d.b2Max(0,b));return b};goog.exportProperty(box2d.b2DynamicTree.prototype,"GetMaxBalance",box2d.b2DynamicTree.prototype.GetMaxBalance);box2d.b2DynamicTree.prototype.RebuildBottomUp=function(){this.Validate()};goog.exportProperty(box2d.b2DynamicTree.prototype,"RebuildBottomUp",box2d.b2DynamicTree.prototype.RebuildBottomUp);box2d.b2DynamicTree.prototype.ShiftOrigin=function(e){var d=function(b,f){if(null!=b&&!(1>=b.height)){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==b.IsLeaf());var g=b.child2;d(b.child1,f);d(g,f);b.aabb.lowerBound.SelfSub(f);b.aabb.upperBound.SelfSub(f)}};d(this.m_root,e)};goog.exportProperty(box2d.b2DynamicTree.prototype,"ShiftOrigin",box2d.b2DynamicTree.prototype.ShiftOrigin);box2d.b2Pair=function(){};goog.exportSymbol("box2d.b2Pair",box2d.b2Pair);box2d.b2Pair.prototype.proxyA=null;goog.exportProperty(box2d.b2Pair.prototype,"proxyA",box2d.b2Pair.prototype.proxyA);box2d.b2Pair.prototype.proxyB=null;goog.exportProperty(box2d.b2Pair.prototype,"proxyB",box2d.b2Pair.prototype.proxyB);box2d.b2BroadPhase=function(){this.m_tree=new box2d.b2DynamicTree;this.m_moveBuffer=[];this.m_pairBuffer=[]};goog.exportSymbol("box2d.b2BroadPhase",box2d.b2BroadPhase);box2d.b2BroadPhase.prototype.m_tree=null;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_tree",box2d.b2BroadPhase.prototype.m_tree);box2d.b2BroadPhase.prototype.m_proxyCount=0;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_proxyCount",box2d.b2BroadPhase.prototype.m_proxyCount);box2d.b2BroadPhase.prototype.m_moveCount=0;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_moveCount",box2d.b2BroadPhase.prototype.m_moveCount);box2d.b2BroadPhase.prototype.m_moveBuffer=null;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_moveBuffer",box2d.b2BroadPhase.prototype.m_moveBuffer);box2d.b2BroadPhase.prototype.m_pairCount=0;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_pairCount",box2d.b2BroadPhase.prototype.m_pairCount);box2d.b2BroadPhase.prototype.m_pairBuffer=null;goog.exportProperty(box2d.b2BroadPhase.prototype,"m_pairBuffer",box2d.b2BroadPhase.prototype.m_pairBuffer);box2d.b2BroadPhase.prototype.CreateProxy=function(e,d){var f=this.m_tree.CreateProxy(e,d);++this.m_proxyCount;this.BufferMove(f);return f};goog.exportProperty(box2d.b2BroadPhase.prototype,"CreateProxy",box2d.b2BroadPhase.prototype.CreateProxy);box2d.b2BroadPhase.prototype.DestroyProxy=function(b){this.UnBufferMove(b);--this.m_proxyCount;this.m_tree.DestroyProxy(b)};goog.exportProperty(box2d.b2BroadPhase.prototype,"DestroyProxy",box2d.b2BroadPhase.prototype.DestroyProxy);box2d.b2BroadPhase.prototype.MoveProxy=function(e,d,f){this.m_tree.MoveProxy(e,d,f)&&this.BufferMove(e)};goog.exportProperty(box2d.b2BroadPhase.prototype,"MoveProxy",box2d.b2BroadPhase.prototype.MoveProxy);box2d.b2BroadPhase.prototype.TouchProxy=function(b){this.BufferMove(b)};goog.exportProperty(box2d.b2BroadPhase.prototype,"TouchProxy",box2d.b2BroadPhase.prototype.TouchProxy);box2d.b2BroadPhase.prototype.GetFatAABB=function(b){return this.m_tree.GetFatAABB(b)};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetFatAABB",box2d.b2BroadPhase.prototype.GetFatAABB);box2d.b2BroadPhase.prototype.GetUserData=function(b){return this.m_tree.GetUserData(b)};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetUserData",box2d.b2BroadPhase.prototype.GetUserData);box2d.b2BroadPhase.prototype.TestOverlap=function(f,d){var j=this.m_tree.GetFatAABB(f),g=this.m_tree.GetFatAABB(d);return box2d.b2TestOverlapAABB(j,g)};goog.exportProperty(box2d.b2BroadPhase.prototype,"TestOverlap",box2d.b2BroadPhase.prototype.TestOverlap);box2d.b2BroadPhase.prototype.GetProxyCount=function(){return this.m_proxyCount};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetProxyCount",box2d.b2BroadPhase.prototype.GetProxyCount);box2d.b2BroadPhase.prototype.GetTreeHeight=function(){return this.m_tree.GetHeight()};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetTreeHeight",box2d.b2BroadPhase.prototype.GetTreeHeight);box2d.b2BroadPhase.prototype.GetTreeBalance=function(){return this.m_tree.GetMaxBalance()};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetTreeBalance",box2d.b2BroadPhase.prototype.GetTreeBalance);box2d.b2BroadPhase.prototype.GetTreeQuality=function(){return this.m_tree.GetAreaRatio()};goog.exportProperty(box2d.b2BroadPhase.prototype,"GetTreeQuality",box2d.b2BroadPhase.prototype.GetTreeQuality);box2d.b2BroadPhase.prototype.ShiftOrigin=function(b){this.m_tree.ShiftOrigin(b)};goog.exportProperty(box2d.b2BroadPhase.prototype,"ShiftOrigin",box2d.b2BroadPhase.prototype.ShiftOrigin);box2d.b2BroadPhase.prototype.UpdatePairs=function(k){for(var j=this.m_pairCount=0;j<this.m_moveCount;++j){var u=this.m_moveBuffer[j];if(null!=u){var q=this,r=this.m_tree.GetFatAABB(u);this.m_tree.Query(function(e){if(e.m_id==u.m_id){return !0}q.m_pairCount==q.m_pairBuffer.length&&(q.m_pairBuffer[q.m_pairCount]=new box2d.b2Pair);var d=q.m_pairBuffer[q.m_pairCount];e.m_id<u.m_id?(d.proxyA=e,d.proxyB=u):(d.proxyA=u,d.proxyB=e);++q.m_pairCount;return !0},r)}}this.m_moveCount=0;this.m_pairBuffer.length=this.m_pairCount;this.m_pairBuffer.sort(box2d.b2PairLessThan);for(j=0;j<this.m_pairCount;){var r=this.m_pairBuffer[j],n=this.m_tree.GetUserData(r.proxyA),m=this.m_tree.GetUserData(r.proxyB);k.AddPair(n,m);for(++j;j<this.m_pairCount;){n=this.m_pairBuffer[j];if(n.proxyA.m_id!=r.proxyA.m_id||n.proxyB.m_id!=r.proxyB.m_id){break}++j}}};goog.exportProperty(box2d.b2BroadPhase.prototype,"UpdatePairs",box2d.b2BroadPhase.prototype.UpdatePairs);box2d.b2BroadPhase.prototype.Query=function(e,d){this.m_tree.Query(e,d)};goog.exportProperty(box2d.b2BroadPhase.prototype,"Query",box2d.b2BroadPhase.prototype.Query);box2d.b2BroadPhase.prototype.RayCast=function(e,d){this.m_tree.RayCast(e,d)};goog.exportProperty(box2d.b2BroadPhase.prototype,"RayCast",box2d.b2BroadPhase.prototype.RayCast);box2d.b2BroadPhase.prototype.BufferMove=function(b){this.m_moveBuffer[this.m_moveCount]=b;++this.m_moveCount};goog.exportProperty(box2d.b2BroadPhase.prototype,"BufferMove",box2d.b2BroadPhase.prototype.BufferMove);box2d.b2BroadPhase.prototype.UnBufferMove=function(b){b=this.m_moveBuffer.indexOf(b);this.m_moveBuffer[b]=null};goog.exportProperty(box2d.b2BroadPhase.prototype,"UnBufferMove",box2d.b2BroadPhase.prototype.UnBufferMove);box2d.b2PairLessThan=function(e,d){return e.proxyA.m_id==d.proxyA.m_id?e.proxyB.m_id-d.proxyB.m_id:e.proxyA.m_id-d.proxyA.m_id};box2d.b2ContactManager=function(){this.m_broadPhase=new box2d.b2BroadPhase;this.m_contactFactory=new box2d.b2ContactFactory(this.m_allocator)};box2d.b2ContactManager.prototype.m_broadPhase=null;goog.exportSymbol("box2d.b2ContactManager.prototype.m_broadPhase",box2d.b2ContactManager.prototype.m_broadPhase);box2d.b2ContactManager.prototype.m_contactList=null;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactList",box2d.b2ContactManager.prototype.m_contactList);box2d.b2ContactManager.prototype.m_contactCount=0;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactCount",box2d.b2ContactManager.prototype.m_contactCount);box2d.b2ContactManager.prototype.m_contactFilter=box2d.b2ContactFilter.b2_defaultFilter;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactFilter",box2d.b2ContactManager.prototype.m_contactFilter);box2d.b2ContactManager.prototype.m_contactListener=box2d.b2ContactListener.b2_defaultListener;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactListener",box2d.b2ContactManager.prototype.m_contactListener);box2d.b2ContactManager.prototype.m_allocator=null;goog.exportSymbol("box2d.b2ContactManager.prototype.m_allocator",box2d.b2ContactManager.prototype.m_allocator);box2d.b2ContactManager.prototype.m_contactFactory=null;goog.exportSymbol("box2d.b2ContactManager.prototype.m_contactFactory",box2d.b2ContactManager.prototype.m_contactFactory);box2d.b2ContactManager.prototype.Destroy=function(e){var d=e.GetFixtureA(),f=e.GetFixtureB(),d=d.GetBody(),f=f.GetBody();this.m_contactListener&&e.IsTouching()&&this.m_contactListener.EndContact(e);e.m_prev&&(e.m_prev.m_next=e.m_next);e.m_next&&(e.m_next.m_prev=e.m_prev);e==this.m_contactList&&(this.m_contactList=e.m_next);e.m_nodeA.prev&&(e.m_nodeA.prev.next=e.m_nodeA.next);e.m_nodeA.next&&(e.m_nodeA.next.prev=e.m_nodeA.prev);e.m_nodeA==d.m_contactList&&(d.m_contactList=e.m_nodeA.next);e.m_nodeB.prev&&(e.m_nodeB.prev.next=e.m_nodeB.next);e.m_nodeB.next&&(e.m_nodeB.next.prev=e.m_nodeB.prev);e.m_nodeB==f.m_contactList&&(f.m_contactList=e.m_nodeB.next);this.m_contactFactory.Destroy(e);--this.m_contactCount};goog.exportSymbol("box2d.b2ContactManager.prototype.Destroy",box2d.b2ContactManager.prototype.Destroy);box2d.b2ContactManager.prototype.Collide=function(){for(var k=this.m_contactList;k;){var j=k.GetFixtureA(),u=k.GetFixtureB(),q=k.GetChildIndexA(),r=k.GetChildIndexB(),n=j.GetBody(),m=u.GetBody();if(k.m_flags&box2d.b2ContactFlag.e_filterFlag){if(!1==m.ShouldCollide(n)){j=k;k=j.m_next;this.Destroy(j);continue}if(this.m_contactFilter&&!1==this.m_contactFilter.ShouldCollide(j,u)){j=k;k=j.m_next;this.Destroy(j);continue}k.m_flags&=~box2d.b2ContactFlag.e_filterFlag}n=n.IsAwake()&&n.m_type!=box2d.b2BodyType.b2_staticBody;m=m.IsAwake()&&m.m_type!=box2d.b2BodyType.b2_staticBody;!1==n&&!1==m?k=k.m_next:!1==this.m_broadPhase.TestOverlap(j.m_proxies[q].proxy,u.m_proxies[r].proxy)?(j=k,k=j.m_next,this.Destroy(j)):(k.Update(this.m_contactListener),k=k.m_next)}};goog.exportSymbol("box2d.b2ContactManager.prototype.Collide",box2d.b2ContactManager.prototype.Collide);box2d.b2ContactManager.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(this)};goog.exportSymbol("box2d.b2ContactManager.prototype.FindNewContacts",box2d.b2ContactManager.prototype.FindNewContacts);box2d.b2ContactManager.prototype.AddPair=function(F,E){box2d.ENABLE_ASSERTS&&box2d.b2Assert(F instanceof box2d.b2FixtureProxy);box2d.ENABLE_ASSERTS&&box2d.b2Assert(E instanceof box2d.b2FixtureProxy);var D=F.fixture,B=E.fixture,C=F.childIndex,A=E.childIndex,z=D.GetBody(),y=B.GetBody();if(z!=y){for(var u=y.GetContactList();u;){if(u.other==z){var v=u.contact.GetFixtureA(),r=u.contact.GetFixtureB(),q=u.contact.GetChildIndexA(),j=u.contact.GetChildIndexB();if(v==D&&r==B&&q==C&&j==A||v==B&&r==D&&q==A&&j==C){return}}u=u.next}!1==y.ShouldCollide(z)||this.m_contactFilter&&!1==this.m_contactFilter.ShouldCollide(D,B)||(C=this.m_contactFactory.Create(D,C,B,A),null!=C&&(D=C.GetFixtureA(),B=C.GetFixtureB(),C.GetChildIndexA(),C.GetChildIndexB(),z=D.m_body,y=B.m_body,C.m_prev=null,C.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=C),this.m_contactList=C,C.m_nodeA.contact=C,C.m_nodeA.other=y,C.m_nodeA.prev=null,C.m_nodeA.next=z.m_contactList,null!=z.m_contactList&&(z.m_contactList.prev=C.m_nodeA),z.m_contactList=C.m_nodeA,C.m_nodeB.contact=C,C.m_nodeB.other=z,C.m_nodeB.prev=null,C.m_nodeB.next=y.m_contactList,null!=y.m_contactList&&(y.m_contactList.prev=C.m_nodeB),y.m_contactList=C.m_nodeB,!1==D.IsSensor()&&!1==B.IsSensor()&&(z.SetAwake(!0),y.SetAwake(!0)),++this.m_contactCount))}};goog.exportSymbol("box2d.b2ContactManager.prototype.AddPair",box2d.b2ContactManager.prototype.AddPair);box2d.b2JointFactory={};box2d.b2JointFactory.Create=function(e,d){var f=null;switch(e.type){case box2d.b2JointType.e_distanceJoint:f=new box2d.b2DistanceJoint(e instanceof box2d.b2DistanceJointDef?e:null);break;case box2d.b2JointType.e_mouseJoint:f=new box2d.b2MouseJoint(e instanceof box2d.b2MouseJointDef?e:null);break;case box2d.b2JointType.e_prismaticJoint:f=new box2d.b2PrismaticJoint(e instanceof box2d.b2PrismaticJointDef?e:null);break;case box2d.b2JointType.e_revoluteJoint:f=new box2d.b2RevoluteJoint(e instanceof box2d.b2RevoluteJointDef?e:null);break;case box2d.b2JointType.e_pulleyJoint:f=new box2d.b2PulleyJoint(e instanceof box2d.b2PulleyJointDef?e:null);break;case box2d.b2JointType.e_gearJoint:f=new box2d.b2GearJoint(e instanceof box2d.b2GearJointDef?e:null);break;case box2d.b2JointType.e_wheelJoint:f=new box2d.b2WheelJoint(e instanceof box2d.b2WheelJointDef?e:null);break;case box2d.b2JointType.e_weldJoint:f=new box2d.b2WeldJoint(e instanceof box2d.b2WeldJointDef?e:null);break;case box2d.b2JointType.e_frictionJoint:f=new box2d.b2FrictionJoint(e instanceof box2d.b2FrictionJointDef?e:null);break;case box2d.b2JointType.e_ropeJoint:f=new box2d.b2RopeJoint(e instanceof box2d.b2RopeJointDef?e:null);break;case box2d.b2JointType.e_motorJoint:f=new box2d.b2MotorJoint(e instanceof box2d.b2MotorJointDef?e:null);break;case box2d.b2JointType.e_areaJoint:f=new box2d.b2AreaJoint(e instanceof box2d.b2AreaJointDef?e:null);break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}return f};goog.exportSymbol("box2d.b2JointFactory.Create",box2d.b2JointFactory.Create);box2d.b2JointFactory.Destroy=function(e,d){};goog.exportSymbol("box2d.b2JointFactory.Destroy",box2d.b2JointFactory.Destroy);box2d.b2Color=function(e,d,f){this.r=e;this.g=d;this.b=f};goog.exportSymbol("box2d.b2Color",box2d.b2Color);box2d.b2Color.prototype.r=0.5;goog.exportProperty(box2d.b2Color.prototype,"r",box2d.b2Color.prototype.r);box2d.b2Color.prototype.g=0.5;goog.exportProperty(box2d.b2Color.prototype,"g",box2d.b2Color.prototype.g);box2d.b2Color.prototype.b=0.5;goog.exportProperty(box2d.b2Color.prototype,"b",box2d.b2Color.prototype.b);box2d.b2Color.prototype.SetRGB=function(e,d,f){this.r=e;this.g=d;this.b=f;return this};goog.exportProperty(box2d.b2Color.prototype,"SetRGB",box2d.b2Color.prototype.SetRGB);box2d.b2Color.prototype.MakeStyleString=function(f){var d=Math.round(Math.max(0,Math.min(255,255*this.r))),j=Math.round(Math.max(0,Math.min(255,255*this.g))),g=Math.round(Math.max(0,Math.min(255,255*this.b)));f="undefined"==typeof f?Math.max(0,Math.min(1,f)):1;return box2d.b2Color.MakeStyleString(d,j,g,f)};goog.exportProperty(box2d.b2Color.prototype,"MakeStyleString",box2d.b2Color.prototype.MakeStyleString);box2d.b2Color.MakeStyleString=function(f,d,j,g){return 1>g?"rgba("+f+","+d+","+j+","+g+")":"rgb("+f+","+d+","+j+")"};goog.exportProperty(box2d.b2Color,"MakeStyleString",box2d.b2Color.MakeStyleString);box2d.b2Color.RED=new box2d.b2Color(1,0,0);goog.exportProperty(box2d.b2Color,"RED",box2d.b2Color.RED);box2d.b2Color.GREEN=new box2d.b2Color(0,1,0);goog.exportProperty(box2d.b2Color,"GREEN",box2d.b2Color.GREEN);box2d.b2Color.BLUE=new box2d.b2Color(0,0,1);goog.exportProperty(box2d.b2Color,"BLUE",box2d.b2Color.BLUE);box2d.b2DrawFlags={e_none:0,e_shapeBit:1,e_jointBit:2,e_aabbBit:4,e_pairBit:8,e_centerOfMassBit:16,e_controllerBit:32,e_all:63};goog.exportSymbol("box2d.b2DrawFlags",box2d.b2DrawFlags);goog.exportProperty(box2d.b2DrawFlags,"e_none",box2d.b2DrawFlags.e_none);goog.exportProperty(box2d.b2DrawFlags,"e_shapeBit",box2d.b2DrawFlags.e_shapeBit);goog.exportProperty(box2d.b2DrawFlags,"e_jointBit",box2d.b2DrawFlags.e_jointBit);goog.exportProperty(box2d.b2DrawFlags,"e_aabbBit",box2d.b2DrawFlags.e_aabbBit);goog.exportProperty(box2d.b2DrawFlags,"e_pairBit",box2d.b2DrawFlags.e_pairBit);goog.exportProperty(box2d.b2DrawFlags,"e_centerOfMassBit",box2d.b2DrawFlags.e_centerOfMassBit);goog.exportProperty(box2d.b2DrawFlags,"e_controllerBit",box2d.b2DrawFlags.e_controllerBit);goog.exportProperty(box2d.b2DrawFlags,"e_all",box2d.b2DrawFlags.e_all);box2d.b2Draw=function(){};goog.exportSymbol("box2d.b2Draw",box2d.b2Draw);box2d.b2Draw.prototype.m_drawFlags=box2d.b2DrawFlags.e_none;goog.exportProperty(box2d.b2Draw.prototype,"m_drawFlags",box2d.b2Draw.prototype.m_drawFlags);box2d.b2Draw.prototype.SetFlags=function(b){this.m_drawFlags=b};goog.exportProperty(box2d.b2Draw.prototype,"SetFlags",box2d.b2Draw.prototype.SetFlags);box2d.b2Draw.prototype.GetFlags=function(){return this.m_drawFlags};goog.exportProperty(box2d.b2Draw.prototype,"GetFlags",box2d.b2Draw.prototype.GetFlags);box2d.b2Draw.prototype.AppendFlags=function(b){this.m_drawFlags|=b};goog.exportProperty(box2d.b2Draw.prototype,"AppendFlags",box2d.b2Draw.prototype.AppendFlags);box2d.b2Draw.prototype.ClearFlags=function(b){this.m_drawFlags&=~b};goog.exportProperty(box2d.b2Draw.prototype,"ClearFlags",box2d.b2Draw.prototype.ClearFlags);box2d.b2Draw.prototype.PushTransform=function(b){};goog.exportProperty(box2d.b2Draw.prototype,"PushTransform",box2d.b2Draw.prototype.PushTransform);box2d.b2Draw.prototype.PopTransform=function(b){};goog.exportProperty(box2d.b2Draw.prototype,"PopTransform",box2d.b2Draw.prototype.PopTransform);box2d.b2Draw.prototype.DrawPolygon=function(e,d,f){};goog.exportProperty(box2d.b2Draw.prototype,"DrawPolygon",box2d.b2Draw.prototype.DrawPolygon);box2d.b2Draw.prototype.DrawSolidPolygon=function(e,d,f){};goog.exportProperty(box2d.b2Draw.prototype,"DrawSolidPolygon",box2d.b2Draw.prototype.DrawSolidPolygon);box2d.b2Draw.prototype.DrawCircle=function(e,d,f){};goog.exportProperty(box2d.b2Draw.prototype,"DrawCircle",box2d.b2Draw.prototype.DrawCircle);box2d.b2Draw.prototype.DrawSolidCircle=function(f,d,j,g){};goog.exportProperty(box2d.b2Draw.prototype,"DrawSolidCircle",box2d.b2Draw.prototype.DrawSolidCircle);box2d.b2Draw.prototype.DrawSegment=function(e,d,f){};goog.exportProperty(box2d.b2Draw.prototype,"DrawSegment",box2d.b2Draw.prototype.DrawSegment);box2d.b2Draw.prototype.DrawTransform=function(b){};goog.exportProperty(box2d.b2Draw.prototype,"DrawTransform",box2d.b2Draw.prototype.DrawTransform);box2d.b2Filter=function(){};goog.exportSymbol("box2d.b2Filter",box2d.b2Filter);box2d.b2Filter.prototype.categoryBits=1;goog.exportProperty(box2d.b2Filter.prototype,"categoryBits",box2d.b2Filter.prototype.categoryBits);box2d.b2Filter.prototype.maskBits=65535;goog.exportProperty(box2d.b2Filter.prototype,"maskBits",box2d.b2Filter.prototype.maskBits);box2d.b2Filter.prototype.groupIndex=0;goog.exportProperty(box2d.b2Filter.prototype,"groupIndex",box2d.b2Filter.prototype.groupIndex);box2d.b2Filter.prototype.Clone=function(){return(new box2d.b2Filter).Copy(this)};goog.exportProperty(box2d.b2Filter.prototype,"Clone",box2d.b2Filter.prototype.Clone);box2d.b2Filter.prototype.Copy=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this!==b);this.categoryBits=b.categoryBits;this.maskBits=b.maskBits;this.groupIndex=b.groupIndex;return this};goog.exportProperty(box2d.b2Filter.prototype,"Copy",box2d.b2Filter.prototype.Copy);box2d.b2FixtureDef=function(){this.filter=new box2d.b2Filter};goog.exportSymbol("box2d.b2FixtureDef",box2d.b2FixtureDef);box2d.b2FixtureDef.prototype.shape=null;goog.exportProperty(box2d.b2FixtureDef.prototype,"shape",box2d.b2FixtureDef.prototype.shape);box2d.b2FixtureDef.prototype.userData=null;goog.exportProperty(box2d.b2FixtureDef.prototype,"userData",box2d.b2FixtureDef.prototype.userData);box2d.b2FixtureDef.prototype.friction=0.2;goog.exportProperty(box2d.b2FixtureDef.prototype,"friction",box2d.b2FixtureDef.prototype.friction);box2d.b2FixtureDef.prototype.restitution=0;goog.exportProperty(box2d.b2FixtureDef.prototype,"restitution",box2d.b2FixtureDef.prototype.restitution);box2d.b2FixtureDef.prototype.density=0;goog.exportProperty(box2d.b2FixtureDef.prototype,"density",box2d.b2FixtureDef.prototype.density);box2d.b2FixtureDef.prototype.isSensor=!1;goog.exportProperty(box2d.b2FixtureDef.prototype,"isSensor",box2d.b2FixtureDef.prototype.isSensor);box2d.b2FixtureDef.prototype.filter=null;goog.exportProperty(box2d.b2FixtureDef.prototype,"filter",box2d.b2FixtureDef.prototype.filter);box2d.b2FixtureProxy=function(){this.aabb=new box2d.b2AABB};goog.exportSymbol("box2d.b2FixtureProxy",box2d.b2FixtureProxy);box2d.b2FixtureProxy.prototype.aabb=null;goog.exportProperty(box2d.b2FixtureProxy.prototype,"aabb",box2d.b2FixtureProxy.prototype.aabb);box2d.b2FixtureProxy.prototype.fixture=null;goog.exportProperty(box2d.b2FixtureProxy.prototype,"fixture",box2d.b2FixtureProxy.prototype.fixture);box2d.b2FixtureProxy.prototype.childIndex=0;goog.exportProperty(box2d.b2FixtureProxy.prototype,"childIndex",box2d.b2FixtureProxy.prototype.childIndex);box2d.b2FixtureProxy.prototype.proxy=null;goog.exportProperty(box2d.b2FixtureProxy.prototype,"proxy",box2d.b2FixtureProxy.prototype.proxy);box2d.b2FixtureProxy.MakeArray=function(b){return box2d.b2MakeArray(b,function(d){return new box2d.b2FixtureProxy})};goog.exportProperty(box2d.b2FixtureProxy,"MakeArray",box2d.b2FixtureProxy.MakeArray);box2d.b2Fixture=function(){this.m_proxyCount=0;this.m_filter=new box2d.b2Filter};goog.exportSymbol("box2d.b2Fixture",box2d.b2Fixture);box2d.b2Fixture.prototype.m_density=0;goog.exportProperty(box2d.b2Fixture.prototype,"m_density",box2d.b2Fixture.prototype.m_density);box2d.b2Fixture.prototype.m_next=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_next",box2d.b2Fixture.prototype.m_next);box2d.b2Fixture.prototype.m_body=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_body",box2d.b2Fixture.prototype.m_body);box2d.b2Fixture.prototype.m_shape=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_shape",box2d.b2Fixture.prototype.m_shape);box2d.b2Fixture.prototype.m_friction=0;goog.exportProperty(box2d.b2Fixture.prototype,"m_friction",box2d.b2Fixture.prototype.m_friction);box2d.b2Fixture.prototype.m_restitution=0;goog.exportProperty(box2d.b2Fixture.prototype,"m_restitution",box2d.b2Fixture.prototype.m_restitution);box2d.b2Fixture.prototype.m_proxies=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_proxies",box2d.b2Fixture.prototype.m_proxies);box2d.b2Fixture.prototype.m_proxyCount=0;goog.exportProperty(box2d.b2Fixture.prototype,"m_proxyCount",box2d.b2Fixture.prototype.m_proxyCount);box2d.b2Fixture.prototype.m_filter=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_filter",box2d.b2Fixture.prototype.m_filter);box2d.b2Fixture.prototype.m_isSensor=!1;goog.exportProperty(box2d.b2Fixture.prototype,"m_isSensor",box2d.b2Fixture.prototype.m_isSensor);box2d.b2Fixture.prototype.m_userData=null;goog.exportProperty(box2d.b2Fixture.prototype,"m_userData",box2d.b2Fixture.prototype.m_userData);box2d.b2Fixture.prototype.GetType=function(){return this.m_shape.GetType()};goog.exportProperty(box2d.b2Fixture.prototype,"GetType",box2d.b2Fixture.prototype.GetType);box2d.b2Fixture.prototype.GetShape=function(){return this.m_shape};goog.exportProperty(box2d.b2Fixture.prototype,"GetShape",box2d.b2Fixture.prototype.GetShape);box2d.b2Fixture.prototype.IsSensor=function(){return this.m_isSensor};goog.exportProperty(box2d.b2Fixture.prototype,"IsSensor",box2d.b2Fixture.prototype.IsSensor);box2d.b2Fixture.prototype.GetFilterData=function(){return this.m_filter};goog.exportProperty(box2d.b2Fixture.prototype,"GetFilterData",box2d.b2Fixture.prototype.GetFilterData);box2d.b2Fixture.prototype.GetUserData=function(){return this.m_userData};goog.exportProperty(box2d.b2Fixture.prototype,"GetUserData",box2d.b2Fixture.prototype.GetUserData);box2d.b2Fixture.prototype.SetUserData=function(b){this.m_userData=b};goog.exportProperty(box2d.b2Fixture.prototype,"SetUserData",box2d.b2Fixture.prototype.SetUserData);box2d.b2Fixture.prototype.GetBody=function(){return this.m_body};goog.exportProperty(box2d.b2Fixture.prototype,"GetBody",box2d.b2Fixture.prototype.GetBody);box2d.b2Fixture.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2Fixture.prototype,"GetNext",box2d.b2Fixture.prototype.GetNext);box2d.b2Fixture.prototype.SetDensity=function(b){this.m_density=b};goog.exportProperty(box2d.b2Fixture.prototype,"SetDensity",box2d.b2Fixture.prototype.SetDensity);box2d.b2Fixture.prototype.GetDensity=function(){return this.m_density};goog.exportProperty(box2d.b2Fixture.prototype,"GetDensity",box2d.b2Fixture.prototype.GetDensity);box2d.b2Fixture.prototype.GetFriction=function(){return this.m_friction};goog.exportProperty(box2d.b2Fixture.prototype,"GetFriction",box2d.b2Fixture.prototype.GetFriction);box2d.b2Fixture.prototype.SetFriction=function(b){this.m_friction=b};goog.exportProperty(box2d.b2Fixture.prototype,"SetFriction",box2d.b2Fixture.prototype.SetFriction);box2d.b2Fixture.prototype.GetRestitution=function(){return this.m_restitution};goog.exportProperty(box2d.b2Fixture.prototype,"GetRestitution",box2d.b2Fixture.prototype.GetRestitution);box2d.b2Fixture.prototype.SetRestitution=function(b){this.m_restitution=b};goog.exportProperty(box2d.b2Fixture.prototype,"SetRestitution",box2d.b2Fixture.prototype.SetRestitution);box2d.b2Fixture.prototype.TestPoint=function(b){return this.m_shape.TestPoint(this.m_body.GetTransform(),b)};goog.exportProperty(box2d.b2Fixture.prototype,"TestPoint",box2d.b2Fixture.prototype.TestPoint);box2d.b2Fixture.prototype.RayCast=function(e,d,f){return this.m_shape.RayCast(e,d,this.m_body.GetTransform(),f)};goog.exportProperty(box2d.b2Fixture.prototype,"RayCast",box2d.b2Fixture.prototype.RayCast);box2d.b2Fixture.prototype.GetMassData=function(b){b=b||new box2d.b2MassData;this.m_shape.ComputeMass(b,this.m_density);return b};goog.exportProperty(box2d.b2Fixture.prototype,"GetMassData",box2d.b2Fixture.prototype.GetMassData);box2d.b2Fixture.prototype.GetAABB=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=b&&b<this.m_proxyCount);return this.m_proxies[b].aabb};goog.exportProperty(box2d.b2Fixture.prototype,"GetAABB",box2d.b2Fixture.prototype.GetAABB);box2d.b2Fixture.prototype.Create=function(e,d){this.m_userData=d.userData;this.m_friction=d.friction;this.m_restitution=d.restitution;this.m_body=e;this.m_next=null;this.m_filter.Copy(d.filter);this.m_isSensor=d.isSensor;this.m_shape=d.shape.Clone();this.m_proxies=box2d.b2FixtureProxy.MakeArray(this.m_shape.GetChildCount());this.m_proxyCount=0;this.m_density=d.density};goog.exportProperty(box2d.b2Fixture.prototype,"Create",box2d.b2Fixture.prototype.Create);box2d.b2Fixture.prototype.Destroy=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0==this.m_proxyCount);this.m_shape=null};goog.exportProperty(box2d.b2Fixture.prototype,"Destroy",box2d.b2Fixture.prototype.Destroy);box2d.b2Fixture.prototype.CreateProxies=function(f,d){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0==this.m_proxyCount);this.m_proxyCount=this.m_shape.GetChildCount();for(var j=0;j<this.m_proxyCount;++j){var g=this.m_proxies[j];this.m_shape.ComputeAABB(g.aabb,d,j);g.proxy=f.CreateProxy(g.aabb,g);g.fixture=this;g.childIndex=j}};goog.exportProperty(box2d.b2Fixture.prototype,"CreateProxies",box2d.b2Fixture.prototype.CreateProxies);box2d.b2Fixture.prototype.DestroyProxies=function(e){for(var d=0;d<this.m_proxyCount;++d){var f=this.m_proxies[d];e.DestroyProxy(f.proxy);f.proxy=null}this.m_proxyCount=0};goog.exportProperty(box2d.b2Fixture.prototype,"DestroyProxies",box2d.b2Fixture.prototype.DestroyProxies);box2d.b2Fixture.prototype.Synchronize=function(k,j,u){if(0!=this.m_proxyCount){for(var q=0;q<this.m_proxyCount;++q){var r=this.m_proxies[q],n=box2d.b2Fixture.prototype.Synchronize.s_aabb1,m=box2d.b2Fixture.prototype.Synchronize.s_aabb2;this.m_shape.ComputeAABB(n,j,q);this.m_shape.ComputeAABB(m,u,q);r.aabb.Combine2(n,m);n=box2d.b2SubVV(u.p,j.p,box2d.b2Fixture.prototype.Synchronize.s_displacement);k.MoveProxy(r.proxy,r.aabb,n)}}};goog.exportProperty(box2d.b2Fixture.prototype,"Synchronize",box2d.b2Fixture.prototype.Synchronize);box2d.b2Fixture.prototype.Synchronize.s_aabb1=new box2d.b2AABB;box2d.b2Fixture.prototype.Synchronize.s_aabb2=new box2d.b2AABB;box2d.b2Fixture.prototype.Synchronize.s_displacement=new box2d.b2Vec2;box2d.b2Fixture.prototype.SetFilterData=function(b){this.m_filter.Copy(b);this.Refilter()};goog.exportProperty(box2d.b2Fixture.prototype,"SetFilterData",box2d.b2Fixture.prototype.SetFilterData);box2d.b2Fixture.prototype.Refilter=function(){if(!this.m_body){for(var f=this.m_body.GetContactList();f;){var d=f.contact,j=d.GetFixtureA(),g=d.GetFixtureB();j!=this&&g!=this||d.FlagForFiltering();f=f.next}f=this.m_body.GetWorld();if(null!==f){for(f=f.m_contactManager.m_broadPhase,d=0;d<this.m_proxyCount;++d){f.TouchProxy(this.m_proxies[d].proxy)}}}};goog.exportProperty(box2d.b2Fixture.prototype,"Refilter",box2d.b2Fixture.prototype.Refilter);box2d.b2Fixture.prototype.SetSensor=function(b){b!=this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=b)};goog.exportProperty(box2d.b2Fixture.prototype,"SetSensor",box2d.b2Fixture.prototype.SetSensor);box2d.b2Fixture.prototype.Dump=function(b){box2d.DEBUG&&(box2d.b2Log("    /*box2d.b2FixtureDef*/ var fd = new box2d.b2FixtureDef();\n"),box2d.b2Log("    fd.friction = %.15f;\n",this.m_friction),box2d.b2Log("    fd.restitution = %.15f;\n",this.m_restitution),box2d.b2Log("    fd.density = %.15f;\n",this.m_density),box2d.b2Log("    fd.isSensor = %s;\n",this.m_isSensor?"true":"false"),box2d.b2Log("    fd.filter.categoryBits = %d;\n",this.m_filter.categoryBits),box2d.b2Log("    fd.filter.maskBits = %d;\n",this.m_filter.maskBits),box2d.b2Log("    fd.filter.groupIndex = %d;\n",this.m_filter.groupIndex),this.m_shape.Dump(),box2d.b2Log("\n"),box2d.b2Log("    fd.shape = shape;\n"),box2d.b2Log("\n"),box2d.b2Log("    bodies[%d].CreateFixture(fd);\n",b))};goog.exportProperty(box2d.b2Fixture.prototype,"Dump",box2d.b2Fixture.prototype.Dump);box2d.b2BodyType={b2_unknown:-1,b2_staticBody:0,b2_kinematicBody:1,b2_dynamicBody:2,b2_bulletBody:3};goog.exportSymbol("box2d.b2BodyType",box2d.b2BodyType);goog.exportProperty(box2d.b2BodyType,"b2_unknown",box2d.b2BodyType.b2_unknown);goog.exportProperty(box2d.b2BodyType,"b2_staticBody",box2d.b2BodyType.b2_staticBody);goog.exportProperty(box2d.b2BodyType,"b2_kinematicBody",box2d.b2BodyType.b2_kinematicBody);goog.exportProperty(box2d.b2BodyType,"b2_dynamicBody",box2d.b2BodyType.b2_dynamicBody);goog.exportProperty(box2d.b2BodyType,"b2_bulletBody",box2d.b2BodyType.b2_bulletBody);box2d.b2BodyDef=function(){this.position=new box2d.b2Vec2(0,0);this.linearVelocity=new box2d.b2Vec2(0,0)};goog.exportSymbol("box2d.b2BodyDef",box2d.b2BodyDef);box2d.b2BodyDef.prototype.type=box2d.b2BodyType.b2_staticBody;goog.exportProperty(box2d.b2BodyDef.prototype,"type",box2d.b2BodyDef.prototype.type);box2d.b2BodyDef.prototype.position=null;goog.exportProperty(box2d.b2BodyDef.prototype,"position",box2d.b2BodyDef.prototype.position);box2d.b2BodyDef.prototype.angle=0;goog.exportProperty(box2d.b2BodyDef.prototype,"angle",box2d.b2BodyDef.prototype.angle);box2d.b2BodyDef.prototype.linearVelocity=null;goog.exportProperty(box2d.b2BodyDef.prototype,"linearVelocity",box2d.b2BodyDef.prototype.linearVelocity);box2d.b2BodyDef.prototype.angularVelocity=0;goog.exportProperty(box2d.b2BodyDef.prototype,"angularVelocity",box2d.b2BodyDef.prototype.angularVelocity);box2d.b2BodyDef.prototype.linearDamping=0;goog.exportProperty(box2d.b2BodyDef.prototype,"linearDamping",box2d.b2BodyDef.prototype.linearDamping);box2d.b2BodyDef.prototype.angularDamping=0;goog.exportProperty(box2d.b2BodyDef.prototype,"angularDamping",box2d.b2BodyDef.prototype.angularDamping);box2d.b2BodyDef.prototype.allowSleep=!0;goog.exportProperty(box2d.b2BodyDef.prototype,"allowSleep",box2d.b2BodyDef.prototype.allowSleep);box2d.b2BodyDef.prototype.awake=!0;goog.exportProperty(box2d.b2BodyDef.prototype,"awake",box2d.b2BodyDef.prototype.awake);box2d.b2BodyDef.prototype.fixedRotation=!1;goog.exportProperty(box2d.b2BodyDef.prototype,"fixedRotation",box2d.b2BodyDef.prototype.fixedRotation);box2d.b2BodyDef.prototype.bullet=!1;goog.exportProperty(box2d.b2BodyDef.prototype,"bullet",box2d.b2BodyDef.prototype.bullet);box2d.b2BodyDef.prototype.active=!0;goog.exportProperty(box2d.b2BodyDef.prototype,"active",box2d.b2BodyDef.prototype.active);box2d.b2BodyDef.prototype.userData=null;goog.exportProperty(box2d.b2BodyDef.prototype,"userData",box2d.b2BodyDef.prototype.userData);box2d.b2BodyDef.prototype.gravityScale=1;goog.exportProperty(box2d.b2BodyDef.prototype,"gravityScale",box2d.b2BodyDef.prototype.gravityScale);box2d.b2BodyFlag={e_none:0,e_islandFlag:1,e_awakeFlag:2,e_autoSleepFlag:4,e_bulletFlag:8,e_fixedRotationFlag:16,e_activeFlag:32,e_toiFlag:64};goog.exportProperty(box2d.b2BodyFlag,"e_none",box2d.b2BodyFlag.e_none);goog.exportProperty(box2d.b2BodyFlag,"e_islandFlag",box2d.b2BodyFlag.e_islandFlag);goog.exportProperty(box2d.b2BodyFlag,"e_awakeFlag",box2d.b2BodyFlag.e_awakeFlag);goog.exportProperty(box2d.b2BodyFlag,"e_autoSleepFlag",box2d.b2BodyFlag.e_autoSleepFlag);goog.exportProperty(box2d.b2BodyFlag,"e_bulletFlag",box2d.b2BodyFlag.e_bulletFlag);goog.exportProperty(box2d.b2BodyFlag,"e_fixedRotationFlag",box2d.b2BodyFlag.e_fixedRotationFlag);goog.exportProperty(box2d.b2BodyFlag,"e_activeFlag",box2d.b2BodyFlag.e_activeFlag);goog.exportProperty(box2d.b2BodyFlag,"e_toiFlag",box2d.b2BodyFlag.e_toiFlag);box2d.b2Body=function(e,d){this.m_xf=new box2d.b2Transform;this.m_out_xf=new box2d.b2Transform;this.m_sweep=new box2d.b2Sweep;this.m_out_sweep=new box2d.b2Sweep;this.m_linearVelocity=new box2d.b2Vec2;this.m_out_linearVelocity=new box2d.b2Vec2;this.m_force=new box2d.b2Vec2;box2d.ENABLE_ASSERTS&&box2d.b2Assert(e.position.IsValid());box2d.ENABLE_ASSERTS&&box2d.b2Assert(e.linearVelocity.IsValid());box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(e.angle));box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(e.angularVelocity));box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(e.gravityScale)&&0<=e.gravityScale);box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(e.angularDamping)&&0<=e.angularDamping);box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(e.linearDamping)&&0<=e.linearDamping);this.m_flags=box2d.b2BodyFlag.e_none;e.bullet&&(this.m_flags|=box2d.b2BodyFlag.e_bulletFlag);e.fixedRotation&&(this.m_flags|=box2d.b2BodyFlag.e_fixedRotationFlag);e.allowSleep&&(this.m_flags|=box2d.b2BodyFlag.e_autoSleepFlag);e.awake&&(this.m_flags|=box2d.b2BodyFlag.e_awakeFlag);e.active&&(this.m_flags|=box2d.b2BodyFlag.e_activeFlag);this.m_world=d;this.m_xf.p.Copy(e.position);this.m_xf.q.SetAngleRadians(e.angle);this.m_sweep.localCenter.SetZero();this.m_sweep.c0.Copy(this.m_xf.p);this.m_sweep.c.Copy(this.m_xf.p);this.m_sweep.a0=e.angle;this.m_sweep.a=e.angle;this.m_sweep.alpha0=0;this.m_linearVelocity.Copy(e.linearVelocity);this.m_angularVelocity=e.angularVelocity;this.m_linearDamping=e.linearDamping;this.m_angularDamping=e.angularDamping;this.m_gravityScale=e.gravityScale;this.m_force.SetZero();this.m_sleepTime=this.m_torque=0;this.m_type=e.type;this.m_invMass=e.type==box2d.b2BodyType.b2_dynamicBody?this.m_mass=1:this.m_mass=0;this.m_invI=this.m_I=0;this.m_userData=e.userData;this.m_fixtureList=null;this.m_fixtureCount=0;this.m_controllerList=null;this.m_controllerCount=0};goog.exportSymbol("box2d.b2Body",box2d.b2Body);box2d.b2Body.prototype.m_flags=box2d.b2BodyFlag.e_none;goog.exportProperty(box2d.b2Body.prototype,"m_flags",box2d.b2Body.prototype.m_flags);box2d.b2Body.prototype.m_islandIndex=0;goog.exportProperty(box2d.b2Body.prototype,"m_islandIndex",box2d.b2Body.prototype.m_islandIndex);box2d.b2Body.prototype.m_world=null;goog.exportProperty(box2d.b2Body.prototype,"m_world",box2d.b2Body.prototype.m_world);box2d.b2Body.prototype.m_xf=null;goog.exportProperty(box2d.b2Body.prototype,"m_xf",box2d.b2Body.prototype.m_xf);box2d.b2Body.prototype.m_out_xf=null;goog.exportProperty(box2d.b2Body.prototype,"m_out_xf",box2d.b2Body.prototype.m_out_xf);box2d.b2Body.prototype.m_sweep=null;goog.exportProperty(box2d.b2Body.prototype,"m_sweep",box2d.b2Body.prototype.m_sweep);box2d.b2Body.prototype.m_out_sweep=null;goog.exportProperty(box2d.b2Body.prototype,"m_out_sweep",box2d.b2Body.prototype.m_out_sweep);box2d.b2Body.prototype.m_jointList=null;goog.exportProperty(box2d.b2Body.prototype,"m_jointList",box2d.b2Body.prototype.m_jointList);box2d.b2Body.prototype.m_contactList=null;goog.exportProperty(box2d.b2Body.prototype,"m_contactList",box2d.b2Body.prototype.m_contactList);box2d.b2Body.prototype.m_prev=null;goog.exportProperty(box2d.b2Body.prototype,"m_prev",box2d.b2Body.prototype.m_prev);box2d.b2Body.prototype.m_next=null;goog.exportProperty(box2d.b2Body.prototype,"m_next",box2d.b2Body.prototype.m_next);box2d.b2Body.prototype.m_linearVelocity=null;goog.exportProperty(box2d.b2Body.prototype,"m_linearVelocity",box2d.b2Body.prototype.m_linearVelocity);box2d.b2Body.prototype.m_out_linearVelocity=null;goog.exportProperty(box2d.b2Body.prototype,"m_out_linearVelocity",box2d.b2Body.prototype.m_out_linearVelocity);box2d.b2Body.prototype.m_angularVelocity=0;goog.exportProperty(box2d.b2Body.prototype,"m_angularVelocity",box2d.b2Body.prototype.m_angularVelocity);box2d.b2Body.prototype.m_linearDamping=0;goog.exportProperty(box2d.b2Body.prototype,"m_linearDamping",box2d.b2Body.prototype.m_linearDamping);box2d.b2Body.prototype.m_angularDamping=0;goog.exportProperty(box2d.b2Body.prototype,"m_angularDamping",box2d.b2Body.prototype.m_angularDamping);box2d.b2Body.prototype.m_gravityScale=1;goog.exportProperty(box2d.b2Body.prototype,"m_gravityScale",box2d.b2Body.prototype.m_gravityScale);box2d.b2Body.prototype.m_force=null;goog.exportProperty(box2d.b2Body.prototype,"m_force",box2d.b2Body.prototype.m_force);box2d.b2Body.prototype.m_torque=0;goog.exportProperty(box2d.b2Body.prototype,"m_torque",box2d.b2Body.prototype.m_torque);box2d.b2Body.prototype.m_sleepTime=0;goog.exportProperty(box2d.b2Body.prototype,"m_sleepTime",box2d.b2Body.prototype.m_sleepTime);box2d.b2Body.prototype.m_type=box2d.b2BodyType.b2_staticBody;goog.exportProperty(box2d.b2Body.prototype,"m_type",box2d.b2Body.prototype.m_type);box2d.b2Body.prototype.m_mass=1;goog.exportProperty(box2d.b2Body.prototype,"m_mass",box2d.b2Body.prototype.m_mass);box2d.b2Body.prototype.m_invMass=1;goog.exportProperty(box2d.b2Body.prototype,"m_invMass",box2d.b2Body.prototype.m_invMass);box2d.b2Body.prototype.m_I=0;goog.exportProperty(box2d.b2Body.prototype,"m_I",box2d.b2Body.prototype.m_I);box2d.b2Body.prototype.m_invI=0;goog.exportProperty(box2d.b2Body.prototype,"m_invI",box2d.b2Body.prototype.m_invI);box2d.b2Body.prototype.m_userData=null;goog.exportProperty(box2d.b2Body.prototype,"m_userData",box2d.b2Body.prototype.m_userData);box2d.b2Body.prototype.m_fixtureList=null;goog.exportProperty(box2d.b2Body.prototype,"m_fixtureList",box2d.b2Body.prototype.m_fixtureList);box2d.b2Body.prototype.m_fixtureCount=0;goog.exportProperty(box2d.b2Body.prototype,"m_fixtureCount",box2d.b2Body.prototype.m_fixtureCount);box2d.b2Body.prototype.m_controllerList=null;goog.exportProperty(box2d.b2Body.prototype,"m_controllerList",box2d.b2Body.prototype.m_controllerList);box2d.b2Body.prototype.m_controllerCount=0;goog.exportProperty(box2d.b2Body.prototype,"m_controllerCount",box2d.b2Body.prototype.m_controllerCount);box2d.b2Body.prototype.CreateFixture=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.m_world.IsLocked());if(!0==this.m_world.IsLocked()){return null}var d=new box2d.b2Fixture;d.Create(this,e);this.m_flags&box2d.b2BodyFlag.e_activeFlag&&d.CreateProxies(this.m_world.m_contactManager.m_broadPhase,this.m_xf);d.m_next=this.m_fixtureList;this.m_fixtureList=d;++this.m_fixtureCount;d.m_body=this;0<d.m_density&&this.ResetMassData();this.m_world.m_flags|=box2d.b2WorldFlag.e_newFixture;return d};goog.exportProperty(box2d.b2Body.prototype,"CreateFixture",box2d.b2Body.prototype.CreateFixture);box2d.b2Body.prototype.CreateFixture2=function(e,d){void 0===d&&(d=0);var f=box2d.b2Body.prototype.CreateFixture2.s_def;f.shape=e;f.density=d;return this.CreateFixture(f)};goog.exportProperty(box2d.b2Body.prototype,"CreateFixture2",box2d.b2Body.prototype.CreateFixture2);box2d.b2Body.prototype.CreateFixture2.s_def=new box2d.b2FixtureDef;box2d.b2Body.prototype.DestroyFixture=function(g){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.m_world.IsLocked());if(!0!=this.m_world.IsLocked()){box2d.ENABLE_ASSERTS&&box2d.b2Assert(g.m_body==this);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_fixtureCount);for(var f=this.m_fixtureList,m=null,j=!1;null!=f;){if(f==g){m?m.m_next=g.m_next:this.m_fixtureList=g.m_next;j=!0;break}m=f;f=f.m_next}box2d.ENABLE_ASSERTS&&box2d.b2Assert(j);for(f=this.m_contactList;f;){var m=f.contact,f=f.next,j=m.GetFixtureA(),k=m.GetFixtureB();g!=j&&g!=k||this.m_world.m_contactManager.Destroy(m)}this.m_flags&box2d.b2BodyFlag.e_activeFlag&&g.DestroyProxies(this.m_world.m_contactManager.m_broadPhase);g.Destroy();g.m_body=null;g.m_next=null;--this.m_fixtureCount;this.ResetMassData()}};goog.exportProperty(box2d.b2Body.prototype,"DestroyFixture",box2d.b2Body.prototype.DestroyFixture);box2d.b2Body.prototype.SetTransformVecRadians=function(e,d){this.SetTransformXYRadians(e.x,e.y,d)};goog.exportProperty(box2d.b2Body.prototype,"SetTransformVecRadians",box2d.b2Body.prototype.SetTransformVecRadians);box2d.b2Body.prototype.SetTransformXYRadians=function(e,d,f){if(this.m_xf.p.x!=e||this.m_xf.p.y!=d||this.m_xf.q.GetAngleRadians()!=f){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.m_world.IsLocked()),!0!=this.m_world.IsLocked()){this.m_xf.q.SetAngleRadians(f);this.m_xf.p.SetXY(e,d);box2d.b2MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c);this.m_sweep.a=f;this.m_sweep.c0.Copy(this.m_sweep.c);this.m_sweep.a0=f;e=this.m_world.m_contactManager.m_broadPhase;for(d=this.m_fixtureList;d;d=d.m_next){d.Synchronize(e,this.m_xf,this.m_xf)}this.m_world.m_contactManager.FindNewContacts()}}};goog.exportProperty(box2d.b2Body.prototype,"SetTransformXYRadians",box2d.b2Body.prototype.SetTransformXYRadians);box2d.b2Body.prototype.SetTransform=function(b){this.SetTransformVecRadians(b.p,b.GetAngleRadians())};goog.exportProperty(box2d.b2Body.prototype,"SetTransform",box2d.b2Body.prototype.SetTransform);box2d.b2Body.prototype.GetTransform=function(b){b=b||this.m_out_xf;return b.Copy(this.m_xf)};goog.exportProperty(box2d.b2Body.prototype,"GetTransform",box2d.b2Body.prototype.GetTransform);box2d.b2Body.prototype.GetPosition=function(b){b=b||this.m_out_xf.p;return b.Copy(this.m_xf.p)};goog.exportProperty(box2d.b2Body.prototype,"GetPosition",box2d.b2Body.prototype.GetPosition);box2d.b2Body.prototype.SetPosition=function(b){this.SetTransformVecRadians(b,this.GetAngleRadians())};goog.exportProperty(box2d.b2Body.prototype,"SetPosition",box2d.b2Body.prototype.SetPosition);box2d.b2Body.prototype.SetPositionXY=function(e,d){this.SetTransformXYRadians(e,d,this.GetAngleRadians())};goog.exportProperty(box2d.b2Body.prototype,"SetPositionXY",box2d.b2Body.prototype.SetPositionXY);box2d.b2Body.prototype.GetAngleRadians=function(){return this.m_sweep.a};goog.exportProperty(box2d.b2Body.prototype,"GetAngleRadians",box2d.b2Body.prototype.GetAngleRadians);box2d.b2Body.prototype.SetAngleRadians=function(b){this.SetTransformVecRadians(this.GetPosition(),b)};goog.exportProperty(box2d.b2Body.prototype,"SetAngleRadians",box2d.b2Body.prototype.SetAngleRadians);box2d.b2Body.prototype.GetWorldCenter=function(b){b=b||this.m_out_sweep.c;return b.Copy(this.m_sweep.c)};goog.exportProperty(box2d.b2Body.prototype,"GetWorldCenter",box2d.b2Body.prototype.GetWorldCenter);box2d.b2Body.prototype.GetLocalCenter=function(b){b=b||this.m_out_sweep.localCenter;return b.Copy(this.m_sweep.localCenter)};goog.exportProperty(box2d.b2Body.prototype,"GetLocalCenter",box2d.b2Body.prototype.GetLocalCenter);box2d.b2Body.prototype.SetLinearVelocity=function(b){this.m_type!=box2d.b2BodyType.b2_staticBody&&(0<box2d.b2DotVV(b,b)&&this.SetAwake(!0),this.m_linearVelocity.Copy(b))};goog.exportProperty(box2d.b2Body.prototype,"SetLinearVelocity",box2d.b2Body.prototype.SetLinearVelocity);box2d.b2Body.prototype.GetLinearVelocity=function(b){b=b||this.m_out_linearVelocity;return b.Copy(this.m_linearVelocity)};goog.exportProperty(box2d.b2Body.prototype,"GetLinearVelocity",box2d.b2Body.prototype.GetLinearVelocity);box2d.b2Body.prototype.SetAngularVelocity=function(b){this.m_type!=box2d.b2BodyType.b2_staticBody&&(0<b*b&&this.SetAwake(!0),this.m_angularVelocity=b)};goog.exportProperty(box2d.b2Body.prototype,"SetAngularVelocity",box2d.b2Body.prototype.SetAngularVelocity);box2d.b2Body.prototype.GetAngularVelocity=function(){return this.m_angularVelocity};goog.exportProperty(box2d.b2Body.prototype,"GetAngularVelocity",box2d.b2Body.prototype.GetAngularVelocity);box2d.b2Body.prototype.GetDefinition=function(b){b.type=this.GetType();b.allowSleep=(this.m_flags&box2d.b2BodyFlag.e_autoSleepFlag)==box2d.b2BodyFlag.e_autoSleepFlag;b.angle=this.GetAngleRadians();b.angularDamping=this.m_angularDamping;b.gravityScale=this.m_gravityScale;b.angularVelocity=this.m_angularVelocity;b.fixedRotation=(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)==box2d.b2BodyFlag.e_fixedRotationFlag;b.bullet=(this.m_flags&box2d.b2BodyFlag.e_bulletFlag)==box2d.b2BodyFlag.e_bulletFlag;b.awake=(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)==box2d.b2BodyFlag.e_awakeFlag;b.linearDamping=this.m_linearDamping;b.linearVelocity.Copy(this.GetLinearVelocity());b.position.Copy(this.GetPosition());b.userData=this.GetUserData();return b};goog.exportProperty(box2d.b2Body.prototype,"GetDefinition",box2d.b2Body.prototype.GetDefinition);box2d.b2Body.prototype.ApplyForce=function(e,d,f){this.m_type==box2d.b2BodyType.b2_dynamicBody&&(0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag&&(this.m_force.x+=e.x,this.m_force.y+=e.y,this.m_torque+=(d.x-this.m_sweep.c.x)*e.y-(d.y-this.m_sweep.c.y)*e.x))};goog.exportProperty(box2d.b2Body.prototype,"ApplyForce",box2d.b2Body.prototype.ApplyForce);box2d.b2Body.prototype.ApplyForceToCenter=function(e,d){this.m_type==box2d.b2BodyType.b2_dynamicBody&&(0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag&&(this.m_force.x+=e.x,this.m_force.y+=e.y))};goog.exportProperty(box2d.b2Body.prototype,"ApplyForceToCenter",box2d.b2Body.prototype.ApplyForceToCenter);box2d.b2Body.prototype.ApplyTorque=function(e,d){this.m_type==box2d.b2BodyType.b2_dynamicBody&&(0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag&&(this.m_torque+=e))};goog.exportProperty(box2d.b2Body.prototype,"ApplyTorque",box2d.b2Body.prototype.ApplyTorque);box2d.b2Body.prototype.ApplyLinearImpulse=function(e,d,f){this.m_type==box2d.b2BodyType.b2_dynamicBody&&(0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*e.x,this.m_linearVelocity.y+=this.m_invMass*e.y,this.m_angularVelocity+=this.m_invI*((d.x-this.m_sweep.c.x)*e.y-(d.y-this.m_sweep.c.y)*e.x)))};goog.exportProperty(box2d.b2Body.prototype,"ApplyLinearImpulse",box2d.b2Body.prototype.ApplyLinearImpulse);box2d.b2Body.prototype.ApplyAngularImpulse=function(e,d){this.m_type==box2d.b2BodyType.b2_dynamicBody&&(0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag&&(this.m_angularVelocity+=this.m_invI*e))};goog.exportProperty(box2d.b2Body.prototype,"ApplyAngularImpulse",box2d.b2Body.prototype.ApplyAngularImpulse);box2d.b2Body.prototype.GetMass=function(){return this.m_mass};goog.exportProperty(box2d.b2Body.prototype,"GetMass",box2d.b2Body.prototype.GetMass);box2d.b2Body.prototype.GetInertia=function(){return this.m_I+this.m_mass*box2d.b2DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter)};goog.exportProperty(box2d.b2Body.prototype,"GetInertia",box2d.b2Body.prototype.GetInertia);box2d.b2Body.prototype.GetMassData=function(b){b.mass=this.m_mass;b.I=this.m_I+this.m_mass*box2d.b2DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter);b.center.Copy(this.m_sweep.localCenter);return b};goog.exportProperty(box2d.b2Body.prototype,"GetMassData",box2d.b2Body.prototype.GetMassData);box2d.b2Body.prototype.SetMassData=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.m_world.IsLocked());if(!0!=this.m_world.IsLocked()&&this.m_type==box2d.b2BodyType.b2_dynamicBody){this.m_invI=this.m_I=this.m_invMass=0;this.m_mass=e.mass;0>=this.m_mass&&(this.m_mass=1);this.m_invMass=1/this.m_mass;0<e.I&&0==(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)&&(this.m_I=e.I-this.m_mass*box2d.b2DotVV(e.center,e.center),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_I),this.m_invI=1/this.m_I);var d=box2d.b2Body.prototype.SetMassData.s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(e.center);box2d.b2MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c);this.m_sweep.c0.Copy(this.m_sweep.c);box2d.b2AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,box2d.b2SubVV(this.m_sweep.c,d,box2d.b2Vec2.s_t0),this.m_linearVelocity)}};goog.exportProperty(box2d.b2Body.prototype,"SetMassData",box2d.b2Body.prototype.SetMassData);box2d.b2Body.prototype.SetMassData.s_oldCenter=new box2d.b2Vec2;box2d.b2Body.prototype.ResetMassData=function(){this.m_invI=this.m_I=this.m_invMass=this.m_mass=0;this.m_sweep.localCenter.SetZero();if(this.m_type==box2d.b2BodyType.b2_staticBody||this.m_type==box2d.b2BodyType.b2_kinematicBody){this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a}else{box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_type==box2d.b2BodyType.b2_dynamicBody);for(var e=box2d.b2Body.prototype.ResetMassData.s_localCenter.SetZero(),d=this.m_fixtureList;d;d=d.m_next){if(0!=d.m_density){var f=d.GetMassData(box2d.b2Body.prototype.ResetMassData.s_massData);this.m_mass+=f.mass;e.x+=f.center.x*f.mass;e.y+=f.center.y*f.mass;this.m_I+=f.I}}0<this.m_mass?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):this.m_invMass=this.m_mass=1;0<this.m_I&&0==(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)?(this.m_I-=this.m_mass*box2d.b2DotVV(e,e),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_I),this.m_invI=1/this.m_I):this.m_invI=this.m_I=0;d=box2d.b2Body.prototype.ResetMassData.s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(e);box2d.b2MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c);this.m_sweep.c0.Copy(this.m_sweep.c);box2d.b2AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,box2d.b2SubVV(this.m_sweep.c,d,box2d.b2Vec2.s_t0),this.m_linearVelocity)}};goog.exportProperty(box2d.b2Body.prototype,"ResetMassData",box2d.b2Body.prototype.ResetMassData);box2d.b2Body.prototype.ResetMassData.s_localCenter=new box2d.b2Vec2;box2d.b2Body.prototype.ResetMassData.s_oldCenter=new box2d.b2Vec2;box2d.b2Body.prototype.ResetMassData.s_massData=new box2d.b2MassData;box2d.b2Body.prototype.GetWorldPoint=function(e,d){return box2d.b2MulXV(this.m_xf,e,d)};goog.exportProperty(box2d.b2Body.prototype,"GetWorldPoint",box2d.b2Body.prototype.GetWorldPoint);box2d.b2Body.prototype.GetWorldVector=function(e,d){return box2d.b2MulRV(this.m_xf.q,e,d)};goog.exportProperty(box2d.b2Body.prototype,"GetWorldVector",box2d.b2Body.prototype.GetWorldVector);box2d.b2Body.prototype.GetLocalPoint=function(e,d){return box2d.b2MulTXV(this.m_xf,e,d)};goog.exportProperty(box2d.b2Body.prototype,"GetLocalPoint",box2d.b2Body.prototype.GetLocalPoint);box2d.b2Body.prototype.GetLocalVector=function(e,d){return box2d.b2MulTRV(this.m_xf.q,e,d)};goog.exportProperty(box2d.b2Body.prototype,"GetLocalVector",box2d.b2Body.prototype.GetLocalVector);box2d.b2Body.prototype.GetLinearVelocityFromWorldPoint=function(e,d){return box2d.b2AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,box2d.b2SubVV(e,this.m_sweep.c,box2d.b2Vec2.s_t0),d)};goog.exportProperty(box2d.b2Body.prototype,"GetLinearVelocityFromWorldPoint",box2d.b2Body.prototype.GetLinearVelocityFromWorldPoint);box2d.b2Body.prototype.GetLinearVelocityFromLocalPoint=function(e,d){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(e,d),d)};goog.exportProperty(box2d.b2Body.prototype,"GetLinearVelocityFromLocalPoint",box2d.b2Body.prototype.GetLinearVelocityFromLocalPoint);box2d.b2Body.prototype.GetLinearDamping=function(){return this.m_linearDamping};goog.exportProperty(box2d.b2Body.prototype,"GetLinearDamping",box2d.b2Body.prototype.GetLinearDamping);box2d.b2Body.prototype.SetLinearDamping=function(b){this.m_linearDamping=b};goog.exportProperty(box2d.b2Body.prototype,"SetLinearDamping",box2d.b2Body.prototype.SetLinearDamping);box2d.b2Body.prototype.GetAngularDamping=function(){return this.m_angularDamping};goog.exportProperty(box2d.b2Body.prototype,"GetAngularDamping",box2d.b2Body.prototype.GetAngularDamping);box2d.b2Body.prototype.SetAngularDamping=function(b){this.m_angularDamping=b};goog.exportProperty(box2d.b2Body.prototype,"SetAngularDamping",box2d.b2Body.prototype.SetAngularDamping);box2d.b2Body.prototype.GetGravityScale=function(){return this.m_gravityScale};goog.exportProperty(box2d.b2Body.prototype,"GetGravityScale",box2d.b2Body.prototype.GetGravityScale);box2d.b2Body.prototype.SetGravityScale=function(b){this.m_gravityScale=b};goog.exportProperty(box2d.b2Body.prototype,"SetGravityScale",box2d.b2Body.prototype.SetGravityScale);box2d.b2Body.prototype.SetType=function(f){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.m_world.IsLocked());if(!0!=this.m_world.IsLocked()&&this.m_type!=f){this.m_type=f;this.ResetMassData();this.m_type==box2d.b2BodyType.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures());this.SetAwake(!0);this.m_force.SetZero();this.m_torque=0;for(f=this.m_contactList;f;){var d=f;f=f.next;this.m_world.m_contactManager.Destroy(d.contact)}this.m_contactList=null;f=this.m_world.m_contactManager.m_broadPhase;for(d=this.m_fixtureList;d;d=d.m_next){for(var j=d.m_proxyCount,g=0;g<j;++g){f.TouchProxy(d.m_proxies[g].proxy)}}}};goog.exportProperty(box2d.b2Body.prototype,"SetType",box2d.b2Body.prototype.SetType);box2d.b2Body.prototype.GetType=function(){return this.m_type};goog.exportProperty(box2d.b2Body.prototype,"GetType",box2d.b2Body.prototype.GetType);box2d.b2Body.prototype.SetBullet=function(b){this.m_flags=b?this.m_flags|box2d.b2BodyFlag.e_bulletFlag:this.m_flags&~box2d.b2BodyFlag.e_bulletFlag};goog.exportProperty(box2d.b2Body.prototype,"SetBullet",box2d.b2Body.prototype.SetBullet);box2d.b2Body.prototype.IsBullet=function(){return(this.m_flags&box2d.b2BodyFlag.e_bulletFlag)==box2d.b2BodyFlag.e_bulletFlag};goog.exportProperty(box2d.b2Body.prototype,"IsBullet",box2d.b2Body.prototype.IsBullet);box2d.b2Body.prototype.SetSleepingAllowed=function(b){b?this.m_flags|=box2d.b2BodyFlag.e_autoSleepFlag:(this.m_flags&=~box2d.b2BodyFlag.e_autoSleepFlag,this.SetAwake(!0))};goog.exportProperty(box2d.b2Body.prototype,"SetSleepingAllowed",box2d.b2Body.prototype.SetSleepingAllowed);box2d.b2Body.prototype.IsSleepingAllowed=function(){return(this.m_flags&box2d.b2BodyFlag.e_autoSleepFlag)==box2d.b2BodyFlag.e_autoSleepFlag};goog.exportProperty(box2d.b2Body.prototype,"IsSleepingAllowed",box2d.b2Body.prototype.IsSleepingAllowed);box2d.b2Body.prototype.SetAwake=function(b){b?0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&(this.m_flags|=box2d.b2BodyFlag.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~box2d.b2BodyFlag.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)};goog.exportProperty(box2d.b2Body.prototype,"SetAwake",box2d.b2Body.prototype.SetAwake);box2d.b2Body.prototype.IsAwake=function(){return(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)==box2d.b2BodyFlag.e_awakeFlag};goog.exportProperty(box2d.b2Body.prototype,"IsAwake",box2d.b2Body.prototype.IsAwake);box2d.b2Body.prototype.SetActive=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.m_world.IsLocked());if(e!=this.IsActive()){if(e){this.m_flags|=box2d.b2BodyFlag.e_activeFlag;e=this.m_world.m_contactManager.m_broadPhase;for(var d=this.m_fixtureList;d;d=d.m_next){d.CreateProxies(e,this.m_xf)}}else{this.m_flags&=~box2d.b2BodyFlag.e_activeFlag;e=this.m_world.m_contactManager.m_broadPhase;for(d=this.m_fixtureList;d;d=d.m_next){d.DestroyProxies(e)}for(e=this.m_contactList;e;){d=e,e=e.next,this.m_world.m_contactManager.Destroy(d.contact)}this.m_contactList=null}}};goog.exportProperty(box2d.b2Body.prototype,"SetActive",box2d.b2Body.prototype.SetActive);box2d.b2Body.prototype.IsActive=function(){return(this.m_flags&box2d.b2BodyFlag.e_activeFlag)==box2d.b2BodyFlag.e_activeFlag};goog.exportProperty(box2d.b2Body.prototype,"IsActive",box2d.b2Body.prototype.IsActive);box2d.b2Body.prototype.SetFixedRotation=function(b){(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)==box2d.b2BodyFlag.e_fixedRotationFlag!=b&&(this.m_flags=b?this.m_flags|box2d.b2BodyFlag.e_fixedRotationFlag:this.m_flags&~box2d.b2BodyFlag.e_fixedRotationFlag,this.m_angularVelocity=0,this.ResetMassData())};goog.exportProperty(box2d.b2Body.prototype,"SetFixedRotation",box2d.b2Body.prototype.SetFixedRotation);box2d.b2Body.prototype.IsFixedRotation=function(){return(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)==box2d.b2BodyFlag.e_fixedRotationFlag};goog.exportProperty(box2d.b2Body.prototype,"IsFixedRotation",box2d.b2Body.prototype.IsFixedRotation);box2d.b2Body.prototype.GetFixtureList=function(){return this.m_fixtureList};goog.exportProperty(box2d.b2Body.prototype,"GetFixtureList",box2d.b2Body.prototype.GetFixtureList);box2d.b2Body.prototype.GetJointList=function(){return this.m_jointList};goog.exportProperty(box2d.b2Body.prototype,"GetJointList",box2d.b2Body.prototype.GetJointList);box2d.b2Body.prototype.GetContactList=function(){return this.m_contactList};goog.exportProperty(box2d.b2Body.prototype,"GetContactList",box2d.b2Body.prototype.GetContactList);box2d.b2Body.prototype.GetNext=function(){return this.m_next};goog.exportProperty(box2d.b2Body.prototype,"GetNext",box2d.b2Body.prototype.GetNext);box2d.b2Body.prototype.GetUserData=function(){return this.m_userData};goog.exportProperty(box2d.b2Body.prototype,"GetUserData",box2d.b2Body.prototype.GetUserData);box2d.b2Body.prototype.SetUserData=function(b){this.m_userData=b};goog.exportProperty(box2d.b2Body.prototype,"SetUserData",box2d.b2Body.prototype.SetUserData);box2d.b2Body.prototype.GetWorld=function(){return this.m_world};goog.exportProperty(box2d.b2Body.prototype,"GetWorld",box2d.b2Body.prototype.GetWorld);box2d.b2Body.prototype.SynchronizeFixtures=function(){var e=box2d.b2Body.prototype.SynchronizeFixtures.s_xf1;e.q.SetAngleRadians(this.m_sweep.a0);box2d.b2MulRV(e.q,this.m_sweep.localCenter,e.p);box2d.b2SubVV(this.m_sweep.c0,e.p,e.p);for(var d=this.m_world.m_contactManager.m_broadPhase,f=this.m_fixtureList;f;f=f.m_next){f.Synchronize(d,e,this.m_xf)}};goog.exportProperty(box2d.b2Body.prototype,"SynchronizeFixtures",box2d.b2Body.prototype.SynchronizeFixtures);box2d.b2Body.prototype.SynchronizeFixtures.s_xf1=new box2d.b2Transform;box2d.b2Body.prototype.SynchronizeTransform=function(){this.m_xf.q.SetAngleRadians(this.m_sweep.a);box2d.b2MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p);box2d.b2SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)};goog.exportProperty(box2d.b2Body.prototype,"SynchronizeTransform",box2d.b2Body.prototype.SynchronizeTransform);box2d.b2Body.prototype.ShouldCollide=function(e){if(this.m_type!=box2d.b2BodyType.b2_dynamicBody&&e.m_type!=box2d.b2BodyType.b2_dynamicBody){return !1}for(var d=this.m_jointList;d;d=d.next){if(d.other==e&&!1==d.joint.m_collideConnected){return !1}}return !0};goog.exportProperty(box2d.b2Body.prototype,"ShouldCollide",box2d.b2Body.prototype.ShouldCollide);box2d.b2Body.prototype.Advance=function(b){this.m_sweep.Advance(b);this.m_sweep.c.Copy(this.m_sweep.c0);this.m_sweep.a=this.m_sweep.a0;this.m_xf.q.SetAngleRadians(this.m_sweep.a);box2d.b2MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p);box2d.b2SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)};goog.exportProperty(box2d.b2Body.prototype,"Advance",box2d.b2Body.prototype.Advance);box2d.b2Body.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_islandIndex;box2d.b2Log("if (true)\n");box2d.b2Log("{\n");box2d.b2Log("  /*box2d.b2BodyDef*/ var bd = new box2d.b2BodyDef();\n");var d="";switch(this.m_type){case box2d.b2BodyType.b2_staticBody:d="box2d.b2BodyType.b2_staticBody";break;case box2d.b2BodyType.b2_kinematicBody:d="box2d.b2BodyType.b2_kinematicBody";break;case box2d.b2BodyType.b2_dynamicBody:d="box2d.b2BodyType.b2_dynamicBody";break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}box2d.b2Log("  bd.type = %s;\n",d);box2d.b2Log("  bd.position.SetXY(%.15f, %.15f);\n",this.m_xf.p.x,this.m_xf.p.y);box2d.b2Log("  bd.angle = %.15f;\n",this.m_sweep.a);box2d.b2Log("  bd.linearVelocity.SetXY(%.15f, %.15f);\n",this.m_linearVelocity.x,this.m_linearVelocity.y);box2d.b2Log("  bd.angularVelocity = %.15f;\n",this.m_angularVelocity);box2d.b2Log("  bd.linearDamping = %.15f;\n",this.m_linearDamping);box2d.b2Log("  bd.angularDamping = %.15f;\n",this.m_angularDamping);box2d.b2Log("  bd.allowSleep = %s;\n",this.m_flags&box2d.b2BodyFlag.e_autoSleepFlag?"true":"false");box2d.b2Log("  bd.awake = %s;\n",this.m_flags&box2d.b2BodyFlag.e_awakeFlag?"true":"false");box2d.b2Log("  bd.fixedRotation = %s;\n",this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag?"true":"false");box2d.b2Log("  bd.bullet = %s;\n",this.m_flags&box2d.b2BodyFlag.e_bulletFlag?"true":"false");box2d.b2Log("  bd.active = %s;\n",this.m_flags&box2d.b2BodyFlag.e_activeFlag?"true":"false");box2d.b2Log("  bd.gravityScale = %.15f;\n",this.m_gravityScale);box2d.b2Log("\n");box2d.b2Log("  bodies[%d] = this.m_world.CreateBody(bd);\n",this.m_islandIndex);box2d.b2Log("\n");for(d=this.m_fixtureList;d;d=d.m_next){box2d.b2Log("  if (true)\n"),box2d.b2Log("  {\n"),d.Dump(e),box2d.b2Log("  }\n")}box2d.b2Log("}\n")}};goog.exportProperty(box2d.b2Body.prototype,"Dump",box2d.b2Body.prototype.Dump);box2d.b2Body.prototype.GetControllerList=function(){return this.m_controllerList};goog.exportProperty(box2d.b2Body.prototype,"GetControllerList",box2d.b2Body.prototype.GetControllerList);box2d.b2Body.prototype.GetControllerCount=function(){return this.m_controllerCount};goog.exportProperty(box2d.b2Body.prototype,"GetControllerCount",box2d.b2Body.prototype.GetControllerCount);box2d.b2WorldFlag={e_none:0,e_newFixture:1,e_locked:2,e_clearForces:4};goog.exportSymbol("box2d.b2WorldFlag",box2d.b2WorldFlag);goog.exportProperty(box2d.b2WorldFlag,"e_none",box2d.b2WorldFlag.e_none);goog.exportProperty(box2d.b2WorldFlag,"e_newFixture",box2d.b2WorldFlag.e_newFixture);goog.exportProperty(box2d.b2WorldFlag,"e_locked",box2d.b2WorldFlag.e_locked);goog.exportProperty(box2d.b2WorldFlag,"e_clearForces",box2d.b2WorldFlag.e_clearForces);box2d.b2World=function(b){this.m_flags=box2d.b2WorldFlag.e_clearForces;this.m_contactManager=new box2d.b2ContactManager;this.m_gravity=b.Clone();this.m_out_gravity=new box2d.b2Vec2;this.m_allowSleep=!0;this.m_debugDraw=this.m_destructionListener=null;this.m_continuousPhysics=this.m_warmStarting=!0;this.m_subStepping=!1;this.m_stepComplete=!0;this.m_profile=new box2d.b2Profile;this.m_island=new box2d.b2Island;this.s_stack=[]};goog.exportSymbol("box2d.b2World",box2d.b2World);box2d.b2World.prototype.m_flags=box2d.b2WorldFlag.e_none;goog.exportProperty(box2d.b2World.prototype,"m_flags",box2d.b2World.prototype.m_flags);box2d.b2World.prototype.m_contactManager=null;goog.exportProperty(box2d.b2World.prototype,"m_contactManager",box2d.b2World.prototype.m_contactManager);box2d.b2World.prototype.m_bodyList=null;goog.exportProperty(box2d.b2World.prototype,"m_bodyList",box2d.b2World.prototype.m_bodyList);box2d.b2World.prototype.m_jointList=null;goog.exportProperty(box2d.b2World.prototype,"m_jointList",box2d.b2World.prototype.m_jointList);box2d.b2World.prototype.m_bodyCount=0;goog.exportProperty(box2d.b2World.prototype,"m_bodyCount",box2d.b2World.prototype.m_bodyCount);box2d.b2World.prototype.m_jointCount=0;goog.exportProperty(box2d.b2World.prototype,"m_jointCount",box2d.b2World.prototype.m_jointCount);box2d.b2World.prototype.m_gravity=null;goog.exportProperty(box2d.b2World.prototype,"m_gravity",box2d.b2World.prototype.m_gravity);box2d.b2World.prototype.m_out_gravity=null;goog.exportProperty(box2d.b2World.prototype,"m_out_gravity",box2d.b2World.prototype.m_out_gravity);box2d.b2World.prototype.m_allowSleep=!0;goog.exportProperty(box2d.b2World.prototype,"m_allowSleep",box2d.b2World.prototype.m_allowSleep);box2d.b2World.prototype.m_destructionListener=null;goog.exportProperty(box2d.b2World.prototype,"m_destructionListener",box2d.b2World.prototype.m_destructionListener);box2d.b2World.prototype.m_debugDraw=null;goog.exportProperty(box2d.b2World.prototype,"m_debugDraw",box2d.b2World.prototype.m_debugDraw);box2d.b2World.prototype.m_inv_dt0=0;goog.exportProperty(box2d.b2World.prototype,"m_inv_dt0",box2d.b2World.prototype.m_inv_dt0);box2d.b2World.prototype.m_warmStarting=!0;goog.exportProperty(box2d.b2World.prototype,"m_warmStarting",box2d.b2World.prototype.m_warmStarting);box2d.b2World.prototype.m_continuousPhysics=!0;goog.exportProperty(box2d.b2World.prototype,"m_continuousPhysics",box2d.b2World.prototype.m_continuousPhysics);box2d.b2World.prototype.m_subStepping=!1;goog.exportProperty(box2d.b2World.prototype,"m_subStepping",box2d.b2World.prototype.m_subStepping);box2d.b2World.prototype.m_stepComplete=!0;goog.exportProperty(box2d.b2World.prototype,"m_stepComplete",box2d.b2World.prototype.m_stepComplete);box2d.b2World.prototype.m_profile=null;goog.exportProperty(box2d.b2World.prototype,"m_profile",box2d.b2World.prototype.m_profile);box2d.b2World.prototype.m_island=null;goog.exportProperty(box2d.b2World.prototype,"m_island",box2d.b2World.prototype.m_island);box2d.b2World.prototype.s_stack=null;goog.exportProperty(box2d.b2World.prototype,"s_stack",box2d.b2World.prototype.s_stack);box2d.b2World.prototype.m_controllerList=null;goog.exportProperty(box2d.b2World.prototype,"m_controllerList",box2d.b2World.prototype.m_controllerList);box2d.b2World.prototype.m_controllerCount=0;goog.exportProperty(box2d.b2World.prototype,"m_controllerCount",box2d.b2World.prototype.m_controllerCount);box2d.b2World.prototype.SetAllowSleeping=function(b){if(b!=this.m_allowSleep&&(this.m_allowSleep=b,!1==this.m_allowSleep)){for(b=this.m_bodyList;b;b=b.m_next){b.SetAwake(!0)}}};goog.exportProperty(box2d.b2World.prototype,"SetAllowSleeping",box2d.b2World.prototype.SetAllowSleeping);box2d.b2World.prototype.GetAllowSleeping=function(){return this.m_allowSleep};goog.exportProperty(box2d.b2World.prototype,"GetAllowSleeping",box2d.b2World.prototype.GetAllowSleeping);box2d.b2World.prototype.SetWarmStarting=function(b){this.m_warmStarting=b};goog.exportProperty(box2d.b2World.prototype,"SetWarmStarting",box2d.b2World.prototype.SetWarmStarting);box2d.b2World.prototype.GetWarmStarting=function(){return this.m_warmStarting};goog.exportProperty(box2d.b2World.prototype,"GetWarmStarting",box2d.b2World.prototype.GetWarmStarting);box2d.b2World.prototype.SetContinuousPhysics=function(b){this.m_continuousPhysics=b};goog.exportProperty(box2d.b2World.prototype,"SetContinuousPhysics",box2d.b2World.prototype.SetContinuousPhysics);box2d.b2World.prototype.GetContinuousPhysics=function(){return this.m_continuousPhysics};goog.exportProperty(box2d.b2World.prototype,"GetContinuousPhysics",box2d.b2World.prototype.GetContinuousPhysics);box2d.b2World.prototype.SetSubStepping=function(b){this.m_subStepping=b};goog.exportProperty(box2d.b2World.prototype,"SetSubStepping",box2d.b2World.prototype.SetSubStepping);box2d.b2World.prototype.GetSubStepping=function(){return this.m_subStepping};goog.exportProperty(box2d.b2World.prototype,"GetSubStepping",box2d.b2World.prototype.GetSubStepping);box2d.b2World.prototype.GetBodyList=function(){return this.m_bodyList};goog.exportProperty(box2d.b2World.prototype,"GetBodyList",box2d.b2World.prototype.GetBodyList);box2d.b2World.prototype.GetJointList=function(){return this.m_jointList};goog.exportProperty(box2d.b2World.prototype,"GetJointList",box2d.b2World.prototype.GetJointList);box2d.b2World.prototype.GetContactList=function(){return this.m_contactManager.m_contactList};goog.exportProperty(box2d.b2World.prototype,"GetContactList",box2d.b2World.prototype.GetContactList);box2d.b2World.prototype.GetBodyCount=function(){return this.m_bodyCount};goog.exportProperty(box2d.b2World.prototype,"GetBodyCount",box2d.b2World.prototype.GetBodyCount);box2d.b2World.prototype.GetJointCount=function(){return this.m_jointCount};goog.exportProperty(box2d.b2World.prototype,"GetJointCount",box2d.b2World.prototype.GetJointCount);box2d.b2World.prototype.GetContactCount=function(){return this.m_contactManager.m_contactCount};goog.exportProperty(box2d.b2World.prototype,"GetContactCount",box2d.b2World.prototype.GetContactCount);box2d.b2World.prototype.SetGravity=function(e,d){d=d||!0;if(this.m_gravity.x!==e.x||this.m_gravity.y!==e.y){if(this.m_gravity.Copy(e),d){for(var f=this.m_bodyList;f;f=f.m_next){f.SetAwake(!0)}}}};goog.exportProperty(box2d.b2World.prototype,"SetGravity",box2d.b2World.prototype.SetGravity);box2d.b2World.prototype.GetGravity=function(b){b=b||this.m_out_gravity;return b.Copy(this.m_gravity)};goog.exportProperty(box2d.b2World.prototype,"GetGravity",box2d.b2World.prototype.GetGravity);box2d.b2World.prototype.IsLocked=function(){return 0<(this.m_flags&box2d.b2WorldFlag.e_locked)};goog.exportProperty(box2d.b2World.prototype,"IsLocked",box2d.b2World.prototype.IsLocked);box2d.b2World.prototype.SetAutoClearForces=function(b){this.m_flags=b?this.m_flags|box2d.b2WorldFlag.e_clearForces:this.m_flags&~box2d.b2WorldFlag.e_clearForces};goog.exportProperty(box2d.b2World.prototype,"SetAutoClearForces",box2d.b2World.prototype.SetAutoClearForces);box2d.b2World.prototype.GetAutoClearForces=function(){return(this.m_flags&box2d.b2WorldFlag.e_clearForces)==box2d.b2WorldFlag.e_clearForces};goog.exportProperty(box2d.b2World.prototype,"GetAutoClearForces",box2d.b2World.prototype.GetAutoClearForces);box2d.b2World.prototype.GetContactManager=function(){return this.m_contactManager};goog.exportProperty(box2d.b2World.prototype,"GetContactManager",box2d.b2World.prototype.GetContactManager);box2d.b2World.prototype.GetProfile=function(){return this.m_profile};goog.exportProperty(box2d.b2World.prototype,"GetProfile",box2d.b2World.prototype.GetProfile);box2d.b2World.prototype.SetDestructionListener=function(b){this.m_destructionListener=b};goog.exportProperty(box2d.b2World.prototype,"SetDestructionListener",box2d.b2World.prototype.SetDestructionListener);box2d.b2World.prototype.SetContactFilter=function(b){this.m_contactManager.m_contactFilter=b};goog.exportProperty(box2d.b2World.prototype,"SetContactFilter",box2d.b2World.prototype.SetContactFilter);box2d.b2World.prototype.SetContactListener=function(b){this.m_contactManager.m_contactListener=b};goog.exportProperty(box2d.b2World.prototype,"SetContactListener",box2d.b2World.prototype.SetContactListener);box2d.b2World.prototype.SetDebugDraw=function(b){this.m_debugDraw=b};goog.exportProperty(box2d.b2World.prototype,"SetDebugDraw",box2d.b2World.prototype.SetDebugDraw);box2d.b2World.prototype.CreateBody=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.IsLocked());if(this.IsLocked()){return null}b=new box2d.b2Body(b,this);b.m_prev=null;if(b.m_next=this.m_bodyList){this.m_bodyList.m_prev=b}this.m_bodyList=b;++this.m_bodyCount;return b};goog.exportProperty(box2d.b2World.prototype,"CreateBody",box2d.b2World.prototype.CreateBody);box2d.b2World.prototype.DestroyBody=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_bodyCount);box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.IsLocked());if(!this.IsLocked()){for(var d=e.m_jointList;d;){var f=d,d=d.next;this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(f.joint);this.DestroyJoint(f.joint);e.m_jointList=d}e.m_jointList=null;for(d=e.m_controllerList;d;){f=d,d=d.nextController,f.controller.RemoveBody(e)}for(d=e.m_contactList;d;){f=d,d=d.next,this.m_contactManager.Destroy(f.contact)}e.m_contactList=null;for(d=e.m_fixtureList;d;){f=d,d=d.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(f),f.DestroyProxies(this.m_contactManager.m_broadPhase),f.Destroy(),e.m_fixtureList=d,e.m_fixtureCount-=1}e.m_fixtureList=null;e.m_fixtureCount=0;e.m_prev&&(e.m_prev.m_next=e.m_next);e.m_next&&(e.m_next.m_prev=e.m_prev);e==this.m_bodyList&&(this.m_bodyList=e.m_next);--this.m_bodyCount}};goog.exportProperty(box2d.b2World.prototype,"DestroyBody",box2d.b2World.prototype.DestroyBody);box2d.b2World.prototype.CreateJoint=function(f){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.IsLocked());if(this.IsLocked()){return null}var d=box2d.b2JointFactory.Create(f,null);d.m_prev=null;if(d.m_next=this.m_jointList){this.m_jointList.m_prev=d}this.m_jointList=d;++this.m_jointCount;d.m_edgeA.joint=d;d.m_edgeA.other=d.m_bodyB;d.m_edgeA.prev=null;if(d.m_edgeA.next=d.m_bodyA.m_jointList){d.m_bodyA.m_jointList.prev=d.m_edgeA}d.m_bodyA.m_jointList=d.m_edgeA;d.m_edgeB.joint=d;d.m_edgeB.other=d.m_bodyA;d.m_edgeB.prev=null;if(d.m_edgeB.next=d.m_bodyB.m_jointList){d.m_bodyB.m_jointList.prev=d.m_edgeB}d.m_bodyB.m_jointList=d.m_edgeB;var j=f.bodyA,g=f.bodyB;if(!1==f.collideConnected){for(f=g.GetContactList();f;){f.other==j&&f.contact.FlagForFiltering(),f=f.next}}return d};goog.exportProperty(box2d.b2World.prototype,"CreateJoint",box2d.b2World.prototype.CreateJoint);box2d.b2World.prototype.DestroyJoint=function(f){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.IsLocked());if(!this.IsLocked()){var d=f.m_collideConnected;f.m_prev&&(f.m_prev.m_next=f.m_next);f.m_next&&(f.m_next.m_prev=f.m_prev);f==this.m_jointList&&(this.m_jointList=f.m_next);var j=f.m_bodyA,g=f.m_bodyB;j.SetAwake(!0);g.SetAwake(!0);f.m_edgeA.prev&&(f.m_edgeA.prev.next=f.m_edgeA.next);f.m_edgeA.next&&(f.m_edgeA.next.prev=f.m_edgeA.prev);f.m_edgeA==j.m_jointList&&(j.m_jointList=f.m_edgeA.next);f.m_edgeA.prev=null;f.m_edgeA.next=null;f.m_edgeB.prev&&(f.m_edgeB.prev.next=f.m_edgeB.next);f.m_edgeB.next&&(f.m_edgeB.next.prev=f.m_edgeB.prev);f.m_edgeB==g.m_jointList&&(g.m_jointList=f.m_edgeB.next);f.m_edgeB.prev=null;f.m_edgeB.next=null;box2d.b2JointFactory.Destroy(f,null);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_jointCount);--this.m_jointCount;if(!1==d){for(f=g.GetContactList();f;){f.other==j&&f.contact.FlagForFiltering(),f=f.next}}}};goog.exportProperty(box2d.b2World.prototype,"DestroyJoint",box2d.b2World.prototype.DestroyJoint);box2d.b2World.prototype.Solve=function(A){for(var z=this.m_controllerList;z;z=z.m_next){z.Step(A)}this.m_profile.solveInit=0;this.m_profile.solveVelocity=0;this.m_profile.solvePosition=0;z=this.m_island;z.Initialize(this.m_bodyCount,this.m_contactManager.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener);for(var y=this.m_bodyList;y;y=y.m_next){y.m_flags&=~box2d.b2BodyFlag.e_islandFlag}for(var u=this.m_contactManager.m_contactList;u;u=u.m_next){u.m_flags&=~box2d.b2ContactFlag.e_islandFlag}for(u=this.m_jointList;u;u=u.m_next){u.m_islandFlag=!1}for(var u=this.m_bodyCount,v=this.s_stack,r=this.m_bodyList;r;r=r.m_next){if(!(r.m_flags&box2d.b2BodyFlag.e_islandFlag)&&!1!=r.IsAwake()&&!1!=r.IsActive()&&r.GetType()!=box2d.b2BodyType.b2_staticBody){z.Clear();var q=0;v[q++]=r;for(r.m_flags|=box2d.b2BodyFlag.e_islandFlag;0<q;){if(y=v[--q],box2d.ENABLE_ASSERTS&&box2d.b2Assert(!0==y.IsActive()),z.AddBody(y),y.SetAwake(!0),y.GetType()!=box2d.b2BodyType.b2_staticBody){for(var n=y.m_contactList;n;n=n.next){var j=n.contact;if(!(j.m_flags&box2d.b2ContactFlag.e_islandFlag)&&!1!=j.IsEnabled()&&!1!=j.IsTouching()){var m=j.m_fixtureB.m_isSensor;j.m_fixtureA.m_isSensor||m||(z.AddContact(j),j.m_flags|=box2d.b2ContactFlag.e_islandFlag,j=n.other,j.m_flags&box2d.b2BodyFlag.e_islandFlag||(box2d.ENABLE_ASSERTS&&box2d.b2Assert(q<u),v[q++]=j,j.m_flags|=box2d.b2BodyFlag.e_islandFlag))}}for(y=y.m_jointList;y;y=y.next){!0!=y.joint.m_islandFlag&&(j=y.other,!1!=j.IsActive()&&(z.AddJoint(y.joint),y.joint.m_islandFlag=!0,j.m_flags&box2d.b2BodyFlag.e_islandFlag||(box2d.ENABLE_ASSERTS&&box2d.b2Assert(q<u),v[q++]=j,j.m_flags|=box2d.b2BodyFlag.e_islandFlag)))}}}y=new box2d.b2Profile;z.Solve(y,A,this.m_gravity,this.m_allowSleep);this.m_profile.solveInit+=y.solveInit;this.m_profile.solveVelocity+=y.solveVelocity;this.m_profile.solvePosition+=y.solvePosition;for(q=0;q<z.m_bodyCount;++q){y=z.m_bodies[q],y.GetType()==box2d.b2BodyType.b2_staticBody&&(y.m_flags&=~box2d.b2BodyFlag.e_islandFlag)}}}for(q=0;q<v.length&&v[q];++q){v[q]=null}A=new box2d.b2Timer;for(y=this.m_bodyList;y;y=y.m_next){0!=(y.m_flags&box2d.b2BodyFlag.e_islandFlag)&&y.GetType()!=box2d.b2BodyType.b2_staticBody&&y.SynchronizeFixtures()}this.m_contactManager.FindNewContacts();this.m_profile.broadphase=A.GetMilliseconds()};goog.exportProperty(box2d.b2World.prototype,"Solve",box2d.b2World.prototype.Solve);box2d.b2World.prototype.SolveTOI=function(F){var E=this.m_island;E.Initialize(2*box2d.b2_maxTOIContacts,box2d.b2_maxTOIContacts,0,null,this.m_contactManager.m_contactListener);if(this.m_stepComplete){for(var D=this.m_bodyList;D;D=D.m_next){D.m_flags&=~box2d.b2BodyFlag.e_islandFlag,D.m_sweep.alpha0=0}for(var B=this.m_contactManager.m_contactList;B;B=B.m_next){B.m_flags&=~(box2d.b2ContactFlag.e_toiFlag|box2d.b2ContactFlag.e_islandFlag),B.m_toiCount=0,B.m_toi=1}}for(;;){for(var C=null,D=1,B=this.m_contactManager.m_contactList;B;B=B.m_next){if(!1!=B.IsEnabled()&&!(B.m_toiCount>box2d.b2_maxSubSteps)){var A=1;if(B.m_flags&box2d.b2ContactFlag.e_toiFlag){A=B.m_toi}else{var z=B.GetFixtureA(),y=B.GetFixtureB();if(z.IsSensor()||y.IsSensor()){continue}var A=z.GetBody(),u=y.GetBody(),v=A.m_type,r=u.m_type;box2d.ENABLE_ASSERTS&&box2d.b2Assert(v==box2d.b2BodyType.b2_dynamicBody||r==box2d.b2BodyType.b2_dynamicBody);var q=A.IsAwake()&&v!=box2d.b2BodyType.b2_staticBody,j=u.IsAwake()&&r!=box2d.b2BodyType.b2_staticBody;if(!1==q&&!1==j){continue}v=A.IsBullet()||v!=box2d.b2BodyType.b2_dynamicBody;r=u.IsBullet()||r!=box2d.b2BodyType.b2_dynamicBody;if(!1==v&&!1==r){continue}r=A.m_sweep.alpha0;A.m_sweep.alpha0<u.m_sweep.alpha0?(r=u.m_sweep.alpha0,A.m_sweep.Advance(r)):u.m_sweep.alpha0<A.m_sweep.alpha0&&(r=A.m_sweep.alpha0,u.m_sweep.Advance(r));box2d.ENABLE_ASSERTS&&box2d.b2Assert(1>r);q=B.GetChildIndexA();j=B.GetChildIndexB();v=box2d.b2World.prototype.SolveTOI.s_toi_input;v.proxyA.SetShape(z.GetShape(),q);v.proxyB.SetShape(y.GetShape(),j);v.sweepA.Copy(A.m_sweep);v.sweepB.Copy(u.m_sweep);v.tMax=1;A=box2d.b2World.prototype.SolveTOI.s_toi_output;box2d.b2TimeOfImpact(A,v);u=A.t;A=A.state==box2d.b2TOIOutputState.e_touching?box2d.b2Min(r+(1-r)*u,1):1;B.m_toi=A;B.m_flags|=box2d.b2ContactFlag.e_toiFlag}A<D&&(C=B,D=A)}}if(null==C||1-10*box2d.b2_epsilon<D){this.m_stepComplete=!0;break}z=C.GetFixtureA();y=C.GetFixtureB();A=z.GetBody();u=y.GetBody();B=box2d.b2World.prototype.SolveTOI.s_backup1.Copy(A.m_sweep);z=box2d.b2World.prototype.SolveTOI.s_backup2.Copy(u.m_sweep);A.Advance(D);u.Advance(D);C.Update(this.m_contactManager.m_contactListener);C.m_flags&=~box2d.b2ContactFlag.e_toiFlag;++C.m_toiCount;if(!1==C.IsEnabled()||!1==C.IsTouching()){C.SetEnabled(!1),A.m_sweep.Copy(B),u.m_sweep.Copy(z),A.SynchronizeTransform(),u.SynchronizeTransform()}else{A.SetAwake(!0);u.SetAwake(!0);E.Clear();E.AddBody(A);E.AddBody(u);E.AddContact(C);A.m_flags|=box2d.b2BodyFlag.e_islandFlag;u.m_flags|=box2d.b2BodyFlag.e_islandFlag;C.m_flags|=box2d.b2ContactFlag.e_islandFlag;for(C=0;2>C;++C){if(B=0==C?A:u,B.m_type==box2d.b2BodyType.b2_dynamicBody){for(z=B.m_contactList;z&&E.m_bodyCount!=E.m_bodyCapacity&&E.m_contactCount!=E.m_contactCapacity;z=z.next){y=z.contact,y.m_flags&box2d.b2ContactFlag.e_islandFlag||(r=z.other,r.m_type==box2d.b2BodyType.b2_dynamicBody&&!1==B.IsBullet()&&!1==r.IsBullet())||(v=y.m_fixtureB.m_isSensor,y.m_fixtureA.m_isSensor||v||(v=box2d.b2World.prototype.SolveTOI.s_backup.Copy(r.m_sweep),0==(r.m_flags&box2d.b2BodyFlag.e_islandFlag)&&r.Advance(D),y.Update(this.m_contactManager.m_contactListener),!1==y.IsEnabled()?(r.m_sweep.Copy(v),r.SynchronizeTransform()):!1==y.IsTouching()?(r.m_sweep.Copy(v),r.SynchronizeTransform()):(y.m_flags|=box2d.b2ContactFlag.e_islandFlag,E.AddContact(y),r.m_flags&box2d.b2BodyFlag.e_islandFlag||(r.m_flags|=box2d.b2BodyFlag.e_islandFlag,r.m_type!=box2d.b2BodyType.b2_staticBody&&r.SetAwake(!0),E.AddBody(r)))))}}}C=box2d.b2World.prototype.SolveTOI.s_subStep;C.dt=(1-D)*F.dt;C.inv_dt=1/C.dt;C.dtRatio=1;C.positionIterations=20;C.velocityIterations=F.velocityIterations;C.warmStarting=!1;E.SolveTOI(C,A.m_islandIndex,u.m_islandIndex);for(C=0;C<E.m_bodyCount;++C){if(B=E.m_bodies[C],B.m_flags&=~box2d.b2BodyFlag.e_islandFlag,B.m_type==box2d.b2BodyType.b2_dynamicBody){for(B.SynchronizeFixtures(),z=B.m_contactList;z;z=z.next){z.contact.m_flags&=~(box2d.b2ContactFlag.e_toiFlag|box2d.b2ContactFlag.e_islandFlag)}}}this.m_contactManager.FindNewContacts();if(this.m_subStepping){this.m_stepComplete=!1;break}}}};goog.exportProperty(box2d.b2World.prototype,"SolveTOI",box2d.b2World.prototype.SolveTOI);box2d.b2World.prototype.SolveTOI.s_subStep=new box2d.b2TimeStep;box2d.b2World.prototype.SolveTOI.s_backup=new box2d.b2Sweep;box2d.b2World.prototype.SolveTOI.s_backup1=new box2d.b2Sweep;box2d.b2World.prototype.SolveTOI.s_backup2=new box2d.b2Sweep;box2d.b2World.prototype.SolveTOI.s_toi_input=new box2d.b2TOIInput;box2d.b2World.prototype.SolveTOI.s_toi_output=new box2d.b2TOIOutput;box2d.b2World.prototype.Step=function(g,f,m){var j=new box2d.b2Timer;this.m_flags&box2d.b2WorldFlag.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~box2d.b2WorldFlag.e_newFixture);this.m_flags|=box2d.b2WorldFlag.e_locked;var k=box2d.b2World.prototype.Step.s_step;k.dt=g;k.velocityIterations=f;k.positionIterations=m;k.inv_dt=0<g?1/g:0;k.dtRatio=this.m_inv_dt0*g;k.warmStarting=this.m_warmStarting;g=new box2d.b2Timer;this.m_contactManager.Collide();this.m_profile.collide=g.GetMilliseconds();this.m_stepComplete&&0<k.dt&&(g=new box2d.b2Timer,this.Solve(k),this.m_profile.solve=g.GetMilliseconds());this.m_continuousPhysics&&0<k.dt&&(g=new box2d.b2Timer,this.SolveTOI(k),this.m_profile.solveTOI=g.GetMilliseconds());0<k.dt&&(this.m_inv_dt0=k.inv_dt);this.m_flags&box2d.b2WorldFlag.e_clearForces&&this.ClearForces();this.m_flags&=~box2d.b2WorldFlag.e_locked;this.m_profile.step=j.GetMilliseconds()};goog.exportProperty(box2d.b2World.prototype,"Step",box2d.b2World.prototype.Step);box2d.b2World.prototype.Step.s_step=new box2d.b2TimeStep;box2d.b2World.prototype.ClearForces=function(){for(var b=this.m_bodyList;b;b=b.m_next){b.m_force.SetZero(),b.m_torque=0}};goog.exportProperty(box2d.b2World.prototype,"ClearForces",box2d.b2World.prototype.ClearForces);box2d.b2World.prototype.QueryAABB=function(e,d){var f=this.m_contactManager.m_broadPhase;f.Query(function(g){g=f.GetUserData(g);box2d.ENABLE_ASSERTS&&box2d.b2Assert(g instanceof box2d.b2FixtureProxy);g=g.fixture;return e instanceof box2d.b2QueryCallback?e.ReportFixture(g):e(g)},d)};goog.exportProperty(box2d.b2World.prototype,"QueryAABB",box2d.b2World.prototype.QueryAABB);box2d.b2World.prototype.QueryShape=function(g,f,m){var j=this.m_contactManager.m_broadPhase,k=box2d.b2World.prototype.QueryShape.s_aabb;f.ComputeAABB(k,m,0);j.Query(function(b){b=j.GetUserData(b);box2d.ENABLE_ASSERTS&&box2d.b2Assert(b instanceof box2d.b2FixtureProxy);b=b.fixture;return box2d.b2TestOverlapShape(f,0,b.GetShape(),0,m,b.GetBody().GetTransform())?g instanceof box2d.b2QueryCallback?g.ReportFixture(b):g(b):!0},k)};goog.exportProperty(box2d.b2World.prototype,"QueryShape",box2d.b2World.prototype.QueryShape);box2d.b2World.prototype.QueryShape.s_aabb=new box2d.b2AABB;box2d.b2World.prototype.QueryPoint=function(f,d){var j=this.m_contactManager.m_broadPhase,g=box2d.b2World.prototype.QueryPoint.s_aabb;g.lowerBound.SetXY(d.x-box2d.b2_linearSlop,d.y-box2d.b2_linearSlop);g.upperBound.SetXY(d.x+box2d.b2_linearSlop,d.y+box2d.b2_linearSlop);j.Query(function(b){b=j.GetUserData(b);box2d.ENABLE_ASSERTS&&box2d.b2Assert(b instanceof box2d.b2FixtureProxy);b=b.fixture;return b.TestPoint(d)?f instanceof box2d.b2QueryCallback?f.ReportFixture(b):f(b):!0},g)};goog.exportProperty(box2d.b2World.prototype,"QueryPoint",box2d.b2World.prototype.QueryPoint);box2d.b2World.prototype.QueryPoint.s_aabb=new box2d.b2AABB;box2d.b2World.prototype.RayCast=function(g,f,m){var j=this.m_contactManager.m_broadPhase,k=box2d.b2World.prototype.RayCast.s_input;k.maxFraction=1;k.p1.Copy(f);k.p2.Copy(m);j.RayCast(function(u,r){var q=j.GetUserData(r);box2d.ENABLE_ASSERTS&&box2d.b2Assert(q instanceof box2d.b2FixtureProxy);var e=q.fixture,n=box2d.b2World.prototype.RayCast.s_output;if(e.RayCast(n,u,q.childIndex)){var q=n.fraction,b=box2d.b2World.prototype.RayCast.s_point;b.SetXY((1-q)*f.x+q*m.x,(1-q)*f.y+q*m.y);return g instanceof box2d.b2RayCastCallback?g.ReportFixture(e,b,n.normal,q):g(e,b,n.normal,q)}return u.maxFraction},k)};goog.exportProperty(box2d.b2World.prototype,"RayCast",box2d.b2World.prototype.RayCast);box2d.b2World.prototype.RayCast.s_input=new box2d.b2RayCastInput;box2d.b2World.prototype.RayCast.s_output=new box2d.b2RayCastOutput;box2d.b2World.prototype.RayCast.s_point=new box2d.b2Vec2;box2d.b2World.prototype.RayCastOne=function(f,d){var j=null,g=1;this.RayCast(function(k,e,n,m){m<g&&(g=m,j=k);return g},f,d);return j};goog.exportProperty(box2d.b2World.prototype,"RayCastOne",box2d.b2World.prototype.RayCastOne);box2d.b2World.prototype.RayCastAll=function(e,d,f){f.length=0;this.RayCast(function(k,j,n,m){f.push(k);return 1},e,d);return f};goog.exportProperty(box2d.b2World.prototype,"RayCastAll",box2d.b2World.prototype.RayCastAll);box2d.b2World.prototype.DrawShape=function(k,j){var u=k.GetShape();switch(u.m_type){case box2d.b2ShapeType.e_circleShape:u=u instanceof box2d.b2CircleShape?u:null;this.m_debugDraw.DrawSolidCircle(u.m_p,u.m_radius,box2d.b2Vec2.UNITX,j);break;case box2d.b2ShapeType.e_edgeShape:var q=u instanceof box2d.b2EdgeShape?u:null,u=q.m_vertex1,r=q.m_vertex2;this.m_debugDraw.DrawSegment(u,r,j);break;case box2d.b2ShapeType.e_chainShape:var u=u instanceof box2d.b2ChainShape?u:null,q=u.m_count,n=u.m_vertices,u=n[0];this.m_debugDraw.DrawCircle(u,0.05,j);for(var m=1;m<q;++m){r=n[m],this.m_debugDraw.DrawSegment(u,r,j),this.m_debugDraw.DrawCircle(r,0.05,j),u=r}break;case box2d.b2ShapeType.e_polygonShape:q=u instanceof box2d.b2PolygonShape?u:null,u=q.m_count,n=q.m_vertices,this.m_debugDraw.DrawSolidPolygon(n,u,j)}};goog.exportProperty(box2d.b2World.prototype,"DrawShape",box2d.b2World.prototype.DrawShape);box2d.b2World.prototype.DrawJoint=function(j){var g=j.GetBodyA(),q=j.GetBodyB(),m=g.m_xf.p,n=q.m_xf.p,q=j.GetAnchorA(box2d.b2World.prototype.DrawJoint.s_p1),g=j.GetAnchorB(box2d.b2World.prototype.DrawJoint.s_p2),k=box2d.b2World.prototype.DrawJoint.s_color.SetRGB(0.5,0.8,0.8);switch(j.m_type){case box2d.b2JointType.e_distanceJoint:this.m_debugDraw.DrawSegment(q,g,k);break;case box2d.b2JointType.e_pulleyJoint:m=j instanceof box2d.b2PulleyJoint?j:null;j=m.GetGroundAnchorA(box2d.b2World.prototype.DrawJoint.s_s1);m=m.GetGroundAnchorB(box2d.b2World.prototype.DrawJoint.s_s2);this.m_debugDraw.DrawSegment(j,q,k);this.m_debugDraw.DrawSegment(m,g,k);this.m_debugDraw.DrawSegment(j,m,k);break;case box2d.b2JointType.e_mouseJoint:this.m_debugDraw.DrawSegment(q,g,k);break;default:this.m_debugDraw.DrawSegment(m,q,k),this.m_debugDraw.DrawSegment(q,g,k),this.m_debugDraw.DrawSegment(n,g,k)}};goog.exportProperty(box2d.b2World.prototype,"DrawJoint",box2d.b2World.prototype.DrawJoint);box2d.b2World.prototype.DrawJoint.s_p1=new box2d.b2Vec2;box2d.b2World.prototype.DrawJoint.s_p2=new box2d.b2Vec2;box2d.b2World.prototype.DrawJoint.s_color=new box2d.b2Color(0.5,0.8,0.8);box2d.b2World.prototype.DrawJoint.s_s1=new box2d.b2Vec2;box2d.b2World.prototype.DrawJoint.s_s2=new box2d.b2Vec2;box2d.b2World.prototype.DrawDebugData=function(){if(null!=this.m_debugDraw){var k=this.m_debugDraw.GetFlags(),j=box2d.b2World.prototype.DrawDebugData.s_color.SetRGB(0,0,0);if(k&box2d.b2DrawFlags.e_shapeBit){for(var v=this.m_bodyList;v;v=v.m_next){var r=v.m_xf;this.m_debugDraw.PushTransform(r);for(var u=v.GetFixtureList();u;u=u.m_next){!1==v.IsActive()?j.SetRGB(0.5,0.5,0.3):v.GetType()==box2d.b2BodyType.b2_staticBody?j.SetRGB(0.5,0.9,0.5):v.GetType()==box2d.b2BodyType.b2_kinematicBody?j.SetRGB(0.5,0.5,0.9):!1==v.IsAwake()?j.SetRGB(0.6,0.6,0.6):j.SetRGB(0.9,0.7,0.7),this.DrawShape(u,j)}this.m_debugDraw.PopTransform(r)}}if(k&box2d.b2DrawFlags.e_jointBit){for(v=this.m_jointList;v;v=v.m_next){this.DrawJoint(v)}}if(k&box2d.b2DrawFlags.e_aabbBit){j.SetRGB(0.9,0.3,0.9);for(var r=this.m_contactManager.m_broadPhase,q=box2d.b2World.prototype.DrawDebugData.s_vs,v=this.m_bodyList;v;v=v.m_next){if(!1!=v.IsActive()){for(u=v.GetFixtureList();u;u=u.m_next){for(var n=0;n<u.m_proxyCount;++n){var m=r.GetFatAABB(u.m_proxies[n].proxy);q[0].SetXY(m.lowerBound.x,m.lowerBound.y);q[1].SetXY(m.upperBound.x,m.lowerBound.y);q[2].SetXY(m.upperBound.x,m.upperBound.y);q[3].SetXY(m.lowerBound.x,m.upperBound.y);this.m_debugDraw.DrawPolygon(q,4,j)}}}}}if(k&box2d.b2DrawFlags.e_centerOfMassBit){for(v=this.m_bodyList;v;v=v.m_next){r=box2d.b2World.prototype.DrawDebugData.s_xf,r.q.Copy(v.m_xf.q),r.p.Copy(v.GetWorldCenter()),this.m_debugDraw.DrawTransform(r)}}if(k&box2d.b2DrawFlags.e_controllerBit){for(k=this.m_controllerList;k;k=k.m_next){k.Draw(this.m_debugDraw)}}}};goog.exportProperty(box2d.b2World.prototype,"DrawDebugData",box2d.b2World.prototype.DrawDebugData);box2d.b2World.prototype.DrawDebugData.s_color=new box2d.b2Color(0,0,0);box2d.b2World.prototype.DrawDebugData.s_vs=box2d.b2Vec2.MakeArray(4);box2d.b2World.prototype.DrawDebugData.s_xf=new box2d.b2Transform;box2d.b2World.prototype.SetBroadPhase=function(f){var d=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=f;for(var j=this.m_bodyList;j;j=j.m_next){for(var g=j.m_fixtureList;g;g=g.m_next){g.m_proxy=f.CreateProxy(d.GetFatAABB(g.m_proxy),g)}}};goog.exportProperty(box2d.b2World.prototype,"SetBroadPhase",box2d.b2World.prototype.SetBroadPhase);box2d.b2World.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()};goog.exportProperty(box2d.b2World.prototype,"GetProxyCount",box2d.b2World.prototype.GetProxyCount);box2d.b2World.prototype.GetTreeHeight=function(){return this.m_contactManager.m_broadPhase.GetTreeHeight()};goog.exportProperty(box2d.b2World.prototype,"GetTreeHeight",box2d.b2World.prototype.GetTreeHeight);box2d.b2World.prototype.GetTreeBalance=function(){return this.m_contactManager.m_broadPhase.GetTreeBalance()};goog.exportProperty(box2d.b2World.prototype,"GetTreeBalance",box2d.b2World.prototype.GetTreeBalance);box2d.b2World.prototype.GetTreeQuality=function(){return this.m_contactManager.m_broadPhase.GetTreeQuality()};goog.exportProperty(box2d.b2World.prototype,"GetTreeQuality",box2d.b2World.prototype.GetTreeQuality);box2d.b2World.prototype.ShiftOrigin=function(e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1==this.IsLocked());if(!this.IsLocked()){for(var d=this.m_bodyList;d;d=d.m_next){d.m_xf.p.SelfSub(e),d.m_sweep.c0.SelfSub(e),d.m_sweep.c.SelfSub(e)}for(d=this.m_jointList;d;d=d.m_next){d.ShiftOrigin(e)}this.m_contactManager.m_broadPhase.ShiftOrigin(e)}};goog.exportProperty(box2d.b2World.prototype,"ShiftOrigin",box2d.b2World.prototype.ShiftOrigin);box2d.b2World.prototype.Dump=function(){if(box2d.DEBUG&&(this.m_flags&box2d.b2WorldFlag.e_locked)!=box2d.b2WorldFlag.e_locked){box2d.b2Log("/** @type {box2d.b2Vec2} */ var g = new box2d.b2Vec2(%.15f, %.15f);\n",this.m_gravity.x,this.m_gravity.y);box2d.b2Log("this.m_world.SetGravity(g);\n");box2d.b2Log("/** @type {Array.<box2d.b2Body>} */ var bodies = new Array(%d);\n",this.m_bodyCount);box2d.b2Log("/** @type {Array.<box2d.b2Joint>} */ var joints = new Array(%d);\n",this.m_jointCount);for(var e=0,d=this.m_bodyList;d;d=d.m_next){d.m_islandIndex=e,d.Dump(),++e}e=0;for(d=this.m_jointList;d;d=d.m_next){d.m_index=e,++e}for(d=this.m_jointList;d;d=d.m_next){d.m_type!=box2d.b2JointType.e_gearJoint&&(box2d.b2Log("if (true)\n"),box2d.b2Log("{\n"),d.Dump(),box2d.b2Log("}\n"))}for(d=this.m_jointList;d;d=d.m_next){d.m_type==box2d.b2JointType.e_gearJoint&&(box2d.b2Log("if (true)\n"),box2d.b2Log("{\n"),d.Dump(),box2d.b2Log("}\n"))}}};goog.exportProperty(box2d.b2World.prototype,"Dump",box2d.b2World.prototype.Dump);box2d.b2World.prototype.AddController=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===b.m_world,"Controller can only be a member of one world");b.m_world=this;b.m_next=this.m_controllerList;b.m_prev=null;this.m_controllerList&&(this.m_controllerList.m_prev=b);this.m_controllerList=b;++this.m_controllerCount;return b};goog.exportProperty(box2d.b2World.prototype,"AddController",box2d.b2World.prototype.AddController);box2d.b2World.prototype.RemoveController=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(b.m_world===this,"Controller is not a member of this world");b.m_prev&&(b.m_prev.m_next=b.m_next);b.m_next&&(b.m_next.m_prev=b.m_prev);this.m_controllerList==b&&(this.m_controllerList=b.m_next);--this.m_controllerCount;b.m_prev=null;b.m_next=null;b.m_world=null};goog.exportProperty(box2d.b2World.prototype,"RemoveController",box2d.b2World.prototype.RemoveController);box2d.b2AreaJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_areaJoint);this.bodies=[]};goog.inherits(box2d.b2AreaJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2AreaJointDef",box2d.b2AreaJointDef);box2d.b2AreaJointDef.prototype.world=null;goog.exportProperty(box2d.b2AreaJointDef.prototype,"world",box2d.b2AreaJointDef.prototype.world);box2d.b2AreaJointDef.prototype.bodies=null;goog.exportProperty(box2d.b2AreaJointDef.prototype,"bodies",box2d.b2AreaJointDef.prototype.bodies);box2d.b2AreaJointDef.prototype.frequencyHz=0;goog.exportProperty(box2d.b2AreaJointDef.prototype,"frequencyHz",box2d.b2AreaJointDef.prototype.frequencyHz);box2d.b2AreaJointDef.prototype.dampingRatio=0;goog.exportProperty(box2d.b2AreaJointDef.prototype,"dampingRatio",box2d.b2AreaJointDef.prototype.dampingRatio);box2d.b2AreaJointDef.prototype.AddBody=function(b){this.bodies.push(b);1==this.bodies.length?this.bodyA=b:2==this.bodies.length&&(this.bodyB=b)};goog.exportProperty(box2d.b2AreaJointDef.prototype,"AddBody",box2d.b2AreaJointDef.prototype.AddBody);box2d.b2AreaJoint=function(k){box2d.b2Joint.call(this,k);box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=k.bodies.length,"You cannot create an area joint with less than three bodies.");this.m_bodies=k.bodies;this.m_frequencyHz=k.frequencyHz;this.m_dampingRatio=k.dampingRatio;this.m_targetLengths=box2d.b2MakeNumberArray(k.bodies.length);this.m_normals=box2d.b2Vec2.MakeArray(k.bodies.length);this.m_joints=Array(k.bodies.length);this.m_deltas=box2d.b2Vec2.MakeArray(k.bodies.length);this.m_delta=new box2d.b2Vec2;var j=new box2d.b2DistanceJointDef;j.frequencyHz=k.frequencyHz;j.dampingRatio=k.dampingRatio;for(var v=this.m_targetArea=0,r=this.m_bodies.length;v<r;++v){var u=this.m_bodies[v],q=this.m_bodies[(v+1)%r],n=u.GetWorldCenter(),m=q.GetWorldCenter();this.m_targetLengths[v]=box2d.b2DistanceVV(n,m);this.m_targetArea+=box2d.b2CrossVV(n,m);j.Initialize(u,q,n,m);this.m_joints[v]=k.world.CreateJoint(j)}this.m_targetArea*=0.5};goog.inherits(box2d.b2AreaJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2AreaJoint",box2d.b2AreaJoint);box2d.b2AreaJoint.prototype.m_bodies=null;goog.exportProperty(box2d.b2AreaJoint.prototype,"m_bodies",box2d.b2AreaJoint.prototype.m_bodies);box2d.b2AreaJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2AreaJoint.prototype,"m_frequencyHz",box2d.b2AreaJoint.prototype.m_frequencyHz);box2d.b2AreaJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2AreaJoint.prototype,"m_dampingRatio",box2d.b2AreaJoint.prototype.m_dampingRatio);box2d.b2AreaJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2AreaJoint.prototype,"m_impulse",box2d.b2AreaJoint.prototype.m_impulse);box2d.b2AreaJoint.prototype.m_targetLengths=null;box2d.b2AreaJoint.prototype.m_targetArea=0;box2d.b2AreaJoint.prototype.m_normals=null;box2d.b2AreaJoint.prototype.m_joints=null;box2d.b2AreaJoint.prototype.m_deltas=null;box2d.b2AreaJoint.prototype.m_delta=null;box2d.b2AreaJoint.prototype.GetAnchorA=function(b){return b.SetZero()};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetAnchorA",box2d.b2AreaJoint.prototype.GetAnchorA);box2d.b2AreaJoint.prototype.GetAnchorB=function(b){return b.SetZero()};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetAnchorB",box2d.b2AreaJoint.prototype.GetAnchorB);box2d.b2AreaJoint.prototype.GetReactionForce=function(e,d){return d.SetZero()};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetReactionForce",box2d.b2AreaJoint.prototype.GetReactionForce);box2d.b2AreaJoint.prototype.GetReactionTorque=function(b){return 0};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetReactionTorque",box2d.b2AreaJoint.prototype.GetReactionTorque);box2d.b2AreaJoint.prototype.SetFrequency=function(e){this.m_frequencyHz=e;for(var d=0,f=this.m_joints.length;d<f;++d){this.m_joints[d].SetFrequency(e)}};goog.exportProperty(box2d.b2AreaJoint.prototype,"SetFrequency",box2d.b2AreaJoint.prototype.SetFrequency);box2d.b2AreaJoint.prototype.GetFrequency=function(){return this.m_frequencyHz};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetFrequency",box2d.b2AreaJoint.prototype.GetFrequency);box2d.b2AreaJoint.prototype.SetDampingRatio=function(e){this.m_dampingRatio=e;for(var d=0,f=this.m_joints.length;d<f;++d){this.m_joints[d].SetDampingRatio(e)}};goog.exportProperty(box2d.b2AreaJoint.prototype,"SetDampingRatio",box2d.b2AreaJoint.prototype.SetDampingRatio);box2d.b2AreaJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2AreaJoint.prototype,"GetDampingRatio",box2d.b2AreaJoint.prototype.GetDampingRatio);box2d.b2AreaJoint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("Area joint dumping is not supported.\n")};goog.exportProperty(box2d.b2AreaJoint.prototype,"Dump",box2d.b2AreaJoint.prototype.Dump);box2d.b2AreaJoint.prototype.InitVelocityConstraints=function(j){for(var g=0,q=this.m_bodies.length;g<q;++g){var m=this.m_deltas[g];box2d.b2SubVV(j.positions[this.m_bodies[(g+1)%q].m_islandIndex].c,j.positions[this.m_bodies[(g+q-1)%q].m_islandIndex].c,m)}if(j.step.warmStarting){for(this.m_impulse*=j.step.dtRatio,g=0,q=this.m_bodies.length;g<q;++g){var n=this.m_bodies[g],k=j.velocities[n.m_islandIndex].v,m=this.m_deltas[g];k.x+=0.5*(n.m_invMass*m.y)*this.m_impulse;k.y+=0.5*(n.m_invMass*-m.x)*this.m_impulse}}else{this.m_impulse=0}};goog.exportProperty(box2d.b2AreaJoint.prototype,"InitVelocityConstraints",box2d.b2AreaJoint.prototype.InitVelocityConstraints);box2d.b2AreaJoint.prototype.SolveVelocityConstraints=function(k){for(var j=0,v=0,r=0,u=this.m_bodies.length;r<u;++r){var q=this.m_bodies[r],n=k.velocities[q.m_islandIndex].v,m=this.m_deltas[r],j=j+m.GetLengthSquared()/q.GetMass(),v=v+box2d.b2CrossVV(n,m)}j=-2*v/j;this.m_impulse+=j;r=0;for(u=this.m_bodies.length;r<u;++r){q=this.m_bodies[r],n=k.velocities[q.m_islandIndex].v,m=this.m_deltas[r],n.x+=0.5*(q.m_invMass*m.y)*j,n.y+=0.5*(q.m_invMass*-m.x)*j}};goog.exportProperty(box2d.b2AreaJoint.prototype,"SolveVelocityConstraints",box2d.b2AreaJoint.prototype.SolveVelocityConstraints);box2d.b2AreaJoint.prototype.SolvePositionConstraints=function(y){for(var v=0,u=0,q=0,r=this.m_bodies.length;q<r;++q){var n=this.m_bodies[q],n=y.positions[n.m_islandIndex].c,m=y.positions[this.m_bodies[(q+1)%r].m_islandIndex].c,k=box2d.b2SubVV(m,n,this.m_delta),j=k.GetLength();j<box2d.b2_epsilon&&(j=1);this.m_normals[q].x=k.y/j;this.m_normals[q].y=-k.x/j;v+=j;u+=box2d.b2CrossVV(n,m)}v=0.5*(this.m_targetArea-0.5*u)/v;u=!0;q=0;for(r=this.m_bodies.length;q<r;++q){n=this.m_bodies[q],n=y.positions[n.m_islandIndex].c,k=box2d.b2AddVV(this.m_normals[q],this.m_normals[(q+1)%r],this.m_delta),k.SelfMul(v),m=k.GetLengthSquared(),m>box2d.b2Sq(box2d.b2_maxLinearCorrection)&&k.SelfMul(box2d.b2_maxLinearCorrection/box2d.b2Sqrt(m)),m>box2d.b2Sq(box2d.b2_linearSlop)&&(u=!1),n.x+=k.x,n.y+=k.y}return u};goog.exportProperty(box2d.b2AreaJoint.prototype,"SolvePositionConstraints",box2d.b2AreaJoint.prototype.SolvePositionConstraints);box2d.b2BuoyancyController=function(){box2d.b2Controller.call(this);this.normal=new box2d.b2Vec2(0,1);this.velocity=new box2d.b2Vec2(0,0);this.gravity=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2BuoyancyController,box2d.b2Controller);goog.exportSymbol("box2d.b2BuoyancyController",box2d.b2BuoyancyController);box2d.b2BuoyancyController.prototype.normal=null;goog.exportProperty(box2d.b2BuoyancyController.prototype,"normal",box2d.b2BuoyancyController.prototype.normal);box2d.b2BuoyancyController.prototype.offset=0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"offset",box2d.b2BuoyancyController.prototype.offset);box2d.b2BuoyancyController.prototype.density=0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"density",box2d.b2BuoyancyController.prototype.density);box2d.b2BuoyancyController.prototype.velocity=null;goog.exportProperty(box2d.b2BuoyancyController.prototype,"velocity",box2d.b2BuoyancyController.prototype.velocity);box2d.b2BuoyancyController.prototype.linearDrag=0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"linearDrag",box2d.b2BuoyancyController.prototype.linearDrag);box2d.b2BuoyancyController.prototype.angularDrag=0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"angularDrag",box2d.b2BuoyancyController.prototype.angularDrag);box2d.b2BuoyancyController.prototype.useDensity=!1;goog.exportProperty(box2d.b2BuoyancyController.prototype,"useDensity",box2d.b2BuoyancyController.prototype.useDensity);box2d.b2BuoyancyController.prototype.useWorldGravity=!0;goog.exportProperty(box2d.b2BuoyancyController.prototype,"useWorldGravity",box2d.b2BuoyancyController.prototype.useWorldGravity);box2d.b2BuoyancyController.prototype.gravity=null;goog.exportProperty(box2d.b2BuoyancyController.prototype,"gravity",box2d.b2BuoyancyController.prototype.gravity);box2d.b2BuoyancyController.prototype.Step=function(A){if(this.m_bodyList){for(this.useWorldGravity&&this.gravity.Copy(this.GetWorld().GetGravity()),A=this.m_bodyList;A;A=A.nextBody){var z=A.body;if(!1!=z.IsAwake()){for(var y=new box2d.b2Vec2,u=new box2d.b2Vec2,v=0,r=0,q=z.GetFixtureList();q;q=q.m_next){var n=new box2d.b2Vec2,j=q.GetShape().ComputeSubmergedArea(this.normal,this.offset,z.GetTransform(),n),v=v+j;y.x+=j*n.x;y.y+=j*n.y;var m=0,m=this.useDensity?q.GetDensity():1,r=r+j*m;u.x+=j*n.x*m;u.y+=j*n.y*m}y.x/=v;y.y/=v;u.x/=r;u.y/=r;v<box2d.b2_epsilon||(r=box2d.b2NegV(this.gravity,new box2d.b2Vec2),r.SelfMul(this.density*v),z.ApplyForce(r,u),u=z.GetLinearVelocityFromWorldPoint(y,new box2d.b2Vec2),u.SelfSub(this.velocity),u.SelfMul(-this.linearDrag*v),z.ApplyForce(u,y),z.ApplyTorque(-z.GetInertia()/z.GetMass()*v*z.GetAngularVelocity()*this.angularDrag))}}}};goog.exportProperty(box2d.b2BuoyancyController.prototype,"Step",box2d.b2BuoyancyController.prototype.Step);box2d.b2BuoyancyController.prototype.Draw=function(f){var d=new box2d.b2Vec2,j=new box2d.b2Vec2;d.x=this.normal.x*this.offset+100*this.normal.y;d.y=this.normal.y*this.offset-100*this.normal.x;j.x=this.normal.x*this.offset-100*this.normal.y;j.y=this.normal.y*this.offset+100*this.normal.x;var g=new box2d.b2Color(0,0,0.8);f.DrawSegment(d,j,g)};goog.exportProperty(box2d.b2BuoyancyController.prototype,"Draw",box2d.b2BuoyancyController.prototype.Draw);box2d.b2TensorDampingController=function(){box2d.b2Controller.call(this);this.T=new box2d.b2Mat22;this.maxTimestep=0};goog.inherits(box2d.b2TensorDampingController,box2d.b2Controller);goog.exportSymbol("box2d.b2TensorDampingController",box2d.b2TensorDampingController);box2d.b2TensorDampingController.prototype.T=new box2d.b2Mat22;goog.exportProperty(box2d.b2TensorDampingController.prototype,"T",box2d.b2TensorDampingController.prototype.T);box2d.b2TensorDampingController.prototype.maxTimestep=0;goog.exportProperty(box2d.b2TensorDampingController.prototype,"maxTimestep",box2d.b2TensorDampingController.prototype.maxTimestep);box2d.b2TensorDampingController.prototype.Step=function(f){f=f.dt;if(!(f<=box2d.b2_epsilon)){f>this.maxTimestep&&0<this.maxTimestep&&(f=this.maxTimestep);for(var d=this.m_bodyList;d;d=d.nextBody){var j=d.body;if(j.IsAwake()){var g=j.GetWorldVector(box2d.b2MulMV(this.T,j.GetLocalVector(j.GetLinearVelocity(),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1),box2d.b2TensorDampingController.prototype.Step.s_damping);j.SetLinearVelocity(box2d.b2AddVV(j.GetLinearVelocity(),box2d.b2MulSV(f,g,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1))}}}};box2d.b2TensorDampingController.prototype.Step.s_damping=new box2d.b2Vec2;box2d.b2TensorDampingController.prototype.SetAxisAligned=function(e,d){this.T.ex.x=-e;this.T.ex.y=0;this.T.ey.x=0;this.T.ey.y=-d;this.maxTimestep=0<e||0<d?1/box2d.b2Max(e,d):0};box2d.b2DistanceJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_distanceJoint);this.localAnchorA=new box2d.b2Vec2;this.localAnchorB=new box2d.b2Vec2};goog.inherits(box2d.b2DistanceJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2DistanceJointDef",box2d.b2DistanceJointDef);box2d.b2DistanceJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"localAnchorA",box2d.b2DistanceJointDef.prototype.localAnchorA);box2d.b2DistanceJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"localAnchorB",box2d.b2DistanceJointDef.prototype.localAnchorB);box2d.b2DistanceJointDef.prototype.length=1;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"length",box2d.b2DistanceJointDef.prototype.length);box2d.b2DistanceJointDef.prototype.frequencyHz=0;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"frequencyHz",box2d.b2DistanceJointDef.prototype.frequencyHz);box2d.b2DistanceJointDef.prototype.dampingRatio=0;goog.exportProperty(box2d.b2DistanceJointDef.prototype,"dampingRatio",box2d.b2DistanceJointDef.prototype.dampingRatio);box2d.b2DistanceJointDef.prototype.Initialize=function(f,d,j,g){this.bodyA=f;this.bodyB=d;this.bodyA.GetLocalPoint(j,this.localAnchorA);this.bodyB.GetLocalPoint(g,this.localAnchorB);this.length=box2d.b2DistanceVV(j,g);this.dampingRatio=this.frequencyHz=0};goog.exportProperty(box2d.b2DistanceJointDef.prototype,"Initialize",box2d.b2DistanceJointDef.prototype.Initialize);box2d.b2DistanceJoint=function(b){box2d.b2Joint.call(this,b);this.m_u=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_frequencyHz=b.frequencyHz;this.m_dampingRatio=b.dampingRatio;this.m_localAnchorA=b.localAnchorA.Clone();this.m_localAnchorB=b.localAnchorB.Clone();this.m_length=b.length};goog.inherits(box2d.b2DistanceJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2DistanceJoint",box2d.b2DistanceJoint);box2d.b2DistanceJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_frequencyHz",box2d.b2DistanceJoint.prototype.m_frequencyHz);box2d.b2DistanceJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_dampingRatio",box2d.b2DistanceJoint.prototype.m_dampingRatio);box2d.b2DistanceJoint.prototype.m_bias=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_bias",box2d.b2DistanceJoint.prototype.m_bias);box2d.b2DistanceJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localAnchorA",box2d.b2DistanceJoint.prototype.m_localAnchorA);box2d.b2DistanceJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localAnchorB",box2d.b2DistanceJoint.prototype.m_localAnchorB);box2d.b2DistanceJoint.prototype.m_gamma=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_gamma",box2d.b2DistanceJoint.prototype.m_gamma);box2d.b2DistanceJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_impulse",box2d.b2DistanceJoint.prototype.m_impulse);box2d.b2DistanceJoint.prototype.m_length=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_length",box2d.b2DistanceJoint.prototype.m_length);box2d.b2DistanceJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_indexA",box2d.b2DistanceJoint.prototype.m_indexA);box2d.b2DistanceJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_indexB",box2d.b2DistanceJoint.prototype.m_indexB);box2d.b2DistanceJoint.prototype.m_u=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_u",box2d.b2DistanceJoint.prototype.m_u);box2d.b2DistanceJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_rA",box2d.b2DistanceJoint.prototype.m_rA);box2d.b2DistanceJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_rB",box2d.b2DistanceJoint.prototype.m_rB);box2d.b2DistanceJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localCenterA",box2d.b2DistanceJoint.prototype.m_localCenterA);box2d.b2DistanceJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_localCenterB",box2d.b2DistanceJoint.prototype.m_localCenterB);box2d.b2DistanceJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invMassA",box2d.b2DistanceJoint.prototype.m_invMassA);box2d.b2DistanceJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invMassB",box2d.b2DistanceJoint.prototype.m_invMassB);box2d.b2DistanceJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invIA",box2d.b2DistanceJoint.prototype.m_invIA);box2d.b2DistanceJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_invIB",box2d.b2DistanceJoint.prototype.m_invIB);box2d.b2DistanceJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_mass",box2d.b2DistanceJoint.prototype.m_mass);box2d.b2DistanceJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_qA",box2d.b2DistanceJoint.prototype.m_qA);box2d.b2DistanceJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_qB",box2d.b2DistanceJoint.prototype.m_qB);box2d.b2DistanceJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_lalcA",box2d.b2DistanceJoint.prototype.m_lalcA);box2d.b2DistanceJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2DistanceJoint.prototype,"m_lalcB",box2d.b2DistanceJoint.prototype.m_lalcB);box2d.b2DistanceJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetAnchorA",box2d.b2DistanceJoint.prototype.GetAnchorA);box2d.b2DistanceJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetAnchorB",box2d.b2DistanceJoint.prototype.GetAnchorB);box2d.b2DistanceJoint.prototype.GetReactionForce=function(e,d){return d.SetXY(e*this.m_impulse*this.m_u.x,e*this.m_impulse*this.m_u.y)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetReactionForce",box2d.b2DistanceJoint.prototype.GetReactionForce);box2d.b2DistanceJoint.prototype.GetReactionTorque=function(b){return 0};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetReactionTorque",box2d.b2DistanceJoint.prototype.GetReactionTorque);box2d.b2DistanceJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetLocalAnchorA",box2d.b2DistanceJoint.prototype.GetLocalAnchorA);box2d.b2DistanceJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetLocalAnchorB",box2d.b2DistanceJoint.prototype.GetLocalAnchorB);box2d.b2DistanceJoint.prototype.SetLength=function(b){this.m_length=b};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SetLength",box2d.b2DistanceJoint.prototype.SetLength);box2d.b2DistanceJoint.prototype.GetLength=function(){return this.m_length};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetLength",box2d.b2DistanceJoint.prototype.GetLength);box2d.b2DistanceJoint.prototype.SetFrequency=function(b){this.m_frequencyHz=b};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SetFrequency",box2d.b2DistanceJoint.prototype.SetFrequency);box2d.b2DistanceJoint.prototype.GetFrequency=function(){return this.m_frequencyHz};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetFrequency",box2d.b2DistanceJoint.prototype.GetFrequency);box2d.b2DistanceJoint.prototype.SetDampingRatio=function(b){this.m_dampingRatio=b};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SetDampingRatio",box2d.b2DistanceJoint.prototype.SetDampingRatio);box2d.b2DistanceJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2DistanceJoint.prototype,"GetDampingRatio",box2d.b2DistanceJoint.prototype.GetDampingRatio);box2d.b2DistanceJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2DistanceJointDef*/ var jd = new box2d.b2DistanceJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.length = %.15f;\n",this.m_length);box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz);box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2DistanceJoint.prototype,"Dump",box2d.b2DistanceJoint.prototype.Dump);box2d.b2DistanceJoint.prototype.InitVelocityConstraints=function(A){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var z=A.positions[this.m_indexA].c,y=A.velocities[this.m_indexA].v,u=A.velocities[this.m_indexA].w,v=A.positions[this.m_indexB].c,r=A.positions[this.m_indexB].a,q=A.velocities[this.m_indexB].v,n=A.velocities[this.m_indexB].w,j=this.m_qA.SetAngleRadians(A.positions[this.m_indexA].a),r=this.m_qB.SetAngleRadians(r);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2MulRV(j,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2MulRV(r,this.m_lalcB,this.m_rB);this.m_u.x=v.x+this.m_rB.x-z.x-this.m_rA.x;this.m_u.y=v.y+this.m_rB.y-z.y-this.m_rA.y;v=this.m_u.GetLength();v>box2d.b2_linearSlop?this.m_u.SelfMul(1/v):this.m_u.SetZero();z=box2d.b2CrossVV(this.m_rA,this.m_u);j=box2d.b2CrossVV(this.m_rB,this.m_u);z=this.m_invMassA+this.m_invIA*z*z+this.m_invMassB+this.m_invIB*j*j;this.m_mass=0!=z?1/z:0;if(0<this.m_frequencyHz){var v=v-this.m_length,j=2*box2d.b2_pi*this.m_frequencyHz,r=this.m_mass*j*j,m=A.step.dt;this.m_gamma=m*(2*this.m_mass*this.m_dampingRatio*j+m*r);this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0;this.m_bias=v*m*r*this.m_gamma;z+=this.m_gamma;this.m_mass=0!=z?1/z:0}else{this.m_bias=this.m_gamma=0}A.step.warmStarting?(this.m_impulse*=A.step.dtRatio,z=box2d.b2MulSV(this.m_impulse,this.m_u,box2d.b2DistanceJoint.prototype.InitVelocityConstraints.s_P),y.SelfMulSub(this.m_invMassA,z),u-=this.m_invIA*box2d.b2CrossVV(this.m_rA,z),q.SelfMulAdd(this.m_invMassB,z),n+=this.m_invIB*box2d.b2CrossVV(this.m_rB,z)):this.m_impulse=0;A.velocities[this.m_indexA].w=u;A.velocities[this.m_indexB].w=n};goog.exportProperty(box2d.b2DistanceJoint.prototype,"InitVelocityConstraints",box2d.b2DistanceJoint.prototype.InitVelocityConstraints);box2d.b2DistanceJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2DistanceJoint.prototype.SolveVelocityConstraints=function(k){var j=k.velocities[this.m_indexA].v,u=k.velocities[this.m_indexA].w,q=k.velocities[this.m_indexB].v,r=k.velocities[this.m_indexB].w,n=box2d.b2AddVCrossSV(j,u,this.m_rA,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpA),m=box2d.b2AddVCrossSV(q,r,this.m_rB,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpB),n=box2d.b2DotVV(this.m_u,box2d.b2SubVV(m,n,box2d.b2Vec2.s_t0)),n=-this.m_mass*(n+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=n;n=box2d.b2MulSV(n,this.m_u,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_P);j.SelfMulSub(this.m_invMassA,n);u-=this.m_invIA*box2d.b2CrossVV(this.m_rA,n);q.SelfMulAdd(this.m_invMassB,n);r+=this.m_invIB*box2d.b2CrossVV(this.m_rB,n);k.velocities[this.m_indexA].w=u;k.velocities[this.m_indexB].w=r};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SolveVelocityConstraints",box2d.b2DistanceJoint.prototype.SolveVelocityConstraints);box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2;box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2;box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2DistanceJoint.prototype.SolvePositionConstraints=function(y){if(0<this.m_frequencyHz){return !0}var v=y.positions[this.m_indexA].c,u=y.positions[this.m_indexA].a,q=y.positions[this.m_indexB].c,r=y.positions[this.m_indexB].a;this.m_qA.SetAngleRadians(u);this.m_qB.SetAngleRadians(r);var n=box2d.b2MulRV(this.m_qA,this.m_lalcA,this.m_rA),m=box2d.b2MulRV(this.m_qB,this.m_lalcB,this.m_rB),k=this.m_u;k.x=q.x+m.x-v.x-n.x;k.y=q.y+m.y-v.y-n.y;var j=this.m_u.Normalize()-this.m_length,j=box2d.b2Clamp(j,-box2d.b2_maxLinearCorrection,box2d.b2_maxLinearCorrection),k=box2d.b2MulSV(-this.m_mass*j,k,box2d.b2DistanceJoint.prototype.SolvePositionConstraints.s_P);v.SelfMulSub(this.m_invMassA,k);u-=this.m_invIA*box2d.b2CrossVV(n,k);q.SelfMulAdd(this.m_invMassB,k);r+=this.m_invIB*box2d.b2CrossVV(m,k);y.positions[this.m_indexA].a=u;y.positions[this.m_indexB].a=r;return box2d.b2Abs(j)<box2d.b2_linearSlop};goog.exportProperty(box2d.b2DistanceJoint.prototype,"SolvePositionConstraints",box2d.b2DistanceJoint.prototype.SolvePositionConstraints);box2d.b2DistanceJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2FrictionJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_frictionJoint);this.localAnchorA=new box2d.b2Vec2;this.localAnchorB=new box2d.b2Vec2};goog.inherits(box2d.b2FrictionJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2FrictionJointDef",box2d.b2FrictionJointDef);box2d.b2FrictionJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2FrictionJointDef.prototype,"localAnchorA",box2d.b2FrictionJointDef.prototype.localAnchorA);box2d.b2FrictionJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2FrictionJointDef.prototype,"localAnchorB",box2d.b2FrictionJointDef.prototype.localAnchorB);box2d.b2FrictionJointDef.prototype.maxForce=0;goog.exportProperty(box2d.b2FrictionJointDef.prototype,"maxForce",box2d.b2FrictionJointDef.prototype.maxForce);box2d.b2FrictionJointDef.prototype.maxTorque=0;goog.exportProperty(box2d.b2FrictionJointDef.prototype,"maxTorque",box2d.b2FrictionJointDef.prototype.maxTorque);box2d.b2FrictionJointDef.prototype.Initialize=function(e,d,f){this.bodyA=e;this.bodyB=d;this.bodyA.GetLocalPoint(f,this.localAnchorA);this.bodyB.GetLocalPoint(f,this.localAnchorB)};goog.exportProperty(box2d.b2FrictionJointDef.prototype,"Initialize",box2d.b2FrictionJointDef.prototype.Initialize);box2d.b2FrictionJoint=function(b){box2d.b2Joint.call(this,b);this.m_localAnchorA=b.localAnchorA.Clone();this.m_localAnchorB=b.localAnchorB.Clone();this.m_linearImpulse=(new box2d.b2Vec2).SetZero();this.m_maxForce=b.maxForce;this.m_maxTorque=b.maxTorque;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_linearMass=(new box2d.b2Mat22).SetZero();this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_K=new box2d.b2Mat22};goog.inherits(box2d.b2FrictionJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2FrictionJoint",box2d.b2FrictionJoint);box2d.b2FrictionJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localAnchorA",box2d.b2FrictionJoint.prototype.m_localAnchorA);box2d.b2FrictionJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localAnchorB",box2d.b2FrictionJoint.prototype.m_localAnchorB);box2d.b2FrictionJoint.prototype.m_linearImpulse=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_linearImpulse",box2d.b2FrictionJoint.prototype.m_linearImpulse);box2d.b2FrictionJoint.prototype.m_angularImpulse=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_angularImpulse",box2d.b2FrictionJoint.prototype.m_angularImpulse);box2d.b2FrictionJoint.prototype.m_maxForce=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_maxForce",box2d.b2FrictionJoint.prototype.m_maxForce);box2d.b2FrictionJoint.prototype.m_maxTorque=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_maxTorque",box2d.b2FrictionJoint.prototype.m_maxTorque);box2d.b2FrictionJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_indexA",box2d.b2FrictionJoint.prototype.m_indexA);box2d.b2FrictionJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_indexB",box2d.b2FrictionJoint.prototype.m_indexB);box2d.b2FrictionJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_rA",box2d.b2FrictionJoint.prototype.m_rA);box2d.b2FrictionJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_rB",box2d.b2FrictionJoint.prototype.m_rB);box2d.b2FrictionJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localCenterA",box2d.b2FrictionJoint.prototype.m_localCenterA);box2d.b2FrictionJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_localCenterB",box2d.b2FrictionJoint.prototype.m_localCenterB);box2d.b2FrictionJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invMassA",box2d.b2FrictionJoint.prototype.m_invMassA);box2d.b2FrictionJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invMassB",box2d.b2FrictionJoint.prototype.m_invMassB);box2d.b2FrictionJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invIA",box2d.b2FrictionJoint.prototype.m_invIA);box2d.b2FrictionJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_invIB",box2d.b2FrictionJoint.prototype.m_invIB);box2d.b2FrictionJoint.prototype.m_linearMass=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_linearMass",box2d.b2FrictionJoint.prototype.m_linearMass);box2d.b2FrictionJoint.prototype.m_angularMass=0;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_angularMass",box2d.b2FrictionJoint.prototype.m_angularMass);box2d.b2FrictionJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_qA",box2d.b2FrictionJoint.prototype.m_qA);box2d.b2FrictionJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_qB",box2d.b2FrictionJoint.prototype.m_qB);box2d.b2FrictionJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_lalcA",box2d.b2FrictionJoint.prototype.m_lalcA);box2d.b2FrictionJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_lalcB",box2d.b2FrictionJoint.prototype.m_lalcB);box2d.b2FrictionJoint.prototype.m_K=null;goog.exportProperty(box2d.b2FrictionJoint.prototype,"m_K",box2d.b2FrictionJoint.prototype.m_K);box2d.b2FrictionJoint.prototype.InitVelocityConstraints=function(E){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var D=E.velocities[this.m_indexA].v,C=E.velocities[this.m_indexA].w,A=E.positions[this.m_indexB].a,B=E.velocities[this.m_indexB].v,z=E.velocities[this.m_indexB].w,y=this.m_qA.SetAngleRadians(E.positions[this.m_indexA].a),A=this.m_qB.SetAngleRadians(A);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);y=box2d.b2MulRV(y,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var v=box2d.b2MulRV(A,this.m_lalcB,this.m_rB),A=this.m_invMassA,r=this.m_invMassB,u=this.m_invIA,q=this.m_invIB,j=this.m_K;j.ex.x=A+r+u*y.y*y.y+q*v.y*v.y;j.ex.y=-u*y.x*y.y-q*v.x*v.y;j.ey.x=j.ex.y;j.ey.y=A+r+u*y.x*y.x+q*v.x*v.x;j.GetInverse(this.m_linearMass);this.m_angularMass=u+q;0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass);E.step.warmStarting?(this.m_linearImpulse.SelfMul(E.step.dtRatio),this.m_angularImpulse*=E.step.dtRatio,y=this.m_linearImpulse,D.SelfMulSub(A,y),C-=u*(box2d.b2CrossVV(this.m_rA,y)+this.m_angularImpulse),B.SelfMulAdd(r,y),z+=q*(box2d.b2CrossVV(this.m_rB,y)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0);E.velocities[this.m_indexA].w=C;E.velocities[this.m_indexB].w=z};goog.exportProperty(box2d.b2FrictionJoint.prototype,"InitVelocityConstraints",box2d.b2FrictionJoint.prototype.InitVelocityConstraints);box2d.b2FrictionJoint.prototype.SolveVelocityConstraints=function(F){var E=F.velocities[this.m_indexA].v,D=F.velocities[this.m_indexA].w,B=F.velocities[this.m_indexB].v,C=F.velocities[this.m_indexB].w,A=this.m_invMassA,z=this.m_invMassB,y=this.m_invIA,u=this.m_invIB,v=F.step.dt,r,q=-this.m_angularMass*(C-D),j=this.m_angularImpulse;r=v*this.m_maxTorque;this.m_angularImpulse=box2d.b2Clamp(this.m_angularImpulse+q,-r,r);q=this.m_angularImpulse-j;D-=y*q;C+=u*q;r=box2d.b2SubVV(box2d.b2AddVCrossSV(B,C,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(E,D,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_Cdot);q=box2d.b2MulMV(this.m_linearMass,r,box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_impulseV).SelfNeg();j=box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_oldImpulseV.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(q);r=v*this.m_maxForce;this.m_linearImpulse.GetLengthSquared()>r*r&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(r));box2d.b2SubVV(this.m_linearImpulse,j,q);E.SelfMulSub(A,q);D-=y*box2d.b2CrossVV(this.m_rA,q);B.SelfMulAdd(z,q);C+=u*box2d.b2CrossVV(this.m_rB,q);F.velocities[this.m_indexA].w=D;F.velocities[this.m_indexB].w=C};goog.exportProperty(box2d.b2FrictionJoint.prototype,"SolveVelocityConstraints",box2d.b2FrictionJoint.prototype.SolveVelocityConstraints);box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2;box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_impulseV=new box2d.b2Vec2;box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_oldImpulseV=new box2d.b2Vec2;box2d.b2FrictionJoint.prototype.SolvePositionConstraints=function(b){return !0};goog.exportProperty(box2d.b2FrictionJoint.prototype,"SolvePositionConstraints",box2d.b2FrictionJoint.prototype.SolvePositionConstraints);box2d.b2FrictionJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetAnchorA",box2d.b2FrictionJoint.prototype.GetAnchorA);box2d.b2FrictionJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetAnchorB",box2d.b2FrictionJoint.prototype.GetAnchorB);box2d.b2FrictionJoint.prototype.GetReactionForce=function(e,d){return d.SetXY(e*this.m_linearImpulse.x,e*this.m_linearImpulse.y)};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetReactionForce",box2d.b2FrictionJoint.prototype.GetReactionForce);box2d.b2FrictionJoint.prototype.GetReactionTorque=function(b){return b*this.m_angularImpulse};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetReactionTorque",box2d.b2FrictionJoint.prototype.GetReactionTorque);box2d.b2FrictionJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetLocalAnchorA",box2d.b2FrictionJoint.prototype.GetLocalAnchorA);box2d.b2FrictionJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetLocalAnchorB",box2d.b2FrictionJoint.prototype.GetLocalAnchorB);box2d.b2FrictionJoint.prototype.SetMaxForce=function(b){this.m_maxForce=b};goog.exportProperty(box2d.b2FrictionJoint.prototype,"SetMaxForce",box2d.b2FrictionJoint.prototype.SetMaxForce);box2d.b2FrictionJoint.prototype.GetMaxForce=function(){return this.m_maxForce};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetMaxForce",box2d.b2FrictionJoint.prototype.GetMaxForce);box2d.b2FrictionJoint.prototype.SetMaxTorque=function(b){this.m_maxTorque=b};goog.exportProperty(box2d.b2FrictionJoint.prototype,"SetMaxTorque",box2d.b2FrictionJoint.prototype.SetMaxTorque);box2d.b2FrictionJoint.prototype.GetMaxTorque=function(){return this.m_maxTorque};goog.exportProperty(box2d.b2FrictionJoint.prototype,"GetMaxTorque",box2d.b2FrictionJoint.prototype.GetMaxTorque);box2d.b2FrictionJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2FrictionJointDef*/ var jd = new box2d.b2FrictionJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.maxForce = %.15f;\n",this.m_maxForce);box2d.b2Log("  jd.maxTorque = %.15f;\n",this.m_maxTorque);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2FrictionJoint.prototype,"Dump",box2d.b2FrictionJoint.prototype.Dump);box2d.b2MouseJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_mouseJoint);this.target=new box2d.b2Vec2};goog.inherits(box2d.b2MouseJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2MouseJointDef",box2d.b2MouseJointDef);box2d.b2MouseJointDef.prototype.target=null;goog.exportProperty(box2d.b2MouseJointDef.prototype,"target",box2d.b2MouseJointDef.prototype.target);box2d.b2MouseJointDef.prototype.maxForce=0;goog.exportProperty(box2d.b2MouseJointDef.prototype,"maxForce",box2d.b2MouseJointDef.prototype.maxForce);box2d.b2MouseJointDef.prototype.frequencyHz=5;goog.exportProperty(box2d.b2MouseJointDef.prototype,"frequencyHz",box2d.b2MouseJointDef.prototype.frequencyHz);box2d.b2MouseJointDef.prototype.dampingRatio=0.7;goog.exportProperty(box2d.b2MouseJointDef.prototype,"dampingRatio",box2d.b2MouseJointDef.prototype.dampingRatio);box2d.b2MouseJoint=function(b){box2d.b2Joint.call(this,b);this.m_localAnchorB=new box2d.b2Vec2;this.m_targetA=new box2d.b2Vec2;this.m_impulse=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_mass=new box2d.b2Mat22;this.m_C=new box2d.b2Vec2;this.m_qB=new box2d.b2Rot;this.m_lalcB=new box2d.b2Vec2;this.m_K=new box2d.b2Mat22;box2d.ENABLE_ASSERTS&&box2d.b2Assert(b.target.IsValid());box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(b.maxForce)&&0<=b.maxForce);box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(b.frequencyHz)&&0<=b.frequencyHz);box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(b.dampingRatio)&&0<=b.dampingRatio);this.m_targetA.Copy(b.target);box2d.b2MulTXV(this.m_bodyB.GetTransform(),this.m_targetA,this.m_localAnchorB);this.m_maxForce=b.maxForce;this.m_impulse.SetZero();this.m_frequencyHz=b.frequencyHz;this.m_dampingRatio=b.dampingRatio;this.m_gamma=this.m_beta=0};goog.inherits(box2d.b2MouseJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2MouseJoint",box2d.b2MouseJoint);box2d.b2MouseJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_localAnchorB",box2d.b2MouseJoint.prototype.m_localAnchorB);box2d.b2MouseJoint.prototype.m_targetA=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_targetA",box2d.b2MouseJoint.prototype.m_targetA);box2d.b2MouseJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_frequencyHz",box2d.b2MouseJoint.prototype.m_frequencyHz);box2d.b2MouseJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_dampingRatio",box2d.b2MouseJoint.prototype.m_dampingRatio);box2d.b2MouseJoint.prototype.m_beta=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_beta",box2d.b2MouseJoint.prototype.m_beta);box2d.b2MouseJoint.prototype.m_impulse=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_impulse",box2d.b2MouseJoint.prototype.m_impulse);box2d.b2MouseJoint.prototype.m_maxForce=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_maxForce",box2d.b2MouseJoint.prototype.m_maxForce);box2d.b2MouseJoint.prototype.m_gamma=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_gamma",box2d.b2MouseJoint.prototype.m_gamma);box2d.b2MouseJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_indexA",box2d.b2MouseJoint.prototype.m_indexA);box2d.b2MouseJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_indexB",box2d.b2MouseJoint.prototype.m_indexB);box2d.b2MouseJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_rB",box2d.b2MouseJoint.prototype.m_rB);box2d.b2MouseJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_localCenterB",box2d.b2MouseJoint.prototype.m_localCenterB);box2d.b2MouseJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_invMassB",box2d.b2MouseJoint.prototype.m_invMassB);box2d.b2MouseJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_invIB",box2d.b2MouseJoint.prototype.m_invIB);box2d.b2MouseJoint.prototype.m_mass=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_mass",box2d.b2MouseJoint.prototype.m_mass);box2d.b2MouseJoint.prototype.m_C=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_C",box2d.b2MouseJoint.prototype.m_C);box2d.b2MouseJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_qB",box2d.b2MouseJoint.prototype.m_qB);box2d.b2MouseJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_lalcB",box2d.b2MouseJoint.prototype.m_lalcB);box2d.b2MouseJoint.prototype.m_K=null;goog.exportProperty(box2d.b2MouseJoint.prototype,"m_K",box2d.b2MouseJoint.prototype.m_K);box2d.b2MouseJoint.prototype.SetTarget=function(b){!1==this.m_bodyB.IsAwake()&&this.m_bodyB.SetAwake(!0);this.m_targetA.Copy(b)};goog.exportProperty(box2d.b2MouseJoint.prototype,"SetTarget",box2d.b2MouseJoint.prototype.SetTarget);box2d.b2MouseJoint.prototype.GetTarget=function(b){return b.Copy(this.m_targetA)};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetTarget",box2d.b2MouseJoint.prototype.GetTarget);box2d.b2MouseJoint.prototype.SetMaxForce=function(b){this.m_maxForce=b};goog.exportProperty(box2d.b2MouseJoint.prototype,"SetMaxForce",box2d.b2MouseJoint.prototype.SetMaxForce);box2d.b2MouseJoint.prototype.GetMaxForce=function(){return this.m_maxForce};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetMaxForce",box2d.b2MouseJoint.prototype.GetMaxForce);box2d.b2MouseJoint.prototype.SetFrequency=function(b){this.m_frequencyHz=b};goog.exportProperty(box2d.b2MouseJoint.prototype,"SetFrequency",box2d.b2MouseJoint.prototype.SetFrequency);box2d.b2MouseJoint.prototype.GetFrequency=function(){return this.m_frequencyHz};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetFrequency",box2d.b2MouseJoint.prototype.GetFrequency);box2d.b2MouseJoint.prototype.SetDampingRatio=function(b){this.m_dampingRatio=b};goog.exportProperty(box2d.b2MouseJoint.prototype,"SetDampingRatio",box2d.b2MouseJoint.prototype.SetDampingRatio);box2d.b2MouseJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetDampingRatio",box2d.b2MouseJoint.prototype.GetDampingRatio);box2d.b2MouseJoint.prototype.InitVelocityConstraints=function(k){this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIB=this.m_bodyB.m_invI;var j=k.positions[this.m_indexB].c,v=k.velocities[this.m_indexB].v,r=k.velocities[this.m_indexB].w,u=this.m_qB.SetAngleRadians(k.positions[this.m_indexB].a),q=this.m_bodyB.GetMass(),n=2*box2d.b2_pi*this.m_frequencyHz,m=2*q*this.m_dampingRatio*n,q=q*n*n,n=k.step.dt;box2d.ENABLE_ASSERTS&&box2d.b2Assert(m+n*q>box2d.b2_epsilon);this.m_gamma=n*(m+n*q);0!=this.m_gamma&&(this.m_gamma=1/this.m_gamma);this.m_beta=n*q*this.m_gamma;box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2MulRV(u,this.m_lalcB,this.m_rB);u=this.m_K;u.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma;u.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y;u.ey.x=u.ex.y;u.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma;u.GetInverse(this.m_mass);this.m_C.x=j.x+this.m_rB.x-this.m_targetA.x;this.m_C.y=j.y+this.m_rB.y-this.m_targetA.y;this.m_C.SelfMul(this.m_beta);r*=0.98;k.step.warmStarting?(this.m_impulse.SelfMul(k.step.dtRatio),v.x+=this.m_invMassB*this.m_impulse.x,v.y+=this.m_invMassB*this.m_impulse.y,r+=this.m_invIB*box2d.b2CrossVV(this.m_rB,this.m_impulse)):this.m_impulse.SetZero();k.velocities[this.m_indexB].w=r};goog.exportProperty(box2d.b2MouseJoint.prototype,"InitVelocityConstraints",box2d.b2MouseJoint.prototype.InitVelocityConstraints);box2d.b2MouseJoint.prototype.SolveVelocityConstraints=function(j){var g=j.velocities[this.m_indexB].v,q=j.velocities[this.m_indexB].w,m=box2d.b2AddVCrossSV(g,q,this.m_rB,box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_Cdot),m=box2d.b2MulMV(this.m_mass,box2d.b2AddVV(m,box2d.b2AddVV(this.m_C,box2d.b2MulSV(this.m_gamma,this.m_impulse,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0).SelfNeg(),box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_impulse),n=box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_oldImpulse.Copy(this.m_impulse);this.m_impulse.SelfAdd(m);var k=j.step.dt*this.m_maxForce;this.m_impulse.GetLengthSquared()>k*k&&this.m_impulse.SelfMul(k/this.m_impulse.GetLength());box2d.b2SubVV(this.m_impulse,n,m);g.SelfMulAdd(this.m_invMassB,m);q+=this.m_invIB*box2d.b2CrossVV(this.m_rB,m);j.velocities[this.m_indexB].w=q};goog.exportProperty(box2d.b2MouseJoint.prototype,"SolveVelocityConstraints",box2d.b2MouseJoint.prototype.SolveVelocityConstraints);box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2;box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec2;box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_oldImpulse=new box2d.b2Vec2;box2d.b2MouseJoint.prototype.SolvePositionConstraints=function(b){return !0};goog.exportProperty(box2d.b2MouseJoint.prototype,"SolvePositionConstraints",box2d.b2MouseJoint.prototype.SolvePositionConstraints);box2d.b2MouseJoint.prototype.GetAnchorA=function(b){return b.Copy(this.m_targetA)};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetAnchorA",box2d.b2MouseJoint.prototype.GetAnchorA);box2d.b2MouseJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetAnchorB",box2d.b2MouseJoint.prototype.GetAnchorB);box2d.b2MouseJoint.prototype.GetReactionForce=function(e,d){return box2d.b2MulSV(e,this.m_impulse,d)};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetReactionForce",box2d.b2MouseJoint.prototype.GetReactionForce);box2d.b2MouseJoint.prototype.GetReactionTorque=function(b){return 0};goog.exportProperty(box2d.b2MouseJoint.prototype,"GetReactionTorque",box2d.b2MouseJoint.prototype.GetReactionTorque);box2d.b2MouseJoint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("Mouse joint dumping is not supported.\n")};goog.exportProperty(box2d.b2MouseJoint.prototype,"Dump",box2d.b2MouseJoint.prototype.Dump);box2d.b2MouseJoint.prototype.ShiftOrigin=function(b){this.m_targetA.SelfSub(b)};goog.exportProperty(box2d.b2MouseJoint.prototype,"ShiftOrigin",box2d.b2MouseJoint.prototype.ShiftOrigin);box2d.b2ConstantForceController=function(){box2d.b2Controller.call(this);this.F=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2ConstantForceController,box2d.b2Controller);goog.exportSymbol("box2d.b2ConstantForceController",box2d.b2ConstantForceController);box2d.b2ConstantAccelController.prototype.F=null;goog.exportProperty(box2d.b2ConstantAccelController.prototype,"F",box2d.b2ConstantAccelController.prototype.F);box2d.b2ConstantForceController.prototype.Step=function(e){for(e=this.m_bodyList;e;e=e.nextBody){var d=e.body;d.IsAwake()&&d.ApplyForce(this.F,d.GetWorldCenter())}};goog.exportProperty(box2d.b2ConstantForceController.prototype,"Step",box2d.b2ConstantForceController.prototype.Step);box2d.b2_minPulleyLength=2;goog.exportSymbol("box2d.b2_minPulleyLength",box2d.b2_minPulleyLength);box2d.b2PulleyJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_pulleyJoint);this.collideConnected=!0;this.groundAnchorA=new box2d.b2Vec2(-1,1);this.groundAnchorB=new box2d.b2Vec2(1,1);this.localAnchorA=new box2d.b2Vec2(-1,0);this.localAnchorB=new box2d.b2Vec2(1,0)};goog.inherits(box2d.b2PulleyJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2PulleyJointDef",box2d.b2PulleyJointDef);box2d.b2PulleyJointDef.prototype.groundAnchorA=null;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"groundAnchorA",box2d.b2PulleyJointDef.prototype.groundAnchorA);box2d.b2PulleyJointDef.prototype.groundAnchorB=null;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"groundAnchorB",box2d.b2PulleyJointDef.prototype.groundAnchorB);box2d.b2PulleyJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"localAnchorA",box2d.b2PulleyJointDef.prototype.localAnchorA);box2d.b2PulleyJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"localAnchorB",box2d.b2PulleyJointDef.prototype.localAnchorB);box2d.b2PulleyJointDef.prototype.lengthA=0;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"lengthA",box2d.b2PulleyJointDef.prototype.lengthA);box2d.b2PulleyJointDef.prototype.lengthB=0;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"lengthB",box2d.b2PulleyJointDef.prototype.lengthB);box2d.b2PulleyJointDef.prototype.ratio=1;goog.exportProperty(box2d.b2PulleyJointDef.prototype,"ratio",box2d.b2PulleyJointDef.prototype.ratio);box2d.b2PulleyJointDef.prototype.Initialize=function(k,j,u,q,r,n,m){this.bodyA=k;this.bodyB=j;this.groundAnchorA.Copy(u);this.groundAnchorB.Copy(q);this.bodyA.GetLocalPoint(r,this.localAnchorA);this.bodyB.GetLocalPoint(n,this.localAnchorB);this.lengthA=box2d.b2DistanceVV(r,u);this.lengthB=box2d.b2DistanceVV(n,q);this.ratio=m;box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.ratio>box2d.b2_epsilon)};goog.exportProperty(box2d.b2PulleyJointDef.prototype,"Initialize",box2d.b2PulleyJointDef.prototype.Initialize);box2d.b2PulleyJoint=function(b){box2d.b2Joint.call(this,b);this.m_groundAnchorA=new box2d.b2Vec2;this.m_groundAnchorB=new box2d.b2Vec2;this.m_localAnchorA=new box2d.b2Vec2;this.m_localAnchorB=new box2d.b2Vec2;this.m_uA=new box2d.b2Vec2;this.m_uB=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_groundAnchorA.Copy(b.groundAnchorA);this.m_groundAnchorB.Copy(b.groundAnchorB);this.m_localAnchorA.Copy(b.localAnchorA);this.m_localAnchorB.Copy(b.localAnchorB);this.m_lengthA=b.lengthA;this.m_lengthB=b.lengthB;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0!=b.ratio);this.m_ratio=b.ratio;this.m_constant=b.lengthA+this.m_ratio*b.lengthB;this.m_impulse=0};goog.inherits(box2d.b2PulleyJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2PulleyJoint",box2d.b2PulleyJoint);box2d.b2PulleyJoint.prototype.m_groundAnchorA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_groundAnchorA",box2d.b2PulleyJoint.prototype.m_groundAnchorA);box2d.b2PulleyJoint.prototype.m_groundAnchorB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_groundAnchorB",box2d.b2PulleyJoint.prototype.m_groundAnchorB);box2d.b2PulleyJoint.prototype.m_lengthA=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lengthA",box2d.b2PulleyJoint.prototype.m_lengthA);box2d.b2PulleyJoint.prototype.m_lengthB=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lengthB",box2d.b2PulleyJoint.prototype.m_lengthB);box2d.b2PulleyJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localAnchorA",box2d.b2PulleyJoint.prototype.m_localAnchorA);box2d.b2PulleyJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localAnchorB",box2d.b2PulleyJoint.prototype.m_localAnchorB);box2d.b2PulleyJoint.prototype.m_constant=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_constant",box2d.b2PulleyJoint.prototype.m_constant);box2d.b2PulleyJoint.prototype.m_ratio=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_ratio",box2d.b2PulleyJoint.prototype.m_ratio);box2d.b2PulleyJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_impulse",box2d.b2PulleyJoint.prototype.m_impulse);box2d.b2PulleyJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_indexA",box2d.b2PulleyJoint.prototype.m_indexA);box2d.b2PulleyJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_indexB",box2d.b2PulleyJoint.prototype.m_indexB);box2d.b2PulleyJoint.prototype.m_uA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_uA",box2d.b2PulleyJoint.prototype.m_uA);box2d.b2PulleyJoint.prototype.m_uB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_uB",box2d.b2PulleyJoint.prototype.m_uB);box2d.b2PulleyJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_rA",box2d.b2PulleyJoint.prototype.m_rA);box2d.b2PulleyJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_rB",box2d.b2PulleyJoint.prototype.m_rB);box2d.b2PulleyJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localCenterA",box2d.b2PulleyJoint.prototype.m_localCenterA);box2d.b2PulleyJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_localCenterB",box2d.b2PulleyJoint.prototype.m_localCenterB);box2d.b2PulleyJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invMassA",box2d.b2PulleyJoint.prototype.m_invMassA);box2d.b2PulleyJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invMassB",box2d.b2PulleyJoint.prototype.m_invMassB);box2d.b2PulleyJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invIA",box2d.b2PulleyJoint.prototype.m_invIA);box2d.b2PulleyJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_invIB",box2d.b2PulleyJoint.prototype.m_invIB);box2d.b2PulleyJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_mass",box2d.b2PulleyJoint.prototype.m_mass);box2d.b2PulleyJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_qA",box2d.b2PulleyJoint.prototype.m_qA);box2d.b2PulleyJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_qB",box2d.b2PulleyJoint.prototype.m_qB);box2d.b2PulleyJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lalcA",box2d.b2PulleyJoint.prototype.m_lalcA);box2d.b2PulleyJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2PulleyJoint.prototype,"m_lalcB",box2d.b2PulleyJoint.prototype.m_lalcB);box2d.b2PulleyJoint.prototype.InitVelocityConstraints=function(y){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var v=y.positions[this.m_indexA].c,u=y.velocities[this.m_indexA].v,q=y.velocities[this.m_indexA].w,r=y.positions[this.m_indexB].c,n=y.positions[this.m_indexB].a,m=y.velocities[this.m_indexB].v,k=y.velocities[this.m_indexB].w,j=this.m_qA.SetAngleRadians(y.positions[this.m_indexA].a),n=this.m_qB.SetAngleRadians(n);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);box2d.b2MulRV(j,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);box2d.b2MulRV(n,this.m_lalcB,this.m_rB);this.m_uA.Copy(v).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA);this.m_uB.Copy(r).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB);v=this.m_uA.GetLength();r=this.m_uB.GetLength();v>10*box2d.b2_linearSlop?this.m_uA.SelfMul(1/v):this.m_uA.SetZero();r>10*box2d.b2_linearSlop?this.m_uB.SelfMul(1/r):this.m_uB.SetZero();v=box2d.b2CrossVV(this.m_rA,this.m_uA);r=box2d.b2CrossVV(this.m_rB,this.m_uB);this.m_mass=this.m_invMassA+this.m_invIA*v*v+this.m_ratio*this.m_ratio*(this.m_invMassB+this.m_invIB*r*r);0<this.m_mass&&(this.m_mass=1/this.m_mass);y.step.warmStarting?(this.m_impulse*=y.step.dtRatio,v=box2d.b2MulSV(-this.m_impulse,this.m_uA,box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PA),r=box2d.b2MulSV(-this.m_ratio*this.m_impulse,this.m_uB,box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PB),u.SelfMulAdd(this.m_invMassA,v),q+=this.m_invIA*box2d.b2CrossVV(this.m_rA,v),m.SelfMulAdd(this.m_invMassB,r),k+=this.m_invIB*box2d.b2CrossVV(this.m_rB,r)):this.m_impulse=0;y.velocities[this.m_indexA].w=q;y.velocities[this.m_indexB].w=k};goog.exportProperty(box2d.b2PulleyJoint.prototype,"InitVelocityConstraints",box2d.b2PulleyJoint.prototype.InitVelocityConstraints);box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PA=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PB=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolveVelocityConstraints=function(k){var j=k.velocities[this.m_indexA].v,u=k.velocities[this.m_indexA].w,q=k.velocities[this.m_indexB].v,r=k.velocities[this.m_indexB].w,n=box2d.b2AddVCrossSV(j,u,this.m_rA,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpA),m=box2d.b2AddVCrossSV(q,r,this.m_rB,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpB),n=-box2d.b2DotVV(this.m_uA,n)-this.m_ratio*box2d.b2DotVV(this.m_uB,m),m=-this.m_mass*n;this.m_impulse+=m;n=box2d.b2MulSV(-m,this.m_uA,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PA);m=box2d.b2MulSV(-this.m_ratio*m,this.m_uB,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PB);j.SelfMulAdd(this.m_invMassA,n);u+=this.m_invIA*box2d.b2CrossVV(this.m_rA,n);q.SelfMulAdd(this.m_invMassB,m);r+=this.m_invIB*box2d.b2CrossVV(this.m_rB,m);k.velocities[this.m_indexA].w=u;k.velocities[this.m_indexB].w=r};goog.exportProperty(box2d.b2PulleyJoint.prototype,"SolveVelocityConstraints",box2d.b2PulleyJoint.prototype.SolveVelocityConstraints);box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PA=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PB=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolvePositionConstraints=function(F){var E=F.positions[this.m_indexA].c,D=F.positions[this.m_indexA].a,B=F.positions[this.m_indexB].c,C=F.positions[this.m_indexB].a,A=this.m_qA.SetAngleRadians(D),z=this.m_qB.SetAngleRadians(C);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);A=box2d.b2MulRV(A,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var z=box2d.b2MulRV(z,this.m_lalcB,this.m_rB),y=this.m_uA.Copy(E).SelfAdd(A).SelfSub(this.m_groundAnchorA),u=this.m_uB.Copy(B).SelfAdd(z).SelfSub(this.m_groundAnchorB),v=y.GetLength(),r=u.GetLength();v>10*box2d.b2_linearSlop?y.SelfMul(1/v):y.SetZero();r>10*box2d.b2_linearSlop?u.SelfMul(1/r):u.SetZero();var q=box2d.b2CrossVV(A,y),j=box2d.b2CrossVV(z,u),q=this.m_invMassA+this.m_invIA*q*q+this.m_ratio*this.m_ratio*(this.m_invMassB+this.m_invIB*j*j);0<q&&(q=1/q);r=this.m_constant-v-this.m_ratio*r;v=box2d.b2Abs(r);r*=-q;y=box2d.b2MulSV(-r,y,box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PA);u=box2d.b2MulSV(-this.m_ratio*r,u,box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PB);E.SelfMulAdd(this.m_invMassA,y);D+=this.m_invIA*box2d.b2CrossVV(A,y);B.SelfMulAdd(this.m_invMassB,u);C+=this.m_invIB*box2d.b2CrossVV(z,u);F.positions[this.m_indexA].a=D;F.positions[this.m_indexB].a=C;return v<box2d.b2_linearSlop};goog.exportProperty(box2d.b2PulleyJoint.prototype,"SolvePositionConstraints",box2d.b2PulleyJoint.prototype.SolvePositionConstraints);box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PA=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PB=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetAnchorA",box2d.b2PulleyJoint.prototype.GetAnchorA);box2d.b2PulleyJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetAnchorB",box2d.b2PulleyJoint.prototype.GetAnchorB);box2d.b2PulleyJoint.prototype.GetReactionForce=function(e,d){return d.SetXY(e*this.m_impulse*this.m_uB.x,e*this.m_impulse*this.m_uB.y)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetReactionForce",box2d.b2PulleyJoint.prototype.GetReactionForce);box2d.b2PulleyJoint.prototype.GetReactionTorque=function(b){return 0};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetReactionTorque",box2d.b2PulleyJoint.prototype.GetReactionTorque);box2d.b2PulleyJoint.prototype.GetGroundAnchorA=function(b){return b.Copy(this.m_groundAnchorA)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetGroundAnchorA",box2d.b2PulleyJoint.prototype.GetGroundAnchorA);box2d.b2PulleyJoint.prototype.GetGroundAnchorB=function(b){return b.Copy(this.m_groundAnchorB)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetGroundAnchorB",box2d.b2PulleyJoint.prototype.GetGroundAnchorB);box2d.b2PulleyJoint.prototype.GetLengthA=function(){return this.m_lengthA};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetLengthA",box2d.b2PulleyJoint.prototype.GetLengthA);box2d.b2PulleyJoint.prototype.GetLengthB=function(){return this.m_lengthB};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetLengthB",box2d.b2PulleyJoint.prototype.GetLengthB);box2d.b2PulleyJoint.prototype.GetRatio=function(){return this.m_ratio};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetRatio",box2d.b2PulleyJoint.prototype.GetRatio);box2d.b2PulleyJoint.prototype.GetCurrentLengthA=function(){var b=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,box2d.b2PulleyJoint.prototype.GetCurrentLengthA.s_p);return box2d.b2DistanceVV(b,this.m_groundAnchorA)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetCurrentLengthA",box2d.b2PulleyJoint.prototype.GetCurrentLengthA);box2d.b2PulleyJoint.prototype.GetCurrentLengthA.s_p=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.GetCurrentLengthB=function(){var b=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,box2d.b2PulleyJoint.prototype.GetCurrentLengthB.s_p);return box2d.b2DistanceVV(b,this.m_groundAnchorB)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"GetCurrentLengthB",box2d.b2PulleyJoint.prototype.GetCurrentLengthB);box2d.b2PulleyJoint.prototype.GetCurrentLengthB.s_p=new box2d.b2Vec2;box2d.b2PulleyJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2PulleyJointDef*/ var jd = new box2d.b2PulleyJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.groundAnchorA.SetXY(%.15f, %.15f);\n",this.m_groundAnchorA.x,this.m_groundAnchorA.y);box2d.b2Log("  jd.groundAnchorB.SetXY(%.15f, %.15f);\n",this.m_groundAnchorB.x,this.m_groundAnchorB.y);box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.lengthA = %.15f;\n",this.m_lengthA);box2d.b2Log("  jd.lengthB = %.15f;\n",this.m_lengthB);box2d.b2Log("  jd.ratio = %.15f;\n",this.m_ratio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2PulleyJoint.prototype,"Dump",box2d.b2PulleyJoint.prototype.Dump);box2d.b2PulleyJoint.prototype.ShiftOrigin=function(b){this.m_groundAnchorA.SelfSub(b);this.m_groundAnchorB.SelfSub(b)};goog.exportProperty(box2d.b2PulleyJoint.prototype,"ShiftOrigin",box2d.b2PulleyJoint.prototype.ShiftOrigin);box2d.b2CircleShape=function(b){box2d.b2Shape.call(this,box2d.b2ShapeType.e_circleShape,b||0);this.m_p=new box2d.b2Vec2};goog.inherits(box2d.b2CircleShape,box2d.b2Shape);goog.exportSymbol("box2d.b2CircleShape",box2d.b2CircleShape);box2d.b2CircleShape.prototype.m_p=null;goog.exportProperty(box2d.b2CircleShape.prototype,"m_p",box2d.b2CircleShape.prototype.m_p);box2d.b2CircleShape.prototype.Clone=function(){return(new box2d.b2CircleShape).Copy(this)};goog.exportProperty(box2d.b2CircleShape.prototype,"Clone",box2d.b2CircleShape.prototype.Clone);box2d.b2CircleShape.prototype.Copy=function(b){box2d.b2CircleShape.superClass_.Copy.call(this,b);box2d.ENABLE_ASSERTS&&box2d.b2Assert(b instanceof box2d.b2CircleShape);this.m_p.Copy(b.m_p);return this};goog.exportProperty(box2d.b2CircleShape.prototype,"Copy",box2d.b2CircleShape.prototype.Copy);box2d.b2CircleShape.prototype.GetChildCount=function(){return 1};goog.exportProperty(box2d.b2CircleShape.prototype,"GetChildCount",box2d.b2CircleShape.prototype.GetChildCount);box2d.b2CircleShape.prototype.TestPoint=function(e,d){var f=box2d.b2MulXV(e,this.m_p,box2d.b2CircleShape.prototype.TestPoint.s_center),f=box2d.b2SubVV(d,f,box2d.b2CircleShape.prototype.TestPoint.s_d);return box2d.b2DotVV(f,f)<=box2d.b2Sq(this.m_radius)};goog.exportProperty(box2d.b2CircleShape.prototype,"TestPoint",box2d.b2CircleShape.prototype.TestPoint);box2d.b2CircleShape.prototype.TestPoint.s_center=new box2d.b2Vec2;box2d.b2CircleShape.prototype.TestPoint.s_d=new box2d.b2Vec2;box2d.b2CircleShape.prototype.RayCast=function(k,j,u,q){u=box2d.b2MulXV(u,this.m_p,box2d.b2CircleShape.prototype.RayCast.s_position);u=box2d.b2SubVV(j.p1,u,box2d.b2CircleShape.prototype.RayCast.s_s);var r=box2d.b2DotVV(u,u)-box2d.b2Sq(this.m_radius);q=box2d.b2SubVV(j.p2,j.p1,box2d.b2CircleShape.prototype.RayCast.s_r);var n=box2d.b2DotVV(u,q),m=box2d.b2DotVV(q,q),r=n*n-m*r;if(0>r||m<box2d.b2_epsilon){return !1}n=-(n+box2d.b2Sqrt(r));return 0<=n&&n<=j.maxFraction*m?(n/=m,k.fraction=n,box2d.b2AddVMulSV(u,n,q,k.normal).SelfNormalize(),!0):!1};goog.exportProperty(box2d.b2CircleShape.prototype,"RayCast",box2d.b2CircleShape.prototype.RayCast);box2d.b2CircleShape.prototype.RayCast.s_position=new box2d.b2Vec2;box2d.b2CircleShape.prototype.RayCast.s_s=new box2d.b2Vec2;box2d.b2CircleShape.prototype.RayCast.s_r=new box2d.b2Vec2;box2d.b2CircleShape.prototype.ComputeAABB=function(e,d,f){d=box2d.b2MulXV(d,this.m_p,box2d.b2CircleShape.prototype.ComputeAABB.s_p);e.lowerBound.SetXY(d.x-this.m_radius,d.y-this.m_radius);e.upperBound.SetXY(d.x+this.m_radius,d.y+this.m_radius)};goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeAABB",box2d.b2CircleShape.prototype.ComputeAABB);box2d.b2CircleShape.prototype.ComputeAABB.s_p=new box2d.b2Vec2;box2d.b2CircleShape.prototype.ComputeMass=function(e,d){var f=box2d.b2Sq(this.m_radius);e.mass=d*box2d.b2_pi*f;e.center.Copy(this.m_p);e.I=e.mass*(0.5*f+box2d.b2DotVV(this.m_p,this.m_p))};goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeMass",box2d.b2CircleShape.prototype.ComputeMass);box2d.b2CircleShape.prototype.SetupDistanceProxy=function(e,d){e.m_vertices=[1,!0];e.m_vertices[0]=this.m_p;e.m_count=1;e.m_radius=this.m_radius};box2d.b2CircleShape.prototype.ComputeSubmergedArea=function(j,g,q,m){q=box2d.b2MulXV(q,this.m_p,new box2d.b2Vec2);var n=-(box2d.b2DotVV(j,q)-g);if(n<-this.m_radius+box2d.b2_epsilon){return 0}if(n>this.m_radius){return m.Copy(q),box2d.b2_pi*this.m_radius*this.m_radius}g=this.m_radius*this.m_radius;var k=n*n,n=g*(box2d.b2Asin(n/this.m_radius)+box2d.b2_pi/2)+n*box2d.b2Sqrt(g-k);g=-2/3*box2d.b2Pow(g-k,1.5)/n;m.x=q.x+j.x*g;m.y=q.y+j.y*g;return n};goog.exportProperty(box2d.b2CircleShape.prototype,"ComputeSubmergedArea",box2d.b2CircleShape.prototype.ComputeSubmergedArea);box2d.b2CircleShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2CircleShape*/ var shape = new box2d.b2CircleShape();\n");box2d.b2Log("    shape.m_radius = %.15f;\n",this.m_radius);box2d.b2Log("    shape.m_p.SetXY(%.15f, %.15f);\n",this.m_p.x,this.m_p.y)};goog.exportProperty(box2d.b2CircleShape.prototype,"Dump",box2d.b2CircleShape.prototype.Dump);box2d.b2RopeDef=function(){this.vertices=[];this.masses=[];this.gravity=new box2d.b2Vec2};goog.exportSymbol("box2d.b2RopeDef",box2d.b2RopeDef);box2d.b2RopeDef.prototype.vertices=null;box2d.b2RopeDef.prototype.count=0;box2d.b2RopeDef.prototype.masses=null;box2d.b2RopeDef.prototype.gravity=null;box2d.b2RopeDef.prototype.damping=0.1;box2d.b2RopeDef.prototype.k2=0.9;box2d.b2RopeDef.prototype.k3=0.1;box2d.b2Rope=function(){this.m_gravity=new box2d.b2Vec2};goog.exportSymbol("box2d.b2Rope",box2d.b2Rope);box2d.b2Rope.prototype.m_count=0;box2d.b2Rope.prototype.m_ps=null;box2d.b2Rope.prototype.m_p0s=null;box2d.b2Rope.prototype.m_vs=null;box2d.b2Rope.prototype.m_ims=null;box2d.b2Rope.prototype.m_Ls=null;box2d.b2Rope.prototype.m_as=null;box2d.b2Rope.prototype.m_gravity=null;box2d.b2Rope.prototype.m_damping=0;box2d.b2Rope.prototype.m_k2=1;box2d.b2Rope.prototype.m_k3=0.1;box2d.b2Rope.prototype.GetVertexCount=function(){return this.m_count};goog.exportProperty(box2d.b2Rope.prototype,"GetVertexCount",box2d.b2Rope.prototype.GetVertexCount);box2d.b2Rope.prototype.GetVertices=function(){return this.m_ps};goog.exportProperty(box2d.b2Rope.prototype,"GetVertices",box2d.b2Rope.prototype.GetVertices);box2d.b2Rope.prototype.Initialize=function(j){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=j.count);this.m_count=j.count;this.m_ps=box2d.b2Vec2.MakeArray(this.m_count);this.m_p0s=box2d.b2Vec2.MakeArray(this.m_count);this.m_vs=box2d.b2Vec2.MakeArray(this.m_count);this.m_ims=box2d.b2MakeNumberArray(this.m_count);for(var g=0;g<this.m_count;++g){this.m_ps[g].Copy(j.vertices[g]);this.m_p0s[g].Copy(j.vertices[g]);this.m_vs[g].SetZero();var q=j.masses[g];this.m_ims[g]=0<q?1/q:0}var m=this.m_count-1,q=this.m_count-2;this.m_Ls=box2d.b2MakeNumberArray(m);this.m_as=box2d.b2MakeNumberArray(q);for(g=0;g<m;++g){var n=this.m_ps[g],k=this.m_ps[g+1];this.m_Ls[g]=box2d.b2DistanceVV(n,k)}for(g=0;g<q;++g){n=this.m_ps[g],k=this.m_ps[g+1],m=this.m_ps[g+2],n=box2d.b2SubVV(k,n,box2d.b2Vec2.s_t0),m=box2d.b2SubVV(m,k,box2d.b2Vec2.s_t1),k=box2d.b2CrossVV(n,m),n=box2d.b2DotVV(n,m),this.m_as[g]=box2d.b2Atan2(k,n)}this.m_gravity.Copy(j.gravity);this.m_damping=j.damping;this.m_k2=j.k2;this.m_k3=j.k3};goog.exportProperty(box2d.b2Rope.prototype,"Initialize",box2d.b2Rope.prototype.Initialize);box2d.b2Rope.prototype.Step=function(f,d){if(0!=f){for(var j=Math.exp(-f*this.m_damping),g=0;g<this.m_count;++g){this.m_p0s[g].Copy(this.m_ps[g]),0<this.m_ims[g]&&this.m_vs[g].SelfMulAdd(f,this.m_gravity),this.m_vs[g].SelfMul(j),this.m_ps[g].SelfMulAdd(f,this.m_vs[g])}for(g=0;g<d;++g){this.SolveC2(),this.SolveC3(),this.SolveC2()}j=1/f;for(g=0;g<this.m_count;++g){box2d.b2MulSV(j,box2d.b2SubVV(this.m_ps[g],this.m_p0s[g],box2d.b2Vec2.s_t0),this.m_vs[g])}}};goog.exportProperty(box2d.b2Rope.prototype,"Step",box2d.b2Rope.prototype.Step);box2d.b2Rope.prototype.SolveC2=function(){for(var y=this.m_count-1,v=0;v<y;++v){var u=this.m_ps[v],q=this.m_ps[v+1],r=box2d.b2SubVV(q,u,box2d.b2Rope.s_d),n=r.Normalize(),m=this.m_ims[v],k=this.m_ims[v+1];if(0!=m+k){var j=k/(m+k);u.SelfMulSub(this.m_k2*(m/(m+k))*(this.m_Ls[v]-n),r);q.SelfMulAdd(this.m_k2*j*(this.m_Ls[v]-n),r)}}};goog.exportProperty(box2d.b2Rope.prototype,"SolveC2",box2d.b2Rope.prototype.SolveC2);box2d.b2Rope.s_d=new box2d.b2Vec2;box2d.b2Rope.prototype.SetAngleRadians=function(e){for(var d=this.m_count-2,f=0;f<d;++f){this.m_as[f]=e}};goog.exportProperty(box2d.b2Rope.prototype,"SetAngleRadians",box2d.b2Rope.prototype.SetAngleRadians);box2d.b2Rope.prototype.SolveC3=function(){for(var H=this.m_count-2,G=0;G<H;++G){var F=this.m_ps[G],D=this.m_ps[G+1],E=this.m_ps[G+2],C=this.m_ims[G],B=this.m_ims[G+1],A=this.m_ims[G+2],y=box2d.b2SubVV(D,F,box2d.b2Rope.s_d1),z=box2d.b2SubVV(E,D,box2d.b2Rope.s_d2),v=y.GetLengthSquared(),u=z.GetLengthSquared();if(0!=v*u){var r=box2d.b2CrossVV(y,z),j=box2d.b2DotVV(y,z),r=box2d.b2Atan2(r,j),y=box2d.b2MulSV(-1/v,y.SelfSkew(),box2d.b2Rope.s_Jd1),v=box2d.b2MulSV(1/u,z.SelfSkew(),box2d.b2Rope.s_Jd2),z=box2d.b2NegV(y,box2d.b2Rope.s_J1),u=box2d.b2SubVV(y,v,box2d.b2Rope.s_J2),y=v,v=C*box2d.b2DotVV(z,z)+B*box2d.b2DotVV(u,u)+A*box2d.b2DotVV(y,y);if(0!=v){v=1/v;for(j=r-this.m_as[G];j>box2d.b2_pi;){r-=2*box2d.b2_pi,j=r-this.m_as[G]}for(;j<-box2d.b2_pi;){r+=2*box2d.b2_pi,j=r-this.m_as[G]}r=-this.m_k3*v*j;F.SelfMulAdd(C*r,z);D.SelfMulAdd(B*r,u);E.SelfMulAdd(A*r,y)}}}};goog.exportProperty(box2d.b2Rope.prototype,"SolveC3",box2d.b2Rope.prototype.SolveC3);box2d.b2Rope.s_d1=new box2d.b2Vec2;box2d.b2Rope.s_d2=new box2d.b2Vec2;box2d.b2Rope.s_Jd1=new box2d.b2Vec2;box2d.b2Rope.s_Jd2=new box2d.b2Vec2;box2d.b2Rope.s_J1=new box2d.b2Vec2;box2d.b2Rope.s_J2=new box2d.b2Vec2;box2d.b2Rope.prototype.Draw=function(e){for(var d=new box2d.b2Color(0.4,0.5,0.7),f=0;f<this.m_count-1;++f){e.DrawSegment(this.m_ps[f],this.m_ps[f+1],d)}};goog.exportProperty(box2d.b2Rope.prototype,"Draw",box2d.b2Rope.prototype.Draw);box2d.b2WheelJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_wheelJoint);this.localAnchorA=new box2d.b2Vec2(0,0);this.localAnchorB=new box2d.b2Vec2(0,0);this.localAxisA=new box2d.b2Vec2(1,0)};goog.inherits(box2d.b2WheelJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2WheelJointDef",box2d.b2WheelJointDef);box2d.b2WheelJointDef.prototype.localAnchorA=null;goog.exportProperty(box2d.b2WheelJointDef.prototype,"localAnchorA",box2d.b2WheelJointDef.prototype.localAnchorA);box2d.b2WheelJointDef.prototype.localAnchorB=null;goog.exportProperty(box2d.b2WheelJointDef.prototype,"localAnchorB",box2d.b2WheelJointDef.prototype.localAnchorB);box2d.b2WheelJointDef.prototype.localAxisA=null;goog.exportProperty(box2d.b2WheelJointDef.prototype,"localAxisA",box2d.b2WheelJointDef.prototype.localAxisA);box2d.b2WheelJointDef.prototype.enableMotor=!1;goog.exportProperty(box2d.b2WheelJointDef.prototype,"enableMotor",box2d.b2WheelJointDef.prototype.enableMotor);box2d.b2WheelJointDef.prototype.maxMotorTorque=0;goog.exportProperty(box2d.b2WheelJointDef.prototype,"maxMotorTorque",box2d.b2WheelJointDef.prototype.maxMotorTorque);box2d.b2WheelJointDef.prototype.motorSpeed=0;goog.exportProperty(box2d.b2WheelJointDef.prototype,"motorSpeed",box2d.b2WheelJointDef.prototype.motorSpeed);box2d.b2WheelJointDef.prototype.frequencyHz=2;goog.exportProperty(box2d.b2WheelJointDef.prototype,"frequencyHz",box2d.b2WheelJointDef.prototype.frequencyHz);box2d.b2WheelJointDef.prototype.dampingRatio=0.7;goog.exportProperty(box2d.b2WheelJointDef.prototype,"dampingRatio",box2d.b2WheelJointDef.prototype.dampingRatio);box2d.b2WheelJointDef.prototype.Initialize=function(f,d,j,g){this.bodyA=f;this.bodyB=d;this.bodyA.GetLocalPoint(j,this.localAnchorA);this.bodyB.GetLocalPoint(j,this.localAnchorB);this.bodyA.GetLocalVector(g,this.localAxisA)};goog.exportProperty(box2d.b2WheelJointDef.prototype,"Initialize",box2d.b2WheelJointDef.prototype.Initialize);box2d.b2WheelJoint=function(b){box2d.b2Joint.call(this,b);this.m_frequencyHz=b.frequencyHz;this.m_dampingRatio=b.dampingRatio;this.m_localAnchorA=b.localAnchorA.Clone();this.m_localAnchorB=b.localAnchorB.Clone();this.m_localXAxisA=b.localAxisA.Clone();this.m_localYAxisA=box2d.b2CrossOneV(this.m_localXAxisA,new box2d.b2Vec2);this.m_maxMotorTorque=b.maxMotorTorque;this.m_motorSpeed=b.motorSpeed;this.m_enableMotor=b.enableMotor;this.m_localCenterA=new box2d.b2Vec2;this.m_localCenterB=new box2d.b2Vec2;this.m_ax=new box2d.b2Vec2;this.m_ay=new box2d.b2Vec2;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_lalcA=new box2d.b2Vec2;this.m_lalcB=new box2d.b2Vec2;this.m_rA=new box2d.b2Vec2;this.m_rB=new box2d.b2Vec2;this.m_ax.SetZero();this.m_ay.SetZero()};goog.inherits(box2d.b2WheelJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2WheelJoint",box2d.b2WheelJoint);box2d.b2WheelJoint.prototype.m_frequencyHz=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_frequencyHz",box2d.b2WheelJoint.prototype.m_frequencyHz);box2d.b2WheelJoint.prototype.m_dampingRatio=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_dampingRatio",box2d.b2WheelJoint.prototype.m_dampingRatio);box2d.b2WheelJoint.prototype.m_localAnchorA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localAnchorA",box2d.b2WheelJoint.prototype.m_localAnchorA);box2d.b2WheelJoint.prototype.m_localAnchorB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localAnchorB",box2d.b2WheelJoint.prototype.m_localAnchorB);box2d.b2WheelJoint.prototype.m_localXAxisA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localXAxisA",box2d.b2WheelJoint.prototype.m_localXAxisA);box2d.b2WheelJoint.prototype.m_localYAxisA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localYAxisA",box2d.b2WheelJoint.prototype.m_localYAxisA);box2d.b2WheelJoint.prototype.m_impulse=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_impulse",box2d.b2WheelJoint.prototype.m_impulse);box2d.b2WheelJoint.prototype.m_motorImpulse=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_motorImpulse",box2d.b2WheelJoint.prototype.m_motorImpulse);box2d.b2WheelJoint.prototype.m_springImpulse=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_springImpulse",box2d.b2WheelJoint.prototype.m_springImpulse);box2d.b2WheelJoint.prototype.m_maxMotorTorque=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_maxMotorTorque",box2d.b2WheelJoint.prototype.m_maxMotorTorque);box2d.b2WheelJoint.prototype.m_motorSpeed=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_motorSpeed",box2d.b2WheelJoint.prototype.m_motorSpeed);box2d.b2WheelJoint.prototype.m_enableMotor=!1;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_enableMotor",box2d.b2WheelJoint.prototype.m_enableMotor);box2d.b2WheelJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_indexA",box2d.b2WheelJoint.prototype.m_indexA);box2d.b2WheelJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_indexB",box2d.b2WheelJoint.prototype.m_indexB);box2d.b2WheelJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localCenterA",box2d.b2WheelJoint.prototype.m_localCenterA);box2d.b2WheelJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_localCenterB",box2d.b2WheelJoint.prototype.m_localCenterB);box2d.b2WheelJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invMassA",box2d.b2WheelJoint.prototype.m_invMassA);box2d.b2WheelJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invMassB",box2d.b2WheelJoint.prototype.m_invMassB);box2d.b2WheelJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invIA",box2d.b2WheelJoint.prototype.m_invIA);box2d.b2WheelJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_invIB",box2d.b2WheelJoint.prototype.m_invIB);box2d.b2WheelJoint.prototype.m_ax=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_ax",box2d.b2WheelJoint.prototype.m_ax);box2d.b2WheelJoint.prototype.m_ay=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_ay",box2d.b2WheelJoint.prototype.m_ay);box2d.b2WheelJoint.prototype.m_sAx=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sAx",box2d.b2WheelJoint.prototype.m_sAx);box2d.b2WheelJoint.prototype.m_sBx=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sBx",box2d.b2WheelJoint.prototype.m_sBx);box2d.b2WheelJoint.prototype.m_sAy=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sAy",box2d.b2WheelJoint.prototype.m_sAy);box2d.b2WheelJoint.prototype.m_sBy=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_sBy",box2d.b2WheelJoint.prototype.m_sBy);box2d.b2WheelJoint.prototype.m_mass=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_mass",box2d.b2WheelJoint.prototype.m_mass);box2d.b2WheelJoint.prototype.m_motorMass=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_motorMass",box2d.b2WheelJoint.prototype.m_motorMass);box2d.b2WheelJoint.prototype.m_springMass=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_springMass",box2d.b2WheelJoint.prototype.m_springMass);box2d.b2WheelJoint.prototype.m_bias=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_bias",box2d.b2WheelJoint.prototype.m_bias);box2d.b2WheelJoint.prototype.m_gamma=0;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_gamma",box2d.b2WheelJoint.prototype.m_gamma);box2d.b2WheelJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_qA",box2d.b2WheelJoint.prototype.m_qA);box2d.b2WheelJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_qB",box2d.b2WheelJoint.prototype.m_qB);box2d.b2WheelJoint.prototype.m_lalcA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_lalcA",box2d.b2WheelJoint.prototype.m_lalcA);box2d.b2WheelJoint.prototype.m_lalcB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_lalcB",box2d.b2WheelJoint.prototype.m_lalcB);box2d.b2WheelJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_rA",box2d.b2WheelJoint.prototype.m_rA);box2d.b2WheelJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2WheelJoint.prototype,"m_rB",box2d.b2WheelJoint.prototype.m_rB);box2d.b2WheelJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetMotorSpeed",box2d.b2WheelJoint.prototype.GetMotorSpeed);box2d.b2WheelJoint.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetMaxMotorTorque",box2d.b2WheelJoint.prototype.GetMaxMotorTorque);box2d.b2WheelJoint.prototype.SetSpringFrequencyHz=function(b){this.m_frequencyHz=b};goog.exportProperty(box2d.b2WheelJoint.prototype,"SetSpringFrequencyHz",box2d.b2WheelJoint.prototype.SetSpringFrequencyHz);box2d.b2WheelJoint.prototype.GetSpringFrequencyHz=function(){return this.m_frequencyHz};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetSpringFrequencyHz",box2d.b2WheelJoint.prototype.GetSpringFrequencyHz);box2d.b2WheelJoint.prototype.SetSpringDampingRatio=function(b){this.m_dampingRatio=b};goog.exportProperty(box2d.b2WheelJoint.prototype,"SetSpringDampingRatio",box2d.b2WheelJoint.prototype.SetSpringDampingRatio);box2d.b2WheelJoint.prototype.GetSpringDampingRatio=function(){return this.m_dampingRatio};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetSpringDampingRatio",box2d.b2WheelJoint.prototype.GetSpringDampingRatio);box2d.b2WheelJoint.prototype.InitVelocityConstraints=function(H){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var G=this.m_invMassA,F=this.m_invMassB,D=this.m_invIA,E=this.m_invIB,C=H.positions[this.m_indexA].c,B=H.velocities[this.m_indexA].v,A=H.velocities[this.m_indexA].w,y=H.positions[this.m_indexB].c,z=H.positions[this.m_indexB].a,v=H.velocities[this.m_indexB].v,u=H.velocities[this.m_indexB].w,r=this.m_qA.SetAngleRadians(H.positions[this.m_indexA].a),j=this.m_qB.SetAngleRadians(z);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);z=box2d.b2MulRV(r,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);j=box2d.b2MulRV(j,this.m_lalcB,this.m_rB);C=box2d.b2SubVV(box2d.b2AddVV(y,j,box2d.b2Vec2.s_t0),box2d.b2AddVV(C,z,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_d);box2d.b2MulRV(r,this.m_localYAxisA,this.m_ay);this.m_sAy=box2d.b2CrossVV(box2d.b2AddVV(C,z,box2d.b2Vec2.s_t0),this.m_ay);this.m_sBy=box2d.b2CrossVV(j,this.m_ay);this.m_mass=G+F+D*this.m_sAy*this.m_sAy+E*this.m_sBy*this.m_sBy;0<this.m_mass&&(this.m_mass=1/this.m_mass);this.m_gamma=this.m_bias=this.m_springMass=0;0<this.m_frequencyHz?(box2d.b2MulRV(r,this.m_localXAxisA,this.m_ax),this.m_sAx=box2d.b2CrossVV(box2d.b2AddVV(C,z,box2d.b2Vec2.s_t0),this.m_ax),this.m_sBx=box2d.b2CrossVV(j,this.m_ax),G=G+F+D*this.m_sAx*this.m_sAx+E*this.m_sBx*this.m_sBx,0<G&&(this.m_springMass=1/G,F=box2d.b2DotVV(C,this.m_ax),r=2*box2d.b2_pi*this.m_frequencyHz,C=this.m_springMass*r*r,y=H.step.dt,this.m_gamma=y*(2*this.m_springMass*this.m_dampingRatio*r+y*C),0<this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_bias=F*y*C*this.m_gamma,this.m_springMass=G+this.m_gamma,0<this.m_springMass&&(this.m_springMass=1/this.m_springMass))):this.m_springImpulse=0;this.m_enableMotor?(this.m_motorMass=D+E,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass)):this.m_motorImpulse=this.m_motorMass=0;H.step.warmStarting?(this.m_impulse*=H.step.dtRatio,this.m_springImpulse*=H.step.dtRatio,this.m_motorImpulse*=H.step.dtRatio,D=box2d.b2AddVV(box2d.b2MulSV(this.m_impulse,this.m_ay,box2d.b2Vec2.s_t0),box2d.b2MulSV(this.m_springImpulse,this.m_ax,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_P),E=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,G=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse,B.SelfMulSub(this.m_invMassA,D),A-=this.m_invIA*E,v.SelfMulAdd(this.m_invMassB,D),u+=this.m_invIB*G):this.m_motorImpulse=this.m_springImpulse=this.m_impulse=0;H.velocities[this.m_indexA].w=A;H.velocities[this.m_indexB].w=u};goog.exportProperty(box2d.b2WheelJoint.prototype,"InitVelocityConstraints",box2d.b2WheelJoint.prototype.InitVelocityConstraints);box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_d=new box2d.b2Vec2;box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2WheelJoint.prototype.SolveVelocityConstraints=function(E){var D=this.m_invMassA,C=this.m_invMassB,A=this.m_invIA,B=this.m_invIB,z=E.velocities[this.m_indexA].v,y=E.velocities[this.m_indexA].w,v=E.velocities[this.m_indexB].v,r=E.velocities[this.m_indexB].w,u=box2d.b2DotVV(this.m_ax,box2d.b2SubVV(v,z,box2d.b2Vec2.s_t0))+this.m_sBx*r-this.m_sAx*y,u=-this.m_springMass*(u+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=u;var q=box2d.b2MulSV(u,this.m_ax,box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P),j=u*this.m_sAx,u=u*this.m_sBx;z.SelfMulSub(D,q);y-=A*j;v.SelfMulAdd(C,q);r+=B*u;u=r-y-this.m_motorSpeed;u*=-this.m_motorMass;q=this.m_motorImpulse;j=E.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+u,-j,j);u=this.m_motorImpulse-q;y-=A*u;r+=B*u;u=box2d.b2DotVV(this.m_ay,box2d.b2SubVV(v,z,box2d.b2Vec2.s_t0))+this.m_sBy*r-this.m_sAy*y;u*=-this.m_mass;this.m_impulse+=u;q=box2d.b2MulSV(u,this.m_ay,box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P);j=u*this.m_sAy;u*=this.m_sBy;z.SelfMulSub(D,q);y-=A*j;v.SelfMulAdd(C,q);E.velocities[this.m_indexA].w=y;E.velocities[this.m_indexB].w=r+B*u};goog.exportProperty(box2d.b2WheelJoint.prototype,"SolveVelocityConstraints",box2d.b2WheelJoint.prototype.SolveVelocityConstraints);box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2;box2d.b2WheelJoint.prototype.SolvePositionConstraints=function(A){var z=A.positions[this.m_indexA].c,y=A.positions[this.m_indexA].a,u=A.positions[this.m_indexB].c,v=A.positions[this.m_indexB].a,r=this.m_qA.SetAngleRadians(y),q=this.m_qB.SetAngleRadians(v);box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var n=box2d.b2MulRV(r,this.m_lalcA,this.m_rA);box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var q=box2d.b2MulRV(q,this.m_lalcB,this.m_rB),j=box2d.b2AddVV(box2d.b2SubVV(u,z,box2d.b2Vec2.s_t0),box2d.b2SubVV(q,n,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_d),r=box2d.b2MulRV(r,this.m_localYAxisA,this.m_ay),n=box2d.b2CrossVV(box2d.b2AddVV(j,n,box2d.b2Vec2.s_t0),r),q=box2d.b2CrossVV(q,r),j=box2d.b2DotVV(j,this.m_ay),m=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy,m=0!=m?-j/m:0,r=box2d.b2MulSV(m,r,box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_P),n=m*n,q=m*q;z.SelfMulSub(this.m_invMassA,r);y-=this.m_invIA*n;u.SelfMulAdd(this.m_invMassB,r);v+=this.m_invIB*q;A.positions[this.m_indexA].a=y;A.positions[this.m_indexB].a=v;return box2d.b2Abs(j)<=box2d.b2_linearSlop};goog.exportProperty(box2d.b2WheelJoint.prototype,"SolvePositionConstraints",box2d.b2WheelJoint.prototype.SolvePositionConstraints);box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_d=new box2d.b2Vec2;box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2;box2d.b2WheelJoint.prototype.GetDefinition=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);return b};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetDefinition",box2d.b2WheelJoint.prototype.GetDefinition);box2d.b2WheelJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetAnchorA",box2d.b2WheelJoint.prototype.GetAnchorA);box2d.b2WheelJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetAnchorB",box2d.b2WheelJoint.prototype.GetAnchorB);box2d.b2WheelJoint.prototype.GetReactionForce=function(e,d){d.x=e*(this.m_impulse*this.m_ay.x+this.m_springImpulse*this.m_ax.x);d.y=e*(this.m_impulse*this.m_ay.y+this.m_springImpulse*this.m_ax.y);return d};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetReactionForce",box2d.b2WheelJoint.prototype.GetReactionForce);box2d.b2WheelJoint.prototype.GetReactionTorque=function(b){return b*this.m_motorImpulse};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetReactionTorque",box2d.b2WheelJoint.prototype.GetReactionTorque);box2d.b2WheelJoint.prototype.GetLocalAnchorA=function(b){return b.Copy(this.m_localAnchorA)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetLocalAnchorA",box2d.b2WheelJoint.prototype.GetLocalAnchorA);box2d.b2WheelJoint.prototype.GetLocalAnchorB=function(b){return b.Copy(this.m_localAnchorB)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetLocalAnchorB",box2d.b2WheelJoint.prototype.GetLocalAnchorB);box2d.b2WheelJoint.prototype.GetLocalAxisA=function(b){return b.Copy(this.m_localXAxisA)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetLocalAxisA",box2d.b2WheelJoint.prototype.GetLocalAxisA);box2d.b2WheelJoint.prototype.GetJointTranslation=function(){var e=this.m_bodyA,d=this.m_bodyB,f=e.GetWorldPoint(this.m_localAnchorA,new box2d.b2Vec2),d=d.GetWorldPoint(this.m_localAnchorB,new box2d.b2Vec2),f=box2d.b2SubVV(d,f,new box2d.b2Vec2),e=e.GetWorldVector(this.m_localXAxisA,new box2d.b2Vec2);return box2d.b2DotVV(f,e)};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetJointTranslation",box2d.b2WheelJoint.prototype.GetJointTranslation);box2d.b2WheelJoint.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetJointSpeed",box2d.b2WheelJoint.prototype.GetJointSpeed);box2d.b2WheelJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor};goog.exportProperty(box2d.b2WheelJoint.prototype,"IsMotorEnabled",box2d.b2WheelJoint.prototype.IsMotorEnabled);box2d.b2WheelJoint.prototype.EnableMotor=function(b){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_enableMotor=b};goog.exportProperty(box2d.b2WheelJoint.prototype,"EnableMotor",box2d.b2WheelJoint.prototype.EnableMotor);box2d.b2WheelJoint.prototype.SetMotorSpeed=function(b){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_motorSpeed=b};goog.exportProperty(box2d.b2WheelJoint.prototype,"SetMotorSpeed",box2d.b2WheelJoint.prototype.SetMotorSpeed);box2d.b2WheelJoint.prototype.SetMaxMotorTorque=function(b){this.m_bodyA.SetAwake(!0);this.m_bodyB.SetAwake(!0);this.m_maxMotorTorque=b};goog.exportProperty(box2d.b2WheelJoint.prototype,"SetMaxMotorTorque",box2d.b2WheelJoint.prototype.SetMaxMotorTorque);box2d.b2WheelJoint.prototype.GetMotorTorque=function(b){return b*this.m_motorImpulse};goog.exportProperty(box2d.b2WheelJoint.prototype,"GetMotorTorque",box2d.b2WheelJoint.prototype.GetMotorTorque);box2d.b2WheelJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2WheelJointDef*/ var jd = new box2d.b2WheelJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y);box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y);box2d.b2Log("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y);box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false");box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed);box2d.b2Log("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque);box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz);box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2WheelJoint.prototype,"Dump",box2d.b2WheelJoint.prototype.Dump);box2d.b2MotorJointDef=function(){box2d.b2JointDef.call(this,box2d.b2JointType.e_motorJoint);this.linearOffset=new box2d.b2Vec2(0,0)};goog.inherits(box2d.b2MotorJointDef,box2d.b2JointDef);goog.exportSymbol("box2d.b2MotorJointDef",box2d.b2MotorJointDef);box2d.b2MotorJointDef.prototype.linearOffset=null;goog.exportProperty(box2d.b2MotorJointDef.prototype,"linearOffset",box2d.b2MotorJointDef.prototype.linearOffset);box2d.b2MotorJointDef.prototype.angularOffset=0;goog.exportProperty(box2d.b2MotorJointDef.prototype,"angularOffset",box2d.b2MotorJointDef.prototype.angularOffset);box2d.b2MotorJointDef.prototype.maxForce=1;goog.exportProperty(box2d.b2MotorJointDef.prototype,"maxForce",box2d.b2MotorJointDef.prototype.maxForce);box2d.b2MotorJointDef.prototype.maxTorque=1;goog.exportProperty(box2d.b2MotorJointDef.prototype,"maxTorque",box2d.b2MotorJointDef.prototype.maxTorque);box2d.b2MotorJointDef.prototype.correctionFactor=0.3;goog.exportProperty(box2d.b2MotorJointDef.prototype,"correctionFactor",box2d.b2MotorJointDef.prototype.correctionFactor);box2d.b2MotorJointDef.prototype.Initialize=function(e,d){this.bodyA=e;this.bodyB=d;this.bodyA.GetLocalPoint(this.bodyB.GetPosition(),this.linearOffset);var f=this.bodyA.GetAngleRadians();this.angularOffset=this.bodyB.GetAngleRadians()-f};goog.exportProperty(box2d.b2MotorJointDef.prototype,"Initialize",box2d.b2MotorJointDef.prototype.Initialize);box2d.b2MotorJoint=function(b){box2d.b2Joint.call(this,b);this.m_linearOffset=b.linearOffset.Clone();this.m_linearImpulse=new box2d.b2Vec2(0,0);this.m_maxForce=b.maxForce;this.m_maxTorque=b.maxTorque;this.m_correctionFactor=b.correctionFactor;this.m_rA=new box2d.b2Vec2(0,0);this.m_rB=new box2d.b2Vec2(0,0);this.m_localCenterA=new box2d.b2Vec2(0,0);this.m_localCenterB=new box2d.b2Vec2(0,0);this.m_linearError=new box2d.b2Vec2(0,0);this.m_linearMass=new box2d.b2Mat22;this.m_qA=new box2d.b2Rot;this.m_qB=new box2d.b2Rot;this.m_K=new box2d.b2Mat22};goog.inherits(box2d.b2MotorJoint,box2d.b2Joint);goog.exportSymbol("box2d.b2MotorJoint",box2d.b2MotorJoint);box2d.b2MotorJoint.prototype.m_linearOffset=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearOffset",box2d.b2MotorJoint.prototype.m_linearOffset);box2d.b2MotorJoint.prototype.m_angularOffset=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularOffset",box2d.b2MotorJoint.prototype.m_angularOffset);box2d.b2MotorJoint.prototype.m_linearImpulse=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearImpulse",box2d.b2MotorJoint.prototype.m_linearImpulse);box2d.b2MotorJoint.prototype.m_angularImpulse=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularImpulse",box2d.b2MotorJoint.prototype.m_angularImpulse);box2d.b2MotorJoint.prototype.m_maxForce=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_maxForce",box2d.b2MotorJoint.prototype.m_maxForce);box2d.b2MotorJoint.prototype.m_maxTorque=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_maxTorque",box2d.b2MotorJoint.prototype.m_maxTorque);box2d.b2MotorJoint.prototype.m_correctionFactor=0.3;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_correctionFactor",box2d.b2MotorJoint.prototype.m_correctionFactor);box2d.b2MotorJoint.prototype.m_indexA=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_indexA",box2d.b2MotorJoint.prototype.m_indexA);box2d.b2MotorJoint.prototype.m_indexB=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_indexB",box2d.b2MotorJoint.prototype.m_indexB);box2d.b2MotorJoint.prototype.m_rA=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_rA",box2d.b2MotorJoint.prototype.m_rA);box2d.b2MotorJoint.prototype.m_rB=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_rB",box2d.b2MotorJoint.prototype.m_rB);box2d.b2MotorJoint.prototype.m_localCenterA=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_localCenterA",box2d.b2MotorJoint.prototype.m_localCenterA);box2d.b2MotorJoint.prototype.m_localCenterB=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_localCenterB",box2d.b2MotorJoint.prototype.m_localCenterB);box2d.b2MotorJoint.prototype.m_linearError=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearError",box2d.b2MotorJoint.prototype.m_linearError);box2d.b2MotorJoint.prototype.m_angularError=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularError",box2d.b2MotorJoint.prototype.m_angularError);box2d.b2MotorJoint.prototype.m_invMassA=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invMassA",box2d.b2MotorJoint.prototype.m_invMassA);box2d.b2MotorJoint.prototype.m_invMassB=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invMassB",box2d.b2MotorJoint.prototype.m_invMassB);box2d.b2MotorJoint.prototype.m_invIA=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invIA",box2d.b2MotorJoint.prototype.m_invIA);box2d.b2MotorJoint.prototype.m_invIB=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_invIB",box2d.b2MotorJoint.prototype.m_invIB);box2d.b2MotorJoint.prototype.m_linearMass=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_linearMass",box2d.b2MotorJoint.prototype.m_linearMass);box2d.b2MotorJoint.prototype.m_angularMass=0;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_angularMass",box2d.b2MotorJoint.prototype.m_angularMass);box2d.b2MotorJoint.prototype.m_qA=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_qA",box2d.b2MotorJoint.prototype.m_qA);box2d.b2MotorJoint.prototype.m_qB=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_qB",box2d.b2MotorJoint.prototype.m_qB);box2d.b2MotorJoint.prototype.m_K=null;goog.exportProperty(box2d.b2MotorJoint.prototype,"m_K",box2d.b2MotorJoint.prototype.m_K);box2d.b2MotorJoint.prototype.GetAnchorA=function(b){return this.m_bodyA.GetPosition(b)};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetAnchorA",box2d.b2MotorJoint.prototype.GetAnchorA);box2d.b2MotorJoint.prototype.GetAnchorB=function(b){return this.m_bodyB.GetPosition(b)};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetAnchorB",box2d.b2MotorJoint.prototype.GetAnchorB);box2d.b2MotorJoint.prototype.GetReactionForce=function(e,d){return box2d.b2MulSV(e,this.m_linearImpulse,d)};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetReactionForce",box2d.b2MotorJoint.prototype.GetReactionForce);box2d.b2MotorJoint.prototype.GetReactionTorque=function(b){return b*this.m_angularImpulse};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetReactionTorque",box2d.b2MotorJoint.prototype.GetReactionTorque);box2d.b2MotorJoint.prototype.SetLinearOffset=function(b){box2d.b2IsEqualToV(b,this.m_linearOffset)||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(b))};goog.exportProperty(box2d.b2MotorJoint.prototype,"SetLinearOffset",box2d.b2MotorJoint.prototype.SetLinearOffset);box2d.b2MotorJoint.prototype.GetLinearOffset=function(b){return b.Copy(this.m_linearOffset)};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetLinearOffset",box2d.b2MotorJoint.prototype.GetLinearOffset);box2d.b2MotorJoint.prototype.SetAngularOffset=function(b){b!=this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=b)};goog.exportProperty(box2d.b2MotorJoint.prototype,"SetAngularOffset",box2d.b2MotorJoint.prototype.SetAngularOffset);box2d.b2MotorJoint.prototype.GetAngularOffset=function(){return this.m_angularOffset};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetAngularOffset",box2d.b2MotorJoint.prototype.GetAngularOffset);box2d.b2MotorJoint.prototype.SetMaxForce=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(b)&&0<=b);this.m_maxForce=b};goog.exportProperty(box2d.b2MotorJoint.prototype,"SetMaxForce",box2d.b2MotorJoint.prototype.SetMaxForce);box2d.b2MotorJoint.prototype.GetMaxForce=function(){return this.m_maxForce};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetMaxForce",box2d.b2MotorJoint.prototype.GetMaxForce);box2d.b2MotorJoint.prototype.SetMaxTorque=function(b){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(b)&&0<=b);this.m_maxTorque=b};goog.exportProperty(box2d.b2MotorJoint.prototype,"SetMaxTorque",box2d.b2MotorJoint.prototype.SetMaxTorque);box2d.b2MotorJoint.prototype.GetMaxTorque=function(){return this.m_maxTorque};goog.exportProperty(box2d.b2MotorJoint.prototype,"GetMaxTorque",box2d.b2MotorJoint.prototype.GetMaxTorque);box2d.b2MotorJoint.prototype.InitVelocityConstraints=function(J){this.m_indexA=this.m_bodyA.m_islandIndex;this.m_indexB=this.m_bodyB.m_islandIndex;this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);this.m_invMassA=this.m_bodyA.m_invMass;this.m_invMassB=this.m_bodyB.m_invMass;this.m_invIA=this.m_bodyA.m_invI;this.m_invIB=this.m_bodyB.m_invI;var I=J.positions[this.m_indexA].c,H=J.positions[this.m_indexA].a,F=J.velocities[this.m_indexA].v,G=J.velocities[this.m_indexA].w,E=J.positions[this.m_indexB].c,D=J.positions[this.m_indexB].a,C=J.velocities[this.m_indexB].v,A=J.velocities[this.m_indexB].w,B=this.m_qA.SetAngleRadians(H),z=this.m_qB.SetAngleRadians(D),y=box2d.b2MulRV(B,box2d.b2NegV(this.m_localCenterA,box2d.b2Vec2.s_t0),this.m_rA),z=box2d.b2MulRV(z,box2d.b2NegV(this.m_localCenterB,box2d.b2Vec2.s_t0),this.m_rB),v=this.m_invMassA,u=this.m_invMassB,j=this.m_invIA,K=this.m_invIB,L=this.m_K;L.ex.x=v+u+j*y.y*y.y+K*z.y*z.y;L.ex.y=-j*y.x*y.y-K*z.x*z.y;L.ey.x=L.ex.y;L.ey.y=v+u+j*y.x*y.x+K*z.x*z.x;L.GetInverse(this.m_linearMass);this.m_angularMass=j+K;0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass);box2d.b2SubVV(box2d.b2SubVV(box2d.b2AddVV(E,z,box2d.b2Vec2.s_t0),box2d.b2AddVV(I,y,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t2),box2d.b2MulRV(B,this.m_linearOffset,box2d.b2Vec2.s_t3),this.m_linearError);this.m_angularError=D-H-this.m_angularOffset;J.step.warmStarting?(this.m_linearImpulse.SelfMul(J.step.dtRatio),this.m_angularImpulse*=J.step.dtRatio,I=this.m_linearImpulse,F.SelfMulSub(v,I),G-=j*(box2d.b2CrossVV(y,I)+this.m_angularImpulse),C.SelfMulAdd(u,I),A+=K*(box2d.b2CrossVV(z,I)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0);J.velocities[this.m_indexA].w=G;J.velocities[this.m_indexB].w=A};goog.exportProperty(box2d.b2MotorJoint.prototype,"InitVelocityConstraints",box2d.b2MotorJoint.prototype.InitVelocityConstraints);box2d.b2MotorJoint.prototype.SolveVelocityConstraints=function(J){var I=J.velocities[this.m_indexA].v,H=J.velocities[this.m_indexA].w,F=J.velocities[this.m_indexB].v,G=J.velocities[this.m_indexB].w,E=this.m_invMassA,D=this.m_invMassB,C=this.m_invIA,A=this.m_invIB,B=J.step.dt,z=J.step.inv_dt,y=G-H+z*this.m_correctionFactor*this.m_angularError,y=-this.m_angularMass*y,v=this.m_angularImpulse,u=B*this.m_maxTorque;this.m_angularImpulse=box2d.b2Clamp(this.m_angularImpulse+y,-u,u);var y=this.m_angularImpulse-v,H=H-C*y,G=G+A*y,j=this.m_rA,K=this.m_rB,y=box2d.b2AddVV(box2d.b2SubVV(box2d.b2AddVV(F,box2d.b2CrossSV(G,K,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2AddVV(I,box2d.b2CrossSV(H,j,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t2),box2d.b2MulSV(z*this.m_correctionFactor,this.m_linearError,box2d.b2Vec2.s_t3),box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_Cdot),y=box2d.b2MulMV(this.m_linearMass,y,box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_impulse).SelfNeg(),v=box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_oldImpulse.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(y);u=B*this.m_maxForce;this.m_linearImpulse.GetLengthSquared()>u*u&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(u));box2d.b2SubVV(this.m_linearImpulse,v,y);I.SelfMulSub(E,y);H-=C*box2d.b2CrossVV(j,y);F.SelfMulAdd(D,y);G+=A*box2d.b2CrossVV(K,y);J.velocities[this.m_indexA].w=H;J.velocities[this.m_indexB].w=G};goog.exportProperty(box2d.b2MotorJoint.prototype,"SolveVelocityConstraints",box2d.b2MotorJoint.prototype.SolveVelocityConstraints);box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2;box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec2;box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_oldImpulse=new box2d.b2Vec2;box2d.b2MotorJoint.prototype.SolvePositionConstraints=function(b){return !0};goog.exportProperty(box2d.b2MotorJoint.prototype,"SolvePositionConstraints",box2d.b2MotorJoint.prototype.SolvePositionConstraints);box2d.b2MotorJoint.prototype.Dump=function(){if(box2d.DEBUG){var e=this.m_bodyA.m_islandIndex,d=this.m_bodyB.m_islandIndex;box2d.b2Log("  /*box2d.b2MotorJointDef*/ var jd = new box2d.b2MotorJointDef();\n");box2d.b2Log("  jd.bodyA = bodies[%d];\n",e);box2d.b2Log("  jd.bodyB = bodies[%d];\n",d);box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false");box2d.b2Log("  jd.linearOffset.SetXY(%.15f, %.15f);\n",this.m_linearOffset.x,this.m_linearOffset.y);box2d.b2Log("  jd.angularOffset = %.15f;\n",this.m_angularOffset);box2d.b2Log("  jd.maxForce = %.15f;\n",this.m_maxForce);box2d.b2Log("  jd.maxTorque = %.15f;\n",this.m_maxTorque);box2d.b2Log("  jd.correctionFactor = %.15f;\n",this.m_correctionFactor);box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}};goog.exportProperty(box2d.b2MotorJoint.prototype,"Dump",box2d.b2MotorJoint.prototype.Dump);goog.provide("box2d.Render");box2d.b2DebugDraw=function(b){goog.base(this);this.scale=b.scale;this.m_canvas=b.canvas||false;this.m_ctx=b.ctx||false;this.m_settings=b.flags||box2d.b2DrawFlags.e_shapeBit;this.alpha=b.alpha||0.5};goog.inherits(box2d.b2DebugDraw,box2d.b2Draw);box2d.b2DebugDraw.prototype.m_canvas=null;box2d.b2DebugDraw.prototype.m_ctx=null;box2d.b2DebugDraw.prototype.m_settings=null;box2d.b2DebugDraw.prototype.scale=40;box2d.b2DebugDraw.prototype.alpha=0.5;box2d.b2DebugDraw.prototype.PushTransform=function(d){var b=this.m_ctx;b.save();b.globalAlpha=this.alpha;b.translate(d.p.x*this.scale,d.p.y*this.scale);b.rotate(d.q.GetAngleRadians())};box2d.b2DebugDraw.prototype.PopTransform=function(d){var b=this.m_ctx;b.restore()};box2d.b2DebugDraw.prototype.DrawPolygon=function(e,g,d){if(!g){return}var b=this.m_ctx;b.beginPath();b.moveTo(e[0].x,e[0].y);for(var f=1;f<g;f++){b.lineTo(e[f].x*this.scale,e[f].y*this.scale)}b.closePath();b.strokeStyle=d.MakeStyleString(1);b.stroke()};box2d.b2DebugDraw.prototype.DrawSolidPolygon=function(e,g,d){if(!g){return}var b=this.m_ctx;b.beginPath();b.moveTo(e[0].x*this.scale,e[0].y*this.scale);for(var f=1;f<g;f++){b.lineTo(e[f].x*this.scale,e[f].y*this.scale)}b.closePath();b.fillStyle=d.MakeStyleString(0.5);b.fill();b.strokeStyle=d.MakeStyleString(1);b.stroke()};box2d.b2DebugDraw.prototype.DrawCircle=function(d,b,f){if(!b){return}var e=this.m_ctx;e.beginPath();e.arc(d.x*this.scale,d.y*this.scale,b*this.scale,0,box2d.b2_pi*2,true);e.strokeStyle=f.MakeStyleString(1);e.stroke()};box2d.b2DebugDraw.prototype.DrawSolidCircle=function(e,d,j,g){if(!d){return}var f=this.m_ctx;var b=e.x*this.scale;var k=e.y*this.scale;f.beginPath();f.arc(b,k,d,0,box2d.b2_pi*2,true);f.moveTo(b,k);f.lineTo((b+j.x*this.scale*d),(k+j.y*this.scale*d));f.fillStyle=g.MakeStyleString(0.5);f.fill();f.strokeStyle=g.MakeStyleString(1);f.stroke()};box2d.b2DebugDraw.prototype.DrawSegment=function(f,e,d){var b=this.m_ctx;b.beginPath();b.moveTo(f.x*this.scale,f.y*this.scale);b.lineTo(e.x*this.scale,e.y*this.scale);b.strokeStyle=d.MakeStyleString(1);b.stroke()};box2d.b2DebugDraw.prototype.DrawTransform=function(d){var b=this.m_ctx;this.PushTransform(d);b.beginPath();b.moveTo(0,0);b.lineTo(1,0);b.strokeStyle=box2d.b2Color.RED.MakeStyleString(1);b.stroke();b.beginPath();b.moveTo(0,0);b.lineTo(0,1);b.strokeStyle=box2d.b2Color.GREEN.MakeStyleString(1);b.stroke();this.PopTransform(d)};box2d.b2DebugDraw.prototype.DrawPoint=function(g,f,e){var d=this.m_ctx;d.fillStyle=e.MakeStyleString();f/=this.m_settings.viewZoom;f/=this.m_settings.canvasScale;var b=f/2;d.fillRect(g.x*this.scale-b,g.y*this.scale-b,f,f)};box2d.b2DebugDraw.prototype.DrawString=function(b,m,j,k){var d=this.m_ctx;var g=Array.prototype.slice.call(arguments);var f=goog.string.format.apply(null,g.slice(2));d.save();d.setTransform(1,0,0,1,0,0);d.font="18pt helvetica";var e=box2d.b2DebugDraw.prototype.DrawString.s_color;d.fillStyle=e.MakeStyleString();d.fillText(f,b*this.scale,m*this.scale);d.restore()};box2d.b2DebugDraw.prototype.DrawString.s_color=new box2d.b2Color(0.9,0.6,0.6);box2d.b2DebugDraw.prototype.DrawStringWorld=function(m,k,q,n){var b=box2d.b2DebugDraw.prototype.DrawStringWorld.s_p.SetXY(m,k);var r=this.m_settings.viewCenter;box2d.b2SubVV(b,r,b);var z=this.m_settings.viewRotation;box2d.b2MulTRV(z,b,b);var v=this.m_settings.viewZoom;box2d.b2MulSV(v,b,b);var g=this.m_settings.canvasScale;box2d.b2MulSV(g,b,b);b.y*=-1;var d=box2d.b2DebugDraw.prototype.DrawStringWorld.s_cc.SetXY(0.5*this.m_canvas.width,0.5*this.m_canvas.height);box2d.b2AddVV(b,d,b);var u=this.m_ctx;var j=Array.prototype.slice.call(arguments);var f=goog.string.format.apply(null,j.slice(2));u.save();u.setTransform(1,0,0,1,0,0);u.font="18pt helvetica";var e=box2d.b2DebugDraw.prototype.DrawStringWorld.s_color;u.fillStyle=e.MakeStyleString();u.fillText(f,b.x*this.scale,b.y*this.scale);u.restore()};box2d.b2DebugDraw.prototype.DrawStringWorld.s_p=new box2d.b2Vec2();box2d.b2DebugDraw.prototype.DrawStringWorld.s_cc=new box2d.b2Vec2();box2d.b2DebugDraw.prototype.DrawStringWorld.s_color=new box2d.b2Color(0.5,0.9,0.5);box2d.b2DebugDraw.prototype.DrawAABB=function(f,g){var e=this.m_ctx;e.strokeStyle=g.MakeStyleString();var b=f.lowerBound.x;var k=f.lowerBound.y;var d=f.upperBound.x-f.lowerBound.x;var j=f.upperBound.y-f.lowerBound.y;e.strokeRect(b*this.scale,k*this.scale,d*this.scale,j*this.scale)};box2d.b2DebugDraw.prototype.SetFlags=function(b){this.m_settings=b};box2d.b2DebugDraw.prototype.GetFlags=function(){return this.m_settings};var b2AABB=box2d.b2AABB,b2Body=box2d.b2Body,b2BodyDef=box2d.b2BodyDef,b2ChainShape=box2d.b2ChainShape,b2CircleShape=box2d.b2CircleShape,b2ContactListener=box2d.b2ContactListener,b2DebugDraw=box2d.b2DebugDraw,b2EdgeChainDef=box2d.b2EdgeChainDef,b2EdgeShape=box2d.b2EdgeShape,b2Fixture=box2d.b2Fixture,b2FixtureDef=box2d.b2FixtureDef,b2Joint=box2d.b2Joint,b2MassData=box2d.b2MassData,b2Mat22=box2d.b2Mat22,b2MouseJointDef=box2d.b2MouseJointDef,b2PolygonShape=box2d.b2PolygonShape,b2PrismaticJointDef=box2d.b2PrismaticJointDef,b2RevoluteJointDef=box2d.b2RevoluteJointDef,b2Settings=box2d.b2Settings,b2Shape=box2d.b2Shape,b2World=box2d.b2World,b2WorldManifold=box2d.b2WorldManifold,b2Vec2=box2d.b2Vec2;CG.Entity.extend("B2DEntity",{init:function(d,f,e,b,j,g){this._super();this.instanceOf="B2DEntity";this.setImage(f);this.body={};this.x=b;this.y=j;this.scale=g;this.id={name:d,uid:0};this.world=e;this.xhandle=(this.width/2);this.yhandle=(this.height/2);if(!this.bodyDef){this.bodyDef=new b2BodyDef;this.bodyDef.allowSleep=true;this.bodyDef.awake=true}if(!this.fixDef){this.fixDef=new b2FixtureDef;this.fixDef.density=1;this.fixDef.friction=0.5;this.fixDef.restitution=0.5}this.isHit=false;this.strength=100;this.dead=false;return this},hit:function(d,b){this.isHit=true;if(this.strength){this.strength-=d;if(this.strength<=0){this.dead=true}}},update:function(){},draw:function(){Game.renderer.draw(this)}});CG.B2DEntity.extend("B2DCircle",{init:function(g,e,j,d,b,m,k,f){this._super(e,j,g,b,m,k);this.instanceOf="B2DCircle";this.radius=this.width/2;this.bodyDef.type=f||box2d.b2BodyType.b2_staticBody;this.bodyDef.position.x=this.x/this.scale;this.bodyDef.position.y=this.y/this.scale;this.bodyDef.userData=this.id;this.fixDef.shape=new b2CircleShape(this.radius/this.scale);this.body=this.world.CreateBody(this.bodyDef);this.body.CreateFixture(this.fixDef);return this}});CG.B2DEntity.extend("B2DLine",{init:function(e,d,g,b,f){this._super(d,false,e,0,0,f);this.instanceOf="B2DLine";this.start=g;this.end=b;this.xhandle=0;this.yhandle=0;this.fixDef.shape=new b2EdgeShape();this.fixDef.shape.Set(this.start,this.end);this.bodyDef.type=box2d.b2BodyType.b2_staticBody;this.bodyDef.position.SetXY(0/this.scale,0/this.scale);this.bodyDef.userData=this.id;this.body=this.world.CreateBody(this.bodyDef);this.body.CreateFixture(this.fixDef);return this},update:function(){},draw:function(){}});CG.B2DEntity.extend("B2DRectangle",{init:function(f,d,g,b,k,j,e){this._super(d,g,f,b,k,j);this.instanceOf="B2DRectangle";this.bodyDef.type=e||box2d.b2BodyType.b2_staticBody;this.fixDef.shape=new b2PolygonShape;this.fixDef.shape.SetAsBox(this.width/j*0.5,this.height/j*0.5);this.bodyDef.position.x=this.x/this.scale;this.bodyDef.position.y=this.y/this.scale;this.bodyDef.userData=this.id;this.body=this.world.CreateBody(this.bodyDef);this.body.CreateFixture(this.fixDef);return this}});CG.B2DEntity.extend("B2DPolygon",{init:function(n,e,j,d,r,q,g,k,b){this._super(e,j,n,r,q,g);this.instanceOf="B2DPolygon";this.polys=new Array();this.jsondata=d.data[e];this.xhandle=0;this.yhandle=0;this.vecs=new Array();this.vecs=this.getPolysFromJson(d);this.bodyDef.type=k||box2d.b2BodyType.b2_staticBody;this.bodyDef.position.SetXY(this.x/this.scale,this.y/this.scale);this.bodyDef.userData=this.id;this.bullet=b||false;this.bodyDef.bullet=this.bullet;this.body=this.world.CreateBody(this.bodyDef);for(var m=0,f=this.vecs.length;m<f;m++){this.bodyShapePoly=new b2PolygonShape;this.bodyShapePoly.bounce=this.jsondata[m].restitution;this.bodyShapePoly.SetAsArray(this.vecs[m],this.vecs[m].length);this.fixDef.density=this.jsondata[m].density;this.fixDef.friction=this.jsondata[m].friction;this.fixDef.shape=this.bodyShapePoly;this.body.CreateFixture(this.fixDef)}return this},getPolysFromJson:function(){var j=[];for(var f=0,d=this.jsondata.length;f<d;f++){poly=this.jsondata[f].shape;var e=[];for(var g=0,b=poly.length;g<b;g=g+2){vec=new b2Vec2(poly[g]/this.scale,poly[g+1]/this.scale);e.push(vec)}j.push(e)}return j}});CG.B2DEntity.extend("B2DTerrain",{init:function(j,d,f,k,n,m,e,g,b){this._super(d,f,j,n,m,e);this.polys=new Array();this.terrainPoly=k;this.terrainTriangles=[];this.holes=[];this.xhandle=0;this.yhandle=0;this.bodyDef.type=g||box2d.b2BodyType.b2_staticBody;this.bodyDef.position.SetXY(this.x/this.scale,this.y/this.scale);this.bodyDef.userData=this.id;this.bullet=b||false;this.bodyDef.bullet=this.bullet;this.createTerrain();return this},createTerrain:function(){this.body=this.world.CreateBody(this.bodyDef);for(var f=0,b=this.terrainPoly.length;f<b;f++){try{var j=new poly2tri.SweepContext(this.terrainPoly[f].outer,{cloneArrays:true});if(this.terrainPoly[f].holes.length>0){for(var g=0,d=this.terrainPoly[f].holes.length;g<d;g++){j.addHole(this.terrainPoly[f].holes[g])}}j.triangulate();this.terrainTriangles=this.terrainTriangles.concat(j.getTriangles()||[])}catch(k){console.log(k)}}for(var g=0,d=this.terrainTriangles.length;g<d;g++){this.bodyShapePoly=new b2PolygonShape;this.bodyShapePoly.bounce=0.5;this.bodyShapePoly.SetAsArray(this.getPolysFromTriangulation(this.terrainTriangles[g].points_),this.terrainTriangles[g].points_.length);this.fixDef.density=0.5;this.fixDef.friction=0.5;this.fixDef.shape=this.bodyShapePoly;this.body.CreateFixture(this.fixDef)}},deleteTerrain:function(){this.terrainTriangles=[];this.world.DestroyBody(this.body)},clipTerrain:function(e){var g=this.createCircle(e);for(var f=0,n=this.terrainPoly.length;f<n;f++){this.terrainPoly[f].holes.push(g)}var v=[];var d=[];var u=[];for(var f=0,n=this.terrainPoly.length;f<n;f++){d=[this.terrainPoly[f].outer];u=[];if(this.terrainPoly[f].holes.length>0){for(var k=0,j=this.terrainPoly[f].holes.length;k<j;k++){u.push(this.terrainPoly[f].holes[k])}}var q=new ClipperLib.Clipper();q.AddPolygons(d,ClipperLib.PolyType.ptSubject);q.AddPolygons(u,ClipperLib.PolyType.ptClip);var r=new ClipperLib.ExPolygons();q.Execute(ClipperLib.ClipType.ctDifference,r,ClipperLib.PolyFillType.pftNonZero,ClipperLib.PolyFillType.pftNonZero);if(r.length>0){for(var b=0,m=r.length;b<m;b++){v.push(r[b])}}}this.terrainPoly=v;this.lightenTerrain();this.deleteTerrain();this.createTerrain()},lightenTerrain:function(){var f=0.02;for(var g=0,b=this.terrainPoly.length;g<b;g++){var e=ClipperLib.Lighten(this.terrainPoly[g].outer,f*this.scale);this.terrainPoly[g].outer=e[0];if(this.terrainPoly[g].holes.length>0){for(var j=0,d=this.terrainPoly[g].holes.length;j<d;j++){var e=ClipperLib.Lighten(this.terrainPoly[g].holes[j],f*this.scale);this.terrainPoly[g].holes[j]=e[0]}}}},cleanTerrain:function(){var f=0.1;for(var g=0,b=this.terrainPoly.length;g<b;g++){var e=ClipperLib.Clean(this.terrainPoly[g].outer,f*this.scale);this.terrainPoly[g].outer=e[0];if(this.terrainPoly[g].holes.length>0){for(var j=0,d=this.terrainPoly[g].holes.length;j<d;j++){var e=ClipperLib.Clean(this.terrainPoly[g].holes[j],f*this.scale);this.terrainPoly[g].holes[j]=e[0]}}}},getPolysFromTriangulation:function(g){var e=[];for(var d=0,b=g.length;d<b;d++){var f=g[d];e.push(new b2Vec2(f.x/this.scale,f.y/this.scale))}return e},createCircle:function(e){var f=2*Math.PI/e.points;var d=[];for(var b=0;b<e.points;b++){d.push({x:e.x+e.radius*Math.cos(f*b),y:e.y+e.radius*Math.sin(f*b)})}return d.reverse()},update:function(){},draw:function(){}});CG.B2DEntity.extend("B2DChainShape",{init:function(g,e,d,b,k,j,f){this._super(e,false,g,b,k,j);this.instanceOf="B2DChainShape";this.vertices=this.convertRealWorldPointToBox2DVec2(d);this.xhandle=0;this.yhandle=0;this.bodyDef.type=f||box2d.b2BodyType.b2_staticBody;this.bodyDef.position.SetXY(this.x/this.scale,this.y/this.scale);this.bodyDef.userData=this.id;this.fixDef.shape=new b2ChainShape();this.fixDef.shape.CreateChain(this.vertices,this.vertices.length);this.body=this.world.CreateBody(this.bodyDef);this.body.CreateFixture(this.fixDef);return this},convertRealWorldPointToBox2DVec2:function(d){var g=[];for(var f=0,b=d.length;f<b;f++){var e=new b2Vec2(d[f].x/this.scale,d[f].y/this.scale);g.push(e)}return g},update:function(){},draw:function(){}});CG.B2DEntity.extend("B2DRope",{init:function(m,b,g,q,n,d,k,r,f){this._super(b,g,m,q,n,f);this.instanceOf="B2DRope";this.length=d;this.segments=k;this.segmentHeight=((this.length-this.y)/this.segments)/2;this.segmentWidth=r;this.anchor=new b2Vec2();this.prevBody={};this.bodyGroup=[];this.bodyCount=0;this.body={};this.fixtureDef=new b2FixtureDef();this.bodyShapeCircle=new b2CircleShape();this.bodyDef=new b2BodyDef();this.bodyDef.userData=this.id;this.bodyShapeCircle.m_radius=this.segmentWidth/this.scale;this.fixtureDef.density=1;this.fixtureDef.restitution=0.2;this.fixtureDef.friction=0.2;this.fixtureDef.shape=this.bodyShapeCircle;this.bodyDef.position.SetXY(this.x/this.scale,this.y/this.scale);this.body=this.bodyGroup[0]=this.world.CreateBody(this.bodyDef);this.bodyGroup[0].CreateFixture(this.fixtureDef);this.prevBody=this.bodyGroup[0];this.fixtureDef=new b2FixtureDef();this.bodyShapePoly=new b2PolygonShape();this.bodyDef=new b2BodyDef();this.bodyDef.userData=this.id;this.bodyShapePoly.SetAsBox(this.segmentWidth/this.scale,this.segmentHeight/this.scale);this.bodyDef.type=box2d.b2BodyType.b2_dynamicBody;this.fixtureDef.shape=this.bodyShapePoly;this.fixtureDef.density=20;this.fixtureDef.restitution=0.2;this.fixtureDef.friction=0.2;this.jointDef=new b2RevoluteJointDef();this.jointDef.lowerAngle=-25/(180/Math.PI);this.jointDef.upperAngle=25/(180/Math.PI);this.jointDef.enableLimit=true;for(var j=0,e=this.segments;j<e;j++){this.bodyDef.position.SetXY(this.x/this.scale,((this.y+this.segmentHeight)+(this.segmentHeight*2)*j)/this.scale);this.bodyGroup[j+1]=this.world.CreateBody(this.bodyDef);this.bodyGroup[j+1].CreateFixture(this.fixtureDef);this.anchor.SetXY(this.x/this.scale,(this.y+(this.segmentHeight*2)*j)/this.scale);this.jointDef.Initialize(this.prevBody,this.bodyGroup[j+1],this.anchor);this.world.CreateJoint(this.jointDef);this.prevBody=this.bodyGroup[j+1];this.bodyCount=j+1}return this},draw:function(){for(var b=1;b<=this.bodyCount;b++){this.body=this.bodyGroup[b];Game.renderer.draw(this)}}});CG.B2DEntity.extend("B2DBridge",{init:function(n,b,j,r,q,e,m,d,g){this._super(b,j,n,r,q,g);this.instanceOf="B2DBridge";this.length=e;this.segments=m;this.segmentHeight=d;this.segmentWidth=((this.length-this.x)/this.segments)/2;this.anchor=new b2Vec2();this.prevBody={};this.bodyGroup=[];this.bodyCount=0;this.body={};this.fixtureDef=new b2FixtureDef();this.bodyShapeCircle=new b2CircleShape();this.bodyDef=new b2BodyDef();this.bodyDef.userData=this.id;this.bodyShapeCircle.m_radius=this.segmentHeight/this.scale;this.fixtureDef.density=20;this.fixtureDef.restitution=0.2;this.fixtureDef.friction=0.2;this.fixtureDef.shape=this.bodyShapeCircle;this.bodyDef.position.SetXY(this.x/this.scale,this.y/this.scale);this.body=this.bodyGroup[0]=this.world.CreateBody(this.bodyDef);this.bodyGroup[0].CreateFixture(this.fixtureDef);this.prevBody=this.bodyGroup[0];this.bodyDef.position.SetXY(this.length/this.scale,this.y/this.scale);this.bodyDef.userData=this.id;this.bodyGroup[1]=this.world.CreateBody(this.bodyDef);this.bodyGroup[1].CreateFixture(this.fixtureDef);this.fixtureDef=new b2FixtureDef();this.bodyShapePoly=new b2PolygonShape();this.bodyDef=new b2BodyDef();this.bodyDef.userData=this.id;this.bodyShapePoly.SetAsBox(this.segmentWidth/this.scale,this.segmentHeight/this.scale);this.bodyDef.type=box2d.b2BodyType.b2_dynamicBody;this.fixtureDef.shape=this.bodyShapePoly;this.fixtureDef.density=20;this.fixtureDef.restitution=0.2;this.fixtureDef.friction=0.2;this.jointDef=new b2RevoluteJointDef();this.jointDef.lowerAngle=-25/(180/Math.PI);this.jointDef.upperAngle=25/(180/Math.PI);this.jointDef.enableLimit=true;for(var k=0,f=this.segments;k<f;k++){this.bodyDef.position.SetXY(((this.x+this.segmentWidth)+(this.segmentWidth*2)*k)/this.scale,this.y/this.scale);this.bodyGroup[k+2]=this.world.CreateBody(this.bodyDef);this.bodyGroup[k+2].CreateFixture(this.fixtureDef);this.anchor.SetXY((this.x+(this.segmentWidth*2)*k)/this.scale,this.y/this.scale);this.jointDef.Initialize(this.prevBody,this.bodyGroup[k+2],this.anchor);this.world.CreateJoint(this.jointDef);this.prevBody=this.bodyGroup[k+2];this.bodyCount=k+2}this.anchor.SetXY((this.x+(this.segmentWidth*2)*this.segments-1)/this.scale,this.y/this.scale);this.jointDef.Initialize(this.prevBody,this.bodyGroup[1],this.anchor);this.world.CreateJoint(this.jointDef);return this},draw:function(){for(var b=2;b<=this.bodyCount;b++){this.body=this.bodyGroup[b];Game.renderer.draw(this)}}});CG.Layer.extend("B2DWorld",{init:function(b,d){this.framerate=1/30;this.opt=d||{};this.name=b||"";this.debug=false;this.x=0;this.y=0;this.elements=[];this.world=new b2World(new b2Vec2(0,10),this.opt.sleep||true);this.uid=0;this.scale=40;this.world.m_groundBody=this.world.CreateBody(new b2BodyDef());var e=new b2DebugDraw({scale:this.scale,canvas:Game.b_canvas,ctx:Game.b_ctx,flags:box2d.b2DrawFlags.e_shapeBit|box2d.b2DrawFlags.e_jointBit});this.world.SetDebugDraw(e)},update:function(){this.world.Step(this.framerate,10,10);if(CG.mousedown){this.mouseDownAt(mousex,mousey)}else{if(this.isMouseDown()){this.mouseUp()}}for(var d=0,b=this.elements.length;d<b;d++){this.elements[d].update()}},draw:function(){Game.b_ctx.save();Game.b_ctx.translate(this.x,this.y);for(var d=0,b=this.elements.length;d<b;d++){this.elements[d].draw()}if(this.debug){this.world.DrawDebugData();this.world.ClearForces()}Game.b_ctx.restore()},addCustom:function(b){this.uid=this.uid+1;b.id.uid=this.uid;this.elements.push(b)},createBox:function(j,f,b,g,e){this.uid=this.uid+1;var d=new CG.B2DRectangle(this.world,j,f,b,g,this.scale,e);d.id.uid=this.uid;this.elements.push(d);return d},createLine:function(f,e,b){this.uid=this.uid+1;var d=new CG.B2DLine(this.world,f,new b2Vec2(e.x/this.scale,e.y/this.scale),new b2Vec2(b.x/this.scale,b.y/this.scale),this.scale);d.id.uid=this.uid;this.elements.push(d);return d},createCircle:function(k,g,d,b,j,f){this.uid=this.uid+1;var e=new CG.B2DCircle(this.world,k,g,d,b,j,this.scale,f);e.id.uid=this.uid;this.elements.push(e);return e},createPolyBody:function(m,j,g,b,k,f,d){this.uid=this.uid+1;var e=new CG.B2DPolygon(this.world,m,j,g,b,k,this.scale,f,d);e.id.uid=this.uid;this.elements.push(e);return e},createTerrain:function(m,j,g,b,k,f,d){this.uid=this.uid+1;var e=new CG.B2DTerrain(this.world,m,j,g,b,k,this.scale,f,d);e.id.uid=this.uid;this.elements.push(e);return e},createChainShape:function(j,e,b,g,f){this.uid=this.uid+1;var d=new CG.B2DChainShape(this.world,j,e,b,g,this.scale,f);d.id.uid=this.uid;this.elements.push(d);return d},createBridge:function(m,j,d,k,g,f,b){this.uid=this.uid+1;var e=new CG.B2DBridge(this.world,m,j,d,k,g,f,b,this.scale);e.id.uid=this.uid;this.elements.push(e);return e},createRope:function(m,j,d,k,g,f,b){this.uid=this.uid+1;var e=new CG.B2DRope(this.world,m,j,d,k,g,f,b,this.scale);e.id.uid=this.uid;this.elements.push(e);return e},mouseDownAt:function(d,f){if(!this.mouseJoint){var b=this.getBodyAt(d,f);console.log(b);if(b){var e=new b2MouseJointDef();e.bodyA=this.world.m_groundBody;e.bodyB=b;e.target.SetXY((d-this.x)/this.scale,(f-this.y)/this.scale);e.collideConnected=true;e.maxForce=300*b.GetMass();this.mouseJoint=this.world.CreateJoint(e);b.SetAwake(true)}}else{this.mouseJoint.SetTarget(new b2Vec2((d-this.x)/this.scale,(f-this.y)/this.scale))}},mouseUp:function(){this.world.DestroyJoint(this.mouseJoint);this.mouseJoint=null},getBodyAt:function(b,k){var j=(b-this.x)/this.scale;var g=(k-this.y)/this.scale;var f=new b2Vec2(j,g);var e=new b2AABB();e.lowerBound.SetXY(j-0.001,g-0.001);e.upperBound.SetXY(j+0.001,g+0.001);var d=null;this.world.QueryAABB(function(m){if(m.GetBody().GetType()!=b2Body.b2_staticBody){if(m.GetShape().TestPoint(m.GetBody().GetTransform(),f)){d=m.GetBody();return false}}return true},e);return d},deleteBodyAt:function(b,f){body=this.getBodyAt(b,f);if(body){for(var e=0,d=this.elements.length;e<d;e++){if(this.elements[e].body.m_userData.uid==body.m_userData.uid){this.removeElementByIndex(e);this.world.DestroyBody(body);return true}}}return false},isMouseDown:function(){return(this.mouseJoint!=null)},removeElementByIndex:function(b){this.elements.splice(b,1)},removeElementByUid:function(e){for(var d=0,b=this.elements.length;d<b;d++){if(typeof this.elements[d].id!=="undefined"){if(this.elements[d].id.uid===e){this.elements.splice(d,1)}}}},applyImpulse:function(b,e,d){if(b){b.ApplyLinearImpulse(new b2Vec2(Math.cos(e*(Math.PI/180))*d,Math.sin(e*(Math.PI/180))*d),b.GetWorldCenter())}},addContactListener:function(b){var d=new box2d.b2ContactListener;if(b.BeginContact){d.BeginContact=function(e){b.BeginContact(e.GetFixtureA().GetBody(),e.GetFixtureB().GetBody())}}if(b.EndContact){d.EndContact=function(e){b.EndContact(e.GetFixtureA().GetBody(),e.GetFixtureB().GetBody())}}if(b.PostSolve){d.PostSolve=function(e,f){b.PostSolve(e.GetFixtureA().GetBody(),e.GetFixtureB().GetBody(),f.normalImpulses[0])}}if(b.PreSolve){d.PreSolve=function(e,f){b.PreSolve(e,f)}}this.world.SetContactListener(d)},getBodySpec:function(d){return{x:d.GetPosition().x,y:d.GetPosition().y,a:d.GetAngle(),c:{x:d.GetWorldCenter().x,y:d.GetWorldCenter().y}}}});